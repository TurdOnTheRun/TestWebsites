/* Src File:"list-page/components/application/javascript/bootstrap-large-5f551909d40bb2a40a3ba93542c88f5a.js" @ Thu Mar 31 2016 19:34:43 GMT-0500 (CDT) Group_ID: com.bestbuy.frontend.browse GIT_BRANCH: no-git-branch-set BUILD_CAUSE: local-build Build Version: version-not-found */

/*!
 * Bootstrap v3.1.1 (http://getbootstrap.com)
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */

/* ========================================================================
 * Bootstrap: transition.js v3.1.1
 * http://getbootstrap.com/javascript/#transitions
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: alert.js v3.1.1
 * http://getbootstrap.com/javascript/#alerts
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: button.js v3.1.1
 * http://getbootstrap.com/javascript/#buttons
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: carousel.js v3.1.1
 * http://getbootstrap.com/javascript/#carousel
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: collapse.js v3.1.1
 * http://getbootstrap.com/javascript/#collapse
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: dropdown.js v3.1.1
 * http://getbootstrap.com/javascript/#dropdowns
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: modal.js v3.1.1
 * http://getbootstrap.com/javascript/#modals
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: tooltip.js v3.1.1
 * http://getbootstrap.com/javascript/#tooltip
 * Inspired by the original jQuery.tipsy by Jason Frame
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: popover.js v3.1.1
 * http://getbootstrap.com/javascript/#popovers
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: scrollspy.js v3.1.1
 * http://getbootstrap.com/javascript/#scrollspy
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: tab.js v3.1.1
 * http://getbootstrap.com/javascript/#tabs
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: affix.js v3.1.1
 * http://getbootstrap.com/javascript/#affix
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: modal.js v3.3.5
 * http://getbootstrap.com/javascript/#modals
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/*!
 * jQuery UI Position 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/position/
 */

/*!
 * typeahead.js 0.11.1
 * https://github.com/twitter/typeahead.js
 * Copyright 2013-2015 Twitter, Inc. and other contributors; Licensed MIT
 */

/*!
 hey, [be]Lazy.js - v1.5.4 - 2016.03.06
 A fast, small and dependency free lazy load script (https://github.com/dinbror/blazy)
 (c) Bjoern Klinggaard - @bklinggaard - http://dinbror.dk/blazy
 */

/*!
 * Bootstrap v0.1.9 ()
 * Copyright 2011-2016 Bestbuy
 * Licensed under the MIT license
 */

/* ========================================================================
 * Bootstrap: transition.js v3.3.5
 * http://getbootstrap.com/javascript/#transitions
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: alert.js v3.3.5
 * http://getbootstrap.com/javascript/#alerts
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: button.js v3.3.5
 * http://getbootstrap.com/javascript/#buttons
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: carousel.js v3.3.5
 * http://getbootstrap.com/javascript/#carousel
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: collapse.js v3.3.5
 * http://getbootstrap.com/javascript/#collapse
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: dropdown.js v3.3.5
 * http://getbootstrap.com/javascript/#dropdowns
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: tooltip.js v3.3.5
 * http://getbootstrap.com/javascript/#tooltip
 * Inspired by the original jQuery.tipsy by Jason Frame
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: popover.js v3.3.5
 * http://getbootstrap.com/javascript/#popovers
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: scrollspy.js v3.3.5
 * http://getbootstrap.com/javascript/#scrollspy
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: tab.js v3.3.5
 * http://getbootstrap.com/javascript/#tabs
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: affix.js v3.3.5
 * http://getbootstrap.com/javascript/#affix
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

// Backbone.BabySitter
// -------------------
// v0.0.6
//
// Copyright (c)2013 Derick Bailey, Muted Solutions, LLC.
// Distributed under MIT license
//
// http://github.com/babysitterjs/backbone.babysitter

// MarionetteJS (Backbone.Marionette)
// ----------------------------------
// v2.4.3
//
// Copyright (c)2015 Derick Bailey, Muted Solutions, LLC.
// Distributed under MIT license
//
// http://marionettejs.com

/*!
 * Includes BabySitter
 * https://github.com/marionettejs/backbone.babysitter/
 *
 * Includes Wreqr
 * https://github.com/marionettejs/backbone.wreqr/
 */

// Copyright (c)2015 Derick Bailey, Muted Solutions, LLC.

// Distributed under MIT license

//! moment.js
//! version : 2.10.6
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com

if(define("list-page/components/application/javascript/cookie-manager",["require","exports","module","lodash"],function(t,e,i){var n=(t("lodash"),function(){});n.prototype={setCookie:function(t,e,i,n,r,o){if(!t||/^(?:expires|max\-age|path|domain|secure)$/i.test(t))return!1;var s="";if(i)switch(i.constructor){case Number:s=i===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+i;break;case String:s="; expires="+i;break;case Date:s="; expires="+i.toUTCString()}return document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)+s+(r?"; domain="+r:"")+(n?"; path="+n:"")+(o?"; secure":""),!0},getCookie:function(t){return t?decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null:null},removeCookie:function(t,e,i){return this.isCookieSet(t)?(document.cookie=encodeURIComponent(t)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(i?"; domain="+i:"")+(e?"; path="+e:""),!0):!1},isCookieSet:function(t){return t?new RegExp("(?:^|;\\s*)"+encodeURIComponent(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie):!1},getCookieNames:function(){for(var t=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),e=t.length,i=0;e>i;i++)t[i]=decodeURIComponent(t[i]);return t}},i.exports=n}),define("list-page/components/application/javascript/url-builder",["require","exports","module","jquery","lodash"],function(t,e,i){var n=t("jquery"),r=t("lodash"),o=function(t){t=r.extend({},t);var e=n.url(t.url),i=t.baseUrl||e.data.attr.path,o=r.extend({cp:1,searchType:"search"},e.data.param.query);this.url=r.extend({baseUrl:e.data.attr.base+i,query:o,fragment:e.data.param.fragment},t)};r.extend(o.prototype,{getSearchTerm:function(){return this.url.query.st},setSearchTerm:function(t){this.url.query.st=t},getSearchType:function(){return this.url.query.searchType},setSearchType:function(t){this.url.query.searchType=t},getPage:function(){return this.url.query.cp},setPage:function(t){this.url.query.cp=t||1},getSort:function(){return this.url.query.sp},setSort:function(t){this.url.query.sp=t},getQuery:function(){return this.url.query.qp},setQuery:function(t){this.url.query.qp=t},addQueryParam:function(t){var e=this.url.query.qp,i=r.reject((e||"").split("^"),r.isEmpty);i.push(t),i=r.uniq(i),e=i.join("^"),this.url.query.qp=e},removeQueryParam:function(t){var e=this.url.query.qp,i=r.reject((e||"").split("^"),r.isEmpty);i=r.without(i,t),i=r.uniq(i),e=i.join("^"),this.url.query.qp=e},clearQueryParams:function(t){var e=this.url.query.qp,i=r.reject((e||"").split("^"),r.isEmpty);i=r.reject(i,function(e){return new RegExp(t+"=").test(e)}),i=r.uniq(i),e=i.join("^"),this.url.query.qp=e},clearAllQueryParams:function(){var t=this.url.query.qp,e=r.reject((t||"").split("^"),r.isEmpty);e=r.reject(e,function(t){return!/^category_facet/.test(t)}),e=r.uniq(e),t=e.join("^"),this.url.query.qp=t},createQueryString:function(){var t=this.url.baseUrl;return r.isEmpty(this.url.query)||(t+="?",t+=this.createQueryParamsString(this.url.query)),t},createQueryParamsString:function(t,e){e=r.isUndefined(e)?!0:e;var i=this,n=r.map(t,function(t,n){return e===!0&&(t=i.decodeSearchValue(t),t=encodeURIComponent(t)),n+"="+t}).join("&");return n},parseQueryParamsString:function(t){var e=r.reject(t.split("&"),r.isEmpty),i=r.reduce(e,function(t,e){var i=r.reject(e.split("="),r.isEmpty);return t[i[0]]=i[1],t},{});return i},decodeSearchValue:function(t){var e=/%([2][0-9])|%([2][A-F])|%([3][A-F])|%([5][B-F])|%40|%60|%([7][B-E])/g;return r.isUndefined(t)||r.isEmpty(t)?r.isNumber(t)||(t=""):t=t.replace(e,function(t){return t=decodeURIComponent(t)}),t}}),i.exports=o}),define("list-page/components/application/javascript/router",["require","exports","module","backbone","eventmanager","list-page/components/application/javascript/url-builder"],function(t,e,i){var n=t("backbone"),r=t("eventmanager"),o=t("list-page/components/application/javascript/url-builder"),s=n.Router.extend({routes:{filter:"_filter","*path":"_default"},initialize:function(t){this.options=t||{},this.listenTo(r,"ListPage:Navigate",this._redirect),this.listenTo(r,"ListPage:Sort:Change",this._sortChange),this.listenTo(r,"ComparePreview:RouteGenerated",this._compare),this.listenTo(r,"ListPage:Pagination:Navigate",this._pageChange),this.listenTo(r,"ListPage:Cart:Navigate",this._viewCart),this.listenTo(r,"ListPage:Facet:Apply",this._applyFacets),this.listenTo(r,"ListPage:Facet:Add",this._addFacet),this.listenTo(r,"ListPage:Facet:Remove",this._removeFacet),this.listenTo(r,"ListPage:Facet:Clear",this._clearFacets),this.listenTo(r,"ListPage:Facet:ClearAll",this._clearAllFacets),this.listenTo(r,"ListPage:Facets:Show",this._showFacetsSmallView),this.urlBuilder=new o({url:this.options.appData.facetsRedirectUrl}),"browse,list,search,promo"===this.options.appData.pageType&&(this.urlBuilder.setSearchType("promo"),this.urlBuilder.setSearchTerm(this.options.appData.promoInfo.promoKeyword))},_filter:function(){r.trigger("ListPage:Facets:Show")},_default:function(){r.trigger("ListPage:Facets:Hide")},_showFacetsSmallView:function(){this.navigate("filter")},_redirect:function(t,e){window.location.assign(t)},_viewCart:function(){this.isMobile?this._redirect("/m/e/cart/cart.jsp?_DARGS=jsonAddItemToCart.form"):this._redirect("/site/olspage.jsp?id=pcat17005&type=page")},_pageChange:function(t){this.urlBuilder.setPage(t);var e=this.urlBuilder.createQueryString();this._redirect(e)},_sortChange:function(t){this.urlBuilder.setSort(t);var e=this.urlBuilder.createQueryString();this._redirect(e)},_applyFacets:function(t){this.urlBuilder.setQuery(t);var e=this.urlBuilder.createQueryString();this._redirect(e)},_addFacet:function(t){if(t.url)return void this._redirect(t.url);if(this.options.appData.facetsRedirectUrl)return void this._redirect(this.options.appData.facetsRedirectUrl+"^"+encodeURIComponent(t.queryPath));this.urlBuilder.setPage(1),this.urlBuilder.addQueryParam(t.queryPath);var e=this.urlBuilder.createQueryString();this._redirect(e)},_removeFacet:function(t){this.urlBuilder.setPage(1),this.urlBuilder.removeQueryParam(t.queryPath);var e=this.urlBuilder.createQueryString();this._redirect(e)},_clearFacets:function(t){this.urlBuilder.setPage(1),this.urlBuilder.clearQueryParams(t);var e=this.urlBuilder.createQueryString();this._redirect(e)},_clearAllFacets:function(){this.urlBuilder.setPage(1),this.urlBuilder.clearAllQueryParams();var t=this.urlBuilder.createQueryString();this._redirect(t)},_compare:function(t){this._redirect(t.url)}});i.exports=s}),define("list-page/components/application/javascript/utilities",["require","exports","module"],function(t,e,i){var n={isElementInViewPort:function(t){"function"==typeof $&&t instanceof $&&(t=t[0]);var e=t.getBoundingClientRect(),i=e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth);return i},isElementPartiallyInViewPort:function(t,e){"function"==typeof $&&t instanceof $&&(t=t[0]),e||(e=0);var i=t.getBoundingClientRect(),n=window.innerHeight||document.documentElement.clientHeight,r=i.top-e,o=i.bottom+e,s=r>=0&&n>=r||o>=0&&n>=o||0>r&&o>n;return s}};i.exports=n}),define("list-page/components/recommendations/javascript/recommendations-collection",["require","exports","module","lodash","backbone"],function(t,e,i){var n=t("lodash"),r=t("backbone"),o=r.Collection.extend({initialize:function(t){this.options=n.extend({pageSize:5},t),this.page=1,this.skus=[]},setData:function(t){this.title=t.title,this.skus=t.skus,this.ep=t.ep,this.trigger("dataSet")},getPageNumber:function(){return this.page},getPageCount:function(){var t=Math.ceil(this.skus.length/this.options.pageSize);return t},getFirstPage:function(){return this.getPage(1)},getNextPage:function(){return this.page>=this.getPageCount()?void 0:this.getPage(this.page+1)},getPreviousPage:function(){this.page<=1||this.getPage(this.page-1)},getLastPage:function(){var t=this.getPageCount();return this.getPage(t)},getPage:function(t){t&&(this.page=t),this.page<1&&(this.page=1);var e=this.getPageCount();this.page>e&&(this.page=e),this._getPage()},_getPage:function(){var t=this.page*this.options.pageSize-this.options.pageSize,e=t+this.options.pageSize,i=this.skus.slice(t,e);this.reset(i)}});i.exports=o}),define("sc-hydrate-sku/javascript/utils/cache-manager",["require","jquery","lodash","bluebird"],function(t){var e=(t("jquery"),t("lodash")),i=(t("bluebird"),function(t){this._cache={},this.config=e.defaults(t||{},{key:"skuId"})});return e.extend(i.prototype,{getTimestamp:function(){return(new Date).getTime()},set:function(t){this._cache[t[this.config.key]]={timestamp:this.getTimestamp(),lastAccessed:null,hits:0,value:JSON.stringify(t)}},get:function(t){var e=this._cache[t];return e?(e.lastAccessed=this.getTimestamp(),e.hits++,JSON.parse(e.value)):null},setMultiple:function(t){e.each(t,this.set,this)},getMultiple:function(t){return e.map(t,this.get,this)},getMisses:function(t){var i=0,n=[];for(t=e.isArray(t)?t:[t];i<t.length;)this._cache.hasOwnProperty(t[i])||n.push(t[i]),i++;return n}}),i}),define("sc-hydrate-sku/javascript/hydrateSku",["require","jquery","lodash","bluebird","./utils/cache-manager"],function(t){function e(t,e){for(var i,n=0,r=[];n<t.length;)i=n+e,r.push(t.slice(n,i)),n=i;return r}function i(t){var i=t.pool,n=t.cache,r=t.call,o=t.skus,s=t.options;return i.skus=i.skus.concat(o),i.request?i.request:(i.request=l.delay(p).then(function(){var t,o,c=n.getMisses(a.uniq(i.skus)),d=0,u=[];i.request;for(a.each(i.inflight,function(t){var e=a.without(c,t.skus||[]);e.length!==c.length&&u.push(t.request),c=e}),t=e(c,h);d<t.length;)o=r(t[d],s).lastly(function(){a.remove(i.inflight,{request:o})}),u.push(o),i.inflight.push({request:o,skus:t[d]}),d++;return i.request=null,i.skus=[],l.all(u)}),i.request)}function n(t,e){return l.cast(s.ajax({url:e.summariesUrlPrefix+"/api/1.0/product/summaries",data:"skus="+a.sortBy(t).join(",")+"&includeInactive="+e.includeInactive})).then(function(t){return d.setMultiple(t),t},function(e){return o(t)})}function r(t,e){return l.cast(s.ajax({url:e.priceBlocksUrlPrefix+"/api/2.0/priceBlocks",data:"skus="+a.sortBy(t).join(",")}).then(function(t){return t=a.map(t,function(t){return t.sku}),u.setMultiple(t),t})).caught(function(e){return o(t)})}function o(t){return l.resolve(a.map(t,function(t){return{skuId:t}}))}var s=t("jquery"),a=t("lodash"),l=t("bluebird"),c=t("./utils/cache-manager"),d=new c,u=new c,h=25,p=60,f={summaries:{request:null,skus:[],inflight:[]},prices:{request:null,skus:[],inflight:[]}},g=function(t,e){e=a.defaults({},e,{getSummaries:!0,getPrices:!1,summariesUrlPrefix:"",priceBlocksUrlPrefix:"",includeInactive:!1,cacheSummaries:!0,cachePrices:!0});var o=a.isArray(t)?t:[t];if(o.length<1)return l.resolve([]);if(!/^[0-9]+$/.test(o.join("")))return l.reject(new TypeError("skus may only contain numbers"));var s=[];return e.getSummaries&&s.push(i({pool:f.summaries,cache:d,call:n,skus:o,options:e})),e.getPrices&&s.push(i({pool:f.prices,cache:u,call:r,skus:o,options:e})),l.all(s).spread(function(){var t=e.getSummaries?d.getMultiple(o):[],i=e.getPrices?u.getMultiple(o):[];return a.map(t,function(t){return a.extend(t,a.findWhere(i,{skuId:t.skuId}))})}).then(function(t){var e=a.indexBy(t,"skuId");return a(o).map(function(t){return e[t]}).filter().value()})};return g}),define("cookieManager",["require"],function(t){function e(t){t+="=";for(var e=document.cookie.split(";"),i=0;i<e.length;i++){for(var n=e[i];" "===n.charAt(0);)n=n.substring(1,n.length);if(0===n.indexOf(t))return decodeURIComponent(n.substring(t.length,n.length))}return null}function i(t,e,i,n){var r="",o="",s=new Date;"string"==typeof n&&(o=" domain="+n+";"),"session"!==i&&("number"==typeof i?s.setDate(s.getDate()+i):s.setDate(s.getDate()+365),r=" expires="+s.toGMTString()+";"),document.cookie=t+"="+encodeURIComponent(e)+";"+r+o+" path=/;"}function n(t){i(t,"",-1)}var r={get:e,set:i,"delete":n};return r}),define("list-page/components/recommendations/javascript/recommendations-service",["require","exports","module","lodash","jquery","bluebird","sc-hydrate-sku/javascript/hydrateSku","cookieManager"],function(t,e,i){var n=t("lodash"),r=t("jquery"),o=t("bluebird"),s=t("sc-hydrate-sku/javascript/hydrateSku"),a=t("cookieManager"),l=function(t){this.options=n.extend({apiKey:"D50",pageSize:20,deviceClass:"l"},t)};n.extend(l.prototype,{getRecommendations:function(){var t="www.bestbuy.com"===this.options.hostname?"http://context.bestbuy.com/api/recommendations/list":"http://pl.context.bestbuy.com/api/recommendations/list",e={apiKey:this.options.apiKey,pageSize:this.options.pageSize,plmt:this._createPlmt(this.options.pageType),src:"dotcom-"+this.options.deviceClass,c_id:this.options.c_id||a.get("context_id"),ut_id:this.options.ut_id||a.get("ut"),subplmt:"carousel1,carousel2"},i=n.map(e,function(t,e){return e+"="+(t||"")}).join("&"),s=r.ajax({url:t+"?"+i});return o.resolve(s).bind(this).then(this._recommendationsComplete)},_recommendationsComplete:function(t){var e=n.chain([t.carousel1._entries,t.carousel2._entries]).flatten().map(function(t){return t.id}).uniq().value();return s(e,{getPrices:!0}).bind(this).then(function(e){var i={carousel1:{ep:t.carousel1.ep,title:t.carousel1.title,skus:this._merge(t.carousel1._entries,e)},carousel2:{ep:t.carousel2.ep,title:t.carousel2.title,skus:this._merge(t.carousel2._entries,e)}};return o.resolve(i)})},_merge:function(t,e){return n.map(t,function(t){var i=n.find(e,function(e){return t.id==e.skuId}),r=n.defaults({skuId:t.id,isHydrated:!!i,ep:t.ep},i);return r})},_createPlmt:function(t){var e="plp";return e+="browse,list,category"===t?"b":"s"}}),i.exports=l}),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");if(+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}t.fn.emulateTransitionEnd=function(e){var i=!1,n=this;t(this).one(t.support.transition.end,function(){i=!0});var r=function(){i||t(n).trigger(t.support.transition.end)};return setTimeout(r,e),this},t(function(){t.support.transition=e()})}(jQuery),+function(t){"use strict";var e='[data-dismiss="alert"]',i=function(i){t(i).on("click",e,this.close)};i.prototype.close=function(e){function i(){o.trigger("closed.bs.alert").remove()}var n=t(this),r=n.attr("data-target");r||(r=n.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,""));var o=t(r);e&&e.preventDefault(),o.length||(o=n.hasClass("alert")?n:n.parent()),o.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(o.removeClass("in"),t.support.transition&&o.hasClass("fade")?o.one(t.support.transition.end,i).emulateTransitionEnd(150):i())};var n=t.fn.alert;t.fn.alert=function(e){return this.each(function(){var n=t(this),r=n.data("bs.alert");r||n.data("bs.alert",r=new i(this)),"string"==typeof e&&r[e].call(n)})},t.fn.alert.Constructor=i,t.fn.alert.noConflict=function(){return t.fn.alert=n,this},t(document).on("click.bs.alert.data-api",e,i.prototype.close)}(jQuery),+function(t){"use strict";var e=function(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,n),this.isLoading=!1};e.DEFAULTS={loadingText:"loading..."},e.prototype.setState=function(e){var i="disabled",n=this.$element,r=n.is("input")?"val":"html",o=n.data();e+="Text",o.resetText||n.data("resetText",n[r]()),n[r](o[e]||this.options[e]),setTimeout(t.proxy(function(){"loadingText"==e?(this.isLoading=!0,n.addClass(i).attr(i,i)):this.isLoading&&(this.isLoading=!1,n.removeClass(i).removeAttr(i))},this),0)},e.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var i=this.$element.find("input");"radio"==i.prop("type")&&(i.prop("checked")&&this.$element.hasClass("active")?t=!1:e.find(".active").removeClass("active")),t&&i.prop("checked",!this.$element.hasClass("active")).trigger("change")}t&&this.$element.toggleClass("active")};var i=t.fn.button;t.fn.button=function(i){return this.each(function(){var n=t(this),r=n.data("bs.button"),o="object"==typeof i&&i;r||n.data("bs.button",r=new e(this,o)),"toggle"==i?r.toggle():i&&r.setState(i)})},t.fn.button.Constructor=e,t.fn.button.noConflict=function(){return t.fn.button=i,this},t(document).on("click.bs.button.data-api","[data-toggle^=button]",function(e){var i=t(e.target);i.hasClass("btn")||(i=i.closest(".btn")),i.button("toggle"),e.preventDefault()})}(jQuery),+function(t){"use strict";var e=function(e,i){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter",t.proxy(this.pause,this)).on("mouseleave",t.proxy(this.cycle,this))};e.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},e.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},e.prototype.getActiveIndex=function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},e.prototype.to=function(e){var i=this,n=this.getActiveIndex();return e>this.$items.length-1||0>e?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){i.to(e)}):n==e?this.pause().cycle():this.slide(e>n?"next":"prev",t(this.$items[e]))},e.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},e.prototype.next=function(){return this.sliding?void 0:this.slide("next")},e.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},e.prototype.slide=function(e,i){var n=this.$element.find(".item.active"),r=i||n[e](),o=this.interval,s="next"==e?"left":"right",a="next"==e?"first":"last",l=this;if(!r.length){if(!this.options.wrap)return;r=this.$element.find(".item")[a]()}if(r.hasClass("active"))return this.sliding=!1;var c=t.Event("slide.bs.carousel",{relatedTarget:r[0],direction:s});return this.$element.trigger(c),c.isDefaultPrevented()?void 0:(this.sliding=!0,o&&this.pause(),this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid.bs.carousel",function(){var e=t(l.$indicators.children()[l.getActiveIndex()]);e&&e.addClass("active")})),t.support.transition&&this.$element.hasClass("slide")?(r.addClass(e),r[0].offsetWidth,n.addClass(s),r.addClass(s),n.one(t.support.transition.end,function(){r.removeClass([e,s].join(" ")).addClass("active"),n.removeClass(["active",s].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger("slid.bs.carousel")},0)}).emulateTransitionEnd(1e3*n.css("transition-duration").slice(0,-1))):(n.removeClass("active"),r.addClass("active"),this.sliding=!1,this.$element.trigger("slid.bs.carousel")),o&&this.cycle(),this)};var i=t.fn.carousel;t.fn.carousel=function(i){return this.each(function(){var n=t(this),r=n.data("bs.carousel"),o=t.extend({},e.DEFAULTS,n.data(),"object"==typeof i&&i),s="string"==typeof i?i:o.slide;r||n.data("bs.carousel",r=new e(this,o)),"number"==typeof i?r.to(i):s?r[s]():o.interval&&r.pause().cycle()})},t.fn.carousel.Constructor=e,t.fn.carousel.noConflict=function(){return t.fn.carousel=i,this},t(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(e){var i,n=t(this),r=t(n.attr("data-target")||(i=n.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"")),o=t.extend({},r.data(),n.data()),s=n.attr("data-slide-to");s&&(o.interval=!1),r.carousel(o),(s=n.attr("data-slide-to"))&&r.data("bs.carousel").to(s),e.preventDefault()}),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var e=t(this);e.carousel(e.data())})})}(jQuery),+function(t){"use strict";var e=function(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,n),this.transitioning=null,this.options.parent&&(this.$parent=t(this.options.parent)),this.options.toggle&&this.toggle()};e.DEFAULTS={toggle:!0},e.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},e.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e=t.Event("show.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var i=this.$parent&&this.$parent.find("> .panel > .in");if(i&&i.length){var n=i.data("bs.collapse");if(n&&n.transitioning)return;i.collapse("hide"),n||i.data("bs.collapse",null)}var r=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[r](0),this.transitioning=1;var o=function(){this.$element.removeClass("collapsing").addClass("collapse in")[r]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return o.call(this);var s=t.camelCase(["scroll",r].join("-"));this.$element.one(t.support.transition.end,t.proxy(o,this)).emulateTransitionEnd(350)[r](this.$element[0][s])}}},e.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var n=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return t.support.transition?void this.$element[i](0).one(t.support.transition.end,t.proxy(n,this)).emulateTransitionEnd(350):n.call(this)}}},e.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var i=t.fn.collapse;t.fn.collapse=function(i){return this.each(function(){var n=t(this),r=n.data("bs.collapse"),o=t.extend({},e.DEFAULTS,n.data(),"object"==typeof i&&i);!r&&o.toggle&&"show"==i&&(i=!i),r||n.data("bs.collapse",r=new e(this,o)),"string"==typeof i&&r[i]()})},t.fn.collapse.Constructor=e,t.fn.collapse.noConflict=function(){return t.fn.collapse=i,this},t(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(e){var i,n=t(this),r=n.attr("data-target")||e.preventDefault()||(i=n.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""),o=t(r),s=o.data("bs.collapse"),a=s?"toggle":n.data(),l=n.attr("data-parent"),c=l&&t(l);s&&s.transitioning||(c&&c.find('[data-toggle=collapse][data-parent="'+l+'"]').not(n).addClass("collapsed"),n[o.hasClass("in")?"addClass":"removeClass"]("collapsed")),o.collapse(a)})}(jQuery),+function(t){"use strict";function e(e){t(n).remove(),t(r).each(function(){var n=i(t(this)),r={relatedTarget:this};n.hasClass("open")&&(n.trigger(e=t.Event("hide.bs.dropdown",r)),e.isDefaultPrevented()||n.removeClass("open").trigger("hidden.bs.dropdown",r))})}function i(e){var i=e.attr("data-target");i||(i=e.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var n=i&&t(i);return n&&n.length?n:e.parent()}var n=".dropdown-backdrop",r="[data-toggle=dropdown]",o=function(e){t(e).on("click.bs.dropdown",this.toggle)};o.prototype.toggle=function(n){var r=t(this);if(!r.is(".disabled, :disabled")){var o=i(r),s=o.hasClass("open");if(e(),!s){"ontouchstart"in document.documentElement&&!o.closest(".navbar-nav").length&&t('<div class="dropdown-backdrop"/>').insertAfter(t(this)).on("click",e);var a={relatedTarget:this};if(o.trigger(n=t.Event("show.bs.dropdown",a)),n.isDefaultPrevented())return;o.toggleClass("open").trigger("shown.bs.dropdown",a),r.focus()}return!1}},o.prototype.keydown=function(e){if(/(38|40|27)/.test(e.keyCode)){var n=t(this);if(e.preventDefault(),e.stopPropagation(),!n.is(".disabled, :disabled")){var o=i(n),s=o.hasClass("open");if(!s||s&&27==e.keyCode)return 27==e.which&&o.find(r).focus(),n.click();var a=" li:not(.divider):visible a",l=o.find("[role=menu]"+a+", [role=listbox]"+a);if(l.length){var c=l.index(l.filter(":focus"));38==e.keyCode&&c>0&&c--,40==e.keyCode&&c<l.length-1&&c++,~c||(c=0),l.eq(c).focus()}}}};var s=t.fn.dropdown;t.fn.dropdown=function(e){return this.each(function(){var i=t(this),n=i.data("bs.dropdown");n||i.data("bs.dropdown",n=new o(this)),"string"==typeof e&&n[e].call(i)})},t.fn.dropdown.Constructor=o,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=s,this},t(document).on("click.bs.dropdown.data-api",e).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",r,o.prototype.toggle).on("keydown.bs.dropdown.data-api",r+", [role=menu], [role=listbox]",o.prototype.keydown)}(jQuery),+function(t){"use strict";var e=function(e,i){this.options=i,this.$element=t(e),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};e.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},e.prototype.toggle=function(t){return this[this.isShown?"hide":"show"](t)},e.prototype.show=function(e){var i=this,n=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(n),this.isShown||n.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.backdrop(function(){var n=t.support.transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(document.body),i.$element.show().scrollTop(0),n&&i.$element[0].offsetWidth,i.$element.addClass("in").attr("aria-hidden",!1),i.enforceFocus();var r=t.Event("shown.bs.modal",{relatedTarget:e});n?i.$element.find(".modal-dialog").one(t.support.transition.end,function(){i.$element.focus().trigger(r)}).emulateTransitionEnd(300):i.$element.focus().trigger(r)}))},e.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one(t.support.transition.end,t.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},e.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.focus()},this))},e.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},e.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.removeBackdrop(),t.$element.trigger("hidden.bs.modal")})},e.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},e.prototype.backdrop=function(e){var i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var n=t.support.transition&&i;if(this.$backdrop=t('<div class="modal-backdrop '+i+'" />').appendTo(document.body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),n&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;n?this.$backdrop.one(t.support.transition.end,e).emulateTransitionEnd(150):e()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(t.support.transition.end,e).emulateTransitionEnd(150):e()):e&&e()};var i=t.fn.modal;t.fn.modal=function(i,n){return this.each(function(){var r=t(this),o=r.data("bs.modal"),s=t.extend({},e.DEFAULTS,r.data(),"object"==typeof i&&i);o||r.data("bs.modal",o=new e(this,s)),"string"==typeof i?o[i](n):s.show&&o.show(n)})},t.fn.modal.Constructor=e,t.fn.modal.noConflict=function(){return t.fn.modal=i,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(e){var i=t(this),n=i.attr("href"),r=t(i.attr("data-target")||n&&n.replace(/.*(?=#[^\s]+$)/,"")),o=r.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(n)&&n},r.data(),i.data());i.is("a")&&e.preventDefault(),r.modal(o,this).one("hide",function(){i.is(":visible")&&i.focus()})}),t(document).on("show.bs.modal",".modal",function(){t(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){t(document.body).removeClass("modal-open")})}(jQuery),+function(t){"use strict";var e=function(t,e){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",t,e)};e.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},e.prototype.init=function(e,i,n){this.enabled=!0,this.type=e,this.$element=t(i),this.options=this.getOptions(n);for(var r=this.options.trigger.split(" "),o=r.length;o--;){var s=r[o];if("click"==s)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=s){var a="hover"==s?"mouseenter":"focusin",l="hover"==s?"mouseleave":"focusout";this.$element.on(a+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},e.prototype.getDelegateOptions=function(){var e={},i=this.getDefaults();return this._options&&t.each(this._options,function(t,n){i[t]!=n&&(e[t]=n)}),e},e.prototype.enter=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(i.timeout),i.hoverState="in",i.options.delay&&i.options.delay.show?void(i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)):i.show()},e.prototype.leave=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(i.timeout),i.hoverState="out",i.options.delay&&i.options.delay.hide?void(i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)):i.hide()},e.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.trigger(e),e.isDefaultPrevented())return;var i=this,n=this.tip();this.setContent(),this.options.animation&&n.addClass("fade");var r="function"==typeof this.options.placement?this.options.placement.call(this,n[0],this.$element[0]):this.options.placement,o=/\s?auto?\s?/i,s=o.test(r);s&&(r=r.replace(o,"")||"top"),n.detach().css({top:0,left:0,display:"block"}).addClass(r),this.options.container?n.appendTo(this.options.container):n.insertAfter(this.$element);var a=this.getPosition(),l=n[0].offsetWidth,c=n[0].offsetHeight;if(s){var d=this.$element.parent(),u=r,h=document.documentElement.scrollTop||document.body.scrollTop,p="body"==this.options.container?window.innerWidth:d.outerWidth(),f="body"==this.options.container?window.innerHeight:d.outerHeight(),g="body"==this.options.container?0:d.offset().left;r="bottom"==r&&a.top+a.height+c-h>f?"top":"top"==r&&a.top-h-c<0?"bottom":"right"==r&&a.right+l>p?"left":"left"==r&&a.left-l<g?"right":r,n.removeClass(u).addClass(r)}var m=this.getCalculatedOffset(r,a,l,c);this.applyPlacement(m,r),
this.hoverState=null;var v=function(){i.$element.trigger("shown.bs."+i.type)};t.support.transition&&this.$tip.hasClass("fade")?n.one(t.support.transition.end,v).emulateTransitionEnd(150):v()}},e.prototype.applyPlacement=function(e,i){var n,r=this.tip(),o=r[0].offsetWidth,s=r[0].offsetHeight,a=parseInt(r.css("margin-top"),10),l=parseInt(r.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(l)&&(l=0),e.top=e.top+a,e.left=e.left+l,t.offset.setOffset(r[0],t.extend({using:function(t){r.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),r.addClass("in");var c=r[0].offsetWidth,d=r[0].offsetHeight;if("top"==i&&d!=s&&(n=!0,e.top=e.top+s-d),/bottom|top/.test(i)){var u=0;e.left<0&&(u=-2*e.left,e.left=0,r.offset(e),c=r[0].offsetWidth,d=r[0].offsetHeight),this.replaceArrow(u-o+c,c,"left")}else this.replaceArrow(d-s,d,"top");n&&r.offset(e)},e.prototype.replaceArrow=function(t,e,i){this.arrow().css(i,t?50*(1-t/e)+"%":"")},e.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},e.prototype.hide=function(){function e(){"in"!=i.hoverState&&n.detach(),i.$element.trigger("hidden.bs."+i.type)}var i=this,n=this.tip(),r=t.Event("hide.bs."+this.type);return this.$element.trigger(r),r.isDefaultPrevented()?void 0:(n.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?n.one(t.support.transition.end,e).emulateTransitionEnd(150):e(),this.hoverState=null,this)},e.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},e.prototype.hasContent=function(){return this.getTitle()},e.prototype.getPosition=function(){var e=this.$element[0];return t.extend({},"function"==typeof e.getBoundingClientRect?e.getBoundingClientRect():{width:e.offsetWidth,height:e.offsetHeight},this.$element.offset())},e.prototype.getCalculatedOffset=function(t,e,i,n){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-i/2}:"top"==t?{top:e.top-n,left:e.left+e.width/2-i/2}:"left"==t?{top:e.top+e.height/2-n/2,left:e.left-i}:{top:e.top+e.height/2-n/2,left:e.left+e.width}},e.prototype.getTitle=function(){var t,e=this.$element,i=this.options;return t=e.attr("data-original-title")||("function"==typeof i.title?i.title.call(e[0]):i.title)},e.prototype.tip=function(){return this.$tip=this.$tip||t(this.options.template)},e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},e.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},e.prototype.enable=function(){this.enabled=!0},e.prototype.disable=function(){this.enabled=!1},e.prototype.toggleEnabled=function(){this.enabled=!this.enabled},e.prototype.toggle=function(e){var i=e?t(e.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;i.tip().hasClass("in")?i.leave(i):i.enter(i)},e.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var i=t.fn.tooltip;t.fn.tooltip=function(i){return this.each(function(){var n=t(this),r=n.data("bs.tooltip"),o="object"==typeof i&&i;(r||"destroy"!=i)&&(r||n.data("bs.tooltip",r=new e(this,o)),"string"==typeof i&&r[i]())})},t.fn.tooltip.Constructor=e,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=i,this}}(jQuery),+function(t){"use strict";var e=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");e.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),e.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),e.prototype.constructor=e,e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),i=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content")[this.options.html?"string"==typeof i?"html":"append":"text"](i),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},e.prototype.hasContent=function(){return this.getTitle()||this.getContent()},e.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},e.prototype.tip=function(){return this.$tip||(this.$tip=t(this.options.template)),this.$tip};var i=t.fn.popover;t.fn.popover=function(i){return this.each(function(){var n=t(this),r=n.data("bs.popover"),o="object"==typeof i&&i;(r||"destroy"!=i)&&(r||n.data("bs.popover",r=new e(this,o)),"string"==typeof i&&r[i]())})},t.fn.popover.Constructor=e,t.fn.popover.noConflict=function(){return t.fn.popover=i,this}}(jQuery),+function(t){"use strict";function e(i,n){var r,o=t.proxy(this.process,this);this.$element=t(t(i).is("body")?window:i),this.$body=t("body"),this.$scrollElement=this.$element.on("scroll.bs.scroll-spy.data-api",o),this.options=t.extend({},e.DEFAULTS,n),this.selector=(this.options.target||(r=t(i).attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.offsets=t([]),this.targets=t([]),this.activeTarget=null,this.refresh(),this.process()}e.DEFAULTS={offset:10},e.prototype.refresh=function(){var e=this.$element[0]==window?"offset":"position";this.offsets=t([]),this.targets=t([]);var i=this;this.$body.find(this.selector).map(function(){var n=t(this),r=n.data("target")||n.attr("href"),o=/^#./.test(r)&&t(r);return o&&o.length&&o.is(":visible")&&[[o[e]().top+(!t.isWindow(i.$scrollElement.get(0))&&i.$scrollElement.scrollTop()),r]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){i.offsets.push(this[0]),i.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,i=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,n=i-this.$scrollElement.height(),r=this.offsets,o=this.targets,s=this.activeTarget;if(e>=n)return s!=(t=o.last()[0])&&this.activate(t);if(s&&e<=r[0])return s!=(t=o[0])&&this.activate(t);for(t=r.length;t--;)s!=o[t]&&e>=r[t]&&(!r[t+1]||e<=r[t+1])&&this.activate(o[t])},e.prototype.activate=function(e){this.activeTarget=e,t(this.selector).parentsUntil(this.options.target,".active").removeClass("active");var i=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',n=t(i).parents("li").addClass("active");n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate.bs.scrollspy")};var i=t.fn.scrollspy;t.fn.scrollspy=function(i){return this.each(function(){var n=t(this),r=n.data("bs.scrollspy"),o="object"==typeof i&&i;r||n.data("bs.scrollspy",r=new e(this,o)),"string"==typeof i&&r[i]()})},t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=i,this},t(window).on("load",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);e.scrollspy(e.data())})})}(jQuery),+function(t){"use strict";var e=function(e){this.element=t(e)};e.prototype.show=function(){var e=this.element,i=e.closest("ul:not(.dropdown-menu)"),n=e.data("target");if(n||(n=e.attr("href"),n=n&&n.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var r=i.find(".active:last a")[0],o=t.Event("show.bs.tab",{relatedTarget:r});if(e.trigger(o),!o.isDefaultPrevented()){var s=t(n);this.activate(e.parent("li"),i),this.activate(s,s.parent(),function(){e.trigger({type:"shown.bs.tab",relatedTarget:r})})}}},e.prototype.activate=function(e,i,n){function r(){o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),e.addClass("active"),s?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active"),n&&n()}var o=i.find("> .active"),s=n&&t.support.transition&&o.hasClass("fade");s?o.one(t.support.transition.end,r).emulateTransitionEnd(150):r(),o.removeClass("in")};var i=t.fn.tab;t.fn.tab=function(i){return this.each(function(){var n=t(this),r=n.data("bs.tab");r||n.data("bs.tab",r=new e(this)),"string"==typeof i&&r[i]()})},t.fn.tab.Constructor=e,t.fn.tab.noConflict=function(){return t.fn.tab=i,this},t(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(e){e.preventDefault(),t(this).tab("show")})}(jQuery),+function(t){"use strict";var e=function(i,n){this.options=t.extend({},e.DEFAULTS,n),this.$window=t(window).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(i),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};e.RESET="affix affix-top affix-bottom",e.DEFAULTS={offset:0},e.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(e.RESET).addClass("affix");var t=this.$window.scrollTop(),i=this.$element.offset();return this.pinnedOffset=i.top-t},e.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},e.prototype.checkPosition=function(){if(this.$element.is(":visible")){var i=t(document).height(),n=this.$window.scrollTop(),r=this.$element.offset(),o=this.options.offset,s=o.top,a=o.bottom;"top"==this.affixed&&(r.top+=n),"object"!=typeof o&&(a=s=o),"function"==typeof s&&(s=o.top(this.$element)),"function"==typeof a&&(a=o.bottom(this.$element));var l=null!=this.unpin&&n+this.unpin<=r.top?!1:null!=a&&r.top+this.$element.height()>=i-a?"bottom":null!=s&&s>=n?"top":!1;if(this.affixed!==l){this.unpin&&this.$element.css("top","");var c="affix"+(l?"-"+l:""),d=t.Event(c+".bs.affix");this.$element.trigger(d),d.isDefaultPrevented()||(this.affixed=l,this.unpin="bottom"==l?this.getPinnedOffset():null,this.$element.removeClass(e.RESET).addClass(c).trigger(t.Event(c.replace("affix","affixed"))),"bottom"==l&&this.$element.offset({top:i-a-this.$element.height()}))}}};var i=t.fn.affix;t.fn.affix=function(i){return this.each(function(){var n=t(this),r=n.data("bs.affix"),o="object"==typeof i&&i;r||n.data("bs.affix",r=new e(this,o)),"string"==typeof i&&r[i]()})},t.fn.affix.Constructor=e,t.fn.affix.noConflict=function(){return t.fn.affix=i,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var e=t(this),i=e.data();i.offset=i.offset||{},i.offsetBottom&&(i.offset.bottom=i.offsetBottom),i.offsetTop&&(i.offset.top=i.offsetTop),e.affix(i)})})}(jQuery),define("bootstrap",function(){}),define("list-page/components/recommendations/javascript/recommendations-view-base",["require","exports","module","jquery","bootstrap","backbone","eventmanager"],function(t,e,i){t("jquery"),t("bootstrap");var n=t("backbone"),r=t("eventmanager"),o=n.View.extend({initialize:function(t){this.options=_.extend({},t),this.listenTo(this.collection,"dataSet",this._render),this.listenTo(this.collection,"reset",this._renderRecommendations),this.listenTo(this.collection,"selected",this._productSelected)},render:function(){return this},_render:function(){var t=this;if(0===this.collection.getPageCount())return void this.$el.empty();var e={carouselId:this.id+"-carousel",title:this.collection.title,pages:_.range(this.collection.getPageCount())};this.template(e,function(e,i){e||(t.$el.html(i),t.collection.getFirstPage(),t.collection&&t.$el.attr("data-carousel-ep-value",t.collection.ep))}),this._sendAnalyticsEvents()},_sendAnalyticsEvents:function(){var t=_.map(this.collection.skus,function(t){return t.skuId});r.trigger("recommendations:load",{skuIds:t,epValue:this.collection.ep,type:"unified"})}});i.exports=o}),define("dust-loader",[],function(){function t(t){return"function(){return function(dust){var tmpl = "+t+';var f = function(ctx,cb){if (!cb) throw new Error("wrong number of args for render");return dust.render(tmpl, ctx, cb);};f.template=tmpl;return f;}}'}function e(e,i,n,r){try{var o=require.nodeRequire("dustjs-linkedin"),a=require.nodeRequire("fs"),l=(require.nodeRequire("path"),a.readFileSync(i.toUrl(e)+".dust"));o.config.amd=!1;var c=o.compile(l.toString(),e);s[e]=t(c),n({})}catch(d){n.error(d)}}function i(i,n,s,a){return a.isBuild?e(i,n,s,a):(define.amd.dust=!0,void n([o,r],function(e,r){var o=n.toUrl(i)+".dust";e.get(o,function(e){r.config.amd=!1;var n=r.compile(e,i);s.fromText("define("+t(n)+")")}).fail(function(){s.error(new Error(i+": failed to load template data"))})}))}function n(t,e,i){var n=";define("+JSON.stringify(t+"!"+e)+","+s[e]+");";i(n)}var r="dust-full",o="jquery",s={};return{load:i,write:n}}),define("dust-loader!list-page/components/recommendations/dust/recommendations-large",function(){return function(t){var e=function(t){function e(t,e){return t.w('<div class="recommendations large"><div class="header"><h2 class="title">').f(e.get(["title"],!1),e,"h").w('</h2><div class="paging">Page <span class="current-page"></span> of <span class="page-count"></span></div></div><div id="').f(e.get(["carouselId"],!1),e,"h").w('" class="carousel slide" data-interval="false" data-wrap="false"><!-- Wrapper for slides --><div class="carousel-inner" role="listbox">').s(e.get(["pages"],!1),e,{block:i},{}).w('</div><!-- Controls --><a class="left carousel-control" href="#').f(e.get(["carouselId"],!1),e,"h").w('" role="button"><span class="ficon ficon-caret-left" aria-hidden="true"></span><span class="sr-only">Previous</span></a><a class="right carousel-control" href="#').f(e.get(["carouselId"],!1),e,"h").w('" role="button"><span class="ficon ficon-caret-right" aria-hidden="true"></span><span class="sr-only">Next</span></a></div></div>')}function i(t,e){return t.w('<div class="item ').h("first",e,{block:n},{},"h").w('"></div>')}function n(t,e){return t.w("active")}return t.register("list-page/components/recommendations/dust/recommendations-large",e),e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,e}(t),i=function(i,n){if(!n)throw new Error("wrong number of args for render");return t.render(e,i,n)};return i.template=e,i}}),define("list-page/components/application/dust-helpers/formatters",["require","exports","module"],function(t,e,i){function n(t){t.helpers.formatNumber||(t.helpers.formatNumber=function(e,i,n,r){var o=t.helpers.tap(r.amount,e,i),s=t.helpers.tap(r.precision,e,i),a=t.helpers.tap(r.hideZeroPrecision,e,i);if(o=parseFloat(o),isNaN(o))return e.write(""),e;a&&10*o%10===0&&(s=void 0);var l=o.toFixed(s).replace(/(\d)(?=(\d{3})+(?:\.\d+)?$)/g,"$1,");return e.write(l),e})}i.exports=function(t){n(t)}}),define("dust-loader!sc-stars/dust/stars",function(){return function(t){var e=function(t){function e(t,e){return t.nx(e.get(["count"],!1),e,{"else":i,block:m},{})}function i(t,e){return t.h("select",e,{block:n},{key:e.get(["style"],!1)},"h")}function n(t,e){return t.h("eq",e,{block:r},{value:"mini-yellow"},"h").h("eq",e,{block:a},{value:"small-yellow"},"h").h("eq",e,{block:d},{value:"small-blue"},"h").h("eq",e,{block:p},{value:"large-yellow"},"h").w("	")}function r(t,e){return t.w('<div class="bbystars-').f(e.get(["style"],!1),e,"h").w('" ').h("ne",e,{block:o},{key:e.get(["score"],!1),value:-1},"h").w(' style="width: ').h("math",e,{},{key:e.get(["count"],!1),method:"multiply",operand:"14"},"h").w('px"><div class="fill" style="width: 100%"></div></div>')}function o(t,e){return t.h("ne",e,{block:s},{key:e.get(["rangeMax"],!1),value:-1},"h")}function s(t,e){return t.w('alt="').f(e.get(["score"],!1),e,"h").w(" out of ").f(e.get(["rangeMax"],!1),e,"h").w(' stars."')}function a(t,e){return t.w('<div class="bbystars-').f(e.get(["style"],!1),e,"h").w('" ').h("ne",e,{block:l},{key:e.get(["score"],!1),value:-1},"h").w(' style="width: ').h("math",e,{},{key:e.get(["count"],!1),method:"multiply",operand:"18"},"h").w('px"><div class="fill" style="width: 100%"></div></div>')}function l(t,e){return t.h("ne",e,{block:c},{key:e.get(["rangeMax"],!1),value:-1},"h")}function c(t,e){return t.w('alt="').f(e.get(["score"],!1),e,"h").w(" out of ").f(e.get(["rangeMax"],!1),e,"h").w(' stars."')}function d(t,e){return t.w('<div class="bbystars-').f(e.get(["style"],!1),e,"h").w('" ').h("ne",e,{block:u},{key:e.get(["score"],!1),value:-1},"h").w(' style="width: ').h("math",e,{},{key:e.get(["count"],!1),method:"multiply",operand:"18"},"h").w('px"><div class="fill" style="width: 100%"></div></div>')}function u(t,e){return t.h("ne",e,{block:h},{key:e.get(["rangeMax"],!1),value:-1},"h")}function h(t,e){return t.w('alt="').f(e.get(["score"],!1),e,"h").w(" out of ").f(e.get(["rangeMax"],!1),e,"h").w(' stars."')}function p(t,e){return t.w('<div class="bbystars-').f(e.get(["style"],!1),e,"h").w('" ').h("ne",e,{block:f},{key:e.get(["score"],!1),value:-1},"h").w(' style="width: ').h("math",e,{},{key:e.get(["count"],!1),method:"multiply",operand:"32"},"h").w('px"><div class="fill" style="width: 100%"></div></div>')}function f(t,e){return t.h("ne",e,{block:g},{key:e.get(["rangeMax"],!1),value:-1},"h")}function g(t,e){return t.w('alt="').f(e.get(["score"],!1),e,"h").w(" out of ").f(e.get(["rangeMax"],!1),e,"h").w(' stars."')}function m(t,e){return t.w('<div class="bbystars-').f(e.get(["style"],!1),e,"h").w('" alt="').s(e.get(["percent"],!1),e,{"else":v,block:y},{}).w('%"><div class="fill" style="width: ').s(e.get(["percent"],!1),e,{"else":b,block:w},{}).w('%"></div></div>')}function v(t,e){return t.w("0")}function y(t,e){return t.f(e.getPath(!0,[]),e,"h")}function b(t,e){return t.w("0")}function w(t,e){return t.f(e.getPath(!0,[]),e,"h")}return t.register("sc-stars/dust/stars",e),e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,r.__dustBody=!0,o.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,l.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,u.__dustBody=!0,h.__dustBody=!0,p.__dustBody=!0,f.__dustBody=!0,g.__dustBody=!0,m.__dustBody=!0,v.__dustBody=!0,y.__dustBody=!0,b.__dustBody=!0,w.__dustBody=!0,e}(t),i=function(i,n){if(!n)throw new Error("wrong number of args for render");return t.render(e,i,n)};return i.template=e,i}}),define("dust-loader!_priceblock/dust/miniPriceblock2",function(){return function(t){var e=function(t){function e(t,e){return t.w('<div class="price-block priceblock-mini" data-pricing-type="').f(e.get(["pricingType"],!1),e,"h").w('">').h("select",e,{block:i},{key:e.getPath(!1,["price","pricingType"])},"h").x(e.getPath(!1,["properties","contractCondition"]),e,{block:k},{}).w("</div>")}function i(t,e){return t.h("eq",e,{block:n},{value:"clearance"},"h").h("eq",e,{block:o},{value:"ICR-hidePrice"},"h").h("eq",e,{block:s},{value:"ICR-noPrice"},"h").h("eq",e,{block:a},{value:"ICR-strikeThrough"},"h").h("eq",e,{block:l},{value:"MAP"},"h").h("eq",e,{block:u},{value:"MAP-noSale"},"h").h("eq",e,{block:f},{value:"onSale"},"h").h("none",e,{block:w},{},"h")}function n(t,e){return t.w('<div class="mini-block-sale-price">').nx(e.get(["hideClearance"],!1),e,{block:r},{}).w("$").h("formatNumber",e,{},{amount:e.getPath(!1,["price","currentPrice"]),precision:2},"h").w("</div>")}function r(t,e){return t.w("Clearance: ")}function o(t,e){return t}function s(t,e){return t.w('<div class="mini-block-link">See details in checkout. <a href="#" class="bbytooltip-trigger" data-bbytooltip-id="see-price-checkout-tooltip-').f(e.get(["skuId"],!1),e,"h").w('" data-bbytooltip-position="bottom">Why?</a></div><div class="bbytooltip" id="see-price-checkout-tooltip-').f(e.get(["skuId"],!1),e,"h").w('">').p("_priceblock/dust/partials/tooltipSeePriceAtCheckout",e,e,{}).w("</div>")}function a(t,e){return t.w('<div class="mini-block-price">$<span class="strikethrough">').h("formatNumber",e,{},{amount:e.getPath(!1,["price","regularPrice"]),precision:2},"h").w('</span></div><div class="mini-block-link">See details in checkout. <a href="#" class="bbytooltip-trigger" data-bbytooltip-id="see-price-checkout-tooltip-').f(e.get(["skuId"],!1),e,"h").w('" data-bbytooltip-position="bottom">Why?</a></div><div class="bbytooltip" id="see-price-checkout-tooltip-').f(e.get(["skuId"],!1),e,"h").w('">').p("_priceblock/dust/partials/tooltipSeePriceAtCheckout",e,e,{}).w("</div>")}function l(t,e){return t.w('<div class="mini-block-sale-price">On Sale</div><div class="mini-block-link"><a href="').f(e.get(["url"],!1),e,"h").w('"').h("eq",e,{block:c},{key:e.get(["functionalMAP"],!1),value:e.get(["true"],!1)},"h").w('data-sku-id="').f(e.get(["skuId"],!1),e,"h").w('"data-product-id="').f(e.get(["productId"],!1),e,"h").w('"').x(e.getPath(!1,["sellerInfo","sellerId"]),e,{block:d},{}).w(">").f(e.get(["seePriceInCartText"],!1),e,"h").w("</a></div>")}function c(t,e){return t.w('class="see-in-cart-link"')}function d(t,e){return t.w('data-seller-id="').f(e.getPath(!1,["sellerInfo","sellerId"]),e,"h").w('"')}function u(t,e){return t.w('<div class="mini-block-link"><a href="').f(e.get(["url"],!1),e,"h").w('"').h("eq",e,{block:h},{key:e.get(["functionalMAP"],!1),value:e.get(["true"],!1)},"h").w('data-sku-id="').f(e.get(["skuId"],!1),e,"h").w('"data-product-id="').f(e.get(["productId"],!1),e,"h").w('"').x(e.getPath(!1,["sellerInfo","sellerId"]),e,{block:p},{}).w(">").f(e.get(["seePriceInCartText"],!1),e,"h").w("</a></div>")}function h(t,e){return t.w('class="see-in-cart-link"')}function p(t,e){return t.w('data-seller-id="').f(e.getPath(!1,["sellerInfo","sellerId"]),e,"h").w('"')}function f(t,e){return t.h("eq",e,{"else":g,block:y},{key:e.get(["condition"],!1),value:"openBox"},"h")}function g(t,e){return t.w('<div class="mini-block-sale-price">').nx(e.get(["hideOnSale"],!1),e,{block:m},{}).w("$").h("formatNumber",e,{},{amount:e.getPath(!1,["price","currentPrice"]),precision:2},"h").x(e.getPath(!1,["price","ibPricing"]),e,{block:v},{}).w("</div>")}function m(t,e){return t.w("On Sale: ")}function v(t,e){return t.w('<span class="ib-pricing">/mo.</span>')}function y(t,e){return t.w('<div class="mini-block-price">$').h("formatNumber",e,{},{amount:e.getPath(!1,["price","currentPrice"]),precision:2},"h").x(e.getPath(!1,["price","ibPricing"]),e,{block:b},{}).w("</div>")}function b(t,e){return t.w('<span class="ib-pricing">/mo.</span>')}function w(t,e){return t.w('<div class="mini-block-price">$').h("formatNumber",e,{},{amount:e.getPath(!1,["price","currentPrice"]),precision:2},"h").x(e.getPath(!1,["price","ibPricing"]),e,{block:_},{}).w("</div>")}function _(t,e){return t.w('<span class="ib-pricing">/mo.</span>')}function k(t,e){return t.w('<div class="price-disclaimer">').h("select",e,{block:C},{key:e.getPath(!1,["properties","contractCondition"])},"h").w("</div>")}function C(t,e){return t.h("eq",e,{block:x},{value:"2_YEARS_NEW"},"h").h("eq",e,{block:S},{value:"2_YEARS_UPGRADE"},"h").h("none",e,{block:T},{},"h")}function x(t,e){return t.w("With 2-year contract")}function S(t,e){return t.w("With 2-year contract extension")}function T(t,e){return t.f(e.getPath(!1,["properties","contractCondition"]),e,"h")}return t.register("_priceblock/dust/miniPriceblock2",e),e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,r.__dustBody=!0,o.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,l.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,u.__dustBody=!0,h.__dustBody=!0,p.__dustBody=!0,f.__dustBody=!0,g.__dustBody=!0,m.__dustBody=!0,v.__dustBody=!0,y.__dustBody=!0,b.__dustBody=!0,w.__dustBody=!0,_.__dustBody=!0,k.__dustBody=!0,C.__dustBody=!0,x.__dustBody=!0,S.__dustBody=!0,T.__dustBody=!0,e}(t),i=function(i,n){if(!n)throw new Error("wrong number of args for render");return t.render(e,i,n)};return i.template=e,i}}),define("dust-loader!list-page/components/recommendations/dust/recommendation",function(){return function(t){var e=function(t){function e(t,e){return t.w('<div class="product-image"><a href="').f(e.get(["url"],!1),e,"h").w('"><img class="lazy" src="').f(e.getPath(!1,["metaLayer","env_img"]),e,"h").w('/list-page/images/missing-image-small@2x-3a1fa99630f9592808eb1abf2e067a23.png"data-original="').f(e.getPath(!1,["metaLayer","env_pisces"]),e,"h").w("/image2/").f(e.getPath(!1,["media","primaryImage","path"]),e,"h").w(";canvasHeight=").f(e.get(["imgHeight"],!1),e,"h").w(";canvasWidth=").f(e.get(["imgWidth"],!1),e,"h").w('" alt="').f(e.getPath(!1,["names","short"]),e,"h").w('" /></a></div><h4 class="description"><a href="').f(e.get(["url"],!1),e,"h").w('" class="description">').f(e.getPath(!1,["names","short"]),e,"h").w('</a></h4><div class="ratings">').p("sc-stars/dust/stars",e,e,{percent:i,style:"small-yellow"}).w(" ").x(e.getPath(!1,["customerRatings","totalCount"]),e,{block:n},{}).w("</div>").s(e.get(["price"],!1),e,{block:r},{})}function i(t,e){return t.f(e.getPath(!1,["customerRatings","averageRating","percent0To100"]),e,"h")}function n(t,e){return t.w('<a href="').f(e.get(["reviewsUrl"],!1),e,"h").w('">(').f(e.getPath(!1,["customerRatings","totalCount"]),e,"h").w(")</a>")}function r(t,e){return t.p("_priceblock/dust/miniPriceblock2",e,e,{})}return t.register("list-page/components/recommendations/dust/recommendation",e),e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,r.__dustBody=!0,e}(t),i=function(i,n){if(!n)throw new Error("wrong number of args for render");return t.render(e,i,n)};return i.template=e,i}}),define("sc-meta-layer/javascript/defaultGetters",["require","cookieManager"],function(t){var e=t("cookieManager"),i={"device:deviceClass":function(t,i){return i[t]||e.get("bby_rdp")||"l"},"device:kiosk":function(t,i){return i[t]?i[t]:"960"!==(e.get("storeNumber")||"960")},"page:sysTime":function(t,e){return e[t]||(new Date).toISOString()}};return i}),define("sc-meta-layer/javascript/legacyGetters",["require","cookieManager"],function(t){var e=(t("cookieManager"),{secChannel:function(){return"https:"===window.location.protocol?"1":"0"}});return e}),define("sc-meta-layer/javascript/aliasGetters",["require"],function(t){var e={"app:sysDate":{key:"sysDate"},"page:language":{key:"language",defaultValue:"en"},"page:pageType":{key:"pageType"},"page:templateName":{key:"templateName"},"user:persistentCart":{key:"persistentCart"},"user:profileId":{key:"profileId"},"user:recognized":{key:"recognized"},"user:rzTier":{key:"rzTier"}};return e}),define("sc-meta-layer/javascript/metaLayer",["require","lodash","backbone","sc-meta-layer/javascript/defaultGetters","sc-meta-layer/javascript/legacyGetters","sc-meta-layer/javascript/aliasGetters"],function(t){var e=t("lodash"),i=t("backbone"),n=t("sc-meta-layer/javascript/defaultGetters"),r=t("sc-meta-layer/javascript/legacyGetters"),o=t("sc-meta-layer/javascript/aliasGetters"),s=window.track||{},a={};window.metaLayer&&(e.extend(s,window.metaLayer),delete window.metaLayer);var l={get:function(t){var i=s[t],n=a[t];return e.isFunction(n)&&(i=n(t,s,l)),e.cloneDeep(i)},getAll:function(){var t,i={};return t=arguments.length>0?e.isArray(arguments[0])?arguments[0]:e.toArray(arguments):e.unique(e.keys(s).concat(e.keys(a))),e.each(t,function(t){i[t]=l.get(t)}),i}};return l=e.extend(l,i.Events),l._={set:function(){var t={},i={};e.isObject(arguments[0])?(t=arguments[0],i=e.extend(i,arguments[1])):e.isString(arguments[0])&&!e.isUndefined(arguments[1])&&(t[arguments[0]]=arguments[1],i=e.extend(i,arguments[2])),s=e.merge(s,t),i.silent||(l.trigger("change",e.cloneDeep(t)),e.each(t,function(t,e){l.trigger("change:"+e,t)}))},destroy:function(t,i){i=i||{},e.isArray(t)||(t=[t]),e.each(t,function(t){delete s[t]}),i.silent||(l.trigger("destroy",t),e.each(t,function(t){l.trigger("destroy:"+t)}))},registerGetter:function(t,i){if(!e.isString(t))throw new TypeError("attribute must be a string");if(!e.isFunction(i))throw new TypeError("getter must be a function");if(a[t])throw new Error("MetaLayer attribute already exists for '"+t+"'");a[t]=i},unregisterGetter:function(t){e.isFunction(a[t])&&delete a[t]}},e.each(n,function(t,e){l._.registerGetter(e,t)}),e.each(r,function(t,e){l._.registerGetter(e,t)}),e.each(o,function(t,e){l._.registerGetter(e,function(e,i){return i[t.key]||t.defaultValue})}),l}),define("list-page/components/recommendations/javascript/recommendation-view",["require","exports","module","backbone","dust","list-page/components/application/dust-helpers/formatters","dust-loader!sc-stars/dust/stars","dust-loader!_priceblock/dust/miniPriceblock2","dust-loader!list-page/components/recommendations/dust/recommendation","sc-meta-layer/javascript/metaLayer","eventmanager"],function(t,e,i){var n=t("backbone"),r=t("dust");t("list-page/components/application/dust-helpers/formatters")(r),t("dust-loader!sc-stars/dust/stars")(r),t("dust-loader!_priceblock/dust/miniPriceblock2")(r);var o=t("dust-loader!list-page/components/recommendations/dust/recommendation")(r),s=t("sc-meta-layer/javascript/metaLayer"),a=t("eventmanager"),l=n.View.extend({className:"sub-item",template:o,events:{"click a":"_productLinkClick"},initialize:function(t){this.options=t||{}},render:function(){var t,e,i=this;"small"===this.options.appData.ressSize?(t=115,e=this.model.get("url")+"#spoke/reviews"):(t=142,e=this.model.get("url")+"#tabbed-customerreviews");var n=_.extend({imgPath:this.options.appData.imgPath,imgHeight:t,imgWidth:t,reviewsUrl:e,metaLayer:s.getAll()},this.model.toJSON());return o(n,function(t,e){t||(i.$el.html(e),i.$el.attr("data-sku-id",i.model.get("skuId")),i.$el.attr("data-ep-value",i.model.get("ep")),i.$el.attr("data-price-value",i.model.get("price")&&i.model.get("price").currentPrice))}),this},_productLinkClick:function(t){this._sendAnalyticsEvents()},_sendAnalyticsEvents:function(){var t={skuId:this.model.get("skuId"),price:this.model.get("price"),epValue:this.model.get("ep"),type:"unified"};a.trigger("recommendations:productClick",t)}});i.exports=l}),define("list-page/components/recommendations/javascript/recommendations-view-large",["require","exports","module","list-page/components/recommendations/javascript/recommendations-view-base","dustjs","dust-loader!list-page/components/recommendations/dust/recommendations-large","list-page/components/recommendations/javascript/recommendation-view"],function(t,e,i){var n=t("list-page/components/recommendations/javascript/recommendations-view-base"),r=t("dustjs"),o=t("dust-loader!list-page/components/recommendations/dust/recommendations-large")(r),s=t("list-page/components/recommendations/javascript/recommendation-view"),a=n.extend({template:o,events:{"click .carousel-control.right":"_nextClick","click .carousel-control.left":"_prevClick"},_renderRecommendations:function(){var t=this.collection.getPageNumber(),e=this.collection.getPageCount();this.$(".header .paging .current-page").html(t),this.$(".header .paging .page-count").html(e),this._updateNavigation();var i=this.collection.getPageNumber()-1,n=this.$(".carousel-inner .item:eq("+i+")");n.empty(),this.collection.each(function(t,e){var i=new s({appData:this.options.appData,model:t});n.append(i.render().el)},this),this._lazyLoadImages(this.$(".item.active"))},_nextClick:function(t){t.preventDefault(),this.collection.getNextPage(),this.$(".carousel").carousel("next"),this._lazyLoadImages(this.$(".item.active").next())},_prevClick:function(t){t.preventDefault(),this.$(".carousel").carousel("prev"),this.collection.getPreviousPage(),this._lazyLoadImages(this.$(".item.active").prev())},_lazyLoadImages:function(t){t.find("img[data-original]").each(function(){var t=$(this);$("<img />").on("load",function(){t.attr("src",t.data("original")),t.removeAttr("data-original")}).attr("src",t.data("original"))})},_updateNavigation:function(){var t=this.collection.getPageCount();if(1>=t)return void this.$(".carousel-control").hide();var e=this.collection.getPageNumber();1===e?(this.$(".carousel-control.left").addClass("disabled"),this.$(".carousel-control.right").removeClass("disabled")):e===t?(this.$(".carousel-control.left").removeClass("disabled"),this.$(".carousel-control.right").addClass("disabled")):(this.$(".carousel-control.left").removeClass("disabled"),this.$(".carousel-control.right").removeClass("disabled"))}});i.exports=a}),define("list-page/components/application/javascript/analytics-events",["require","exports","module","lodash","backbone","eventmanager"],function(t,e,i){
var n=t("lodash"),r=t("backbone"),o=t("eventmanager"),s=function(){this.listenTo(o,"Analytics:ListPage:Cart:AddToPackage",function(t){o.trigger("addToPackage",t)}),this.listenTo(o,"Analytics:ListPage:Cart:UpgradeYourPhone",function(t){o.trigger("upgradeYourPhone",t)}),this.listenTo(o,"Analytics:ListPage:Cart:CheckStores",function(t){o.trigger("checkStores",t)}),this.listenTo(o,"Analytics:ListPage:Cart:AddToCart",function(t){o.trigger("addToCart",t)})};n.extend(s.prototype,r.Events),i.exports=s}),function(t){"use strict";"function"==typeof define&&define.amd?define("_vendors/bootstrap/modal",["jquery"],t):"undefined"!=typeof exports?module.exports=t(require("jquery")):t(jQuery)}(function(t){"use strict";function e(e,n){return this.each(function(){var r=t(this),o=r.data("bs.modal"),s=t.extend({},i.DEFAULTS,r.data(),"object"==typeof e&&e);o||r.data("bs.modal",o=new i(this,s)),"string"==typeof e?o[e](n):s.show&&o.show(n)})}var i=function(e,i){this.options=i,this.$body=t(document.body),this.$element=t(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};i.VERSION="3.3.5",i.TRANSITION_DURATION=300,i.BACKDROP_TRANSITION_DURATION=150,i.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},i.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},i.prototype.show=function(e){var n=this,r=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(r),this.isShown||r.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){n.$element.one("mouseup.dismiss.bs.modal",function(e){t(e.target).is(n.$element)&&(n.ignoreBackdropClick=!0)})}),this.backdrop(function(){var r=t.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(n.$body),n.$element.show().scrollTop(0),n.adjustDialog(),r&&n.$element[0].offsetWidth,n.$element.addClass("in"),n.enforceFocus();var o=t.Event("shown.bs.modal",{relatedTarget:e});r?n.$dialog.one("bsTransitionEnd",function(){n.$element.trigger("focus").trigger(o)}).emulateTransitionEnd(i.TRANSITION_DURATION):n.$element.trigger("focus").trigger(o)}))},i.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(i.TRANSITION_DURATION):this.hideModal())},i.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},i.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},i.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},i.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},i.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},i.prototype.backdrop=function(e){var n=this,r=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var o=t.support.transition&&r;if(this.$backdrop=t(document.createElement("div")).addClass("modal-backdrop "+r).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),o&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;o?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var s=function(){n.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",s).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):s()}else e&&e()},i.prototype.handleUpdate=function(){this.adjustDialog()},i.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},i.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},i.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},i.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},i.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},i.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var n=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=i,t.fn.modal.noConflict=function(){return t.fn.modal=n,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(i){var n=t(this),r=n.attr("href"),o=t(n.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,"")),s=o.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(r)&&r},o.data(),n.data());n.is("a")&&i.preventDefault(),o.one("show.bs.modal",function(t){t.isDefaultPrevented()||o.one("hidden.bs.modal",function(){n.is(":visible")&&n.trigger("focus")})}),e.call(o,s,this)})}),function(t,e){function i(t,e,i){return[parseFloat(t[0])*(p.test(t[0])?e/100:1),parseFloat(t[1])*(p.test(t[1])?i/100:1)]}function n(e,i){return parseInt(t.css(e,i),10)||0}function r(e){var i=e[0];return 9===i.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(i)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}t.ui=t.ui||{};var o,s=Math.max,a=Math.abs,l=Math.round,c=/left|center|right/,d=/top|center|bottom/,u=/[\+\-]\d+(\.[\d]+)?%?/,h=/^\w+/,p=/%$/,f=t.fn.position;t.position={scrollbarWidth:function(){if(o!==e)return o;var i,n,r=t("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),s=r.children()[0];return t("body").append(r),i=s.offsetWidth,r.css("overflow","scroll"),n=s.offsetWidth,i===n&&(n=r[0].clientWidth),r.remove(),o=i-n},getScrollInfo:function(e){var i=e.isWindow?"":e.element.css("overflow-x"),n=e.isWindow?"":e.element.css("overflow-y"),r="scroll"===i||"auto"===i&&e.width<e.element[0].scrollWidth,o="scroll"===n||"auto"===n&&e.height<e.element[0].scrollHeight;return{width:o?t.position.scrollbarWidth():0,height:r?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var i=t(e||window),n=t.isWindow(i[0]);return{element:i,isWindow:n,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:n?i.width():i.outerWidth(),height:n?i.height():i.outerHeight()}}},t.fn.position=function(e){if(!e||!e.of)return f.apply(this,arguments);e=t.extend({},e);var o,p,g,m,v,y,b=t(e.of),w=t.position.getWithinInfo(e.within),_=t.position.getScrollInfo(w),k=(e.collision||"flip").split(" "),C={};return y=r(b),b[0].preventDefault&&(e.at="left top"),p=y.width,g=y.height,m=y.offset,v=t.extend({},m),t.each(["my","at"],function(){var t,i,n=(e[this]||"").split(" ");1===n.length&&(n=c.test(n[0])?n.concat(["center"]):d.test(n[0])?["center"].concat(n):["center","center"]),n[0]=c.test(n[0])?n[0]:"center",n[1]=d.test(n[1])?n[1]:"center",t=u.exec(n[0]),i=u.exec(n[1]),C[this]=[t?t[0]:0,i?i[0]:0],e[this]=[h.exec(n[0])[0],h.exec(n[1])[0]]}),1===k.length&&(k[1]=k[0]),"right"===e.at[0]?v.left+=p:"center"===e.at[0]&&(v.left+=p/2),"bottom"===e.at[1]?v.top+=g:"center"===e.at[1]&&(v.top+=g/2),o=i(C.at,p,g),v.left+=o[0],v.top+=o[1],this.each(function(){var r,c,d=t(this),u=d.outerWidth(),h=d.outerHeight(),f=n(this,"marginLeft"),y=n(this,"marginTop"),x=u+f+n(this,"marginRight")+_.width,S=h+y+n(this,"marginBottom")+_.height,T=t.extend({},v),P=i(C.my,d.outerWidth(),d.outerHeight());"right"===e.my[0]?T.left-=u:"center"===e.my[0]&&(T.left-=u/2),"bottom"===e.my[1]?T.top-=h:"center"===e.my[1]&&(T.top-=h/2),T.left+=P[0],T.top+=P[1],t.support.offsetFractions||(T.left=l(T.left),T.top=l(T.top)),r={marginLeft:f,marginTop:y},t.each(["left","top"],function(i,n){t.ui.position[k[i]]&&t.ui.position[k[i]][n](T,{targetWidth:p,targetHeight:g,elemWidth:u,elemHeight:h,collisionPosition:r,collisionWidth:x,collisionHeight:S,offset:[o[0]+P[0],o[1]+P[1]],my:e.my,at:e.at,within:w,elem:d})}),e.using&&(c=function(t){var i=m.left-T.left,n=i+p-u,r=m.top-T.top,o=r+g-h,l={target:{element:b,left:m.left,top:m.top,width:p,height:g},element:{element:d,left:T.left,top:T.top,width:u,height:h},horizontal:0>n?"left":i>0?"right":"center",vertical:0>o?"top":r>0?"bottom":"middle"};u>p&&a(i+n)<p&&(l.horizontal="center"),h>g&&a(r+o)<g&&(l.vertical="middle"),s(a(i),a(n))>s(a(r),a(o))?l.important="horizontal":l.important="vertical",e.using.call(this,t,l)}),d.offset(t.extend(T,{using:c}))})},t.ui.position={fit:{left:function(t,e){var i,n=e.within,r=n.isWindow?n.scrollLeft:n.offset.left,o=n.width,a=t.left-e.collisionPosition.marginLeft,l=r-a,c=a+e.collisionWidth-o-r;e.collisionWidth>o?l>0&&0>=c?(i=t.left+l+e.collisionWidth-o-r,t.left+=l-i):c>0&&0>=l?t.left=r:l>c?t.left=r+o-e.collisionWidth:t.left=r:l>0?t.left+=l:c>0?t.left-=c:t.left=s(t.left-a,t.left)},top:function(t,e){var i,n=e.within,r=n.isWindow?n.scrollTop:n.offset.top,o=e.within.height,a=t.top-e.collisionPosition.marginTop,l=r-a,c=a+e.collisionHeight-o-r;e.collisionHeight>o?l>0&&0>=c?(i=t.top+l+e.collisionHeight-o-r,t.top+=l-i):c>0&&0>=l?t.top=r:l>c?t.top=r+o-e.collisionHeight:t.top=r:l>0?t.top+=l:c>0?t.top-=c:t.top=s(t.top-a,t.top)}},flip:{left:function(t,e){var i,n,r=e.within,o=r.offset.left+r.scrollLeft,s=r.width,l=r.isWindow?r.scrollLeft:r.offset.left,c=t.left-e.collisionPosition.marginLeft,d=c-l,u=c+e.collisionWidth-s-l,h="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,p="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];0>d?(i=t.left+h+p+f+e.collisionWidth-s-o,(0>i||i<a(d))&&(t.left+=h+p+f)):u>0&&(n=t.left-e.collisionPosition.marginLeft+h+p+f-l,(n>0||a(n)<u)&&(t.left+=h+p+f))},top:function(t,e){var i,n,r=e.within,o=r.offset.top+r.scrollTop,s=r.height,l=r.isWindow?r.scrollTop:r.offset.top,c=t.top-e.collisionPosition.marginTop,d=c-l,u=c+e.collisionHeight-s-l,h="top"===e.my[1],p=h?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,f="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,g=-2*e.offset[1];0>d?(n=t.top+p+f+g+e.collisionHeight-s-o,t.top+p+f+g>d&&(0>n||n<a(d))&&(t.top+=p+f+g)):u>0&&(i=t.top-e.collisionPosition.marginTop+p+f+g-l,t.top+p+f+g>u&&(i>0||a(i)<u)&&(t.top+=p+f+g))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},function(){var e,i,n,r,o,s=document.getElementsByTagName("body")[0],a=document.createElement("div");e=document.createElement(s?"div":"body"),n={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},s&&t.extend(n,{position:"absolute",left:"-1000px",top:"-1000px"});for(o in n)e.style[o]=n[o];e.appendChild(a),i=s||document.documentElement,i.insertBefore(e,i.firstChild),a.style.cssText="position: absolute; left: 10.7432222px;",r=t(a).offset().left,t.support.offsetFractions=r>10&&11>r,e.innerHTML="",i.removeChild(e)}()}(jQuery),define("jquery.ui.position",function(){}),define("dust-loader!sc-tooltips/dust/tooltipsFromData",function(){return function(t){var e=function(t){function e(t,e){return t.w('<div class="tooltip-wrapper">').x(e.get(["header"],!1),e,{block:i},{}).w('<div class="content"></div>').x(e.get(["footer"],!1),e,{block:n},{}).w("</div>")}function i(t,e){return t.w('<div class="header">').f(e.get(["header"],!1),e,"h").w("</div>")}function n(t,e){return t.w('<div class="footer">').f(e.get(["footer"],!1),e,"h").w("</div>")}return t.register("sc-tooltips/dust/tooltipsFromData",e),e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,e}(t),i=function(i,n){if(!n)throw new Error("wrong number of args for render");return t.render(e,i,n)};return i.template=e,i}}),define("dust-loader!sc-tooltips/dust/tooltip",function(){return function(t){var e=function(t){function e(t,e){return t.w('<div id="').f(e.get(["id"],!1),e,"h").w('" class="base-tooltip"><div class="tooltip-style"><a href="#" class="close-button"><span class="text">close</span><span class="button"></span></a><div class="content-wrap"></div><div id="arrow-wrap"><div class="tt-mask-arrow"></div><div class="tt-shadow-arrow"></div></div></div></div>')}return t.register("sc-tooltips/dust/tooltip",e),e.__dustBody=!0,e}(t),i=function(i,n){if(!n)throw new Error("wrong number of args for render");return t.render(e,i,n)};return i.template=e,i}}),function(t,e,i,n){function r(e){var i={};return t(e).each(function(){var e={position:"left"},r=t(this).data();for(var o in r)if(-1!=o.indexOf("bbytooltip")){var s=o.replace("bbytooltip","").toLowerCase();i[s]=e[s],r[o]!=n&&(i[s]=r[o])}i.content={},i.id&&(i.content.id=i.id,delete i.id),i.header&&(i.content.header=i.header,delete i.header),i.body&&(i.content.body=i.body,delete i.body),i.footer&&(i.content.footer=i.footer,delete i.footer),i.templatename&&(i.content.template={},i.content.template.name=i.templatename,delete i.templatename),i.templatedata&&(i.content.template.data=i.templatedata,delete i.templatedata),i.clone&&(i.content.clone=i.clone,delete i.clone),i.cloneMode&&(i.content.cloneMode=i.cloneMode,delete i.cloneMode),i.target&&(i.target="#"+i.target)}),i}function o(e){var i,r=e.data.allOptions,o=t(e.data.target),s=t("#"+r.tooltipid),a=s.data("content"),l=r.style,d=s.find(".tooltip-style");for(var u in k){t("#"+k[u].tooltipid).hide();var h=t(k[u].trigger).data("offTimer");clearTimeout(h)}if(r.content.clone?r.renderedcontent=i=_.result(r,"renderedcontent"):r.renderedcontent=i=_.result(r,"renderedcontent"),a!=i){var p;p=r.content.clone?r.renderedcontent.clone(!0,!0):i,"bby-toolTip"!==r.tooltipid&&a===n&&(s.find(".content-wrap").html(p),s.data("content",i)),"bby-toolTip"==r.tooltipid&&(s.find(".content-wrap").html(p),s.data("content",i))}if(!d.hasClass(l)){var g=d.attr("class").split(/\s+/);g.length>1&&t.each(g,function(t,e){"tooltip-style"!==e&&d.removeClass(e)}),null!==l&&d.addClass(l)}var m=r.target||e.data.target;f(s,m,r),s.off("mouseenter",c).on("mouseenter",{target:o,allOptions:r},c),s.find("a.close-button").off("click").on("click",{target:o,allOptions:r},function(e){e.preventDefault();for(var i in k)clearTimeout(t(k[i].trigger).data("offTimer"));t(this).closest(".base-tooltip").off("mouseleave"),t(this).closest(".base-tooltip").hide(),o.trigger("tooltiphide",e),o.trigger("tooltiphidden",e)}),o.trigger("tooltipshow",e)}function s(e){var i=e.data.target,n=e.data.allOptions;t(i).off("mouseenter",o).on("mouseenter",{target:i,allOptions:n},o),t(i).off("mouseleave",l).on("mouseleave",{target:i,allOptions:n},l),o(e)}function a(e){var i=e.data.target,n=e.data.allOptions;t(i).off("focus",o).on("focus",{target:i,allOptions:n},o),t(i).off("blur",l).on("blur",{target:i,allOptions:n},l),o(e)}function l(e){var i=e.data.allOptions,n=t("#"+i.tooltipid),r=e.data.target;C=!1,t("html").off("click",d),clearTimeout(t(r).data("offTimer"));var o=function(){t(r).trigger("tooltiphidden",e),n.hide()};if("click"!=i.event){var s=setTimeout(function(){o()},i.delay);t(r).data("offTimer",s)}else o();t(r).trigger("tooltiphide",e)}function c(e){var i=e.data.target;clearTimeout(i.data("offTimer")),"click"!==e.data.allOptions.event&&"focus"!==e.data.allOptions.event?t(this).off("mouseleave",l).on("mouseleave",{target:i,allOptions:e.data.allOptions},l):t(this).off("mouseleave",l)}function d(e){(t(e.target).closest(".close-button").length||0==t(e.target).parents(".tooltip-style").length)&&l(e)}function u(e){var i=e.data.target,n=e.data.allOptions;t(i).off("click",h).on("click",{target:i,allOptions:n},h),t(i).off("mouseenter",p).on("mouseenter",{target:i,allOptions:n},p),o(e),t("html").off("click",d).on("click",{target:e.data.target,allOptions:e.data.allOptions},d),C=!0}function h(e){e.stopPropagation(),e.preventDefault(),0==C&&(o(e),t("html").off("click",d).on("click",{target:e.data.target,allOptions:e.data.allOptions},d),C=!0)}function p(e){if(S!=e.data.target){S=e.data.target,C=!1;for(var i in k){t("#"+k[i].tooltipid).hide();var n=t(k[i].trigger).data("offTimer");clearTimeout(n)}}}function f(e,i,n){var r=e.find(".tooltip-style"),o=parseInt(n.adjustpos,10);r.css({margin:"0px"}),e.css({top:"-9999px",left:"-9999px"}),e.show(),e.position({of:i,my:n.uiposition.my,at:n.uiposition.at,collision:n.uiposition.collision,using:function(e,i){var n=i.horizontal+" "+i.vertical,s=g(n),a=t(this).find("#arrow-wrap"),l={},c=e.top,d=e.left;l["margin-"+s]=o+"px","right"==s&&(d=e.left-o),"bottom"==s&&(c=e.top-o),t(this).css({top:c,left:d}),r.css(l),a.hasClass("tt-arrow-"+s)||a.removeClass().addClass("tt-arrow-"+s)}}),m(e,i,n)}function g(t){var e;switch(t){case"right top":e="top";break;case"right middle":e="right";break;case"right bottom":e="bottom";break;case"left top":e="top";break;case"left middle":e="left";break;case"left bottom":e="bottom";break;case"center bottom":e="bottom";break;case"center top":e="top";break;default:e="none"}return e}function m(e,i,n){var r=e.find("#arrow-wrap"),o=e.find(".tooltip-style");r.css({top:"0px",left:"0px"}),r.position({of:o,at:n.uiposition.arrowmy,my:n.uiposition.at,within:e,using:function(e,i){var n,r=i.horizontal+" "+i.vertical;switch(r){case"right middle":n="left";break;case"left middle":n="right";break;case"center bottom":n="top";break;case"center top":n="bottom";break;default:n="none"}t(this).hasClass("tt-arrow-"+n)||t(this).removeClass().addClass("tt-arrow-"+n),t(this).css({left:e.left,top:e.top})},collision:"flip"})}function v(e,i){this.element=e,this.options=t.extend(!0,{},w,i),this._defaults=w,this._name=y,this.init()}var y="bbytooltip",b=0,w={tooltipid:"bby-toolTip",content:{id:null,header:null,body:null,footer:null,template:{name:null,data:{}},viewobject:null,clone:!0,cloneMode:"deep-clone-with-events"},renderedcontent:null,position:null,adjustpos:"20",uiposition:{my:"left center",at:"right center",collision:"flip fit",arrowmy:"left+1 center"},event:"mouseenter",style:null,delay:500,target:null,opentooltip:!1},k={},C=!1,x={},S="",T={unbindtooltip:function(){t(this).each(function(){var e=t.data(this,"plugin_"+y);e&&e.unbindTooltip(this)})},updatetooltip:function(e){t(this).each(function(){var i=t.data(this,"plugin_"+y);i&&i.updateTooltip(this,e)})},hidetooltip:function(e){t(this).each(function(){var e=t.data(this,"plugin_"+y);e&&t("#"+e.options.tooltipid).find("a.close-button").trigger("click")})},destroy:function(t){this.bbytooltip("unbindtooltip"),k={},_.each(x,function(t){t.find("*").unbind().removeData(),t.unbind().removeData()}),x={}},open:function(){var t=this.data("plugin_"+y);o({data:{target:t.options.target||this,allOptions:t.options}})},close:function(){var t=this.data("plugin_"+y);l({data:{target:t.options.target||this,allOptions:t.options}})}};v.prototype={init:function(){var t,e;t=this.element,e=this.options,this._filterContent(t,e,this._renderTooltip)},_configTooltips:function(e,i){this._filterTooltipPosition(e,i),this._eventType(e,i),i.trigger=e;var n={};n.tooltipid=i.tooltipid,n.trigger=i.trigger,k[""+y+"-"+b]=n,b++,t(e).trigger("tooltiprendered")},_filterContent:function(e,i,n){var r=this;if(null!=i.content)if("function"==typeof i.content)i.renderedcontent=i.content,i.content.clone=!1,n.call(r,e,i);else if(null!=i.content.template&&null!=i.content.template.name)dust.render(i.content.template.name,i.content.template.data,function(t,o){i.renderedcontent=o,i.content.clone=!1,n.call(r,e,i)});else if(null!=i.content.id){if(i.content.clone)if("deep-clone-with-events"===i.content.cloneMode)if(x[i.content.id])i.renderedcontent=x[i.content.id].clone(!0,!0);else{var o=t("#"+i.content.id);o.removeClass("bbytooltip"),i.renderedcontent=o.clone(!0,!0),x[i.content.id]=i.renderedcontent,t("html").hasClass("ie7")?(o.attr("id",""),o.hide()):o.remove()}else if("clone-with-replace"===i.content.cloneMode)if(x[i.content.id])i.renderedcontent=x[i.content.id];else{var o=t("#"+i.content.id);t(o).removeClass("bbytooltip").hide();var s=o.clone().show();i.renderedcontent=function(){return s}}else if(x[i.content.id])i.renderedcontent=x[i.content.id];else{var o=t("#"+i.content.id);o.removeClass("bbytooltip"),i.renderedcontent=function(){return t("#"+i.content.id).clone()},x[i.content.id]=i.renderedcontent,t("html").hasClass("ie7")?(o.attr("id",""),o.hide()):o.remove()}else i.renderedcontent=function(){return t("#"+i.content.id).html()},i.content.clone=!1;n.call(r,e,i)}else null!=i.content.body?dust.render("sc-tooltips/dust/tooltipsFromData",i.content,function(o,s){var a=t(s);a.find("div.content").html(i.content.body),i.renderedcontent=a,i.content.clone=!1,n.call(r,e,i)}):null!=i.content.viewobject&&(i.renderedcontent=i.content.viewobject,i.content.clone=!1,n.call(r,e,i))},_renderTooltip:function(e,i){var n=i.tooltipid,r=this;dust.render("sc-tooltips/dust/tooltip",{id:n},function(o,s){t("#"+n).length||t("body").append(s),r._configTooltips(e,i)})},_eventType:function(e,i){switch(i.event){case"click":i.opentooltip?(t(e).on("openTooltip",{target:e,allOptions:i},u),t(e).trigger("openTooltip").off("openTooltip",u)):(t(e).off("click",h).on("click",{target:e,allOptions:i},h),t(e).off("mouseenter",p).on("mouseenter",{target:e,allOptions:i},p));break;case"focus":i.opentooltip?(t(e).on("openTooltip",{target:e,allOptions:i},a),t(e).trigger("openTooltip").off("openTooltip",a)):(t(e).off("focus",o).on("focus",{target:e,allOptions:i},o),t(e).off("blur",l).on("blur",{target:e,allOptions:i},l));break;default:t(e).off(".returnFalse").on("click.returnFalse",function(t){t.preventDefault()}),i.opentooltip?(t(e).on("openTooltip",{target:e,allOptions:i},s),t(e).trigger("openTooltip",s).off("openTooltip",s)):(t(e).off("mouseenter",o).on("mouseenter",{target:e,allOptions:i},o),t(e).off("mouseleave",l).on("mouseleave",{target:e,allOptions:i},l))}},_filterTooltipPosition:function(e,i){var n={};if(null!=i.position){switch(i.position){case"left":n.my="right center",n.at="left center",n.arrowmy="right-1 center";break;case"right":n.my="left center",n.at="right center",n.arrowmy="left+1 center";break;case"top":n.my="center bottom",n.at="center top",n.arrowmy="center bottom-1",n.collision="fit flip";break;case"bottom":n.my="center top",n.at="center bottom",n.arrowmy="center top+1",n.collision="fit flip"}var r=t.extend(!0,{},i.uiposition,n);i.uiposition=r}}},v.prototype.updateTooltipOptions=function(e,i){this._filterTooltipPosition(e,i);var n=t(e).data("plugin_bbytooltip").options,r=t.extend(!0,{},n,i);this._eventType(e,r),t(e).data("plugin_bbytooltip").options=r},v.prototype.unbindTooltip=function(e){if("undefined"==typeof e)throw new TypeError("unbindTooltip called without an element!");t(e).bbytooltip("hidetooltip");var i=t(e).data();t("#"+i.plugin_bbytooltip.options.tooltipid).removeData("content"),t(e).removeData("plugin_bbytooltip"),t(e).off("mouseleave",l).off("mouseenter",o).off("mouseenter",p).off("click",h).off("click",d).off("openTooltip",u).off("openTooltip",s).off(".returnFalse")},v.prototype.updateTooltip=function(t,e){"undefined"!=typeof e&&(null!=e.content?this._filterContent(t,e,this.updateTooltipOptions):this.updateTooltipOptions(t,e))},t.fn[y]=function(e){return T[e]?void T[e].apply(this,Array.prototype.slice.call(arguments,1)):this.each(function(){var i=e;"undefined"==typeof i&&(i=r(this)),t.data(this,"plugin_"+y)||t.data(this,"plugin_"+y,new v(this,i))})}}(jQuery,window,document),function(){"undefined"!=typeof define&&define.amd&&define("sc-tooltips/javascript/_tooltips",["require","dust","jquery.ui.position","dust-loader!../dust/tooltipsFromData","dust-loader!../dust/tooltip"],function(t){var e=t("dust");t("jquery.ui.position"),t("dust-loader!../dust/tooltipsFromData")(e),t("dust-loader!../dust/tooltip")(e)})}(),define("sc-popup/javascript/_popup",["require","jquery"],function(t){var e=t("jquery"),i={init:function(t){return this.each(function(){var i=e(this);t=e.extend({},e.fn.bbypopup.defaults,t);var n=i.data();for(var r in n)if(-1!=r.indexOf("bbypopup")){var o=r.replace("bbypopup","").toLowerCase();if(void 0!=e.fn.bbypopup.defaults[o]){var s=n[r];t[o]=s}}i.data("bbypopup",{target:i,options:t,internal:{}});var a,l,c,d=i.attr("href"),u="toolbar="+t.toolbar+",location="+t.location+",status="+t.status+",menubar="+t.menubar+",scrollbars="+t.scrollbars+",resizable="+t.resizable+",width="+t.width+",height="+t.height,o=t.name;i.attr("href","#"),i.click(function(){return t.center&&(l=(screen.width-parseInt(t.width))/2,c=(screen.height-parseInt(t.height))/2,u=u+",left="+l+",top="+c),a=window.open(d,o,u),a.focus(),!1})})},destroy:function(){return this.each(function(){var t=e(this);t.unbind("click"),t.removeData("bbypopup")})}};e.fn.bbypopup=function(t){return i[t]?i[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist on jQuery.bbypopup"):i.init.apply(this,arguments)},e.fn.bbypopup.defaults={name:"popup",status:"no",toolbar:"no",location:"no",menubar:"no",resizable:"yes",scrollbars:"yes",width:600,height:500,center:!0}}),define("dust-loader!_priceblock/dust/earlyAccessTooltipContent",function(){return function(t){var e=function(t){function e(t,e){return t.x(e.get(["attributes"],!1),e,{"else":i,block:n},{})}function i(t,e){return t.w('<div class="loader-large"></div>')}function n(t,e){return t.w("<h3>").f(e.getPath(!1,["attributes","headline"]),e,"h").w("</h3><p>").f(e.getPath(!1,["attributes","bodyCopy"]),e,"h").w('</p><p class="disclaimer">').f(e.getPath(!1,["attributes","disclaimer"]),e,"h").w("</p>")}return t.register("_priceblock/dust/earlyAccessTooltipContent",e),e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,e}(t),i=function(i,n){if(!n)throw new Error("wrong number of args for render");return t.render(e,i,n)};return i.template=e,i}}),define("_priceblock/javascript/priceblock",["require","dust","bluebird","jquery","dust-loader!_priceblock/dust/earlyAccessTooltipContent","sc-tooltips/javascript/_tooltips"],function(t){var e=t("dust"),i=t("bluebird"),n=t("jquery"),r=t("dust-loader!_priceblock/dust/earlyAccessTooltipContent")(e),o=i.promisify(r);return t("sc-tooltips/javascript/_tooltips"),n(function(){n(".secret-mdot a").on("click",function(t){t.preventDefault();var e=n(t.currentTarget);e.hide(),e.parents(".price-block").find(".map-price-hidden").append(e.data("tfp")).show()})}),{delegateEvents:function(t){var e=function(t){var e=n(t.currentTarget);if(!e.data("tooltip-loaded")){var r=e.data("assetid"),s=(e.data("rztier"),n('<div class="ea-tooltip-container"></div>'));o().then(function(t){s.html(t)}),e.bbytooltip({content:{body:s},position:"left"}),e.data("tooltip-loaded",!0),e.trigger("mouseenter"),i.resolve(n.get("/api/1.0/contentAsset/"+r)).then(o).then(function(t){s.html(t)})}};t.on("hover","a[data-pblock-link=earlyaccess]",e)}}}),define("list-page/components/application/javascript/application-view-base",["require","exports","module","backbone","list-page/components/application/javascript/router","eventmanager","list-page/components/application/javascript/cookie-manager","list-page/components/application/javascript/utilities","list-page/components/recommendations/javascript/recommendations-collection","list-page/components/recommendations/javascript/recommendations-service","list-page/components/recommendations/javascript/recommendations-view-large","list-page/components/application/javascript/analytics-events","_vendors/bootstrap/modal","sc-tooltips/javascript/_tooltips","sc-popup/javascript/_popup","_priceblock/javascript/priceblock"],function(t,e,i){var n=t("backbone"),r=t("list-page/components/application/javascript/router"),o=t("eventmanager"),s=(new(t("list-page/components/application/javascript/cookie-manager")),t("list-page/components/application/javascript/utilities")),a=t("list-page/components/recommendations/javascript/recommendations-collection"),l=t("list-page/components/recommendations/javascript/recommendations-service"),c=t("list-page/components/recommendations/javascript/recommendations-view-large"),d=t("list-page/components/application/javascript/analytics-events");t("_vendors/bootstrap/modal"),t("sc-tooltips/javascript/_tooltips"),t("sc-popup/javascript/_popup");var u=t("_priceblock/javascript/priceblock"),h=n.View.extend({RecommendationsView:c,el:"body",initialize:function(t){if(this.options=t||{},u.delegateEvents($("body")),new d,this.router=new r({appData:this.options.appData}),this.listenTo(o,"ListPage:Cart:Add",this._showLoading),this.listenTo(o,"ListPage:Cart:Add:Success",this._hideLoading),this.listenTo(o,"ListPage:Cart:Add:Error",this._hideLoading),this.listenTo(o,"HomeDeliveryPresourcing:DialogClosed",this._hdpDialogClosed),this.options.appData.plpUnifiedRecommenderDisabled!==!0){var e={hostname:window.location.hostname,pageType:this.options.appData.pageType,deviceClass:this.options.appData.deviceClass};this.recommendationsService=new l(e),this.recommendationsView1=new this.RecommendationsView({id:"recommendations-view1",appData:this.options.appData,collection:new a}),this.recommendationsView2=new this.RecommendationsView({id:"recommendations-view2",appData:this.options.appData,collection:new a}),$(window).on("DOMContentLoaded load resize scroll",_.bind(this._loadRecommendations,this))}n.history.start()},render:function(){return this.canFetch=!0,this.options.appData.plpUnifiedRecommenderDisabled!==!0&&(this.$("#recommendations1").html(this.recommendationsView1.render().el),this.$("#recommendations2").html(this.recommendationsView2.render().el)),this.$(".bbytooltip-trigger").bbytooltip(),this.$(".bbypopup").bbypopup(),this},_showLoading:function(){this.$(".cart-processing").show()},_hideLoading:function(){this.$(".cart-processing").hide()},_loadRecommendations:function(t){this.canFetch&&s.isElementPartiallyInViewPort(this.$("#recommendations1"),1e3)&&(this.canFetch=!1,this.recommendationsService.getRecommendations().bind(this).done(function(t){this.recommendationsView1.collection.setData(t.carousel1),this.recommendationsView2.collection.setData(t.carousel2)}))},_hdpDialogClosed:function(t){t.hasZipCodeChanged&&!t.wasButtonClicked&&window.location.reload()}});i.exports=h}),define("sc-persistence-manager/javascript/handlers/cookies",["require","bluebird"],function(t){function e(t){return t.replace(/^\s+|\s+$/g,"")}function i(){}var n=t("bluebird"),r=/(\..*\..*)$/;return i.prototype.init=function(){
return n.resolve()},i.prototype.get=function(t){var i=document.cookie.split(";"),r=null;for(var o in i){var s=i[o].split("=");if(decodeURIComponent(e(s[0]))===t){r=decodeURIComponent(s[1]);break}}return n.resolve(JSON.parse(r))},i.prototype.set=function(t,e,i){var r=this;return this.get(t).then(function(o){return null!==o?document.cookie=r._argsToCookieString(t,e,i,o.meta.CreatedAt):document.cookie=r._argsToCookieString(t,e,i),n.resolve()})},i.prototype.remove=function(t,e){e=e||{};var i,o=e.path||"/",s="path="+o+"; ";try{i=e.domain||r.exec(window.location.host)[1],i=i.split(":")[0]}catch(a){i=".bestbuy.com"}var l="domain="+i+"; ";return document.cookie=encodeURIComponent(t)+"=; Expires=Thu, 01 Jan 1970 00:00:00 GMT; "+s+l,n.resolve()},i.prototype._argsToCookieString=function(t,e,i,n){i=i||{},i.ttl&&(i.expires=i.ttl);var o={};o.value=e,o.meta={},o.meta.CreatedAt=n||new Date,o.meta.ModifiedAt=new Date;var s,a=i.path||"/",l=a?"path="+a+"; ":"";try{s=i.domain||r.exec(window.location.host)[1],s=s.split(":")[0]}catch(c){s=".bestbuy.com"}var d,u=s?"domain="+s+"; ":"",h=i.secure||!1,p=h?"secure; ":"";if(i.expires){if("number"!=typeof i.expires)throw new Error("Expires must be a number");d=new Date(Date.now()+60*Math.ceil(i.expires)*1e3)}i.ExpiresAt&&(d=i.ExpiresAt),o.meta.ExpiresAt=d;var f=d?"Expires="+d.toUTCString()+"; ":"",g=encodeURIComponent(t)+"="+encodeURIComponent(JSON.stringify(o))+"; "+f+l+u+p;return g},new i}),!function(t,e){"function"==typeof define&&define.amd?define("sc-persistence-manager/javascript/lscache/lscache.min",[],e):"undefined"!=typeof module&&module.exports?module.exports=e():t.lscache=e()}(this,function(){function t(){var t="__lscachetest__",i=t;if(void 0!==h)return h;try{s(t,i),a(t),h=!0}catch(n){h=e(n)?!0:!1}return h}function e(t){return t&&"QUOTA_EXCEEDED_ERR"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name||"QuotaExceededError"===t.name?!0:!1}function i(){return void 0===p&&(p=null!=window.JSON),p}function n(t){return t+g}function r(){return Math.floor((new Date).getTime()/v)}function o(t){return localStorage.getItem(f+b+t)}function s(t,e){localStorage.removeItem(f+b+t),localStorage.setItem(f+b+t,e)}function a(t){localStorage.removeItem(f+b+t)}function l(t){for(var e=new RegExp("^"+f+b+"(.*)"),i=localStorage.length-1;i>=0;--i){var r=localStorage.key(i);r=r&&r.match(e),r=r&&r[1],r&&r.indexOf(g)<0&&t(r,n(r))}}function c(t){var e=n(t);a(t),a(e)}function d(t){var e=n(t),i=o(e);if(i){var s=parseInt(i,m);if(r()>=s)return a(t),a(e),!0}}function u(t,e){w&&"console"in window&&"function"==typeof window.console.warn&&(window.console.warn("lscache - "+t),e&&window.console.warn("lscache - The error was: "+e.message))}var h,p,f="lscache-",g="-cacheexpiration",m=10,v=6e4,y=Math.floor(864e13/v),b="",w=!1,_={set:function(d,h,p){if(t()){if("string"!=typeof h){if(!i())return;try{h=JSON.stringify(h)}catch(f){return}}try{s(d,h)}catch(f){if(!e(f))return void u("Could not add item with key '"+d+"'",f);var g,v=[];l(function(t,e){var i=o(e);i=i?parseInt(i,m):y,v.push({key:t,size:(o(t)||"").length,expiration:i})}),v.sort(function(t,e){return e.expiration-t.expiration});for(var b=(h||"").length;v.length&&b>0;)g=v.pop(),u("Cache is full, removing item with key '"+d+"'"),c(g.key),b-=g.size;try{s(d,h)}catch(f){return void u("Could not add item with key '"+d+"', perhaps it's too big?",f)}}p?s(n(d),(r()+p).toString(m)):a(n(d))}},get:function(e){if(!t())return null;if(d(e))return null;var n=o(e);if(!n||!i())return n;try{return JSON.parse(n)}catch(r){return n}},remove:function(e){t()&&c(e)},supported:function(){return t()},flush:function(){t()&&l(function(t){c(t)})},flushExpired:function(){t()&&l(function(t){d(t)})},setBucket:function(t){b=t},resetBucket:function(){b=""},enableWarnings:function(t){w=t}};return _}),define("sc-persistence-manager/javascript/handlers/local-storage",["require","bluebird","lodash","sc-persistence-manager/javascript/lscache/lscache.min"],function(t){function e(){}function i(t){for(var t=JSON.stringify(t),i=0;i<e.validators.length;i++)if(e.validators[i].regex.test(t))return new Error(e.validators[i].message)}var n=t("bluebird"),r=(t("lodash"),t("sc-persistence-manager/javascript/lscache/lscache.min"));return r.setBucket("PM"),e.prototype.init=function(){try{return r.supported()?(window.sessionStorage.setItem("test","1"),window.sessionStorage.removeItem("test"),n.resolve()):n.reject(new Error("Not Supported"))}catch(t){return n.reject(new Error("Not Supported"))}},e.prototype.get=function(t){var e=sessionStorage.getItem(encodeURIComponent(t));return e?n.resolve(JSON.parse(decodeURIComponent(e))):(e=r.get(encodeURIComponent(t)),n.resolve(JSON.parse(decodeURIComponent(e))))},e.prototype.set=function(t,e,o){var s,a=this,l=i(e);return l?n.reject(l):this.get(t).then(function(i){return s=null!==i?a._argsToLocalStorageObject(t,e,o,i.meta.CreatedAt):a._argsToLocalStorageObject(t,e,o),s.expires?r.set(s.key,s.value,s.expires):sessionStorage.setItem(s.key,s.value),n.resolve()})},e.prototype.remove=function(t,e){return sessionStorage.removeItem(encodeURIComponent(t)),n.resolve(r.remove(encodeURIComponent(t)))},e.prototype._argsToLocalStorageObject=function(t,e,i,n){i=i||{},i.ttl&&(i.expires=i.ttl);var r={};r.value=e,r.meta={},r.meta.CreatedAt=n||new Date,r.meta.ModifiedAt=new Date;var o;if(i.expires){if("number"!=typeof i.expires)throw new Error("Expires must be a number");o=Math.ceil(i.expires)}return i.ExpiresAt&&(o=new Date(i.ExpiresAt)-Date.now()),r.meta.ExpiresAt=o?new Date(Date.now()+60*Math.ceil(o)*1e3):null,o?{key:encodeURIComponent(t),value:encodeURIComponent(JSON.stringify(r)),expires:o}:{key:encodeURIComponent(t),value:encodeURIComponent(JSON.stringify(r)),expires:void 0}},e.validators=[{regex:/\d{4,}-?\d{4,}-?\d{4,}-?\d{4,}/,message:"Cannot store strings that look like credit card numbers"},{regex:/\S+@\S+\.\S+/i,message:"Cannot store email addresses"},{regex:/\d{3}-\d{2}-\d{4}/i,message:"Cannot store ssn"}],new e}),define("sc-persistence-manager/javascript/persistence-manager",["require","lodash","bluebird","sc-persistence-manager/javascript/handlers/cookies","sc-persistence-manager/javascript/handlers/local-storage"],function(t){function e(t){this._handler=null,this._ready=n.defer(),this.ready=this._ready.promise,this._initializeAttempted=!1,this._initialized=!1,this._config=t||{},this._config.order=this._config.order||["localStorage","cookies"]}var i=t("lodash"),n=t("bluebird"),r={cookies:t("sc-persistence-manager/javascript/handlers/cookies"),localStorage:t("sc-persistence-manager/javascript/handlers/local-storage")};return e.prototype._init=function(){if(this._initializeAttempted)return this.ready;var t=this,e=null;if(this._initializeAttempted=!0,0===this._config.order.length)return this._ready.reject(new Error("No handlers specified in the ordering")),this.ready;for(var o=i.map(this._config.order,function(t){return function(){e=null;var i=r[t];return e=i,i.init()}}),s=n.resolve().then(o.shift());o.length>0;)s=s.caught(o.shift());return s.caught(function(e){return t._ready.reject(new Error("All handlers failed to initialize")),n.reject(new Error("All handlers failed to initialize"))}).then(function(){t._handler=e,t._ready.resolve(),t._initialized=!0}),t.ready},e.prototype._get=function(t){var e=this;return this._initialized?"string"!=typeof t?n.reject(new Error("Key must be a string. Got: "+typeof t)):this._handler.get(t):this._init().then(function(){return e._get(t)})},e.prototype.get=function(t,e){return this._get(t).then(function(t){return null===t||void 0===t?n.resolve(e):n.resolve(t.value)})},e.prototype.getMeta=function(t){return this._get(t).then(function(t){return t?n.resolve(t.meta):n.resolve(t)})},e.prototype.set=function(t,e,i){var r=this;return this._initialized?"string"!=typeof t?n.reject(new Error("Key must be a string. Got: "+typeof t)):"string"!=typeof e?n.reject(new Error("Value must be a string. Got: "+typeof e)):this._handler.set(t,e,i):this._init().then(function(){return r.set(t,e,i)})},e.prototype.remove=function(t){var e=this;return this._initialized?"string"!=typeof t?n.reject(new Error("Key must be a string. Got: "+typeof t)):this._handler.remove(t):this._init().then(function(){return e.remove(t)})},e.prototype.config=function(t){var n=i.extend(i.cloneDeep(this._config),t);return new e(n)},new e}),define("dust-loader!list-page/components/compare/dust/compare",function(){return function(t){var e=function(t){function e(t,e){return t.w('<div class="compare-preview"><ol class="compare-items" aria-label="Compared Items"></ol><button class="compare-button btn btn-default btn-md" data-track="FixedElement:Compare" aria-label="Compare selected items" aria-hidden="true" tabindex="-1">Compare</button><button class="compare-clear btn-link" data-track="FixedElement:Clear All" aria-label="Clear all compared items" aria-hidden="true" tabindex="-1">Clear all</button></div>')}return t.register("list-page/components/compare/dust/compare",e),e.__dustBody=!0,e}(t),i=function(i,n){if(!n)throw new Error("wrong number of args for render");return t.render(e,i,n)};return i.template=e,i}}),define("dust-loader!list-page/components/compare/dust/compare-item-empty",function(){return function(t){var e=function(t){function e(t,e){return t.w('<li class="compare-item empty"></li>')}return t.register("list-page/components/compare/dust/compare-item-empty",e),e.__dustBody=!0,e}(t),i=function(i,n){if(!n)throw new Error("wrong number of args for render");return t.render(e,i,n)};return i.template=e,i}}),define("list-page/components/compare/javascript/compare-item-model",["require","exports","module"],function(t,e,i){var n=Backbone.Model.extend({idAttribute:"skuId",destroy:function(t){this.stopListening(),this.trigger("destroy",this,this.collection,t)}});i.exports=n}),define("list-page/components/compare/javascript/compare-item-collection",["require","exports","module","list-page/components/compare/javascript/compare-item-model"],function(t,e,i){var n=t("list-page/components/compare/javascript/compare-item-model"),r=Backbone.Collection.extend({model:n});i.exports=r}),define("dust-loader!list-page/components/compare/dust/compare-item",function(){return function(t){var e=function(t){function e(t,e){return t.w('<a class="compare-thumbnail" href="').f(e.get(["url"],!1),e,"h").w('" title="').f(e.get(["title"],!1),e,"h").w('">').x(e.get(["imgPath"],!1),e,{"else":i,block:n},{}).w('<div class="compare-title">').f(e.get(["title"],!1),e,"h").w('</div></a><button class="compare-remove ficon-size-mini ficon-cancel" aria-label="Remove from Compare" data-sku-id="').f(e.get(["skuId"],!1),e,"h").w('"></button>')}function i(t,e){return t.w('<img src="').f(e.getPath(!1,["metaLayer","env_img"]),e,"h").w('/list-page/images/missing-image-small-d994f44e79dc54bd92319ec79d360f34.png" alt="" class="img-responsive" />')}function n(t,e){return t.w('<img src="').f(e.getPath(!1,["metaLayer","env_pisces"]),e,"h").w("/image2/").f(e.get(["imgPath"],!1),e,"h").w(';canvasHeight=145;canvasWidth=222"alt="" title="').f(e.get(["title"],!1),e,"h").w('" class="img-responsive"/>')}return t.register("list-page/components/compare/dust/compare-item",e),e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,e}(t),i=function(i,n){if(!n)throw new Error("wrong number of args for render");return t.render(e,i,n)};return i.template=e,i}}),define("list-page/components/compare/javascript/compare-item-view",["require","exports","module","backbone","dust","sc-meta-layer/javascript/metaLayer","dust-loader!list-page/components/compare/dust/compare-item"],function(t,e,i){var n=t("backbone"),r=t("dust"),o=t("sc-meta-layer/javascript/metaLayer"),s=t("dust-loader!list-page/components/compare/dust/compare-item")(r),a=n.View.extend({template:s,tagName:"li",className:"compare-item",events:{"click .compare-remove":"_removeClick"},initialize:function(){this.listenTo(this.model,"destroy",this.remove)},render:function(){var t=this.model.toJSON();return t.metaLayer=o.getAll(),this.template(t,_.bind(function(t,e){this.$el.html(e)},this)),this},_removeClick:function(t){this.model.destroy()}});i.exports=a}),define("list-page/components/compare/javascript/compare-view",["require","exports","module","jquery","lodash","backbone","dust","eventmanager","sc-persistence-manager/javascript/persistence-manager","dust-loader!list-page/components/compare/dust/compare","dust-loader!list-page/components/compare/dust/compare-item-empty","list-page/components/compare/javascript/compare-item-collection","list-page/components/compare/javascript/compare-item-view"],function(t,e,i){var n=t("jquery"),r=t("lodash"),o=t("backbone"),s=t("dust"),a=t("eventmanager"),l=t("sc-persistence-manager/javascript/persistence-manager"),c=t("dust-loader!list-page/components/compare/dust/compare")(s),d=t("dust-loader!list-page/components/compare/dust/compare-item-empty")(s),u=t("list-page/components/compare/javascript/compare-item-collection"),h=t("list-page/components/compare/javascript/compare-item-view"),p="listPageCompare",f=o.View.extend({template:c,emptyItemTemplate:d,className:"compare-preview-container",events:{"click .compare-button":"_compare","click .compare-clear":"_clearSkusClick"},initialize:function(t){this.options=r.extend({maxItems:4},t),this.model=new o.Model,this.collection=new u,this.listenTo(a,"ComparePreview:AddItem",this._addSku),this.listenTo(a,"ComparePreview:RemoveItem",this._removeSku),this.listenTo(a,"ComparePreview:GenerateRoute",this._compare),this.listenTo(this.collection,"add",this._addItem),this.listenTo(this.collection,"remove",this._removeItem),this.listenTo(this.collection,"reset",this._resetItems),this.listenTo(this.collection,"add remove reset",this._collectionChanged)},render:function(){var t=this;return this.template(this.model.toJSON(),function(e,i){t.$el.html(i)}),this._loadData(function(){t._determineVisibility()}),this},_clearSkusClick:function(t){t.preventDefault(),this.collection.reset()},_addSku:function(t){this.collection.length<this.options.maxItems&&this.collection.add(t)},_removeSku:function(t){var e=this.collection.get(t.skuId);e.destroy()},_addItem:function(t){var e=this._createCompareItemView({model:t});this.$(".compare-items").append(e.render().el),this._resetEmptyItems(),a.trigger("ComparePreview:ItemAdded",t.toJSON()),this.collection.length==this.options.maxItems&&a.trigger("ComparePreview:Full",t.toJSON())},_removeItem:function(t){this._resetEmptyItems(),a.trigger("ComparePreview:ItemRemoved",t.toJSON()),this.collection.length===this.options.maxItems-1&&a.trigger("ComparePreview:NotFull")},_resetItems:function(){this.$(".compare-items").empty(),this._resetEmptyItems(),a.trigger("ComparePreview:Clear"),a.trigger("ComparePreview:NotFull")},_collectionChanged:function(){this._storeData(),this._determineVisibility()},_resetEmptyItems:function(){var t=this;this.$(".compare-items .compare-item.empty").remove(),r.times(this.options.maxItems-this.collection.length,function(){t.emptyItemTemplate({},function(e,i){t.$(".compare-items").append(i)})})},_compare:function(t){t&&t.preventDefault();var e=this.collection.pluck("skuId").join(","),i=this.collection.pluck("productId").join("*"),n=window.location.href.replace(/^.*\/\/[^\/]+/,"");n=n.replace(/[?&]selectedSkus=[^&]+/,"");var r="/site/compare?skus="+e+"&productString="+i+"&url="+encodeURIComponent(n),o={url:r,skus:this.collection.toJSON()};a.trigger("ComparePreview:RouteGenerated",o)},_loadData:function(t){var e=this;l.get(p,"{}").then(function(t){var i=JSON.parse(t);r.each(i.skus,function(t){e.collection.add(t)})}).then(t)},_storeData:function(){var t={skus:this.collection.toJSON()};l.set(p,JSON.stringify(t))},_createCompareItemView:function(t){var e=this.options.CompareItemView||h;return new e(t)},_determineVisibility:function(){var t=this.$(".compare-preview > button");this.collection.length>0?(n("body").addClass("compare-revealed"),t.removeAttr("aria-hidden"),t.removeAttr("tabindex")):(n("body").removeClass("compare-revealed"),t.attr({"aria-hidden":!0,tabindex:-1}))}});i.exports=f}),define("list-page/components/facets/javascript/category-facet-model",["require","exports","module","backbone"],function(t,e,i){var n=t("backbone"),r=n.Model.extend({});i.exports=r}),function(t,e){"function"==typeof define&&"object"==typeof define.amd&&define.amd?define("_vendors/typeahead/typeahead",["jquery"],function(t){return e(t)}):freeExports&&freeModule?moduleExports?(freeModule.exports=typeahead).typeahead=typeahead:freeExports.typeahead=typeahead:t.typeahead=typeahead}(this,function(t){var e=function(){"use strict";return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:t.isArray,isFunction:t.isFunction,isObject:t.isPlainObject,isUndefined:function(t){return"undefined"==typeof t},isElement:function(t){return!(!t||1!==t.nodeType)},isJQuery:function(e){return e instanceof t},toStr:function(t){return e.isUndefined(t)||null===t?"":t+""},bind:t.proxy,each:function(e,i){function n(t,e){return i(e,t)}t.each(e,n)},map:t.map,filter:t.grep,every:function(e,i){var n=!0;return e?(t.each(e,function(t,r){return(n=i.call(null,r,t,e))?void 0:!1}),!!n):n},some:function(e,i){var n=!1;return e?(t.each(e,function(t,r){return(n=i.call(null,r,t,e))?!1:void 0}),!!n):n},mixin:t.extend,identity:function(t){return t},clone:function(e){return t.extend(!0,{},e)},getIdGenerator:function(){var t=0;return function(){return t++}},templatify:function(e){function i(){return String(e)}return t.isFunction(e)?e:i},defer:function(t){setTimeout(t,0)},debounce:function(t,e,i){var n,r;return function(){var o,s,a=this,l=arguments;return o=function(){n=null,i||(r=t.apply(a,l))},s=i&&!n,clearTimeout(n),n=setTimeout(o,e),s&&(r=t.apply(a,l)),r}},throttle:function(t,e){var i,n,r,o,s,a;return s=0,a=function(){s=new Date,r=null,o=t.apply(i,n)},function(){var l=new Date,c=e-(l-s);return i=this,n=arguments,0>=c?(clearTimeout(r),r=null,s=l,o=t.apply(i,n)):r||(r=setTimeout(a,c)),o}},stringify:function(t){return e.isString(t)?t:JSON.stringify(t)},noop:function(){}}}(),i=function(){"use strict";function t(t){var s,a;return a=e.mixin({},o,t),s={css:r(),classes:a,html:i(a),selectors:n(a)},{css:s.css,html:s.html,classes:s.classes,selectors:s.selectors,mixin:function(t){e.mixin(t,s)}}}function i(t){return{wrapper:'<span class="'+t.wrapper+'"></span>',menu:'<div class="'+t.menu+'"></div>'}}function n(t){var i={};return e.each(t,function(t,e){i[e]="."+t}),i}function r(){var t={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},menu:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return e.isMsie()&&e.mixin(t.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),t}var o={wrapper:"twitter-typeahead",input:"tt-input",hint:"tt-hint",menu:"tt-menu",dataset:"tt-dataset",suggestion:"tt-suggestion",selectable:"tt-selectable",empty:"tt-empty",open:"tt-open",cursor:"tt-cursor",highlight:"tt-highlight"};return t}(),n=function(){"use strict";function i(e){e&&e.el||t.error("EventBus initialized without el"),this.$el=t(e.el)}var n,r;return n="typeahead:",r={render:"rendered",cursorchange:"cursorchanged",select:"selected",autocomplete:"autocompleted"},e.mixin(i.prototype,{_trigger:function(e,i){var r;return r=t.Event(n+e),(i=i||[]).unshift(r),this.$el.trigger.apply(this.$el,i),r},before:function(t){var e,i;return e=[].slice.call(arguments,1),i=this._trigger("before"+t,e),i.isDefaultPrevented()},trigger:function(t){var e;this._trigger(t,[].slice.call(arguments,1)),(e=r[t])&&this._trigger(e,[].slice.call(arguments,1))}}),i}(),r=function(){"use strict";function t(t,e,i,n){var r;if(!i)return this;for(e=e.split(l),i=n?a(i,n):i,this._callbacks=this._callbacks||{};r=e.shift();)this._callbacks[r]=this._callbacks[r]||{sync:[],async:[]},this._callbacks[r][t].push(i);return this}function e(e,i,n){return t.call(this,"async",e,i,n)}function i(e,i,n){return t.call(this,"sync",e,i,n)}function n(t){var e;if(!this._callbacks)return this;for(t=t.split(l);e=t.shift();)delete this._callbacks[e];return this}function r(t){var e,i,n,r,s;if(!this._callbacks)return this;for(t=t.split(l),n=[].slice.call(arguments,1);(e=t.shift())&&(i=this._callbacks[e]);)r=o(i.sync,this,[e].concat(n)),s=o(i.async,this,[e].concat(n)),r()&&c(s);return this}function o(t,e,i){function n(){for(var n,r=0,o=t.length;!n&&o>r;r+=1)n=t[r].apply(e,i)===!1;return!n}return n}function s(){var t;return t=window.setImmediate?function(t){setImmediate(function(){t()})}:function(t){setTimeout(function(){t()},0)}}function a(t,e){return t.bind?t.bind(e):function(){t.apply(e,[].slice.call(arguments,0))}}var l=/\s+/,c=s();return{onSync:i,onAsync:e,off:n,trigger:r}}(),o=function(t){"use strict";function i(t,i,n){for(var r,o=[],s=0,a=t.length;a>s;s++)o.push(e.escapeRegExChars(t[s]));return r=n?"\\b("+o.join("|")+")\\b":"("+o.join("|")+")",i?new RegExp(r):new RegExp(r,"i")}var n={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(r){function o(e){var i,n,o;return(i=a.exec(e.data))&&(o=t.createElement(r.tagName),r.className&&(o.className=r.className),n=e.splitText(i.index),n.splitText(i[0].length),o.appendChild(n.cloneNode(!0)),e.parentNode.replaceChild(o,n)),!!i}function s(t,e){for(var i,n=3,r=0;r<t.childNodes.length;r++)i=t.childNodes[r],i.nodeType===n?r+=e(i)?1:0:s(i,e)}var a;r=e.mixin({},n,r),r.node&&r.pattern&&(r.pattern=e.isArray(r.pattern)?r.pattern:[r.pattern],a=i(r.pattern,r.caseSensitive,r.wordsOnly),s(r.node,o))}}(window.document),s=function(){"use strict";function i(i,r){i=i||{},i.input||t.error("input is missing"),r.mixin(this),this.$hint=t(i.hint),this.$input=t(i.input),this.query=this.$input.val(),this.queryWhenFocused=this.hasFocus()?this.query:null,this.$overflowHelper=n(this.$input),this._checkLanguageDirection(),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=e.noop)}function n(e){return t('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:e.css("font-family"),fontSize:e.css("font-size"),fontStyle:e.css("font-style"),fontVariant:e.css("font-variant"),fontWeight:e.css("font-weight"),wordSpacing:e.css("word-spacing"),letterSpacing:e.css("letter-spacing"),textIndent:e.css("text-indent"),textRendering:e.css("text-rendering"),textTransform:e.css("text-transform")}).insertAfter(e)}function o(t,e){return i.normalizeQuery(t)===i.normalizeQuery(e)}function s(t){return t.altKey||t.ctrlKey||t.metaKey||t.shiftKey}var a;return a={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},i.normalizeQuery=function(t){return e.toStr(t).replace(/^\s*/g,"").replace(/\s{2,}/g," ")},e.mixin(i.prototype,r,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.queryWhenFocused=this.query,this.trigger("focused")},_onKeydown:function(t){var e=a[t.which||t.keyCode];this._managePreventDefault(e,t),e&&this._shouldTrigger(e,t)&&this.trigger(e+"Keyed",t)},_onInput:function(){this._setQuery(this.getInputValue()),this.clearHintIfInvalid(),this._checkLanguageDirection()},_managePreventDefault:function(t,e){var i;switch(t){case"up":case"down":i=!s(e);break;default:i=!1}i&&e.preventDefault()},_shouldTrigger:function(t,e){var i;switch(t){case"tab":i=!s(e);break;default:i=!0}return i},_checkLanguageDirection:function(){var t=(this.$input.css("direction")||"ltr").toLowerCase();this.dir!==t&&(this.dir=t,this.$hint.attr("dir",t),this.trigger("langDirChanged",t))},_setQuery:function(t,e){var i,n;i=o(t,this.query),n=i?this.query.length!==t.length:!1,this.query=t,e||i?!e&&n&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},bind:function(){var t,i,n,r,o=this;return t=e.bind(this._onBlur,this),i=e.bind(this._onFocus,this),n=e.bind(this._onKeydown,this),r=e.bind(this._onInput,this),this.$input.on("blur.tt",t).on("focus.tt",i).on("keydown.tt",n),!e.isMsie()||e.isMsie()>9?this.$input.on("input.tt",r):this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(t){a[t.which||t.keyCode]||e.defer(e.bind(o._onInput,o,t))}),this},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getLangDir:function(){return this.dir},getQuery:function(){return this.query||""},setQuery:function(t,e){this.setInputValue(t),this._setQuery(t,e)},hasQueryChangedSinceLastFocus:function(){return this.query!==this.queryWhenFocused},getInputValue:function(){return this.$input.val()},setInputValue:function(t){this.$input.val(t),this.clearHintIfInvalid(),this._checkLanguageDirection()},resetInputValue:function(){this.setInputValue(this.query)},getHint:function(){return this.$hint.val()},setHint:function(t){this.$hint.val(t)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var t,e,i,n;t=this.getInputValue(),e=this.getHint(),i=t!==e&&0===e.indexOf(t),n=""!==t&&i&&!this.hasOverflow(),!n&&this.clearHint()},hasFocus:function(){return this.$input.is(":focus")},hasOverflow:function(){var t=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=t},isCursorAtEnd:function(){var t,i,n;return t=this.$input.val().length,i=this.$input[0].selectionStart,e.isNumber(i)?i===t:document.selection?(n=document.selection.createRange(),n.moveStart("character",-t),t===n.text.length):!0},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$overflowHelper.remove(),this.$hint=this.$input=this.$overflowHelper=t("<div>")}}),i}(),a=function(){"use strict";function i(i,r){i=i||{},i.templates=i.templates||{},i.templates.notFound=i.templates.notFound||i.templates.empty,i.source||t.error("missing source"),i.node||t.error("missing node"),i.name&&!a(i.name)&&t.error("invalid dataset name: "+i.name),r.mixin(this),this.highlight=!!i.highlight,this.name=i.name||c(),this.limit=i.limit||5,this.displayFn=n(i.display||i.displayKey),this.templates=s(i.templates,this.displayFn),this.source=i.source.__ttAdapter?i.source.__ttAdapter():i.source,this.async=e.isUndefined(i.async)?this.source.length>2:!!i.async,this._resetLastSuggestion(),this.$el=t(i.node).addClass(this.classes.dataset).addClass(this.classes.dataset+"-"+this.name)}function n(t){function i(e){return e[t]}return t=t||e.stringify,e.isFunction(t)?t:i}function s(i,n){function r(e){return t("<div>").text(n(e))}return{notFound:i.notFound&&e.templatify(i.notFound),pending:i.pending&&e.templatify(i.pending),header:i.header&&e.templatify(i.header),footer:i.footer&&e.templatify(i.footer),suggestion:i.suggestion||r}}function a(t){return/^[_a-zA-Z0-9-]+$/.test(t)}var l,c;return l={val:"tt-selectable-display",obj:"tt-selectable-object"},c=e.getIdGenerator(),i.extractData=function(e){var i=t(e);return i.data(l.obj)?{val:i.data(l.val)||"",obj:i.data(l.obj)||null}:null},e.mixin(i.prototype,r,{_overwrite:function(t,e){e=e||[],e.length?this._renderSuggestions(t,e):this.async&&this.templates.pending?this._renderPending(t):!this.async&&this.templates.notFound?this._renderNotFound(t):this._empty(),this.trigger("rendered",this.name,e,!1)},_append:function(t,e){e=e||[],e.length&&this.$lastSuggestion.length?this._appendSuggestions(t,e):e.length?this._renderSuggestions(t,e):!this.$lastSuggestion.length&&this.templates.notFound&&this._renderNotFound(t),this.trigger("rendered",this.name,e,!0)},_renderSuggestions:function(t,e){var i;i=this._getSuggestionsFragment(t,e),this.$lastSuggestion=i.children().last(),this.$el.html(i).prepend(this._getHeader(t,e)).append(this._getFooter(t,e))},_appendSuggestions:function(t,e){var i,n;i=this._getSuggestionsFragment(t,e),n=i.children().last(),this.$lastSuggestion.after(i),this.$lastSuggestion=n},_renderPending:function(t){var e=this.templates.pending;this._resetLastSuggestion(),e&&this.$el.html(e({query:t,dataset:this.name}))},_renderNotFound:function(t){var e=this.templates.notFound;this._resetLastSuggestion(),e&&this.$el.html(e({query:t,dataset:this.name}))},_empty:function(){this.$el.empty(),this._resetLastSuggestion()},_getSuggestionsFragment:function(i,n){var r,s=this;return r=document.createDocumentFragment(),e.each(n,function(e){var n,o;o=s._injectQuery(i,e),n=t(s.templates.suggestion(o)).data(l.obj,e).data(l.val,s.displayFn(e)).addClass(s.classes.suggestion+" "+s.classes.selectable),r.appendChild(n[0])}),this.highlight&&o({className:this.classes.highlight,node:r,pattern:i}),t(r)},_getFooter:function(t,e){return this.templates.footer?this.templates.footer({query:t,suggestions:e,dataset:this.name}):null},_getHeader:function(t,e){return this.templates.header?this.templates.header({query:t,suggestions:e,dataset:this.name}):null},_resetLastSuggestion:function(){this.$lastSuggestion=t()},_injectQuery:function(t,i){return e.isObject(i)?e.mixin({_query:t},i):i},update:function(e){function i(t){s||(s=!0,t=(t||[]).slice(0,r.limit),a=t.length,r._overwrite(e,t),a<r.limit&&r.async&&r.trigger("asyncRequested",e))}function n(i){i=i||[],!o&&a<r.limit&&(r.cancel=t.noop,a+=i.length,r._append(e,i.slice(0,r.limit-a)),r.async&&r.trigger("asyncReceived",e))}var r=this,o=!1,s=!1,a=0;this.cancel(),this.cancel=function(){o=!0,r.cancel=t.noop,r.async&&r.trigger("asyncCanceled",e)},this.source(e,i,n),!s&&i([])},cancel:t.noop,clear:function(){this._empty(),this.cancel(),this.trigger("cleared")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=t("<div>")}}),i}(),l=function(){"use strict";function i(i,n){function r(e){var i=o.$node.find(e.node).first();return e.node=i.length?i:t("<div>").appendTo(o.$node),new a(e,n)}var o=this;i=i||{},i.node||t.error("node is required"),n.mixin(this),this.$node=t(i.node),this.query=null,this.datasets=e.map(i.datasets,r)}return e.mixin(i.prototype,r,{_onSelectableClick:function(e){this.trigger("selectableClicked",t(e.currentTarget))},_onRendered:function(t,e,i,n){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetRendered",e,i,n)},_onCleared:function(){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetCleared")},_propagate:function(){this.trigger.apply(this,arguments)},_allDatasetsEmpty:function(){function t(t){return t.isEmpty()}return e.every(this.datasets,t)},_getSelectables:function(){return this.$node.find(this.selectors.selectable)},_removeCursor:function(){var t=this.getActiveSelectable();t&&t.removeClass(this.classes.cursor)},_ensureVisible:function(t){var e,i,n,r;e=t.position().top,i=e+t.outerHeight(!0),n=this.$node.scrollTop(),r=this.$node.height()+parseInt(this.$node.css("paddingTop"),10)+parseInt(this.$node.css("paddingBottom"),10),0>e?this.$node.scrollTop(n+e):i>r&&this.$node.scrollTop(n+(i-r))},bind:function(){var t,i=this;return t=e.bind(this._onSelectableClick,this),this.$node.on("click.tt",this.selectors.selectable,t),e.each(this.datasets,function(t){t.onSync("asyncRequested",i._propagate,i).onSync("asyncCanceled",i._propagate,i).onSync("asyncReceived",i._propagate,i).onSync("rendered",i._onRendered,i).onSync("cleared",i._onCleared,i)}),this},isOpen:function(){return this.$node.hasClass(this.classes.open)},open:function(){this.$node.addClass(this.classes.open)},close:function(){this.$node.removeClass(this.classes.open),this._removeCursor()},setLanguageDirection:function(t){this.$node.attr("dir",t)},selectableRelativeToCursor:function(t){var e,i,n,r;return i=this.getActiveSelectable(),e=this._getSelectables(),n=i?e.index(i):-1,r=n+t,r=(r+1)%(e.length+1)-1,r=-1>r?e.length-1:r,-1===r?null:e.eq(r)},setCursor:function(t){this._removeCursor(),(t=t&&t.first())&&(t.addClass(this.classes.cursor),
this._ensureVisible(t))},getSelectableData:function(t){return t&&t.length?a.extractData(t):null},getActiveSelectable:function(){var t=this._getSelectables().filter(this.selectors.cursor).first();return t.length?t:null},getTopSelectable:function(){var t=this._getSelectables().first();return t.length?t:null},update:function(t){function i(e){e.update(t)}var n=t!==this.query;return n&&(this.query=t,e.each(this.datasets,i)),n},empty:function(){function t(t){t.clear()}e.each(this.datasets,t),this.query=null,this.$node.addClass(this.classes.empty)},destroy:function(){function i(t){t.destroy()}this.$node.off(".tt"),this.$node=t("<div>"),e.each(this.datasets,i)}}),i}(),c=function(){"use strict";function t(){l.apply(this,[].slice.call(arguments,0))}var i=l.prototype;return e.mixin(t.prototype,l.prototype,{open:function(){return!this._allDatasetsEmpty()&&this._show(),i.open.apply(this,[].slice.call(arguments,0))},close:function(){return this._hide(),i.close.apply(this,[].slice.call(arguments,0))},_onRendered:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),i._onRendered.apply(this,[].slice.call(arguments,0))},_onCleared:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),i._onCleared.apply(this,[].slice.call(arguments,0))},setLanguageDirection:function(t){return this.$node.css("ltr"===t?this.css.ltr:this.css.rtl),i.setLanguageDirection.apply(this,[].slice.call(arguments,0))},_hide:function(){this.$node.hide()},_show:function(){this.$node.css("display","block")}}),t}(),d=function(){"use strict";function i(i,r){var o,s,a,l,c,d,u,h,p,f,g;i=i||{},i.input||t.error("missing input"),i.menu||t.error("missing menu"),i.eventBus||t.error("missing event bus"),r.mixin(this),this.eventBus=i.eventBus,this.minLength=e.isNumber(i.minLength)?i.minLength:1,this.input=i.input,this.menu=i.menu,this.enabled=!0,this.active=!1,this.input.hasFocus()&&this.activate(),this.dir=this.input.getLangDir(),this._hacks(),this.menu.bind().onSync("selectableClicked",this._onSelectableClicked,this).onSync("asyncRequested",this._onAsyncRequested,this).onSync("asyncCanceled",this._onAsyncCanceled,this).onSync("asyncReceived",this._onAsyncReceived,this).onSync("datasetRendered",this._onDatasetRendered,this).onSync("datasetCleared",this._onDatasetCleared,this),o=n(this,"activate","open","_onFocused"),s=n(this,"deactivate","_onBlurred"),a=n(this,"isActive","isOpen","_onEnterKeyed"),l=n(this,"isActive","isOpen","_onTabKeyed"),c=n(this,"isActive","_onEscKeyed"),d=n(this,"isActive","open","_onUpKeyed"),u=n(this,"isActive","open","_onDownKeyed"),h=n(this,"isActive","isOpen","_onLeftKeyed"),p=n(this,"isActive","isOpen","_onRightKeyed"),f=n(this,"_openIfActive","_onQueryChanged"),g=n(this,"_openIfActive","_onWhitespaceChanged"),this.input.bind().onSync("focused",o,this).onSync("blurred",s,this).onSync("enterKeyed",a,this).onSync("tabKeyed",l,this).onSync("escKeyed",c,this).onSync("upKeyed",d,this).onSync("downKeyed",u,this).onSync("leftKeyed",h,this).onSync("rightKeyed",p,this).onSync("queryChanged",f,this).onSync("whitespaceChanged",g,this).onSync("langDirChanged",this._onLangDirChanged,this)}function n(t){var i=[].slice.call(arguments,1);return function(){var n=[].slice.call(arguments);e.each(i,function(e){return t[e].apply(t,n)})}}return e.mixin(i.prototype,{_hacks:function(){var i,n;i=this.input.$input||t("<div>"),n=this.menu.$node||t("<div>"),i.on("blur.tt",function(t){var r,o,s;r=document.activeElement,o=n.is(r),s=n.has(r).length>0,e.isMsie()&&(o||s)&&(t.preventDefault(),t.stopImmediatePropagation(),e.defer(function(){i.focus()}))}),n.on("mousedown.tt",function(t){t.preventDefault()})},_onSelectableClicked:function(t,e){this.select(e)},_onDatasetCleared:function(){this._updateHint()},_onDatasetRendered:function(t,e,i,n){this._updateHint(),this.eventBus.trigger("render",i,n,e)},_onAsyncRequested:function(t,e,i){this.eventBus.trigger("asyncrequest",i,e)},_onAsyncCanceled:function(t,e,i){this.eventBus.trigger("asynccancel",i,e)},_onAsyncReceived:function(t,e,i){this.eventBus.trigger("asyncreceive",i,e)},_onFocused:function(){this._minLengthMet()&&this.menu.update(this.input.getQuery())},_onBlurred:function(){this.input.hasQueryChangedSinceLastFocus()&&this.eventBus.trigger("change",this.input.getQuery())},_onEnterKeyed:function(t,e){var i;(i=this.menu.getActiveSelectable())&&this.select(i)&&e.preventDefault()},_onTabKeyed:function(t,e){var i;(i=this.menu.getActiveSelectable())?this.select(i)&&e.preventDefault():(i=this.menu.getTopSelectable())&&this.autocomplete(i)&&e.preventDefault()},_onEscKeyed:function(){this.close()},_onUpKeyed:function(){this.moveCursor(-1)},_onDownKeyed:function(){this.moveCursor(1)},_onLeftKeyed:function(){"rtl"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onRightKeyed:function(){"ltr"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onQueryChanged:function(t,e){this._minLengthMet(e)?this.menu.update(e):this.menu.empty()},_onWhitespaceChanged:function(){this._updateHint()},_onLangDirChanged:function(t,e){this.dir!==e&&(this.dir=e,this.menu.setLanguageDirection(e))},_openIfActive:function(){this.isActive()&&this.open()},_minLengthMet:function(t){return t=e.isString(t)?t:this.input.getQuery()||"",t.length>=this.minLength},_updateHint:function(){var t,i,n,r,o,a,l;t=this.menu.getTopSelectable(),i=this.menu.getSelectableData(t),n=this.input.getInputValue(),!i||e.isBlankString(n)||this.input.hasOverflow()?this.input.clearHint():(r=s.normalizeQuery(n),o=e.escapeRegExChars(r),a=new RegExp("^(?:"+o+")(.+$)","i"),l=a.exec(i.val),l&&this.input.setHint(n+l[1]))},isEnabled:function(){return this.enabled},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},isActive:function(){return this.active},activate:function(){return this.isActive()?!0:!this.isEnabled()||this.eventBus.before("active")?!1:(this.active=!0,this.eventBus.trigger("active"),!0)},deactivate:function(){return this.isActive()?this.eventBus.before("idle")?!1:(this.active=!1,this.close(),this.eventBus.trigger("idle"),!0):!0},isOpen:function(){return this.menu.isOpen()},open:function(){return this.isOpen()||this.eventBus.before("open")||(this.menu.open(),this._updateHint(),this.eventBus.trigger("open")),this.isOpen()},close:function(){return this.isOpen()&&!this.eventBus.before("close")&&(this.menu.close(),this.input.clearHint(),this.input.resetInputValue(),this.eventBus.trigger("close")),!this.isOpen()},setVal:function(t){this.input.setQuery(e.toStr(t))},getVal:function(){return this.input.getQuery()},select:function(t){var e=this.menu.getSelectableData(t);return e&&!this.eventBus.before("select",e.obj)?(this.input.setQuery(e.val,!0),this.eventBus.trigger("select",e.obj),this.close(),!0):!1},autocomplete:function(t){var e,i,n;return e=this.input.getQuery(),i=this.menu.getSelectableData(t),n=i&&e!==i.val,n&&!this.eventBus.before("autocomplete",i.obj)?(this.input.setQuery(i.val),this.eventBus.trigger("autocomplete",i.obj),!0):!1},moveCursor:function(t){var e,i,n,r,o;return e=this.input.getQuery(),i=this.menu.selectableRelativeToCursor(t),n=this.menu.getSelectableData(i),r=n?n.obj:null,o=this._minLengthMet()&&this.menu.update(e),o||this.eventBus.before("cursorchange",r)?!1:(this.menu.setCursor(i),n?this.input.setInputValue(n.val):(this.input.resetInputValue(),this._updateHint()),this.eventBus.trigger("cursorchange",r),!0)},destroy:function(){this.input.destroy(),this.menu.destroy()}}),i}();!function(){"use strict";function r(e,i){e.each(function(){var e,n=t(this);(e=n.data(g.typeahead))&&i(e,n)})}function o(t,e){return t.clone().addClass(e.classes.hint).removeData().css(e.css.hint).css(u(t)).prop("readonly",!0).removeAttr("id name placeholder required").attr({autocomplete:"off",spellcheck:"false",tabindex:-1})}function a(t,e){t.data(g.attrs,{dir:t.attr("dir"),autocomplete:t.attr("autocomplete"),spellcheck:t.attr("spellcheck"),style:t.attr("style")}),t.addClass(e.classes.input).attr({autocomplete:"off",spellcheck:!1});try{!t.attr("dir")&&t.attr("dir","auto")}catch(i){}return t}function u(t){return{backgroundAttachment:t.css("background-attachment"),backgroundClip:t.css("background-clip"),backgroundColor:t.css("background-color"),backgroundImage:t.css("background-image"),backgroundOrigin:t.css("background-origin"),backgroundPosition:t.css("background-position"),backgroundRepeat:t.css("background-repeat"),backgroundSize:t.css("background-size")}}function h(t){var i,n;i=t.data(g.www),n=t.parent().filter(i.selectors.wrapper),e.each(t.data(g.attrs),function(i,n){e.isUndefined(i)?t.removeAttr(n):t.attr(n,i)}),t.removeData(g.typeahead).removeData(g.www).removeData(g.attr).removeClass(i.classes.input),n.length&&(t.detach().insertAfter(n),n.remove())}function p(i){var n,r;return n=e.isJQuery(i)||e.isElement(i),r=n?t(i).first():[],r.length?r:null}var f,g,m;f=t.fn.typeahead,g={www:"tt-www",attrs:"tt-attrs",typeahead:"tt-typeahead"},m={initialize:function(r,u){function h(){var i,h,m,v,y,b,w,_,k,C,x;e.each(u,function(t){t.highlight=!!r.highlight}),i=t(this),h=t(f.html.wrapper),m=p(r.hint),v=p(r.menu),y=r.hint!==!1&&!m,b=r.menu!==!1&&!v,y&&(m=o(i,f)),b&&(v=t(f.html.menu).css(f.css.menu)),m&&m.val(""),i=a(i,f),(y||b)&&(h.css(f.css.wrapper),i.css(y?f.css.input:f.css.inputWithNoHint),i.wrap(h).parent().prepend(y?m:null).append(b?v:null)),x=b?c:l,w=new n({el:i}),_=new s({hint:m,input:i},f),k=new x({node:v,datasets:u},f),C=new d({input:_,menu:k,eventBus:w,minLength:r.minLength},f),i.data(g.www,f),i.data(g.typeahead,C)}var f;return u=e.isArray(u)?u:[].slice.call(arguments,1),r=r||{},f=i(r.classNames),this.each(h)},isEnabled:function(){var t;return r(this.first(),function(e){t=e.isEnabled()}),t},enable:function(){return r(this,function(t){t.enable()}),this},disable:function(){return r(this,function(t){t.disable()}),this},isActive:function(){var t;return r(this.first(),function(e){t=e.isActive()}),t},activate:function(){return r(this,function(t){t.activate()}),this},deactivate:function(){return r(this,function(t){t.deactivate()}),this},isOpen:function(){var t;return r(this.first(),function(e){t=e.isOpen()}),t},open:function(){return r(this,function(t){t.open()}),this},close:function(){return r(this,function(t){t.close()}),this},select:function(e){var i=!1,n=t(e);return r(this.first(),function(t){i=t.select(n)}),i},autocomplete:function(e){var i=!1,n=t(e);return r(this.first(),function(t){i=t.autocomplete(n)}),i},moveCursor:function(t){var e=!1;return r(this.first(),function(i){e=i.moveCursor(t)}),e},val:function(t){var e;return arguments.length?(r(this,function(e){e.setVal(t)}),this):(r(this.first(),function(t){e=t.getVal()}),e)},destroy:function(){return r(this,function(t,e){h(e),t.destroy()}),this}},t.fn.typeahead=function(t){return m[t]?m[t].apply(this,[].slice.call(arguments,1)):m.initialize.apply(this,arguments)},t.fn.typeahead.noConflict=function(){return t.fn.typeahead=f,this}}()}),function(t,e){"function"==typeof define&&"object"==typeof define.amd&&define.amd?(t.Bloodhound=e(jQuery),define("_vendors/typeahead/bloodhound",["jquery"],function(t){return e(t)})):freeExports&&freeModule?moduleExports?(freeModule.exports=Bloodhound).Bloodhound=Bloodhound:freeExports.Bloodhound=Bloodhound:t.Bloodhound=Bloodhound}(this,function(t){var e=function(){"use strict";return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:t.isArray,isFunction:t.isFunction,isObject:t.isPlainObject,isUndefined:function(t){return"undefined"==typeof t},isElement:function(t){return!(!t||1!==t.nodeType)},isJQuery:function(e){return e instanceof t},toStr:function(t){return e.isUndefined(t)||null===t?"":t+""},bind:t.proxy,each:function(e,i){function n(t,e){return i(e,t)}t.each(e,n)},map:t.map,filter:t.grep,every:function(e,i){var n=!0;return e?(t.each(e,function(t,r){return(n=i.call(null,r,t,e))?void 0:!1}),!!n):n},some:function(e,i){var n=!1;return e?(t.each(e,function(t,r){return(n=i.call(null,r,t,e))?!1:void 0}),!!n):n},mixin:t.extend,identity:function(t){return t},clone:function(e){return t.extend(!0,{},e)},getIdGenerator:function(){var t=0;return function(){return t++}},templatify:function(e){function i(){return String(e)}return t.isFunction(e)?e:i},defer:function(t){setTimeout(t,0)},debounce:function(t,e,i){var n,r;return function(){var o,s,a=this,l=arguments;return o=function(){n=null,i||(r=t.apply(a,l))},s=i&&!n,clearTimeout(n),n=setTimeout(o,e),s&&(r=t.apply(a,l)),r}},throttle:function(t,e){var i,n,r,o,s,a;return s=0,a=function(){s=new Date,r=null,o=t.apply(i,n)},function(){var l=new Date,c=e-(l-s);return i=this,n=arguments,0>=c?(clearTimeout(r),r=null,s=l,o=t.apply(i,n)):r||(r=setTimeout(a,c)),o}},stringify:function(t){return e.isString(t)?t:JSON.stringify(t)},noop:function(){}}}(),i="0.11.1",n=function(){"use strict";function t(t){return t=e.toStr(t),t?t.split(/\s+/):[]}function i(t){return t=e.toStr(t),t?t.split(/\W+/):[]}function n(t){return function(i){return i=e.isArray(i)?i:[].slice.call(arguments,0),function(n){var r=[];return e.each(i,function(i){r=r.concat(t(e.toStr(n[i])))}),r}}}return{nonword:i,whitespace:t,obj:{nonword:n(i),whitespace:n(t)}}}(),r=function(){"use strict";function i(i){this.maxSize=e.isNumber(i)?i:100,this.reset(),this.maxSize<=0&&(this.set=this.get=t.noop)}function n(){this.head=this.tail=null}function r(t,e){this.key=t,this.val=e,this.prev=this.next=null}return e.mixin(i.prototype,{set:function(t,e){var i,n=this.list.tail;this.size>=this.maxSize&&(this.list.remove(n),delete this.hash[n.key],this.size--),(i=this.hash[t])?(i.val=e,this.list.moveToFront(i)):(i=new r(t,e),this.list.add(i),this.hash[t]=i,this.size++)},get:function(t){var e=this.hash[t];return e?(this.list.moveToFront(e),e.val):void 0},reset:function(){this.size=0,this.hash={},this.list=new n}}),e.mixin(n.prototype,{add:function(t){this.head&&(t.next=this.head,this.head.prev=t),this.head=t,this.tail=this.tail||t},remove:function(t){t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev},moveToFront:function(t){this.remove(t),this.add(t)}}),i}(),o=function(){"use strict";function i(t,i){this.prefix=["__",t,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+e.escapeRegExChars(this.prefix)),this.ls=i||a,!this.ls&&this._noop()}function n(){return(new Date).getTime()}function r(t){return JSON.stringify(e.isUndefined(t)?null:t)}function o(e){return t.parseJSON(e)}function s(t){var e,i,n=[],r=a.length;for(e=0;r>e;e++)(i=a.key(e)).match(t)&&n.push(i.replace(t,""));return n}var a;try{a=window.localStorage,a.setItem("~~~","!"),a.removeItem("~~~")}catch(l){a=null}return e.mixin(i.prototype,{_prefix:function(t){return this.prefix+t},_ttlKey:function(t){return this._prefix(t)+this.ttlKey},_noop:function(){this.get=this.set=this.remove=this.clear=this.isExpired=e.noop},_safeSet:function(t,e){try{this.ls.setItem(t,e)}catch(i){"QuotaExceededError"===i.name&&(this.clear(),this._noop())}},get:function(t){return this.isExpired(t)&&this.remove(t),o(this.ls.getItem(this._prefix(t)))},set:function(t,i,o){return e.isNumber(o)?this._safeSet(this._ttlKey(t),r(n()+o)):this.ls.removeItem(this._ttlKey(t)),this._safeSet(this._prefix(t),r(i))},remove:function(t){return this.ls.removeItem(this._ttlKey(t)),this.ls.removeItem(this._prefix(t)),this},clear:function(){var t,e=s(this.keyMatcher);for(t=e.length;t--;)this.remove(e[t]);return this},isExpired:function(t){var i=o(this.ls.getItem(this._ttlKey(t)));return e.isNumber(i)&&n()>i?!0:!1}}),i}(),s=function(){"use strict";function i(t){t=t||{},this.cancelled=!1,this.lastReq=null,this._send=t.transport,this._get=t.limiter?t.limiter(this._get):this._get,this._cache=t.cache===!1?new r(0):a}var n=0,o={},s=6,a=new r(10);return i.setMaxPendingRequests=function(t){s=t},i.resetCache=function(){a.reset()},e.mixin(i.prototype,{_fingerprint:function(e){return e=e||{},e.url+e.type+t.param(e.data||{})},_get:function(t,e){function i(t){e(null,t),d._cache.set(l,t)}function r(){e(!0)}function a(){n--,delete o[l],d.onDeckRequestArgs&&(d._get.apply(d,d.onDeckRequestArgs),d.onDeckRequestArgs=null)}var l,c,d=this;l=this._fingerprint(t),this.cancelled||l!==this.lastReq||((c=o[l])?c.done(i).fail(r):s>n?(n++,o[l]=this._send(t).done(i).fail(r).always(a)):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(i,n){var r,o;n=n||t.noop,i=e.isString(i)?{url:i}:i||{},o=this._fingerprint(i),this.cancelled=!1,this.lastReq=o,(r=this._cache.get(o))?n(null,r):this._get(i,n)},cancel:function(){this.cancelled=!0}}),i}(),a=window.SearchIndex=function(){"use strict";function i(i){i=i||{},i.datumTokenizer&&i.queryTokenizer||t.error("datumTokenizer and queryTokenizer are both required"),this.identify=i.identify||e.stringify,this.datumTokenizer=i.datumTokenizer,this.queryTokenizer=i.queryTokenizer,this.reset()}function n(t){return t=e.filter(t,function(t){return!!t}),t=e.map(t,function(t){return t.toLowerCase()})}function r(){var t={};return t[l]=[],t[a]={},t}function o(t){for(var e={},i=[],n=0,r=t.length;r>n;n++)e[t[n]]||(e[t[n]]=!0,i.push(t[n]));return i}function s(t,e){var i=0,n=0,r=[];t=t.sort(),e=e.sort();for(var o=t.length,s=e.length;o>i&&s>n;)t[i]<e[n]?i++:t[i]>e[n]?n++:(r.push(t[i]),i++,n++);return r}var a="c",l="i";return e.mixin(i.prototype,{bootstrap:function(t){this.datums=t.datums,this.trie=t.trie},add:function(t){var i=this;t=e.isArray(t)?t:[t],e.each(t,function(t){var o,s;i.datums[o=i.identify(t)]=t,s=n(i.datumTokenizer(t)),e.each(s,function(t){var e,n,s;for(e=i.trie,n=t.split("");s=n.shift();)e=e[a][s]||(e[a][s]=r()),e[l].push(o)})})},get:function(t){var i=this;return e.map(t,function(t){return i.datums[t]})},search:function(t){var i,r,c=this;return i=n(this.queryTokenizer(t)),e.each(i,function(t){var e,i,n,o;if(r&&0===r.length)return!1;for(e=c.trie,i=t.split("");e&&(n=i.shift());)e=e[a][n];return e&&0===i.length?(o=e[l].slice(0),void(r=r?s(r,o):o)):(r=[],!1)}),r?e.map(o(r),function(t){return c.datums[t]}):[]},all:function(){var t=[];for(var e in this.datums)t.push(this.datums[e]);return t},reset:function(){this.datums={},this.trie=r()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),i}(),l=function(){"use strict";function t(t){this.url=t.url,this.ttl=t.ttl,this.cache=t.cache,this.prepare=t.prepare,this.transform=t.transform,this.transport=t.transport,this.thumbprint=t.thumbprint,this.storage=new o(t.cacheKey)}var i;return i={data:"data",protocol:"protocol",thumbprint:"thumbprint"},e.mixin(t.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},store:function(t){this.cache&&(this.storage.set(i.data,t,this.ttl),this.storage.set(i.protocol,location.protocol,this.ttl),this.storage.set(i.thumbprint,this.thumbprint,this.ttl))},fromCache:function(){var t,e={};return this.cache?(e.data=this.storage.get(i.data),e.protocol=this.storage.get(i.protocol),e.thumbprint=this.storage.get(i.thumbprint),t=e.thumbprint!==this.thumbprint||e.protocol!==location.protocol,e.data&&!t?e.data:null):null},fromNetwork:function(t){function e(){t(!0)}function i(e){t(null,r.transform(e))}var n,r=this;t&&(n=this.prepare(this._settings()),this.transport(n).fail(e).done(i))},clear:function(){return this.storage.clear(),this}}),t}(),c=function(){"use strict";function t(t){this.url=t.url,this.prepare=t.prepare,this.transform=t.transform,this.transport=new s({cache:t.cache,limiter:t.limiter,transport:t.transport})}return e.mixin(t.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},get:function(t,e){function i(t,i){e(t?[]:r.transform(i))}var n,r=this;if(e)return t=t||"",n=this.prepare(t,this._settings()),this.transport.get(n,i)},cancelLastRequest:function(){this.transport.cancel()}}),t}(),d=function(){"use strict";function n(n){var r;return n?(r={url:null,ttl:864e5,cache:!0,cacheKey:null,thumbprint:"",prepare:e.identity,transform:e.identity,transport:null},n=e.isString(n)?{url:n}:n,n=e.mixin(r,n),!n.url&&t.error("prefetch requires url to be set"),n.transform=n.filter||n.transform,n.cacheKey=n.cacheKey||n.url,n.thumbprint=i+n.thumbprint,n.transport=n.transport?a(n.transport):t.ajax,n):null}function r(i){var n;if(i)return n={url:null,cache:!0,prepare:null,replace:null,wildcard:null,limiter:null,rateLimitBy:"debounce",rateLimitWait:300,transform:e.identity,transport:null},i=e.isString(i)?{url:i}:i,i=e.mixin(n,i),!i.url&&t.error("remote requires url to be set"),i.transform=i.filter||i.transform,i.prepare=o(i),i.limiter=s(i),i.transport=i.transport?a(i.transport):t.ajax,delete i.replace,delete i.wildcard,delete i.rateLimitBy,delete i.rateLimitWait,i}function o(t){function e(t,e){return e.url=o(e.url,t),e}function i(t,e){return e.url=e.url.replace(s,encodeURIComponent(t)),e}function n(t,e){return e}var r,o,s;return r=t.prepare,o=t.replace,s=t.wildcard,r?r:r=o?e:t.wildcard?i:n}function s(t){function i(t){return function(i){return e.debounce(i,t)}}function n(t){return function(i){return e.throttle(i,t)}}var r,o,s;return r=t.limiter,o=t.rateLimitBy,s=t.rateLimitWait,r||(r=/^throttle$/i.test(o)?n(s):i(s)),r}function a(i){return function(n){function r(t){e.defer(function(){s.resolve(t)})}function o(t){e.defer(function(){s.reject(t)})}var s=t.Deferred();return i(n,r,o),s}}return function(i){var o,s;return o={initialize:!0,identify:e.stringify,datumTokenizer:null,queryTokenizer:null,sufficient:5,sorter:null,local:[],prefetch:null,remote:null},i=e.mixin(o,i||{}),!i.datumTokenizer&&t.error("datumTokenizer is required"),!i.queryTokenizer&&t.error("queryTokenizer is required"),s=i.sorter,i.sorter=s?function(t){return t.sort(s)}:e.identity,i.local=e.isFunction(i.local)?i.local():i.local,i.prefetch=n(i.prefetch),i.remote=r(i.remote),i}}(),u=function(){"use strict";function i(t){t=d(t),this.sorter=t.sorter,this.identify=t.identify,this.sufficient=t.sufficient,this.local=t.local,this.remote=t.remote?new c(t.remote):null,this.prefetch=t.prefetch?new l(t.prefetch):null,this.index=new a({identify:this.identify,datumTokenizer:t.datumTokenizer,queryTokenizer:t.queryTokenizer}),t.initialize!==!1&&this.initialize()}var r;return r=window&&window.Bloodhound,i.noConflict=function(){return window&&(window.Bloodhound=r),i},i.tokenizers=n,e.mixin(i.prototype,{__ttAdapter:function(){function t(t,e,n){return i.search(t,e,n)}function e(t,e){return i.search(t,e)}var i=this;return this.remote?t:e},_loadPrefetch:function(){function e(t,e){return t?i.reject():(r.add(e),r.prefetch.store(r.index.serialize()),void i.resolve())}var i,n,r=this;return i=t.Deferred(),this.prefetch?(n=this.prefetch.fromCache())?(this.index.bootstrap(n),i.resolve()):this.prefetch.fromNetwork(e):i.resolve(),i.promise()},_initialize:function(){function t(){e.add(e.local)}var e=this;return this.clear(),(this.initPromise=this._loadPrefetch()).done(t),this.initPromise},initialize:function(t){return!this.initPromise||t?this._initialize():this.initPromise},add:function(t){return this.index.add(t),this},get:function(t){return t=e.isArray(t)?t:[].slice.call(arguments),this.index.get(t)},search:function(t,i,n){function r(t){var i=[];e.each(t,function(t){!e.some(o,function(e){return s.identify(t)===s.identify(e)})&&i.push(t)}),n&&n(i)}var o,s=this;return o=this.sorter(this.index.search(t)),i(this.remote?o.slice():o),this.remote&&o.length<this.sufficient?this.remote.get(t,r):this.remote&&this.remote.cancelLastRequest(),this},all:function(){return this.index.all()},clear:function(){return this.index.reset(),this},clearPrefetchCache:function(){return this.prefetch&&this.prefetch.clear(),this},clearRemoteCache:function(){return s.resetCache(),this},ttAdapter:function(){return this.__ttAdapter()}}),i}();return u}),define("list-page/components/facets/javascript/facet-search-view",["require","exports","module","lodash","backbone","list-page/components/application/javascript/cookie-manager","_vendors/typeahead/typeahead","_vendors/typeahead/bloodhound"],function(t,e,i){var n=t("lodash"),r=t("backbone"),o=new(t("list-page/components/application/javascript/cookie-manager"));t("_vendors/typeahead/typeahead");var s=t("_vendors/typeahead/bloodhound"),a=r.View.extend({initialize:function(t){this.options=t||{}},render:function(){return this._renderSearch(),this},_renderSearch:function(){if(this.model.get("hasSearch")===!0){var t=this,e=new s({datumTokenizer:s.tokenizers.obj.whitespace("value"),queryTokenizer:s.tokenizers.whitespace,local:this.collection.toJSON()});this.$(".facet-search input[type=text]").typeahead({minLength:1,highlight:!0},{name:"facets",display:"value",source:e,templates:{empty:"<div class='tt-empty'>No Results</div>",suggestion:n.template('<div class="tt-suggestion tt-selectable"><%=value%> <span class="count">(<%=count%>)</span></div>')}}).bind("typeahead:select",function(e,i){o.setCookie("facetSearch",t.model.get("name"),null,"/");var n=t.collection.find(function(t){return t.get("value")===i.value});n.set({isSelected:!0})})}}});i.exports=a}),define("list-page/components/facets/javascript/facet-price-range-model",["require","exports","module","backbone"],function(t,e,i){var n=t("backbone"),r=n.Model.extend({defaults:{min:"0",max:"0"}});i.exports=r}),define("list-page/components/facets/javascript/facet-price-range-view",["require","exports","module","jquery","backbone","list-page/components/application/javascript/cookie-manager"],function(t,e,i){var n=t("jquery"),r=t("backbone"),o=new(t("list-page/components/application/javascript/cookie-manager")),s=r.View.extend({events:{"keypress .facet-range input":"_rangeKeypress","submit #facet-range-currentprice_facet":"_rangeSubmit","change #facet-range-currentprice_facet-min":"_minChange","change #facet-range-currentprice_facet-max":"_maxChange"},initialize:function(t){this.options=t||{}},render:function(){return this},_minChange:function(t){this.model.set({min:n(t.target).val()})},_maxChange:function(t){this.model.set({max:n(t.target).val()})},_rangeKeypress:function(t){var e=t.which,i=e>=48&&57>=e,n=46===e||190===e,r=13===e,o=0===e||8===e;i||n||r||o||t.preventDefault()},_rangeSubmit:function(t){t.preventDefault();var e=this._createPriceRange(this.model.get("min"),this.model.get("max"));if(e){o.setCookie("facetRange","UserPrice:"+e,null,"/");var i="currentprice_facet=Price~"+e;this.model.set({priceRange:e,queryPath:i}),this.model.trigger("Add",this.model)}},_createPriceRange:function(t,e){var i,n,r,o;return t=this._removeExtraDecimalPoints(t),e=this._removeExtraDecimalPoints(e),i=Number(t),r=Number(e),"."===t&&(t="",i=0),"."===e&&(e="",r=0),""!==t&&0!==i||""!==e&&0!==r?(t=this._formatAsPriceAmount(t),e=this._formatAsPriceAmount(e),n=t,o=e,""===o?o="Up":(i>=r&&(n=e,o=t),""===n&&(n="0")),n+" to "+o):void 0},_removeExtraDecimalPoints:function(t){return t.replace(/^([^.]*\.)(.*)$/,function(t,e,i){return e+i.replace(/\./g,"")})},_formatAsPriceAmount:function(t){return t=t.replace(/^0+/,"").replace(/^\./,"0.").replace(/\.$/,""),-1!==t.indexOf(".")&&(t.length-t.indexOf(".")===2?t+="0":t=t.substring(0,t.indexOf(".")+3)),t}});i.exports=s}),define("list-page/components/facets/javascript/base-facet-view",["require","exports","module","jquery","lodash","backbone","eventmanager","list-page/components/facets/javascript/facet-search-view","list-page/components/facets/javascript/facet-price-range-model","list-page/components/facets/javascript/facet-price-range-view"],function(t,e,i){var n=t("jquery"),r=t("lodash"),o=t("backbone"),s=t("eventmanager"),a=t("list-page/components/facets/javascript/facet-search-view"),l=t("list-page/components/facets/javascript/facet-price-range-model"),c=t("list-page/components/facets/javascript/facet-price-range-view"),d=o.View.extend({events:{"click .see-all a":"_seeAllClick","click .see-less a":"_seeLessClick","click .facet-title a":"_clearClick"},initialize:function(t){if(this.options=t||{},this.collection=new this.FacetValueCollection,this.model.get("hasSearch")===!0&&(this.facetSearchView=new a({el:this.$el,model:this.model,collection:this.collection})),"currentprice_facet"===this.model.get("id")){var e=new l;this.facetPriceRangeView=new c({el:this.$el,model:e}),this.listenTo(e,"Add",this._addFacet)}this.compactFacetsCount=0,this.listenTo(this.model,"change:isCompact",this._isCompactChanged),this.listenTo(this.collection,"Selected",this._addFacet),this.listenTo(this.collection,"Add",this._addFacet),this.listenTo(this.collection,"Remove",this._removeFacet)},render:function(){return this._attachToDom(),this.facetSearchView&&this.facetSearchView.render(),this.facetPriceRangeView&&this.facetPriceRangeView.render(),this},_attachToDom:function(){var t=this.$(".facet-value");r.each(t,function(t){var e=n(t);e.hasClass("overflow")||this.compactFacetsCount++;var i=new this.FacetValueModel(e.data());i.set({isVisible:!e.hasClass("hide"),isSelected:n("input[type=checkbox]",e).prop("checked")}),this.collection.add(i);var r=new this.FacetValueView({el:e,model:i});r.render()},this)},_seeAllClick:function(t){t.preventDefault(),this.model.set({isCompact:!1})},_seeLessClick:function(t){t.preventDefault(),this.model.set({isCompact:!0})},_clearClick:function(t){t.preventDefault(),s.trigger("ListPage:Facet:Clear",this.model.get("id"))},_isCompactChanged:function(t,e){e?(this.$el.find(".see-all").removeClass("hide"),this.$el.find(".see-less").addClass("hide")):(this.$el.find(".see-all").addClass("hide"),this.$el.find(".see-less").removeClass("hide")),this.collection.each(function(t,i){i<this.compactFacetsCount||t.set({isVisible:!e})},this)},_addFacet:function(t){s.trigger("ListPage:Facet:Add",{url:t.get("url"),queryPath:t.get("queryPath")})},_removeFacet:function(t){s.trigger("ListPage:Facet:Remove",{queryPath:t.get("queryPath")})}});i.exports=d}),define("list-page/components/facets/javascript/category-facet-value-model",["require","exports","module","backbone"],function(t,e,i){var n=t("backbone"),r=n.Model.extend({});i.exports=r}),define("list-page/components/facets/javascript/category-facet-value-collection",["require","exports","module","backbone","list-page/components/facets/javascript/category-facet-value-model"],function(t,e,i){var n=t("backbone"),r=t("list-page/components/facets/javascript/category-facet-value-model"),o=n.Collection.extend({model:r});i.exports=o}),define("list-page/components/facets/javascript/category-facet-value-view",["require","exports","module","backbone"],function(t,e,i){var n=t("backbone"),r=n.View.extend({events:{"click a":"_categoryClick"},initialize:function(t){this.options=t||{},this.listenTo(this.model,"change:isVisible",this._isVisibleChanged)},render:function(){return this},_isVisibleChanged:function(t,e){e?this.$el.removeClass("hide"):this.$el.addClass("hide")},_categoryClick:function(t){t.preventDefault(),this.model.trigger("Selected",this.model)}});i.exports=r}),define("list-page/components/facets/javascript/category-facet-view",["require","exports","module","list-page/components/facets/javascript/base-facet-view","list-page/components/facets/javascript/category-facet-value-collection","list-page/components/facets/javascript/category-facet-value-model","list-page/components/facets/javascript/category-facet-value-view"],function(t,e,i){var n=t("list-page/components/facets/javascript/base-facet-view"),r=t("list-page/components/facets/javascript/category-facet-value-collection"),o=t("list-page/components/facets/javascript/category-facet-value-model"),s=t("list-page/components/facets/javascript/category-facet-value-view"),a=n.extend({FacetValueCollection:r,FacetValueModel:o,FacetValueView:s});i.exports=a}),define("list-page/components/facets/javascript/filter-facet-collection",["require","exports","module","backbone"],function(t,e,i){var n=t("backbone"),r=n.Collection.extend({});i.exports=r}),define("list-page/components/facets/javascript/filter-facet-model",["require","exports","module","backbone"],function(t,e,i){
var n=t("backbone"),r=n.Model.extend({defaults:{hasSearch:!1,isCompact:!0}});i.exports=r}),define("list-page/components/facets/javascript/filter-facet-value-collection",["require","exports","module","backbone"],function(t,e,i){var n=t("backbone"),r=n.Collection.extend({});i.exports=r}),define("list-page/components/facets/javascript/filter-facet-value-model",["require","exports","module","backbone"],function(t,e,i){var n=t("backbone"),r=n.Model.extend({});i.exports=r}),define("list-page/components/facets/javascript/filter-facet-value-view",["require","exports","module","jquery","backbone","eventmanager"],function(t,e,i){var n=t("jquery"),r=t("backbone"),o=(t("eventmanager"),r.View.extend({events:{"click input[type=checkbox]":"_checkboxClick"},initialize:function(t){this.options=t||{},this.listenTo(this.model,"change:isVisible",this._isVisibleChanged),this.listenTo(this.model,"change:isSelected",this._isSelectedChanged)},render:function(){return this},_checkboxClick:function(t){this.model.set({isSelected:n(t.target).prop("checked")})},_isVisibleChanged:function(t,e){e?this.$el.removeClass("hide"):this.$el.addClass("hide")},_isSelectedChanged:function(t,e){var i=this.$("input[type=checkbox]"),n=i.prop("checked");e!=n&&i.prop("checked",e),e===!0?this.model.trigger("Add",this.model):this.model.trigger("Remove",this.model)}}));i.exports=o}),define("list-page/components/facets/javascript/filter-facet-view",["require","exports","module","lodash","list-page/components/facets/javascript/base-facet-view","list-page/components/facets/javascript/filter-facet-value-collection","list-page/components/facets/javascript/filter-facet-value-model","list-page/components/facets/javascript/filter-facet-value-view"],function(t,e,i){var n=t("lodash"),r=t("list-page/components/facets/javascript/base-facet-view"),o=t("list-page/components/facets/javascript/filter-facet-value-collection"),s=t("list-page/components/facets/javascript/filter-facet-value-model"),a=t("list-page/components/facets/javascript/filter-facet-value-view"),l=r.extend({FacetValueCollection:o,FacetValueModel:s,FacetValueView:a,events:{"click .facet-title":"_facetClick"},initialize:function(t){this.options=t||{},this.events=n.extend(r.prototype.events,this.events),r.prototype.initialize.apply(this,arguments)},_facetClick:function(t){if(t.preventDefault(),this.options.appData.enableCollapsibleFacets===!0){var e=this.$(".facet-content");this.$el.hasClass("collapsed")?(this.$el.removeClass("collapsed"),this.$el.addClass("expanded"),e.slideDown()):(this.$el.removeClass("expanded"),this.$el.addClass("collapsed"),e.slideUp())}}});i.exports=l}),define("list-page/components/facets/javascript/filter-facets-view",["require","exports","module","jquery","lodash","backbone","list-page/components/facets/javascript/filter-facet-collection","list-page/components/facets/javascript/filter-facet-model","list-page/components/facets/javascript/filter-facet-view"],function(t,e,i){var n=t("jquery"),r=t("lodash"),o=t("backbone"),s=t("list-page/components/facets/javascript/filter-facet-collection"),a=t("list-page/components/facets/javascript/filter-facet-model"),l=t("list-page/components/facets/javascript/filter-facet-view"),c=o.View.extend({initialize:function(t){this.options=t||{},this.collection=new s},render:function(){return this._attachToDom(),this},_attachToDom:function(){var t=this.$(".facet-item:not(.category)");r.each(t,function(t){var e=n(t),i=new a({id:e.data("id"),name:e.data("name"),hasSearch:e.find(".facet-search").length>0});this.collection.add(i);var r=new l({el:e,model:i,appData:this.options.appData});r.render()},this)}});i.exports=c}),define("list-page/components/facets/javascript/facets-view-large",["require","exports","module","backbone","list-page/components/facets/javascript/category-facet-model","list-page/components/facets/javascript/category-facet-view","list-page/components/facets/javascript/filter-facets-view"],function(t,e,i){var n=t("backbone"),r=t("list-page/components/facets/javascript/category-facet-model"),o=t("list-page/components/facets/javascript/category-facet-view"),s=t("list-page/components/facets/javascript/filter-facets-view"),a=n.View.extend({initialize:function(t){this.options=t||{}},render:function(){return this._attachToDom(),this.categoryFacetView.render(),this.filterFacetsView.render(),this},_attachToDom:function(){var t=this.$(".facet-item.category"),e=new r({id:t.data("id"),name:t.data("name")});this.categoryFacetView=new o({el:t,model:e}),this.filterFacetsView=new s({el:".facets",appData:this.options.appData})}});i.exports=a}),define("list-page/components/facets/javascript/applied-facet-value-model",["require","exports","module","backbone"],function(t,e,i){var n=t("backbone"),r=n.Model.extend({});i.exports=r}),define("list-page/components/facets/javascript/applied-facet-value-view",["require","exports","module","backbone","eventmanager"],function(t,e,i){var n=t("backbone"),r=t("eventmanager"),o=n.View.extend({events:{"click a":"_removeClick"},initialize:function(t){this.options=t||{}},render:function(){return this},_removeClick:function(t){t.preventDefault(),r.trigger("ListPage:Facet:Remove",{queryPath:this.model.get("queryPath")})}});i.exports=o}),define("list-page/components/facets/javascript/applied-facet-value-collection",["require","exports","module","backbone"],function(t,e,i){var n=t("backbone"),r=n.Collection.extend({});i.exports=r}),define("list-page/components/facets/javascript/applied-facets-view",["require","exports","module","jquery","lodash","backbone","eventmanager","list-page/components/facets/javascript/applied-facet-value-model","list-page/components/facets/javascript/applied-facet-value-view","list-page/components/facets/javascript/applied-facet-value-collection","list-page/components/facets/javascript/filter-facet-model","list-page/components/facets/javascript/filter-facet-value-model"],function(t,e,i){var n=t("jquery"),r=t("lodash"),o=t("backbone"),s=t("eventmanager"),a=t("list-page/components/facets/javascript/applied-facet-value-model"),l=t("list-page/components/facets/javascript/applied-facet-value-view"),c=t("list-page/components/facets/javascript/applied-facet-value-collection"),d=(t("list-page/components/facets/javascript/filter-facet-model"),t("list-page/components/facets/javascript/filter-facet-value-model"),o.View.extend({events:{"click .clear-all":"_clearAllClick"},initialize:function(t){this.options=t||{},this.collection=new c,this.listenTo(this.collection,"Remove",this._removeFacet)},render:function(){return this._attachToDom(),this},_attachToDom:function(){var t=this.$(".applied-facet-value");r.each(t,function(t){var e=n(t),i=new a(e.data());this.collection.add(i);var r=new l({el:e,model:i});r.render()},this)},_clearAllClick:function(t){t.preventDefault(),s.trigger("ListPage:Facet:ClearAll")}}));i.exports=d}),define("list-page/components/local-store-availability/javascript/availability-model",["require","exports","module","backbone"],function(t,e,i){var n=t("backbone"),r=n.Model.extend({});i.exports=r}),define("dust-loader!list-page/components/local-store-availability/dust/availability-settings",function(){return function(t){var e=function(t){function e(t,e){return t.w('<div class="modal-dialog availability-settings-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true" aria-label="Cancel">&times;</span></button><h4 id="modal-title" class="modal-title">Store Availability</h4></div><form class="modal-body container-fluid availability-settings-form" id="availability-settings-form">').x(e.getPath(!1,["preferredStores","values"]),e,{block:i},{}).x(e.get(["zipCode"],!1),e,{"else":r,block:o},{}).w('<div class="row form-inline hidden availability-settings-edit-zip-code"><div class="col-xs-12"><label class="cloaked">ZIP Code</label><input type="text" class="availability-settings-zip-code-input" id="availability-settings-zip-code" placeholder="Enter ZIP code" maxlength="5" autocomplete="off" /><span class="button-column"><button class="btn btn-default availability-settings-zip-code-go">Go</button></span></div></div>').x(e.get(["zipCode"],!1),e,{block:s},{}).w('<div class="row availability-settings-error-zip-code"></div><div class="row availability-settings-stores hidden"><div class="col-xs-12">').s(e.getPath(!1,["stores","values"]),e,{block:l},{}).h("gt",e,{block:d},{key:e.getPath(!1,["stores","values","length"]),value:5},"h").w('</div></div><div class="row availability-settings-controls hidden"><div class="col-xs-12"><button type="submit" class="btn btn-default btn-block availability-settings-submit disabled" disabled="disabled">Apply</button></div></div></form></div></div>')}function i(t,e){return t.w('<div class="row availability-settings-preferred-stores"><div class="col-xs-12"><h5>Your Preferred Stores</h5>').s(e.getPath(!1,["preferredStores","values"]),e,{block:n},{}).w("</div></div>")}function n(t,e){return t.w('<div class="preferred-store"><div class="radio"><label for="availability-settings-preferred-store-').f(e.get(["id"],!1),e,"h").w('"><input type="radio" name="stores" id="availability-settings-preferred-store-').f(e.get(["id"],!1),e,"h").w('" value="').f(e.get(["id"],!1),e,"h").w('" data-name="').f(e.get(["name"],!1),e,"h").w('" data-zip-code="').f(e.get(["zipCode"],!1),e,"h").w('" data-is-preferred-store="').f(e.get(["isPreferredStore"],!1),e,"h").w('" /><span class="store-name">').f(e.get(["name"],!1),e,"h").w("</span></label></div></div>")}function r(t,e){return t.w('<div class="row availability-settings-zip-code-header"><div class="col-xs-12"><h5>ZIP code</h5></div></div><div class="row form-inline availability-settings-edit-zip-code"><div class="col-xs-12"><label class="cloaked">ZIP Code</label><input type="text" class="availability-settings-zip-code-input" id="availability-settings-zip-code" placeholder="Enter ZIP code" maxlength="5" autocomplete="off" /><span class="button-column"><button class="btn btn-default availability-settings-zip-code-go">Go</button></span></div></div>')}function o(t,e){return t.w('<div class="row availability-settings-stores-near"><div class="col-xs-12"><h5><span class="stores-near">Stores near</span> <span class="zip-code-editable"><strong class="zip-code">').f(e.get(["zipCode"],!1),e,"h").w('</strong> <a href="#" class="edit-zip-code">Edit</a></span></h5></div></div>')}function s(t,e){return t.h("eq",e,{block:a},{key:e.getPath(!1,["stores","values","length"]),value:0},"h")}function a(t,e){return t.w('<div class="availability-settings-error-no-stores"><span class="error-icon"><span class="inverted-error-icon"></span></span><span class="error-text">No stores were found within 250 miles of this ZIP code.</span></div>')}function l(t,e){return t.w('<div class="store hidden"><div class="radio"><label for="availability-settings-store-').f(e.get(["id"],!1),e,"h").w('"><input type="radio" name="stores" id="availability-settings-store-').f(e.get(["id"],!1),e,"h").w('" value="').f(e.get(["id"],!1),e,"h").w('"data-name="').f(e.get(["name"],!1),e,"h").w('"data-zip-code="').f(e.get(["zipCode"],!1),e,"h").w('"data-is-preferred-store="').f(e.get(["isPreferredStore"],!1),e,"h").w('"/><span class="store-name">').f(e.get(["name"],!1),e,"h").w("</span>").h("eq",e,{block:c},{key:e.get(["locationSubType"],!1),value:"Mobile Store"},"h").w("</label></div></div>")}function c(t,e){return t.w('<div class="mobile-store-indicator" aria-label="Best Buy Mobile Stores"></div>')}function d(t,e){return t.w('<a class="see-more" href="#">See More</a>')}return t.register("list-page/components/local-store-availability/dust/availability-settings",e),e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,r.__dustBody=!0,o.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,l.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,e}(t),i=function(i,n){if(!n)throw new Error("wrong number of args for render");return t.render(e,i,n)};return i.template=e,i}}),define("list-page/components/local-store-availability/javascript/availability-settings-model",["require","exports","module","backbone","eventmanager"],function(t,e,i){var n=t("backbone"),r=t("eventmanager"),o=n.Model.extend({url:function(){return"/browse-api/1.0/storeLocator?zipcode="+this._getZipCode()},initialize:function(t){this.listenTo(r,"Availability:ZipCode",this._onChangeZipCode),this.listenTo(r,"Availability:Previous",this._onPreviousPage),this.listenTo(r,"Availability:Next",this._onNextPage),this.listenTo(r,"Availability:Deactivate",this.destroy),t&&t.zipCode&&(this.zipCode=t.zipCode),t&&t.isEdit&&(this.isEdit=t.isEdit)},destroy:function(t){this.stopListening(),this.trigger("destroy",this,this.collection,t)},_getZipCode:function(){if(this.zipCode)return this.zipCode;var t=window.__GEOVARS.zip,e=window.location.hostname;return("www.qa.bestbuy.com"===e||"bby-qa3.bestbuy.com"===e)&&(t="55423"),t.match(/^\d{5}/)?t.substring(0,5):""},_onChangeZipCode:function(t){this.url="/browse-api/1.0/storeLocator?zipcode="+t.zipCode,this.fetch()}});i.exports=o}),define("dust-loader!list-page/components/local-store-availability/dust/availability-zipcode-error",function(){return function(t){var e=function(t){function e(t,e){return t.w('<div class="col-xs-12"><span class="zipcode-error-text">Please enter a ZIP code.</span></div>')}return t.register("list-page/components/local-store-availability/dust/availability-zipcode-error",e),e.__dustBody=!0,e}(t),i=function(i,n){if(!n)throw new Error("wrong number of args for render");return t.render(e,i,n)};return i.template=e,i}}),define("list-page/components/local-store-availability/javascript/availability-settings-view",["require","exports","module","jquery","lodash","backbone","dust","eventmanager","list-page/components/application/javascript/cookie-manager","sc-persistence-manager/javascript/persistence-manager","dust-loader!list-page/components/local-store-availability/dust/availability-settings","list-page/components/local-store-availability/javascript/availability-settings-model","dust-loader!list-page/components/local-store-availability/dust/availability-zipcode-error"],function(t,e,i){var n=t("jquery"),r=t("lodash"),o=t("backbone"),s=t("dust"),a=t("eventmanager"),l=new(t("list-page/components/application/javascript/cookie-manager")),c=t("sc-persistence-manager/javascript/persistence-manager"),d=t("dust-loader!list-page/components/local-store-availability/dust/availability-settings")(s),u=t("list-page/components/local-store-availability/javascript/availability-settings-model"),h=t("dust-loader!list-page/components/local-store-availability/dust/availability-zipcode-error")(s),p=o.View.extend({template:d,events:{"click .edit-zip-code":"_onClickEditZipCode","keypress .availability-settings-edit-zip-code input":"_onKeypressZipCode","keyup .availability-settings-edit-zip-code input":"_removeInvalidClass","keypress .availability-settings-edit-zip-code button":"_onSetZipCode","click .availability-settings-edit-zip-code button":"_onSetZipCode","click .see-more":"_onClickSeeMore","click .see-less":"_onClickSeeLess","submit .availability-settings-form":"_onSubmitSettings","click .availability-settings-form .radio input":"_enableApplyButton","click .close":"_closeModal"},id:"availability-settings-modal",className:"modal availability-settings-modal",attributes:{tabindex:"-1",role:"dialog","aria-labelledby":"modal-title"},initialize:function(t){this.model=new u(t),this.listenTo(this.model,"change",this._renderModal),this.listenTo(this.model,"destroy",this._removeView)},_removeInvalidClass:function(t){13!==t.which&&(this.$(".availability-settings-zip-code-input").removeClass("invalid"),h({},r.bind(function(t,e){this.$el.find(".availability-settings-error-zip-code").html("")},this)))},render:function(){return this.model.fetch(),this},_renderModal:function(){var t=this;this.template(this.model.toJSON(),function(e,i){t.$el.html(i),t.model.toJSON().isEdit&&t.$(".edit-zip-code").click(),n("body").append(t.$el),t.$el.modal(),t.$el.on("hidden.bs.modal",function(){t._closeModal(),t.remove()}),t._seeLess()});var e=this.model.get("stores").values.length>0||this.model.get("preferredStores").values.length>0;e&&this.$(".availability-settings-stores, .availability-settings-controls").removeClass("hidden")},_focusOnFirstStore:function(){this.$(".store:first input").focus()},_onClickEditZipCode:function(t){t.preventDefault();var e=this.$(".zip-code").text();this.$(".zip-code-editable").addClass("hidden"),this.$(".availability-settings-edit-zip-code").removeClass("hidden").find("input").val(e),this.$("#availability-settings-zip-code").focus()},_onKeypressZipCode:function(t){var e=t.which,i=e>=48&&57>=e,n=13===e,r=0===e||8===e;i||n||r||t.preventDefault()},_onSetZipCode:function(t){var e,i=n(t.currentTarget).prop("tagName").toLowerCase();("button"===i&&("click"===t.type||13===t.keyCode||32===t.keyCode)||"input"===i&&13===t.keyCode)&&(t.preventDefault(),e=this.$(".availability-settings-zip-code-input").val(),this._isValidZipcode(e)?a.trigger("Availability:ZipCode",{zipCode:e}):(this.$(".availability-settings-zip-code-input").addClass("invalid"),h({},r.bind(function(t,e){this.$el.find(".availability-settings-error-zip-code").html(e)},this))))},_onSubmitSettings:function(t){t.preventDefault();var e=this.$("input[name='stores']:checked"),i=e.data("isPreferredStore"),n=this.$("#availability-settings-zip-code").val()||this.$(".zip-code").text(),r={id:e.val(),name:e.data("name"),zipCode:e.data("zipCode"),isPreferredStore:i,enabled:!0},o=n+"|Y";a.trigger("Availability:GetStatus",r),c.set("listPageLocalStore",JSON.stringify(r)),l.setCookie("pst2",r.id,null,"/",".bestbuy.com"),document.cookie="customerZipCode="+o+"; domain=.bestbuy.com; path=/;",i?a.trigger("analytics:storeAvailability:lbox:selectPreferredStore"):a.trigger("analytics:storeAvailability:lbox:selectStore"),l.setCookie("plpStoreAvail",!0,null,"/"),this.model.set("selectedStore",r),this.trigger("Availability:LocalStoreSelected",r),this.$el.modal("hide")},_closeModal:function(t){t&&t.preventDefault(),this.$el.modal("hide"),this.model.get("isEdit")||this.model.get("selectedStore")||a.trigger("Availability:ResetCheckbox")},_isValidZipcode:function(t){return/^\d{5}$/.test(t)?!0:!1},_enableApplyButton:function(){this.$(".availability-settings-submit").prop("disabled",!1).removeClass("disabled")},_removeView:function(){this.stopListening(),this.remove()},_seeMore:function(){this.model.get("stores").values.length>5&&this.$(".see-more").removeClass("see-more").addClass("see-less").text("See Less"),this.$(".store").removeClass("hidden")},_seeLess:function(){var t=this.$(".store");this.model.get("stores").values.length>5?(t.slice(0,5).removeClass("hidden"),t.slice(5).addClass("hidden"),this.$(".see-less").removeClass("see-less").addClass("see-more").text("See More")):t.removeClass("hidden")},_onClickSeeMore:function(t){t.preventDefault(),this._seeMore(),this._focusOnFirstStore()},_onClickSeeLess:function(t){t.preventDefault(),this._seeLess(),this._focusOnFirstStore()}});i.exports=p}),define("dust-loader!list-page/components/local-store-availability/dust/availability-checkbox",function(){return function(t){var e=function(t){function e(t,e){return t.w('<div class="availability-checkbox"><input type="checkbox" id="availability-checkbox" ').x(e.get(["enabled"],!1),e,{block:i},{}).w(" /> ").x(e.get(["enabled"],!1),e,{"else":n,block:r},{}).w("</div>")}function i(t,e){return t.w('checked="checked"')}function n(t,e){return t.w('<label for="availability-checkbox">Store availability</label>')}function r(t,e){return t.x(e.get(["name"],!1),e,{block:o},{})}function o(t,e){return t.w('<label for="availability-checkbox" class="store-set">').f(e.get(["name"],!1),e,"h").w('</label><a href="#" class="availability-edit-link">Edit</a>')}return t.register("list-page/components/local-store-availability/dust/availability-checkbox",e),e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,r.__dustBody=!0,o.__dustBody=!0,e}(t),i=function(i,n){if(!n)throw new Error("wrong number of args for render");return t.render(e,i,n)};return i.template=e,i}}),define("list-page/components/local-store-availability/javascript/availability-view",["require","exports","module","dust","jquery","backbone","sc-persistence-manager/javascript/persistence-manager","eventmanager","list-page/components/application/javascript/cookie-manager","list-page/components/local-store-availability/javascript/availability-model","list-page/components/local-store-availability/javascript/availability-settings-view","dust-loader!list-page/components/local-store-availability/dust/availability-checkbox"],function(t,e,i){var n=t("dust"),r=t("jquery"),o=t("backbone"),s=t("sc-persistence-manager/javascript/persistence-manager"),a=t("eventmanager"),l=new(t("list-page/components/application/javascript/cookie-manager")),c=t("list-page/components/local-store-availability/javascript/availability-model"),d=t("list-page/components/local-store-availability/javascript/availability-settings-view"),u=t("dust-loader!list-page/components/local-store-availability/dust/availability-checkbox")(n),h=o.View.extend({template:u,events:{"click input[type=checkbox]":"_availabilityClick","click .availability-edit-link":"_editClick"},initialize:function(t){this.options=t||{},this.model=new c,this.listenTo(this.model,"change",this._renderTemplate),this.listenTo(a,"Availability:ResetCheckbox",this._resetCheckbox)},render:function(){var t=this;return s.get("listPageLocalStore",JSON.stringify({})).then(function(e){e=JSON.parse(e),t.model.set(e),e.enabled&&a.trigger("Availability:GetStatus",e)}),this._renderTemplate(),this},_renderTemplate:function(){var t=this;this.template(this.model.toJSON(),function(e,i){e||(t.$el.html(i),t.delegateEvents())})},_showAvailabilitySettings:function(t){var e=this,i=new d(t);this.listenTo(i,"Availability:LocalStoreSelected",function(t){e.model.set(t)}),i.render()},_availabilityClick:function(t){var e=this,i=r(t.target);i.prop("checked")?(this.model.get("zipCode")?(this.model.set({enabled:!0}),s.set("listPageLocalStore",JSON.stringify(this.model.toJSON())),a.trigger("Availability:GetStatus",this.model.toJSON()),l.setCookie("plpStoreAvail",!0,null,"/")):s.get("listPageLocalStore").then(function(t){if(t)t=JSON.parse(t),t.enabled=!0,s.set("listPageLocalStore",JSON.stringify(t)),a.trigger("Availability:GetStatus",t);else{var i=l.getCookie("customerZipCode");i?(i=i.split("|")[0],e._showAvailabilitySettings({zipCode:i})):e._showAvailabilitySettings()}}),a.trigger("analytics:storeAvailability:checked")):(this.model.get("zipCode")&&(this.model.set({enabled:!1}),s.get("listPageLocalStore",JSON.stringify({})).then(function(t){t=JSON.parse(t),t.enabled=!1,s.set("listPageLocalStore",JSON.stringify(t))}),l.removeCookie("plpStoreAvail","/")),a.trigger("Availability:Deactivate"))},_editClick:function(t){t.preventDefault();var e=l.getCookie("customerZipCode");e||(e=this.model.get("zipCode")),e=e.toString().split("|")[0],this._showAvailabilitySettings({zipCode:e,isEdit:!0})},_resetCheckbox:function(){this.$("#availability-checkbox").prop("checked",!1)}});i.exports=h}),define("list-page/components/ink-finder/javascript/ink-finder-collection",["require","exports","module","lodash","backbone"],function(t,e,i){var n=t("lodash"),r=t("backbone"),o=r.Collection.extend({url:function(){return this.options.appData.bbyDomain+"/api-edge/global/search/www?searchType=fieldvalues&fieldListFacets=inkfinderfulltuple_facet,inktonermodel_facet,inkfinderpartialtuple_facet,inkbrandcompatibility_facet,inkprintertypecompatibility_facet,inkmodelcompatibility_facet"},initialize:function(t){this.options=t||{}},parse:function(t){if(!t)return t;var e=[];return n.each(t.termsResponse.fields,function(t,i){n.each(t,function(t){e.push({Facet:i,Text:t.term.replace(/,/g," "),Value:t.term})})}),e}});i.exports=o}),define("list-page/components/ink-finder/javascript/ink-finder-view",["require","exports","module","jquery","lodash","backbone","_vendors/typeahead/typeahead","_vendors/typeahead/bloodhound","eventmanager","list-page/components/ink-finder/javascript/ink-finder-collection"],function(t,e,i){var n=t("jquery"),r=t("lodash"),o=t("backbone");t("_vendors/typeahead/typeahead");var s=t("_vendors/typeahead/bloodhound"),a=t("eventmanager"),l=t("list-page/components/ink-finder/javascript/ink-finder-collection"),c=o.View.extend({events:{"click .finder-expand-collapse":"_onClickExpandCollapse","change #ink-finder-printer-brand":"_brandChange","change #ink-finder-printer-series":"_seriesChange","change #ink-finder-printer-model":"_modelChange","submit #ink-finder-printer-form":"_printerFormSubmit"},initialize:function(t){this.options=t||{},this.collection=new l({appData:this.options.appData}),this.listenTo(this.collection,"reset",this._collectionReset)},render:function(){return this.collection.fetch({reset:!0}),this},_collectionReset:function(){var t=this.collection.chain().filter(function(t){return"inkfinderfulltuple_facet"===t.get("Facet")||"inktonermodel_facet"==t.get("Facet")}).map(function(t){return t.toJSON()}).value();this.dropDownData=this.collection.chain().filter(function(t){return"inkfinderfulltuple_facet"===t.get("Facet")}).map(function(t){var e=t.get("Value").split(","),i={};return i.brand=e[0],e[1]&&(i.series=e[1]),e[2]&&(i.model=e[2]),i}).value(),this._loadAutoComplete(t),this._loadBrands()},_loadAutoComplete:function(t){var e=this,i=new s({datumTokenizer:s.tokenizers.obj.whitespace("Text"),queryTokenizer:s.tokenizers.whitespace,local:t}),n=this.$("#ink-finder-model-number");n.typeahead({minLength:1,highlight:!0},{name:"printer-cartidge-models",display:"Text",source:i,limit:100,templates:{empty:"<div class='tt-empty'>No Results</div>",suggestion:r.template('<div class="tt-suggestion tt-selectable"><%=Text%></div>')}}).bind("typeahead:select",function(t,i){a.trigger("ListPage:Facet:Add",{queryPath:i.Facet+"=~"+i.Value}),a.trigger("analytics:inkTonerFinder:searchSelect",{value:i.Value}),"small"===e.options.appData.ressSize&&(a.trigger("List:Facet:Add",{facet:{id:i.Facet},facetValue:{queryPath:i.Facet+"=~"+i.Value}}),a.trigger("List:MobileFacet:ApplyFacets"))})},_loadBrands:function(){var t=r.chain(this.dropDownData).pluck("brand").uniq().sortBy().value(),e=this.$("#ink-finder-printer-brand");r.each(t,function(t){var i=n("<option>",{text:t,value:t});e.append(i)})},_loadSeries:function(t){var e=r.chain(this.dropDownData).filter(function(e){return e.brand===t}).pluck("series").uniq().sortBy().value(),i=this.$("#ink-finder-printer-series");r.each(e,function(t){var e=n("<option>",{text:t,value:t});i.append(e)})},_loadModels:function(t,e){var i=r.chain(this.dropDownData).filter(function(i){return i.brand===t&&i.series===e}).pluck("model").unique().sortBy().value(),o=this.$("#ink-finder-printer-model");r.each(i,function(t){var e=n("<option>",{text:t,value:t});o.append(e)})},_brandChange:function(t){var e=this.$("#ink-finder-printer-brand"),i=this.$("#ink-finder-printer-series"),n=i.parents(".finder-select"),r=this.$("#ink-finder-printer-model"),o=r.parents(".finder-select"),s=this.$("#ink-finder-printer-button");i.html(i.find("option:first")),i.val(""),e.val()?(i.removeClass("disabled"),i.removeAttr("disabled"),n.removeClass("select-disabled"),s.removeClass("disabled"),s.removeAttr("disabled"),this._loadSeries(e.val())):(i.addClass("disabled"),i.attr("disabled","disabled"),n.addClass("select-disabled"),s.addClass("disabled"),s.attr("disabled","disabled")),r.html(r.find("option:first")),r.val(""),r.addClass("disabled"),r.attr("disabled","disabled"),o.addClass("select-disabled")},_seriesChange:function(t){var e=this.$("#ink-finder-printer-brand"),i=this.$("#ink-finder-printer-series"),n=(i.parents(".finder-select"),this.$("#ink-finder-printer-model")),r=n.parents(".finder-select");n.html(n.find("option:first")),n.val(""),i.val()?(n.removeClass("disabled"),n.removeAttr("disabled"),r.removeClass("select-disabled"),this._loadModels(e.val(),i.val())):(n.addClass("disabled"),n.attr("disabled","disabled"),r.addClass("select-disabled"))},_modelChange:function(t){},_printerFormSubmit:function(t){t.preventDefault();var e,i,n=this.$("#ink-finder-printer-brand").val(),r=this.$("#ink-finder-printer-series").val(),o=this.$("#ink-finder-printer-model").val();n&&r&&o?(e="inkfinderfulltuple_facet",i="inkfinderfulltuple_facet=~"+n+","+r+","+o):n&&r?(e="inkfinderpartialtuple_facet",i="inkfinderpartialtuple_facet=~"+n+","+r):n&&(e="inkbrandcompatibility_facet",i="inkbrandcompatibility_facet=~"+n),a.trigger("analytics:inkTonerFinder:brandSelect"),a.trigger("ListPage:Facet:Add",{queryPath:i}),"small"===this.options.appData.ressSize&&(a.trigger("List:Facet:Add",{facet:{id:e},facetValue:{queryPath:i}}),a.trigger("List:MobileFacet:ApplyFacets"))},_onClickExpandCollapse:function(t){t.preventDefault();var e=this.$el,i=n(".cloaked",t.currentTarget);e.hasClass("closed")?(e.removeClass("closed"),i.text("Open Finder")):(e.addClass("closed"),i.text("Close Finder"))}});i.exports=c}),function(t,e){"function"==typeof define&&define.amd?define("_vendors/blazy",e):"object"==typeof exports?module.exports=e():t.Blazy=e()}(this,function(){function t(t){setTimeout(function(){var i=t._util;i.elements=o(t.options.selector),i.count=i.elements.length,i.destroyed&&(i.destroyed=!1,t.options.container&&c(t.options.container,function(t){a(t,"scroll",i.validateT)}),a(window,"resize",i.saveViewportOffsetT),a(window,"resize",i.validateT),a(window,"scroll",i.validateT)),e(t)},1)}function e(t){for(var e=t._util,i=0;i<e.count;i++){var n=e.elements[i],o=n.getBoundingClientRect();(o.right>=h.left&&o.bottom>=h.top&&o.left<=h.right&&o.top<=h.bottom||r(n,t.options.successClass))&&(t.load(n),e.elements.splice(i,1),e.count--,i--)}0===e.count&&t.destroy()}function i(t,e,i){if(!r(t,i.successClass)&&(e||i.loadInvisible||0<t.offsetWidth&&0<t.offsetHeight))if(e=t.getAttribute(u)||t.getAttribute(i.src)){e=e.split(i.separator);var o=e[p&&1<e.length?1:0],s="img"===t.nodeName.toLowerCase();s||void 0===t.src?(e=new Image,e.onerror=function(){i.error&&i.error(t,"invalid"),t.className=t.className+" "+i.errorClass},e.onload=function(){s?t.src=o:t.style.backgroundImage='url("'+o+'")',n(t,i)},e.src=o):(t.src=o,n(t,i))}else i.error&&i.error(t,"missing"),r(t,i.errorClass)||(t.className=t.className+" "+i.errorClass)}function n(t,e){t.className=t.className+" "+e.successClass,e.success&&e.success(t),c(e.breakpoints,function(e){t.removeAttribute(e.src)}),t.removeAttribute(e.src)}function r(t,e){return-1!==(" "+t.className+" ").indexOf(" "+e+" ")}function o(t){var e=[];t=document.querySelectorAll(t);for(var i=t.length;i--;e.unshift(t[i]));return e}function s(t){h.bottom=(window.innerHeight||document.documentElement.clientHeight)+t,h.right=(window.innerWidth||document.documentElement.clientWidth)+t}function a(t,e,i){t.attachEvent?t.attachEvent&&t.attachEvent("on"+e,i):t.addEventListener(e,i,!1)}function l(t,e,i){t.detachEvent?t.detachEvent&&t.detachEvent("on"+e,i):t.removeEventListener(e,i,!1)}function c(t,e){if(t&&e)for(var i=t.length,n=0;i>n&&!1!==e(t[n],n);n++);}function d(t,e,i){var n=0;return function(){var r=+new Date;e>r-n||(n=r,t.apply(i,arguments))}}var u,h,p;return function(n){if(!document.querySelectorAll){var r=document.createStyleSheet();document.querySelectorAll=function(t,e,i,n,o){for(o=document.all,e=[],t=t.replace(/\[for\b/gi,"[htmlFor").split(","),i=t.length;i--;){for(r.addRule(t[i],"k:v"),n=o.length;n--;)o[n].currentStyle.k&&e.push(o[n]);r.removeRule(0)}return e}}var o=this,a=o._util={};a.elements=[],a.destroyed=!0,o.options=n||{},o.options.error=o.options.error||!1,o.options.offset=o.options.offset||100,o.options.success=o.options.success||!1,o.options.selector=o.options.selector||".b-lazy",o.options.separator=o.options.separator||"|",o.options.container=o.options.container?document.querySelectorAll(o.options.container):!1,o.options.errorClass=o.options.errorClass||"b-error",o.options.breakpoints=o.options.breakpoints||!1,o.options.loadInvisible=o.options.loadInvisible||!1,o.options.successClass=o.options.successClass||"b-loaded",
o.options.validateDelay=o.options.validateDelay||25,o.options.saveViewportOffsetDelay=o.options.saveViewportOffsetDelay||50,o.options.src=u=o.options.src||"data-src",p=1<window.devicePixelRatio,h={},h.top=0-o.options.offset,h.left=0-o.options.offset,o.revalidate=function(){t(this)},o.load=function(t,e){var n=this.options;void 0===t.length?i(t,e,n):c(t,function(t){i(t,e,n)})},o.destroy=function(){var t=this._util;this.options.container&&c(this.options.container,function(e){l(e,"scroll",t.validateT)}),l(window,"scroll",t.validateT),l(window,"resize",t.validateT),l(window,"resize",t.saveViewportOffsetT),t.count=0,t.elements.length=0,t.destroyed=!0},a.validateT=d(function(){e(o)},o.options.validateDelay,o),a.saveViewportOffsetT=d(function(){s(o.options.offset)},o.options.saveViewportOffsetDelay,o),s(o.options.offset),c(o.options.breakpoints,function(t){return t.width>=window.screen.width?(u=t.src,!1):void 0}),t(o)}}),define("list-page/components/local-store-availability/javascript/availability-status-collection",["require","exports","module","backbone"],function(t,e,i){var n=t("backbone"),r=n.Collection.extend({});i.exports=r}),define("list-page/components/list-items/javascript/list-item-collection",["require","exports","module","backbone"],function(t,e,i){var n=t("backbone"),r=n.Collection.extend({});i.exports=r}),define("list-page/components/list-items/javascript/list-item-model",["require","exports","module","backbone"],function(t,e,i){var n=t("backbone"),r=n.Model.extend({});i.exports=r}),define("dust-loader!list-page/components/local-store-availability/dust/availability-status",function(){return function(t){var e=function(t){function e(t,e){return t.w('<div class="availability-status">').h("select",e,{block:i},{key:e.get(["availabilityStatus"],!1)},"h").w('<span class="availability-status-local-store">at ').f(e.get(["storeName"],!1),e,"h").w("</span></div>")}function i(t,e){return t.h("eq",e,{block:n},{value:"PICK_UP_TODAY"},"h").h("eq",e,{block:r},{value:"PICK_UP_SOON"},"h").h("eq",e,{block:o},{value:"NOT_AVAILABLE"},"h").h("none",e,{block:s},{},"h")}function n(t,e){return t.w('<strong class="availability-status-pick-up-today">Pick up today</strong>')}function r(t,e){return t.w('<strong class="availability-status-pick-up-in">Pick up in ').f(e.get(["startDaysToAvailable"],!1),e,"h").w("-").f(e.get(["endDaysToAvailable"],!1),e,"h").w(" days</strong>")}function o(t,e){return t.w('<strong class="availability-status-not-available">Not available for pickup</strong>')}function s(t,e){return t.w('<strong class="availability-status-see-details"><a href="').f(e.get(["url"],!1),e,"h").w('">See details for store pickup</a></strong>')}return t.register("list-page/components/local-store-availability/dust/availability-status",e),e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,r.__dustBody=!0,o.__dustBody=!0,s.__dustBody=!0,e}(t),i=function(i,n){if(!n)throw new Error("wrong number of args for render");return t.render(e,i,n)};return i.template=e,i}}),define("list-page/components/local-store-availability/javascript/availability-status-model",["require","exports","module","lodash","backbone"],function(t,e,i){var n=t("lodash"),r=t("backbone"),o=r.Model.extend({initialize:function(t){this.options=t||{}},destroy:function(t){this.stopListening(),this.trigger("destroy",this,this.collection,t)},updateStatus:function(t){var e=n.find(t,function(t){return this.get("skuId")==t.skuId},this),i={storeName:e.locationName};e&&(e.instock&&e.instock.pickup&&e.instock.pickup.available===!0?i.availabilityStatus="PICK_UP_TODAY":e.instock&&e.instock.shipToLocation?e.instock.shipToLocation.national&&(i.availabilityStatus="PICK_UP_SOON",i.startDaysToAvailable=e.instock.shipToLocation.national.startDaysToAvailable,i.endDaysToAvailable=e.instock.shipToLocation.national.endDaysToAvailable):i.availabilityStatus="NOT_AVAILABLE"),this.set(i)}});i.exports=o}),define("list-page/components/local-store-availability/javascript/availability-status-view",["require","exports","module","backbone","dust","eventmanager","dust-loader!list-page/components/local-store-availability/dust/availability-status","list-page/components/local-store-availability/javascript/availability-status-model"],function(t,e,i){var n=t("backbone"),r=t("dust"),o=t("eventmanager"),s=t("dust-loader!list-page/components/local-store-availability/dust/availability-status")(r),a=t("list-page/components/local-store-availability/javascript/availability-status-model"),l=n.View.extend({template:s,initialize:function(t){this.options=t||{},this.model=new a,this._setPickupEligibility(),this.listenTo(o,"Availability:GetStatus",this._showStatus),this.listenTo(o,"Availability:Deactivate",this._hideStatus),this.listenTo(this.model,"change",this._renderStatus)},render:function(){return this},_renderStatus:function(){var t=this;return this.model.get("isVisible")===!1?void this.$el.empty():void this.template(this.model.toJSON(),function(e,i){e||t.$el.html(i)})},_setPickupEligibility:function(){var t=this._determinePickupEligibility(),e={skuId:this.options.sku.skuId,url:this.options.sku.url,isEligibleForPickup:t.isEligibleForPickup};t.availabilityStatus&&(e.availabilityStatus=t.availabilityStatus),this.model.set(e)},_showStatus:function(t){this.model.set({storeName:t.name,isVisible:!0})},_hideStatus:function(){this.model.set({isVisible:!1})},_determinePickupEligibility:function(){var t=this.options.sku,e=t.sellerId,i="music"===t.productType,n="preOrder"===t.availabilityType,r="bundle"===t.productType,o=t.pickupAvailable,s={isEligibleForPickup:!1};return o?e?s.availabilityStatus="NOT_AVAILABLE":n||r||i?s.availabilityStatus="SEE_DETAILS":s.isEligibleForPickup=!0:s.availabilityStatus="NOT_AVAILABLE",s}});i.exports=l}),define("dust-loader!list-page/components/application/dust/modal",function(){return function(t){var e=function(t){function e(t,e){return t.w('<div class="modal" id="modal" tabindex="-1" role="dialog" aria-labelledby="modal-title"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 id="modal-title" class="modal-title">').f(e.get(["title"],!1),e,"h").w('</h4></div><div class="modal-body"><iframe frameborder="0" src="').f(e.get(["url"],!1),e,"h").w('" class="cboxIframe" allowfullscreen="true" webkitallowfullscreen="true" mozallowfullscreen="true"></iframe></div></div></div></div>')}return t.register("list-page/components/application/dust/modal",e),e.__dustBody=!0,e}(t),i=function(i,n){if(!n)throw new Error("wrong number of args for render");return t.render(e,i,n)};return i.template=e,i}}),define("list-page/components/list-items/javascript/check-shipping-availability-view",["require","exports","module","jquery","backbone","dust","dust-loader!list-page/components/application/dust/modal"],function(t,e,i){var n=t("jquery"),r=t("backbone"),o=t("dust"),s=t("dust-loader!list-page/components/application/dust/modal")(o),a=r.View.extend({events:{"click a":"_linkClick"},initialize:function(t){this.options=t||{}},render:function(){return this},_linkClick:function(t){if(t.preventDefault(),"download"!==this.model.get("availability")){var e=n(t.currentTarget);s({url:e.attr("href")},function(t,i){if(!t){var r,o=n(i),s=o.find(".modal-body"),a=o.find("iframe"),l=0,c=0,d=function(){var t=a.contents();(l!=t.height()||c!=t.width())&&(l=t.height(),c=t.width(),s.height(l),s.width(c))};a.on("load",function(t){d(),r=setInterval(d,500)}),n("body").append(o),o.on("hidden.bs.modal",function(t){clearInterval(r),e.focus(),o.remove()}),o.modal()}})}}});i.exports=a}),define("list-page/components/compare/javascript/compare-checkbox-model",["require","exports","module","backbone"],function(t,e,i){var n=t("backbone"),r=n.Model.extend({});i.exports=r}),define("list-page/components/compare/javascript/compare-checkbox-view",["require","exports","module","jquery","backbone","eventmanager","list-page/components/compare/javascript/compare-checkbox-model","sc-tooltips/javascript/_tooltips"],function(t,e,i){var n=t("jquery"),r=t("backbone"),o=t("eventmanager"),s=t("list-page/components/compare/javascript/compare-checkbox-model");t("sc-tooltips/javascript/_tooltips");var a=r.View.extend({events:{"click input[type=checkbox]":"_compareCheckboxClick"},initialize:function(t){this.options=t||{},this.model=new s,this.$(".tt-do-compare").click(this._compareLinkClick),this.listenTo(this.model,"change:isSelected",this._isSelectedChanged),this.listenTo(o,"ComparePreview:ItemAdded",this._add),this.listenTo(o,"ComparePreview:ItemRemoved",this._remove),this.listenTo(o,"ComparePreview:Clear",this._clear),this.listenTo(o,"ComparePreview:Full",this._compareFull),this.listenTo(o,"ComparePreview:NotFull",this._compareNotFull)},render:function(){return this},_compareCheckboxClick:function(t){var e=n(t.currentTarget),i=e.prop("checked");return i===!0&&this.isCompareFull===!0?void t.preventDefault():void this.model.set({isSelected:i})},_compareLinkClick:function(t){t.stopPropagation(),o.trigger("ComparePreview:GenerateRoute")},_isSelectedChanged:function(t,e){this.$("input[type=checkbox]").prop("checked",e),e?o.trigger("ComparePreview:AddItem",this.options.sku):o.trigger("ComparePreview:RemoveItem",this.options.sku)},_add:function(t){t.skuId==this.options.sku.skuId&&this.model.set({isSelected:!0})},_remove:function(t){this._unbindCompareTooltip(),t.skuId==this.options.sku.skuId&&this.model.set({isSelected:!1})},_clear:function(){this.model.set({isSelected:!1}),this._unbindCompareTooltip()},_compareFull:function(t){this.isCompareFull=!0,this.model.get("isSelected")!==!0&&this._bindCompareTooltip()},_compareNotFull:function(){this.isCompareFull=!1},_bindCompareTooltip:function(){this.$el.bbytooltip()},_unbindCompareTooltip:function(){this.$el.bbytooltip("unbindtooltip")}});i.exports=a}),define("sc-accessory-finder/javascript/config",["require","sc-meta-layer/javascript/metaLayer"],function(t){var e=t("sc-meta-layer/javascript/metaLayer");return{cartURI:(e.get("env_appServer")||"")+"/cart"}}),define("dust-loader!sc-accessory-finder/dust/accessory-finder-button",function(){return function(t){var e=function(t){function e(t,e){return t.w('<a href="javascript:void(0)" data-sku-id="').f(e.get(["skuId"],!1),e,"h").w('"  data-product-id="').f(e.get(["productId"],!1),e,"h").w('" rel="addToCart" class="small-primary-action-button small-primary-action-button-af ').x(e.get(["addedToCart"],!1),e,{block:i},{}).w('">').x(e.get(["addedToCart"],!1),e,{"else":n,block:l},{}).w("</a>")}function i(t,e){return t.w("inactive")}function n(t,e){return t.w('<span class="front-icon ').x(e.get(["adding"],!1),e,{"else":r,block:o},{}).w('"></span>').x(e.get(["adding"],!1),e,{"else":s,block:a},{})}function r(t,e){return t.w("cart-icon")}function o(t,e){return t.w("acc-finder-spinner")}function s(t,e){return t.f(e.get(["displayName"],!1),e,"h")}function a(t,e){return t.w("Adding")}function l(t,e){return t.w("Added to Cart")}return t.register("sc-accessory-finder/dust/accessory-finder-button",e),e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,r.__dustBody=!0,o.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,l.__dustBody=!0,e}(t),i=function(i,n){if(!n)throw new Error("wrong number of args for render");return t.render(e,i,n)};return i.template=e,i}}),define("dust-loader!sc-accessory-finder/dust/carousel-item",function(){return function(t){var e=function(t){function e(t,e){return t.w('<div class="product"><div class="product-image">').x(e.getPath(!1,["media","primaryImage","path"]),e,{"else":i,block:n},{}).w('</div><div class="product-details"><div class="product-name"><a href="').f(e.getPath(!0,["url"]),e,"h").w('" data-product-link="product-name">').f(e.getPath(!1,["names","short"]),e,"h").w("</a></div>").x(e.get(["isPromotionSuggestedPs4Xbone"],!1),e,{"else":r,block:a},{}).w('<div class="priceblock">').s(e.get(["price"],!1),e,{block:u},{}).x(e.getPath(!1,["buttonState","purchasable"]),e,{block:g},{}).w("</div></div></div>")}function i(t,e){return t.w('<a href="').f(e.getPath(!0,["url"]),e,"h").w('" data-product-link="product-image"><div class="missing-image-small"></div></a>')}function n(t,e){return t.w('<a href="').f(e.getPath(!0,["url"]),e,"h").w('" data-product-link="product-image"><img src="').f(e.get(["piscesPrefix"],!1),e,"h").w("/image2/").f(e.getPath(!1,["media","primaryImage","path"]),e,"h").w(';canvasHeight=200;canvasWidth=200"/></a>')}function r(t,e){return t.x(e.getPath(!1,["customerRatings","averageRating"]),e,{"else":o,block:s},{})}function o(t,e){return t.w('<span class="not-reviewed">Not Yet Reviewed</span>')}function s(t,e){return t.w('<div class="bbystars-small-yellow"><div class="fill" style="width: ').f(e.getPath(!1,["customerRatings","averageRating","percent0To100"]),e,"h").w('%"></div></div><div class="product-rating"><span>').f(e.getPath(!1,["customerRatings","averageRating","score"]),e,"h").w(' of 5</span><span> (<a href="').f(e.getPath(!0,["url"]),e,"h").w('#tab=reviews">').f(e.getPath(!1,["customerRatings","totalCount"]),e,"h").w(" reviews</a>)</span>")}function a(t,e){return t.x(e.getPath(!1,["dates","streetDate"]),e,{block:l},{})}function l(t,e){return t.w('<div class="release-date emphasized-copy">Release Date:</div><div class="street-date">').h("eq",e,{"else":c,block:d},{key:e.getPath(!1,["dates","streetDate"]),value:"notAnnounced"},"h").w("</div>")}function c(t,e){return t.f(e.getPath(!1,["dates","streetDate"]),e,"h")}function d(t,e){return t.w("Not Yet Announced")}function u(t,e){return t.x(e.get(["currentPrice"],!1),e,{block:h},{})}function h(t,e){return t.w('<div class="').h("eq",e,{block:p},{key:e.get(["pricingType"],!1),value:"onSale"},"h").w('price">').h("eq",e,{block:f},{key:e.get(["pricingType"],!1),value:"onSale"},"h").w("$").f(e.getPath(!0,["currentPrice"]),e,"h").w("</div>")}function p(t,e){return t.w("alert-color ")}function f(t,e){return t.w('<span class="emphasized-copy">Sale: </span>')}function g(t,e){return t.w('<div class="add-to-cart"></div>')}return t.register("sc-accessory-finder/dust/carousel-item",e),e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,r.__dustBody=!0,o.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,l.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,u.__dustBody=!0,h.__dustBody=!0,p.__dustBody=!0,f.__dustBody=!0,g.__dustBody=!0,e}(t),i=function(i,n){if(!n)throw new Error("wrong number of args for render");return t.render(e,i,n)};return i.template=e,i}}),define("sc-accessory-finder/javascript/views/carousel-item-view",["require","dust","jquery","lodash","backbone","eventmanager","dust-loader!sc-accessory-finder/dust/accessory-finder-button","dust-loader!sc-accessory-finder/dust/carousel-item","sc-meta-layer/javascript/metaLayer"],function(t){var e=t("dust"),i=t("jquery"),n=t("lodash"),r=t("backbone"),o=t("eventmanager"),s=t("dust-loader!sc-accessory-finder/dust/accessory-finder-button")(e),a=t("dust-loader!sc-accessory-finder/dust/carousel-item")(e),l=t("sc-meta-layer/javascript/metaLayer"),c=r.View.extend({addedToCart:null,events:{"click [rel=addToCart]":"onAddToCart","click .product-name a":"onProductClick","click .product-image a":"onProductClick"},initialize:function(t){this.render(),this.listenTo(this.model,"change:addedToCart",this.renderButton),this.listenTo(this.model,"change:adding",this.renderButton),this.listenTo(this.model,"change",this.render)},render:function(){var t=this.model.toJSON();("suggestedPS4"===t.promotionName||"suggestedXboxOne"===t.promotionName)&&(t.isPromotionSuggestedPs4Xbone=!0),t.piscesPrefix=l.get("page_isSsl")?l.get("env_piscesSSL"):l.get("env_pisces"),t.url=(l.get("env_appServer")||"")+t.url,a(t,n.bind(function(t,e){t||(this.$el.html(e),this.renderButton())},this))},renderButton:function(t,e){var i={skuId:this.model.get("skuId"),productId:this.model.get("productId"),selected:this.model.get("warrantySelection"),addedToCart:this.model.get("addedToCart"),adding:this.model.get("adding")};i=n.extend(i,this.model.get("buttonState"));var r=this.model.get("addedToCart");r&&i.selected===r.skuId&&(i.addedToCart=!0),s(i,n.bind(function(t,e){t||this.$(".add-to-cart").html(e)},this))},onAddToCart:function(t){var e=i(t.currentTarget);if(t.preventDefault(),t.stopPropagation(),!e.hasClass("inactive")){var n=e.data();this.model.addToCart(n),i(".no-thanks-go-to-cart").remove()}},onProductClick:function(t){var e=i(t.target).data(),n=i(t.target).attr("data-product-link");o.trigger("accessoryFinder:productClick",[{location:"accessoryFinder",action:"click:"+n,item:e}])}});return c}),define("dust-loader!sc-accessory-finder/dust/carousel",function(){return function(t){var e=function(t){function e(t,e){return t.w('<div class="clearfix product-band-header"><h3>').f(e.get(["accessoriesHeader"],!1),e,"h").w('</h3><div class="product-band-page-counter" data-sku-count="').h("size",e,{},{key:e.get(["entries"],!1)},"h").w('"><span class="current-counter">Page ').f(e.get(["currentPage"],!1),e,"h").w('</span> of <span class="total-pages">').f(e.get(["pageCount"],!1),e,"h").w('</span></div></div><div class="product-band-container-af"><div class="product-band-arrow-area').h("lt",e,{block:i},{key:e.get(["entriesLength"],!1),value:4},"h").w('"><div class="product-band-left-arrow" title="left arrow"></div><div class="product-band-right-arrow" title="right arrow"></div></div><div class="product-band-scroller"><div class="product-band-product-area-af"></div></div></div>')}function i(t,e){return t.w(" hidden-arrows")}return t.register("sc-accessory-finder/dust/carousel",e),e.__dustBody=!0,i.__dustBody=!0,e}(t),i=function(i,n){if(!n)throw new Error("wrong number of args for render");return t.render(e,i,n)};return i.template=e,i}}),define("sc-accessory-finder/javascript/views/carousel-view",["require","dust","jquery","lodash","backbone","./carousel-item-view","dust-loader!sc-accessory-finder/dust/carousel"],function(t){var e=t("dust"),i=t("jquery"),n=t("lodash"),r=t("backbone"),o=t("./carousel-item-view"),s=t("dust-loader!sc-accessory-finder/dust/carousel")(e),a=r.View.extend({events:{"click .product-band-left-arrow":"onLeftScroll","click .product-band-right-arrow":"onRightScroll","click .plan-details":"onClickPlanDetails"},initialize:function(){this.childViews={},this.listenTo(this.model,"change",this.onChange),this.render(),this.listenTo(this.model.items,"change:addedToCart",this.onSetItemAddedToCart)},render:function(){var t=this;n.each(this.childViews,function(t){t.$el.detach()});var e=this.model.toJSON();e.epItems.length?s(e,n.bind(function(t,e){t||(this.$el.html(e),this.model.items.getValidAccessories().each(function(t,e){if(this.isInRange(e)){var i=new o({model:t});this.childViews[t.get("skuId")]=i,this.$(".product-band-product-area-af").append(i.el)}},this))},this)):t.$el.html(""),i.colorbox&&i.colorbox.resize()},isInRange:function(t){var e=this.model.get("currentPage"),i=this.model.get("maxItems"),n=e*i-i;return t>=n&&n+i>t},onSetItemAddedToCart:function(t){this.model.setAddedToCartValue(t.get("skuId"),!0)},onChange:function(){this.render()},onLeftScroll:function(t){t.stopPropagation(),this.model.previousPage()},onRightScroll:function(t){t.stopPropagation(),this.model.nextPage()},onClickPlanDetails:function(t){t.preventDefault(),t.stopPropagation();var e=i(t.target),n=e[0].href;window.trackEvent&&window.trackEvent.api.trackNewWindow("see plan details","protect it","BTPPlanPDF","lbox"),window.open(n,"BTPPlanPDF","toolbar=0,location=0,directories=0,status=0,menubar=0,scrollbars=1,resizable=1,width=800,height=550,left=50,top=200")}});return a}),define("dust-loader!sc-accessory-finder/dust/accessory-finder-warranty-option",function(){return function(t){var e=function(t){function e(t,e){return t.w('<div class="option"><input type="radio" id="gsp-sku-').f(e.getPath(!1,["warranty","skuId"]),e,"h").w("-").f(e.get(["driverId"],!1),e,"h").w("\" name='driver-sku-").f(e.get(["driverId"],!1),e,"h").w("' ").x(e.get(["selected"],!1),e,{block:i},{}).w('><label for="gsp-sku-').f(e.getPath(!1,["warranty","skuId"]),e,"h").w("-").f(e.get(["driverId"],!1),e,"h").w('">').f(e.getPath(!1,["warranty","shortLabel"]),e,"h").w('&nbsp;-&nbsp;<span class="price">').f(e.getPath(!1,["warranty","price","eachPrice"]),e,"h").w("</span></label></div>")}function i(t,e){return t.w("checked")}return t.register("sc-accessory-finder/dust/accessory-finder-warranty-option",e),e.__dustBody=!0,i.__dustBody=!0,e}(t),i=function(i,n){if(!n)throw new Error("wrong number of args for render");return t.render(e,i,n)};return i.template=e,i}}),define("sc-accessory-finder/javascript/views/warranty-view",["require","dust","lodash","backbone","eventmanager","dust-loader!sc-accessory-finder/dust/accessory-finder-warranty-option"],function(t){var e=t("dust"),i=t("lodash"),n=t("backbone"),r=t("eventmanager"),o=t("dust-loader!sc-accessory-finder/dust/accessory-finder-warranty-option")(e),s=n.View.extend({driverModel:null,events:{"change input[type='radio']":"changeWarrantySelection"},initialize:function(t){i.bindAll(this),this.driverModel=t.driverModel},render:function(){var t={warranty:this.model.toJSON()};return o(t,i.bind(function(t,e){t||this.$el.html(e)},this)),this},changeWarrantySelection:function(t){r.trigger("analytics:radioButtonClick:protection",this.model.toJSON()),this.driverModel.set("warrantySelection",this.model.get("skuId"))}});return s}),define("dust-loader!sc-accessory-finder/dust/accessory-finder-warranties",function(){return function(t){var e=function(t){function e(t,e){return t.s(e.getPath(!1,["warranties","0"]),e,{block:i},{})}function i(t,e){return t.nx(e.get(["isAppleCare"],!1),e,{block:n},{}).x(e.get(["isAppleCare"],!1),e,{block:d},{})}function n(t,e){return t.w('<div class="warranties-inner"><div class="warranty-header">').x(e.get(["isSmartCare"],!1),e,{block:r},{}).x(e.get(["isGeekSquad"],!1),e,{block:o},{}).x(e.get(["isGSP911"],!1),e,{block:s},{}).w('</div><div class="clearfix inner-content"><div class="description">').p("sc-accessory-finder/dust/warranty-description",e,e,{}).w('</div><div class="plans"><div class="plan-type"><div class="accidental-heading"></div><ul class="accidental"></ul></div><div class="plan-type">').x(e.get(["isGSP911"],!1),e,{block:a},{}).w('<div class="standard-block ').x(e.get(["isGSP911"],!1),e,{block:c},{}).w('"><div class="standard-heading"></div><ul class="standard"></ul></div></div><div class="plan-type"><div class="replacement-heading"></div><ul class="replacement"></ul></div><div class="add-to-cart"></div></div></div></div>')}function r(t,e){return t.w('<div class="banner" role="banner"><div class="logo smartcare"></div><div class="headline smartcare"></div></div>')}function o(t,e){return t.w('<div class="gsp-banner" role="banner"><div class="gsp-logo"></div></div>')}function s(t,e){return t.w('<div class="gsp-banner" role="banner"><div class="gsp-logo"></div></div>')}function a(t,e){return t.nx(e.get(["isReplacementPlan"],!1),e,{block:l},{})}function l(t,e){return t.w('<a href="javascript:void(0)" class="gsp911-standard">See plans without accidental protection</a>')}function c(t,e){return t.w("hidden")}function d(t,e){return t.w('<div class="apple-care-block"><div class="care-details-block">').p("sc-accessory-finder/dust/apple-care-description",e,e,{}).w('</div><div class="care-options-block"><div class="apple-care-logo"></div><div class="option-short-label">').f(e.getPath(!0,["shortLabel"]),e,"h").w('</div><div class="option-price">').f(e.getPath(!0,["price","eachPrice"]),e,"h").w('</div><div class="add-to-cart"></div></div></div>')}return t.register("sc-accessory-finder/dust/accessory-finder-warranties",e),e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,r.__dustBody=!0,o.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,l.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,e}(t),i=function(i,n){if(!n)throw new Error("wrong number of args for render");return t.render(e,i,n)};return i.template=e,i}}),define("dust-loader!sc-accessory-finder/dust/accessory-finder-warranties-accidental",function(){return function(t){var e=function(t){function e(t,e){return t.x(e.get(["isGSP911"],!1),e,{"else":i,block:n},{})}function i(t,e){return t.w("<h4>Accidental Protection <span>(Covers drops & spills)</span></h4>")}function n(t,e){return t.w('<h4 class="gsp-911-plan-title">Protect & Support Plus</span></h4><div class="gsp-911-plan-subtitle">Includes coverage for accidents</div>')}return t.register("sc-accessory-finder/dust/accessory-finder-warranties-accidental",e),e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,e}(t),i=function(i,n){if(!n)throw new Error("wrong number of args for render");return t.render(e,i,n)};return i.template=e,i}}),define("dust-loader!sc-accessory-finder/dust/accessory-finder-warranties-standard",function(){return function(t){var e=function(t){function e(t,e){return t.x(e.get(["isGSP911"],!1),e,{"else":i,block:n},{})}function i(t,e){return t.w("<h4>Standard Protection</h4>")}function n(t,e){return t.w('<h4 class="gsp-911-plan-title">Protect & Support</h4><div class="gsp-911-plan-subtitle">No coverage for accidents</div>')}return t.register("sc-accessory-finder/dust/accessory-finder-warranties-standard",e),e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,e}(t),i=function(i,n){if(!n)throw new Error("wrong number of args for render");return t.render(e,i,n)};return i.template=e,i}}),define("dust-loader!sc-accessory-finder/dust/replacement-header",function(){return function(t){var e=function(t){function e(t,e){return t.w("<h4>Replacement Plans</h4>")}return t.register("sc-accessory-finder/dust/replacement-header",e),e.__dustBody=!0,e}(t),i=function(i,n){if(!n)throw new Error("wrong number of args for render");return t.render(e,i,n)};return i.template=e,i}}),define("dust-loader!sc-accessory-finder/dust/warranty-button",function(){return function(t){var e=function(t){function e(t,e){return t.w('<a href="javascript:void(0)" data-sku-id="').f(e.get(["skuId"],!1),e,"h").w('"  data-product-id="').f(e.get(["productId"],!1),e,"h").w('" rel="addToCart" class="small-primary-action-button small-primary-action-button-af ').x(e.get(["addedToCart"],!1),e,{block:i},{}).x(e.get(["disabled"],!1),e,{block:n},{}).w('">').x(e.get(["addedToCart"],!1),e,{"else":r,block:c},{}).w("</a>")}function i(t,e){return t.w("inactive")}function n(t,e){return t.w("inactive")}function r(t,e){return t.w('<span class="front-icon ').x(e.get(["adding"],!1),e,{"else":o,block:s},{}).w('"></span>').x(e.get(["adding"],!1),e,{"else":a,block:l},{})}function o(t,e){return t.w("cart-icon")}function s(t,e){return t.w("acc-finder-spinner")}function a(t,e){return t.w("Add to Cart")}function l(t,e){return t.w("Adding")}function c(t,e){return t.w("Added to Cart")}return t.register("sc-accessory-finder/dust/warranty-button",e),e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,r.__dustBody=!0,o.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,l.__dustBody=!0,c.__dustBody=!0,e}(t),i=function(i,n){if(!n)throw new Error("wrong number of args for render");return t.render(e,i,n)};return i.template=e,i}}),define("dust-loader!sc-accessory-finder/dust/apple-care-warranties",function(){return function(t){var e=function(t){function e(t,e){return t.s(e.getPath(!1,["warranties","0"]),e,{block:i},{})}function i(t,e){return t.w('<div class="apple-care-block"><div class="care-details-block">').p("sc-accessory-finder/dust/apple-care-description",e,e,{}).w('</div><div class="care-options-block"><div class="apple-care').h("eq",e,{block:n},{key:r,value:"APPLECAREPLUS"},"h").w('-logo"></div><div class="option-short-label">').f(e.getPath(!0,["shortLabel"]),e,"h").w('</div><div class="option-price">').f(e.getPath(!0,["price","eachPrice"]),e,"h").w('</div><div class="button-block"><a href="javascript:void(0)" class="btn btn-primary btn-xl btn-block add-apple-care-to-cart"><span class="ficon-cart"></span><span class="add-to-cart-label">Add to Cart</span></a></div></div></div>')}function n(t,e){return t.w("-plus")}function r(t,e){return t.f(e.getPath(!0,["warrantySkuType"]),e,"h")}return t.register("sc-accessory-finder/dust/apple-care-warranties",e),e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,r.__dustBody=!0,e}(t),i=function(i,n){if(!n)throw new Error("wrong number of args for render");return t.render(e,i,n)};return i.template=e,i}}),define("dust-loader!sc-accessory-finder/dust/warranty-description",function(){return function(t){var e=function(t){function e(t,e){return t.w('<div class="title">').h("select",e,{block:i},{key:e.get(["dynamicGSPContent"],!1)},"h").w('</div><ul class="description-points">').h("select",e,{block:w},{key:e.get(["dynamicGSPContent"],!1)},"h").w("</ul>").s(e.getPath(!1,["warranties","0"]),e,{block:R},{})}function i(t,e){return t.h("eq",e,{block:n},{value:"TELEVISIONS"},"h").h("eq",e,{block:r},{value:"OTHER_HOME_THEATRE"},"h").h("eq",e,{block:o},{value:"LAPTOPS"},"h").h("eq",e,{block:s},{value:"OTHER_COMPUTING"},"h").h("eq",e,{block:a},{value:"TABLETS"},"h").h("eq",e,{block:l},{value:"LARGE_APPLIANCES"},"h").h("eq",e,{block:c},{value:"CELL_PHONES"},"h").h("eq",e,{block:d},{value:"GAMING_CONSOLES"},"h").h("eq",e,{block:u},{value:"HANDHELD_GAMING"},"h").h("eq",e,{block:h},{value:"CAR_ELECTRONICS"},"h").h("eq",e,{block:p},{value:"DSLR"},"h").h("eq",e,{block:f},{value:"OTHER_DI"},"h").h("eq",e,{block:g},{value:"MP3"},"h").h("eq",e,{block:m},{value:"SMARTCARE"},"h").h("eq",e,{block:v},{value:"GSP_911"},"h").h("eq",e,{block:y},{value:"GSP_REPLACEMENT"},"h").h("none",e,{block:b},{},"h")}function n(t,e){return t.w("We’ll keep your new TV up and running")}function r(t,e){return t.w("We’ll keep your new purchase up and running")}function o(t,e){return t.w("We’ll keep your new laptop up and running")}function s(t,e){return t.w("We’ll keep your new purchase up and running")}function a(t,e){return t.w("We’ll keep your new tablet up and running")}function l(t,e){return t.w("We’ll keep your new appliance up and running")}function c(t,e){return t.w("We’ll safeguard your new cell phone")}function d(t,e){return t.w("We’ll keep your new console going strong")}function u(t,e){return t.w("We’ll keep your new device going strong")}function h(t,e){return t.w("We’ll keep your new purchase running smoothly")}function p(t,e){return t.w("We’ll keep your new camera going strong")}function f(t,e){return t.w("We’ll keep your new device going strong")}function g(t,e){return t.w("We’ll keep your new MP3 player up and running")}function m(t,e){return t.w("We’ll keep your new purchase up and running")}function v(t,e){return t.w("Get 24/7 Support and Hardware Protection")}function y(t,e){return t.w("If It Stops Working, We'll Replace It")}function b(t,e){return t.w("We’ll keep your new purchase up and running")}function w(t,e){return t.h("eq",e,{block:_},{value:"TELEVISIONS"},"h").h("eq",e,{block:k},{value:"OTHER_HOME_THEATRE"},"h").h("eq",e,{block:C},{value:"LAPTOPS"},"h").h("eq",e,{block:x},{value:"OTHER_COMPUTING"},"h").h("eq",e,{block:S},{value:"TABLETS"},"h").h("eq",e,{block:T},{value:"LARGE_APPLIANCES"},"h").h("eq",e,{block:P},{value:"CELL_PHONES"},"h").h("eq",e,{block:I},{value:"GAMING_CONSOLES"},"h").h("eq",e,{block:D},{value:"HANDHELD_GAMING"},"h").h("eq",e,{block:j},{value:"CAR_ELECTRONICS"},"h").h("eq",e,{block:E},{value:"DSLR"},"h").h("eq",e,{block:$},{value:"OTHER_DI"},"h").h("eq",e,{block:A},{value:"MP3"},"h").h("eq",e,{block:M},{value:"SMARTCARE"},"h").h("eq",e,{block:B},{value:"GSP_911"},"h").h("eq",e,{block:O},{value:"GSP_REPLACEMENT"},"h").h("none",e,{block:q},{},"h")}function _(t,e){return t.w('<li>Extend and enhance your manufacturer’s warranty</li><li>100% parts and labor covered. No hidden fees</li><li>Pixel repair and burn-in coverage</li><li>Free house calls for TVs 42" and larger</li>')}function k(t,e){return t.w("<li>Extend and enhance your manufacturer’s warranty</li><li>100% parts and labor covered. No hidden fees</li><li>Power surge repair</li><li>20,000 agents with over 20 years of experience</li>")}function C(t,e){return t.w("<li>Extend and enhance your manufacturer’s warranty</li><li>Covers drops and spills</li><li>100% parts and labor covered. No hidden fees</li><li>One-time battery replacement</li>");
}function x(t,e){return t.w("<li>Extend and enhance your manufacturer’s warranty</li><li>Covers drops and spills (with Accidental Damage Plan)</li><li>100% parts and labor covered. No hidden fees</li><li>20,000 agents with over 20 years of experience</li>")}function S(t,e){return t.w("<li>Extend and enhance your manufacturer’s warranty</li><li>Covers drops and spills</li><li>One time battery replacement</li><li>Pixel Repair and burn in coverage</li>")}function T(t,e){return t.w("<li>Extend and enhance your manufacturer’s warranty</li><li>100% parts and labor covered. No hidden fees</li><li>Power surge protection.</li><li>Free house calls & reinstallation if we originally installed your appliance</li>")}function P(t,e){return t.w("<li>Extend and enhance your manufacturer’s warranty</li><li>Covers drops and spills</li><li>One time battery replacement</li><li>Service fees will apply</li>")}function I(t,e){return t.w("<li>Extend and enhance your manufacturer’s warranty</li><li>Covers drops and spills (Standard Protection Excluded)</li><li>One-time controller replacement</li><li>20,000 agents with over 20 years of experience</li>")}function D(t,e){return t.w("<li>Extend and enhance your manufacturer’s warranty</li><li>Covers drops and spills (Standard Protection Excluded)</li><li>One-time battery replacement</li><li>20,000 agents with over 20 years of experience</li>")}function j(t,e){return t.w("<li>Extend and enhance your manufacturer’s warranty</li><li>100% parts and labor covered. No hidden fees</li><li>Free reinstallation if we originally installed it</li><li>20,000 agents with over 20 years of experience</li>")}function E(t,e){return t.w("<li>Extend and enhance your manufacturer’s warranty</li><li>Covers drops and spills</li><li>Free annual maintenance</li><li>One-time battery replacement</li>")}function $(t,e){return t.w("<li>Extend and enhance your manufacturer’s warranty</li><li>Covers drops and spills</li><li>100% parts and labor covered. No hidden fees</li><li>One-time battery replacement</li>")}function A(t,e){return t.w("<li>Extend and enhance your manufacturer’s warranty</li><li>Covers drops and spills</li><li>100% parts and labor covered. No hidden fees</li><li>One-time battery replacement</li>")}function M(t,e){return t.w("<li>Extend and enhance your manufacturer's warranty</li><li>100% parts and labor covered. No hidden fees</li><li>Convenient mail-in claim support (in-store service not available)</li><li>20,000 agents with over 20 years of experience</li>")}function B(t,e){return t.w("<li>Coverage for accidental drops, spills or cracks (Protect and Support Plus only)</li><li>100% parts and labor coverage with no hidden fees</li><li>One-time original battery replacement</li><li>24/7/365 Geek Squad Agent support</li><li>Unlimited setups, tune-ups and virus removal</li>")}function O(t,e){return t.w("<li>Extend and enhance your manufacturer's warranty</li><li>Power surge coverage</li><li>Replace, not repair, your defective product with a product of like kind and quality</li>")}function q(t,e){return t.w("<li>Extend and enhance your manufacturer's warranty</li><li>20,000 agents with over 20 years of experience</li><li>We will fix it or replace it.</li>")}function R(t,e){return t.w('<a class="plan-details" href="').f(e.get(["env_appServer"],!1),e,"h").f(e.get(["planDetailsPageLink"],!1),e,"h").w("\">See all the ways you're covered</a>")}return t.register("sc-accessory-finder/dust/warranty-description",e),e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,r.__dustBody=!0,o.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,l.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,u.__dustBody=!0,h.__dustBody=!0,p.__dustBody=!0,f.__dustBody=!0,g.__dustBody=!0,m.__dustBody=!0,v.__dustBody=!0,y.__dustBody=!0,b.__dustBody=!0,w.__dustBody=!0,_.__dustBody=!0,k.__dustBody=!0,C.__dustBody=!0,x.__dustBody=!0,S.__dustBody=!0,T.__dustBody=!0,P.__dustBody=!0,I.__dustBody=!0,D.__dustBody=!0,j.__dustBody=!0,E.__dustBody=!0,$.__dustBody=!0,A.__dustBody=!0,M.__dustBody=!0,B.__dustBody=!0,O.__dustBody=!0,q.__dustBody=!0,R.__dustBody=!0,e}(t),i=function(i,n){if(!n)throw new Error("wrong number of args for render");return t.render(e,i,n)};return i.template=e,i}}),define("dust-loader!sc-accessory-finder/dust/apple-care-description",function(){return function(t){var e=function(t){function e(t,e){return t.w('<div class="care-title">').h("select",e,{block:i},{key:e.get(["dynamicGSPContent"],!1)},"h").w('</div><p class="care-details">').h("select",e,{block:l},{key:e.get(["dynamicGSPContent"],!1)},"h").w('</p><a class="plan-details" href="').f(e.get(["env_appServer"],!1),e,"h").f(e.get(["planDetailsPageLink"],!1),e,"h").w('">Learn more about AppleCare').h("eq",e,{block:f},{key:g,value:"APPLECAREPLUS"},"h").w("</a>")}function i(t,e){return t.h("eq",e,{block:n},{value:"APPLETV"},"h").h("eq",e,{block:r},{value:"MAC"},"h").h("eq",e,{block:o},{value:"IPOD"},"h").h("eq",e,{block:s},{value:"IPAD"},"h").h("eq",e,{block:a},{value:"APPLE_WATCH"},"h")}function n(t,e){return t.w("Protection for your Apple TV")}function r(t,e){return t.w("Protection for your Mac")}function o(t,e){return t.w("Protection for your iPod touch")}function s(t,e){return t.w("Protection for your iPad")}function a(t,e){return t.w("Protection for your Apple Watch")}function l(t,e){return t.h("eq",e,{block:c},{value:"APPLETV"},"h").h("eq",e,{block:d},{value:"MAC"},"h").h("eq",e,{block:u},{value:"IPOD"},"h").h("eq",e,{block:h},{value:"IPAD"},"h").h("eq",e,{block:p},{value:"APPLE_WATCH"},"h")}function c(t,e){return t.w("Every Apple TV comes with a one-year limited warranty and 90 days of telephone technical support. The AppleCare Protection Plan for Apple TV extends your coverage to two years from the original purchase date of your Apple TV.")}function d(t,e){return t.w("Every Mac comes with a one-year limited warranty and 90 days of telephone technical support. The AppleCare Protection Plan for Mac extends your coverage to three years from the original purchase date of your Mac.")}function u(t,e){return t.w("AppleCare+ for iPod touch extends your repair coverage and technical support to two years from the original purchase date of your iPod. And it adds coverage for up to two incidents of accidental damage from handling, each subject to a $29 service fee plus applicable tax.")}function h(t,e){return t.w("AppleCare+ for iPad extends your repair coverage and technical support to two years from the original purchase date of your iPad. And it adds coverage for up to two incidents of accidental damage from handling, each subject to a $49 service fee plus applicable tax.")}function p(t,e){return t.w("AppleCare+ for Apple Watch and Apple Watch Sport extends your coverage to two years from the original purchase date and adds up to two incidents of accidental damage coverage, each subject to a service fee ($69 for Apple Watch Sport, $79 for Apple Watch) plus applicable tax.")}function f(t,e){return t.w("+")}function g(t,e){return t.f(e.getPath(!0,["warrantySkuType"]),e,"h")}return t.register("sc-accessory-finder/dust/apple-care-description",e),e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,r.__dustBody=!0,o.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,l.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,u.__dustBody=!0,h.__dustBody=!0,p.__dustBody=!0,f.__dustBody=!0,g.__dustBody=!0,e}(t),i=function(i,n){if(!n)throw new Error("wrong number of args for render");return t.render(e,i,n)};return i.template=e,i}}),define("sc-accessory-finder/javascript/views/warranties-view",["require","dust","jquery","lodash","backbone","eventmanager","./warranty-view","dust-loader!sc-accessory-finder/dust/accessory-finder-warranties","dust-loader!sc-accessory-finder/dust/accessory-finder-warranties-accidental","dust-loader!sc-accessory-finder/dust/accessory-finder-warranties-standard","dust-loader!sc-accessory-finder/dust/replacement-header","dust-loader!sc-accessory-finder/dust/warranty-button","dust-loader!sc-accessory-finder/dust/apple-care-warranties","sc-meta-layer/javascript/metaLayer","dust-loader!sc-accessory-finder/dust/warranty-description","dust-loader!sc-accessory-finder/dust/apple-care-description"],function(t){var e=t("dust"),i=t("jquery"),n=t("lodash"),r=t("backbone"),o=t("eventmanager"),s=t("./warranty-view"),a=t("dust-loader!sc-accessory-finder/dust/accessory-finder-warranties")(e),l=t("dust-loader!sc-accessory-finder/dust/accessory-finder-warranties-accidental")(e),c=t("dust-loader!sc-accessory-finder/dust/accessory-finder-warranties-standard")(e),d=t("dust-loader!sc-accessory-finder/dust/replacement-header")(e),u=t("dust-loader!sc-accessory-finder/dust/warranty-button")(e),h=t("dust-loader!sc-accessory-finder/dust/apple-care-warranties")(e),p=t("sc-meta-layer/javascript/metaLayer");t("dust-loader!sc-accessory-finder/dust/warranty-description")(e),t("dust-loader!sc-accessory-finder/dust/apple-care-description")(e);var f=r.View.extend({events:{"click [rel=addToCart]":"onClickAddToCart","click .plan-details":"onClickPlanDetails","click .add-apple-care-to-cart":"onClickAddAppleCareToCart","click .gsp911-standard":"onClickGSP911Standard"},initialize:function(t){n.bindAll(this),this.listenTo(this.model,"change:warrantySelection",this.renderSelected),this.listenTo(this.model,"change:addingToCart",this.renderButton),this.render()},render:function(){this.model.get("warranties").length>0?this.isAppleCare()?this.renderAppleCareWarranties():this.renderDefaultWarranties():this.$el.hide()},renderDefaultWarranties:function(){var t=this.model.toJSON();return t.isGeekSquad=this.isGeekSquad(),t.isSmartCare=this.isSmartCare(),t.isGSP911=this.isGSP911(),t.isReplacementPlan=this.isReplacementPlan(),t.env_appServer=p.get("env_appServer")||"",a(t,n.bind(function(t,e){t||this.$el.html(e),this.renderWarrantyOptions(),this.renderButton()},this)),this},renderAppleCareWarranties:function(){var t=this.model.toJSON();return t.env_appServer=p.get("env_appServer")||"",h(t,n.bind(function(t,e){t||this.$el.html(e)},this)),this},renderWarrantyOptions:function(){var t=this.$(".plans .standard").empty(),e=this.$(".plans .accidental").empty(),i=this.$(".plans .replacement").empty(),o=!1,a=!1,l=!1;n.each(this.model.get("warranties"),function(n){var c=new r.Model(n);this.warrantyView=new s({model:c,driverModel:this.model,tagName:"li"}),"ACCIDENTAL"===c.get("warrantyType")?(a||(this.renderAccidentalHeading(),a=!0),e.append(this.warrantyView.render().el)):"REPLACEMENT"===c.get("warrantyType")?(l||(this.renderReplacementHeading(),l=!0),i.append(this.warrantyView.render().el)):(o||(this.renderStandardHeading(),o=!0),t.append(this.warrantyView.render().el))},this)},renderStandardHeading:function(){var t={isGSP911:this.isGSP911()};c(t,n.bind(function(t,e){t||this.$(".plans .standard-heading").prepend(e)},this))},renderAccidentalHeading:function(){var t={isGSP911:this.isGSP911()};l(t,n.bind(function(t,e){t||this.$(".plans .accidental-heading").prepend(e)},this))},renderReplacementHeading:function(){d({},n.bind(function(t,e){t||this.$(".plans .replacement-heading").prepend(e)},this))},renderSelected:function(){this.renderButton()},renderButton:function(){var t={selected:this.model.get("warrantySelection"),adding:this.model.get("addingToCart"),disabled:!1},e=n.find(this.model.get("warranties"),"addedToCart");e&&t.selected===e.skuId&&(t.addedToCart=!0),t.disabled=n.isUndefined(t.selected),u(t,n.bind(function(t,e){t||this.$(".add-to-cart").html(e)},this))},onClickAddToCart:function(t){var e=this.model.get("warrantySelection");i(".no-thanks-go-to-cart").html(""),i(".no-thanks-go-to-cart").remove(),e&&this.model.addToCart({skuId:e})},onClickAddAppleCareToCart:function(t){t.preventDefault();var e=i(t.target).hasClass("add-apple-care-to-cart")?i(t.target):i(t.target).parent("a"),n=this.model.get("warranties")[0].skuId;return e.text("Adding"),e.addClass("disabled"),e.removeClass("add-apple-care-to-cart"),this.model.addToCart({skuId:n}).bind(this).then(function(){i(".no-thanks-go-to-cart").html(""),i(".no-thanks-go-to-cart").remove(),e.find(".ficon-cart").removeClass("ficon-cart"),e.find(".add-to-cart-label").text(""),e.text("Added to Cart"),o.trigger("accessoryFinder:addedToCart",this.model.get("warranties")[0])}).caught(function(){e.text("Add to Cart"),e.removeClass("disabled"),e.addClass("add-apple-care-to-cart")})},onClickPlanDetails:function(t){t.preventDefault(),t.stopPropagation();var e=i(t.target),n=e[0].href;window.trackEvent&&window.trackEvent.api.trackNewWindow("see plan details","protect it","BTPPlanPDF","lbox"),window.open(n,"BTPPlanPDF","toolbar=0,location=0,directories=0,status=0,menubar=0,scrollbars=1,resizable=1,width=800,height=550,left=50,top=200")},onClickGSP911Standard:function(t){var e=i(".standard-block"),n=i(".gsp911-standard");e.hasClass("hidden")&&(e.removeClass("hidden"),n.addClass("hidden")),i.colorbox.resize()},getWarrantySkuType:function(){return this.model.get("warranties")[0].warrantySkuType},getWarrantyType:function(){return this.model.get("warranties")[0].warrantyType},isGeekSquad:function(){return"BTP"===this.getWarrantySkuType()},isSmartCare:function(){return"SCP"===this.getWarrantySkuType()},isAppleCare:function(){return"APPLECARE"===this.getWarrantySkuType()||"APPLECAREPLUS"===this.getWarrantySkuType()},isGSP911:function(){return"GSP911"===this.getWarrantySkuType()},isReplacementPlan:function(){return"REPLACEMENT"===this.getWarrantyType()}});return f}),define("sc-add-to-cart/javascript/add-to-cart-helper",["require","jquery","lodash","bluebird","eventmanager"],function(t){function e(t){return h.trigger("addToCart:adding",t),i(t),u.resolve(n(t)).then(function(e){var i=r(e,t);return e.error?(h.trigger("addToCart:done:fail",i),u.reject(i)):(h.trigger("addToCart:done:success",i),h.trigger("addToCart:done:successInfo",t),u.resolve(i))}).caught(function(e){var i=o(e,t);return h.trigger("addToCart:done:fail",i),u.reject(i)}).lastly(function(){h.trigger("addToCart:done",t)})}function i(t){if("object"!=typeof t||"string"!=typeof t.skuId)throw new TypeError("addToCart must be passed an object with valid SKU information. OPTIONS PASSED: "+JSON.stringify(t))}function n(t){return c.ajax({type:"POST",url:"/cartitems/cart/",dataType:"json",contentType:"application/json",data:JSON.stringify(l(t))})}function r(t,e){return{product:{skuId:t.skuId,productId:e.productId},quantity:t.quantity,commerceItemId:t.commerceItemId,isHaccs:t.isHaccs,isICR:t.isICR,error:t.error,errorCode:t.errorCode,tryagainMsg:t.tryagainMsg,msg:t.msg,messageKey:t.messageKey,requestOptions:e}}function o(t,e){var i=a(e);return t.error&&t.msg?i=t:s(t.responseText)&&(i=JSON.parse(t.responseText)),d.merge(i,{product:{skuId:e.skuId,productId:e.productId}}),e.sellerId&&(i.sellerId=e.sellerId),i}function s(t){var e;try{e=JSON.parse(t)}catch(i){return!1}return void 0!==e&&void 0!==e.error&&void 0!==e.msg}function a(t){return d.pick({error:!0,msg:"There was a problem adding your product to cart.",product:{skuId:t.skuId,productId:t.productId},sellerId:t.sellerId},d.identity)}function l(t){var e={skuId:t.skuId,quantity:t.quantity,lpnId:t.licensePlate,storeId:t.storeId,sellerId:t.sellerId,listingId:t.listingId,parentLineItemId:t.parentLineItemId,childType:t.childType},i=t.giftList;return i&&void 0!==i&&(e.giftItem={giftListId:i.giftlistId,giftListItemId:i.giftlistItemId,giftListType:i.giftlistType,firstName:i.listOwnerFirstName,lastName:i.listOwnerLastName,eventDescription:i.eventDescription,eventDate:i.eventDate}),e.sellerId&&!e.listingId&&delete e.sellerId,d.pick(e,d.identity)}var c=t("jquery"),d=t("lodash"),u=t("bluebird"),h=t("eventmanager");return{add:e,_validateOptions:i,_sendRequest:n,_translateResponse:r,_translateErrorResponse:o,_defaultErrorResponse:a,_isValidErrorResponseText:s,_buildRequestBody:l}}),function(t,e){"use strict";"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define("sc-add-to-cart/javascript/promise-queue",e):t.Queue=e()}(this,function(){"use strict";function t(t,e){this.pendingPromises=0,this.maxPendingPromises="undefined"!=typeof t?t:1/0,this.maxQueuedPromises="undefined"!=typeof e?e:1/0,this.queue=[]}var e="undefined"!=typeof Promise?Promise:function(){return{then:function(){throw new Error("Queue.configure() before use Queue")}}},i=function(){},n=function(t){return t&&"function"==typeof t.then?t:new e(function(e){e(t)})};return t.configure=function(t){e=t},t.prototype.add=function(t){var n=this;return new e(function(e,r,o){return n.queue.length>=n.maxQueuedPromises?void r(new Error("Queue limit reached")):(n.queue.push({promiseGenerator:t,resolve:e,reject:r,notify:o||i}),void n._dequeue())})},t.prototype.getPendingLength=function(){return this.pendingPromises},t.prototype.getQueueLength=function(){return this.queue.length},t.prototype._dequeue=function(){var t=this;if(this.pendingPromises>=this.maxPendingPromises)return!1;var e=this.queue.shift();return e?(this.pendingPromises++,n(e.promiseGenerator()).then(function(i){t.pendingPromises--,t._dequeue(),e.resolve(i)},function(i){t.pendingPromises--,t._dequeue(),e.reject(i)},function(t){e.notify(t)}),!0):!1},t}),define("sc-add-to-cart/javascript/addToCart",["require","jquery","sc-add-to-cart/javascript/add-to-cart-helper","sc-add-to-cart/javascript/promise-queue","bluebird"],function(t){var e=t("jquery"),i=t("sc-add-to-cart/javascript/add-to-cart-helper"),n=t("sc-add-to-cart/javascript/promise-queue"),r=t("bluebird");n.configure(r);var o=new n(1,1/0);return function(t){var n=e.Deferred();return o.add(function(){return i.add(t)}).then(function(t){n.resolve(t)}).caught(function(t){n.reject(t)}),n.promise()}}),define("sc-accessory-finder/javascript/models/gamers-club-model",["require","backbone","bluebird","sc-add-to-cart/javascript/addToCart"],function(t){var e=t("backbone"),i=t("bluebird"),n=t("sc-add-to-cart/javascript/addToCart");return e.Model.extend({addItemBySkuId:function(t){return i.resolve(n({skuId:""+t}))}})}),define("dust-loader!sc-accessory-finder/dust/gamers-club-unlocked",function(){return function(t){var e=function(t){function e(t,e){return t.w('<div class="gamers-club-banner" aria-label="My Best Buy Gamers Club Unlocked 20% OFF New Video Games"><div class="emphasized-copy gamers-close-button" aria-label="close">x</div><div class="promotion-details">').x(e.get(["promotionPrice"],!1),e,{block:i},{}).w('<span class="membership-label"> 2-YEAR MEMBERSHIP</span></div><div class="add-button" role="button"><a href="javascript:void(0)" class="btn btn-primary btn-xl btn-block add-to-cart-btn" data-sku-id="').f(e.get(["gamersClubUnlockedSku"],!1),e,"h").w('"><span class="ficon-cart"></span><span class="add-to-cart-label">Add to Cart</span></a></div><div class="product-details"><div class="product-data"><div class="added-to-cart"><span class="green-check-icon"></span>Added to cart</div><div class="product-description">').s(e.get(["hydratedSkuData"],!1),e,{block:n},{}).w('</div><div class="promotion-data">Join and get 20% off all new video games, starting today!</div></div></div></div><div class="in-store-activation">Activate in-store for savings on future purchases.</div></div><div class="footer gaming-footer"><a href="javascript:void(0)" class="go-to-cart"><span class="no-thanks-go-to-cart">No, thanks.</span> Go to cart &#8250;</a></div>')}function i(t,e){return t.w('<span class="emphasized-copy promotion-price">$').f(e.get(["promotionPrice"],!1),e,"h").w("</span>")}function n(t,e){return t.w('<div class="product-image">').x(e.getPath(!1,["media","primaryImage","path"]),e,{block:r},{}).w('</div><div class="product-price">').s(e.get(["price"],!1),e,{block:s},{}).w('<div class="gamers-club-label">Gamers Club Unlocked Price</div>').x(e.get(["discountedPrice"],!1),e,{block:l},{})}function r(t,e){return t.w('<img src="').f(e.get(["piscesPrefix"],!1),e,"h").w("/image2/").f(e.getPath(!1,["media","primaryImage","path"]),e,"h").w('" ').x(e.getPath(!1,["names","short"]),e,{block:o},{}).w("/>")}function o(t,e){return t.w('alt="').f(e.getPath(!1,["names","short"]),e,"h").w('"')}function s(t,e){return t.x(e.get(["currentPrice"],!1),e,{block:a},{})}function a(t,e){return t.w('<div class="regular-price-label">Reg. Price</div><div class="emphasized-copy current-price">$').f(e.getPath(!0,["currentPrice"]),e,"h").w("</div>")}function l(t,e){return t.w('<div class="emphasized-copy alert-color discounted-price">$').f(e.get(["discountedPrice"],!1),e,"h").w("</div>")}return t.register("sc-accessory-finder/dust/gamers-club-unlocked",e),e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,r.__dustBody=!0,o.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,l.__dustBody=!0,e}(t),i=function(i,n){if(!n)throw new Error("wrong number of args for render");return t.render(e,i,n)};return i.template=e,i}}),define("sc-accessory-finder/javascript/views/gamers-club-view",["require","dust","jquery","lodash","backbone","bluebird","eventmanager","sc-hydrate-sku/javascript/hydrateSku","../config","../models/gamers-club-model","dust-loader!sc-accessory-finder/dust/gamers-club-unlocked","sc-meta-layer/javascript/metaLayer"],function(t){var e=t("dust"),i=t("jquery"),n=t("lodash"),r=t("backbone"),o=t("bluebird"),s=t("eventmanager"),a=t("sc-hydrate-sku/javascript/hydrateSku"),l=t("../config"),c=t("../models/gamers-club-model"),d=t("dust-loader!sc-accessory-finder/dust/gamers-club-unlocked")(e),u=t("sc-meta-layer/javascript/metaLayer"),h=r.View.extend({className:"gamers-club-modal",events:{"click .add-to-cart-btn":"onAddToCartClick"},initialize:function(){this.getHydratedData().bind(this).then(this.render),this.gamersClubModel=new c},render:function(){var t=this.model.toJSON();t.piscesPrefix=u.get("page_isSsl")?u.get("env_piscesSSL"):u.get("env_pisces"),d(t,n.bind(function(t,e){t||this.$el.html(e),i.colorbox&&i.colorbox.resize()},this))},hydrateDriverSku:function(){return a(this.model.get("skuId"),{getSummaries:!0,getPrices:!0}).bind(this).then(function(t){var e="",i="";if(t[0].price&&t[0].price.currentPrice){var n=t[0].price.currentPrice,r=this.model.get("percentDiscount");e=(r/100*n).toFixed(2),i=(n-e).toFixed(2)}this.model.set({hydratedSkuData:t,discountedPrice:i})})},hydratePromotionSku:function(){return a(this.model.get("gamersClubUnlockedSku"),{getPrices:!0}).bind(this).then(function(t){var e="";t[0].price&&t[0].price.currentPrice&&(e=t[0].price.currentPrice.toFixed(2)),this.model.set("hydratedPromotionSkuData",t),this.model.set("promotionPrice",e)})},getHydratedData:function(){return o.all([this.hydrateDriverSku(),this.hydratePromotionSku()])},onAddToCartClick:function(t){t.preventDefault();var e=i(t.currentTarget),n=e.attr("data-sku-id");e.text("Adding"),e.addClass("disabled"),e.removeClass("add-to-cart-btn"),this.gamersClubModel.addItemBySkuId(n).bind(this).then(function(){s.trigger("accessoryFinder:addedToCart",{skuId:n,price:{}})}).lastly(function(){e.find(".ficon-cart").removeClass("ficon-cart"),e.find(".add-to-cart-label").text(""),e.text("Added to Cart"),this.goToCart()})},goToCart:function(){window.location.href=l.cartURI}});return h}),define("dust-loader!sc-accessory-finder/dust/gaming-hardware",function(){return function(t){var e=function(t){function e(t,e){return t.w('<div class="gaming-hardware-banner"><div class="emphasized-copy gaming-hardware-close-button" aria-label="close">x</div><div class="gaming-hardware-wrapper"><div class="gaming-hardware-headline" aria-label="Save more when you bundle"></div><div class="gaming-hardware-saveline">Save on each of these essential multiplayer items when you combine them with your Xbox One purchase.<span class="gaming-hardware-offers-headline"> (Offer not available in store)</span></div><div class="gaming-hardware-details"><div class="gaming-sku-wrapper"><div class="play-together-wrapper"><div class="play-together-label" aria-label="Play together"></div></div>').s(e.get(["hydratedGamingSkuData"],!1),e,{block:i},{}).w('</div></div><div class="promotion-sku-wrapper"><div class="play-everyone-wrapper"><div class="play-everyone-label" aria-label="Play everyone"></div></div>').s(e.get(["hydratedPromotionSkuData"],!1),e,{block:l},{}).w('</div></div></div><div class="footer gaming-footer"><a href="javascript:void(0)" class="go-to-cart"><span class="no-thanks-go-to-cart">No, thanks.</span> Go to cart &#8250;</a></div>')}function i(t,e){return t.w('<div class="gaming-image">').x(e.getPath(!1,["media","primaryImage","path"]),e,{block:n},{}).w('</div><div class="gaming-sku-details"><div class="emphasized-copy gaming-name">').f(e.getPath(!1,["names","short"]),e,"h").w("</div>").x(e.get(["gamingDiscountedPrice"],!1),e,{block:o},{}).w('<div class="gaming-console-purchases">with console purchase</div><div>').s(e.getPath(!1,["microsoftGamingSku","discountAmount"]),e,{block:s},{}).x(e.get(["gamingRegularPrice"],!1),e,{block:a},{}).w('</div><div class="gaming-add-button"><a href="javascript:void(0)" class="btn btn-primary btn-xl btn-block add-to-cart-button" data-sku-id="').f(e.getPath(!1,["microsoftGamingSku","skuId"]),e,"h").w('" data-product-id="').f(e.get(["productId"],!1),e,"h").w('"><span class="ficon-cart"></span><span class="gaming-add-to-cart-label">Add to Cart</span></a></div></div>')}function n(t,e){return t.w('<img src="').f(e.get(["piscesPrefix"],!1),e,"h").w("/image2/").f(e.getPath(!1,["media","primaryImage","path"]),e,"h").w('" aria-hidden="true" ').x(e.getPath(!1,["names","short"]),e,{block:r},{}).w("/>")}function r(t,e){return t.w('alt="').f(e.getPath(!1,["names","short"]),e,"h").w('"')}function o(t,e){return t.w('<div class="emphasized-copy gaming-discount">$').f(e.get(["gamingDiscountedPrice"],!1),e,"h").w("</div>")}function s(t,e){return t.w('<span class="emphasized-copy alert-color gaming-save">Save $').f(e.getPath(!1,["microsoftGamingSku","discountAmount"]),e,"h").w("</span>")}function a(t,e){return t.w('<span class="gaming-regular"> (Reg. $').f(e.get(["gamingRegularPrice"],!1),e,"h").w(")</span>")}function l(t,e){return t.w('<div class="promotion-image">').x(e.getPath(!1,["media","primaryImage","path"]),e,{block:c},{}).w('</div><div class="promotion-sku-details"><div class="emphasized-copy promotion-name">').f(e.getPath(!1,["names","short"]),e,"h").w("</div>").x(e.get(["promotionDiscountedPrice"],!1),e,{block:u},{}).w('<div class="promotion-console-purchases">with console purchase</div><div>').s(e.getPath(!1,["microsoftPromotionSku","discountAmount"]),e,{block:h},{}).x(e.get(["promotionRegularPrice"],!1),e,{block:p},{}).w('</div><div class="promotion-add-button"><a href="javascript:void(0)" class="btn btn-primary btn-xl btn-block add-to-cart-button" data-sku-id="').f(e.getPath(!1,["microsoftPromotionSku","skuId"]),e,"h").w('" data-product-id="').f(e.get(["productId"],!1),e,"h").w('"><span class="ficon-cart"></span><span class="promotion-add-to-cart-label">Add to Cart</span></a></div></div>')}function c(t,e){return t.w('<img src="').f(e.get(["piscesPrefix"],!1),e,"h").w("/image2/").f(e.getPath(!1,["media","primaryImage","path"]),e,"h").w('" aria-hidden="true" ').x(e.getPath(!1,["names","short"]),e,{block:d},{}).w("/>")}function d(t,e){return t.w('alt="').f(e.getPath(!1,["names","short"]),e,"h").w('"')}function u(t,e){return t.w('<div class="emphasized-copy promotion-discount">$').f(e.get(["promotionDiscountedPrice"],!1),e,"h").w("</div>")}function h(t,e){return t.w('<span class="emphasized-copy alert-color promotion-save">Save $').f(e.getPath(!1,["microsoftPromotionSku","discountAmount"]),e,"h").w("</span>")}function p(t,e){return t.w('<span class="promotion-regular"> (Reg. $').f(e.get(["promotionRegularPrice"],!1),e,"h").w(")</span>")}return t.register("sc-accessory-finder/dust/gaming-hardware",e),e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,r.__dustBody=!0,o.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,l.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,u.__dustBody=!0,h.__dustBody=!0,p.__dustBody=!0,e}(t),i=function(i,n){if(!n)throw new Error("wrong number of args for render");return t.render(e,i,n)};return i.template=e,i}}),define("sc-accessory-finder/javascript/views/gaming-hardware-view",["require","dust","jquery","lodash","backbone","bluebird","eventmanager","sc-hydrate-sku/javascript/hydrateSku","sc-add-to-cart/javascript/addToCart","dust-loader!sc-accessory-finder/dust/gaming-hardware","sc-meta-layer/javascript/metaLayer"],function(t){var e=t("dust"),i=t("jquery"),n=t("lodash"),r=t("backbone"),o=t("bluebird"),s=t("eventmanager"),a=t("sc-hydrate-sku/javascript/hydrateSku"),l=t("sc-add-to-cart/javascript/addToCart"),c=t("dust-loader!sc-accessory-finder/dust/gaming-hardware")(e),d=t("sc-meta-layer/javascript/metaLayer"),u=r.View.extend({className:"gaming-hardware-modal",events:{"click .add-to-cart-button":"onAddToCartClick"},initialize:function(){this.getHydratedData().bind(this).then(this.render)},render:function(){var t=this.model.toJSON();t.piscesPrefix=d.get("page_isSsl")?d.get("env_piscesSSL"):d.get("env_pisces"),c(t,n.bind(function(t,e){t||this.$el.html(e),i.colorbox&&i.colorbox.resize()},this))},hydrateGamingSku:function(){var t=this.model.get("microsoftGamingSku"),e=t.skuId,i=t.discountAmount;return a(e,{getSummaries:!0,getPrices:!0}).bind(this).then(function(t){var e="",n="";if(t[0].price&&t[0].price.currentPrice){var r=t[0].price.currentPrice;e=(r-i).toFixed(2),n=r.toFixed(2)}this.model.set("hydratedGamingSkuData",t),this.model.set("gamingDiscountedPrice",e),this.model.set("gamingRegularPrice",n)})},hydrateGamingPromotionSku:function(){var t=this.model.get("microsoftPromotionSku"),e=t.skuId,i=t.discountAmount;return a(e,{getSummaries:!0,getPrices:!0}).bind(this).then(function(t){var e="",n="";if(t[0].price&&t[0].price.currentPrice){var r=t[0].price.currentPrice;e=(r-i).toFixed(2),n=r.toFixed(2)}this.model.set("hydratedPromotionSkuData",t),this.model.set("promotionDiscountedPrice",e),this.model.set("promotionRegularPrice",n)})},getHydratedData:function(){return o.all([this.hydrateGamingSku(),this.hydrateGamingPromotionSku()])},onAddToCartClick:function(t){t.preventDefault();var e=i(t.currentTarget),n=e.attr("data-sku-id"),r=e.attr("data-product-id");e.text("Adding"),e.addClass("disabled"),e.removeClass("add-to-cart-btn");var a={skuId:n,productId:r};return o.resolve(l(a)).bind(this).then(function(){s.trigger("accessoryFinder:addedToCart",{skuId:n,price:{}})}).lastly(function(){e.find(".ficon-cart").removeClass("ficon-cart"),e.text("Added to Cart"),i(".no-thanks-go-to-cart").html(""),i(".no-thanks-go-to-cart").remove()})}});return u}),define("sc-accessory-finder/javascript/models/warranty-model",["require","eventmanager","lodash","backbone","bluebird","sc-add-to-cart/javascript/addToCart"],function(t){var e=t("eventmanager"),i=t("lodash"),n=t("backbone"),r=t("bluebird"),o=t("sc-add-to-cart/javascript/addToCart"),s=n.Model.extend({addToCart:function(t){var n=this.get("warrantySelection")||t.skuId;this.set("addingToCart",!0);var s=i.find(this.get("warranties"),function(t){return t.skuId===n});return r.resolve(o({skuId:""+t.skuId,parentLineItemId:""+this.get("driverId"),childType:"WARRANTY"})).bind(this).then(function(t){this.unsetAddedWarranty(),s.addedToCart=!0,e.trigger("accessoryFinder:addedToCart",s)}).caught(function(t){return e.trigger("accessoryFinder:failedAddToCart",s),r.reject(t)}).lastly(function(){this.set("addingToCart",null)})},unsetAddedWarranty:function(){var t=i.find(this.get("warranties"),"addedToCart");t&&(t.addedToCart=null)}});return s}),define("dust-loader!sc-accessory-finder/dust/accessory-finder-main",function(){return function(t){var e=function(t){function e(t,e){return t.w('<div class="main"><div class="warranties"></div><div class="dynamic-modal"></div><div class="accessories"></div></div><div class="footer"><a href="javascript:void(0)" class="go-to-cart"><span class="no-thanks-go-to-cart">No, thanks.</span> Go to cart &#8250;</a></div>')}return t.register("sc-accessory-finder/dust/accessory-finder-main",e),e.__dustBody=!0,e}(t),i=function(i,n){if(!n)throw new Error("wrong number of args for render");return t.render(e,i,n)};return i.template=e,i}}),define("dust-loader!sc-accessory-finder/dust/driver-promotion",function(){
return function(t){var e=function(t){function e(t,e){return t.w('<div class="promotion-image">').s(e.get(["imageUrl"],!1),e,{block:i},{}).s(e.get(["moreInfoLink"],!1),e,{block:n},{}).w("</div>")}function i(t,e){return t.w('<img src="').f(e.getPath(!0,[]),e,"h").w('" alt="').f(e.get(["altText"],!1),e,"h").w('" />')}function n(t,e){return t.w('<a href="').f(e.get(["moreInfoLink"],!1),e,"h").w('" class="learn-more">Learn more</a>')}return t.register("sc-accessory-finder/dust/driver-promotion",e),e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,e}(t),i=function(i,n){if(!n)throw new Error("wrong number of args for render");return t.render(e,i,n)};return i.template=e,i}}),define("sc-accessory-finder/javascript/views/accessory-finder-view",["require","dust","../config","eventmanager","jquery","lodash","backbone","./carousel-view","./warranties-view","./gamers-club-view","./gaming-hardware-view","../models/warranty-model","dust-loader!sc-accessory-finder/dust/accessory-finder-main","dust-loader!sc-accessory-finder/dust/driver-promotion"],function(t){var e=t("dust"),i=t("../config"),n=t("eventmanager"),r=t("jquery"),o=t("lodash"),s=t("backbone"),a=t("./carousel-view"),l=t("./warranties-view"),c=t("./gamers-club-view"),d=t("./gaming-hardware-view"),u=t("../models/warranty-model"),h=t("dust-loader!sc-accessory-finder/dust/accessory-finder-main")(e),p=t("dust-loader!sc-accessory-finder/dust/driver-promotion")(e),f=s.View.extend({skus:null,className:"accessory-finder",events:{"click #cboxClose":"onClickClose","click .gamers-close-button":"onClickClose","click .gaming-hardware-close-button":"onClickClose","click .go-to-cart":"onClickGoToCart","click .product .short-label":"onClickElement","click .plan-details":"onClickElement"},initialize:function(t){this.options=t,o.bindAll(this),"undefined"==typeof this.options.closeable&&(this.options.closeable=!0)},render:function(){"GamersClubUnlocked"===this.model.get("promotionName")?(this.gamersClubView=new c({model:this.model}),this.appendGamersClubModal()):"XboxHardwarePromotion"===this.model.get("promotionName")?(this.gamingHardwareView=new d({model:this.model}),this.appendGamingHardwareModal()):h(this.options,o.bind(function(t,e){if(!t){this.$el.html(e),this.model.get("hasDynamicModal")===!0&&this.renderDynamicModal();var i=this.$(".accessories");this.accessoriesView=new a({model:this.model.carousel}),i.html(this.accessoriesView.el);var n=new u({warranties:this.model.warranties.toJSON(),driverSkuId:this.model.get("skuId"),driverId:this.model.get("id")});this.warrantiesView=new l({model:n});var r=this.$(".warranties");r.html(this.warrantiesView.el)}},this)),r.colorbox&&r.colorbox.resize()},renderDynamicModal:function(){var t=r(".dynamic-modal");p(this.model.toJSON(),o.bind(function(e,i){e||t.html(i)},this)),r.colorbox&&r.colorbox.resize()},appendGamersClubModal:function(){this.$el.append(this.gamersClubView.el),r.colorbox&&r("#cboxClose").hide()},appendGamingHardwareModal:function(){this.$el.append(this.gamingHardwareView.el),r.colorbox&&r("#cboxClose").hide()},onAddToCart:function(t){n.trigger("accessoryFinder:addToCart","UNKNOWN",t),n.trigger([{location:"accessoryFinder",action:"click:addToCart",item:t}]),r(".no-thanks-go-to-cart").remove()},onClickClose:function(){r.colorbox.close()},onClickGoToCart:function(){n.trigger("accessoryFinder:goToCart","UNKNOWN"),window.location=i.cartURI},onClickElement:function(t){n.trigger("accessoryFinder:click","UNKNOWN",t)}});return f}),define("sc-accessory-finder/javascript/models/carousel-item-model",["require","eventmanager","backbone","../../../sc-add-to-cart/javascript/addToCart","bluebird"],function(t){var e=t("eventmanager"),i=t("backbone"),n=t("../../../sc-add-to-cart/javascript/addToCart"),r=t("bluebird"),o=i.Model.extend({idAttribute:"skuId",urlRoot:function(){return"/cart/item"},addToCart:function(t){if(t&&t.skuId){var i;return this.set("adding",!0),i=n(t.productId?{skuId:""+t.skuId,productId:""+t.productId}:{skuId:""+t.skuId,parentLineItemId:""+this.get("driverId"),childType:"WARRANTY"}),r.resolve(i).bind(this).then(function(t){this.set("addedToCart",!0),e.trigger("accessoryFinder:addedToCart",this.attributes)}).caught(function(t){return e.trigger("accessoryFinder:failedAddToCart",this.attributes),r.reject(t)}).lastly(function(){this.set("adding",null)})}},isValidAccessory:function(t){var e=this.get("promotionName")||"",i=this.get("availability")||{},n=this.get("buttonState")||{},r=!!n.purchasable&&("ADD_TO_CART"===n.buttonStateID||"PRE_ORDER"===n.buttonStateID),o=!!this.get("active"),s=!!i.ship&&i.ship.available;return"Amiibo"===e?o&&s:o&&r}});return o}),define("sc-accessory-finder/javascript/collections/carousel-item-collection",["require","backbone","bluebird","sc-hydrate-sku/javascript/hydrateSku","../models/carousel-item-model"],function(t){var e=t("backbone"),i=t("bluebird"),n=t("sc-hydrate-sku/javascript/hydrateSku"),r=t("../models/carousel-item-model"),o=e.Collection.extend({model:r,hydrate:function(){return this.isEmpty()?i.resolve({}):n(this.pluck("skuId"),{getSummaries:!0,getPrices:!0}).bind(this).then(function(t){this.set(t,{remove:!1})})},getValidAccessories:function(){return new o(this.filter(function(t){return t.isValidAccessory()}))}});return o}),define("sc-recommendations-service/javascript/config",["require"],function(t){return{apiKey:"D50:YlB0SlpIZWtvWGNpRExJRi9UUzFSZjJqajFvZ3VjTXJkbWpEWHNHcXVwbz0="}}),define("sc-recommendations-service/javascript/call-service",["require","jquery","lodash","bluebird","./config"],function(t){var e=t("jquery"),i=t("lodash"),n=t("bluebird"),r=t("./config"),o=function(t){return i.map(t,function(t,e){return e+"="+t}).join("&")};return function(t){return t=i.defaults(t||{},{dataType:"jsonp"}),t.url?i.isString(t.data)?n.reject(new TypeError("Recommendations services can only take `options.data` as Object")):(t.data=i.defaults(t.data||{},i.pick(t,["page","datasetVersion","pageSize"]),i.pick(r,["apiKey"])),t.data=o(t.data),n.cast(e.ajax(t)).then(function(e){return i.defaults(e,{carouselHeaderText:t.carouselHeaderText})})):n.reject(new TypeError("GenericService cannot be called without `options.url`"))}}),define("sc-recommendations-service/javascript/apis/also-bought",["require","lodash","bluebird","../call-service"],function(t){var e=t("lodash"),i=t("bluebird"),n=t("../call-service");return function(t){var r=t.sku||"";return/^\d+(?:(?:,\d+)+)?$/.test(r)?(t=e.defaults(t||{},{url:"//context.bestbuy.com/api/item/"+r+"/alsobought.json",carouselHeaderText:"Customers Who Bought Also Bought"}),n(t)):i.reject(new TypeError("Also Bought API requires a numeric `options.sku`"))}}),define("sc-recommendations-service/javascript/apis/trending",["require","lodash","../call-service"],function(t){var e=t("lodash"),i=t("../call-service");return function(t){return t=e.defaults(t||{},{url:"//context.bestbuy.com/api/trending/items/viewed.json",carouselHeaderText:"Trending Products"}),i(t)}}),define("sc-recommendations-service/javascript/apis/most-viewed",["require","lodash","bluebird","../call-service"],function(t){var e=t("lodash"),i=t("bluebird"),n=t("../call-service");return function(t){return t.category?(t=e.defaults(t||{},{url:"//context.bestbuy.com/api/category/"+t.category+"/items/popular.json",carouselHeaderText:"Most popular products"}),n(t)):i.reject(new TypeError("Most Viewed API requires `options.category`"))}}),define("sc-recommendations-service/javascript/apis/recently-viewed",["require","lodash","bluebird","../call-service"],function(t){var e=t("lodash"),i=t("bluebird"),n=t("../call-service");return function(t){return t.contextID?(t=e.defaults(t||{},{url:"//context.bestbuy.com/api/context/"+t.contextID+"/items/viewed.json",carouselHeaderText:"Recently Viewed Products"}),n(t)):i.reject(new TypeError("Recently Viewed API requires `options.contextID`"))}}),define("sc-recommendations-service/javascript/apis/unified",["require","lodash","bluebird","../call-service"],function(t){var e=t("lodash"),i=t("bluebird"),n=t("../call-service");return function(t){t.src||"";return t.contextID?t.sku?t.plmt?t.src?(t=e.defaults(t||{},{url:"//context.bestbuy.com/api/recommendations?c_id="+t.contextID+"&item="+t.sku+"&plmt="+t.plmt+"&src="+t.src,carouselHeaderText:"Recommended Products"}),n(t)):i.reject(new TypeError("Unified API requires `options.src`")):i.reject(new TypeError("Unified API requires `options.plmt`")):i.reject(new TypeError("Unified API requires `options.sku`")):i.reject(new TypeError("Unified API requires `options.contextID`"))}}),define("sc-recommendations-service/javascript/service",["require","backbone","lodash","./apis/also-bought","./apis/trending","./apis/most-viewed","./apis/recently-viewed","./apis/unified"],function(t){var e=t("backbone"),i=t("lodash"),n={ALSO_BOUGHT:t("./apis/also-bought"),TRENDING:t("./apis/trending"),MOST_VIEWED:t("./apis/most-viewed"),RECENTLY_VIEWED:t("./apis/recently-viewed"),UNIFIED:t("./apis/unified")},r=function(){};return i.extend(r.prototype,e.Events,{request:function(t,e){return n[t].call(this,e)}}),new r}),define("sc-accessory-finder/javascript/models/carousel-model",["require","backbone","lodash","../collections/carousel-item-collection","sc-recommendations-service/javascript/service"],function(t){var e=t("backbone"),i=t("lodash"),n=t("../collections/carousel-item-collection"),r=t("sc-recommendations-service/javascript/service"),o=e.Model.extend({driver:null,initialize:function(t,e){e=e||{},this.driver=e.driver||null,this.items=new n},defaults:{maxItems:3,currentPage:1},urlRoot:function(){return"/cart/item"},getPageCount:function(){return Math.ceil(this.items.getValidAccessories().length/this.get("maxItems"))},nextPage:function(){this.seek(1)},previousPage:function(){this.seek(-1)},seek:function(t){var e=this.get("currentPage"),i=this.getPageCount();e+=+t,1>e?e=i:e>i&&(e=1),this.set({currentPage:e})},setAddedToCartValue:function(t,e){this.items.findWhere({skuId:t}).set({addedToCartw:e})},toJSON:function(){var t={epItems:this.items.getValidAccessories().toJSON(),accessoriesHeader:this.get("carouselHeaderText"),entriesLength:this.items.length,pageCount:this.getPageCount(),currentPage:this.get("currentPage")||1};return t},fetch:function(){return this.driver.get("hasDynamicModal")?this.items.hydrate():r.request("ALSO_BOUGHT",{sku:this.driver.get("skuId"),datasetVersion:"5.2"}).bind(this).then(function(t){return this.set(this.parse(t)),this.items.hydrate()})},parse:function(t){t=t||{};var e=i.forEach(t._entries,function(t,e){t.skuId=t.id,delete t.id});return this.items.reset(e),i.omit(t,["_entries"])}});return o}),define("sc-accessory-finder/javascript/models/driver-model",["require","lodash","backbone","bluebird","../models/carousel-model"],function(t){var e=t("lodash"),i=t("backbone"),n=t("bluebird"),r=t("../models/carousel-model"),o=i.Model.extend({url:function(){return"/cart/item/"+this.get("id")+"/suggested"},initialize:function(t){this.warranties=new i.Collection,this.carousel=new r({maxItems:3,promotionName:this.get("promotionName")},{driver:this})},fetch:function(){return n.cast(i.Model.prototype.fetch.apply(this,arguments))},parse:function(t){return this.warranties.reset(t.warranties),this.carousel.items.set(t.accessories),e.pick(t,["hasDynamicModal","imageUrl","accessoriesHeader","promotionName","moreInfoLink","altText","gamersClubUnlockedSku","percentDiscount","microsoftGamingSku","microsoftPromotionSku","featureDisabled"])}});return o}),define("sc-accessory-finder/javascript/helpers/view-helper",["require","cookieManager"],function(t){var e=t("cookieManager"),i=e.get("bby_rdp")||"l",n={isSmallView:function(){return"s"===i},isLargeView:function(){return"l"===i}};return n}),define("sc-accessory-finder/javascript/sc-accessory-finder",["require","eventmanager","jquery","lodash","./views/accessory-finder-view","./models/driver-model","./helpers/view-helper","./config","bluebird"],function(t){var e=t("eventmanager"),i=t("jquery"),n=t("lodash"),r=t("./views/accessory-finder-view"),o=t("./models/driver-model"),s=t("./helpers/view-helper"),a=t("./config"),l=t("bluebird"),c=function(t){if(t=t||{},s.isSmallView())return void(window.location.pathname="/cart");var c,d=function(i,r){if(e.error(i,r),n.isFunction(t.onError))t.onError.apply(t,r||[]);else if("redirectToCart"===t.onError)window.location.href=a.cartURI;else if("ignore"!==t.onError)throw i},u=function(t,r){var o={href:r.$el,inline:!0,opacity:.5,onComplete:function(){i.colorbox.resize()},onCleanup:function(){e.trigger("accessoryFinder:close","UNKNOWN")}},s={};t.closeable===!1&&(s.overlayClose=!1,s.escKey=!1),s.className="accessory-finder-wrapper",i.colorbox(n.extend(o,s,t.colorbox||{})),t.closeable===!1&&i("#cboxClose").hide()};c=n.isArray(t.skus)?t.skus[0]:t.skus;var h=new o({id:t.cid,skuId:c}),p=new r({closeable:t.closeable,model:h});return h.fetch().bind(this).then(function(i){if(!h.get("featureDisabled")){var n,r=[];if(h.get("promotionName")){n=l.resolve();var o=h.get("gamersClubUnlockedSku");o&&r.push(o);var s=h.get("microsoftGamingSku");s&&s.skuId&&r.push(s.skuId);var c=h.get("microsoftPromotionSku");c&&c.skuId&&r.push(c.skuId)}else n=h.carousel.fetch().then(function(){h.carousel.items.forEach(function(t){r.push(t.get("skuId"))})});return n.then(function(){if(r.length||h.warranties.length){var i=r.map(function(t){return{skuId:t}});e.trigger("accessoryFinder:open",{accessories:i}),p.render(),u(t,p)}else d("No driver items to display")})}window.location.href=a.cartURI},function(t){throw d("Error retrieving items"),t}),p};return c}),define("sc-alerts/javascript/models/alert",["require","backbone"],function(t){var e=t("backbone"),i=e.Model.extend({initialize:function(){},defaults:{type:"",header:"",message:"",items:[],classes:"",link:""}});return i.WARNING="warning",i.SUCCESS="success",i.ERROR="error",i}),define("sc-alerts/javascript/views/alertView",["require","lodash","backbone"],function(t){var e=t("lodash"),i=t("backbone"),n=i.View.extend({initialize:function(t){this._templates={alert:e.template('					<div id="bbyalert-<%=alert.type%>" <% if (alert.classes != "") { %>class="<%=alert.type%>"<% } %>>					  <div class="bbyalert-header">						<div class="bbyalert-icon">						  <span class="<%=alert.type%>-icon"></span>						</div>						<div class="bbyalert-text"><% if (alert.link != "") { %><a href="<%=alert.link%>"><% } %><%=alert.header%><% if (alert.link != "") { %></a><% } %></div>					  </div>					<% if (alert.items.length || alert.message != "") { %>					  <div class="bbyalert-list">						 <% if (alert.message != "") { %>						   <div class="message"><%=alert.message%></div>						<% } %>						<% if (alert.items.length) { %>						  <ul>							<% _.each(alert.items, function(item) { %>							  <li><%=item%></li>							<% }); %>						  </ul>						<% } %>					  </div>					<% } %>					</div>			')}},render:function(){void 0!=this.alert&&this.$el.html(this._templates.alert({alert:this.alert.toJSON()}))},show:function(t){void 0!=t&&(this.alert=t),this.render()}});return n}),define("pdp/javascript/models/LinksModel",["require","backbone","lodash"],function(t){var e,i=t("backbone"),n=t("lodash"),r=i.Model.extend({initialize:function(){},defaults:{olsPageUrl:"",cartService:"",serviceUrl:""},selectShippingAvailabilityUrl:function(){var t=this.get("domain");switch(t=document.createElement("a"),t.href=t,t=t.host.split("."),t=n.difference(t,["www","bestbuy","com","BestBuy"])[0],this.set({subDomain:t}),t){case"qa":this.set({shippingAvailabilityUrl:"http://sdws-agg-qa1.bestbuy.com/fulfillment/shipping"});break;case"bby-qa3":this.set({shippingAvailabilityUrl:"http://sdws-agg-qa3.bestbuy.com/fulfillment/shipping"});break;case"dev":this.set({shippingAvailabilityUrl:"http://sdws-agg-qa3.bestbuy.com/fulfillment/shipping"});break;case"stage":this.set({shippingAvailabilityUrl:"http://www.stage.bestbuy.com/fulfillment/shipping"});break;default:this.set({shippingAvailabilityUrl:"http://www.bestbuy.com/fulfillment/shipping"})}}});return r.getInstance=function(){return e?e:e=new r},r}),define("_cartButton/javascript/helpers/CartHelper",["require","eventmanager","jquery","lodash","backbone","pdp/javascript/models/LinksModel","http://images.bestbuy.com/BestBuy_US/store/js/bby-infrastructure.js","http://images.bestbuy.com/BestBuy_US/store/js/olsnlnoleftmastertemplate.js","http://images.bestbuy.com/BestBuy_US/store/js/bby-cart.js"],function(t){var e=(t("eventmanager"),t("jquery")),i=t("lodash"),n=t("backbone"),r=t("pdp/javascript/models/LinksModel");t("http://images.bestbuy.com/BestBuy_US/store/js/bby-infrastructure.js"),t("http://images.bestbuy.com/BestBuy_US/store/js/olsnlnoleftmastertemplate.js"),t("http://images.bestbuy.com/BestBuy_US/store/js/bby-cart.js");var o=n.View.extend({cartModel:null,initialize:function(){this.linksModel=r.getInstance().set(e("#links-model-data").data());var t=this._createForm();window.trackHaccs={},window.trackGoToCart=function(){bbyCartController.goToCart()},i.bindAll(this);var n=this.linksModel.get("olsPageUrl").replace("/site/olspage.jsp","");window.contextRoot=n+"/site";var o=new bby.cart.model.services.factory(e(t).attr("action"),this.linksModel.get("olsPageUrl"),this.linksModel.get("olsPageUrl")),s=new bby.cart.model.decorators.shopping.fromPdp(e(t)[0]),a=new bby.cart.model.decorators.shopAccessories,l=new bby.cart.model.decorators.viewPrice,c=new bby.cart.model.workflow.states.shopping,d=new bby.cart.model.workflow.salesFlow(o,s,a,l,c,n+"/site/olspage.jsp?id=pcat17005&type=page&pageId=pcmcat174700050005&pageType=category&_DARGS=/site/en_US/global/nav/olsminicart.jsp_A&_DAV="),u=new bby.cart.views.accessories;window.viewPriceView=new bby.cart.views.viewPrice;var h=new bby.cart.views.states.shopping,p=new bby.cart.views.salesFlow(d,h,u,viewPriceView);window.bbyCartController=new bby.cart.controllers.salesFlow(d,p);var f=new bby.cart.analytics.trackObjects,g=new bby.cart.analytics.trackEvent,m=new bby.cart.analytics.trackers.lightbox.trackers.haccs(g,f,d),v=new bby.cart.analytics.trackers.lightbox.trackers.map(g,f,d),y=new bby.cart.analytics.trackers.lightbox.trackers.icr(g,f,d);window.trackingState=new bby.cart.analytics.trackers.lightbox.states.shopping,new bby.cart.analytics.trackers.lightbox.tracker(m,v,y,d,trackingState),new bby.cart.analytics.trackers.cnet(g,f,d),this.cartModel=d,bby.infrastructure.widgets.lightbox.prototype.open=function(t){e.isObject(t)||(t=t.replace("<!DOCTYPE html>",""),t=t.replace("</body>",""),t=t.replace("</html>",""),t='<div id="bby-cart-lightbox">'+t+"</div>",t='<div id="bby-cart-lightbox-wrapper">'+t+"</div>");var i=e.isObject(t)?t:{html:t,overlayClose:!1,scrolling:!0,fixed:!1,opacity:.5,iframe:!1,transition:"none",onOpen:function(){var t=e("button#cboxClose");window.lightboxClickHandler=void 0!=t.data("events")?t.data("events").click[0].handler:null,t.unbind("click"),t.click(function(){bbyCartController.shop()})},onComplete:function(){e(".tooltips, .tooltip-wrapper").hide(),setTimeout(function(){e.colorbox.resize({innerWidth:"730px"})},0)},onClosed:function(){var t=e("button#cboxClose");t.unbind("click"),lightboxClickHandler&&t.click(lightboxClickHandler)}};return e.colorbox(i),this}},_createForm:function(){var t='<form id="addToCartForm"14485470 action="'+this.linksModel.get("olsPageUrl")+'/site/olstemplatemapper.jsp?_DARGS=/site/pdpFragmentService" method="POST"><input name="_dyncharset" value="ISO-8859-1" type="hidden"><input name="_dynSessConf" value="" type="hidden"><input type="hidden" name="productIds"><input type="hidden" name="skuIds"><input type="hidden" name="tab" value="1"><input name="/atg/commerce/order/ShoppingCartModifier.addItemsToOrderErrorURL" value="'+this.linksModel.get("olsPageUrl")+'/site/cartbuttonservice" type="hidden"><input name="_D:/atg/commerce/order/ShoppingCartModifier.addItemsToOrderErrorURL" value=" " type="hidden"><input name="useRedirectionURL" value="true" type="hidden"><input name="_D:useRedirectionURL" value=" " type="hidden"><input name="redirectionURL" value="'+this.linksModel.get("cartService")+'" type="hidden"><input name="_D:redirectionURL" value=" " type="hidden"><input name="/atg/commerce/order/ShoppingCartModifier.addItemsToOrderSuccessURL" value="'+this.linksModel.get("olsPageUrl")+'" type="hidden"><input name="_D:/atg/commerce/order/ShoppingCartModifier.addItemsToOrderSuccessURL" value=" " type="hidden"><input name="/atg/commerce/order/ShoppingCartModifier.addItemsToOrder" value="" type="hidden"><input name="_D:/atg/commerce/order/ShoppingCartModifier.addItemsToOrder" value=" " type="hidden"><input type="hidden" id="productIdPDP" value="1304485470"/><input type="hidden" id="skuIdPDP" value="14485470"/><input type="hidden" id="enableLightbox" value="null" /><a href="#" class="large-action-button"><span class="front-icon cart-icon"></span>Add to Cart</a><input name="14485470" type="hidden" value="1"><div style="display: none;"><div class="css-displayMessage bdt-displayMessage css-hide"><span id="cart.error" class="css-text"></span></div></div><input id="csrfToken" name="csrfToken" value="" type="hidden"><input name="_DARGS" value="/site/cartbuttonservice" type="hidden"></form>';return t},remove:function(){window.lightboxClickHandler=null,window.trackingState=null,window.bbyCartController=null,window.trackHaccs=null,window.trackGoToCart=null,window.contextRoot=null,window.viewPriceView=null,n.View.prototype.remove.apply(this,arguments)},onItemSeePriceInCartClick:function(t){bbyCartController.viewPrice({skuId:t.skuId,productId:t.productId})}});return o}),define("pdp/javascript/models/SkuModel",["require","backbone"],function(t){var e,i=t("backbone"),n=i.Model.extend({defaults:{productType:"",names:null,descriptions:null,brand:null,properties:null,manufacturerId:null}});return n.getInstance=function(){return e||(e=new n),e},n}),define("pdp/javascript/collections/SkuCollection",["require","backbone","../models/SkuModel"],function(t){var e=t("backbone"),i=t("../models/SkuModel"),n=e.Collection.extend({model:i});return n}),define("dust-loader!_cartButton/dust/cartButton",function(){return function(t){var e=function(t){function e(t,e){return t.x(e.get(["marketplaceProductKiosk"],!1),e,{"else":i,block:D},{})}function i(t,e){return t.h("eq",e,{"else":n,block:I},{key:e.getPath(!1,["sku","buttonState"]),value:"NOT_FOR_INDIVIDUAL_SALE"},"h").w("    ")}function n(t,e){return t.x(e.getPath(!1,["sku","addToCartMessage"]),e,{block:r},{})}function r(t,e){return t.x(e.getPath(!1,["sku","purchasable"]),e,{"else":o,block:d},{})}function o(t,e){return t.x(e.get(["largeButton"],!1),e,{"else":s,block:a},{})}function s(t,e){return t.w('<span class="btn btn-transaction btn-sm disabled">').f(e.getPath(!1,["sku","addToCartMessage"]),e,"h").w("</span>")}function a(t,e){return t.x(e.get(["isPostcard"],!1),e,{"else":l,block:c},{})}function l(t,e){return t.w('<span class="btn btn-transaction disabled">').f(e.getPath(!1,["sku","addToCartMessage"]),e,"h").w("</span>")}function c(t,e){return t.w('<a href="#" class="btn btn-transaction disabled"><span>').f(e.getPath(!1,["sku","addToCartMessage"]),e,"h").w("</span></a>")}function d(t,e){return t.nx(e.getPath(!1,["sku","purchased"]),e,{"else":u,block:f},{})}function u(t,e){return t.x(e.get(["largeButton"],!1),e,{"else":h,block:p},{})}function h(t,e){return t.w('<span class="btn btn-transaction btn-sm disabled">Added</span>')}function p(t,e){return t.w('<span class="btn btn-transaction disabled">Added</span>')}function f(t,e){return t.x(e.get(["largeButton"],!1),e,{"else":g,block:_},{}).x(e.get(["serviceDown"],!1),e,{block:P},{})}function g(t,e){return t.w('<a href="#" class="btn btn-transaction btn-sm ').x(e.get(["isBlock"],!1),e,{block:m},{}).w(" bby-icon").x(e.get(["serviceDown"],!1),e,{block:v},{}).w('" role="button"').x(e.get(["serviceDown"],!1),e,{block:y},{}).w('><span class="ficon ficon-cart"></span>').x(e.get(["customPurchasableText"],!1),e,{"else":b,block:w},{}).w("</a>")}function m(t,e){return t.w("btn-block")}function v(t,e){return t.w(" disabled service-down bbytooltip-trigger")}function y(t,e){return t.w(' data-bbytooltip-id="service-down-tooltip-').f(e.getPath(!1,["sku","skuId"]),e,"h").w('" data-bbytooltip-position="left"')}function b(t,e){return t.f(e.getPath(!1,["sku","addToCartMessage"]),e,"h")}function w(t,e){return t.f(e.get(["customPurchasableText"],!1),e,"h")}function _(t,e){return t.w(' <a href="#" class="btn btn-transaction ').x(e.get(["isBlock"],!1),e,{block:k},{}).w(" bby-icon").x(e.get(["serviceDown"],!1),e,{block:C},{}).w('" role="button"').x(e.get(["serviceDown"],!1),e,{block:x},{}).w('><span class="ficon ficon-cart"></span>').x(e.get(["customPurchasableText"],!1),e,{"else":S,block:T},{}).w("</a>")}function k(t,e){return t.w("btn-block")}function C(t,e){return t.w(" disabled service-down bbytooltip-trigger")}function x(t,e){return t.w(' data-bbytooltip-id="service-down-tooltip-').f(e.getPath(!1,["sku","skuId"]),e,"h").w('" data-bbytooltip-position="left"')}function S(t,e){return t.f(e.getPath(!1,["sku","addToCartMessage"]),e,"h")}function T(t,e){return t.f(e.get(["customPurchasableText"],!1),e,"h")}function P(t,e){return t.w('<div class="bbytooltip" id="service-down-tooltip-').f(e.getPath(!1,["sku","skuId"]),e,"h").w('"><div class="noheader-content"><p>We’re sorry. Something went wrong and our cart is currently unavailable. We’re working to restore it as soon as possible.  </p><p>Save this item for later by adding it to a wish list.</p></div></div>')}function I(t,e){return t.w("<div><strong>Not For Individual Sale</strong></div>")}function D(t,e){return t.w("<div><strong>Marketplace item not available through store kiosk.</strong></div>")}return t.register("_cartButton/dust/cartButton",e),e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,r.__dustBody=!0,o.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,l.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,u.__dustBody=!0,h.__dustBody=!0,p.__dustBody=!0,f.__dustBody=!0,g.__dustBody=!0,m.__dustBody=!0,v.__dustBody=!0,y.__dustBody=!0,b.__dustBody=!0,w.__dustBody=!0,_.__dustBody=!0,k.__dustBody=!0,C.__dustBody=!0,x.__dustBody=!0,S.__dustBody=!0,T.__dustBody=!0,P.__dustBody=!0,I.__dustBody=!0,D.__dustBody=!0,e}(t),i=function(i,n){if(!n)throw new Error("wrong number of args for render");return t.render(e,i,n)};return i.template=e,i}}),define("_cartButton/javascript/views/CartButtonView",["require","dust","lodash","backbone","dust-loader!_cartButton/dust/cartButton","sc-tooltips/javascript/_tooltips"],function(t){var e=t("dust"),i=t("lodash"),n=t("backbone"),r=t("dust-loader!_cartButton/dust/cartButton")(e);t("sc-tooltips/javascript/_tooltips");var o=n.View.extend({customPurchasableText:null,largeButton:!0,marketplaceProductKiosk:!1,serviceDown:!1,isBlock:!1,isPostcard:!1,initialize:function(t){this.largeButton=t.largeButton,this.marketplaceProductKiosk=t.marketplaceProductKiosk,t.customPurchasableText&&(this.customPurchasableText=t.customPurchasableText),t.isBlock&&(this.isBlock=t.isBlock),t.isPostcard&&(this.isPostcard=t.isPostcard),i.bindAll(this),this.listenTo(EventManager,"pdp:hdp:add-to-cart",this._addToCart),this.listenTo(this.model,"change",this.render)},events:{"click a":"onClick"},render:function(){this.serviceDown=this.$el.data("serviceDown");var t={marketplaceProductKiosk:this.marketplaceProductKiosk,sku:this.model.toJSON(),largeButton:this.largeButton,customPurchasableText:this.customPurchasableText,serviceDown:this.serviceDown,isBlock:this.isBlock,isPostcard:this.isPostcard};return r(t,i.bind(function(t,e){this.$el.html(e)},this)),this.$(".bbytooltip-trigger").bbytooltip(),this},_addToCart:function(){return this.$(".delivery-availability-override").length?void EventManager.trigger("pdp:add-to-cart:hdp-override"):void(this.serviceDown||(i.isUndefined(this.$el.data("listingId"))||this.model.set({listingId:this.$el.data("listingId")}),i.isUndefined(this.$el.data("sellerId"))||this.model.set({sellerId:this.$el.data("sellerId")}),i.isUndefined(this.$el.data("pricingType"))||this.model.set({nonNewInventory:this.$el.data("pricingType")}),i.isUndefined(this.$el.data("condition"))||this.model.set({condition:this.$el.data("condition")}),i.isUndefined(this.$el.data("currentPrice"))||this.model.set({price:this.$el.data("currentPrice")}),i.isUndefined(this.$el.data("sc-package-builder"))||this.model.set({scPackageBuilder:this.$el.data("sc-package-builder")}),this.trigger("bby-cart:add-to-cart",this.model)))},onClick:function(t){t.preventDefault(),this._addToCart()}});return o}),define("_cartButton/javascript/helpers/EsiParser",["require","jquery","lodash","pdp/javascript/models/SkuModel"],function(require){var $=require("jquery"),_=require("lodash"),SkuModel=require("pdp/javascript/models/SkuModel"),EsiParser={cartMap:function(t){var e={ADD_TO_CART:"Add to Cart",ADD_TO_PACKAGE:"Add to Package",PRE_ORDER:"Pre-Order",COMING_SOON:"Coming Soon",SOLD_OUT_ONLINE:"Sold Out Online",IN_STORE_ONLY:"In Store Only"},i={btn_addtocart_pdp:{addToCartMessage:e.ADD_TO_CART,purchasable:!0},BTN_addtopackage_yellow:{addToCartMessage:e.ADD_TO_PACKAGE,purchasable:!0},btn_addtopackage_pdp:{addToCartMessage:e.ADD_TO_PACKAGE,purchasable:!0},btn_specialorder_pdp:{addToCartMessage:e.ADD_TO_CART,purchasable:!0},btn_preorder_pdp:{addToCartMessage:e.PRE_ORDER,purchasable:!0},btn_comingsoon_pdp:{addToCartMessage:e.COMING_SOON,purchasable:!1},btn_soldout_pdp:{addToCartMessage:e.SOLD_OUT_ONLINE,purchasable:!1},btn_instoreonly_pdp:{addToCartMessage:e.IN_STORE_ONLY,purchasable:!1},btn_notorderable_pdp:{addToCartMessage:e.SOLD_OUT_ONLINE,purchasable:!1}};return i[t]},parseHtmlAndUpdateSkus:function(skuCollection,element,skuId){var that=this,_skuId=skuId,buttonType={"#addtocart":function(){var t=element.find("div#add-to-package-button"),e=t.find("#addtocart, #addToCart"),i=e.attr("src"),n=t.find("#addtocart + input").attr("name"),r=!1;r=that.cartMap(i.substring(i.lastIndexOf("/")+1,i.lastIndexOf(".")));var o=skuCollection.findWhere({skuId:n});"undefined"==typeof o&&(o=new SkuModel({skuId:n}),skuCollection.add(o)),o.set("connectedDevice",!0,{silent:!0}),r&&(o.set("purchasable",r.purchasable,{silent:!0}),o.set("addToCartMessage",r.addToCartMessage))},"#profile-cart":function(){var cartProfile=element.find("div#profile-cart"),callprops="",form=cartProfile.find("form[name=frmCart]");form.children().filter("div").each(function(){var child=$(this),id=child.attr("id").replace("sku-",""),item=!1,callstring="";child.find("img").each(function(){var t=$(this),e=t.attr("src");item=that.cartMap(e.substring(e.lastIndexOf("/")+1,e.lastIndexOf("."))),item&&(callstring=t.attr("onclick"))}),callstring&&(callstring=callstring.substring(callstring.indexOf("{"),callstring.length),callstring=callstring.substring(0,callstring.lastIndexOf("}")+1),callstring=callstring.replace(/\\/g,""),eval("callprops = "+callstring));var skuModel=skuCollection.findWhere({skuId:id});"undefined"==typeof skuModel&&(skuModel=new SkuModel({skuId:id}),skuCollection.add(skuModel)),skuModel.set("productId",callprops.productId,{silent:!0}),skuModel.set("sellerId",callprops.sellerId,{silent:!0}),item&&(skuModel.set("purchasable",item.purchasable,{silent:!0}),skuModel.set("addToCartMessage",item.addToCartMessage))})},"#add-to-package-button":function(){var t=element.find("div#add-to-package-button"),e=t.find("a.widgetModal");e.length&&$("#mobile-package-builder").insertBefore($("#postcard"));var i=String(_skuId),n=t.find("img"),r=n.attr("src"),o=!1;r&&(o=that.cartMap(r.substring(r.lastIndexOf("/")+1,r.lastIndexOf("."))));var s=skuCollection.findWhere({skuId:i});"undefined"==typeof s&&(s=new SkuModel({skuId:i}),skuCollection.add(s)),s.set("connectedDevice",!0,{silent:!0}),o&&(s.set("purchasable",o.purchasable,{silent:!0}),s.set("addToCartMessage",o.addToCartMessage))}},matched=!1;_.each(buttonType,function(t,e){element.find(e).length>0&&!matched&&(t(),matched=!0)})}};return EsiParser}),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");if(+function(t){"use strict";var e=t.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher");
}(jQuery),+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}t.fn.emulateTransitionEnd=function(e){var i=!1,n=this;t(this).one("bsTransitionEnd",function(){i=!0});var r=function(){i||t(n).trigger(t.support.transition.end)};return setTimeout(r,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){return t(e.target).is(this)?e.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),r=i.data("bs.alert");r||i.data("bs.alert",r=new n(this)),"string"==typeof e&&r[e].call(i)})}var i='[data-dismiss="alert"]',n=function(e){t(e).on("click",i,this.close)};n.VERSION="3.3.5",n.TRANSITION_DURATION=150,n.prototype.close=function(e){function i(){s.detach().trigger("closed.bs.alert").remove()}var r=t(this),o=r.attr("data-target");o||(o=r.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,""));var s=t(o);e&&e.preventDefault(),s.length||(s=r.closest(".alert")),s.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(s.removeClass("in"),t.support.transition&&s.hasClass("fade")?s.one("bsTransitionEnd",i).emulateTransitionEnd(n.TRANSITION_DURATION):i())};var r=t.fn.alert;t.fn.alert=e,t.fn.alert.Constructor=n,t.fn.alert.noConflict=function(){return t.fn.alert=r,this},t(document).on("click.bs.alert.data-api",i,n.prototype.close)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),r=n.data("bs.button"),o="object"==typeof e&&e;r||n.data("bs.button",r=new i(this,o)),"toggle"==e?r.toggle():e&&r.setState(e)})}var i=function(e,n){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,n),this.isLoading=!1};i.VERSION="3.3.5",i.DEFAULTS={loadingText:"loading..."},i.prototype.setState=function(e){var i="disabled",n=this.$element,r=n.is("input")?"val":"html",o=n.data();e+="Text",null==o.resetText&&n.data("resetText",n[r]()),setTimeout(t.proxy(function(){n[r](null==o[e]?this.options[e]:o[e]),"loadingText"==e?(this.isLoading=!0,n.addClass(i).attr(i,i)):this.isLoading&&(this.isLoading=!1,n.removeClass(i).removeAttr(i))},this),0)},i.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var i=this.$element.find("input");"radio"==i.prop("type")?(i.prop("checked")&&(t=!1),e.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==i.prop("type")&&(i.prop("checked")!==this.$element.hasClass("active")&&(t=!1),this.$element.toggleClass("active")),i.prop("checked",this.$element.hasClass("active")),t&&i.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var n=t.fn.button;t.fn.button=e,t.fn.button.Constructor=i,t.fn.button.noConflict=function(){return t.fn.button=n,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(i){var n=t(i.target);n.hasClass("btn")||(n=n.closest(".btn")),e.call(n,"toggle"),t(i.target).is('input[type="radio"]')||t(i.target).is('input[type="checkbox"]')||i.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),r=n.data("bs.carousel"),o=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e),s="string"==typeof e?e:o.slide;r||n.data("bs.carousel",r=new i(this,o)),"number"==typeof e?r.to(e):s?r[s]():o.interval&&r.pause().cycle()})}var i=function(e,i){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};i.VERSION="3.3.5",i.TRANSITION_DURATION=600,i.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},i.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},i.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},i.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},i.prototype.getItemForDirection=function(t,e){var i=this.getItemIndex(e),n="prev"==t&&0===i||"next"==t&&i==this.$items.length-1;if(n&&!this.options.wrap)return e;var r="prev"==t?-1:1,o=(i+r)%this.$items.length;return this.$items.eq(o)},i.prototype.to=function(t){var e=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));return t>this.$items.length-1||0>t?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):i==t?this.pause().cycle():this.slide(t>i?"next":"prev",this.$items.eq(t))},i.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},i.prototype.next=function(){return this.sliding?void 0:this.slide("next")},i.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},i.prototype.slide=function(e,n){var r=this.$element.find(".item.active"),o=n||this.getItemForDirection(e,r),s=this.interval,a="next"==e?"left":"right",l=this;if(o.hasClass("active"))return this.sliding=!1;var c=o[0],d=t.Event("slide.bs.carousel",{relatedTarget:c,direction:a});if(this.$element.trigger(d),!d.isDefaultPrevented()){if(this.sliding=!0,s&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var u=t(this.$indicators.children()[this.getItemIndex(o)]);u&&u.addClass("active")}var h=t.Event("slid.bs.carousel",{relatedTarget:c,direction:a});return t.support.transition&&this.$element.hasClass("slide")?(o.addClass(e),o[0].offsetWidth,r.addClass(a),o.addClass(a),r.one("bsTransitionEnd",function(){o.removeClass([e,a].join(" ")).addClass("active"),r.removeClass(["active",a].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(h)},0)}).emulateTransitionEnd(i.TRANSITION_DURATION)):(r.removeClass("active"),o.addClass("active"),this.sliding=!1,this.$element.trigger(h)),s&&this.cycle(),this}};var n=t.fn.carousel;t.fn.carousel=e,t.fn.carousel.Constructor=i,t.fn.carousel.noConflict=function(){return t.fn.carousel=n,this};var r=function(i){var n,r=t(this),o=t(r.attr("data-target")||(n=r.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""));if(o.hasClass("carousel")){var s=t.extend({},o.data(),r.data()),a=r.attr("data-slide-to");a&&(s.interval=!1),e.call(o,s),a&&o.data("bs.carousel").to(a),i.preventDefault()}};t(document).on("click.bs.carousel.data-api","[data-slide]",r).on("click.bs.carousel.data-api","[data-slide-to]",r),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var i=t(this);e.call(i,i.data())})})}(jQuery),+function(t){"use strict";function e(e){var i,n=e.attr("data-target")||(i=e.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"");return t(n)}function i(e){return this.each(function(){var i=t(this),r=i.data("bs.collapse"),o=t.extend({},n.DEFAULTS,i.data(),"object"==typeof e&&e);!r&&o.toggle&&/show|hide/.test(e)&&(o.toggle=!1),r||i.data("bs.collapse",r=new n(this,o)),"string"==typeof e&&r[e]()})}var n=function(e,i){this.$element=t(e),this.options=t.extend({},n.DEFAULTS,i),this.$trigger=t('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};n.VERSION="3.3.5",n.TRANSITION_DURATION=350,n.DEFAULTS={toggle:!0},n.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},n.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,r=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(r&&r.length&&(e=r.data("bs.collapse"),e&&e.transitioning))){var o=t.Event("show.bs.collapse");if(this.$element.trigger(o),!o.isDefaultPrevented()){r&&r.length&&(i.call(r,"hide"),e||r.data("bs.collapse",null));var s=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[s](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var a=function(){this.$element.removeClass("collapsing").addClass("collapse in")[s](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return a.call(this);var l=t.camelCase(["scroll",s].join("-"));this.$element.one("bsTransitionEnd",t.proxy(a,this)).emulateTransitionEnd(n.TRANSITION_DURATION)[s](this.$element[0][l])}}}},n.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var r=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return t.support.transition?void this.$element[i](0).one("bsTransitionEnd",t.proxy(r,this)).emulateTransitionEnd(n.TRANSITION_DURATION):r.call(this)}}},n.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},n.prototype.getParent=function(){return t(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(i,n){var r=t(n);this.addAriaAndCollapsedClass(e(r),r)},this)).end()},n.prototype.addAriaAndCollapsedClass=function(t,e){var i=t.hasClass("in");t.attr("aria-expanded",i),e.toggleClass("collapsed",!i).attr("aria-expanded",i)};var r=t.fn.collapse;t.fn.collapse=i,t.fn.collapse.Constructor=n,t.fn.collapse.noConflict=function(){return t.fn.collapse=r,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(n){var r=t(this);r.attr("data-target")||n.preventDefault();var o=e(r),s=o.data("bs.collapse"),a=s?"toggle":r.data();i.call(o,a)})}(jQuery),+function(t){"use strict";function e(e){var i=e.attr("data-target");i||(i=e.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var n=i&&t(i);return n&&n.length?n:e.parent()}function i(i){i&&3===i.which||(t(r).remove(),t(o).each(function(){var n=t(this),r=e(n),o={relatedTarget:this};r.hasClass("open")&&(i&&"click"==i.type&&/input|textarea/i.test(i.target.tagName)&&t.contains(r[0],i.target)||(r.trigger(i=t.Event("hide.bs.dropdown",o)),i.isDefaultPrevented()||(n.attr("aria-expanded","false"),r.removeClass("open").trigger("hidden.bs.dropdown",o))))}))}function n(e){return this.each(function(){var i=t(this),n=i.data("bs.dropdown");n||i.data("bs.dropdown",n=new s(this)),"string"==typeof e&&n[e].call(i)})}var r=".dropdown-backdrop",o='[data-toggle="dropdown"]',s=function(e){t(e).on("click.bs.dropdown",this.toggle)};s.VERSION="3.3.5",s.prototype.toggle=function(n){var r=t(this);if(!r.is(".disabled, :disabled")){var o=e(r),s=o.hasClass("open");if(i(),!s){"ontouchstart"in document.documentElement&&!o.closest(".navbar-nav").length&&t(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(t(this)).on("click",i);var a={relatedTarget:this};if(o.trigger(n=t.Event("show.bs.dropdown",a)),n.isDefaultPrevented())return;r.trigger("focus").attr("aria-expanded","true"),o.toggleClass("open").trigger("shown.bs.dropdown",a)}return!1}},s.prototype.keydown=function(i){if(/(38|40|27|32)/.test(i.which)&&!/input|textarea/i.test(i.target.tagName)){var n=t(this);if(i.preventDefault(),i.stopPropagation(),!n.is(".disabled, :disabled")){var r=e(n),s=r.hasClass("open");if(!s&&27!=i.which||s&&27==i.which)return 27==i.which&&r.find(o).trigger("focus"),n.trigger("click");var a=" li:not(.disabled):visible a",l=r.find(".dropdown-menu"+a);if(l.length){var c=l.index(i.target);38==i.which&&c>0&&c--,40==i.which&&c<l.length-1&&c++,~c||(c=0),l.eq(c).trigger("focus")}}}};var a=t.fn.dropdown;t.fn.dropdown=n,t.fn.dropdown.Constructor=s,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=a,this},t(document).on("click.bs.dropdown.data-api",i).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",o,s.prototype.toggle).on("keydown.bs.dropdown.data-api",o,s.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",s.prototype.keydown)}(jQuery),+function(t){"use strict";function e(e,n){return this.each(function(){var r=t(this),o=r.data("bs.modal"),s=t.extend({},i.DEFAULTS,r.data(),"object"==typeof e&&e);o||r.data("bs.modal",o=new i(this,s)),"string"==typeof e?o[e](n):s.show&&o.show(n)})}var i=function(e,i){this.options=i,this.$body=t(document.body),this.$element=t(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};i.VERSION="3.3.5",i.TRANSITION_DURATION=300,i.BACKDROP_TRANSITION_DURATION=150,i.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},i.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},i.prototype.show=function(e){var n=this,r=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(r),this.isShown||r.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){n.$element.one("mouseup.dismiss.bs.modal",function(e){t(e.target).is(n.$element)&&(n.ignoreBackdropClick=!0)})}),this.backdrop(function(){var r=t.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(n.$body),n.$element.show().scrollTop(0),n.adjustDialog(),r&&n.$element[0].offsetWidth,n.$element.addClass("in"),n.enforceFocus();var o=t.Event("shown.bs.modal",{relatedTarget:e});r?n.$dialog.one("bsTransitionEnd",function(){n.$element.trigger("focus").trigger(o)}).emulateTransitionEnd(i.TRANSITION_DURATION):n.$element.trigger("focus").trigger(o)}))},i.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(i.TRANSITION_DURATION):this.hideModal())},i.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},i.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},i.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},i.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},i.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},i.prototype.backdrop=function(e){var n=this,r=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var o=t.support.transition&&r;if(this.$backdrop=t(document.createElement("div")).addClass("modal-backdrop "+r).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),o&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;o?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var s=function(){n.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",s).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):s()}else e&&e()},i.prototype.handleUpdate=function(){this.adjustDialog()},i.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},i.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},i.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},i.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},i.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},i.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var n=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=i,t.fn.modal.noConflict=function(){return t.fn.modal=n,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(i){var n=t(this),r=n.attr("href"),o=t(n.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,"")),s=o.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(r)&&r},o.data(),n.data());n.is("a")&&i.preventDefault(),o.one("show.bs.modal",function(t){t.isDefaultPrevented()||o.one("hidden.bs.modal",function(){n.is(":visible")&&n.trigger("focus")})}),e.call(o,s,this)})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),r=n.data("bs.tooltip"),o="object"==typeof e&&e;(r||!/destroy|hide/.test(e))&&(r||n.data("bs.tooltip",r=new i(this,o)),"string"==typeof e&&r[e]())})}var i=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",t,e)};i.VERSION="3.3.5",i.TRANSITION_DURATION=150,i.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},i.prototype.init=function(e,i,n){if(this.enabled=!0,this.type=e,this.$element=t(i),this.options=this.getOptions(n),this.$viewport=this.options.viewport&&t(t.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var r=this.options.trigger.split(" "),o=r.length;o--;){var s=r[o];if("click"==s)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=s){var a="hover"==s?"mouseenter":"focusin",l="hover"==s?"mouseleave":"focusout";this.$element.on(a+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},i.prototype.getDelegateOptions=function(){var e={},i=this.getDefaults();return this._options&&t.each(this._options,function(t,n){i[t]!=n&&(e[t]=n)}),e},i.prototype.enter=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),e instanceof t.Event&&(i.inState["focusin"==e.type?"focus":"hover"]=!0),i.tip().hasClass("in")||"in"==i.hoverState?void(i.hoverState="in"):(clearTimeout(i.timeout),i.hoverState="in",i.options.delay&&i.options.delay.show?void(i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)):i.show())},i.prototype.isInStateTrue=function(){for(var t in this.inState)if(this.inState[t])return!0;return!1},i.prototype.leave=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),e instanceof t.Event&&(i.inState["focusout"==e.type?"focus":"hover"]=!1),i.isInStateTrue()?void 0:(clearTimeout(i.timeout),i.hoverState="out",i.options.delay&&i.options.delay.hide?void(i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)):i.hide())},i.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var n=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!n)return;var r=this,o=this.tip(),s=this.getUID(this.type);this.setContent(),o.attr("id",s),this.$element.attr("aria-describedby",s),this.options.animation&&o.addClass("fade");var a="function"==typeof this.options.placement?this.options.placement.call(this,o[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,c=l.test(a);c&&(a=a.replace(l,"")||"top"),o.detach().css({top:0,left:0,display:"block"}).addClass(a).data("bs."+this.type,this),this.options.container?o.appendTo(this.options.container):o.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var d=this.getPosition(),u=o[0].offsetWidth,h=o[0].offsetHeight;if(c){var p=a,f=this.getPosition(this.$viewport);a="bottom"==a&&d.bottom+h>f.bottom?"top":"top"==a&&d.top-h<f.top?"bottom":"right"==a&&d.right+u>f.width?"left":"left"==a&&d.left-u<f.left?"right":a,o.removeClass(p).addClass(a)}var g=this.getCalculatedOffset(a,d,u,h);this.applyPlacement(g,a);var m=function(){var t=r.hoverState;r.$element.trigger("shown.bs."+r.type),r.hoverState=null,"out"==t&&r.leave(r)};t.support.transition&&this.$tip.hasClass("fade")?o.one("bsTransitionEnd",m).emulateTransitionEnd(i.TRANSITION_DURATION):m()}},i.prototype.applyPlacement=function(e,i){var n=this.tip(),r=n[0].offsetWidth,o=n[0].offsetHeight,s=parseInt(n.css("margin-top"),10),a=parseInt(n.css("margin-left"),10);isNaN(s)&&(s=0),isNaN(a)&&(a=0),e.top+=s,e.left+=a,t.offset.setOffset(n[0],t.extend({using:function(t){n.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),n.addClass("in");var l=n[0].offsetWidth,c=n[0].offsetHeight;"top"==i&&c!=o&&(e.top=e.top+o-c);var d=this.getViewportAdjustedDelta(i,e,l,c);d.left?e.left+=d.left:e.top+=d.top;var u=/top|bottom/.test(i),h=u?2*d.left-r+l:2*d.top-o+c,p=u?"offsetWidth":"offsetHeight";n.offset(e),this.replaceArrow(h,n[0][p],u)},i.prototype.replaceArrow=function(t,e,i){this.arrow().css(i?"left":"top",50*(1-t/e)+"%").css(i?"top":"left","")},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},i.prototype.hide=function(e){function n(){"in"!=r.hoverState&&o.detach(),r.$element.removeAttr("aria-describedby").trigger("hidden.bs."+r.type),e&&e()}var r=this,o=t(this.$tip),s=t.Event("hide.bs."+this.type);return this.$element.trigger(s),s.isDefaultPrevented()?void 0:(o.removeClass("in"),t.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",n).emulateTransitionEnd(i.TRANSITION_DURATION):n(),this.hoverState=null,this)},i.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},i.prototype.hasContent=function(){return this.getTitle()},i.prototype.getPosition=function(e){e=e||this.$element;var i=e[0],n="BODY"==i.tagName,r=i.getBoundingClientRect();null==r.width&&(r=t.extend({},r,{width:r.right-r.left,height:r.bottom-r.top}));var o=n?{top:0,left:0}:e.offset(),s={scroll:n?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},a=n?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},r,s,a,o)},i.prototype.getCalculatedOffset=function(t,e,i,n){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-i/2}:"top"==t?{top:e.top-n,left:e.left+e.width/2-i/2}:"left"==t?{top:e.top+e.height/2-n/2,left:e.left-i}:{top:e.top+e.height/2-n/2,left:e.left+e.width}},i.prototype.getViewportAdjustedDelta=function(t,e,i,n){var r={top:0,left:0};if(!this.$viewport)return r;var o=this.options.viewport&&this.options.viewport.padding||0,s=this.getPosition(this.$viewport);if(/right|left/.test(t)){var a=e.top-o-s.scroll,l=e.top+o-s.scroll+n;a<s.top?r.top=s.top-a:l>s.top+s.height&&(r.top=s.top+s.height-l)}else{var c=e.left-o,d=e.left+o+i;c<s.left?r.left=s.left-c:d>s.right&&(r.left=s.left+s.width-d)}return r},i.prototype.getTitle=function(){var t,e=this.$element,i=this.options;return t=e.attr("data-original-title")||("function"==typeof i.title?i.title.call(e[0]):i.title)},i.prototype.getUID=function(t){do t+=~~(1e6*Math.random());while(document.getElementById(t));return t},i.prototype.tip=function(){if(!this.$tip&&(this.$tip=t(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},i.prototype.enable=function(){this.enabled=!0},i.prototype.disable=function(){this.enabled=!1},i.prototype.toggleEnabled=function(){this.enabled=!this.enabled},i.prototype.toggle=function(e){var i=this;e&&(i=t(e.currentTarget).data("bs."+this.type),i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i))),e?(i.inState.click=!i.inState.click,i.isInStateTrue()?i.enter(i):i.leave(i)):i.tip().hasClass("in")?i.leave(i):i.enter(i)},i.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type),t.$tip&&t.$tip.detach(),t.$tip=null,t.$arrow=null,t.$viewport=null})};var n=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=i,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=n,this}}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),r=n.data("bs.popover"),o="object"==typeof e&&e;(r||!/destroy|hide/.test(e))&&(r||n.data("bs.popover",r=new i(this,o)),"string"==typeof e&&r[e]())})}var i=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");i.VERSION="3.3.5",i.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),i.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),i.prototype.constructor=i,i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),i=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof i?"html":"append":"text"](i),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},i.prototype.hasContent=function(){return this.getTitle()||this.getContent()},i.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var n=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=i,t.fn.popover.noConflict=function(){return t.fn.popover=n,this}}(jQuery),+function(t){"use strict";function e(i,n){this.$body=t(document.body),this.$scrollElement=t(t(i).is(document.body)?window:i),this.options=t.extend({},e.DEFAULTS,n),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",t.proxy(this.process,this)),this.refresh(),this.process()}function i(i){return this.each(function(){var n=t(this),r=n.data("bs.scrollspy"),o="object"==typeof i&&i;r||n.data("bs.scrollspy",r=new e(this,o)),"string"==typeof i&&r[i]()})}e.VERSION="3.3.5",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e=this,i="offset",n=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),t.isWindow(this.$scrollElement[0])||(i="position",n=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var e=t(this),r=e.data("target")||e.attr("href"),o=/^#./.test(r)&&t(r);return o&&o.length&&o.is(":visible")&&[[o[i]().top+n,r]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){e.offsets.push(this[0]),e.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,i=this.getScrollHeight(),n=this.options.offset+i-this.$scrollElement.height(),r=this.offsets,o=this.targets,s=this.activeTarget;if(this.scrollHeight!=i&&this.refresh(),e>=n)return s!=(t=o[o.length-1])&&this.activate(t);if(s&&e<r[0])return this.activeTarget=null,this.clear();for(t=r.length;t--;)s!=o[t]&&e>=r[t]&&(void 0===r[t+1]||e<r[t+1])&&this.activate(o[t])},e.prototype.activate=function(e){this.activeTarget=e,this.clear();var i=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',n=t(i).parents("li").addClass("active");n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate.bs.scrollspy")},e.prototype.clear=function(){t(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var n=t.fn.scrollspy;t.fn.scrollspy=i,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){
return t.fn.scrollspy=n,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);i.call(e,e.data())})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),r=n.data("bs.tab");r||n.data("bs.tab",r=new i(this)),"string"==typeof e&&r[e]()})}var i=function(e){this.element=t(e)};i.VERSION="3.3.5",i.TRANSITION_DURATION=150,i.prototype.show=function(){var e=this.element,i=e.closest("ul:not(.dropdown-menu)"),n=e.data("target");if(n||(n=e.attr("href"),n=n&&n.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var r=i.find(".active:last a"),o=t.Event("hide.bs.tab",{relatedTarget:e[0]}),s=t.Event("show.bs.tab",{relatedTarget:r[0]});if(r.trigger(o),e.trigger(s),!s.isDefaultPrevented()&&!o.isDefaultPrevented()){var a=t(n);this.activate(e.closest("li"),i),this.activate(a,a.parent(),function(){r.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:r[0]})})}}},i.prototype.activate=function(e,n,r){function o(){s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),a?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu").length&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),r&&r()}var s=n.find("> .active"),a=r&&t.support.transition&&(s.length&&s.hasClass("fade")||!!n.find("> .fade").length);s.length&&a?s.one("bsTransitionEnd",o).emulateTransitionEnd(i.TRANSITION_DURATION):o(),s.removeClass("in")};var n=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=i,t.fn.tab.noConflict=function(){return t.fn.tab=n,this};var r=function(i){i.preventDefault(),e.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',r).on("click.bs.tab.data-api",'[data-toggle="pill"]',r)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),r=n.data("bs.affix"),o="object"==typeof e&&e;r||n.data("bs.affix",r=new i(this,o)),"string"==typeof e&&r[e]()})}var i=function(e,n){this.options=t.extend({},i.DEFAULTS,n),this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(e),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};i.VERSION="3.3.5",i.RESET="affix affix-top affix-bottom",i.DEFAULTS={offset:0,target:window},i.prototype.getState=function(t,e,i,n){var r=this.$target.scrollTop(),o=this.$element.offset(),s=this.$target.height();if(null!=i&&"top"==this.affixed)return i>r?"top":!1;if("bottom"==this.affixed)return null!=i?r+this.unpin<=o.top?!1:"bottom":t-n>=r+s?!1:"bottom";var a=null==this.affixed,l=a?r:o.top,c=a?s:e;return null!=i&&i>=r?"top":null!=n&&l+c>=t-n?"bottom":!1},i.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(i.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},i.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},i.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=this.$element.height(),n=this.options.offset,r=n.top,o=n.bottom,s=Math.max(t(document).height(),t(document.body).height());"object"!=typeof n&&(o=r=n),"function"==typeof r&&(r=n.top(this.$element)),"function"==typeof o&&(o=n.bottom(this.$element));var a=this.getState(s,e,r,o);if(this.affixed!=a){null!=this.unpin&&this.$element.css("top","");var l="affix"+(a?"-"+a:""),c=t.Event(l+".bs.affix");if(this.$element.trigger(c),c.isDefaultPrevented())return;this.affixed=a,this.unpin="bottom"==a?this.getPinnedOffset():null,this.$element.removeClass(i.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==a&&this.$element.offset({top:s-e-o})}};var n=t.fn.affix;t.fn.affix=e,t.fn.affix.Constructor=i,t.fn.affix.noConflict=function(){return t.fn.affix=n,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var i=t(this),n=i.data();n.offset=n.offset||{},null!=n.offsetBottom&&(n.offset.bottom=n.offsetBottom),null!=n.offsetTop&&(n.offset.top=n.offsetTop),e.call(i,n)})})}(jQuery),+function(t){"use strict";t.fn.popover.Constructor.prototype.bootstrapHide=t.fn.popover.Constructor.prototype.hide,t.fn.popover.Constructor.prototype.hide=function(){this.inState={click:!1,hover:!1,focus:!1},this.bootstrapHide()},t.fn.popover.Constructor.prototype.hideTooltip=function(t){t.preventDefault(),this.$element.popover("hide")},t.fn.popover.Constructor.prototype.popoverShown=function(){var e=this.tip();this.options.expand&&e.addClass("popover-expand"),e.on("click",".popover-close",t.proxy(this.hideTooltip,this)),t(window).on("resize",t.proxy(this.windowResize,this)),this.options.expand||this.listenToBodyClick()},t.fn.popover.Constructor.prototype.listenToBodyClick=function(){var e=this;setTimeout(function(){t("body").on("click",t.proxy(e.bodyClick,e))},1)},t.fn.popover.Constructor.prototype.bodyClick=function(t){var e=this.tip();0===e.find(t.target).length&&this.hide()},t.fn.popover.Constructor.prototype.popoverHidden=function(){t("body").off("click",t.proxy(this.hideTooltip,this)),t("body").off("click",t.proxy(this.bodyClick,this)),t(window).off("resize",t.proxy(this.windowResize,this))},t.fn.popover.Constructor.prototype.bootstrapApplyPlacement=t.fn.popover.Constructor.prototype.applyPlacement,t.fn.popover.Constructor.prototype.applyPlacement=function(t,e){var i=this.tip();if(this.options.expand){var n=~~(this.$element.offset().left+this.$element.outerWidth()/2)-i.offset().left;0>n&&(n=0),n+="px",this.arrow().css("left",n)}else this.bootstrapApplyPlacement.call(this,t,e)},t.fn.popover.Constructor.prototype.getPlacementDetails=function(){var t=this.tip(),e="function"==typeof this.options.placement?this.options.placement.call(this,t[0],this.$element[0]):this.options.placement,i=/\s?auto?\s?/i,n=i.test(e);n&&(e=e.replace(i,"")||"top");var r=this.getPosition(),o=t[0].offsetWidth,s=t[0].offsetHeight;if(n){var a=this.getPosition(this.$viewport);e="bottom"==e&&r.bottom+s>a.bottom?"top":"top"==e&&r.top-s<a.top?"bottom":"right"==e&&r.right+o>a.width?"left":"left"==e&&r.left-o<a.left?"right":e}var l=this.getCalculatedOffset(e,r,o,s);return{calculatedOffset:l,placement:e}},t.fn.popover.Constructor.prototype.windowResize=function(){if(this.options.expand)this.applyPlacement.call(this);else{var t=this.getPlacementDetails();this.applyPlacement.call(this,t.calculatedOffset,t.placement)}};var e=t.fn.popover.Constructor.prototype.init;t.fn.popover.Constructor.prototype.init=function(){e.apply(this,arguments),this.$element.on("show.bs.popover",t.proxy(this.popoverShown,this)),this.$element.on("hide.bs.popover",t.proxy(this.popoverHidden,this))},t.fn.popover.Constructor.DEFAULTS=t.extend(t.fn.popover.Constructor.DEFAULTS,{template:'<div class="popover" role="tooltip"><div class="arrow"></div><a href="#" class="popover-close"></a><h3 class="popover-title"></h3><div class="popover-content"></div></div>'})}(jQuery),define("sc-bestbuy-style-guide/dist/js/bootstrap",function(){}),function(t,e){if("function"==typeof define&&define.amd)define("backbone.radio",["backbone","underscore"],function(t,i){return e(t,i)});else if("undefined"!=typeof exports){var i=require("backbone"),n=require("underscore");module.exports=e(i,n)}else e(t.Backbone,t._)}(this,function(t,e){"use strict";function i(t,e,i,n){var r=t[e];return i&&i!==r.callback&&i!==r.callback._callback||n&&n!==r.context?void 0:(delete t[e],!0)}function n(t,n,r,o){t||(t={});for(var s=n?[n]:e.keys(t),a=!1,l=0,c=s.length;c>l;l++)n=s[l],t[n]&&i(t,n,r,o)&&(a=!0);return a}function r(t){return c[t]||(c[t]=e.partial(a.log,t))}function o(t){return e.isFunction(t)?t:function(){return t}}var s=t.Radio,a=t.Radio={};a.VERSION="0.9.0",a.noConflict=function(){return t.Radio=s,this},a.DEBUG=!1,a._debugText=function(t,e,i){return t+(i?" on the "+i+" channel":"")+': "'+e+'"'},a.debugLog=function(t,e,i){a.DEBUG&&console&&console.warn&&console.warn(a._debugText(t,e,i))};var l=/\s+/;a._eventsApi=function(t,i,n,r){if(!n)return!1;var o={};if("object"==typeof n){for(var s in n){var a=t[i].apply(t,[s,n[s]].concat(r));l.test(s)?e.extend(o,a):o[s]=a}return o}if(l.test(n)){for(var c=n.split(l),d=0,u=c.length;u>d;d++)o[c[d]]=t[i].apply(t,[c[d]].concat(r));return o}return!1},a._callHandler=function(t,e,i){var n=i[0],r=i[1],o=i[2];switch(i.length){case 0:return t.call(e);case 1:return t.call(e,n);case 2:return t.call(e,n,r);case 3:return t.call(e,n,r,o);default:return t.apply(e,i)}};var c={};e.extend(a,{log:function(t,i){var n=e.rest(arguments,2);console.log("["+t+'] "'+i+'"',n)},tuneIn:function(t){var e=a.channel(t);return e._tunedIn=!0,e.on("all",r(t)),this},tuneOut:function(t){var e=a.channel(t);return e._tunedIn=!1,e.off("all",r(t)),delete c[t],this}}),a.Commands={command:function(t){var i=e.rest(arguments);if(a._eventsApi(this,"command",t,i))return this;var n=this.channelName,r=this._commands;if(n&&this._tunedIn&&a.log.apply(this,[n,t].concat(i)),r&&(r[t]||r["default"])){var o=r[t]||r["default"];i=r[t]?i:arguments,a._callHandler(o.callback,o.context,i)}else a.debugLog("An unhandled command was fired",t,n);return this},comply:function(t,e,i){return a._eventsApi(this,"comply",t,[e,i])?this:(this._commands||(this._commands={}),this._commands[t]&&a.debugLog("A command was overwritten",t,this.channelName),this._commands[t]={callback:e,context:i||this},this)},complyOnce:function(t,i,n){if(a._eventsApi(this,"complyOnce",t,[i,n]))return this;var r=this,o=e.once(function(){return r.stopComplying(t),i.apply(this,arguments)});return this.comply(t,o,n)},stopComplying:function(t,e,i){return a._eventsApi(this,"stopComplying",t)?this:(t||e||i?n(this._commands,t,e,i)||a.debugLog("Attempted to remove the unregistered command",t,this.channelName):delete this._commands,this)}},a.Requests={request:function(t){var i=e.rest(arguments),n=a._eventsApi(this,"request",t,i);if(n)return n;var r=this.channelName,o=this._requests;if(r&&this._tunedIn&&a.log.apply(this,[r,t].concat(i)),o&&(o[t]||o["default"])){var s=o[t]||o["default"];return i=o[t]?i:arguments,a._callHandler(s.callback,s.context,i)}a.debugLog("An unhandled request was fired",t,r)},reply:function(t,e,i){return a._eventsApi(this,"reply",t,[e,i])?this:(this._requests||(this._requests={}),this._requests[t]&&a.debugLog("A request was overwritten",t,this.channelName),this._requests[t]={callback:o(e),context:i||this},this)},replyOnce:function(t,i,n){if(a._eventsApi(this,"replyOnce",t,[i,n]))return this;var r=this,s=e.once(function(){return r.stopReplying(t),o(i).apply(this,arguments)});return this.reply(t,s,n)},stopReplying:function(t,e,i){return a._eventsApi(this,"stopReplying",t)?this:(t||e||i?n(this._requests,t,e,i)||a.debugLog("Attempted to remove the unregistered request",t,this.channelName):delete this._requests,this)}},a._channels={},a.channel=function(t){if(!t)throw new Error("You must provide a name for the channel.");return a._channels[t]?a._channels[t]:a._channels[t]=new a.Channel(t)},a.Channel=function(t){this.channelName=t},e.extend(a.Channel.prototype,t.Events,a.Commands,a.Requests,{reset:function(){return this.off(),this.stopListening(),this.stopComplying(),this.stopReplying(),this}});var d,u,h=[t.Events,a.Commands,a.Requests];return e.each(h,function(t){e.each(t,function(t,i){a[i]=function(t){return u=e.rest(arguments),d=this.channel(t),d[i].apply(d,u)}})}),a.reset=function(t){var i=t?[this._channels[t]]:this._channels;e.invoke(i,"reset")},a}),function(t,e){if("object"==typeof exports){var i=require("underscore"),n=require("backbone");module.exports=e(i,n)}else"function"==typeof define&&define.amd&&define("backbone.babysitter",["underscore","backbone"],e)}(this,function(t,e){"option strict";return e.ChildViewContainer=function(t,e){var i=function(t){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),e.each(t,this.add,this)};e.extend(i.prototype,{add:function(t,e){var i=t.cid;this._views[i]=t,t.model&&(this._indexByModel[t.model.cid]=i),e&&(this._indexByCustom[e]=i),this._updateLength()},findByModel:function(t){return this.findByModelCid(t.cid)},findByModelCid:function(t){var e=this._indexByModel[t];return this.findByCid(e)},findByCustom:function(t){var e=this._indexByCustom[t];return this.findByCid(e)},findByIndex:function(t){return e.values(this._views)[t]},findByCid:function(t){return this._views[t]},remove:function(t){var i=t.cid;t.model&&delete this._indexByModel[t.model.cid],e.any(this._indexByCustom,function(t,e){return t===i?(delete this._indexByCustom[e],!0):void 0},this),delete this._views[i],this._updateLength()},call:function(t){this.apply(t,e.tail(arguments))},apply:function(t,i){e.each(this._views,function(n){e.isFunction(n[t])&&n[t].apply(n,i||[])})},_updateLength:function(){this.length=e.size(this._views)}});var n=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return e.each(n,function(t){i.prototype[t]=function(){var i=e.values(this._views),n=[i].concat(e.toArray(arguments));return e[t].apply(e,n)}}),i}(e,t),e.ChildViewContainer}),function(t,e){if("function"==typeof define&&define.amd)define("backbone._marionette",["backbone","underscore"],function(i,n){return t.Marionette=t.Mn=e(t,i,n)});else if("undefined"!=typeof exports){var i=require("backbone"),n=require("underscore");module.exports=e(t,i,n)}else t.Marionette=t.Mn=e(t,t.Backbone,t._)}(this,function(t,e,i){"use strict";!function(t,e){var i=t.ChildViewContainer;return t.ChildViewContainer=function(t,e){var i=function(t){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),e.each(t,this.add,this)};e.extend(i.prototype,{add:function(t,e){var i=t.cid;return this._views[i]=t,t.model&&(this._indexByModel[t.model.cid]=i),e&&(this._indexByCustom[e]=i),this._updateLength(),this},findByModel:function(t){return this.findByModelCid(t.cid)},findByModelCid:function(t){var e=this._indexByModel[t];return this.findByCid(e)},findByCustom:function(t){var e=this._indexByCustom[t];return this.findByCid(e)},findByIndex:function(t){return e.values(this._views)[t]},findByCid:function(t){return this._views[t]},remove:function(t){var i=t.cid;return t.model&&delete this._indexByModel[t.model.cid],e.any(this._indexByCustom,function(t,e){return t===i?(delete this._indexByCustom[e],!0):void 0},this),delete this._views[i],this._updateLength(),this},call:function(t){this.apply(t,e.tail(arguments))},apply:function(t,i){e.each(this._views,function(n){e.isFunction(n[t])&&n[t].apply(n,i||[])})},_updateLength:function(){this.length=e.size(this._views)}});var n=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck","reduce"];return e.each(n,function(t){i.prototype[t]=function(){var i=e.values(this._views),n=[i].concat(e.toArray(arguments));return e[t].apply(e,n)}}),i}(t,e),t.ChildViewContainer.VERSION="0.1.10",t.ChildViewContainer.noConflict=function(){return t.ChildViewContainer=i,this},t.ChildViewContainer}(e,i),function(t,e){var i=t.Wreqr,n=t.Wreqr={};return t.Wreqr.VERSION="1.3.5",t.Wreqr.noConflict=function(){return t.Wreqr=i,this},n.Handlers=function(t,e){var i=function(t){this.options=t,this._wreqrHandlers={},e.isFunction(this.initialize)&&this.initialize(t)};return i.extend=t.Model.extend,e.extend(i.prototype,t.Events,{setHandlers:function(t){e.each(t,function(t,i){var n=null;e.isObject(t)&&!e.isFunction(t)&&(n=t.context,t=t.callback),this.setHandler(i,t,n)},this)},setHandler:function(t,e,i){var n={callback:e,context:i};this._wreqrHandlers[t]=n,this.trigger("handler:add",t,e,i)},hasHandler:function(t){return!!this._wreqrHandlers[t]},getHandler:function(t){var e=this._wreqrHandlers[t];if(e)return function(){return e.callback.apply(e.context,arguments)}},removeHandler:function(t){delete this._wreqrHandlers[t]},removeAllHandlers:function(){this._wreqrHandlers={}}}),i}(t,e),n.CommandStorage=function(){var i=function(t){this.options=t,this._commands={},e.isFunction(this.initialize)&&this.initialize(t)};return e.extend(i.prototype,t.Events,{getCommands:function(t){var e=this._commands[t];return e||(e={command:t,instances:[]},this._commands[t]=e),e},addCommand:function(t,e){var i=this.getCommands(t);i.instances.push(e)},clearCommands:function(t){var e=this.getCommands(t);e.instances=[]}}),i}(),n.Commands=function(t,e){return t.Handlers.extend({storageType:t.CommandStorage,constructor:function(e){this.options=e||{},this._initializeStorage(this.options),this.on("handler:add",this._executeCommands,this),t.Handlers.prototype.constructor.apply(this,arguments)},execute:function(t){t=arguments[0];var i=e.rest(arguments);this.hasHandler(t)?this.getHandler(t).apply(this,i):this.storage.addCommand(t,i)},_executeCommands:function(t,i,n){var r=this.storage.getCommands(t);e.each(r.instances,function(t){i.apply(n,t)}),this.storage.clearCommands(t)},_initializeStorage:function(t){var i,n=t.storageType||this.storageType;i=e.isFunction(n)?new n:n,this.storage=i}})}(n,e),n.RequestResponse=function(t,e){return t.Handlers.extend({request:function(t){return this.hasHandler(t)?this.getHandler(t).apply(this,e.rest(arguments)):void 0}})}(n,e),n.EventAggregator=function(t,e){var i=function(){};return i.extend=t.Model.extend,e.extend(i.prototype,t.Events),i}(t,e),n.Channel=function(i){var n=function(e){this.vent=new t.Wreqr.EventAggregator,this.reqres=new t.Wreqr.RequestResponse,this.commands=new t.Wreqr.Commands,this.channelName=e};return e.extend(n.prototype,{reset:function(){return this.vent.off(),this.vent.stopListening(),this.reqres.removeAllHandlers(),this.commands.removeAllHandlers(),this},connectEvents:function(t,e){return this._connect("vent",t,e),this},connectCommands:function(t,e){return this._connect("commands",t,e),this},connectRequests:function(t,e){return this._connect("reqres",t,e),this},_connect:function(t,i,n){if(i){n=n||this;var r="vent"===t?"on":"setHandler";e.each(i,function(i,o){this[t][r](o,e.bind(i,n))},this)}}}),n}(n),n.radio=function(t,e){var i=function(){this._channels={},this.vent={},this.commands={},this.reqres={},this._proxyMethods()};e.extend(i.prototype,{channel:function(t){if(!t)throw new Error("Channel must receive a name");return this._getChannel(t)},_getChannel:function(e){var i=this._channels[e];return i||(i=new t.Channel(e),this._channels[e]=i),i},_proxyMethods:function(){e.each(["vent","commands","reqres"],function(t){e.each(n[t],function(e){this[t][e]=r(this,t,e)},this)},this)}});var n={vent:["on","off","trigger","once","stopListening","listenTo","listenToOnce"],commands:["execute","setHandler","setHandlers","removeHandler","removeAllHandlers"],reqres:["request","setHandler","setHandlers","removeHandler","removeAllHandlers"]},r=function(t,i,n){return function(r){var o=t._getChannel(r)[i];return o[n].apply(o,e.rest(arguments))}};return new i}(n,e),t.Wreqr}(e,i);var n=t.Marionette,r=t.Mn,o=e.Marionette={};o.VERSION="2.4.3",o.noConflict=function(){return t.Marionette=n,t.Mn=r,this},e.Marionette=o,o.Deferred=e.$.Deferred,o.extend=e.Model.extend,o.isNodeAttached=function(t){return e.$.contains(document.documentElement,t)},o.mergeOptions=function(t,e){t&&i.extend(this,i.pick(t,e))},o.getOption=function(t,e){return t&&e?t.options&&void 0!==t.options[e]?t.options[e]:t[e]:void 0},o.proxyGetOption=function(t){return o.getOption(this,t)},o._getValue=function(t,e,n){return i.isFunction(t)&&(t=n?t.apply(e,n):t.call(e)),t},o.normalizeMethods=function(t){return i.reduce(t,function(t,e,n){return i.isFunction(e)||(e=this[e]),e&&(t[n]=e),t},{},this)},o.normalizeUIString=function(t,e){return t.replace(/@ui\.[a-zA-Z_$0-9]*/g,function(t){return e[t.slice(4)]})},o.normalizeUIKeys=function(t,e){return i.reduce(t,function(t,i,n){var r=o.normalizeUIString(n,e);return t[r]=i,t},{})},o.normalizeUIValues=function(t,e,n){return i.each(t,function(r,s){i.isString(r)?t[s]=o.normalizeUIString(r,e):i.isObject(r)&&i.isArray(n)&&(i.extend(r,o.normalizeUIValues(i.pick(r,n),e)),i.each(n,function(t){var n=r[t];i.isString(n)&&(r[t]=o.normalizeUIString(n,e))}))}),t},o.actAsCollection=function(t,e){var n=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];i.each(n,function(n){t[n]=function(){var t=i.values(i.result(this,e)),r=[t].concat(i.toArray(arguments));return i[n].apply(i,r)}})};var s=o.deprecate=function(t,e){i.isObject(t)&&(t=t.prev+" is going to be removed in the future. Please use "+t.next+" instead."+(t.url?" See: "+t.url:"")),void 0!==e&&e||s._cache[t]||(s._warn("Deprecation warning: "+t),s._cache[t]=!0)};s._warn="undefined"!=typeof console&&(console.warn||console.log)||function(){},s._cache={},o._triggerMethod=function(){function t(t,e,i){return i.toUpperCase()}var e=/(^|:)(\w)/gi;return function(n,r,o){var s=arguments.length<3;s&&(o=r,r=o[0]);var a,l="on"+r.replace(e,t),c=n[l];return i.isFunction(c)&&(a=c.apply(n,s?i.rest(o):o)),i.isFunction(n.trigger)&&(s+o.length>1?n.trigger.apply(n,s?o:[r].concat(i.drop(o,0))):n.trigger(r)),a}}(),o.triggerMethod=function(t){return o._triggerMethod(this,arguments)},o.triggerMethodOn=function(t){var e=i.isFunction(t.triggerMethod)?t.triggerMethod:o.triggerMethod;return e.apply(t,i.rest(arguments))},o.MonitorDOMRefresh=function(t){function e(){t._isShown=!0,n()}function i(){t._isRendered=!0,n()}function n(){t._isShown&&t._isRendered&&o.isNodeAttached(t.el)&&o.triggerMethodOn(t,"dom:refresh",t)}t._isDomRefreshMonitored||(t._isDomRefreshMonitored=!0,t.on({show:e,render:i}))},function(t){function e(e,n,r,o){var s=o.split(/\s+/);i.each(s,function(i){var o=e[i];if(!o)throw new t.Error('Method "'+i+'" was configured as an event handler, but does not exist.');e.listenTo(n,r,o)})}function n(t,e,i,n){t.listenTo(e,i,n)}function r(t,e,n,r){var o=r.split(/\s+/);i.each(o,function(i){var r=t[i];t.stopListening(e,n,r)})}function o(t,e,i,n){t.stopListening(e,i,n)}function s(e,n,r,o,s){if(n&&r){if(!i.isObject(r))throw new t.Error({message:"Bindings must be an object or function.",url:"marionette.functions.html#marionettebindentityevents"});r=t._getValue(r,e),i.each(r,function(t,r){i.isFunction(t)?o(e,n,r,t):s(e,n,r,t)})}}t.bindEntityEvents=function(t,i,r){s(t,i,r,n,e)},t.unbindEntityEvents=function(t,e,i){s(t,e,i,o,r)},t.proxyBindEntityEvents=function(e,i){return t.bindEntityEvents(this,e,i)},t.proxyUnbindEntityEvents=function(e,i){return t.unbindEntityEvents(this,e,i)}}(o);var a=["description","fileName","lineNumber","name","message","number"];return o.Error=o.extend.call(Error,{urlRoot:"http://marionettejs.com/docs/v"+o.VERSION+"/",constructor:function(t,e){i.isObject(t)?(e=t,t=e.message):e||(e={});var n=Error.call(this,t);i.extend(this,i.pick(n,a),i.pick(e,a)),this.captureStackTrace(),e.url&&(this.url=this.urlRoot+e.url)},captureStackTrace:function(){Error.captureStackTrace&&Error.captureStackTrace(this,o.Error)},toString:function(){return this.name+": "+this.message+(this.url?" See: "+this.url:"")}}),o.Error.extend=o.extend,o.Callbacks=function(){this._deferred=o.Deferred(),this._callbacks=[]},i.extend(o.Callbacks.prototype,{add:function(t,e){var n=i.result(this._deferred,"promise");this._callbacks.push({cb:t,ctx:e}),n.then(function(i){e&&(i.context=e),t.call(i.context,i.options)})},run:function(t,e){this._deferred.resolve({options:t,context:e})},reset:function(){var t=this._callbacks;this._deferred=o.Deferred(),this._callbacks=[],i.each(t,function(t){this.add(t.cb,t.ctx)},this)}}),o.Controller=function(t){this.options=t||{},i.isFunction(this.initialize)&&this.initialize(this.options)},o.Controller.extend=o.extend,i.extend(o.Controller.prototype,e.Events,{destroy:function(){return o._triggerMethod(this,"before:destroy",arguments),o._triggerMethod(this,"destroy",arguments),this.stopListening(),this.off(),this},triggerMethod:o.triggerMethod,mergeOptions:o.mergeOptions,getOption:o.proxyGetOption}),o.Object=function(t){this.options=i.extend({},i.result(this,"options"),t),this.initialize.apply(this,arguments)},o.Object.extend=o.extend,i.extend(o.Object.prototype,e.Events,{initialize:function(){},destroy:function(){return this.triggerMethod("before:destroy"),this.triggerMethod("destroy"),this.stopListening(),this},triggerMethod:o.triggerMethod,mergeOptions:o.mergeOptions,getOption:o.proxyGetOption,bindEntityEvents:o.proxyBindEntityEvents,unbindEntityEvents:o.proxyUnbindEntityEvents}),o.Region=o.Object.extend({constructor:function(t){if(this.options=t||{},this.el=this.getOption("el"),this.el=this.el instanceof e.$?this.el[0]:this.el,!this.el)throw new o.Error({name:"NoElError",message:'An "el" must be specified for a region.'});this.$el=this.getEl(this.el),o.Object.call(this,t)},show:function(t,e){if(this._ensureElement()){this._ensureViewIsIntact(t),o.MonitorDOMRefresh(t);var n=e||{},r=t!==this.currentView,s=!!n.preventDestroy,a=!!n.forceShow,l=!!this.currentView,c=r&&!s,d=r||a;if(l&&this.triggerMethod("before:swapOut",this.currentView,this,e),this.currentView&&delete this.currentView._parent,c?this.empty():l&&d&&this.currentView.off("destroy",this.empty,this),d){t.once("destroy",this.empty,this),this._renderView(t),t._parent=this,l&&this.triggerMethod("before:swap",t,this,e),this.triggerMethod("before:show",t,this,e),o.triggerMethodOn(t,"before:show",t,this,e),l&&this.triggerMethod("swapOut",this.currentView,this,e);var u=o.isNodeAttached(this.el),h=[],p=i.extend({triggerBeforeAttach:this.triggerBeforeAttach,triggerAttach:this.triggerAttach},n);return u&&p.triggerBeforeAttach&&(h=this._displayedViews(t),this._triggerAttach(h,"before:")),this.attachHtml(t),this.currentView=t,u&&p.triggerAttach&&(h=this._displayedViews(t),this._triggerAttach(h)),l&&this.triggerMethod("swap",t,this,e),this.triggerMethod("show",t,this,e),o.triggerMethodOn(t,"show",t,this,e),this}return this}},triggerBeforeAttach:!0,triggerAttach:!0,_triggerAttach:function(t,e){var n=(e||"")+"attach";i.each(t,function(t){o.triggerMethodOn(t,n,t,this)},this)},_displayedViews:function(t){return i.union([t],i.result(t,"_getNestedViews")||[])},_renderView:function(t){t.supportsRenderLifecycle||o.triggerMethodOn(t,"before:render",t),t.render(),t.supportsRenderLifecycle||o.triggerMethodOn(t,"render",t)},_ensureElement:function(){if(i.isObject(this.el)||(this.$el=this.getEl(this.el),this.el=this.$el[0]),!this.$el||0===this.$el.length){if(this.getOption("allowMissingEl"))return!1;throw new o.Error('An "el" '+this.$el.selector+" must exist in DOM")}return!0},_ensureViewIsIntact:function(t){if(!t)throw new o.Error({name:"ViewNotValid",message:"The view passed is undefined and therefore invalid. You must pass a view instance to show."});if(t.isDestroyed)throw new o.Error({name:"ViewDestroyedError",message:'View (cid: "'+t.cid+'") has already been destroyed and cannot be used.'})},getEl:function(t){return e.$(t,o._getValue(this.options.parentEl,this))},attachHtml:function(t){this.$el.contents().detach(),this.el.appendChild(t.el)},empty:function(t){var e=this.currentView,i=t||{},n=!!i.preventDestroy;return e?(e.off("destroy",this.empty,this),this.triggerMethod("before:empty",e),n||this._destroyView(),this.triggerMethod("empty",e),delete this.currentView,n&&this.$el.contents().detach(),this):void 0},_destroyView:function(){var t=this.currentView;t.isDestroyed||(t.supportsDestroyLifecycle||o.triggerMethodOn(t,"before:destroy",t),t.destroy?t.destroy():(t.remove(),t.isDestroyed=!0),t.supportsDestroyLifecycle||o.triggerMethodOn(t,"destroy",t))},attachView:function(t){return this.currentView&&delete this.currentView._parent,t._parent=this,this.currentView=t,this},hasView:function(){return!!this.currentView},reset:function(){return this.empty(),this.$el&&(this.el=this.$el.selector),delete this.$el,this}},{buildRegion:function(t,e){if(i.isString(t))return this._buildRegionFromSelector(t,e);if(t.selector||t.el||t.regionClass)return this._buildRegionFromObject(t,e);if(i.isFunction(t))return this._buildRegionFromRegionClass(t);throw new o.Error({message:"Improper region configuration type.",url:"marionette.region.html#region-configuration-types"})},_buildRegionFromSelector:function(t,e){return new e({el:t})},_buildRegionFromObject:function(t,e){var n=t.regionClass||e,r=i.omit(t,"selector","regionClass");return t.selector&&!r.el&&(r.el=t.selector),new n(r)},_buildRegionFromRegionClass:function(t){return new t}}),o.RegionManager=o.Controller.extend({constructor:function(t){this._regions={},this.length=0,o.Controller.call(this,t),this.addRegions(this.getOption("regions"))},addRegions:function(t,e){return t=o._getValue(t,this,arguments),i.reduce(t,function(t,n,r){return i.isString(n)&&(n={selector:n}),n.selector&&(n=i.defaults({},n,e)),t[r]=this.addRegion(r,n),t},{},this)},addRegion:function(t,e){var i;return i=e instanceof o.Region?e:o.Region.buildRegion(e,o.Region),this.triggerMethod("before:add:region",t,i),i._parent=this,this._store(t,i),this.triggerMethod("add:region",t,i),i},get:function(t){return this._regions[t]},getRegions:function(){return i.clone(this._regions)},removeRegion:function(t){var e=this._regions[t];return this._remove(t,e),e},removeRegions:function(){var t=this.getRegions();return i.each(this._regions,function(t,e){this._remove(e,t)},this),t},emptyRegions:function(){var t=this.getRegions();return i.invoke(t,"empty"),t},destroy:function(){return this.removeRegions(),o.Controller.prototype.destroy.apply(this,arguments)},_store:function(t,e){this._regions[t]||this.length++,this._regions[t]=e},_remove:function(t,e){this.triggerMethod("before:remove:region",t,e),e.empty(),e.stopListening(),delete e._parent,delete this._regions[t],this.length--,this.triggerMethod("remove:region",t,e)}}),o.actAsCollection(o.RegionManager.prototype,"_regions"),o.TemplateCache=function(t){this.templateId=t},i.extend(o.TemplateCache,{templateCaches:{},get:function(t,e){var i=this.templateCaches[t];return i||(i=new o.TemplateCache(t),this.templateCaches[t]=i),i.load(e)},clear:function(){var t,e=i.toArray(arguments),n=e.length;if(n>0)for(t=0;n>t;t++)delete this.templateCaches[e[t]];else this.templateCaches={}}}),i.extend(o.TemplateCache.prototype,{load:function(t){if(this.compiledTemplate)return this.compiledTemplate;var e=this.loadTemplate(this.templateId,t);return this.compiledTemplate=this.compileTemplate(e,t),this.compiledTemplate},loadTemplate:function(t,i){var n=e.$(t);if(!n.length)throw new o.Error({name:"NoTemplateError",message:'Could not find template: "'+t+'"'});return n.html()},compileTemplate:function(t,e){return i.template(t,e)}}),o.Renderer={render:function(t,e){if(!t)throw new o.Error({name:"TemplateNotFoundError",message:"Cannot render the template since its false, null or undefined."});var n=i.isFunction(t)?t:o.TemplateCache.get(t);return n(e)}},o.View=e.View.extend({isDestroyed:!1,supportsRenderLifecycle:!0,supportsDestroyLifecycle:!0,constructor:function(t){this.render=i.bind(this.render,this),t=o._getValue(t,this),this.options=i.extend({},i.result(this,"options"),t),this._behaviors=o.Behaviors(this),e.View.call(this,this.options),o.MonitorDOMRefresh(this)},getTemplate:function(){return this.getOption("template")},serializeModel:function(t){return t.toJSON.apply(t,i.rest(arguments))},mixinTemplateHelpers:function(t){t=t||{};var e=this.getOption("templateHelpers");return e=o._getValue(e,this),i.extend(t,e)},normalizeUIKeys:function(t){var e=i.result(this,"_uiBindings");return o.normalizeUIKeys(t,e||i.result(this,"ui"))},normalizeUIValues:function(t,e){var n=i.result(this,"ui"),r=i.result(this,"_uiBindings");return o.normalizeUIValues(t,r||n,e)},
configureTriggers:function(){if(this.triggers){var t=this.normalizeUIKeys(i.result(this,"triggers"));return i.reduce(t,function(t,e,i){return t[i]=this._buildViewTrigger(e),t},{},this)}},delegateEvents:function(t){return this._delegateDOMEvents(t),this.bindEntityEvents(this.model,this.getOption("modelEvents")),this.bindEntityEvents(this.collection,this.getOption("collectionEvents")),i.each(this._behaviors,function(t){t.bindEntityEvents(this.model,t.getOption("modelEvents")),t.bindEntityEvents(this.collection,t.getOption("collectionEvents"))},this),this},_delegateDOMEvents:function(t){var n=o._getValue(t||this.events,this);n=this.normalizeUIKeys(n),i.isUndefined(t)&&(this.events=n);var r={},s=i.result(this,"behaviorEvents")||{},a=this.configureTriggers(),l=i.result(this,"behaviorTriggers")||{};i.extend(r,s,n,a,l),e.View.prototype.delegateEvents.call(this,r)},undelegateEvents:function(){return e.View.prototype.undelegateEvents.apply(this,arguments),this.unbindEntityEvents(this.model,this.getOption("modelEvents")),this.unbindEntityEvents(this.collection,this.getOption("collectionEvents")),i.each(this._behaviors,function(t){t.unbindEntityEvents(this.model,t.getOption("modelEvents")),t.unbindEntityEvents(this.collection,t.getOption("collectionEvents"))},this),this},_ensureViewIsIntact:function(){if(this.isDestroyed)throw new o.Error({name:"ViewDestroyedError",message:'View (cid: "'+this.cid+'") has already been destroyed and cannot be used.'})},destroy:function(){if(this.isDestroyed)return this;var t=i.toArray(arguments);return this.triggerMethod.apply(this,["before:destroy"].concat(t)),this.isDestroyed=!0,this.triggerMethod.apply(this,["destroy"].concat(t)),this.unbindUIElements(),this.isRendered=!1,this.remove(),i.invoke(this._behaviors,"destroy",t),this},bindUIElements:function(){this._bindUIElements(),i.invoke(this._behaviors,this._bindUIElements)},_bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var t=i.result(this,"_uiBindings");this.ui={},i.each(t,function(t,e){this.ui[e]=this.$(t)},this)}},unbindUIElements:function(){this._unbindUIElements(),i.invoke(this._behaviors,this._unbindUIElements)},_unbindUIElements:function(){this.ui&&this._uiBindings&&(i.each(this.ui,function(t,e){delete this.ui[e]},this),this.ui=this._uiBindings,delete this._uiBindings)},_buildViewTrigger:function(t){var e=i.defaults({},t,{preventDefault:!0,stopPropagation:!0}),n=i.isObject(t)?e.event:t;return function(t){t&&(t.preventDefault&&e.preventDefault&&t.preventDefault(),t.stopPropagation&&e.stopPropagation&&t.stopPropagation());var i={view:this,model:this.model,collection:this.collection};this.triggerMethod(n,i)}},setElement:function(){var t=e.View.prototype.setElement.apply(this,arguments);return i.invoke(this._behaviors,"proxyViewProperties",this),t},triggerMethod:function(){var t=o._triggerMethod(this,arguments);return this._triggerEventOnBehaviors(arguments),this._triggerEventOnParentLayout(arguments[0],i.rest(arguments)),t},_triggerEventOnBehaviors:function(t){for(var e=o._triggerMethod,i=this._behaviors,n=0,r=i&&i.length;r>n;n++)e(i[n],t)},_triggerEventOnParentLayout:function(t,e){var n=this._parentLayoutView();if(n){var r=o.getOption(n,"childViewEventPrefix"),s=r+":"+t,a=[this].concat(e);o._triggerMethod(n,s,a);var l=o.getOption(n,"childEvents"),c=n.normalizeMethods(l);c&&i.isFunction(c[t])&&c[t].apply(n,a)}},_getImmediateChildren:function(){return[]},_getNestedViews:function(){var t=this._getImmediateChildren();return t.length?i.reduce(t,function(t,e){return e._getNestedViews?t.concat(e._getNestedViews()):t},t):t},_getAncestors:function(){for(var t=[],e=this._parent;e;)t.push(e),e=e._parent;return t},_parentLayoutView:function(){var t=this._getAncestors();return i.find(t,function(t){return t instanceof o.LayoutView})},normalizeMethods:o.normalizeMethods,mergeOptions:o.mergeOptions,getOption:o.proxyGetOption,bindEntityEvents:o.proxyBindEntityEvents,unbindEntityEvents:o.proxyUnbindEntityEvents}),o.ItemView=o.View.extend({constructor:function(){o.View.apply(this,arguments)},serializeData:function(){if(!this.model&&!this.collection)return{};var t=[this.model||this.collection];return arguments.length&&t.push.apply(t,arguments),this.model?this.serializeModel.apply(this,t):{items:this.serializeCollection.apply(this,t)}},serializeCollection:function(t){return t.toJSON.apply(t,i.rest(arguments))},render:function(){return this._ensureViewIsIntact(),this.triggerMethod("before:render",this),this._renderTemplate(),this.isRendered=!0,this.bindUIElements(),this.triggerMethod("render",this),this},_renderTemplate:function(){var t=this.getTemplate();if(t!==!1){if(!t)throw new o.Error({name:"UndefinedTemplateError",message:"Cannot render the template since it is null or undefined."});var e=this.mixinTemplateHelpers(this.serializeData()),i=o.Renderer.render(t,e,this);return this.attachElContent(i),this}},attachElContent:function(t){return this.$el.html(t),this}}),o.CollectionView=o.View.extend({childViewEventPrefix:"childview",sort:!0,constructor:function(t){this.once("render",this._initialEvents),this._initChildViewStorage(),o.View.apply(this,arguments),this.on({"before:show":this._onBeforeShowCalled,show:this._onShowCalled,"before:attach":this._onBeforeAttachCalled,attach:this._onAttachCalled}),this.initRenderBuffer()},initRenderBuffer:function(){this._bufferedChildren=[]},startBuffering:function(){this.initRenderBuffer(),this.isBuffering=!0},endBuffering:function(){var t,e=this._isShown&&o.isNodeAttached(this.el);this.isBuffering=!1,this._isShown&&this._triggerMethodMany(this._bufferedChildren,this,"before:show"),e&&this._triggerBeforeAttach&&(t=this._getNestedViews(),this._triggerMethodMany(t,this,"before:attach")),this.attachBuffer(this,this._createBuffer()),e&&this._triggerAttach&&(t=this._getNestedViews(),this._triggerMethodMany(t,this,"attach")),this._isShown&&this._triggerMethodMany(this._bufferedChildren,this,"show"),this.initRenderBuffer()},_triggerMethodMany:function(t,e,n){var r=i.drop(arguments,3);i.each(t,function(t){o.triggerMethodOn.apply(t,[t,n,t,e].concat(r))})},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),this.listenTo(this.collection,"reset",this.render),this.getOption("sort")&&this.listenTo(this.collection,"sort",this._sortViews))},_onCollectionAdd:function(t,e,n){var r=void 0!==n.at&&(n.index||e.indexOf(t));if((this.getOption("filter")||r===!1)&&(r=i.indexOf(this._filteredSortedModels(r),t)),this._shouldAddChild(t,r)){this.destroyEmptyView();var o=this.getChildView(t);this.addChild(t,o,r)}},_onCollectionRemove:function(t){var e=this.children.findByModel(t);this.removeChildView(e),this.checkEmpty()},_onBeforeShowCalled:function(){this._triggerBeforeAttach=this._triggerAttach=!1,this.children.each(function(t){o.triggerMethodOn(t,"before:show",t)})},_onShowCalled:function(){this.children.each(function(t){o.triggerMethodOn(t,"show",t)})},_onBeforeAttachCalled:function(){this._triggerBeforeAttach=!0},_onAttachCalled:function(){this._triggerAttach=!0},render:function(){return this._ensureViewIsIntact(),this.triggerMethod("before:render",this),this._renderChildren(),this.isRendered=!0,this.triggerMethod("render",this),this},reorder:function(){var t=this.children,e=this._filteredSortedModels(),n=i.find(e,function(e){return!t.findByModel(e)});if(n)this.render();else{var r=i.map(e,function(e,i){var n=t.findByModel(e);return n._index=i,n.el});this.triggerMethod("before:reorder"),this._appendReorderedChildren(r),this.triggerMethod("reorder")}},resortView:function(){o.getOption(this,"reorderOnSort")?this.reorder():this.render()},_sortViews:function(){var t=this._filteredSortedModels(),e=i.find(t,function(t,e){var i=this.children.findByModel(t);return!i||i._index!==e},this);e&&this.resortView()},_emptyViewIndex:-1,_appendReorderedChildren:function(t){this.$el.append(t)},_renderChildren:function(){this.destroyEmptyView(),this.destroyChildren({checkEmpty:!1}),this.isEmpty(this.collection)?this.showEmptyView():(this.triggerMethod("before:render:collection",this),this.startBuffering(),this.showCollection(),this.endBuffering(),this.triggerMethod("render:collection",this),this.children.isEmpty()&&this.getOption("filter")&&this.showEmptyView())},showCollection:function(){var t,e=this._filteredSortedModels();i.each(e,function(e,i){t=this.getChildView(e),this.addChild(e,t,i)},this)},_filteredSortedModels:function(t){var e=this.getViewComparator(),n=this.collection.models;if(t=Math.min(Math.max(t,0),n.length-1),e){var r;t&&(r=n[t],n=n.slice(0,t).concat(n.slice(t+1))),n=this._sortModelsBy(n,e),r&&n.splice(t,0,r)}return this.getOption("filter")&&(n=i.filter(n,function(t,e){return this._shouldAddChild(t,e)},this)),n},_sortModelsBy:function(t,e){return"string"==typeof e?i.sortBy(t,function(t){return t.get(e)},this):1===e.length?i.sortBy(t,e,this):t.sort(i.bind(e,this))},showEmptyView:function(){var t=this.getEmptyView();if(t&&!this._showingEmptyView){this.triggerMethod("before:render:empty"),this._showingEmptyView=!0;var i=new e.Model;this.addEmptyView(i,t),this.triggerMethod("render:empty")}},destroyEmptyView:function(){this._showingEmptyView&&(this.triggerMethod("before:remove:empty"),this.destroyChildren(),delete this._showingEmptyView,this.triggerMethod("remove:empty"))},getEmptyView:function(){return this.getOption("emptyView")},addEmptyView:function(t,e){var n,r=this._isShown&&!this.isBuffering&&o.isNodeAttached(this.el),s=this.getOption("emptyViewOptions")||this.getOption("childViewOptions");i.isFunction(s)&&(s=s.call(this,t,this._emptyViewIndex));var a=this.buildChildView(t,e,s);a._parent=this,this.proxyChildEvents(a),a.once("render",function(){this._isShown&&o.triggerMethodOn(a,"before:show",a),r&&this._triggerBeforeAttach&&(n=this._getViewAndNested(a),this._triggerMethodMany(n,this,"before:attach"))},this),this.children.add(a),this.renderChildView(a,this._emptyViewIndex),r&&this._triggerAttach&&(n=this._getViewAndNested(a),this._triggerMethodMany(n,this,"attach")),this._isShown&&o.triggerMethodOn(a,"show",a)},getChildView:function(t){var e=this.getOption("childView");if(!e)throw new o.Error({name:"NoChildViewError",message:'A "childView" must be specified'});return e},addChild:function(t,e,i){var n=this.getOption("childViewOptions");n=o._getValue(n,this,[t,i]);var r=this.buildChildView(t,e,n);return this._updateIndices(r,!0,i),this.triggerMethod("before:add:child",r),this._addChildView(r,i),this.triggerMethod("add:child",r),r._parent=this,r},_updateIndices:function(t,e,i){this.getOption("sort")&&(e&&(t._index=i),this.children.each(function(i){i._index>=t._index&&(i._index+=e?1:-1)}))},_addChildView:function(t,e){var i,n=this._isShown&&!this.isBuffering&&o.isNodeAttached(this.el);this.proxyChildEvents(t),t.once("render",function(){this._isShown&&!this.isBuffering&&o.triggerMethodOn(t,"before:show",t),n&&this._triggerBeforeAttach&&(i=this._getViewAndNested(t),this._triggerMethodMany(i,this,"before:attach"))},this),this.children.add(t),this.renderChildView(t,e),n&&this._triggerAttach&&(i=this._getViewAndNested(t),this._triggerMethodMany(i,this,"attach")),this._isShown&&!this.isBuffering&&o.triggerMethodOn(t,"show",t)},renderChildView:function(t,e){return t.supportsRenderLifecycle||o.triggerMethodOn(t,"before:render",t),t.render(),t.supportsRenderLifecycle||o.triggerMethodOn(t,"render",t),this.attachHtml(this,t,e),t},buildChildView:function(t,e,n){var r=i.extend({model:t},n),s=new e(r);return o.MonitorDOMRefresh(s),s},removeChildView:function(t){return t?(this.triggerMethod("before:remove:child",t),t.supportsDestroyLifecycle||o.triggerMethodOn(t,"before:destroy",t),t.destroy?t.destroy():t.remove(),t.supportsDestroyLifecycle||o.triggerMethodOn(t,"destroy",t),delete t._parent,this.stopListening(t),this.children.remove(t),this.triggerMethod("remove:child",t),this._updateIndices(t,!1),t):t},isEmpty:function(){return!this.collection||0===this.collection.length},checkEmpty:function(){this.isEmpty(this.collection)&&this.showEmptyView()},attachBuffer:function(t,e){t.$el.append(e)},_createBuffer:function(){var t=document.createDocumentFragment();return i.each(this._bufferedChildren,function(e){t.appendChild(e.el)}),t},attachHtml:function(t,e,i){t.isBuffering?t._bufferedChildren.splice(i,0,e):t._insertBefore(e,i)||t._insertAfter(e)},_insertBefore:function(t,e){var i,n=this.getOption("sort")&&e<this.children.length-1;return n&&(i=this.children.find(function(t){return t._index===e+1})),i?(i.$el.before(t.el),!0):!1},_insertAfter:function(t){this.$el.append(t.el)},_initChildViewStorage:function(){this.children=new e.ChildViewContainer},destroy:function(){return this.isDestroyed?this:(this.triggerMethod("before:destroy:collection"),this.destroyChildren({checkEmpty:!1}),this.triggerMethod("destroy:collection"),o.View.prototype.destroy.apply(this,arguments))},destroyChildren:function(t){var e=t||{},n=!0,r=this.children.map(i.identity);return i.isUndefined(e.checkEmpty)||(n=e.checkEmpty),this.children.each(this.removeChildView,this),n&&this.checkEmpty(),r},_shouldAddChild:function(t,e){var n=this.getOption("filter");return!i.isFunction(n)||n.call(this,t,e,this.collection)},proxyChildEvents:function(t){var e=this.getOption("childViewEventPrefix");this.listenTo(t,"all",function(){var n=i.toArray(arguments),r=n[0],o=this.normalizeMethods(i.result(this,"childEvents"));n[0]=e+":"+r,n.splice(1,0,t),"undefined"!=typeof o&&i.isFunction(o[r])&&o[r].apply(this,n.slice(1)),this.triggerMethod.apply(this,n)})},_getImmediateChildren:function(){return i.values(this.children._views)},_getViewAndNested:function(t){return[t].concat(i.result(t,"_getNestedViews")||[])},getViewComparator:function(){return this.getOption("viewComparator")}}),o.CompositeView=o.CollectionView.extend({constructor:function(){o.CollectionView.apply(this,arguments)},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),this.listenTo(this.collection,"reset",this._renderChildren),this.getOption("sort")&&this.listenTo(this.collection,"sort",this._sortViews))},getChildView:function(t){var e=this.getOption("childView")||this.constructor;return e},serializeData:function(){var t={};return this.model&&(t=i.partial(this.serializeModel,this.model).apply(this,arguments)),t},render:function(){return this._ensureViewIsIntact(),this._isRendering=!0,this.resetChildViewContainer(),this.triggerMethod("before:render",this),this._renderTemplate(),this._renderChildren(),this._isRendering=!1,this.isRendered=!0,this.triggerMethod("render",this),this},_renderChildren:function(){(this.isRendered||this._isRendering)&&o.CollectionView.prototype._renderChildren.call(this)},_renderTemplate:function(){var t={};t=this.serializeData(),t=this.mixinTemplateHelpers(t),this.triggerMethod("before:render:template");var e=this.getTemplate(),i=o.Renderer.render(e,t,this);this.attachElContent(i),this.bindUIElements(),this.triggerMethod("render:template")},attachElContent:function(t){return this.$el.html(t),this},attachBuffer:function(t,e){var i=this.getChildViewContainer(t);i.append(e)},_insertAfter:function(t){var e=this.getChildViewContainer(this,t);e.append(t.el)},_appendReorderedChildren:function(t){var e=this.getChildViewContainer(this);e.append(t)},getChildViewContainer:function(t,e){if(t.$childViewContainer)return t.$childViewContainer;var i,n=o.getOption(t,"childViewContainer");if(n){var r=o._getValue(n,t);if(i="@"===r.charAt(0)&&t.ui?t.ui[r.substr(4)]:t.$(r),i.length<=0)throw new o.Error({name:"ChildViewContainerMissingError",message:'The specified "childViewContainer" was not found: '+t.childViewContainer})}else i=t.$el;return t.$childViewContainer=i,i},resetChildViewContainer:function(){this.$childViewContainer&&(this.$childViewContainer=void 0)}}),o.LayoutView=o.ItemView.extend({regionClass:o.Region,options:{destroyImmediate:!1},childViewEventPrefix:"childview",constructor:function(t){t=t||{},this._firstRender=!0,this._initializeRegions(t),o.ItemView.call(this,t)},render:function(){return this._ensureViewIsIntact(),this._firstRender?this._firstRender=!1:this._reInitializeRegions(),o.ItemView.prototype.render.apply(this,arguments)},destroy:function(){return this.isDestroyed?this:(this.getOption("destroyImmediate")===!0&&this.$el.remove(),this.regionManager.destroy(),o.ItemView.prototype.destroy.apply(this,arguments))},showChildView:function(t,e){return this.getRegion(t).show(e)},getChildView:function(t){return this.getRegion(t).currentView},addRegion:function(t,e){var i={};return i[t]=e,this._buildRegions(i)[t]},addRegions:function(t){return this.regions=i.extend({},this.regions,t),this._buildRegions(t)},removeRegion:function(t){return delete this.regions[t],this.regionManager.removeRegion(t)},getRegion:function(t){return this.regionManager.get(t)},getRegions:function(){return this.regionManager.getRegions()},_buildRegions:function(t){var e={regionClass:this.getOption("regionClass"),parentEl:i.partial(i.result,this,"el")};return this.regionManager.addRegions(t,e)},_initializeRegions:function(t){var e;this._initRegionManager(),e=o._getValue(this.regions,this,[t])||{};var n=this.getOption.call(t,"regions");n=o._getValue(n,this,[t]),i.extend(e,n),e=this.normalizeUIValues(e,["selector","el"]),this.addRegions(e)},_reInitializeRegions:function(){this.regionManager.invoke("reset")},getRegionManager:function(){return new o.RegionManager},_initRegionManager:function(){this.regionManager=this.getRegionManager(),this.regionManager._parent=this,this.listenTo(this.regionManager,"before:add:region",function(t){this.triggerMethod("before:add:region",t)}),this.listenTo(this.regionManager,"add:region",function(t,e){this[t]=e,this.triggerMethod("add:region",t,e)}),this.listenTo(this.regionManager,"before:remove:region",function(t){this.triggerMethod("before:remove:region",t)}),this.listenTo(this.regionManager,"remove:region",function(t,e){delete this[t],this.triggerMethod("remove:region",t,e)})},_getImmediateChildren:function(){return i.chain(this.regionManager.getRegions()).pluck("currentView").compact().value()}}),o.Behavior=o.Object.extend({constructor:function(t,e){this.view=e,this.defaults=i.result(this,"defaults")||{},this.options=i.extend({},this.defaults,t),this.ui=i.extend({},i.result(e,"ui"),i.result(this,"ui")),o.Object.apply(this,arguments)},$:function(){return this.view.$.apply(this.view,arguments)},destroy:function(){return this.stopListening(),this},proxyViewProperties:function(t){this.$el=t.$el,this.el=t.el}}),o.Behaviors=function(t,e){function i(t,n){return e.isObject(t.behaviors)?(n=i.parseBehaviors(t,n||e.result(t,"behaviors")),i.wrap(t,n,e.keys(s)),n):{}}function n(t,e){this._view=t,this._behaviors=e,this._triggers={}}function r(t){return t._uiBindings||t.ui}var o=/^(\S+)\s*(.*)$/,s={behaviorTriggers:function(t,e){var i=new n(this,e);return i.buildBehaviorTriggers()},behaviorEvents:function(i,n){var s={};return e.each(n,function(i,n){var a={},l=e.clone(e.result(i,"events"))||{};l=t.normalizeUIKeys(l,r(i));var c=0;e.each(l,function(t,r){var s=r.match(o),l=s[1]+"."+[this.cid,n,c++," "].join(""),d=s[2],u=l+d,h=e.isFunction(t)?t:i[t];a[u]=e.bind(h,i)},this),s=e.extend(s,a)},this),s}};return e.extend(i,{behaviorsLookup:function(){throw new t.Error({message:"You must define where your behaviors are stored.",url:"marionette.behaviors.html#behaviorslookup"})},getBehaviorClass:function(e,n){return e.behaviorClass?e.behaviorClass:t._getValue(i.behaviorsLookup,this,[e,n])[n]},parseBehaviors:function(t,n){return e.chain(n).map(function(n,r){var o=i.getBehaviorClass(n,r),s=new o(n,t),a=i.parseBehaviors(t,e.result(s,"behaviors"));return[s].concat(a)}).flatten().value()},wrap:function(t,i,n){e.each(n,function(n){t[n]=e.partial(s[n],t[n],i)})}}),e.extend(n.prototype,{buildBehaviorTriggers:function(){return e.each(this._behaviors,this._buildTriggerHandlersForBehavior,this),this._triggers},_buildTriggerHandlersForBehavior:function(i,n){var o=e.clone(e.result(i,"triggers"))||{};o=t.normalizeUIKeys(o,r(i)),e.each(o,e.bind(this._setHandlerForBehavior,this,i,n))},_setHandlerForBehavior:function(t,e,i,n){var r=n.replace(/^\S+/,function(t){return t+".behaviortriggers"+e});this._triggers[r]=this._view._buildViewTrigger(i)}}),i}(o,i),o.AppRouter=e.Router.extend({constructor:function(t){this.options=t||{},e.Router.apply(this,arguments);var i=this.getOption("appRoutes"),n=this._getController();this.processAppRoutes(n,i),this.on("route",this._processOnRoute,this)},appRoute:function(t,e){var i=this._getController();this._addAppRoute(i,t,e)},_processOnRoute:function(t,e){if(i.isFunction(this.onRoute)){var n=i.invert(this.getOption("appRoutes"))[t];this.onRoute(t,n,e)}},processAppRoutes:function(t,e){if(e){var n=i.keys(e).reverse();i.each(n,function(i){this._addAppRoute(t,i,e[i])},this)}},_getController:function(){return this.getOption("controller")},_addAppRoute:function(t,e,n){var r=t[n];if(!r)throw new o.Error('Method "'+n+'" was not found on the controller');this.route(e,n,i.bind(r,t))},mergeOptions:o.mergeOptions,getOption:o.proxyGetOption,triggerMethod:o.triggerMethod,bindEntityEvents:o.proxyBindEntityEvents,unbindEntityEvents:o.proxyUnbindEntityEvents}),o.Application=o.Object.extend({constructor:function(t){this._initializeRegions(t),this._initCallbacks=new o.Callbacks,this.submodules={},i.extend(this,t),this._initChannel(),o.Object.apply(this,arguments)},execute:function(){this.commands.execute.apply(this.commands,arguments)},request:function(){return this.reqres.request.apply(this.reqres,arguments)},addInitializer:function(t){this._initCallbacks.add(t)},start:function(t){this.triggerMethod("before:start",t),this._initCallbacks.run(t,this),this.triggerMethod("start",t)},addRegions:function(t){return this._regionManager.addRegions(t)},emptyRegions:function(){return this._regionManager.emptyRegions()},removeRegion:function(t){return this._regionManager.removeRegion(t)},getRegion:function(t){return this._regionManager.get(t)},getRegions:function(){return this._regionManager.getRegions()},module:function(t,e){var n=o.Module.getClass(e),r=i.toArray(arguments);return r.unshift(this),n.create.apply(n,r)},getRegionManager:function(){return new o.RegionManager},_initializeRegions:function(t){var e=i.isFunction(this.regions)?this.regions(t):this.regions||{};this._initRegionManager();var n=o.getOption(t,"regions");return i.isFunction(n)&&(n=n.call(this,t)),i.extend(e,n),this.addRegions(e),this},_initRegionManager:function(){this._regionManager=this.getRegionManager(),this._regionManager._parent=this,this.listenTo(this._regionManager,"before:add:region",function(){o._triggerMethod(this,"before:add:region",arguments)}),this.listenTo(this._regionManager,"add:region",function(t,e){this[t]=e,o._triggerMethod(this,"add:region",arguments)}),this.listenTo(this._regionManager,"before:remove:region",function(){o._triggerMethod(this,"before:remove:region",arguments)}),this.listenTo(this._regionManager,"remove:region",function(t){delete this[t],o._triggerMethod(this,"remove:region",arguments)})},_initChannel:function(){this.channelName=i.result(this,"channelName")||"global",this.channel=i.result(this,"channel")||e.Wreqr.radio.channel(this.channelName),this.vent=i.result(this,"vent")||this.channel.vent,this.commands=i.result(this,"commands")||this.channel.commands,this.reqres=i.result(this,"reqres")||this.channel.reqres}}),o.Module=function(t,e,n){this.moduleName=t,this.options=i.extend({},this.options,n),this.initialize=n.initialize||this.initialize,this.submodules={},this._setupInitializersAndFinalizers(),this.app=e,i.isFunction(this.initialize)&&this.initialize(t,e,this.options)},o.Module.extend=o.extend,i.extend(o.Module.prototype,e.Events,{startWithParent:!0,initialize:function(){},addInitializer:function(t){this._initializerCallbacks.add(t)},addFinalizer:function(t){this._finalizerCallbacks.add(t)},start:function(t){this._isInitialized||(i.each(this.submodules,function(e){e.startWithParent&&e.start(t)}),this.triggerMethod("before:start",t),this._initializerCallbacks.run(t,this),this._isInitialized=!0,this.triggerMethod("start",t))},stop:function(){this._isInitialized&&(this._isInitialized=!1,this.triggerMethod("before:stop"),i.invoke(this.submodules,"stop"),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),this.triggerMethod("stop"))},addDefinition:function(t,e){this._runModuleDefinition(t,e)},_runModuleDefinition:function(t,n){if(t){var r=i.flatten([this,this.app,e,o,e.$,i,n]);t.apply(this,r)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new o.Callbacks,this._finalizerCallbacks=new o.Callbacks},triggerMethod:o.triggerMethod}),i.extend(o.Module,{create:function(t,e,n){var r=t,o=i.drop(arguments,3);e=e.split(".");var s=e.length,a=[];return a[s-1]=n,i.each(e,function(e,i){var s=r;r=this._getModule(s,e,t,n),this._addModuleDefinition(s,r,a[i],o)},this),r},_getModule:function(t,e,n,r,o){var s=i.extend({},r),a=this.getClass(r),l=t[e];return l||(l=new a(e,n,s),t[e]=l,t.submodules[e]=l),l},getClass:function(t){var e=o.Module;return t?t.prototype instanceof e?t:t.moduleClass||e:e},_addModuleDefinition:function(t,e,i,n){var r=this._getDefine(i),o=this._getStartWithParent(i,e);r&&e.addDefinition(r,n),this._addStartWithParent(t,e,o)},_getStartWithParent:function(t,e){var n;return i.isFunction(t)&&t.prototype instanceof o.Module?(n=e.constructor.prototype.startWithParent,i.isUndefined(n)?!0:n):i.isObject(t)?(n=t.startWithParent,i.isUndefined(n)?!0:n):!0},_getDefine:function(t){return!i.isFunction(t)||t.prototype instanceof o.Module?i.isObject(t)?t.define:null:t},_addStartWithParent:function(t,e,i){e.startWithParent=e.startWithParent&&i,e.startWithParent&&!e.startWithParentIsConfigured&&(e.startWithParentIsConfigured=!0,t.addInitializer(function(t){e.startWithParent&&e.start(t)}))}}),o}),define("backbone.marionette-toJSON",["require","backbone._marionette"],function(t){var e=t("backbone._marionette");return e.View.prototype.serializeModel=function(t){return t=t||this.model,_.cloneDeep(t.attributes)},e.ItemView.prototype.serializeCollection=function(t){return t=t||this.collection,t.map(function(t){return this.serializeModel(t)},this)},e}),define("backbone.marionette-dust",["require","backbone._marionette","lodash"],function(t){var e=t("backbone._marionette"),i=t("lodash");return e.Renderer.render=function(t,e){var n;if(i.isString(t))dust.render(t,e,function(t,e){n=e});else if(i.isFunction(t)&&i.isFunction(t.template)){var r=!1;if(t(e,function(t,e){if(t)throw t;n=e,r=!0}),!r)throw new Error("Dust template rendered asynchronously but Marionette requires synchronous rendering!")}else t.render(e,function(t,e){n=e});return n},e.Renderer}),define("backbone.marionette",["require","backbone._marionette","backbone.marionette-toJSON","backbone.marionette-dust"],function(t){var e=t("backbone._marionette");return t("backbone.marionette-toJSON"),t("backbone.marionette-dust"),e}),define("dust-loader!sc-activated-transaction-types-lightbox/dust/phone",function(){return function(t){var e=function(t){function e(t,e){return t.w('<div class="modal-body wide"><div class="col-2 vertical-separator"><p class="lightbox__header">Current ').f(e.getPath(!1,["carrier","displayName"]),e,"h").w(' Customer</p><p class="lightbox__details">Would you like to upgrade your current device or add this device to a new line on your account?</p>').s(e.get(["UPGRADE"],!1),e,{block:i},{}).s(e.get(["ADD_ON"],!1),e,{block:n},{}).w('</div><div class="col-2"><p class="lightbox__header">New ').f(e.getPath(!1,["carrier","displayName"]),e,"h").w(' Customer</p><p class="lightbox__details">We\'ll help you create a new ').f(e.getPath(!1,["carrier","displayName"]),e,"h").w(" account and customize a plan to fit your needs.</p>").s(e.get(["NEW"],!1),e,{block:r},{}).w('</div></div><div class="modal-footer"><a href="javascript:void(0)" class="lightbox__footer-link buy-unactivated">Buy this device without a plan: $').f(e.get(["replacementPrice"],!1),e,"h").w("</a></div>")}function i(t,e){return t.w("<a href=").f(e.get(["url"],!1),e,"h").w(' class="lightbox__button btn btn-large btn-primary">Upgrade</a>')}function n(t,e){return t.w("<a href=").f(e.get(["url"],!1),e,"h").w(' class="lightbox__button btn btn-large btn-primary">Add a Line</a>')}function r(t,e){return t.w("<a href=").f(e.get(["url"],!1),e,"h").w(' class="lightbox__button btn btn-large btn-primary">Create a New Account</a>')}return t.register("sc-activated-transaction-types-lightbox/dust/phone",e),e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,r.__dustBody=!0,e}(t),i=function(i,n){if(!n)throw new Error("wrong number of args for render");return t.render(e,i,n)};return i.template=e,i}}),define("dust-loader!sc-activated-transaction-types-lightbox/dust/tablet",function(){return function(t){var e=function(t){function e(t,e){return t.w('<div class="modal-body wide"><div class="col-2 vertical-separator"><p class="lightbox__header">Add to your ').f(e.getPath(!1,["carrier","displayName"]),e,"h").w(" account</p>").s(e.get(["ADD_ON"],!1),e,{block:i},{}).w('</div><div class="col-2"><p class="lightbox__header">Connect to ').f(e.getPath(!1,["carrier","displayName"]),e,"h").w(' later</p><p class="lightbox__details">Activate this device with ').f(e.getPath(!1,["carrier","displayName"]),e,"h").w(" later and pay the unactivated price today: $").f(e.get(["replacementPrice"],!1),e,"h").w('</p><a href="javascript:void(0)" class="lightbox__button btn btn-large btn-default buy-unactivated">Buy Unactivated</a></div></div>')}function i(t,e){return t.w('<p class="lightbox__details">We\'ll help add this device to your ').f(e.getPath(!1,["carrier","displayName"]),e,"h").w(" account today.</p><a href=").f(e.get(["url"],!1),e,"h").w(' class="lightbox__button btn btn-large btn-primary">Add to Account</a>')}return t.register("sc-activated-transaction-types-lightbox/dust/tablet",e),e.__dustBody=!0,i.__dustBody=!0,e}(t),i=function(i,n){if(!n)throw new Error("wrong number of args for render");return t.render(e,i,n)};return i.template=e,i}}),define("dust-loader!sc-activated-transaction-types-lightbox/dust/mobile-broadband",function(){return function(t){var e=function(t){function e(t,e){return t.w('<div class="modal-body narrow"><div><p class="lightbox__header">Current ').f(e.getPath(!1,["carrier","displayName"]),e,"h").w(' Customer</p><p class="lightbox__details">Would you like to upgrade your current device or add this device to your account?</p>').s(e.get(["UPGRADE"],!1),e,{block:i},{}).s(e.get(["ADD_ON"],!1),e,{block:n},{}).w('</div></div><div class="modal-footer centered"><a href="javascript:void(0)" class="lightbox__footer-link buy-unactivated">Buy this device without a plan: $').f(e.get(["replacementPrice"],!1),e,"h").w("</a></div>")}function i(t,e){return t.w("<a href=").f(e.getPath(!1,["UPGRADE","url"]),e,"h").w(' class="lightbox__button btn btn-large btn-primary">Upgrade</a>')}function n(t,e){return t.w("<a href=").f(e.getPath(!1,["ADD_ON","url"]),e,"h").w(' class="lightbox__button btn btn-large btn-primary">Add to Account</a>')}return t.register("sc-activated-transaction-types-lightbox/dust/mobile-broadband",e),e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,e}(t),i=function(i,n){if(!n)throw new Error("wrong number of args for render");return t.render(e,i,n)};return i.template=e,i}}),define("dust-loader!sc-activated-transaction-types-lightbox/dust/lightbox",function(){return function(t){var e=function(t){function e(t,e){return t.w('<div id="adttlb-modal" class="modal" role="dialog" aria-labelledby="modal title" aria-describedby="modal description"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal">&times;</button></div>').h("eq",e,{block:i},{key:e.get(["connectionType"],!1),value:"VOICEPOSTPAID"},"h").h("eq",e,{block:n},{key:e.get(["connectionType"],!1),
value:"DATATABLETPOSTPAID"},"h").h("eq",e,{block:r},{key:e.get(["connectionType"],!1),value:"BROADBANDPOSTPAID"},"h").w("</div></div></div>")}function i(t,e){return t.p("sc-activated-transaction-types-lightbox/dust/phone",e,e,{})}function n(t,e){return t.p("sc-activated-transaction-types-lightbox/dust/tablet",e,e,{})}function r(t,e){return t.p("sc-activated-transaction-types-lightbox/dust/mobile-broadband",e,e,{})}return t.register("sc-activated-transaction-types-lightbox/dust/lightbox",e),e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,r.__dustBody=!0,e}(t),i=function(i,n){if(!n)throw new Error("wrong number of args for render");return t.render(e,i,n)};return i.template=e,i}}),define("sc-activated-transaction-types-lightbox/javascript/views/lightbox-view",["require","lodash","dust","backbone.marionette","bluebird","sc-meta-layer/javascript/metaLayer","sc-add-to-cart/javascript/addToCart","dust-loader!sc-activated-transaction-types-lightbox/dust/phone","dust-loader!sc-activated-transaction-types-lightbox/dust/tablet","dust-loader!sc-activated-transaction-types-lightbox/dust/mobile-broadband","dust-loader!sc-activated-transaction-types-lightbox/dust/lightbox"],function(t){var e=t("lodash"),i=t("dust"),n=t("backbone.marionette"),r=t("bluebird"),o=t("sc-meta-layer/javascript/metaLayer"),s=t("sc-add-to-cart/javascript/addToCart");return t("dust-loader!sc-activated-transaction-types-lightbox/dust/phone")(i),t("dust-loader!sc-activated-transaction-types-lightbox/dust/tablet")(i),t("dust-loader!sc-activated-transaction-types-lightbox/dust/mobile-broadband")(i),n.ItemView.extend({template:t("dust-loader!sc-activated-transaction-types-lightbox/dust/lightbox")(i),events:{"click .buy-unactivated":"onClickBuyUnactivated"},initialize:function(t){this.skuId=t.skuId,this.listingId=t.listingId,e.bindAll(this,"buildUrl")},buildUrl:function(t,e){var i=o.get("env_appServerSSL")+"/actdvc/activated/package?skuId="+this.skuId+"&transactionType="+t+"&connectionType="+e;return this.listingId&&(i+="&listingId="+this.listingId),i},templateHelpers:function(){var t=e.reduce(this.model.get("transactionTypes"),function(t,i){var n=i.transactionType;return t[n]=e.omit(i,"transactionType"),t[n].url=this.buildUrl(n,this.model.get("connectionType")),t},{},this);return t},onClickBuyUnactivated:function(t){t.preventDefault();var e={skuId:this.skuId,listingId:this.listingId};this.addToCart(e)},addToCart:function(t){r.resolve(s(t)).bind(this).then(function(t){window.location.href="/cart"}).caught(function(t){})},onRender:function(){this.$el.one("hidden.bs.modal",e.bind(this.afterModalClosed,this))},afterModalClosed:function(){this.destroy()}})}),define("dust-loader!sc-activated-transaction-types-lightbox/dust/spinner",function(){return function(t){var e=function(t){function e(t,e){return t.w('<div id="adttlb-spinner"></div>')}return t.register("sc-activated-transaction-types-lightbox/dust/spinner",e),e.__dustBody=!0,e}(t),i=function(i,n){if(!n)throw new Error("wrong number of args for render");return t.render(e,i,n)};return i.template=e,i}}),define("sc-activated-transaction-types-lightbox/javascript/add-to-package",["require","sc-bestbuy-style-guide/dist/js/bootstrap","jquery","lodash","backbone","bluebird","dust","backbone.marionette","sc-meta-layer/javascript/metaLayer","./views/lightbox-view","dust-loader!sc-activated-transaction-types-lightbox/dust/spinner"],function(t){t("sc-bestbuy-style-guide/dist/js/bootstrap");var e=t("jquery"),i=t("lodash"),n=t("backbone"),r=t("bluebird"),o=t("dust"),s=t("backbone.marionette"),a=t("sc-meta-layer/javascript/metaLayer"),l=t("./views/lightbox-view"),c=a.get("env_appServerSSL")+"/actdvc/transactionTypes",d={};return function(u){if("undefined"==typeof u.skuId)throw new ReferenceError("skuId should exist as a property of the params");if("string"!=typeof u.skuId)throw new TypeError("skuId should be a string");var h="s"===a.get("device_deviceClass");if(h)return window.location=a.get("env_appServerSSL")+"/actdvc/activated/package?skuId="+u.skuId+"&transactionType=UPGRADE&connectionType=VOICEPOSTPAID&listingId="+u.listingId,r.resolve();var p,f=c+"?skuId="+u.skuId;u.listingId&&(f+="&listingId="+u.listingId);var g=u.skuId+u.listingId;p=d[g]?function(){return d[g]}:i.partial(e.ajax,{url:f});var m=t("dust-loader!sc-activated-transaction-types-lightbox/dust/spinner")(o),v=e(s.Renderer.render(m));return e("body").append(v),r.resolve(p()).then(function(t){d[g]||(d[g]=t);var i=new l({model:new n.Model(t),skuId:u.skuId,listingId:u.listingId});e("body").append(i.render().el),i.$("#adttlb-modal").modal()}).caught(function(t){}).lastly(function(){v.remove()})}}),define("sc-validatr/javascript/formDecorator/formDecorator.decorators",["require","jquery","lodash"],function(t){function e(t,e){var i,n="<span class='error messages'>";return l.each(e,function(t){n+="<span class='message'>",n+=t,n+="</span>"}),n+="</span>",i=a(n),t.$element.data("validatr-invalid",!0),t.$element.after(i),t.$element.addClass("error"),a('label[for="'+t.$element.attr("id")+'"]').addClass("error"),function(){t.$element.removeData("validatr-invalid"),t.$element.removeClass("error"),a('label[for="'+t.$element.attr("id")+'"]').removeClass("error"),i.remove()}}function i(t,i){return e(t,i.slice(0,1))}function n(t,e){var i,n="<span class='error messages'>";return l.each(e,function(t){n+="<span class='message'>",n+=t,n+="</span>"}),n+="</span>",i=a(n),t.$element.data("validatr-invalid",!0),t.$element.before(i),t.$element.addClass("error"),a('label[for="'+t.$element.attr("id")+'"]').addClass("error"),function(){t.$element.removeData("validatr-invalid"),t.$element.removeClass("error"),a('label[for="'+t.$element.attr("id")+'"]').removeClass("error"),i.remove()}}function r(t,e){return n(t,e.slice(0,1))}function o(t,e){var i="";l.each(e,function(t){i+='<span class="help-block">',i+=t,i+="</span>"});var n=a(i);return t.$element.data("validatr-invalid",!0),t.$element.after(n),t.$element.parent().addClass("has-error"),function(){t.$element.removeData("validatr-invalid"),t.$element.parent().removeClass("has-error"),n.remove()}}function s(t,e){return o(t,e.slice(0,1))}var a=t("jquery"),l=t("lodash"),c={defaultDecorator:"afterField",defaults:function(){return this[this.defaultDecorator]},afterField:e,singleAfterField:i,beforeField:n,singleBeforeField:r,bootstrapMultiple:o,bootstrapSingle:s};return c}),define("sc-validatr/javascript/formDecorator/formDecorator",["require","jquery","lodash","backbone","./formDecorator.decorators","eventmanager"],function(t){function e(){var t=this;n(t.$elements.filter("form"),t.$elements.find("form")).on("submit",r.bind(i,t)),r.each(t.fields,function(e){e.onBlur&&e.$element.on("change",function(i){var n,o={};e.remove(),!t.validator.validate(e.$element,e.attribute,{silent:!0})&&t.validator.validationErrors()[e.attribute]&&(e.remove=t.decorate(e,t.validator.validationErrors()[e.attribute])),n=t.validator.validationErrors()[e.attribute],r.isArray(n)&&n.length>0&&(o[e.attribute]=n),t.trigger("render",o)})})}function i(t){this.validator.validate(t.target)||(this.render(this.validator.validationErrors()),t.preventDefault())}var n=t("jquery"),r=t("lodash"),o=t("backbone"),s=t("./formDecorator.decorators"),a=t("eventmanager"),l="input, select, textarea",c=function(t){r.extend(this,o.Events);var i={globalEvents:!0};if(this.config=r.defaults(t,i),this.attributeMapping=this.config.attributeMapping||[],this.$elements=n(t.elements),"object"==typeof console&&"function"==typeof console.warn&&(t.form&&console.warn("DEPRECATED: FormDecorator parameter 'form' has been deprecated. Please use 'elements' param in its place."),t.inputs&&console.warn("DEPRECATED: FormDecorator parameter 'inputs' has been deprecated. Please use 'elements' param in its place.")),this.$elements=this.$elements.add(t.form),this.$elements=this.$elements.add(t.inputs),(t.onBlur||this.$elements.is("form")||this.$elements.find("form").length>0)&&"object"!=typeof t.validator)throw new TypeError("FormDecorator: You must pass a validator in order to use onBlur or if you pass a form element.");if(this.validator=this.config.validator,this.fields=[],"function"==typeof this.config.decorator)this.decorate=this.config.decorator;else if("string"==typeof this.config.decorator){if(!s[this.config.decorator])throw new TypeError('FormDecorator: Unrecognized decorator type "'+this.config.decorator+'"');this.decorate=s[this.config.decorator]}this.parseFields(),e.call(this),this.config.globalEvents&&this.on("all",function(t,e){var i=["FormDecorator:"+t].concat(r.slice(arguments,1));a.trigger.apply(a,i),"render:errors"===t&&a.trigger("pageEvent:error:client",e)})};return c.prototype.decorate=s.defaults(),c.prototype.render=function(t){r.each(this.fields,r.bind(function(e){var i=e.attribute;r.has(t,i)?(e.remove(),e.remove=this.decorate(e,t[i]),e.decorated=!0):this.clear(e),this.trigger("render:field",e,t)},this)),this.trigger("render:all",t),r.isObject(t)&&r.keys(t).length>0&&this.trigger("render:errors",t),this.trigger("render",t)},c.prototype.clear=function(t){var e=t||this.fields;r.isArray(e)||(e=[e]),r.each(e,function(t){t.remove(),t.decorated=!1}),this.trigger("clear")},c.prototype.parseFields=function(t){var e=this,i=n();this.fields.length=0,i=i.add(n(this.$elements).filter(l)),i=i.add(n(this.$elements).find(l)),i.each(function(){var t=n(this),i={attribute:e.attributeMapping[t.attr("name")]||t.data("validation-attribute")||t.attr("name")||t.attr("id"),$element:t,onBlur:e.config.onBlur,shouldDecorate:function(){return!(this.onBlur&&!this.hasFocused)},remove:function(){}};i.attribute&&e.fields.push(i)})},c}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define("moment",e):t.moment=e()}(this,function(){"use strict";function t(){return Ai.apply(null,arguments)}function e(t){Ai=t}function i(t){return"[object Array]"===Object.prototype.toString.call(t)}function n(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function r(t,e){var i,n=[];for(i=0;i<t.length;++i)n.push(e(t[i],i));return n}function o(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function s(t,e){for(var i in e)o(e,i)&&(t[i]=e[i]);return o(e,"toString")&&(t.toString=e.toString),o(e,"valueOf")&&(t.valueOf=e.valueOf),t}function a(t,e,i,n){return It(t,e,i,n,!0).utc()}function l(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function c(t){return null==t._pf&&(t._pf=l()),t._pf}function d(t){if(null==t._isValid){var e=c(t);t._isValid=!(isNaN(t._d.getTime())||!(e.overflow<0)||e.empty||e.invalidMonth||e.invalidWeekday||e.nullInput||e.invalidFormat||e.userInvalidated),t._strict&&(t._isValid=t._isValid&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour)}return t._isValid}function u(t){var e=a(NaN);return null!=t?s(c(e),t):c(e).userInvalidated=!0,e}function h(t,e){var i,n,r;if("undefined"!=typeof e._isAMomentObject&&(t._isAMomentObject=e._isAMomentObject),"undefined"!=typeof e._i&&(t._i=e._i),"undefined"!=typeof e._f&&(t._f=e._f),"undefined"!=typeof e._l&&(t._l=e._l),"undefined"!=typeof e._strict&&(t._strict=e._strict),"undefined"!=typeof e._tzm&&(t._tzm=e._tzm),"undefined"!=typeof e._isUTC&&(t._isUTC=e._isUTC),"undefined"!=typeof e._offset&&(t._offset=e._offset),"undefined"!=typeof e._pf&&(t._pf=c(e)),"undefined"!=typeof e._locale&&(t._locale=e._locale),Bi.length>0)for(i in Bi)n=Bi[i],r=e[n],"undefined"!=typeof r&&(t[n]=r);return t}function p(e){h(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),Oi===!1&&(Oi=!0,t.updateOffset(this),Oi=!1)}function f(t){return t instanceof p||null!=t&&null!=t._isAMomentObject}function g(t){return 0>t?Math.ceil(t):Math.floor(t)}function m(t){var e=+t,i=0;return 0!==e&&isFinite(e)&&(i=g(e)),i}function v(t,e,i){var n,r=Math.min(t.length,e.length),o=Math.abs(t.length-e.length),s=0;for(n=0;r>n;n++)(i&&t[n]!==e[n]||!i&&m(t[n])!==m(e[n]))&&s++;return s+o}function y(){}function b(t){return t?t.toLowerCase().replace("_","-"):t}function w(t){for(var e,i,n,r,o=0;o<t.length;){for(r=b(t[o]).split("-"),e=r.length,i=b(t[o+1]),i=i?i.split("-"):null;e>0;){if(n=_(r.slice(0,e).join("-")))return n;if(i&&i.length>=e&&v(r,i,!0)>=e-1)break;e--}o++}return null}function _(t){var e=null;if(!qi[t]&&"undefined"!=typeof module&&module&&module.exports)try{e=Mi._abbr,require("./locale/"+t),k(e)}catch(i){}return qi[t]}function k(t,e){var i;return t&&(i="undefined"==typeof e?x(t):C(t,e),i&&(Mi=i)),Mi._abbr}function C(t,e){return null!==e?(e.abbr=t,qi[t]=qi[t]||new y,qi[t].set(e),k(t),qi[t]):(delete qi[t],null)}function x(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return Mi;if(!i(t)){if(e=_(t))return e;t=[t]}return w(t)}function S(t,e){var i=t.toLowerCase();Ri[i]=Ri[i+"s"]=Ri[e]=t}function T(t){return"string"==typeof t?Ri[t]||Ri[t.toLowerCase()]:void 0}function P(t){var e,i,n={};for(i in t)o(t,i)&&(e=T(i),e&&(n[e]=t[i]));return n}function I(e,i){return function(n){return null!=n?(j(this,e,n),t.updateOffset(this,i),this):D(this,e)}}function D(t,e){return t._d["get"+(t._isUTC?"UTC":"")+e]()}function j(t,e,i){return t._d["set"+(t._isUTC?"UTC":"")+e](i)}function E(t,e){var i;if("object"==typeof t)for(i in t)this.set(i,t[i]);else if(t=T(t),"function"==typeof this[t])return this[t](e);return this}function $(t,e,i){var n=""+Math.abs(t),r=e-n.length,o=t>=0;return(o?i?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+n}function A(t,e,i,n){var r=n;"string"==typeof n&&(r=function(){return this[n]()}),t&&(zi[t]=r),e&&(zi[e[0]]=function(){return $(r.apply(this,arguments),e[1],e[2])}),i&&(zi[i]=function(){return this.localeData().ordinal(r.apply(this,arguments),t)})}function M(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function B(t){var e,i,n=t.match(Li);for(e=0,i=n.length;i>e;e++)zi[n[e]]?n[e]=zi[n[e]]:n[e]=M(n[e]);return function(r){var o="";for(e=0;i>e;e++)o+=n[e]instanceof Function?n[e].call(r,t):n[e];return o}}function O(t,e){return t.isValid()?(e=q(e,t.localeData()),Vi[e]=Vi[e]||B(e),Vi[e](t)):t.localeData().invalidDate()}function q(t,e){function i(t){return e.longDateFormat(t)||t}var n=5;for(Ni.lastIndex=0;n>=0&&Ni.test(t);)t=t.replace(Ni,i),Ni.lastIndex=0,n-=1;return t}function R(t){return"function"==typeof t&&"[object Function]"===Object.prototype.toString.call(t)}function L(t,e,i){rn[t]=R(e)?e:function(t){return t&&i?i:e}}function N(t,e){return o(rn,t)?rn[t](e._strict,e._locale):new RegExp(V(t))}function V(t){return t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,i,n,r){return e||i||n||r}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function z(t,e){var i,n=e;for("string"==typeof t&&(t=[t]),"number"==typeof e&&(n=function(t,i){i[e]=m(t)}),i=0;i<t.length;i++)on[t[i]]=n}function F(t,e){z(t,function(t,i,n,r){n._w=n._w||{},e(t,n._w,n,r)})}function U(t,e,i){null!=e&&o(on,t)&&on[t](e,i._a,i,t)}function H(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function W(t){return this._months[t.month()]}function G(t){return this._monthsShort[t.month()]}function Y(t,e,i){var n,r,o;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;12>n;n++){if(r=a([2e3,n]),i&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),i||this._monthsParse[n]||(o="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[n]=new RegExp(o.replace(".",""),"i")),i&&"MMMM"===e&&this._longMonthsParse[n].test(t))return n;if(i&&"MMM"===e&&this._shortMonthsParse[n].test(t))return n;if(!i&&this._monthsParse[n].test(t))return n}}function Q(t,e){var i;return"string"==typeof e&&(e=t.localeData().monthsParse(e),"number"!=typeof e)?t:(i=Math.min(t.date(),H(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,i),t)}function J(e){return null!=e?(Q(this,e),t.updateOffset(this,!0),this):D(this,"Month")}function K(){return H(this.year(),this.month())}function Z(t){var e,i=t._a;return i&&-2===c(t).overflow&&(e=i[an]<0||i[an]>11?an:i[ln]<1||i[ln]>H(i[sn],i[an])?ln:i[cn]<0||i[cn]>24||24===i[cn]&&(0!==i[dn]||0!==i[un]||0!==i[hn])?cn:i[dn]<0||i[dn]>59?dn:i[un]<0||i[un]>59?un:i[hn]<0||i[hn]>999?hn:-1,c(t)._overflowDayOfYear&&(sn>e||e>ln)&&(e=ln),c(t).overflow=e),t}function X(e){t.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function tt(t,e){var i=!0;return s(function(){return i&&(X(t+"\n"+(new Error).stack),i=!1),e.apply(this,arguments)},e)}function et(t,e){gn[t]||(X(e),gn[t]=!0)}function it(t){var e,i,n=t._i,r=mn.exec(n);if(r){for(c(t).iso=!0,e=0,i=vn.length;i>e;e++)if(vn[e][1].exec(n)){t._f=vn[e][0];break}for(e=0,i=yn.length;i>e;e++)if(yn[e][1].exec(n)){t._f+=(r[6]||" ")+yn[e][0];break}n.match(tn)&&(t._f+="Z"),_t(t)}else t._isValid=!1}function nt(e){var i=bn.exec(e._i);return null!==i?void(e._d=new Date(+i[1])):(it(e),void(e._isValid===!1&&(delete e._isValid,t.createFromInputFallback(e))))}function rt(t,e,i,n,r,o,s){var a=new Date(t,e,i,n,r,o,s);return 1970>t&&a.setFullYear(t),a}function ot(t){var e=new Date(Date.UTC.apply(null,arguments));return 1970>t&&e.setUTCFullYear(t),e}function st(t){return at(t)?366:365}function at(t){return t%4===0&&t%100!==0||t%400===0}function lt(){return at(this.year())}function ct(t,e,i){var n,r=i-e,o=i-t.day();return o>r&&(o-=7),r-7>o&&(o+=7),n=Dt(t).add(o,"d"),{week:Math.ceil(n.dayOfYear()/7),year:n.year()}}function dt(t){return ct(t,this._week.dow,this._week.doy).week}function ut(){return this._week.dow}function ht(){return this._week.doy}function pt(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")}function ft(t){var e=ct(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")}function gt(t,e,i,n,r){var o,s=6+r-n,a=ot(t,0,1+s),l=a.getUTCDay();return r>l&&(l+=7),i=null!=i?1*i:r,o=1+s+7*(e-1)-l+i,{year:o>0?t:t-1,dayOfYear:o>0?o:st(t-1)+o}}function mt(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")}function vt(t,e,i){return null!=t?t:null!=e?e:i}function yt(t){var e=new Date;return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function bt(t){var e,i,n,r,o=[];if(!t._d){for(n=yt(t),t._w&&null==t._a[ln]&&null==t._a[an]&&wt(t),t._dayOfYear&&(r=vt(t._a[sn],n[sn]),t._dayOfYear>st(r)&&(c(t)._overflowDayOfYear=!0),i=ot(r,0,t._dayOfYear),t._a[an]=i.getUTCMonth(),t._a[ln]=i.getUTCDate()),e=0;3>e&&null==t._a[e];++e)t._a[e]=o[e]=n[e];for(;7>e;e++)t._a[e]=o[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[cn]&&0===t._a[dn]&&0===t._a[un]&&0===t._a[hn]&&(t._nextDay=!0,t._a[cn]=0),t._d=(t._useUTC?ot:rt).apply(null,o),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[cn]=24)}}function wt(t){var e,i,n,r,o,s,a;e=t._w,null!=e.GG||null!=e.W||null!=e.E?(o=1,s=4,i=vt(e.GG,t._a[sn],ct(Dt(),1,4).year),n=vt(e.W,1),r=vt(e.E,1)):(o=t._locale._week.dow,s=t._locale._week.doy,i=vt(e.gg,t._a[sn],ct(Dt(),o,s).year),n=vt(e.w,1),null!=e.d?(r=e.d,o>r&&++n):r=null!=e.e?e.e+o:o),a=gt(i,n,r,s,o),t._a[sn]=a.year,t._dayOfYear=a.dayOfYear}function _t(e){if(e._f===t.ISO_8601)return void it(e);e._a=[],c(e).empty=!0;var i,n,r,o,s,a=""+e._i,l=a.length,d=0;for(r=q(e._f,e._locale).match(Li)||[],i=0;i<r.length;i++)o=r[i],n=(a.match(N(o,e))||[])[0],n&&(s=a.substr(0,a.indexOf(n)),s.length>0&&c(e).unusedInput.push(s),a=a.slice(a.indexOf(n)+n.length),d+=n.length),zi[o]?(n?c(e).empty=!1:c(e).unusedTokens.push(o),U(o,n,e)):e._strict&&!n&&c(e).unusedTokens.push(o);c(e).charsLeftOver=l-d,a.length>0&&c(e).unusedInput.push(a),c(e).bigHour===!0&&e._a[cn]<=12&&e._a[cn]>0&&(c(e).bigHour=void 0),e._a[cn]=kt(e._locale,e._a[cn],e._meridiem),bt(e),Z(e)}function kt(t,e,i){var n;return null==i?e:null!=t.meridiemHour?t.meridiemHour(e,i):null!=t.isPM?(n=t.isPM(i),n&&12>e&&(e+=12),n||12!==e||(e=0),e):e}function Ct(t){var e,i,n,r,o;if(0===t._f.length)return c(t).invalidFormat=!0,void(t._d=new Date(NaN));for(r=0;r<t._f.length;r++)o=0,e=h({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[r],_t(e),d(e)&&(o+=c(e).charsLeftOver,o+=10*c(e).unusedTokens.length,c(e).score=o,(null==n||n>o)&&(n=o,i=e));s(t,i||e)}function xt(t){if(!t._d){var e=P(t._i);t._a=[e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],bt(t)}}function St(t){var e=new p(Z(Tt(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function Tt(t){var e=t._i,r=t._f;return t._locale=t._locale||x(t._l),null===e||void 0===r&&""===e?u({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),f(e)?new p(Z(e)):(i(r)?Ct(t):r?_t(t):n(e)?t._d=e:Pt(t),t))}function Pt(e){var o=e._i;void 0===o?e._d=new Date:n(o)?e._d=new Date(+o):"string"==typeof o?nt(e):i(o)?(e._a=r(o.slice(0),function(t){return parseInt(t,10)}),bt(e)):"object"==typeof o?xt(e):"number"==typeof o?e._d=new Date(o):t.createFromInputFallback(e)}function It(t,e,i,n,r){var o={};return"boolean"==typeof i&&(n=i,i=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=r,o._l=i,o._i=t,o._f=e,o._strict=n,St(o)}function Dt(t,e,i,n){return It(t,e,i,n,!1)}function jt(t,e){var n,r;if(1===e.length&&i(e[0])&&(e=e[0]),!e.length)return Dt();for(n=e[0],r=1;r<e.length;++r)(!e[r].isValid()||e[r][t](n))&&(n=e[r]);return n}function Et(){var t=[].slice.call(arguments,0);return jt("isBefore",t)}function $t(){var t=[].slice.call(arguments,0);return jt("isAfter",t)}function At(t){var e=P(t),i=e.year||0,n=e.quarter||0,r=e.month||0,o=e.week||0,s=e.day||0,a=e.hour||0,l=e.minute||0,c=e.second||0,d=e.millisecond||0;this._milliseconds=+d+1e3*c+6e4*l+36e5*a,this._days=+s+7*o,this._months=+r+3*n+12*i,this._data={},this._locale=x(),this._bubble()}function Mt(t){return t instanceof At}function Bt(t,e){A(t,0,0,function(){var t=this.utcOffset(),i="+";return 0>t&&(t=-t,i="-"),i+$(~~(t/60),2)+e+$(~~t%60,2)})}function Ot(t){var e=(t||"").match(tn)||[],i=e[e.length-1]||[],n=(i+"").match(xn)||["-",0,0],r=+(60*n[1])+m(n[2]);return"+"===n[0]?r:-r}function qt(e,i){var r,o;return i._isUTC?(r=i.clone(),o=(f(e)||n(e)?+e:+Dt(e))-+r,r._d.setTime(+r._d+o),t.updateOffset(r,!1),r):Dt(e).local()}function Rt(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function Lt(e,i){var n,r=this._offset||0;return null!=e?("string"==typeof e&&(e=Ot(e)),Math.abs(e)<16&&(e=60*e),!this._isUTC&&i&&(n=Rt(this)),this._offset=e,this._isUTC=!0,null!=n&&this.add(n,"m"),r!==e&&(!i||this._changeInProgress?ee(this,Jt(e-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?r:Rt(this)}function Nt(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function Vt(t){return this.utcOffset(0,t)}function zt(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Rt(this),"m")),this}function Ft(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Ot(this._i)),this}function Ut(t){return t=t?Dt(t).utcOffset():0,(this.utcOffset()-t)%60===0}function Ht(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Wt(){if("undefined"!=typeof this._isDSTShifted)return this._isDSTShifted;var t={};if(h(t,this),t=Tt(t),t._a){var e=t._isUTC?a(t._a):Dt(t._a);this._isDSTShifted=this.isValid()&&v(t._a,e.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Gt(){return!this._isUTC}function Yt(){return this._isUTC}function Qt(){return this._isUTC&&0===this._offset}function Jt(t,e){var i,n,r,s=t,a=null;return Mt(t)?s={ms:t._milliseconds,d:t._days,M:t._months}:"number"==typeof t?(s={},e?s[e]=t:s.milliseconds=t):(a=Sn.exec(t))?(i="-"===a[1]?-1:1,s={y:0,d:m(a[ln])*i,h:m(a[cn])*i,m:m(a[dn])*i,s:m(a[un])*i,ms:m(a[hn])*i}):(a=Tn.exec(t))?(i="-"===a[1]?-1:1,s={y:Kt(a[2],i),M:Kt(a[3],i),d:Kt(a[4],i),h:Kt(a[5],i),m:Kt(a[6],i),s:Kt(a[7],i),w:Kt(a[8],i)}):null==s?s={}:"object"==typeof s&&("from"in s||"to"in s)&&(r=Xt(Dt(s.from),Dt(s.to)),s={},s.ms=r.milliseconds,s.M=r.months),n=new At(s),Mt(t)&&o(t,"_locale")&&(n._locale=t._locale),n}function Kt(t,e){var i=t&&parseFloat(t.replace(",","."));return(isNaN(i)?0:i)*e}function Zt(t,e){var i={milliseconds:0,months:0};return i.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(i.months,"M").isAfter(e)&&--i.months,i.milliseconds=+e-+t.clone().add(i.months,"M"),i}function Xt(t,e){var i;return e=qt(e,t),t.isBefore(e)?i=Zt(t,e):(i=Zt(e,t),i.milliseconds=-i.milliseconds,i.months=-i.months),i}function te(t,e){return function(i,n){var r,o;return null===n||isNaN(+n)||(et(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period)."),o=i,i=n,n=o),i="string"==typeof i?+i:i,r=Jt(i,n),ee(this,r,t),this}}function ee(e,i,n,r){var o=i._milliseconds,s=i._days,a=i._months;r=null==r?!0:r,o&&e._d.setTime(+e._d+o*n),s&&j(e,"Date",D(e,"Date")+s*n),a&&Q(e,D(e,"Month")+a*n),r&&t.updateOffset(e,s||a)}function ie(t,e){var i=t||Dt(),n=qt(i,this).startOf("day"),r=this.diff(n,"days",!0),o=-6>r?"sameElse":-1>r?"lastWeek":0>r?"lastDay":1>r?"sameDay":2>r?"nextDay":7>r?"nextWeek":"sameElse";return this.format(e&&e[o]||this.localeData().calendar(o,this,Dt(i)))}function ne(){return new p(this)}function re(t,e){var i;return e=T("undefined"!=typeof e?e:"millisecond"),"millisecond"===e?(t=f(t)?t:Dt(t),+this>+t):(i=f(t)?+t:+Dt(t),i<+this.clone().startOf(e))}function oe(t,e){var i;return e=T("undefined"!=typeof e?e:"millisecond"),"millisecond"===e?(t=f(t)?t:Dt(t),+t>+this):(i=f(t)?+t:+Dt(t),+this.clone().endOf(e)<i)}function se(t,e,i){return this.isAfter(t,i)&&this.isBefore(e,i)}function ae(t,e){var i;return e=T(e||"millisecond"),"millisecond"===e?(t=f(t)?t:Dt(t),+this===+t):(i=+Dt(t),+this.clone().startOf(e)<=i&&i<=+this.clone().endOf(e))}function le(t,e,i){var n,r,o=qt(t,this),s=6e4*(o.utcOffset()-this.utcOffset());return e=T(e),"year"===e||"month"===e||"quarter"===e?(r=ce(this,o),"quarter"===e?r/=3:"year"===e&&(r/=12)):(n=this-o,r="second"===e?n/1e3:"minute"===e?n/6e4:"hour"===e?n/36e5:"day"===e?(n-s)/864e5:"week"===e?(n-s)/6048e5:n),i?r:g(r)}function ce(t,e){var i,n,r=12*(e.year()-t.year())+(e.month()-t.month()),o=t.clone().add(r,"months");return 0>e-o?(i=t.clone().add(r-1,"months"),n=(e-o)/(o-i)):(i=t.clone().add(r+1,"months"),n=(e-o)/(i-o)),-(r+n)}function de(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function ue(){var t=this.clone().utc();return 0<t.year()&&t.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():O(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):O(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function he(e){var i=O(this,e||t.defaultFormat);return this.localeData().postformat(i)}function pe(t,e){return this.isValid()?Jt({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function fe(t){return this.from(Dt(),t)}function ge(t,e){return this.isValid()?Jt({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function me(t){return this.to(Dt(),t)}function ve(t){var e;return void 0===t?this._locale._abbr:(e=x(t),null!=e&&(this._locale=e),this)}function ye(){return this._locale}function be(t){switch(t=T(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t&&this.weekday(0),"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this}function we(t){return t=T(t),void 0===t||"millisecond"===t?this:this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms")}function _e(){return+this._d-6e4*(this._offset||0)}function ke(){return Math.floor(+this/1e3)}function Ce(){return this._offset?new Date(+this):this._d}function xe(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function Se(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function Te(){return d(this)}function Pe(){return s({},c(this))}function Ie(){return c(this).overflow}function De(t,e){A(0,[t,t.length],0,e)}function je(t,e,i){return ct(Dt([t,11,31+e-i]),e,i).week}function Ee(t){var e=ct(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==t?e:this.add(t-e,"y")}function $e(t){var e=ct(this,1,4).year;return null==t?e:this.add(t-e,"y")}function Ae(){return je(this.year(),1,4)}function Me(){var t=this.localeData()._week;return je(this.year(),t.dow,t.doy)}function Be(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)}function Oe(t,e){return"string"!=typeof t?t:isNaN(t)?(t=e.weekdaysParse(t),"number"==typeof t?t:null):parseInt(t,10)}function qe(t){return this._weekdays[t.day()]}function Re(t){return this._weekdaysShort[t.day()]}function Le(t){return this._weekdaysMin[t.day()]}function Ne(t){var e,i,n;for(this._weekdaysParse=this._weekdaysParse||[],e=0;7>e;e++)if(this._weekdaysParse[e]||(i=Dt([2e3,1]).day(e),n="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[e]=new RegExp(n.replace(".",""),"i")),this._weekdaysParse[e].test(t))return e}function Ve(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=Oe(t,this.localeData()),this.add(t-e,"d")):e}function ze(t){var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")}function Fe(t){return null==t?this.day()||7:this.day(this.day()%7?t:t-7)}function Ue(t,e){A(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function He(t,e){return e._meridiemParse}function We(t){return"p"===(t+"").toLowerCase().charAt(0)}function Ge(t,e,i){return t>11?i?"pm":"PM":i?"am":"AM"}function Ye(t,e){e[hn]=m(1e3*("0."+t))}function Qe(){return this._isUTC?"UTC":""}function Je(){return this._isUTC?"Coordinated Universal Time":""}function Ke(t){return Dt(1e3*t)}function Ze(){return Dt.apply(null,arguments).parseZone()}function Xe(t,e,i){var n=this._calendar[t];return"function"==typeof n?n.call(e,i):n}function ti(t){var e=this._longDateFormat[t],i=this._longDateFormat[t.toUpperCase()];return e||!i?e:(this._longDateFormat[t]=i.replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t])}function ei(){return this._invalidDate}function ii(t){return this._ordinal.replace("%d",t)}function ni(t){return t}function ri(t,e,i,n){var r=this._relativeTime[i];return"function"==typeof r?r(t,e,i,n):r.replace(/%d/i,t)}function oi(t,e){var i=this._relativeTime[t>0?"future":"past"];return"function"==typeof i?i(e):i.replace(/%s/i,e)}function si(t){var e,i;for(i in t)e=t[i],"function"==typeof e?this[i]=e:this["_"+i]=e;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function ai(t,e,i,n){var r=x(),o=a().set(n,e);return r[i](o,t)}function li(t,e,i,n,r){if("number"==typeof t&&(e=t,t=void 0),t=t||"",null!=e)return ai(t,e,i,r);var o,s=[];for(o=0;n>o;o++)s[o]=ai(t,o,i,r);return s}function ci(t,e){return li(t,e,"months",12,"month")}function di(t,e){return li(t,e,"monthsShort",12,"month")}function ui(t,e){return li(t,e,"weekdays",7,"day")}function hi(t,e){return li(t,e,"weekdaysShort",7,"day")}function pi(t,e){return li(t,e,"weekdaysMin",7,"day")}function fi(){var t=this._data;return this._milliseconds=Qn(this._milliseconds),this._days=Qn(this._days),this._months=Qn(this._months),t.milliseconds=Qn(t.milliseconds),t.seconds=Qn(t.seconds),t.minutes=Qn(t.minutes),t.hours=Qn(t.hours),t.months=Qn(t.months),t.years=Qn(t.years),this}function gi(t,e,i,n){var r=Jt(e,i);return t._milliseconds+=n*r._milliseconds,t._days+=n*r._days,t._months+=n*r._months,t._bubble()}function mi(t,e){return gi(this,t,e,1)}function vi(t,e){return gi(this,t,e,-1)}function yi(t){return 0>t?Math.floor(t):Math.ceil(t);
}function bi(){var t,e,i,n,r,o=this._milliseconds,s=this._days,a=this._months,l=this._data;return o>=0&&s>=0&&a>=0||0>=o&&0>=s&&0>=a||(o+=864e5*yi(_i(a)+s),s=0,a=0),l.milliseconds=o%1e3,t=g(o/1e3),l.seconds=t%60,e=g(t/60),l.minutes=e%60,i=g(e/60),l.hours=i%24,s+=g(i/24),r=g(wi(s)),a+=r,s-=yi(_i(r)),n=g(a/12),a%=12,l.days=s,l.months=a,l.years=n,this}function wi(t){return 4800*t/146097}function _i(t){return 146097*t/4800}function ki(t){var e,i,n=this._milliseconds;if(t=T(t),"month"===t||"year"===t)return e=this._days+n/864e5,i=this._months+wi(e),"month"===t?i:i/12;switch(e=this._days+Math.round(_i(this._months)),t){case"week":return e/7+n/6048e5;case"day":return e+n/864e5;case"hour":return 24*e+n/36e5;case"minute":return 1440*e+n/6e4;case"second":return 86400*e+n/1e3;case"millisecond":return Math.floor(864e5*e)+n;default:throw new Error("Unknown unit "+t)}}function Ci(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*m(this._months/12)}function xi(t){return function(){return this.as(t)}}function Si(t){return t=T(t),this[t+"s"]()}function Ti(t){return function(){return this._data[t]}}function Pi(){return g(this.days()/7)}function Ii(t,e,i,n,r){return r.relativeTime(e||1,!!i,t,n)}function Di(t,e,i){var n=Jt(t).abs(),r=ur(n.as("s")),o=ur(n.as("m")),s=ur(n.as("h")),a=ur(n.as("d")),l=ur(n.as("M")),c=ur(n.as("y")),d=r<hr.s&&["s",r]||1===o&&["m"]||o<hr.m&&["mm",o]||1===s&&["h"]||s<hr.h&&["hh",s]||1===a&&["d"]||a<hr.d&&["dd",a]||1===l&&["M"]||l<hr.M&&["MM",l]||1===c&&["y"]||["yy",c];return d[2]=e,d[3]=+t>0,d[4]=i,Ii.apply(null,d)}function ji(t,e){return void 0===hr[t]?!1:void 0===e?hr[t]:(hr[t]=e,!0)}function Ei(t){var e=this.localeData(),i=Di(this,!t,e);return t&&(i=e.pastFuture(+this,i)),e.postformat(i)}function $i(){var t,e,i,n=pr(this._milliseconds)/1e3,r=pr(this._days),o=pr(this._months);t=g(n/60),e=g(t/60),n%=60,t%=60,i=g(o/12),o%=12;var s=i,a=o,l=r,c=e,d=t,u=n,h=this.asSeconds();return h?(0>h?"-":"")+"P"+(s?s+"Y":"")+(a?a+"M":"")+(l?l+"D":"")+(c||d||u?"T":"")+(c?c+"H":"")+(d?d+"M":"")+(u?u+"S":""):"P0D"}var Ai,Mi,Bi=t.momentProperties=[],Oi=!1,qi={},Ri={},Li=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Ni=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Vi={},zi={},Fi=/\d/,Ui=/\d\d/,Hi=/\d{3}/,Wi=/\d{4}/,Gi=/[+-]?\d{6}/,Yi=/\d\d?/,Qi=/\d{1,3}/,Ji=/\d{1,4}/,Ki=/[+-]?\d{1,6}/,Zi=/\d+/,Xi=/[+-]?\d+/,tn=/Z|[+-]\d\d:?\d\d/gi,en=/[+-]?\d+(\.\d{1,3})?/,nn=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,rn={},on={},sn=0,an=1,ln=2,cn=3,dn=4,un=5,hn=6;A("M",["MM",2],"Mo",function(){return this.month()+1}),A("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),A("MMMM",0,0,function(t){return this.localeData().months(this,t)}),S("month","M"),L("M",Yi),L("MM",Yi,Ui),L("MMM",nn),L("MMMM",nn),z(["M","MM"],function(t,e){e[an]=m(t)-1}),z(["MMM","MMMM"],function(t,e,i,n){var r=i._locale.monthsParse(t,n,i._strict);null!=r?e[an]=r:c(i).invalidMonth=t});var pn="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),fn="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),gn={};t.suppressDeprecationWarnings=!1;var mn=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,vn=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],yn=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],bn=/^\/?Date\((\-?\d+)/i;t.createFromInputFallback=tt("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),A(0,["YY",2],0,function(){return this.year()%100}),A(0,["YYYY",4],0,"year"),A(0,["YYYYY",5],0,"year"),A(0,["YYYYYY",6,!0],0,"year"),S("year","y"),L("Y",Xi),L("YY",Yi,Ui),L("YYYY",Ji,Wi),L("YYYYY",Ki,Gi),L("YYYYYY",Ki,Gi),z(["YYYYY","YYYYYY"],sn),z("YYYY",function(e,i){i[sn]=2===e.length?t.parseTwoDigitYear(e):m(e)}),z("YY",function(e,i){i[sn]=t.parseTwoDigitYear(e)}),t.parseTwoDigitYear=function(t){return m(t)+(m(t)>68?1900:2e3)};var wn=I("FullYear",!1);A("w",["ww",2],"wo","week"),A("W",["WW",2],"Wo","isoWeek"),S("week","w"),S("isoWeek","W"),L("w",Yi),L("ww",Yi,Ui),L("W",Yi),L("WW",Yi,Ui),F(["w","ww","W","WW"],function(t,e,i,n){e[n.substr(0,1)]=m(t)});var _n={dow:0,doy:6};A("DDD",["DDDD",3],"DDDo","dayOfYear"),S("dayOfYear","DDD"),L("DDD",Qi),L("DDDD",Hi),z(["DDD","DDDD"],function(t,e,i){i._dayOfYear=m(t)}),t.ISO_8601=function(){};var kn=tt("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var t=Dt.apply(null,arguments);return this>t?this:t}),Cn=tt("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var t=Dt.apply(null,arguments);return t>this?this:t});Bt("Z",":"),Bt("ZZ",""),L("Z",tn),L("ZZ",tn),z(["Z","ZZ"],function(t,e,i){i._useUTC=!0,i._tzm=Ot(t)});var xn=/([\+\-]|\d\d)/gi;t.updateOffset=function(){};var Sn=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Tn=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Jt.fn=At.prototype;var Pn=te(1,"add"),In=te(-1,"subtract");t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var Dn=tt("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return void 0===t?this.localeData():this.locale(t)});A(0,["gg",2],0,function(){return this.weekYear()%100}),A(0,["GG",2],0,function(){return this.isoWeekYear()%100}),De("gggg","weekYear"),De("ggggg","weekYear"),De("GGGG","isoWeekYear"),De("GGGGG","isoWeekYear"),S("weekYear","gg"),S("isoWeekYear","GG"),L("G",Xi),L("g",Xi),L("GG",Yi,Ui),L("gg",Yi,Ui),L("GGGG",Ji,Wi),L("gggg",Ji,Wi),L("GGGGG",Ki,Gi),L("ggggg",Ki,Gi),F(["gggg","ggggg","GGGG","GGGGG"],function(t,e,i,n){e[n.substr(0,2)]=m(t)}),F(["gg","GG"],function(e,i,n,r){i[r]=t.parseTwoDigitYear(e)}),A("Q",0,0,"quarter"),S("quarter","Q"),L("Q",Fi),z("Q",function(t,e){e[an]=3*(m(t)-1)}),A("D",["DD",2],"Do","date"),S("date","D"),L("D",Yi),L("DD",Yi,Ui),L("Do",function(t,e){return t?e._ordinalParse:e._ordinalParseLenient}),z(["D","DD"],ln),z("Do",function(t,e){e[ln]=m(t.match(Yi)[0],10)});var jn=I("Date",!0);A("d",0,"do","day"),A("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),A("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),A("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),A("e",0,0,"weekday"),A("E",0,0,"isoWeekday"),S("day","d"),S("weekday","e"),S("isoWeekday","E"),L("d",Yi),L("e",Yi),L("E",Yi),L("dd",nn),L("ddd",nn),L("dddd",nn),F(["dd","ddd","dddd"],function(t,e,i){var n=i._locale.weekdaysParse(t);null!=n?e.d=n:c(i).invalidWeekday=t}),F(["d","e","E"],function(t,e,i,n){e[n]=m(t)});var En="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),$n="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),An="Su_Mo_Tu_We_Th_Fr_Sa".split("_");A("H",["HH",2],0,"hour"),A("h",["hh",2],0,function(){return this.hours()%12||12}),Ue("a",!0),Ue("A",!1),S("hour","h"),L("a",He),L("A",He),L("H",Yi),L("h",Yi),L("HH",Yi,Ui),L("hh",Yi,Ui),z(["H","HH"],cn),z(["a","A"],function(t,e,i){i._isPm=i._locale.isPM(t),i._meridiem=t}),z(["h","hh"],function(t,e,i){e[cn]=m(t),c(i).bigHour=!0});var Mn=/[ap]\.?m?\.?/i,Bn=I("Hours",!0);A("m",["mm",2],0,"minute"),S("minute","m"),L("m",Yi),L("mm",Yi,Ui),z(["m","mm"],dn);var On=I("Minutes",!1);A("s",["ss",2],0,"second"),S("second","s"),L("s",Yi),L("ss",Yi,Ui),z(["s","ss"],un);var qn=I("Seconds",!1);A("S",0,0,function(){return~~(this.millisecond()/100)}),A(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),A(0,["SSS",3],0,"millisecond"),A(0,["SSSS",4],0,function(){return 10*this.millisecond()}),A(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),A(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),A(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),A(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),A(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),S("millisecond","ms"),L("S",Qi,Fi),L("SS",Qi,Ui),L("SSS",Qi,Hi);var Rn;for(Rn="SSSS";Rn.length<=9;Rn+="S")L(Rn,Zi);for(Rn="S";Rn.length<=9;Rn+="S")z(Rn,Ye);var Ln=I("Milliseconds",!1);A("z",0,0,"zoneAbbr"),A("zz",0,0,"zoneName");var Nn=p.prototype;Nn.add=Pn,Nn.calendar=ie,Nn.clone=ne,Nn.diff=le,Nn.endOf=we,Nn.format=he,Nn.from=pe,Nn.fromNow=fe,Nn.to=ge,Nn.toNow=me,Nn.get=E,Nn.invalidAt=Ie,Nn.isAfter=re,Nn.isBefore=oe,Nn.isBetween=se,Nn.isSame=ae,Nn.isValid=Te,Nn.lang=Dn,Nn.locale=ve,Nn.localeData=ye,Nn.max=Cn,Nn.min=kn,Nn.parsingFlags=Pe,Nn.set=E,Nn.startOf=be,Nn.subtract=In,Nn.toArray=xe,Nn.toObject=Se,Nn.toDate=Ce,Nn.toISOString=ue,Nn.toJSON=ue,Nn.toString=de,Nn.unix=ke,Nn.valueOf=_e,Nn.year=wn,Nn.isLeapYear=lt,Nn.weekYear=Ee,Nn.isoWeekYear=$e,Nn.quarter=Nn.quarters=Be,Nn.month=J,Nn.daysInMonth=K,Nn.week=Nn.weeks=pt,Nn.isoWeek=Nn.isoWeeks=ft,Nn.weeksInYear=Me,Nn.isoWeeksInYear=Ae,Nn.date=jn,Nn.day=Nn.days=Ve,Nn.weekday=ze,Nn.isoWeekday=Fe,Nn.dayOfYear=mt,Nn.hour=Nn.hours=Bn,Nn.minute=Nn.minutes=On,Nn.second=Nn.seconds=qn,Nn.millisecond=Nn.milliseconds=Ln,Nn.utcOffset=Lt,Nn.utc=Vt,Nn.local=zt,Nn.parseZone=Ft,Nn.hasAlignedHourOffset=Ut,Nn.isDST=Ht,Nn.isDSTShifted=Wt,Nn.isLocal=Gt,Nn.isUtcOffset=Yt,Nn.isUtc=Qt,Nn.isUTC=Qt,Nn.zoneAbbr=Qe,Nn.zoneName=Je,Nn.dates=tt("dates accessor is deprecated. Use date instead.",jn),Nn.months=tt("months accessor is deprecated. Use month instead",J),Nn.years=tt("years accessor is deprecated. Use year instead",wn),Nn.zone=tt("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",Nt);var Vn=Nn,zn={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Fn={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Un="Invalid date",Hn="%d",Wn=/\d{1,2}/,Gn={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Yn=y.prototype;Yn._calendar=zn,Yn.calendar=Xe,Yn._longDateFormat=Fn,Yn.longDateFormat=ti,Yn._invalidDate=Un,Yn.invalidDate=ei,Yn._ordinal=Hn,Yn.ordinal=ii,Yn._ordinalParse=Wn,Yn.preparse=ni,Yn.postformat=ni,Yn._relativeTime=Gn,Yn.relativeTime=ri,Yn.pastFuture=oi,Yn.set=si,Yn.months=W,Yn._months=pn,Yn.monthsShort=G,Yn._monthsShort=fn,Yn.monthsParse=Y,Yn.week=dt,Yn._week=_n,Yn.firstDayOfYear=ht,Yn.firstDayOfWeek=ut,Yn.weekdays=qe,Yn._weekdays=En,Yn.weekdaysMin=Le,Yn._weekdaysMin=An,Yn.weekdaysShort=Re,Yn._weekdaysShort=$n,Yn.weekdaysParse=Ne,Yn.isPM=We,Yn._meridiemParse=Mn,Yn.meridiem=Ge,k("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,i=1===m(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+i}}),t.lang=tt("moment.lang is deprecated. Use moment.locale instead.",k),t.langData=tt("moment.langData is deprecated. Use moment.localeData instead.",x);var Qn=Math.abs,Jn=xi("ms"),Kn=xi("s"),Zn=xi("m"),Xn=xi("h"),tr=xi("d"),er=xi("w"),ir=xi("M"),nr=xi("y"),rr=Ti("milliseconds"),or=Ti("seconds"),sr=Ti("minutes"),ar=Ti("hours"),lr=Ti("days"),cr=Ti("months"),dr=Ti("years"),ur=Math.round,hr={s:45,m:45,h:22,d:26,M:11},pr=Math.abs,fr=At.prototype;fr.abs=fi,fr.add=mi,fr.subtract=vi,fr.as=ki,fr.asMilliseconds=Jn,fr.asSeconds=Kn,fr.asMinutes=Zn,fr.asHours=Xn,fr.asDays=tr,fr.asWeeks=er,fr.asMonths=ir,fr.asYears=nr,fr.valueOf=Ci,fr._bubble=bi,fr.get=Si,fr.milliseconds=rr,fr.seconds=or,fr.minutes=sr,fr.hours=ar,fr.days=lr,fr.weeks=Pi,fr.months=cr,fr.years=dr,fr.humanize=Ei,fr.toISOString=$i,fr.toString=$i,fr.toJSON=$i,fr.locale=ve,fr.localeData=ye,fr.toIsoString=tt("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",$i),fr.lang=Dn,A("X",0,0,"unix"),A("x",0,0,"valueOf"),L("x",Xi),L("X",en),z("X",function(t,e,i){i._d=new Date(1e3*parseFloat(t,10))}),z("x",function(t,e,i){i._d=new Date(m(t))}),t.version="2.10.6",e(Dt),t.fn=Vn,t.min=Et,t.max=$t,t.utc=a,t.unix=Ke,t.months=ci,t.isDate=n,t.locale=k,t.invalid=u,t.duration=Jt,t.isMoment=f,t.weekdays=ui,t.parseZone=Ze,t.localeData=x,t.isDuration=Mt,t.monthsShort=di,t.weekdaysMin=pi,t.defineLocale=C,t.weekdaysShort=hi,t.normalizeUnits=T,t.relativeTimeThreshold=ji;var gr=t;return gr}),define("sc-validatr/javascript/validatr/validatr.types",["require","lodash","moment"],function(t){var e=t("lodash"),i=t("moment"),n={presenceOf:function(t){return e.isUndefined(t)||e.isNull(t)||e.isNaN(t)?!1:e.isString(t)||e.isArray(t)?t.length>0:!0},isEmail:function(t){var e=/^[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+(?:[a-z]{2,})\b$/i;return"string"==typeof t?e.test(t):!1},isNumber:function(t){return"number"!=typeof t||e.isNaN(t)?"string"==typeof t?/\d/.test(t)&&/^\d*\.?\d*$/.test(t):!1:!0},isPhone:function(t){if(!t)return!1;var e=t.replace(/\D/g,"");return e.length<10||e.length>11?!1:10===e.length&&"1"===e[0]?!1:11!==e.length||"1"===e[0]&&"1"!==e[1]?!0:!1},isTrue:function(t){return t===!0},isFalse:function(t){return t===!1},isZip:function(t){return/^\d{5}(\-\d{4})?$/.test(t)},isStreetAddress:function(t){return/^[a-z\d ]+(?:[-#'`.\/]?[a-z\d ]+)*$/gi.test(t)},inRange:function(t,e){return t>=e.min&&t<=e.max},greaterThan:function(t,e){return t>e.min},greaterThanOrEqualTo:function(t,e){return t>=e.min},lessThan:function(t,e){return t<e.max},lessThanOrEqualTo:function(t,e){return t<=e.max},isLengthOf:function(t,e){var i=!0,n=String(t);return e.length&&(i=n.length===e.length?i:!1),e.min&&(i=n.length>=e.min?i:!1),e.max&&(i=n.length<=e.max?i:!1),i},isDate:function(t,e){return i(t).isValid()},inDateRange:function(t,e){var n=i(t),r=n.isAfter(e.min,e.accuracy)||n.isSame(e.min,e.accuracy),o=n.isBefore(e.max,e.accuracy)||n.isSame(e.max,e.accuracy);return n.isValid()?r&&o:void 0}};return n}),define("sc-validatr/javascript/validatr/validatr",["require","jquery","backbone","lodash","./validatr.types"],function(t){function e(t,e){var n={};t=t.is("form")?t.find("input, textarea, select"):t,t.each(function(t,e){var i=a(e);i.is(":checkbox")?n[e.name]=!!e.checked:n[e.name]=e.value||""}),i.call(this,n,e)}function i(t,e){var i=c.extend({},n(t),t);(c.isArray(e)||c.isString(e))&&(c.isString(e)&&(e=[e]),i=c.pick(i,e)),c.each(i,c.bind(function(t,e){r.call(this,e,t,i)},this))}function n(t){var e={},i=".";for(var r in t){var o=t[r];if(!o||o.constructor!==Object&&o.constructor!==Array||c.isEmpty(o))e[r]=o;else{var s=n(o);for(var a in s){var l=s[a];e[r+i+a]=l}}}return e}function r(t,e,i){var n=p.prototype.getValidations.call(this,t);c.each(n,c.bind(function(t){var n;"string"==typeof t.validate?t.validate=u[t.validate]:c.isRegExp(t.validate)&&(n=t.validate,t.validate=function(t){return n.test(t)}),o.call(this,t,e,i)},this))}function o(t,e,i){if(t.optional===!0&&e||t.optional!==!0)try{t.validate.call(this,e,t,i)===!1&&this.errors.push(c.pick(t,"attribute","message"))}catch(n){this.errors.push({attribute:t.attribute,message:"Validation threw an exception. "+n})}}function s(t){return"string"==typeof t.validate?"function"==typeof u[t.validate]:"function"==typeof t.validate||c.isRegExp(t.validate)}var a=t("jquery"),l=t("backbone"),c=t("lodash"),d=t("./validatr.types"),u=d,h={attribute:"global",message:"Error",optional:!1},p=function(){this.validations=[],this.errors=[],this.isValidValue,c.isArray(arguments[0])&&c.each(arguments[0],c.bind(function(t){this.registerValidation(t)},this))};return c.extend(p.prototype,l.Events),p.prototype.validate=function(t,n,r){var o=this,r=r||{};return o.errors=[],"object"==typeof t&&c.isArray(t)===!1?(c.isElement(t)&&(t=a(t)),t instanceof jQuery?e.call(o,t,n):i.call(o,t,n),o.isValidValue=o.errors.length<=0):(o.errors.push({message:"Validation argument not an object."}),o.isValidValue=!1),r.silent||(o.trigger("validate",o.isValidValue,o.validationErrors()),o.isValidValue?o.trigger("validate:valid"):(o.trigger("validate:invalid",o.validationErrors()),c.each(o.validationErrors(),function(t,e){o.trigger("validate:invalid:"+e,t)}))),o.isValidValue},p.prototype.registerValidation=function(t){s(t)&&(t=c.extend(c.clone(h),t),this.validations.push(t))},p.prototype.isValid=function(){return this.isValidValue},p.prototype.getValidations=function(t){return c.where(this.validations,{attribute:t})},p.prototype.validationErrors=function(){var t={};return c.each(this.errors,function(e){c.isArray(t[e.attribute])===!1&&(t[e.attribute]=[]),t[e.attribute].push(e.message)}),t},p.prototype.getErrors=function(){return this.errors},p}),define("sc-validatr/javascript/validatr/validatr.backbone",["require","backbone","lodash","./validatr"],function(t){var e=(t("backbone"),t("lodash")),i=t("./validatr");return BackboneMixin={validate:function(t){return this._validatrConstruct(),e.isString(t)?t=this.pick(Array.prototype.slice.call(arguments,0)):e.isArray(t)?t=this.pick(t):"object"!=typeof t&&(t=this.attributes),this.validator.validate(t)?void 0:this.validator.validationErrors()},isValid:function(){return e.isEmpty(this.validate.apply(this,arguments)||[])},setValidations:function(t){return this.validations=t,this._validatrDestruct()._validatrInit(),this},_validatrConstruct:function(){this._validatrInit(),this._validatrConstruct=function(){}},_validatrInit:function(){this.validator=new i,this.listenTo(this.validator,"all",function(){var t=Array.prototype.slice.call(arguments,0);this.trigger.apply(this,t)}),this.listenTo(this.validator,"validate:invalid",function(){this.trigger("invalid",arguments)});var t=e.result(this,"validations");return e.isArray(t)&&e.each(t,e.bind(function(t){"string"==typeof t.validate&&"function"==typeof this[t.validate]&&(t.validate=e.bind(this[t.validate],this)),this.validator.registerValidation(t)},this)),this},_validatrDestruct:function(){return this.validator&&this.stopListening(this.validator),this.validator=null,this}},BackboneMixin}),define("sc-icr-lightbox/javascript/models/icrLightBoxModel",["require","backbone","lodash","sc-validatr/javascript/validatr/validatr.backbone","eventmanager"],function(t){var e=t("backbone"),i=t("lodash"),n=t("sc-validatr/javascript/validatr/validatr.backbone"),r=t("eventmanager"),o=e.Model.extend({validations:[{attribute:"email",validate:"isEmail",message:"Please enter a valid e-mail address."},{attribute:"first",validate:/[^\s]{2,}/i,message:"Please enter your first name."},{attribute:"last",validate:/[^\s]{2,}/i,message:"Please enter your last name."}],urlRoot:function(){return"/cart"},getIcrProductPrice:function(t){var i={url:this.url()+"/lineItem/"+t,type:"GET",contentType:"application/json",dataType:"json",cache:!1};return e.$.ajax(i).done(function(t){return r.trigger("icrLightBox:gotProductPrice",t),t}).fail(function(t){r.trigger("icrLightBox:failedToGetProductPrice",t)}).always(function(){})},removeItem:function(t){var n={url:this.url()+"/item/"+t,type:"DELETE",contentType:"application/json",dataType:"json",cache:!1};return e.$.ajax(n).done(function(t){return r.trigger("icrLightBox:removedProduct",t),t}).fail(function(t){r.trigger("icrLightBox:failedToRemoveProduct",t)}).always(function(){var t=$.bbycookie||$.cookie,e=Number(t("CartItemCount"));e!==this.itemCount&&i.isNumber(e)&&!i.isNaN(e)&&(this.itemCount=e,r.trigger("addToCart:done:success",{quantity:e,isRemove:!0}))})}}).extend(n);return o}),define("dust-loader!sc-icr-lightbox/dust/icr-lightbox-main",function(){return function(t){var e=function(t){function e(t,e){return t.w('<div class="icr-wrapper"><h2>Requesting a price?</h2><div class="icr-primary-copy">Please provide this information to see the details and continue with checkout. This does not mean you have to buy the item. You can remove it any time.</div><div class="user-information-block"><div class="form-detail"><label for="first">First Name</label><input class="form-control" type="text" id="first" name="first" /></div><div class="form-detail"><label for="last">Last Name</label><input class="form-control" type="text" id="last" name="last" /></div><div class="form-detail"><label for="email">E-mail Address</label><input class="form-control" type="text" id="email" name="email" /><span class="email-disclaimer">This will not opt you in to any Best Buy e-mails.</span></div><button class="emphasized-copy icr-btn continue">Continue</button></div><div class="icr-information-block"><div class="emphasized-copy">Why don’t we show the price?</div><div>We wish we could. We set our prices independently, and because our price on this item is lower than the manufacturer allows us to show you, we need you to provide some information first. Thanks for your patience.</div></div></div>')}return t.register("sc-icr-lightbox/dust/icr-lightbox-main",e),e.__dustBody=!0,e}(t),i=function(i,n){if(!n)throw new Error("wrong number of args for render");return t.render(e,i,n)};return i.template=e,i}}),define("dust-loader!sc-icr-lightbox/dust/icr-lightbox-price-display",function(){return function(t){var e=function(t){function e(t,e){return t.s(e.get(["item"],!1),e,{block:i},{})}function i(t,e){return t.w('<div class="icr-wrapper"><h1>Our price</h1><div class="product-image"><img src="').f(e.getPath(!0,["imageUrl"]),e,"h").w('" /></div><div class="product-attributes">').x(e.get(["shortLabel"],!1),e,{block:n},{}).w('<div class="item-details"><div class="detail">').x(e.get(["modelNumber"],!1),e,{"else":r,block:o},{}).w("</div></div>").x(e.get(["customerReviewAverage"],!1),e,{block:s},{}).w('</div><div class="price-block"><h1>').f(e.getPath(!1,["price","eachPrice"]),e,"h").w("</h1>").s(e.getPath(!1,["price","singleRegularPriceNoAdj"]),e,{block:a},{}).s(e.getPath(!1,["price","singleSavingsAmountNoAdj"]),e,{block:c},{}).w('<div><a href="javascript:void(0)" class="emphasized-copy icr-btn btn-lg back-to-checkout">Continue with Checkout</a></div><a href="javascript:void(0)" class="no-thanks">Remove this item</a></div></div>')}function n(t,e){return t.w("<div>").f(e.getPath(!0,["shortLabel"]),e,"h").w("</div>")}function r(t,e){return t.w('<span class="emphasized-copy">SKU:</span> ').f(e.getPath(!0,["skuId"]),e,"h")}function o(t,e){return t.w('<span class="emphasized-copy">Model:</span> ').f(e.getPath(!1,["modelNumber","text"]),e,"h")}function s(t,e){return t.w('<div class="bbystars-small-yellow"><div class="fill" style="width: ').h("math",e,{},{key:e.get(["customerReviewAverage"],!1),method:"multiply",operand:"20"},"h").w('%"></div></div><div class="item-details product-rating"><span class="emphasized-copy"> ').f(e.get(["customerReviewAverage"],!1),e,"h").w(" of 5</span> (").f(e.get(["customerReviewCount"],!1),e,"h").w(" reviews)</div>")}function a(t,e){return t.w('<div class="secondary-price function-color-darker reg-price">Reg').x(e.get(["hasMobilePackage"],!1),e,{block:l},{}).w(": ").f(e.getPath(!0,[]),e,"h").w("</div>")}function l(t,e){return t.w(". Activated Price")}function c(t,e){return t.w('<div class="alert-color emphasized-copy you-save">You Save: ').f(e.getPath(!0,[]),e,"h").w("</div>")}return t.register("sc-icr-lightbox/dust/icr-lightbox-price-display",e),e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,r.__dustBody=!0,o.__dustBody=!0,s.__dustBody=!0,a.__dustBody=!0,l.__dustBody=!0,c.__dustBody=!0,e}(t),i=function(i,n){if(!n)throw new Error("wrong number of args for render");return t.render(e,i,n)};return i.template=e,i}}),define("dust-loader!sc-icr-lightbox/dust/icr-lightbox-error",function(){return function(t){var e=function(t){function e(t,e){return t.w('<div>An error has occurred, click continue to proceed to cart. <a href="/cart">Back to checkout</a></div>')}return t.register("sc-icr-lightbox/dust/icr-lightbox-error",e),e.__dustBody=!0,e}(t),i=function(i,n){if(!n)throw new Error("wrong number of args for render");return t.render(e,i,n)};return i.template=e,i}}),define("sc-icr-lightbox/javascript/views/icrLightBoxView",["require","dust","eventmanager","jquery","lodash","backbone","bluebird","cookieManager","sc-validatr/javascript/formDecorator/formDecorator","sc-validatr/javascript/validatr/validatr","../models/icrLightBoxModel","dust-loader!sc-icr-lightbox/dust/icr-lightbox-main","dust-loader!sc-icr-lightbox/dust/icr-lightbox-price-display","dust-loader!sc-icr-lightbox/dust/icr-lightbox-error"],function(t){var e=t("dust"),i=t("eventmanager"),n=t("jquery"),r=t("lodash"),o=t("backbone"),s=(t("bluebird"),t("cookieManager")),a=t("sc-validatr/javascript/formDecorator/formDecorator"),l=t("sc-validatr/javascript/validatr/validatr"),c=t("../models/icrLightBoxModel"),d=t("dust-loader!sc-icr-lightbox/dust/icr-lightbox-main")(e),u=t("dust-loader!sc-icr-lightbox/dust/icr-lightbox-price-display")(e),h=t("dust-loader!sc-icr-lightbox/dust/icr-lightbox-error")(e),p=o.View.extend({className:"icr-lightbox",events:{"click .continue":"submitForm","click .no-thanks":"noThanks","click .back-to-checkout":"redirectToCheckout"},initialize:function(t){var e=this;this.productCid=t.productCid,this.inCart=t.inCart,this.skuId=t.skuId,this.model=new c,this.viewModel=new o.Model({currentPage:""}),this.render();var r=new l(this.model.validations);this.formDecorator=new a({elements:e.$("input"),onBlur:!0,validator:r,decorator:function(t,e){var i=n('<span class="errors">'+e.toString()+"</span>");return t.$element.addClass("invalid-field"),t.$element.after(i),n.colorbox.resize(),function(){i.remove(),t.$element.removeClass("invalid-field")}}}),this.listenTo(this.formDecorator,"render",function(){this.validateUserInformation()}),this.listenTo(i,"icrLightBox:closeButtonClicked",this.onClickClose)},render:function(){this._hasSetIcrUserSubmissionCookie()||s.get("ut")?(this._setIcrUserSubmissionCookie(),this.renderIcrPrice()):this.renderUserInformationTemplate()},renderUserInformationTemplate:function(){i.trigger("icr:info:open"),this.viewModel.set("currentPage","info"),d({inCart:this.inCart},r.bind(function(t,e){this.$el.html(e)},this))},renderIcrPrice:function(){var t=this;i.trigger("icr:price:open"),this.viewModel.set("currentPage","price"),t.productCid?t.model.getIcrProductPrice(t.productCid).then(function(e){u(e,function(e,i){n("#cboxClose").hide(),t.$el.html(i)})},function(e){t.redirectToCheckout()}).then(function(){n.colorbox.resize()}):t.redirectToCheckout()},renderErrorTemplate:function(t){h("",r.bind(function(t,e){this.$el.html(e)},this))},submitForm:function(){i.trigger("icr:info:continue"),this.validateUserInformation(),this.model.isValid()?(this._setIcrUserSubmissionCookie(),this.renderIcrPrice()):this.formDecorator.render(this.model.validationError)},validateUserInformation:function(){var t=this.$("#email").val(),e=this.$("#first").val(),i=this.$("#last").val();this.model.set({email:t,first:e,last:i}),this.model.validate()},onClickClose:function(){var t=this.viewModel.get("currentPage");this.productCid&&("info"===t&&(i.trigger("icr:info:close"),i.trigger("icr:remove",{state:"info",skuId:this.skuId})),"price"===t&&(i.trigger("icr:price:close"),i.trigger("icr:remove",{state:"price",skuId:this.skuId})),this.model.removeItem(this.productCid)),this.remove()},noThanks:function(){n.colorbox.close()},redirectToCheckout:function(){i.trigger("icr:price:continue"),location.href="/site/olspage.jsp?id=pcat17005&type=page"},_hasSetIcrUserSubmissionCookie:function(){return!!s.get("ICRFC")},_setIcrUserSubmissionCookie:function(){document.cookie="ICRFC=true; domain=.bestbuy.com; path=/;"}});return p}),define("sc-icr-lightbox/javascript/icrLightBox",["require","eventmanager","jquery","lodash","bluebird","./views/icrLightBoxView"],function(t){var e=t("eventmanager"),i=t("jquery"),n=t("lodash"),r=t("bluebird"),o=t("./views/icrLightBoxView"),s=function(t){this.productCid=t.cid,this.inCart=t.inCart,this.skuId=t.skuId;var s=function(t,r){var o={href:r.el,inline:!0,opacity:.5,width:"600px",onComplete:function(){i.colorbox.resize(),e.trigger("icrLightBox:open",r)},onCleanup:function(){e.trigger("icrLightBox:close",r)},onClosed:function(){e.trigger("icrLightBox:closeButtonClicked",r)}},s={};t.closeable===!1&&(s.overlayClose=!1,s.escKey=!1),s.className="icr-lightbox-wrapper",i.colorbox(n.extend(o,s,t.colorbox||{})),t.closeable===!1&&i("#cboxClose").hide(),e.trigger("icrLightBox:open",r)};if(i.bbycookie("ICRFC")&&!this.productCid)return e.trigger("icrLightBox:notFiringLightbox"),r.resolve("notFiringLightbox");var a=new o({productCid:this.productCid,item:t.item,inCart:t.inCart,skuId:this.skuId});return s({},a)};return s}),define("pdp/javascript/models/AppModel",["require","backbone"],function(t){var e,i=t("backbone"),n=i.Model.extend({initialize:function(){},defaults:{}});return n.getInstance=function(){return e?e:e=new n},n}),"undefined"==typeof ModalManager)ModalManager=function(){var t=this;this.vars={modalProfiles:{defaultProfile:{width:"640",height:"465",iframe:!0,transition:"fade"}},currentProfile:!1,currentProfileName:!1},$("#cboxClose").live("click",function(){t.closeUI()})};else try{console.log("ModalManager already defined typeof="+typeof ModalMananger)}catch(e){}ModalManager.prototype.activateModalLinks=function(t,e,i){jQuery(t).each(function(){modalManager.activateModalLink.call(this,e,i)})},ModalManager.prototype.activateModalLink=function(inDefaultProfileName,inForce){var $this=$(this);(inForce===!0||"string"==typeof jQuery(this).attr("data-modal"))&&$this.click(function(){var $this=jQuery(this),config=$this.attr("data-config")?$this.attr("data-config"):!1,href=$this.attr("href")?$this.attr("href"):!1,profileName=$this.attr("data-modal");config=config?eval("config = "+config+";"):{},"string"==typeof href&&(config.href=href),"string"==typeof profileName?modalManager.show(profileName,config):"string"==typeof defaultProfileName&&inDefaultProfileName.length>0?modalManager.show(inDefaultProfileName,config):modalManager.show(config)})},ModalManager.prototype.bind=function(t){this.activateModalLinks(t,inDefaultProfileName,!0)},ModalManager.prototype.bindClose=function(t){var e=this;t=void 0==t?".mm-close":t,$(t).click(function(){e.close()})},ModalManager.prototype.close=function(){return"undefined"!=typeof jQuery.colorbox?(jQuery.colorbox.close(),$("#cboxClose").removeClass("hideControls"),!0):"undefined"!=typeof parent.modalManager?parent.modalManager.close():!1},ModalManager.prototype.closeUI=function(){return this.vars.currentProfile.hasOwnProperty("closable")&&0==this.vars.currentProfile.closable?!1:this.close()},ModalManager.prototype.getProfile=function(t,e){return t=void 0===t?"":t,0==t.length&&void 0!==e&&(t=e),this.vars.modalProfiles.hasOwnProperty(t)?this.vars.modalProfiles[t].hasOwnProperty("extendDefault")?jQuery.extend({},this.vars.modalProfiles.defaultProfile,this.vars.modalProfiles[t]):jQuery.extend({},this.vars.modalProfiles[t]):jQuery.extend({},this.vars.modalProfiles.defaultProfile)},ModalManager.prototype.registerProfile=function(t,e){if(this.vars.modalProfiles.hasOwnProperty(t)){try{console.log("ModalManager.registerProfile: ModalManager already has profile "+t)}catch(i){}return!1}return this.vars.modalProfiles[t]=e,!0},ModalManager.prototype.setTitle=function(t){if(window!=parent){if("undefined"!=typeof parent.modalManager)parent.modalManager.setTitle(t);else try{console.log("modalManager: error - parent has no modalManager")}catch(e){}return!1}return $("#cboxTitle").html(t),!0},ModalManager.prototype.show=function(t,e){var i,n,r;switch(typeof t){case"string":i=jQuery.extend({},this.getProfile(t),e);break;case"object":i=jQuery.extend({},this.getProfile(),t);break;default:i=this.getProfile()}return void 0!==i.onOpen&&(n=i.onOpen),
void 0!==i.onClosed&&(r=i.onClosed),i.onOpen=function(){return"string"==typeof i.rootClass&&jQuery("#colorbox").addClass(i.rootClass),"boolean"!=typeof i.closable||i.closable||$("#cboxClose").addClass("hideControls"),modalManager.vars.currentProfile=i,modalManager.vars.currentProfileName=t,n&&n(),!1},i.onClosed=function(){return"string"==typeof i.rootClass&&jQuery("#colorbox").removeClass(i.rootClass),modalManager.vars.currentProfile=!1,modalManager.vars.currentProfileName=!1,r&&r(),!1},jQuery.colorbox(i),!0},ModalManager.prototype.getInnerHeight=function(t){return void 0===t&&(t=window),void 0==t.innerHeight?t.document.documentElement.clientHeight:t.innerHeight},ModalManager.prototype.resize=function(t){var e,i,n=0;if("object"==typeof t&&t.hasOwnProperty("context")){if(i=jQuery(t.context),!(i.length>0))return!1;switch(t.contextBox=t.hasOwnProperty("contextBox")?t.contextBox:"",("body"==t.context||"html"==t.context&&$.browser.msie)&&"block"==$($("body").children()[0]).css("display")&&(n=$($("body").children()[0]).css("margin-top").indexOf("px")>0?parseInt($($("body").children()[0]).css("margin-top")):0),t.contextBox){case"inner":t.width=i.innerWidth(),t.height=i.innerHeight();break;case"outer":t.width=i.outerWidth(!0),t.height=i.outerHeight(!0);break;case"scroll":t.width=i.attr("scrollHeight"),t.height=i.attr("scrollWidth");default:t.width=i.width(),t.height=i.height()}t.height+=n,"number"==typeof t.additionalIeMargin&&(t.height+=t.additionalIeMargin),t.box="inner",delete t.context}if(window!=parent){if("undefined"!=typeof parent.modalManager)"undefined"==typeof t?parent.modalManager.resize():parent.modalManager.resize(t);else try{console.log("parent has no modalManager")}catch(r){}return!1}switch(e={},typeof t){case"object":jQuery.extend(e,t),delete e.box,t.hasOwnProperty("box")||(t.box="outer");break;case"string":if("profile"==t){t.width="auto",t.height="auto",t.box="outer";try{console.log("error resizing to profile is not supported")}catch(r){}return!1}case"undefined":default:t={},t.width="auto",t.height="auto",t.box="inner"}t.hasOwnProperty("width")&&("auto"==t.width?e.innerWidth=jQuery("#cboxLoadedContent iframe").contents().width():"inner"==t.box?e.innerWidth=t.width:e.width=t.width),t.hasOwnProperty("height")&&("auto"==t.height?e.innerHeight=jQuery("#cboxLoadedContent iframe").contents().height():"inner"==t.box?e.innerHeight=t.height:e.height=t.height);try{jQuery.colorbox.resize(e)}catch(r){return window.console&&console.log("error calling colorbox resize: ",r),!1}return!0},"undefined"==typeof modalManager&&(modalManager=new ModalManager),define("modalmanager",function(){}),define("_cartButton/javascript/CartButtonController",["require","jquery","lodash","backbone","_cartButton/javascript/helpers/CartHelper","pdp/javascript/models/SkuModel","pdp/javascript/models/LinksModel","pdp/javascript/collections/SkuCollection","_cartButton/javascript/views/CartButtonView","_cartButton/javascript/helpers/EsiParser","sc-accessory-finder/javascript/sc-accessory-finder","sc-activated-transaction-types-lightbox/javascript/add-to-package","sc-icr-lightbox/javascript/icrLightBox","sc-add-to-cart/javascript/addToCart","pdp/javascript/models/AppModel","bluebird","modalmanager"],function(t){var e=t("jquery"),i=t("lodash"),n=t("backbone"),r=t("_cartButton/javascript/helpers/CartHelper"),o=t("pdp/javascript/models/SkuModel"),s=t("pdp/javascript/models/LinksModel"),a=t("pdp/javascript/collections/SkuCollection"),l=t("_cartButton/javascript/views/CartButtonView"),c=t("_cartButton/javascript/helpers/EsiParser"),d=t("sc-accessory-finder/javascript/sc-accessory-finder"),u=t("sc-activated-transaction-types-lightbox/javascript/add-to-package"),h=t("sc-icr-lightbox/javascript/icrLightBox"),p=t("sc-add-to-cart/javascript/addToCart"),f=t("pdp/javascript/models/AppModel"),g=t("bluebird");t("modalmanager");var m=n.View.extend({skuCollection:null,serviceUrl:null,cartHelper:null,initialize:function(){i.bindAll(this),this.skuCollection=new a,this.serviceUrl=s.getInstance().get("pdpFragmentService"),this.cartHelper=new r,this.primarySkuModel=o.getInstance()},parseESI:function(t,i){t instanceof jQuery||(t=e(t)),1===t.find("#cart-error").length?this.trigger("bby-cart:esi-error"):this._parseResponse(t,i),this.trigger("bby-cart:esi-parse-success")},refreshSkuStatus:function(t){var n={};if("undefined"!=typeof t.skuArray&&t.skuArray.length){for(var r=0;r<t.skuArray.length;r++){var s=this.skuCollection.findWhere({skuId:t.skuArray[r].toString()});"undefined"==typeof s&&(s=new o({skuId:t.skuArray[r].toString()}),this.skuCollection.add(s))}n={skuId:t.driverSku,accessoryIds:i.compact(t.skuArray).join(","),scripts:!1}}else n="undefined"!=typeof t.sellerId?{skuId:t.driverSku,sellerId:t.sellerId}:{skuId:t.driverSku};e.get(this.serviceUrl,n,i.bind(this.parseESI,this))},createCartButtonView:function(t){var e;t.model?(e=t.model,e.set({skuId:String(e.get("skuId"))}),this.skuCollection.add(e,{merge:!0})):(e=this.skuCollection.findWhere({skuId:String(t.skuId)}),"undefined"==typeof e&&(e=new o({skuId:String(t.skuId)}),t.buttonState&&(e.set({buttonState:t.buttonState}),"CHECK_STORES"===t.buttonState&&e.set({checkStoresLink:t.el.find("a").attr("href")})),this.skuCollection.add(e))),e.set({primary:t.primary});var n=i.extend(t,{model:e}),r=new l(n);return this.listenTo(r,"bby-cart:add-to-cart",i.bind(this.onAddToCart,this)),r},remove:function(){this.cartHelper.remove(),this.skuCollection.reset(),n.View.prototype.remove.apply(this,arguments)},onAddToCart:function(t){var e=String(t.get("skuId")),n=String(t.get("productId")),r=t.get("productType"),o=t.get("buttonState"),s=t.get("iframeUrl"),a=t.get("scPackageBuilder");if("ADD_TO_PACKAGE"===o)EventManager.trigger("addToPackage"),a?u({skuId:e,productId:n}).caught(function(){}):"mobilePlan"===r?this.openLightboxPlan(n,e):this.openLightboxDevice(n,e,s);else if("CHECK_STORES"===o)window.location.href=t.get("checkStoresLink");else{this.trigger("bby-cart:add-to-cart");var l={skuId:e,productId:n},c=["listingId","sellerId","pricingType","condition","displayCondition","productCondition","price","addToCartClickLocation"];i.each(c,function(e){var n=t.get(e);i.isUndefined(n)||""===n||(l[e]=String(n))});var d=i.defaults({},window.track);"pdp"===d.catId&&(l.price=d.currentPrice,l.pricingType=d.pricingType);var h=this._getHashQueryParameters(this._getWindowHash());h&&(l.giftList=h),g.resolve(p(l)).bind(this).then(this.addGSPIfAvailable,this.onAddProductToCartError).then(this.redirectToCart,this.onAddGSPToCartError).caught(function(t){console.log(t)})}},openLightboxDevice:function(t,n,r){var o;modalManager.registerProfile("mobileDeviceAdded",{width:"570px",height:"480px",title:"Build Your Mobile Package",escKey:!1,overlayClose:!1,closable:!1,rootClass:"mobileNoClose",extendDefault:!0,transition:"fade"}),o=r?r:"/site/olspage.jsp?id=pcat17408&amp;type=page&amp;productId="+t+"&amp;skuID="+n+"&amp;fromPage=deviceListing&amp;documentType=mobile&amp;packageAction=addDeviceToPackage";var s=e.bbycookie("actml");s&&i.isString(s)&&(s=s.replace(/"/g,"").replace(/\s/g,"+"),o=o+"&keepThis=true&contractDesc="+s+"&isCntrctSelect=false");var a=e("<div class=\"widgetModal\" data-config=\"{'href':'"+o+"','iframe':true}\" data-modal=\"mobileDeviceAdded\"></div>");modalManager.activateModalLinks(a),a.trigger("click")},openLightboxPlan:function(t,n){modalManager.registerProfile("mobilePlanAdded",{width:"570px",height:"480px",title:"Build Your Mobile Package",escKey:!1,overlayClose:!1,closable:!1,rootClass:"mobileNoClose",extendDefault:!0,transition:"fade"});var r="/site/olspage.jsp?id=pcat17408&amp;type=page&amp;productId="+t+"&amp;skuID="+n+"&amp;fromPage=planListing&amp;documentType=plan&amp;packageAction=addPlanToPackage",o=e.bbycookie("actml");o&&i.isString(o)&&(o=o.replace(/"/g,"").replace(/\s/g,"+"),r=r+"&keepThis=true&contractDesc="+o+"&isCntrctSelect=false");var s=e("<div class=\"widgetModal\" data-config=\"{'href':'"+r+"','iframe':true}\" data-modal=\"mobilePlanAdded\"></div>");modalManager.activateModalLinks(s),s.trigger("click")},addGSPIfAvailable:function(t){var i=this;return new g(function(n,r){var s=i.skuCollection.findWhere({skuId:String(t.product.skuId)});if(f.getInstance().get("gsp-plan-selected")&&s.get("primary")){var a=o.getInstance().get("skuProtectionPlanId");e.ajax({type:"POST",url:"/cart/item/"+t.commerceItemId+"/warranty",dataType:"json",contentType:"application/json",data:JSON.stringify({skuId:a}),cache:!1,success:n,error:function(){r(t)}})}else r(t)})},redirectToCart:function(){location.href="/site/olspage.jsp?id=pcat17005&type=page"},onAddProductToCartError:function(t){return this.trigger("bby-cart:add-to-cart-error",t),EventManager.trigger("bby-cart:add-to-cart-error",t),g.reject({addBaseSkuFail:!0})},onAddGSPToCartError:function(t){return t.addBaseSkuFail?g.reject():void this.addProductSuccessGSPFail(t)},addProductSuccessGSPFail:function(t){this.trigger("bby-cart:add-to-cart-success",t),EventManager.trigger("bby-cart:add-to-cart-success",t);var n=this.skuCollection.findWhere({skuId:String(t.product.skuId)});if(n&&!n.get("primary"))return n.set({purchased:!0}),void this.trigger("bby-cart:accessory-added-to-cart",t);var r=!1,o=e("#postcard .price-block").data("pricingType");(i.isString(o)&&o.match(/icr/i)||t.isICR)&&(r=!0);var s=e(".cart-button").data("currentPrice");return r&&!i.isNumber(s)?(h({cid:t.commerceItemId,skuId:t.product.skuId}),void this.trigger("bby-cart:icr-lightbox-open")):t.isHaccs?void d({skus:t.product.skuId,cid:t.commerceItemId,onError:"redirectToCart"}):void this.redirectToCart()},_getWindowHash:function(){return window.location.hash},_getHashQueryParameters:function(t){if(!t)return!1;var e=t.substr(t.indexOf("?")+1);if(!e||e.indexOf("giftlistId=")<0)return!1;var n={};return i.each(e.split("&"),function(t){n[t.split("=")[0]]=decodeURIComponent(t.split("=")[1])}),n},_parseResponse:function(t,e){c.parseHtmlAndUpdateSkus(this.skuCollection,t,e)},onItemSeePriceInCartClick:function(t){this.cartHelper.onItemSeePriceInCartClick({skuId:e(t).data("sku-id"),productId:e(t).data("product-id")})}});return m}),define("dust-loader!list-page/components/list-items/dust/cart-service-down-dialog",function(){return function(t){var e=function(t){function e(t,e){return t.w('<div class="modal service-down-dialog cart-service-down-dialog" tabindex="-1" role="dialog" aria-labelledby="Service Down message"><div class="modal-dialog" role="document"><div class="modal-content no-title"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body"><p>We’re sorry. Something went wrong and our cart is currently unavailable. We’re working to restore it as soon as possible.</p><p>Save this item for later by <a href="').f(e.get(["sslDomain"],!1),e,"h").w("/profile/list/addItem?sku=").f(e.get(["skuId"],!1),e,"h").w('#!/view/">adding it to a wish list.</a></p></div></div></div></div>')}return t.register("list-page/components/list-items/dust/cart-service-down-dialog",e),e.__dustBody=!0,e}(t),i=function(i,n){if(!n)throw new Error("wrong number of args for render");return t.render(e,i,n)};return i.template=e,i}}),define("list-page/components/list-items/javascript/connected-devices-view",["require","exports","module","lodash","backbone","sc-activated-transaction-types-lightbox/javascript/add-to-package","modalmanager"],function(t,e,i){var n=t("lodash"),r=t("backbone"),o=t("sc-activated-transaction-types-lightbox/javascript/add-to-package");t("modalmanager");var s=r.View.extend({profiles:{mobileDeviceAdded:{width:"570px",height:"480px",title:"Build Your Mobile Package",escKey:!1,overlayClose:!1,closable:!1,rootClass:"mobileNoClose",extendDefault:!0,transition:"fade"}},events:{"click .widgetModal a":"_addToPackageClick"},initialize:function(){this.model=new r.Model(this.$(".widgetModal").data()),n.each(this.profiles,function(t,e){modalManager.registerProfile(e,t)})},render:function(){var t=$(".widgetModal"),e=$.bbycookie("actml")||null,i="&isCntrctSelect=false";return e&&t.each(function(){var t=$(this),r=t.data("config");r&&(n.isString(e)&&(e=e.replace(/"/g,"").replace(/\s/g,"+")),r=r.replace(/packageAction=[^&'"]+/,"$&&keepThis=true&contractDesc="+e+i),t.attr("data-config",r))}),this.model.get("scPackageBuilder")!==!0&&modalManager.activateModalLinks(this.$(".widgetModal")),this},_addToPackageClick:function(t){if(this.model.get("scPackageBuilder")===!0){var e={skuId:String(this.model.get("skuId"))};o(e)}}});i.exports=s}),define("list-page/components/included-free/javascript/included-free-model",["require","exports","module","backbone"],function(t,e,i){var n=t("backbone"),r=n.Model.extend({});i.exports=r}),define("dust-loader!list-page/components/included-free/dust/included-free-popover",function(){return function(t){var e=function(t){function e(t,e){return t.w('<button type="button" class="close" tabindex="-1" aria-hidden="true"><span>×</span></button><div class="included-free-popover"><h5>Included Free</h5><ul class="included-free-list">').s(e.get(["bonusContent"],!1),e,{block:i},{}).w("</ul></div>")}function i(t,e){return t.w("<li>").f(e.get(["displayName"],!1),e,"h").w("</li>")}return t.register("list-page/components/included-free/dust/included-free-popover",e),e.__dustBody=!0,i.__dustBody=!0,e}(t),i=function(i,n){if(!n)throw new Error("wrong number of args for render");return t.render(e,i,n)};return i.template=e,i}}),define("dust-loader!list-page/components/included-free/dust/included-free-dialog",function(){return function(t){var e=function(t){function e(t,e){return t.w('<div class="modal included-free-dialog" tabindex="-1" role="dialog" aria-labelledby="modal-title"><div class="modal-dialog included-free-modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true" aria-label="Cancel">&times;</span></button><h4 id="modal-title" class="modal-title">Included Free</h4></div><div class="modal-body container-fluid"><ul class="included-free-list">').s(e.get(["bonusContent"],!1),e,{block:i},{}).w('</ul><button class="btn btn-default btn-block close-dialog">Close</button></div></div></div></div>')}function i(t,e){return t.w("<li>").f(e.get(["displayName"],!1),e,"h").w("</li>")}return t.register("list-page/components/included-free/dust/included-free-dialog",e),e.__dustBody=!0,i.__dustBody=!0,e}(t),i=function(i,n){if(!n)throw new Error("wrong number of args for render");return t.render(e,i,n)};return i.template=e,i}}),define("list-page/components/included-free/javascript/included-free-view",["require","exports","module","lodash","backbone","dust","list-page/components/included-free/javascript/included-free-model","dust-loader!list-page/components/included-free/dust/included-free-popover","dust-loader!list-page/components/included-free/dust/included-free-dialog"],function(t,e,i){var n=t("lodash"),r=t("backbone"),o=t("dust"),s=t("list-page/components/included-free/javascript/included-free-model"),a=t("dust-loader!list-page/components/included-free/dust/included-free-popover")(o),l=t("dust-loader!list-page/components/included-free/dust/included-free-dialog")(o),c=r.View.extend({events:{"click .included-free-anchor":"_anchorClick","click .close-dialog":"_closeDialog"},initialize:function(t){this.options=t||{},this.model=new s({bonusContent:this.$(".included-free").data("freeItems")}),"s"!==this.options.appData.deviceClass?(a(this.model.toJSON(),n.bind(this._renderPopoverTemplate,this)),this.$().popover.Constructor.prototype.bodyClick=function(){},this.$(".included-free-anchor").popover({content:this.renderedPopoverContent,html:!0,placement:"auto",trigger:"focus"})):l(this.model.toJSON(),n.bind(this._appendDialog,this))},_renderPopoverTemplate:function(t,e){t||(this.renderedPopoverContent=e)},_anchorClick:function(t){t.preventDefault(),"s"===this.options.appData.deviceClass&&this.$(".included-free-dialog").modal("show")},_appendDialog:function(t,e){t||this.$(".included-free").append(e)},_closeDialog:function(){this.$(".included-free-dialog").modal("hide")}});i.exports=c}),define("list-page/components/list-items/javascript/price-block-model",["require","exports","module","backbone"],function(t,e,i){var n=t("backbone"),r=n.Model.extend({});i.exports=r}),define("sc-location/javascript/util",["require","bluebird","lodash"],function(t){function e(t){return r.resolve($.ajax(t))["catch"](function(t){var e=new Error(t.responseText);throw e.statusCode=t.status,e})}function i(t,e,i){return i||(i=function(t){return t}),o.reduce(e,function(t,e,n){return t.replace("{"+n+"}",i(e))},t)}function n(t,e){return i(t,e,function(t){return encodeURIComponent(t)})}var r=t("bluebird"),o=t("lodash");return{ajax:e,substitute:i,substituteUrl:n}}),define("sc-location/javascript/location-api",["require","lodash","jquery","bluebird","sc-location/javascript/util"],function(t){function e(t){this.options=i.defaults({},t,{baseUrl:""})}var i=t("lodash"),n=t("jquery"),r=(t("bluebird"),t("sc-location/javascript/util"));return e.prototype._buildUrl=function(t,e,o){var s=this.options.baseUrl+(i.isEmpty(e)?t:r.substituteUrl(t,e));return i.isEmpty(o)||(s+="?"+n.param(o)),s},e.prototype.getLocationsByZipCode=function(t,e){var n="/location/v1/{countryCode}/zipcode/{zipCodeList}",o=i.extend({countryCode:"US",panCodes:[]},e),s=[].concat(t);return r.ajax(this._buildUrl(n,{countryCode:o.countryCode,zipCodeList:s.join(",")},{pancodes:o.panCodes.join(",")})).then(function(t){return t&&t.locationData||[]})},e.prototype.getLocationsByCityState=function(t,e){var n="/location/v1/{countryCode}/citystate/{state}/{city}",o=i.extend({countryCode:"US",panCodes:[]},e),s=t;return"string"==typeof t&&(s={state:t,city:""}),r.ajax(this._buildUrl(n,{countryCode:o.countryCode,state:s.state,city:s.city},{pancodes:o.panCodes.join(",")})).then(function(t){return t&&t.locationData||[]})},e.prototype.getLocationsByGeoCoordinate=function(t,e,n){var o="/location/v1/{countryCode}/geocoordinate/{latLong}",s=i.extend({countryCode:"US",panCodes:[]},n),a=i.pick(s,"miles","limit");return a.pancodes=s.panCodes.join(","),r.ajax(this._buildUrl(o,{countryCode:s.countryCode,latLong:t+","+e},a)).then(function(t){return t&&t.locationData||[]})},e.prototype.getZipCodeUrls=function(t){var e="/location/v1/{countryCode}/zipcode",n=i.extend({countryCode:"US"},t);return r.ajax(this._buildUrl(e,{countryCode:n.countryCode}))},e.prototype.getStoresByGeoCoordinate=function(t,e,n){var o="/location/v1/{countryCode}/store/geocoordinate/{latLong}",s=i.extend({countryCode:"US",panCodes:[]},n),a=i.pick(s,"miles","limit");return a.pancodes=s.panCodes.join(","),r.ajax(this._buildUrl(o,{countryCode:s.countryCode,latLong:t+","+e},a)).then(function(t){return t&&t.storeData||[]})},e.prototype.getStoresByZipCode=function(t,e){var n="/location/v1/{countryCode}/store/zipcode/{zipCode}",o=i.extend({countryCode:"US",panCodes:[]},e),s=i.pick(o,"miles","limit");return s.pancodes=o.panCodes.join(","),r.ajax(this._buildUrl(n,{countryCode:o.countryCode,zipCode:t},s)).then(function(t){return t&&t.storeData||[]})},e.prototype.getGeoLocation=function(t){var e="/location/v1/US/approximate";return r.ajax(this._buildUrl(e))},e.prototype.configure=function(t){return new e(t)},new e}),define("sc-location/javascript/geolocation",["require","bluebird","lodash"],function(t){function e(t){this.options=r.defaults({},t,{window:window})}function i(t){this.message=t}var n=t("bluebird"),r=t("lodash");return i.prototype=Object.create(Error.prototype),e.prototype.NotSupportedError=i,e.prototype.browserSupportsGeolocation=function(){return!!(this.options.window&&this.options.window.navigator&&"geolocation"in this.options.window.navigator)},e.prototype.getGeolocationFromBrowserAsync=function(t){var e=r.extend({enableHighAccuracy:!1,timeout:1/0,maximumAge:0},t);if(!this.browserSupportsGeolocation())return n.reject(new i("Browser does not support geolocation."));var o=this.options.window.navigator.geolocation,s=new n(function(t,i){o.getCurrentPosition(t,i,r.pick(e,"enableHighAccuracy","timeout","maximumAge"))});return s},e.prototype.configure=function(t){return new e(t)},new e}),define("sc-location/javascript/location-model",["require","lodash"],function(t){function e(t){this.zipCode=null,this.storeId=null,i.assign(this,i.pick(t,n))}var i=t("lodash"),n=["zipCode","storeId"];return e.deserialize=function(t){if(!t)return null;try{var r=JSON.parse(t);return new e(i.pick(r,n))}catch(o){return console.error(o),null}},e.prototype.serialize=function(){return JSON.stringify(i.chain(this).pick(n).omit(i.isNull).value())},e}),define("sc-location/javascript/user-location-manager",["require","lodash","bluebird","moment","sc-persistence-manager/javascript/persistence-manager","sc-location/javascript/location-api","sc-location/javascript/geolocation","sc-location/javascript/location-model"],function(t){function e(t){this.options=n.defaults({},n.omit(t,"persistenceManager","locationApi","geolocation"),t),this.persistenceManager=t&&t.persistenceManager||s.config({order:["cookies"]}),this.locationApi=t&&t.locationApi||a,this.geolocation=t&&t.geolocation||l,this.enableLegacyCookies=!0}function i(t){var e=n.map(t,function(t,e){return e+"="+t}).join(";");document.cookie=e}var n=t("lodash"),r=t("bluebird"),o=t("moment"),s=t("sc-persistence-manager/javascript/persistence-manager"),a=t("sc-location/javascript/location-api"),l=t("sc-location/javascript/geolocation"),c=t("sc-location/javascript/location-model"),d={GEOLOCATED:"G",AKAMAI:"A",CUSTOMERPROVIDED:"C"};return e.prototype.LocationType=d,e.prototype.getLocation=function(t){return this.getCustomerProvidedLocation().bind(this)["catch"](function(){return this.getBrowserProvidedLocation().bind(this).then(function(t){return this.set(t)})})["catch"](function(){return this.getAkamaiProvidedLocation().bind(this).then(function(t){return this.set(t)})})},e.prototype.getCustomerProvidedLocation=function(t){return this._loadLocation().then(function(t){if(null==t||null==t.zipCode)throw new Error("No location available.");return t})},e.prototype.getAkamaiProvidedLocation=function(){return this.locationApi.getGeoLocation().bind(this).then(function(t){return new c({zipCode:t})}).then(this._buildUpLocation)},e.prototype.getBrowserProvidedLocation=function(t){return this.geolocation.getGeolocationFromBrowserAsync(t).bind(this).then(function(t){return[t,this.locationApi.getLocationsByGeoCoordinate(t.coords.latitude,t.coords.longitude)]}).spread(function(t,e){var i=new c;if(i.zipCode=e[0].zipCode,e.length>0)return i.latitude=t.coords.latitude,i.longitude=t.coords.longitude,i;throw new Error("Location not available")}).then(this._buildUpLocation)},e.prototype.setLocation=function(t){return this.set({zipCode:t})},e.prototype.setStoreId=function(t){return this.set({storeId:t})},e.prototype.set=function(t){return this.enableLegacyCookies&&(t.zipCode&&i({customerZipCode:t.zipCode+"|Y",expires:o().add(30,"minutes").toDate().toGMTString(),domain:".bestbuy.com",path:"/"}),t.storeId&&i({pst2:t.storeId,expires:o().add(90,"days").toDate().toGMTString(),domain:".bestbuy.com",path:"/"})),this._loadLocation().bind(this).then(function(e){return t.zipCode&&(e.zipCode=t.zipCode),t.storeId&&(e.storeId=""+t.storeId),e}).then(this._saveLocation)},e.prototype._buildUpLocation=function(t){var e;return e=n.has(t,"latitude")&&n.has(t,"longitude")?this.locationApi.getStoresByGeoCoordinate(t.latitude,t.longitude):this.locationApi.getStoresByZipCode(t.zipCode),e.then(function(e){var i=n.chain(e||[]).reject({subType:"Kiosk"}).first().value();return i&&(t.storeId=""+i.id),t})},e.prototype._saveLocation=function(t){var e=t.serialize();return this.persistenceManager.set("sc-location",e)["return"](t)},e.prototype._loadLocation=function(){return this.location?r.resolve(this.location):this.persistenceManager.get("sc-location",null).bind(this).then(c.deserialize).then(function(t){return t||(t=new c),this.location=t,this.location})},e.prototype.configure=function(t){return new e(t)},new e}),define("dust-loader!home-delivery-presourcing/dust/dialog",function(){return function(t){var e=function(t){function e(t,e){return t.w('<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4>Delivery</h4></div><div class="modal-body"><form class="zip-code-form" style="display: none;"><div class="form-group"><label>ZIP code</label><input type="text" class="zip-code-input form-control" placeholder="Enter ZIP code" value="').f(e.getPath(!1,["homeDeliveryPresourcing","zipCode"]),e,"h").w('" /><span class="zip-code-button"><button type="submit" class="btn btn-default btn-block">Go</button></span><div class="error-message"><i class="ficon ficon-alert-triangle"></i>Please enter a valid ZIP code.</div></div></form>').h("select",e,{block:i},{key:e.getPath(!1,["homeDeliveryPresourcing","modalButtonState","buttonStateID"])},"h").w("</div></div></div>")}function i(t,e){return t.h("eq",e,{block:n},{value:"CHECK_STORES"},"h").h("eq",e,{block:r},{value:"CONTINUE_SHOPPING"},"h").h("none",e,{block:o},{},"h")}function n(t,e){return t.w('<div class="button-section check-stores-button-section"><div class="delivery-text">Delivery is not available for <span class="zip-code">').f(e.getPath(!1,["homeDeliveryPresourcing","zipCode"]),e,"h").w('</span>&nbsp;<a href="#" class="edit-zip-code">Edit</a></div><div class="button-label">This item may be available for in-store pickup.</div><a href="#" role="button" class="check-stores-button btn btn-default btn-block">Check Stores</a></div>')}function r(t,e){return t.w('<div class="button-section continue-shopping-button-section"><div class="delivery-text">This item is not in stock near <span class="zip-code">').f(e.getPath(!1,["homeDeliveryPresourcing","zipCode"]),e,"h").w('</span>&nbsp;<a href="#" class="edit-zip-code">Edit</a></div><a href="#" role="button" class="continue-shopping-button btn btn-default btn-block">Continue Shopping</a></div>')}function o(t,e){return t.w('<div class="button-section add-to-cart-button-section"><div class="delivery-text">Delivery is available for <span class="zip-code">').f(e.getPath(!1,["homeDeliveryPresourcing","zipCode"]),e,"h").w('</span>&nbsp;<a href="#" class="edit-zip-code">Edit</a></div><div class="button-label">Select a delivery date during checkout.</div><a href="#" role="button" class="add-to-cart-button btn btn-primary btn-block"><span class="ficon-cart"></span><span>Add to Cart</span></a></div>')}return t.register("home-delivery-presourcing/dust/dialog",e),e.__dustBody=!0,i.__dustBody=!0,n.__dustBody=!0,r.__dustBody=!0,o.__dustBody=!0,e}(t),i=function(i,n){if(!n)throw new Error("wrong number of args for render");return t.render(e,i,n)};return i.template=e,i}}),define("home-delivery-presourcing/javascript/dialog-view",["require","exports","module","lodash","backbone","eventmanager","sc-location/javascript/user-location-manager","dust","dust-loader!home-delivery-presourcing/dust/dialog"],function(t,e,i){var n=t("lodash"),r=t("backbone"),o=t("eventmanager"),s=t("sc-location/javascript/user-location-manager"),a=t("dust"),l=t("dust-loader!home-delivery-presourcing/dust/dialog")(a),c=r.View.extend({template:l,attributes:{style:"display: none;","class":"home-delivery-presourcing-dialog modal",tabindex:"-1",role:"dialog"},events:{"click .edit-zip-code":"_editZipCodeClick","submit .zip-code-form":"_zipCodeFormSubmit","click .check-stores-button":"_checkStoresClick","click .continue-shopping-button":"_continueShoppingClick","click .add-to-cart-button":"_addToCartClick"},initialize:function(t){this.options=n.extend({show:!0},t),this.originalZipCode=n.get(this.model.toJSON(),"homeDeliveryPresourcing.zipCode"),this.listenTo(this.model,"change",this._modelChanged),this.$el.modal(this.options).on("hidden.bs.modal",n.bind(this._modalHidden,this))},render:function(){return l(this.model.toJSON(),n.bind(function(t,e){this.$el.html(e)},this)),this},show:function(){this.model.unset("hasZipCodeChanged"),this.model.unset("wasButtonClicked"),this.$el.modal("show")},hide:function(){this.$el.modal("hide")},_modelChanged:function(){var t=n.get(this.model.toJSON(),"homeDeliveryPresourcing.zipCode");this.originalZipCode!=t&&(s.setLocation(t),this.model.set({hasZipCodeChanged:!0}),o.trigger("HomeDeliveryPresourcing:Zip:Changed",this.model.toJSON())),this.render()},_editZipCodeClick:function(t){t.preventDefault(),this.$(".delivery-text").hide(),this.$(".zip-code-form").show(),this.$(".zip-code-input").select()},_zipCodeFormSubmit:function(t){t.preventDefault();var e=this.$(".zip-code-input"),i=e.val(),n=e.parents(".form-group");/^[0-9]{5}$/.test(i)?(n.removeClass("has-feedback has-error"),this.model.fetch(i)):n.addClass("has-feedback has-error")},_modalHidden:function(){o.trigger("HomeDeliveryPresourcing:DialogClosed",this.model.toJSON())},_checkStoresClick:function(t){t.preventDefault(),this.model.set({wasButtonClicked:!0}),o.trigger("HomeDeliveryPresourcing:CheckStores",this.model.toJSON()),this.hide()},_continueShoppingClick:function(t){t.preventDefault(),this.model.set({wasButtonClicked:!0}),this.hide()},_addToCartClick:function(t){t.preventDefault(),this.model.set({wasButtonClicked:!0}),o.trigger("HomeDeliveryPresourcing:AddToCart",this.model.toJSON()),this.hide()}});i.exports=c}),define("home-delivery-presourcing/javascript/home-delivery-presourcing-model",["require","exports","module","lodash","backbone"],function(t,e,i){var n=(t("lodash"),t("backbone")),r=n.Model.extend({url:"/api/1.0/homeDeliveryPresourcing",initialize:function(){},fetch:function(t){var e=this.url+"/"+this.get("skuId")+"/"+t;return n.Model.prototype.fetch.call(this,{url:e})},parse:function(t,e){return t.sku}});i.exports=r}),define("list-page/components/list-items/javascript/price-block-view",["require","exports","module","jquery","lodash","backbone","dust","bluebird","sc-accessory-finder/javascript/sc-accessory-finder","sc-add-to-cart/javascript/addToCart","eventmanager","sc-meta-layer/javascript/metaLayer","sc-alerts/javascript/models/alert","sc-alerts/javascript/views/alertView","_cartButton/javascript/CartButtonController","dust-loader!list-page/components/list-items/dust/cart-service-down-dialog","list-page/components/list-items/javascript/connected-devices-view","sc-icr-lightbox/javascript/icrLightBox","list-page/components/included-free/javascript/included-free-view","list-page/components/list-items/javascript/price-block-model","home-delivery-presourcing/javascript/dialog-view","home-delivery-presourcing/javascript/home-delivery-presourcing-model"],function(t,e,i){var n=t("jquery"),r=t("lodash"),o=t("backbone"),s=t("dust"),a=t("bluebird"),l=t("sc-accessory-finder/javascript/sc-accessory-finder"),c=t("sc-add-to-cart/javascript/addToCart"),d=t("eventmanager"),u=t("sc-meta-layer/javascript/metaLayer"),h=t("sc-alerts/javascript/models/alert"),p=t("sc-alerts/javascript/views/alertView"),f=t("_cartButton/javascript/CartButtonController"),g=t("dust-loader!list-page/components/list-items/dust/cart-service-down-dialog")(s),m=t("list-page/components/list-items/javascript/connected-devices-view"),v=t("sc-icr-lightbox/javascript/icrLightBox"),y=t("list-page/components/included-free/javascript/included-free-view"),b=t("list-page/components/list-items/javascript/price-block-model"),w=t("home-delivery-presourcing/javascript/dialog-view"),_=t("home-delivery-presourcing/javascript/home-delivery-presourcing-model"),k=o.View.extend({events:{"click .see-in-cart-link":"_seePriceInCartClick","click .cart-button a":"_addToCartClick"},initialize:function(t){this.options=t||{},this.metaLayer=u.getAll();var e=this.$(".cart-button a").parents(".cart-button").data();this.model=new b(e),this.alertView=new p({el:n("div#alerts")}),this.cartButtonController=new f,this.options.widgetModal&&(this.connectedDevicesView=new m({el:this.$el})),this.options.includedFree&&(this.includedFreeView=new y({
el:this.$(".included-free-container"),appData:this.options.appData})),this.listenTo(d,"HomeDeliveryPresourcing:AddToCart",this._hdpAddToCart)},render:function(){return this.options.widgetModal&&this.connectedDevicesView.render(),this.options.includedFree&&this.includedFreeView.render(),this},_renderHdpDialog:function(t){var e={buttonState:this.options.sku.buttonState,homeDeliveryPresourcing:this.options.sku.homeDeliveryPresourcing,skuId:this.options.sku.skuId};this.hdpDialog=new w({model:new _(e),show:!1}),this.$el.append(this.hdpDialog.render().el)},_seePriceInCartClick:function(t){t.preventDefault(),this.cartButtonController.onItemSeePriceInCartClick(t.target)},_hdpAddToCart:function(t){t.skuId==this.options.sku.skuId&&this._addToCart({ignoreHdp:!0})},_addToCartClick:function(t){t.preventDefault(),this._addToCart()},_addToCart:function(t){if(r.get(t,"ignoreHdp")!==!0){var e=this.options.sku.homeDeliveryPresourcing;if(e&&e.modalButtonState)return this.hdpDialog||this._renderHdpDialog(),void this.hdpDialog.show()}var i=this.$(".cart-button a");if(r.isEmpty(this.model.get("linkType"))){if(this.model.get("serviceDown"))return void this._showCartServiceDownDialog(this.options.sku.skuId);if(this.model.get("purchasable")){var n=i.closest(".cart-button").index(".cart-button")+1;switch(this.model.get("packageBuilder")||d.trigger("ListPage:Cart:Add"),this.model.get("buttonStateId")){case"ADD_TO_PACKAGE":d.trigger("Analytics:ListPage:Cart:AddToPackage");break;case"UPGRADE_YOUR_PHONE":d.trigger("Analytics:ListPage:Cart:UpgradeYourPhone");break;case"CHECK_STORES":d.trigger("Analytics:ListPage:Cart:CheckStores");break;default:d.trigger("Analytics:ListPage:Cart:AddToCart",{pricingType:this.options.sku.pricingType,price:this.options.sku.price,skuId:this.options,cartButtonRank:n})}if(this.model.get("packageBuilder")){if(this.model.get("scPackageBuilder")===!0)return;var o=this.model.get("redirectUrl");return void(o&&window.location.assign(o))}var s={skuId:String(this.options.sku.skuId),productId:String(this.options.sku.productId),price:String(this.options.sku.price),pricingType:String(this.options.sku.pricingType),mdot:this.isMobile,cartButtonRank:String(this.options.sku.cartButtonRank)};this.options.sku.sellerId&&(s.sellerId=String(this.options.sku.sellerId)),this.options.sku.listingId&&(s.listingId=String(this.options.sku.listingId)),a.cast(c(s)).bind(this).then(this._addToCartSuccess,this._addToCartError).caught(this._addToCartError)}}},_addToCartSuccess:function(t){if(d.trigger("ListPage:Cart:Add:Success",t.product),d.trigger("bby-cart:add-to-cart-success",t),"small"===this.options.appData.ressSize)return void d.trigger("ListPage:Cart:Navigate");var e=n(".list-item").filter(function(){return String(n(this).data("skuId"))==t.product.skuId}),i=e.data("price");return t.isICR&&!r.isNumber(i)?void v({cid:t.commerceItemId,skuId:t.product.skuId}):t.isHaccs?void l({skus:t.product.skuId,cid:t.commerceItemId,onError:"redirectToCart"}):void d.trigger("ListPage:Cart:Navigate")},_addToCartError:function(t){d.trigger("ListPage:Cart:Add:Error",t.data),this.alertView.show(new h({type:h.ERROR,header:t.msg}))},_showCartServiceDownDialog:function(t){var e="";"undefined"!=typeof this.metaLayer.env_appServerSSL&&(e=this.metaLayer.env_appServerSSL),n("#service-down-dialog").remove(),g({skuId:t,sslDomain:e},this._initializeCartServiceDownDialog)},_initializeCartServiceDownDialog:function(t,e){t||n(e).modal()}});i.exports=k}),define("list-page/components/home-delivery-presourcing/javascript/home-delivery-presourcing-view",["require","exports","module","backbone","home-delivery-presourcing/javascript/dialog-view","home-delivery-presourcing/javascript/home-delivery-presourcing-model"],function(t,e,i){var n=t("backbone"),r=t("home-delivery-presourcing/javascript/dialog-view"),o=t("home-delivery-presourcing/javascript/home-delivery-presourcing-model"),s=n.View.extend({events:{"click .zip-code":"_zipCodeClick"},initialize:function(){},render:function(){return this},_renderDialog:function(){var t={buttonState:this.model.get("buttonState"),homeDeliveryPresourcing:this.model.get("homeDeliveryPresourcing"),skuId:this.model.get("skuId")};this.dialog=new r({model:new o(t),show:!1}),this.$el.append(this.dialog.render().el)},_zipCodeClick:function(t){t.preventDefault(),this.dialog||this._renderDialog(),this.dialog.show()}});i.exports=s}),define("list-page/components/list-items/javascript/list-item-view",["require","exports","module","backbone","sc-meta-layer/javascript/metaLayer","eventmanager","list-page/components/local-store-availability/javascript/availability-status-view","list-page/components/list-items/javascript/check-shipping-availability-view","list-page/components/compare/javascript/compare-checkbox-view","list-page/components/list-items/javascript/price-block-view","list-page/components/home-delivery-presourcing/javascript/home-delivery-presourcing-view"],function(t,e,i){var n=t("backbone"),r=t("sc-meta-layer/javascript/metaLayer"),o=t("eventmanager"),s=t("list-page/components/local-store-availability/javascript/availability-status-view"),a=t("list-page/components/list-items/javascript/check-shipping-availability-view"),l=t("list-page/components/compare/javascript/compare-checkbox-view"),c=t("list-page/components/list-items/javascript/price-block-view"),d=t("list-page/components/home-delivery-presourcing/javascript/home-delivery-presourcing-view"),u=n.View.extend({initialize:function(t){this.options=t,this.metaLayer=r.getAll(),this.compareCheckboxView=new l({el:this.$(".list-item-compare"),sku:this.model.toJSON()}),this.checkShippingAvailabilityView=new a({el:this.$(".check-shipping-availability"),model:this.model}),this.priceBlockView=new c({el:this.$(".priceblock-wrapper"),sku:this.model.toJSON(),appData:this.options.appData,widgetModal:this.$(".widgetModal").length>0,includedFree:this.$(".included-free-container").length>0}),this.options.appData.localStoreAvailabilityDisabled!==!0&&(this.availabilityStatusView=new s({el:this.$(".availability-status-container"),sku:this.model.toJSON()})),this.homeDeliveryPresourcingView=new d({el:this.$(".home-delivery-presourcing"),model:this.model}),this.listenTo(o,"HomeDeliveryPresourcing:CheckStores",this._hdpCheckStore)},render:function(){return this.compareCheckboxView.render(),this.checkShippingAvailabilityView.render(),this.priceBlockView.render(),this.homeDeliveryPresourcingView.render(),this.availabilityStatusView&&this.model.get("isEligibleForPickup")!==!0&&this.availabilityStatusView.render(),this},_hdpCheckStore:function(t){if(t.skuId==this.model.get("skuId")){var e=_.get(this.model.toJSON(),"availability.pickup.checkStoresLink.url");o.trigger("ListPage:Navigate",e)}}});i.exports=u}),define("list-page/components/list-items/javascript/list-items-view",["require","exports","module","jquery","lodash","backbone","_vendors/blazy","eventmanager","sc-meta-layer/javascript/metaLayer","list-page/components/local-store-availability/javascript/availability-status-collection","list-page/components/list-items/javascript/list-item-collection","list-page/components/list-items/javascript/list-item-model","list-page/components/list-items/javascript/list-item-view"],function(t,e,i){var n=t("jquery"),r=t("lodash"),o=t("backbone"),s=t("_vendors/blazy"),a=t("eventmanager"),l=t("sc-meta-layer/javascript/metaLayer"),c=t("list-page/components/local-store-availability/javascript/availability-status-collection"),d=t("list-page/components/list-items/javascript/list-item-collection"),u=t("list-page/components/list-items/javascript/list-item-model"),h=t("list-page/components/list-items/javascript/list-item-view"),p=o.View.extend({initialize:function(t){this.options=t,this.metaLayer=l.getAll(),this.collection=new d,this.options.appData.localStoreAvailabilityDisabled!==!0&&(this.availabilityStatusCollection=new c,this.listenTo(a,"Availability:GetStatus",this._updateAvailabilityStatus)),this.bLazy=new s({container:".list-items",offset:500})},render:function(){return this._attachToDom(),this.bLazy.revalidate(),this},_attachToDom:function(){var t=this.$(".list-item");r.each(t,function(t){var e=n(t),i=new u(e.data());this.collection.add(i);var r=new h({el:e,model:i,appData:this.options.appData});r.render(),this.availabilityStatusCollection&&this.availabilityStatusCollection.add(r.availabilityStatusView.model)},this)},_updateAvailabilityStatus:function(t){var e=this.availabilityStatusCollection.filter(function(t){return t.get("isEligibleForPickup")===!0});if(0!==e.length){var i="/availability/api/v4/availability/locations/p";"dev.bestbuy.com"===window.location.hostname&&(i="http://bby-qa3.bestbuy.com"+i);for(var o=0;o<e.length;o++){var s=e[o].toJSON();i+=";skuId="+s.skuId+";locationId="+t.id+";availabilityType=INSTOCK;requestedQuantity=1"}n.ajax({method:"GET",url:i,dataType:"json",headers:{"X-REQUEST-ID":"PLP-STORE-INVENTORY","X-CLIENT-ID":"PLP-STORE-INVENTORY","Content-Type":"application/json;charset=utf-8"}}).done(function(t){r.each(e,function(e){e.updateStatus(t)})}).fail(function(){r.each(e,function(e){e.set({storeName:t.name})})})}}});i.exports=p}),define("list-page/components/page-results/javascript/pager-view",["require","exports","module","jquery","backbone","eventmanager"],function(t,e,i){var n=t("jquery"),r=t("backbone"),o=t("eventmanager"),s=r.View.extend({events:{"click .pager-prev":"_pageClick","click .pager-next":"_pageClick","click .pager":"_pageClick"},initialize:function(t){this.options=t||{}},render:function(){return this},_pageClick:function(t){t.preventDefault();var e=n(t.currentTarget),i=e.find("a");if(!i.attr("disabled")){var r=e.data("pageNo");o.trigger("ListPage:Pagination:Navigate",r)}}});i.exports=s}),define("list-page/components/page-results/javascript/sort-by-view",["require","exports","module","jquery","backbone","eventmanager"],function(t,e,i){var n=t("jquery"),r=t("backbone"),o=t("eventmanager"),s=r.View.extend({events:{"change .sort-by-select":"_sortChange"},_sortChange:function(t){var e=n(t.target).val();o.trigger("ListPage:Sort:Change",e)}});i.exports=s}),define("list-page/components/water-filter-finder/javascript/wff-collection",["require","exports","module","lodash","backbone"],function(t,e,i){var n=t("lodash"),r=t("backbone"),o=r.Collection.extend({url:function(){return this.options.appData.bbyDomain+"/api-edge/global/search/www?searchType=fieldvalues&fieldListFacets=waterfiltertuple_facet,waterfiltermodel_facet,waterfiltercompatiblebrands_facet"},initialize:function(t){this.options=t||{}},parse:function(t){if(!t)return t;var e=[];return n.each(t.termsResponse.fields,function(t,i){n.each(t,function(t){e.push({Facet:i,Text:t.term.replace(/,/," "),Value:t.term})})}),e}});i.exports=o}),define("list-page/components/water-filter-finder/javascript/wff-view",["require","exports","module","jquery","lodash","backbone","_vendors/typeahead/typeahead","_vendors/typeahead/bloodhound","eventmanager","list-page/components/water-filter-finder/javascript/wff-collection"],function(t,e,i){var n=t("jquery"),r=t("lodash"),o=t("backbone");t("_vendors/typeahead/typeahead");var s=t("_vendors/typeahead/bloodhound"),a=t("eventmanager"),l=t("list-page/components/water-filter-finder/javascript/wff-collection"),c=o.View.extend({events:{"change #water-filter-finder-brand":"_brandChange","click .finder-expand-collapse":"_onClickExpandCollapse","click #water-filter-finder-model-number-form > a":"_showModal"},initialize:function(t){this.options=t||{},this.collection=new l({appData:this.options.appData}),this.listenTo(this.collection,"reset",this._collectionReset)},render:function(){return this.collection.fetch({reset:!0}),this},_collectionReset:function(){var t=this.collection.chain().filter(function(t){return"waterfiltermodel_facet"===t.get("Facet")||"waterfiltertuple_facet"===t.get("Facet")}).map(function(t){return t.toJSON()}).value(),e=this.collection.chain().filter(function(t){return"waterfiltercompatiblebrands_facet"===t.get("Facet")}).map(function(t){return t.toJSON()}).sortBy("Text").value();this._loadAutoComplete(t),this._loadBrandCompatibility(e)},_loadAutoComplete:function(t){var e=this,i=new s({datumTokenizer:s.tokenizers.obj.whitespace("Text"),queryTokenizer:s.tokenizers.whitespace,local:t}),n=this.$("#water-filter-finder-model-number");n.typeahead({minLength:1,highlight:!0},{name:"brand-models",display:"Text",source:i,limit:100,templates:{empty:"<div class='tt-empty'>No Results</div>",suggestion:r.template('<div class="tt-suggestion tt-selectable"><%=Text%></div>')}}).bind("typeahead:select",function(t,i){a.trigger("ListPage:Facet:Add",{queryPath:i.Facet+"=~"+i.Value}),a.trigger("analytics:waterFilterFinder:searchSelect",{value:i.Value}),"small"===e.options.appData.ressSize&&(a.trigger("List:Facet:Add",{facet:{id:i.Facet},facetValue:{queryPath:i.Facet+"=~"+i.Value}}),a.trigger("List:MobileFacet:ApplyFacets"))})},_loadBrandCompatibility:function(t){var e=this.$("#water-filter-finder-brand");r.each(t,function(t){var i=n("<option>",{attr:{"data-facet-id":t.Facet},text:t.Text,value:t.Facet+"=~"+t.Value});e.append(i)})},_brandChange:function(t){t.preventDefault();var e=n(t.target),i=e.val();a.trigger("ListPage:Facet:Add",{queryPath:i}),a.trigger("analytics:waterFilterFinder:brandSelect",{brand:i.split("=~")[1]}),"small"===this.options.appData.ressSize&&(a.trigger("List:Facet:Add",{facet:{id:e.find(":selected").data("facet-id")},facetValue:{queryPath:i}}),a.trigger("List:MobileFacet:ApplyFacets"))},_onClickExpandCollapse:function(t){t.preventDefault();var e=this.$el,i=n(".cloaked",t.currentTarget);e.hasClass("closed")?(e.removeClass("closed"),i.text("Open Finder")):(e.addClass("closed"),i.text("Close Finder"))},_showModal:function(t){t.preventDefault(),n("#water-filter-finder-modal").modal("show")}});i.exports=c}),define("list-page/components/page-results/javascript/page-results-view-base",["require","exports","module","backbone","sc-meta-layer/javascript/metaLayer","list-page/components/facets/javascript/applied-facets-view","list-page/components/local-store-availability/javascript/availability-view","list-page/components/ink-finder/javascript/ink-finder-view","list-page/components/list-items/javascript/list-items-view","list-page/components/page-results/javascript/pager-view","list-page/components/page-results/javascript/sort-by-view","list-page/components/water-filter-finder/javascript/wff-view"],function(t,e,i){var n=t("backbone"),r=t("sc-meta-layer/javascript/metaLayer"),o=t("list-page/components/facets/javascript/applied-facets-view"),s=t("list-page/components/local-store-availability/javascript/availability-view"),a=t("list-page/components/ink-finder/javascript/ink-finder-view"),l=t("list-page/components/list-items/javascript/list-items-view"),c=t("list-page/components/page-results/javascript/pager-view"),d=t("list-page/components/page-results/javascript/sort-by-view"),u=t("list-page/components/water-filter-finder/javascript/wff-view"),h=n.View.extend({initialize:function(t){this.options=t||{},this.metaLayer=r.getAll(),this.sortByView=new d({el:this.$(".sort-by")}),this.appliedFacetsView=new o({el:this.$(".applied-facets-container")}),this.listItemsView=new l({el:this.$(".list-items"),appData:this.options.appData}),this.pagerView=new c({el:this.$(".results-pagination")}),this.options.appData.localStoreAvailabilityDisabled!==!0&&(this.availabilityView=new s({el:this.$(".local-store-availability")})),this.options.appData.enableInkAndTonerFinder&&(this.inkFinderView=new a({el:this.$(".ink-finder"),appData:this.options.appData})),this.options.appData.enableWaterFilterFinder&&(this.waterFilterFinderView=new u({el:this.$(".water-filter-finder"),appData:this.options.appData}))},render:function(){return this.sortByView.render(),this.appliedFacetsView.render(),this.listItemsView.render(),this.pagerView.render(),this.availabilityView&&this.availabilityView.render(),this.inkFinderView&&this.inkFinderView.render(),this.waterFilterFinderView&&this.waterFilterFinderView.render(),this}});i.exports=h}),define("list-page/components/page-results/javascript/results-display-picker-view",["require","exports","module","jquery","backbone","list-page/components/application/javascript/cookie-manager"],function(t,e,i){var n=t("jquery"),r=t("backbone"),o=new(t("list-page/components/application/javascript/cookie-manager")),s=r.View.extend({events:{"click .display-list-view":"_displayListView","click .display-grid-view":"_displayGridView"},_displayListView:function(t){n("body").removeClass("plp-grid-view"),o.removeCookie("plpResultsView","/")},_displayGridView:function(t){n("body").addClass("plp-grid-view"),o.setCookie("plpResultsView","grid",null,"/")}});i.exports=s}),define("list-page/components/banners/javascript/sku-banner-item-model",["require","exports","module","backbone"],function(t,e,i){var n=t("backbone"),r=n.Model.extend({});i.exports=r}),define("list-page/components/banners/javascript/sku-banner-item-collection",["require","exports","module","backbone","list-page/components/banners/javascript/sku-banner-item-model"],function(t,e,i){var n=t("backbone"),r=t("list-page/components/banners/javascript/sku-banner-item-model"),o=n.Collection.extend({model:r});i.exports=o}),define("list-page/components/banners/javascript/sku-banner-item-view",["require","exports","module","backbone","eventmanager"],function(t,e,i){var n=t("backbone"),r=t("eventmanager"),o=n.View.extend({events:{"click .sku-banner-item-link":"_skuLinkClick"},initialize:function(t){this.options=t||{}},_skuLinkClick:function(t){t.preventDefault(),r.trigger("analytics:plp:bannerClick",{skuId:this.model.get("skuId")}),window.location.assign(t.currentTarget.href)}});i.exports=o}),define("list-page/components/banners/javascript/sku-banner-view",["require","exports","module","backbone","list-page/components/banners/javascript/sku-banner-item-collection","list-page/components/banners/javascript/sku-banner-item-model","list-page/components/banners/javascript/sku-banner-item-view"],function(t,e,i){var n=t("backbone"),r=t("list-page/components/banners/javascript/sku-banner-item-collection"),o=t("list-page/components/banners/javascript/sku-banner-item-model"),s=t("list-page/components/banners/javascript/sku-banner-item-view"),a=n.View.extend({initialize:function(t){this.options=t||{},this.collection=new r},render:function(){return this._attachToDom(),this},_attachToDom:function(){var t=this.$(".sku-banner-item");_.each(t,function(t){var e=$(t),i=new o(e.data());this.collection.add(i);var n=new s({el:e,model:i});n.render()},this)}});i.exports=a}),define("list-page/components/page-results/javascript/page-results-view-large",["require","exports","module","list-page/components/page-results/javascript/page-results-view-base","list-page/components/page-results/javascript/results-display-picker-view","list-page/components/banners/javascript/sku-banner-view"],function(t,e,i){var n=t("list-page/components/page-results/javascript/page-results-view-base"),r=t("list-page/components/page-results/javascript/results-display-picker-view"),o=t("list-page/components/banners/javascript/sku-banner-view"),s=n.extend({events:{},initialize:function(t){this.options=t||{},this.events=_.extend(n.prototype.events,this.events),n.prototype.initialize.apply(this,arguments)},render:function(){return n.prototype.render.apply(this,arguments),this._attachToDom(),this.skuBannerView.render(),this.resultsDisplayPickerView.render(),this},_attachToDom:function(){this.skuBannerView=new o({el:this.$(".sku-banner")}),this.resultsDisplayPickerView=new r({el:this.$(".results-display-picker")})}});i.exports=s}),define("list-page/components/application/javascript/application-view-large",["require","exports","module","list-page/components/application/javascript/cookie-manager","list-page/components/application/javascript/application-view-base","list-page/components/compare/javascript/compare-view","list-page/components/facets/javascript/facets-view-large","list-page/components/page-results/javascript/page-results-view-large"],function(t,e,i){var n=(new(t("list-page/components/application/javascript/cookie-manager")),t("list-page/components/application/javascript/application-view-base")),r=t("list-page/components/compare/javascript/compare-view"),o=t("list-page/components/facets/javascript/facets-view-large"),s=t("list-page/components/page-results/javascript/page-results-view-large"),a=n.extend({events:{},initialize:function(t){this.options=t||{},this.events=_.extend(n.prototype.events,this.events),n.prototype.initialize.apply(this,arguments)},render:function(){return n.prototype.render.apply(this,arguments),this._attachToDom(),this.facetsView.render(),this.pageResultsView.render(),this.$(".compare-content").html(this.compareView.render().el),this},_attachToDom:function(){this.facetsView=new o({el:this.$(".list-page-facets"),appData:this.options.appData}),this.pageResultsView=new s({el:this.$(".page-results"),appData:this.options.appData}),this.compareView=new r}});i.exports=a});try{window.location.hostname.match("preview.bestbuy.com")||window==parent||(parent.location=window.location)}catch(e){}require(["list-page/components/application/javascript/application-view-large"],function(t){var e=new t({appData:window.appData});e.render()}),define("list-page/components/application/javascript/bootstrap-large",function(){});