define("common/utils/to-array",[],function(){function t(t){return Array.prototype.slice.call(t)}return t}),define("common/modules/accessibility/main",["common/modules/user-prefs"],function(t){function e(e){for(var n in e)e.hasOwnProperty(n)&&t.set(i+"."+n,e[n])}function n(e){var n=t.get(i+"."+e);return n===!1?!1:!0}function o(t){return n(t)===!0}var i="accessibility",a={KEY_PREFIX:i,saveState:e,isOn:o};return a}),define("common/modules/accessibility/helpers",["fastdom","common/modules/accessibility/main","common/utils/$"],function(t,e,n){function o(o){e.isOn("flashing-elements")?o&&o():t.write(function(){n("body").addClass("disable-flashing-elements"),o&&o()})}return{shouldHideFlashingElements:o}}),define("text!common/views/business/stock-value.html",[],function(){return'<div class="stocks__stock-value <%=deltaClass%>">\n    <div class="stocks__divider"></div>\n    <div class="stocks__name"><%=name%><%=closedInline%></div>\n    <div class="stocks__value">\n        <div class="stocks__price"><%=price%></div>\n        <%=marketDownIcon%>\n        <%=marketUpIcon%>\n        <%=marketSameIcon%>\n        <div class="stocks__change"><%=change%></div>\n    </div>\n    <%=closed%>\n</div>\n'}),define("text!common/views/business/stocks.html",[],function(){return'<div class="stocks__stocks-container">\n    <%=stocks%>\n</div>\n'}),define("common/modules/business/stocks",["common/utils/$","common/utils/ajax","common/utils/config","common/utils/template","common/views/svgs","text!common/views/business/stock-value.html","text!common/views/business/stocks.html","lodash/collections/contains","lodash/collections/map"],function(t,e,n,o,i,a,s,r,c){function l(){return r(["uk/business","us/business","au/business"],n.page.pageId)}function u(){return e({url:"/business-data/stocks.json",type:"json",method:"get",crossOrigin:!0})}function d(t){return t>0?"+"+t:""+t}function m(t){var e=c(t.stocks,function(t){return o(a,{name:t.name,deltaClass:"stocks__stock-value--"+t.trend,price:t.price,change:d(t.change),closed:t.closed?'<div class="stocks__closed">closed</div>':"",closedInline:t.closed?'<div class="stocks__closed--inline">closed</div>':"",marketDownIcon:i("marketDownIcon",["stocks__icon","stocks__icon--down"]),marketUpIcon:i("marketUpIcon",["stocks__icon","stocks__icon--up"]),marketSameIcon:i("marketSameIcon",["stocks__icon","stocks__icon--same"])})}).join("");return o(s,{stocks:e})}return function(){var e=t(".js-container--first .js-container__header");l()&&e&&u().then(function(t){t.stocks.length>0&&e.append(m(t))})}}),define("facia/modules/onwards/geo-most-popular-front",["qwery","common/utils/$","common/utils/config","common/utils/mediator","common/modules/analytics/register","common/modules/component"],function(t,e,n,o,i,a){function s(){i.begin("most-popular")}function r(t){e(".js-tabs-content",t).addClass("tabs__content--no-border"),e(".js-tabs",t).addClass("u-h")}return a.define(s),s.prototype.endpoint="/most-read-geo.json",s.prototype.isNetworkFront="Network Front"===n.page.contentType,s.prototype.isVideoFront="video"===n.page.pageId,s.prototype.isInternational="international"===n.page.pageId,s.prototype.manipulationType="html",s.prototype.prerender=function(){this.elem=t(".headline-list",this.elem)[0]},s.prototype.go=function(){var e=this.isNetworkFront?".js-tab-1":".js-tab-2";this.parent=t(".js-popular-trails")[0],this.parent&&(this.isInternational&&this.isNetworkFront||this.isVideoFront?r(this.parent):(this.tab=t(e,this.parent)[0],this.fetch(this.tab,"html")))},s.prototype.ready=function(){this.isNetworkFront&&r(this.parent),i.end("most-popular"),o.emit("modules:geomostpopular:ready")},s}),define("text!facia/views/button-toggle.html",[],function(){return'<button class="fc-container__toggle" data-link-name="<%=dataLink%>">\n    <%=icon%>\n    <span class="fc-container__toggle__text"><%=text%></span>\n</button>\n'}),define("facia/modules/ui/container-toggle",["bean","bonzo","fastdom","common/utils/$","common/utils/mediator","common/modules/user-prefs","common/utils/template","common/views/svgs","text!facia/views/button-toggle.html"],function(t,e,n,o,i,a,s,r,c){return function(t){function l(e){var i=o(".ad-slot--paid-for-badge",t);p=e,n.write(function(){u["displayed"===p?"removeClass":"addClass"]("fc-container--rolled-up"),d.attr("data-link-name",h["displayed"===p?"hidden":"displayed"]),m.text(h[p]),i.css("display","hidden"===p?"none":"block")})}var u=e(t),d=e(e.create(s(c,{text:"Hide",dataLink:"Show",icon:r("arrowicon")}))),m=o(".fc-container__toggle__text",d[0]),f="container-states",h={hidden:"Show",displayed:"Hide"},p="displayed",g=function(t,e){var n=a.get(f),o=t;"displayed"===e?delete n[o]:(n||(n={}),n[o]="closed"),a.set(f,n)},v=function(t){var e=a.get(f);e&&e[t]&&l("hidden")};a.remove("front-trailblocks"),this.addToggle=function(){var t=u.attr("data-id"),e=o(".js-container__header",u[0]);n.write(function(){e.append(d),u.removeClass("js-container--toggle").addClass("fc-container--has-toggle"),v(t)}),i.on("module:clickstream:click",function(e){e.target===d[0]&&(l("displayed"===p?"hidden":"displayed"),g(t,p))})}}}),define("facia/modules/ui/container-show-more",["bonzo","fastdom","qwery","common/utils/report-error","common/utils/$","common/utils/ajax-promise","common/utils/config","common/utils/mediator","common/modules/user-prefs","lodash/collections/groupBy","lodash/collections/filter","lodash/collections/map","lodash/collections/forEach","lodash/collections/find"],function(t,e,n,o,i,a,s,r,c,l,u,d,m,f){function h(t,e){var n=t.text[e];t.$textEl.html(n),t.$el.attr("data-link-name",e===M?"less":"more").toggleClass("button--primary",e!==M).toggleClass("button--tertiary",e===M).toggleClass($,e===T),t.$container.toggleClass(I,e!==M).toggleClass(D,e===M),t.state=e}function p(t,e){var n=c.get(L,{type:"session"})||{};e!==M?delete n[t]:n[t]="more",c.set(L,n,{type:"session"})}function g(t){var e=c.get(L,{type:"session"});return e&&e[t]?M:O}function v(t){e.write(function(){h(t,t.state===O?M:O),p(t.id,t.state)})}function w(t){e.write(function(){t.$container.addClass(I).removeClass("js-container--fc-show-more").toggleClass(I,t.state===O),h(t,t.state)})}function b(t,e){return a({url:"/"+t+"/show-more/"+e+".json",crossOrigin:!0,timeout:z})}function y(e,n){var o=C(e),a=t.create(n);return i(F,a).each(function(e){var n=t(e);n.attr(S)in o&&n.remove()}),a}function k(t){e.write(function(){h(t,T)}),b(s.page.pageId,t.id).then(function(n){var o,i=n.html.trim();i&&(o=y(t.$container,i)),e.write(function(){o&&t.$placeholder.replaceWith(o),h(t,M),p(t.id,t.state),r.emit("modules:show-more:loaded")}),t.isLoaded=!0})["catch"](function(n){e.write(function(){h(t,O)}),j(t),o(new Error("Error retrieving show more ("+n+")"),!1)})}function _(t){e.write(function(){t.addClass("show-more__error-message--invisible")})}function j(n){n.$errorMessage&&n.$errorMessage.remove(),n.$errorMessage=t(t.create('<div class="show-more__error-message">Sorry, failed to load more stories. Please try again.</div>')),e.write(function(){n.$errorMessage.insertAfter(n.$el),setTimeout(function(){_(n.$errorMessage)},5e3)})}function C(e){return l(n(F,e),function(e){return t(e).attr(S)})}function x(t){var e,n,o,a=i(".js-show-more-button",t);return a?(e=t.attr("data-id"),n=g(e),o={$el:a,$container:t,$iconEl:i(".i",a),$placeholder:i(".js-show-more-placeholder",t),$textEl:i("."+E,a),id:e,text:{hidden:i(".js-button-text",a).text(),displayed:"Less",loading:"Loading&hellip;"},state:n,isLoaded:!1,$errorMessage:null},n===M&&k(o),o):void 0}var I="fc-show-more--hidden",D="fc-show-more--visible",E="js-button-text",L="section-states",$="collection__show-more--loading",S="data-id",F=".js-fc-item",M="displayed",O="hidden",T="loading",z=5e3;return{itemsByArticleId:C,dedupShowMore:y,init:function(){e.read(function(){var e=n(".js-container--fc-show-more").map(t),o=u(d(e,x));m(o,w),r.on("module:clickstream:click",function(t){var e=f(o,function(e){return e.$el[0]===t.target});e&&e.state!==T&&(e.isLoaded?v(e):(e.$errorMessage&&e.$errorMessage.hide(),k(e)))})})}}}),define("facia/modules/ui/lazy-load-containers",["bonzo","fastdom","qwery","common/utils/detect","common/utils/mediator","lodash/functions/throttle"],function(t,e,n,o,i,a){var s=o.getViewport().height;return function(){var o=t(n(".js-front-bottom")),r=n(".js-container--lazy-load"),c=a(function(){0===r.length?i.off("window:throttledScroll",c):e.read(function(){var n,i=window.pageYOffset,a=i+t.viewport().height,c=o.offset().top;a>c-s&&(n=t(r.shift()),e.write(function(){n.removeClass("fc-container--lazy-load")}))})},500);i.on("window:throttledScroll",c),c()}}),define("text!facia/views/liveblog-block.html",[],function(){return'<a href="<%=href%>" class="fc-item__liveblog-block" data-link-name="block | <%=index%>" aria-hidden="<%=ariaHidden%>">\n    <div class="fc-item__liveblog-block__text">\n        <div class="fc-item__liveblog-block__time"><%=relativeTime%></div>\n        <%=text%>\n    </div>\n</a>\n'}),define("lodash/objects/isEmpty",["./forOwn","./isArguments","./isFunction","../support"],function(t,e,n,o){function i(i){var l=!0;if(!i)return l;var d=u.call(i),m=i.length;return d==s||d==c||(o.argsClass?d==a:e(i))||d==r&&"number"==typeof m&&n(i.splice)?!m:(t(i,function(){return l=!1}),l)}var a="[object Arguments]",s="[object Array]",r="[object Object]",c="[object String]",l=Object.prototype,u=l.toString;return i}),define("facia/modules/ui/live-blog-updates",["bonzo","common/utils/$","common/utils/ajax","common/utils/storage","common/modules/ui/relativedates","common/utils/template","common/utils/mediator","common/utils/detect","common/utils/fastdom-promise","text!facia/views/liveblog-block.html","lodash/arrays/compact","lodash/objects/isUndefined","lodash/collections/forEach","lodash/functions/debounce","lodash/collections/filter","lodash/objects/isEmpty","lodash/collections/map","common/utils/chain"],function(t,e,n,o,i,a,s,r,c,l,u,d,m,f,h,p,g,v){function w(t){var e=(t||{}).publishedDateTime,n=e?i.makeRelativeDate(new Date(e)):!1;return n||""}function b(t,e,n){var o=w(e);return o=o.match(/yesterday/i)?o.toLowerCase():o?"Latest update "+o+" ago":"Updated just now",a(l,{ariaHidden:!e.isNew,href:"/"+t+"#"+e.id,relativeTime:o,text:u([e.title,e.body.slice(0,500)]).join(". "),index:n+1})}function y(e,n,o,i){var a=d(i);m(n,function(n){var s=!1,r=["fc-item__liveblog-blocks__inner","u-faux-block-link__promote"],l=v(o).slice(0,2).and(g,function(t,n){return!s&&(t.publishedDateTime>i||a)&&(t.isNew=!0,s=!0,r.push("fc-item__liveblog-blocks__inner--offset")),b(e,t,n)}).slice(0,s?2:1).value(),u=t.create('<div class="'+r.join(" ")+'">'+l.join("")+"</div>"),d=t(n);c.write(function(){d.append(u)}).then(function(){s&&k(u[0])})})}function k(t){_(t).then(function(e){var n;e||(n=f(function(){_(t,!0).then(function(t){t&&s.off("window:throttledScroll",n)})},I),s.on("window:throttledScroll",n))})}function _(e,n){return c.read(function(){return e.getBoundingClientRect().top}).then(function(o){return o>0&&M>o?(setTimeout(function(){var n=t(e);c.write(function(){n.removeClass("fc-item__liveblog-blocks__inner--offset")})},n?0:x),!0):void 0})}function j(t){return h(t,function(t){return t.id&&t.publishedDateTime&&t.body&&t.body.length>=10})}function C(){return c.read(function(){var t={};return e($).each(function(e){var n=e.getAttribute(S);n&&(t[n]=t[n]||[],t[n].push(e))}),t}).then(function(t){var e;p(t)||(e=o.session.get(F)||{},m(t,function(t,i){n({url:"/"+i+".json?rendered=false",type:"json",crossOrigin:!0}).then(function(n){var a=n&&j(n.blocks);a&&a.length&&(y(i,t,a,e[i]),e[i]=a[0].publishedDateTime,o.session.set(F,e))})}),L&&(L-=1,setTimeout(function(){C()},1e3*D),D*=E))})}var x=2e3,I=500,D=30,E=1,L=5,$=".js-liveblog-blocks",S="data-article-id",F="gu.liveblog.block-dates",M=r.getViewport().height;return{show:C}}),define("common/utils/proximity-loader",["bonzo","common/utils/mediator","fastdom","lodash/collections/filter","lodash/functions/debounce"],function(t,e,n,o,i){function a(t,n){var o={conditionFn:t,loadFn:n};c.push(o),1===c.length&&e.on("window:throttledScroll",u),r()}function s(e,o,i){n.read(function(){var n=t(e),s=function(){var t=n.offset(),e=t.top-o,i=t.top+t.height+o;return l.top>e&&l.bottom<i};a(s,i)})}var r,c=[],l={top:0,bottom:0},u=function(){l.top=window.pageYOffset,l.bottom=l.top+t.viewport().height,c=o(c,function(t){return t.conditionFn()?void t.loadFn():!0}),0===c.length&&e.off("window:throttledScroll",u)};return r=i(u,2e3),{add:s}}),define("facia/modules/ui/football-snaps",["bonzo","common/utils/detect"],function(t,e){var n={resizeIfPresent:function(n){if("mobile"!==e.getBreakpoint()&&n){var o=t(n);o.css("height",o.parent().css("height"))}}};return n}),define("facia/modules/ui/snaps",["bean","bonzo","fastdom","common/utils/$","common/utils/ajax","common/utils/detect","common/utils/mediator","common/utils/template","common/utils/to-array","common/utils/proximity-loader","common/modules/ui/relativedates","facia/modules/ui/football-snaps","lodash/functions/once","lodash/collections/find","lodash/functions/debounce"],function(t,e,n,o,i,a,s,r,c,l,u,d,m,f,h){function p(){var t=c(o(".facia-snap-embed"));t.forEach(k);var e=c(o(".js-snappable.js-snap")).filter(function(t){var e=o(t).hasClass("facia-snap-embed"),n=t.getAttribute("data-snap-type");return!e&&n&&_.indexOf(n)>-1}).filter(function(t){return t.getAttribute("data-snap-uri")});e.forEach(y)}function g(t,e){v(t,e),o(t).hasClass("facia-snap--football")&&d.resizeIfPresent(t)}function v(t,o){var i,a,s=e(t),r="facia-snap-point--";a=[{width:0,name:"tiny"},{width:180,name:"mini"},{width:220,name:"small"},{width:300,name:"medium"},{width:700,name:"large"},{width:940,name:"huge"}],n.read(function(){i=t.offsetWidth}),n.write(function(){a.map(function(t,e,n){var a=i>=t.width&&(n[e+1]?i<n[e+1].width:!0);return t.action=a?"addClass":o?"removeClass":!1,t}).filter(function(t){return t.action}).forEach(function(t){s[t.action](r+t.name)})})}function w(t){var o=e(t).offset(),i=Math.ceil((o.width||0)/2),a=400,s=t.getAttribute("data-snap-uri"),r=Math.min(Math.max(o.height||0,i),a),c=e.create('<div style="width: 100%; height: '+r+'px; overflow: hidden; -webkit-overflow-scrolling:touch"></div>')[0],l=e.create('<iframe src="'+s+'" style="width: 100%; height: 100%; border: none;"></iframe>')[0];e(c).append(l),j.push(l),C(),n.write(function(){e(t).empty().append(c)})}function b(t,a){i({url:t.getAttribute("data-snap-uri"),type:a?"json":"html",crossOrigin:!0}).then(function(i){o.create(a?i.html:i).each(function(o){n.write(function(){e(t).html(o)})}),u.init(t)})}function y(t){l.add(t,1500,function(){switch(n.write(function(){e(t).addClass("facia-snap-embed")}),g(t),t.getAttribute("data-snap-type")){case"document":w(t);break;case"fragment":b(t);break;case"json.html":b(t,!0)}a.isIOS||s.on("window:resize",h(function(){g(t,!0)},200))})}function k(t){g(t),a.isIOS||s.on("window:resize",h(function(){g(t,!0)},200))}var _=["document","fragment","json.html"],j=[],C=m(function(){t.on(window,"message",function(t){var n,o=f(j,function(e){return e.contentWindow===t.source});o&&(n=JSON.parse(t.data),"set-height"===n.type&&e(o).parent().css("height",n.value))})});return{init:p}}),define("lodash/objects/isEqual",["../internals/baseCreateCallback","../internals/baseIsEqual"],function(t,e){function n(n,o,i,a){return e(n,o,"function"==typeof i&&t(i,a,2))}return n}),define("facia/modules/ui/sponsorship",["bean","bonzo","fastdom","Promise","qwery","lodash/collections/map","lodash/objects/isEqual"],function(t,e,n,o,i,a,s){function r(){return new o(function(e){var n=function(o){d.push(o.keyCode),s(m.slice(0,d.length),d)?d.length===m.length&&(e(),t.off(document,"keydown",n)):d=[]};t.on(document,"keydown",n)})}function c(t,e){return Math.floor(Math.random()*(e-t+1))+t}function l(){return f[c(0,f.length-1)]}function u(){var t=a(i(".js-fc-item"),e);setInterval(function(){n.write(function(){t.forEach(function(t){f.forEach(function(e){t.removeClass(e)}),t.addClass(l())})})},1e3)}var d=[],m=[38,38,40,40,37,39,37,39,66,65],f=a(["special-report","live","dead","feature","editorial","comment","podcast","media","analysis","review","letters","external","news"],function(t){return"tone-"+t+"--item"});return function(){r().then(u)}}),define("facia/modules/onwards/search-tool",["bean","raven","common/utils/$","common/utils/ajax","common/utils/mediator","common/modules/analytics/omniture","lodash/collections/forEach","lodash/arrays/initial","common/utils/chain"],function(t,e,n,o,i,a,s,r,c){function l(e){var l=null,u=null,d="",m="",f="",h={13:"enter",38:"up",40:"down"},p=e||{},g=p.container,v=p.apiUrl;return{init:function(){this.bindElements(g),this.bindEvents()},bindElements:function(t){l=n(".js-search-tool-list",t),u=n(".js-search-tool-input",t)},bindEvents:function(){t.on(document.body,"keyup",this.handleKeyEvents.bind(this)),t.on(document.body,"click",this.handleClick.bind(this)),i.on("autocomplete:toggle",this.toggleControls.bind(this))},hasInputValueChanged:function(){return d.length!==m.length},handleClick:function(t){var e=n(t.target).hasClass("js-search-tool-input"),o=this.isLink(t.target);e?(t.preventDefault(),i.emit("autocomplete:toggle",!0)):o?(t.preventDefault(),n(".active",l).removeClass("active"),n(o).addClass("active"),this.pushData()):i.emit("autocomplete:toggle",!1)},isLink:function(t){return n(t).hasClass("js-search-tool-link")?t:n.ancestor(t,"js-search-tool-link")},toggleControls:function(t){var e=n(".js-search-tool-input")[0],o=n(".js-search-tool"),i=n(".js-close-location"),a=n(".js-edit-location");t?(f=e.value,o.addClass("is-editing"),e.setSelectionRange(0,e.value.length),i.removeClass("u-h"),a.addClass("u-h")):(o.removeClass("is-editing"),this.clear(),this.setInputValue(f),i.addClass("u-h"),a.removeClass("u-h"))},pushData:function(){var t=n(".active",l),e={},o="set";if(0===t.length){if(""!==u.val())return!1;o="remove"}return e={id:t.attr("data-weather-id"),city:t.attr("data-weather-city"),store:o},i.emit("autocomplete:fetch",e),this.setInputValue(),a.trackLinkImmediate("weather location set by user"),f=e.city,u.blur(),setTimeout(this.destroy.bind(this),50),e},getListOfResults:function(t){return m=t.target.value,t.target.value.match(/\S/)?void(this.hasInputValueChanged()&&this.fetchData()):(this.clear(),void(d=""))},fetchData:function(){return o({url:v+m,type:"json",crossOrigin:!0}).then(function(t){this.renderList(t,5),d=m}.bind(this))},handleKeyEvents:function(t){var e=h[t.which||t.keyCode];n(t.target).hasClass("js-search-tool-input")&&("down"===e?(t.preventDefault(),this.move(1)):"up"===e?(t.preventDefault(),this.move(-1)):"enter"===e?this.pushData():this.getListOfResults(t))},move:function(t){var e=n(".active",l),o=parseInt(e.attr("id"),10);isNaN(o)&&(o=-1),e.removeClass("active"),this.getNewId(o+t)<0?this.setInputValue(d):(n("#"+this.getNewId(o+t)+"sti",l).addClass("active"),this.setInputValue())},getNewId:function(t){var e=n("li",l).length,o=t%e;return-1>o?o=e-1:t===e&&(o=-1),o},setInputValue:function(t){var e=t||n(".active",l).attr("data-weather-city");u.val(e)},renderList:function(t,e){var n=document.createDocumentFragment(),o=t.length-e;c(t).and(r,o).and(s,function(t,e){var o=document.createElement("li");o.className="search-tool__item",o.innerHTML='<a role="button" href="#'+t.id+'" id="'+e+'sti" class="js-search-tool-link search-tool__link'+(0===e?' active"':'"')+' data-link-name="weather-search-tool" data-weather-id="'+t.id+'" data-weather-city="'+t.city+'">'+t.city+' <span class="search-tool__meta">'+t.country+"</span></a>",n.appendChild(o)}),this.clear().append(n)},clear:function(){return l.html("")},destroy:function(){this.clear()}}}return l}),define("facia/modules/onwards/weather",["bean","qwery","common/utils/report-error","common/utils/$","common/utils/ajax-promise","common/utils/config","common/utils/detect","common/utils/mediator","common/utils/template","common/modules/analytics/omniture","common/modules/user-prefs","facia/modules/onwards/search-tool","lodash/collections/contains"],function(t,e,n,o,i,a,s,r,c,l,u,d,m){var f=null,h=null,p="weather-location";return{init:function(){return a.switches&&a.switches.weather&&this.isNetworkFront()?void this.getDefaultLocation():!1},isNetworkFront:function(){return m(["uk","us","au","international"],a.page.pageId)},getUserLocation:function(){var t=u.get(p);return t&&t.id?t:void 0},getWeatherData:function(t){return i({url:t,type:"json",method:"get",crossOrigin:!0})},saveUserLocation:function(t){u.set(p,{id:t.id,city:t.city})},getDefaultLocation:function(){var t=this.getUserLocation();return t?void this.fetchWeatherData(t):this.getWeatherData(a.page.weatherapiurl+".json").then(function(t){this.fetchWeatherData(t)}.bind(this))["catch"](function(t){n(t,{feature:"weather"})})},fetchWeatherData:function(t){return this.getWeatherData(a.page.weatherapiurl+"/"+t.id+".json?_edition="+a.page.edition.toLowerCase()).then(function(e){this.render(e,t.city),this.fetchForecastData(t)}.bind(this))["catch"](function(t){n(t,{feature:"weather"})})},clearLocation:function(){u.remove(p),h.setInputValue()},fetchForecastData:function(t){return this.getWeatherData(a.page.forecastsapiurl+"/"+t.id+".json?_edition="+a.page.edition.toLowerCase()).then(function(t){this.renderForecast(t)}.bind(this))["catch"](function(t){n(t,{feature:"weather"})})},saveDeleteLocalStorage:function(t){"set"===t.store?(this.saveUserLocation(t),this.fetchWeatherData(t)):"remove"===t.store&&(this.clearLocation(),this.getDefaultLocation())},bindEvents:function(){t.on(document.body,"click",".js-toggle-forecast",function(t){t.preventDefault(),this.toggleForecast()}.bind(this)),r.on("autocomplete:fetch",this.saveDeleteLocalStorage.bind(this))},toggleForecast:function(){o(".weather").toggleClass("is-expanded")},addSearch:function(){h=new d({container:o(".js-search-tool"),apiUrl:a.page.locationapiurl}),h.init()},render:function(t,e){this.attachToDOM(t.html,e),this.bindEvents(),this.addSearch(),this.render=function(t,e){this.attachToDOM(t.html,e),h.bindElements(o(".js-search-tool")),s.isBreakpoint({max:"phablet"})&&window.scrollTo(0,0)}},attachToDOM:function(t,e){f=o("#headlines .js-container__header"),o(".js-weather",f).remove(),f.append(t.replace(new RegExp("<%=city%>","g"),e))},renderForecast:function(t){var e=o(".js-weather-forecast"),n=t.html;e.empty().html(n)}}}),define("lodash/functions/partial",["../internals/createWrapper","../internals/slice"],function(t,e){function n(n){return t(n,16,e(arguments,1))}return n}),define("bootstraps/enhanced/facia",["bonzo","qwery","common/utils/$","common/utils/config","common/utils/detect","common/utils/mediator","common/utils/robust","common/utils/storage","common/utils/to-array","common/modules/accessibility/helpers","common/modules/experiments/ab","common/modules/business/stocks","facia/modules/onwards/geo-most-popular-front","facia/modules/ui/container-toggle","facia/modules/ui/container-show-more","facia/modules/ui/lazy-load-containers","facia/modules/ui/live-blog-updates","facia/modules/ui/snaps","facia/modules/ui/sponsorship","facia/modules/onwards/weather","lodash/functions/partial","lodash/collections/forEach"],function(t,e,n,o,i,a,s,r,c,l,u,d,m,f,h,p,g,v,w,b,y,k){var _={showSnaps:function(){v.init(),a.on("modules:container:rendered",v.init)},showContainerShowMore:function(){a.addListeners({"modules:container:rendered":h.init,"page:front:ready":h.init})},showContainerToggle:function(){var t=function(t){n(".js-container--toggle",n(t||document)[0]).each(function(t){new f(t).addToggle()})};a.addListeners({"page:front:ready":t,"modules:geomostpopular:ready":y(t,".js-popular-trails")})},upgradeMostPopularToGeo:function(){o.switches.geoMostPopular&&(new m).go()},showWeather:function(){o.switches.weather&&a.on("page:front:ready",function(){b.init()})},showLiveblogUpdates:function(){i.isBreakpoint({min:"desktop"})&&a.on("page:front:ready",function(){g.show()})},finished:function(){a.emit("page:front:ready")}},j=function(){k(s.makeBlocks([["f-accessibility",l.shouldHideFlashingElements],["f-snaps",_.showSnaps],["f-show-more",_.showContainerShowMore],["f-container-toggle",_.showContainerToggle],["f-geo-most-popular",_.upgradeMostPopularToGeo],["f-lazy-load-containers",p],["f-stocks",d],["f-sponsorship",w],["f-weather",_.showWeather],["f-live-blog-updates",_.showLiveblogUpdates],["f-finished",_.finished]]),function(t){t()})};return{init:j}});
//# sourceMappingURL=facia.js.map