!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){!function(b){"use strict";if(b&&b.analytics){var c=a("./events/core.js")(),d=a("./events/listeners.js")(),e=a("./tracking/api"),f=a("./utils/core");f.chooseEnvironment(),b.analytics.modules=b.analytics.modules||["Business Development Analytics","Tealium"];a("./modules/bizdev/gaBizDev.js"),a("./modules/tealium/tealium.js");b.analytics.dataLayer&&e.dispatch("trackPageView",b.analytics.dataLayer),d.add(c),window.lp.analytics.api={trackEvent:function(a){e.dispatch("trackEvent",a)},trackPageView:function(a){e.dispatch("trackPageView",a)}}}}(window.lp)},{"./events/core.js":2,"./events/listeners.js":3,"./modules/bizdev/gaBizDev.js":6,"./modules/tealium/tealium.js":9,"./tracking/api":10,"./utils/core":11}],2:[function(a,b,c){b.exports=function(){"use strict";var b=function(){var b=this,c=a("../tracking/api.js"),d=a("../utils/core");this.inProgress=!1,this.inlineEvent=function(a){if(!b.inProgress){var c=d.closest(a.srcElement||a.target,"data-lpa-category"),e=c?b.enhanceData(b.getData(c)):!1;if("click"===a.type&&c&&c.getAttribute("data-lpa-form"))return;e&&e.action&&(b.debounceNavigation(a,c),b.track(e))}},this.customEvent=function(a){a=b.enhanceData(a),a&&a.action&&b.track(a)},this.track=function(a){c.dispatch("trackEvent",a)},this.debounceNavigation=function(a,c){"_blank"!=c.getAttribute("target")&&("submit"===a.type||"click"===a.type&&"a"===c.nodeName.toLowerCase())&&(b.inProgress=!0,a.preventDefault?a.preventDefault():a.returnValue=!1,setTimeout(function(){if(c[a.type])c[a.type]();else{var d=document.createEvent("MouseEvents");d.initMouseEvent(a.type,!0,!0,window),c.dispatchEvent(d)}setTimeout(function(){b.inProgress=!1},500)},250))},this.getData=function(a){var b,c,d=0,e={},f=["category","action","value","label","noninteraction"],g=f.length;for(d;g>d;d++)b=a.getAttribute("data-lpa-"+f[d]),b&&(c=f[d],e[c]=b);return e},this.enhanceData=function(a){return a?(b[a.category]&&(a=b[a.category].call(this,a)),a.value&&"product"!==a.category&&(a.value=Math.round(a.value)),a):!1}},c=a("./variations.js");c.call(b.prototype);var d=new b;return d}},{"../tracking/api.js":10,"../utils/core":11,"./variations.js":4}],3:[function(a,b,c){b.exports=function(){"use strict";var b=a("../utils/core");return{add:function(a){b.bind(document,["click","submit"],a.inlineEvent),b.bind(document,[":analytics/track"],function(b,c){a.customEvent(c||b.data)})}}}},{"../utils/core":11}],4:[function(a,b,c){b.exports=function(){"use strict";var b=function(){var b=a("../utils/core"),c=function(a){return a.label?a:!1},d=function(a){return a.label=b.normaliseSearchParams(a.params),a.partner&&(a.action+="-partner-click"),a},e=function(a,c){return a.label=b.normaliseFilterParams(a,c),a},f=function(a){return a.params&&"book-now-partner-click"==a.action?(a.label=a.params.tourName+"|"+a.params.partnerName,a.value=a.params.value):a="search"==a.action?d(a):"filter"==a.action?e(a,"poi"):c(a),a},g=function(a){return"book-now-partner-click"==a.action&&a.params?(a.label=[a.params.startDate,a.params.endDate,a.params.travellers,a.params.currency,b.getSlug(),a.params.partnerName].join("|"),a.value=a.params.value):"search"==a.action?a=d(a):"filter"==a.action?a=e(a,"hotels"):a.label=a.label||b.getSlug(),a};return this.social=function(a){return a.label=b.getUrl(),a},this.flights=function(a){return"book-now-partner-click"==a.action&&a.params?(a.label=a.params.locationStart+"|"+a.params.locationEnd,a.value=a.params.value):"search"==a.action&&(a=d(a)),a},this.advertising=function(a){return a.noninteraction=1,a},this.product=function(a){return"slim-view"==a.action&&(a.label=b.rollUpProductNames(a.params),a.noninteraction=1),a},this.tours=f,this.activities=f,this["things-to-do"]=f,this["car-rental"]=d,this.lodgings=g,this.hotels=g,this.merchandising=c,this.competition=c,this};return b}()},{"../utils/core":11}],5:[function(a,b,c){b.exports=function(b){"use strict";if(b){var c={cdms:{}},d=a("../../utils/core");if(c.cdms.location=d.getUrl(),b.summaryTag&&(b.summaryTag.context&&(c.cdms.dimension1=b.summaryTag.context),b.summaryTag.content_topic&&(c.cdms.dimension2=b.summaryTag.content_topic),b.summaryTag.context_id&&(c.cdms.dimension3=b.summaryTag.context_id),b.summaryTag.content_id&&(c.cdms.dimension15=b.summaryTag.content_id),b.summaryTag.content_type&&(c.cdms.dimension16=b.summaryTag.content_type),b.summaryTag.interest_tag&&(c.cdms.dimension17=b.summaryTag.interest_tag)),b.detailsTag&&b.detailsTag.length){var e=0,f=b.detailsTag.length;for(e;f>e;e++){var g=b.detailsTag[e];if("products"==g.type){for(var h=g.products,i=[],j=0;j<h.length;j++)i.push(h[j].cat+":"+g.products[j].sku);c.cdms.dimension5=i.join("|")}}}return c.cdms}}},{"../../utils/core":11}],6:[function(a,b,c){var d=a("../../tracking/api.js"),e=a("./_enhance.js");b.exports=function(){"use strict";if(!window.lp.bizdev)return!1;var a=d.modules().create("Business Development Analytics"),b="lonelyplanet.com",c="UA-11222786-3";a.registerAction("trackEvent",function(a){ga("bd.set","nonInteraction",!0),ga("bd.send","event",a.category,a.action,a.label,a.value,a.eventObj)}),a.registerAction("trackPageView",function(a){ga("bd.send","pageview",e(a))}),a.registerAction("setVariable",function(a){ga("bd.set",a.name,a.value)}),a.loadScript(function(){!function(a,b,c,d,e,f,g){a.GoogleAnalyticsObject=e,a[e]=a[e]||function(){(a[e].q=a[e].q||[]).push(arguments)},a[e].l=1*new Date,f=b.createElement(c),g=b.getElementsByTagName(c)[0],f.async=1,f.src=d,g.parentNode.insertBefore(f,g)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create",c,b,{name:"bd"}),ga("bd.require","displayfeatures"),ga("bd.require","linkid","linkid.js"),ga("bd.require","ec")})}()},{"../../tracking/api.js":10,"./_enhance.js":5}],7:[function(a,b,c){var d=a("utils/mixit");b.exports=function(a){"use strict";var b={advertising:{"loaded-without-adblock":{category:"Advertising",action:"Loaded",label:"With Adblock"}},account:{newsletter:{category:"Account",action:"Subscribe",label:"Newsletter"}},"page view":{"modal location override":{action:"Location Override",content_group_1:window.utag_data.content_group_1,content_group_2:window.utag_data.content_group_2,cd6_SiteSection:window.utag_data.cd6_SiteSection,cd7_Topic:window.utag_data.cd7_Topic,cd9_TestExperience:window.utag_data.cd9_TestExperience},"map location override":{action:"Location Override",content_group_1:window.utag_data.content_group_1,content_group_2:"maps",cd6_SiteSection:window.utag_data.cd6_SiteSection,cd7_Topic:window.utag_data.cd7_Topic,cd9_TestExperience:window.utag_data.cd9_TestExperience}},activities:function(a){return"book-now-partner-click"===a.action?{category:"Partner Click",action:{tour:a.label.split("|")[0],partner:a.label.split("|")[1]}}:{}},"server error":function(a){return{category:"Errors",action:"Error Page",label:"Error: "+a.action}},"sign-in":function(a){return{category:"Account",action:"Sign-In",label:a.action||""}},"sign-up":function(a){return{category:"Account",action:"Sign-Up",label:a.action||""}}};return function(a){if(!a.category||!a.action)return a;var c=b[a.category.toLowerCase()],e=a;if(c)switch(typeof c){case"object":for(var f in c)if(a.action.toLowerCase()===f){e=d({},c[f],a);break}break;case"function":e=d({},c.call(this,a),a)}return e}(a)}},{"utils/mixit":13}],8:[function(a,b,c){var d=a("../../utils/core.js");b.exports={utagDomain:function(){"use strict";var a=d.getDomain();return a.match(/shop|secure/)?"shop.lonelyplanet.com":"lonelyplanet.com"},sendEvent:function(a,b){"use strict";if(window.utag&&"function"==typeof window.utag[a])switch(a){case"link":window.utag.link({ga_event_category:b.category,ga_event_action:b.action,ga_event_label:b.label});break;case"view":window.utag.view({ga_location_override:b.label})}}}},{"../../utils/core.js":11}],9:[function(a,b,c){var d=a("../../tracking/api.js"),e=a("./_enhance_events.js"),f=a("./_helpers.js").sendEvent,g=a("./_helpers.js").utagDomain;b.exports=function(){"use strict";if(window.lp.bizdev)return!1;var a=d.modules().create("Tealium");return a.registerAction("trackEvent",function(a){"Page View"===a.category?f("view",e(a)):f("link",e(a))}),a.registerAction("trackPageView",function(a){if(a.events)for(var b=0;b<a.events.length;b++)f("link",a.events[b])}),a.registerAction("debug",function(a,b){console.log(a,JSON.stringify(e(b)))}),a.loadScript(function(){var a=d.isDevMode()?"dev":"prod";!function(b,c,d,e){b="//tags.tiqcdn.com/utag/lonelyplanet/"+g()+"/"+a+"/utag.js",c=document,d="script",e=c.createElement(d),e.src=b,e.type="text/java"+d,e.async=!0,b=c.getElementsByTagName(d)[0],b.parentNode.insertBefore(e,b)}()}),a}()},{"../../tracking/api.js":10,"./_enhance_events.js":7,"./_helpers.js":8}],10:[function(a,b,c){b.exports=function(){"use strict";function a(a){this.name=a,this.loaded=!1,this._actions={}}var b={};a.prototype.registerAction=function(a,b){this._actions[a]=b},a.prototype.loadScript=function(a){var c;for(c=0;c<lp.analytics.modules.length;c++)lp.analytics.modules[c]===this.name&&(a.call(window),b[this.name].loaded=!0)};var c={create:function(c){return b[c]=new a(c),b[c]},loaded:function(){return b}},d={dispatch:function(){var a=Array.prototype.slice.call(arguments),c=this.isDevMode()?"debug":a.shift();for(var d in b)b.hasOwnProperty(d)&&b[d]._actions[c]&&b[d].loaded&&b[d]._actions[c].apply(b[d],a)},modules:function(){return c},isDevMode:function(){return document.cookie.match(/lpDev/)}};return d}()},{}],11:[function(a,b,c){b.exports=function(){"use strict";var b=a("./parseUri");return{getSlug:function(){return window.location.pathname},getUrl:function(){return window.location.href},getReferrer:function(){return document.referrer},getParams:function(){return b(this.getUrl()).queryKey},getDomain:function(){return b(this.getUrl()).authority},chooseEnvironment:function(){if(this.getParams().hasOwnProperty("gaDev")){var a="true"===this.getParams().gaDev?"lpDev=true":"lpDev=false";document.cookie=a}},bind:function(a,b,c){var d,e;for(d=0,e=b.length;e>d;d++)window.attachEvent?a.attachEvent("on"+b[d],c):a.addEventListener(b[d],c,!1)},closest:function(a,b){for(;a;){if(a.getAttribute(b))return a;a=a.parentElement}return!1},removeProp:function(a,b){var c,d={};for(c in a)a.hasOwnProperty(c)&&c!==b&&(d[c]=a[c]);return d},rollUpProductNames:function(a){var b=0,c=[];for(b;b<a.length;b++)c.push(a[b].cat+":"+a[b].sku);return c.join("|")},rollUpProductUnits:function(a){var b=0,c=0;for(b;b<a.length;b++)c+=a[b].units;return c},normaliseSearchParams:function(a){var b=0,c=[],d=["locationStart","activityType","locationEnd","startDate","endDate","travellers","currency","cabinclass","locationResidence"],e=d.length;for(b;e>b;b++)a[d[b]]&&c.push(a[d[b]]);return c.join("|")},normaliseFilterParams:function(a,b){var c=0,d={hotels:["type","price","recommendations","facilities","location"],poi:["type","lower_price","upper_price","lower_duration","upper_duration","offers"]},e=d[b],f=[];for(c;c<e.length;c++)f.push(a.params[e[c]]||"");return f.join("|")}}}()},{"./parseUri":12}],12:[function(a,b,c){b.exports=function(){function a(b){for(var c=a.options,b=c.parser[c.strictMode?"strict":"loose"].exec(b),d={},e=14;e--;)d[c.key[e]]=b[e]||"";return d[c.q.name]={},d[c.key[12]].replace(c.q.parser,function(a,b,e){b&&(d[c.q.name][b]=e)}),d}return a.options={strictMode:!1,key:"source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},a}()},{}],13:[function(a,b,c){b.exports=function d(a){"use strict";for(var b=function(a,b){return hasOwnProperty.call(a,b)},c=Array.prototype.slice.call(arguments,1),e=0,f=c.length;f>e;e+=1){var g=c[e];for(var h in g)b(g,h)&&(b(a,h)?"object"==typeof g[h]&&"object"==typeof a[h]&&(a[h]=d(a[h],g[h])):a[h]=g[h])}return a}},{}]},{},[1]);