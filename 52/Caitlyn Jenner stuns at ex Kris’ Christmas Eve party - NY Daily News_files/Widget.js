/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */

/*! matchMedia() polyfill - Test a CSS media type/query in JS. Authors & copyright (c) 2012: Scott Jehl, Paul Irish, Nicholas Zakas. Dual MIT/BSD license */

/*! NOTE: If you're already including a window.matchMedia polyfill via Modernizr or otherwise, you don't need this part */

/*! Respond.js v1.1.0: min/max-width media query polyfill. (c) Scott Jehl. MIT/GPLv2 Lic. j.mp/respondjs  */

/*  SWFObject v2.2 <http://code.google.com/p/swfobject/> 
    is released under the MIT License <http://www.opensource.org/licenses/mit-license.php> 
*/

/*!
	 * jQuery resize event - v1.1 - 3/14/2010
	 * http://benalman.com/projects/jquery-resize-plugin/
	 * 
	 * Copyright (c) 2010 "Cowboy" Ben Alman
	 * Dual licensed under the MIT and GPL licenses.
	 * http://benalman.com/about/license/
	 */

// Copyright (c) 2010 "Cowboy" Ben Alman,

// Dual licensed under the MIT and GPL licenses.

// http://benalman.com/about/license/

/**
 * FastClick: Set up handling of fast clicks
 *
 * On touch WebKit (eg Android, iPhone) onclick events are usually 
 * delayed by ~300ms to ensure that they are clicks rather than other
 * interactions such as double-tap to zoom.
 *
 * To work around this, add a document listener which converts touches
 * to clicks on a global basis, excluding scrolls and gestures.  The 
 * default click events are then cancelled to prevent double-clicks.
 *
 * This function automatically adapts if no action is required (eg if 
 * touch events are not supported), and also handles functionality such
 * as preventing actions in the page while the section selector
 * is displaying.
 *
 * One alternative is to use ontouchend events for everything, but that
 * prevents non-touch interaction, and
 * requires checks everywhere to ensure that a touch wasn't a 
 * scroll/swipe/etc.
 *
 * ------
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the 
 * "Software"), to deal in the Software without restriction, including 
 * without limitation the rights to use, copy, modify, merge, publish, 
 * distribute, sublicense, and/or sell copies of the Software, and to 
 * permit persons to whom the Software is furnished to do so, subject 
 * to the following conditions:
 * 
 * The below copyright notice and this permission notice shall be 
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF 
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND 
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS 
 * BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN 
 * ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN 
 * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE 
 * SOFTWARE.
 *
 * @licence MIT License (http://www.opensource.org/licenses/mit-license.php)
 * @copyright (c) 2011 Assanka Limited
 * @author Rowan Beentje <rowan@assanka.net>, Matt Caruana Galizia <matt@assanka.net>
 */

/*! Backstretch - v2.0.4 - 2013-06-19
* http://srobbin.com/jquery-plugins/backstretch/
* Copyright (c) 2013 Scott Robbin; Licensed MIT */

/*!

	    Copyright (c) 2011 Peter van der Spek

	    Permission is hereby granted, free of charge, to any person obtaining a copy
	    of this software and associated documentation files (the "Software"), to deal
	    in the Software without restriction, including without limitation the rights
	    to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
	    copies of the Software, and to permit persons to whom the Software is
	    furnished to do so, subject to the following conditions:

	    The above copyright notice and this permission notice shall be included in
	    all copies or substantial portions of the Software.

	    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
	    IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
	    FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
	    AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
	    LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
	    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
	    THE SOFTWARE.

	 */

/**
 * BxSlider v4.1 - Fully loaded, responsive content slider
 * http://bxslider.com
 *
 * Copyright 2012, Steven Wanderski - http://stevenwanderski.com - http://bxcreative.com
 * Written while drinking Belgian ales and listening to jazz
 *
 * Released under the WTFPL license - http://sam.zoy.org/wtfpl/
 */

/* ========================================================
	 * bootstrap-tab.js v2.3.2
	 * http://twitter.github.com/bootstrap/javascript.html#tabs
	 * ========================================================
	 * Copyright 2012 Twitter, Inc.
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * ======================================================== */

/**
* simplePagination.js v1.5
* A simple jQuery pagination plugin.
* http://flaviusmatis.github.com/simplePagination.js/
*
* Copyright 2012, Flavius Matis
* Released under the MIT license.
* http://flaviusmatis.github.com/license.html
*/

/*
 
 bootpag - jQuery plugin for dynamic pagination

 Copyright (c) 2013 botmonster@7items.com

 Licensed under the MIT license:
   http://www.opensource.org/licenses/mit-license.php

 Project home:
   http://botmonster.com/jquery-bootpag/

 Version:  1.0.4

*/

Ndn_Require.define("models/Ndn/Widget/CssInjector",["jquery","underscore","require"],function(e,t,i){var n=["VideoPlayer/Inline590","VideoPlayer/Inline300","VideoLauncher/Playlist300x250","VideoLauncher/Horizontal","VideoLauncher/VerticalTower"],o=_nw2e.appUrl,a={};return{isCssFileInjected:function(e){return!!a[e]},getCssFilesNeeded:function(e){var i=["NdnEmbed","NdnEmbed2"];return e&&t.contains(n,e)&&i.push("models/Ndn/Widget/"+e+"Model"),i},injectCssFiles:function(t){Ndn_Require.require(["models/Ndn/Widget"],e.proxy(function(i){if(i.isBuilt())for(var n=0;n<t.length;n++){var r=t[n],s=o+"/css/"+r+".css";this.isCssFileInjected(r)||(document.createStyleSheet?document.createStyleSheet(s):e("head").append('<link rel="stylesheet" type="text/css" href="'+s+'" />'),a[r]=!0)}else{for(var n=0;n<t.length;n++){var r=t[n],s=o+"/less/"+r+".less";this.isCssFileInjected(r)||(e("head").append('<link rel="stylesheet/less" type="text/css" href="'+s+'" />'),a[r]=!0)}e("head").append('<script src="'+o+'/js/lib/less.js"></script>')}},this))},injectCss:function(e){this.injectCssFiles(this.getCssFilesNeeded(e))}}}),Ndn_Require.define("models/Ndn/PlayerServices/Cache",["backbone","jquery"],function(e,t){var i={},n={};return{cachePlaylistData:function(e,n){if(e.playlistId){var o="undefined"==typeof i[e.playlistId]||!i[e.playlistId].isCompletedLoaded&&i[e.playlistId].items.length<e.items.length;o&&(e.isCompletelyLoaded=e.items.length<n,i[e.playlistId]=e,t.each(e.items,t.proxy(function(e,t){this.cacheVideoData(t)},this)))}},getPlaylistData:function(e,t){return"undefined"!=typeof i[e]&&(i[e].isCompletelyLoaded||i[e].items.length>=t)?i[e]:null},cacheVideoData:function(e){"undefined"==typeof n[e.videoId]&&(n[e.videoId]=e)},getVideoData:function(e){return"undefined"!=typeof n[e]?n[e]:void 0},getCache:function(){return n}}}),Ndn_Require.define("models/Ndn/PlayerServices/Parser",["backbone","jquery"],function(e,t){return{stripStringOfHtml:function(e){var t=/(<([^>]+)>)/gi;return e.replace(t,"")},getAssetBaseUrl:function(e){var t={producerLogo:["http://assets.newsinc.com","https://assets-s.newsinc.com"],stillFrame:["http://content-img.newsinc.com","https://content-img-s.newsinc.com"],thumbnail:["http://content-img.newsinc.com","https://content-img-s.newsinc.com"],subtitle:["http://content.newsinc.com","https://content-s.newsinc.com"],"video/mp4":["http://content-mp4.newsinc.com","https://content-s.newsinc.com"],"application/x-mpeg":["http://ndn_mp4-vh.akamaihd.net","https://ndn_mp4-vh.akamaihd.net"],"application/x-mpegURL":["http://ndnmedia-vh.akamaihd.net","https://ndnmedia-vh.akamaihd.net"],"video/f4m":["http://ndnmedia-vh.akamaihd.net","https://ndnmedia-vh.akamaihd.net"],"video/x-flv":["rtmp://cp98516.edgefcs.net","rtmp://cp98516.edgefcs.net"],"video/progressive":["http://ndnmedia-a.akamaihd.net","https://ndnmedia-a.akamaihd.net"]};return"undefined"!=typeof t[e]?t[e]["http:"==window.location.protocol?0:1]:void 0},prettifyVideoDuration:function(e){var t=parseInt(e,10);t=0>t?0:t;var i=Math.floor(t/60),n=i>59?n=Math.floor(i/60):n,o=t%60;return o=10>o?"0"+o:o,n>0&&"undefined"!=n?(i%=60,i=10>i?"0"+i:i,t=n+":"+i+":"+o):t=i+":"+o,t}}}),Ndn_Require.define("models/Ndn/PlayerServices",["jquery","underscore","require","models/Ndn/PlayerServices/Cache","models/Ndn/PlayerServices/Parser","models/Ndn/Utils/UrlParser","models/Ndn/App","models/Ndn/Debugger"],function(e,t,i,n,o,a,r,s){var l=function(e){for(var i={videoId:e.ContentID,videoTitle:o.stripStringOfHtml(e.Name),description:o.stripStringOfHtml(e.Description),antiKeywords:e.AKW,publishedOn:e.PubDate,hasDynamicStillImages:!1,mediaContent:[],subtitles:[],provider:{id:e.CPID,trackingGroup:e.ContentPartnerID,name:e.ProducerName,category:e.ProducerCategory,logoUrl:o.getAssetBaseUrl("producerLogo")+e.ProducerLogo},settings:{share:{embedCode:{enabled:!!e.EmbedCodeAccessible}}}},n=[],a=0;a<e.Assets.length;a++){var s=e.Assets[a];if("src"==s.AssetType)n.push(s);else if("stillFrame"==s.AssetType)i.stillImageUrl=o.getAssetBaseUrl("stillFrame")+s.AssetLocation;else if("StillFrameXL"==s.AssetType)i.stillImageXLUrl=o.getAssetBaseUrl("stillFrame")+s.AssetLocation;else if("thumbnail"==s.AssetType)i.thumbnailUrl=o.getAssetBaseUrl("thumbnail")+s.AssetLocation;else if(t.contains(["closedcaption","smpte-tt","vtt"],s.AssetType)){var l="vtt"==s.AssetType?"text/vtt":"application/ttml+xml";i.subtitles.push({type:l,language:"en-us",url:o.getAssetBaseUrl("subtitle")+s.AssetLocation})}else"kraken"==s.AssetType&&(i.hasDynamicStillImages=!0)}var d=t.sortBy(n,function(e){return e.AssetSortOrder}),c=function(){for(var e,t=0;t<d.length;t++)"video/progressive"==d[t].AssetMimeType&&(e=d[t].AssetLocation);return function(t){return"video/f4m"==t.AssetMimeType&&r.isOnSsl()?o.getAssetBaseUrl("video/progressive")+e:o.getAssetBaseUrl(t.AssetMimeType)+t.AssetLocation}}();return i.mediaContent=t.map(d,function(e){return{type:"video/progressive"!=e.AssetMimeType?e.AssetMimeType:"video/mp4",medium:"video",duration:e.Duration,url:c(e)}}),i.displayDuration=o.prettifyVideoDuration(i.mediaContent[0].duration),i},d=function(e,i){var n=[];return t.each(e,function(e){if(9999999!==e.playlistid){var o={playlistId:e.playlistid,title:e.Title,items:[]},a=t.sortBy(e.Contents,function(e){return e.ContentOrder});t.each(a,function(e){o.items.push(l(e))}),o.items=t.first(o.items,i),n.push(o)}}),n},c=function(i,n){var o,a=i.LandingURL&&"http://landing.newsinc.com/shared/video.html"!=i.LandingURL?i.LandingURL:"http://launch.newsinc.com/share.html",s=function(){var t=i.LandingPageAllowed?"studio":"popup";return"studio"==t||r.isEmbeddedByIframe()||e.each(i.DeliverySettings,function(){return"launchModal"==this.Name&&"true"==this.Value||r.getSetting("launchModalEmbeds")?(t="modal",!1):void 0}),t}(),c="studio"==s?a:"http://"+r.getAppDomain()+"/",u=function(t){var n;return e.each(i.DeliverySettings,function(){return this.Name==t?(n=this.Value,!1):void 0}),n},p=function(e,t){var i=u(e);return"undefined"!=typeof i?parseInt(i):t},h=function(e,t){var i=u(e);return"string"==typeof i?"true"==i.toLowerCase()||"1"==i.toLowerCase():t},g={continuousPlay:parseInt(r.getSetting("rmmContinuousPlay"))||u("rmm_cp")&&parseInt(u("rmm_cp"))||0,continuousPlayPercentage:parseInt(r.getSetting("rmmContinuousPlayPercentage"))||u("rmm_cp_percent")&&parseInt(u("rmm_cp_percent")),earlyContent:r.getSetting("rmmEarlyContent")||h("rmmEarlyContent",!1)},m={playlists:{},associatedPlaylists:[],defaultWidgetConfig:{widgetId:i.WidgetID,trackingGroup:i.TrackingGroup,type:"VideoPlayer/Single",siteSection:i.SiteSectionName,autoPlay:!i.DisableVideoPlayOnLoad,continuousPlay:i.ContinuousPlay,videoId:"",playlistId:"",adsEnabled:!i.DisableAds,rmmSoundOn:!1,playOnMouseover:!!i.PlayOnMouseover||!1,playOnInView:!1,hideWhenUnavailable:!1,splitVersion:i.Ptr?"VideoPlayer/PTR":""},ptr:i.Ptr||0,launchToStudio:{enabled:i.LandingPageAllowed,url:i.LandingURL},settings:{analytics:{chartbeat:{enabled:r.getSetting("chartbeatAnalytics")||"true"==u("analytics_chartbeat"),uid:parseInt(r.getSetting("chartbeatAnalyticsUid")||u("analytics_chartbeat_uid"))},google:{enabled:r.getSetting("googleAnalytics")||"true"==u("deliverGA")},comscore:{vme:{enabled:!1}}},behavior:{provided:{ptr:{enabled:!!i.Ptr,previewLength:p("ptr_preview_length",30),playsInIframe:"true"==u("ptr_iframe")},rmm:g,"float":{enabled:!!u("float_player"),initialPosition:u("float_player")},playOnInViewToggle:{enabled:r.getSetting("playOnInViewToggle")||h("playOnInViewToggle",!1)},forceHtmlPlayerForSlider:{siteSections:r.getSetting("forceHtmlForSections")||u("forceHtmlForSections")||""}}},rmm:{provided:g},muteInterval:function(){var t;return e.each(i.DeliverySettings,function(){return"muteInterval"==this.Name?(t=parseInt(this.Value),!1):void 0}),t}(),launcher:{behavior:s,landingPageUrl:c},share:{enabled:!i.DisableSocialNetworking&&!i.DisableSingleEmbed,email:{enabled:!i.DisableSocialNetworking},socialNetworks:{enabled:!i.DisableSingleEmbed},directLink:{landingPageUrl:a}},ads:{enabled:!i.DisableAds,server:i.AdServer},dfp:function(){function e(e){var t;return(t=e.match(/_(\d+)$/))?t[1]:void 0}var t,n=!1;return i.Dfp?(i.Dfp.Substituted?(n=!0,t={accountNumber:i.Dfp.Substituted.Account,adOwnershipGroupId:i.Dfp.Substituted.OwnershipGroup,adTrackingGroupId:i.Dfp.Substituted.TrackingGroup},t.adTrackingGroupId!=i.Dfp.Direct.TrackingGroup&&(t.unused={adTrackingGroupId:i.Dfp.Direct.TrackingGroup,adTrackingGroupNumber:e(i.Dfp.Direct.TrackingGroup)||"",reason:i.Dfp.SubstitutedReason||""})):t={accountNumber:i.Dfp.Direct.Account,adOwnershipGroupId:i.Dfp.Direct.OwnershipGroup,adTrackingGroupId:i.Dfp.Direct.TrackingGroup},t.adTrackingGroupNumber=e(t.adTrackingGroupId)||"",t.isSafeViralOverride=n,t):{}}(),auditude:{trackingGroupAuditudeId:i.ZoneID,enableGoogleAds:function(){var t;return e.each(i.DeliverySettings,function(){return"GoogleExtURL"==this.Name?(t="true"==this.Value,!1):void 0}),t}()}},distributor:{name:i.DistributorName},zoneId:i.ZoneID,siteSection:i.SiteSectionName},f=d(i.Playlists,n);return t.each(f,function(e){m.associatedPlaylists.push({id:e.playlistId,label:e.title}),e.items.length&&(o=e.playlistId,m.playlists[o]=e)}),m.defaultWidgetConfig.playlistId=o,t.each(i.Playlists,function(e){if(9999999==e.playlistid&&e.Contents[0]){for(var t=e.Contents[0],i=m.playlists[o].items,n=0;n<i.length;n++){var a=i[n];if(a.videoId==t.ContentID){m.videoIndex=n;break}}"undefined"==typeof m.videoIndex&&(m.videosData=m.videosData||[],m.videosData.push(l(t)))}if(-1===e.playlistid)for(var n=0;n<e.Contents.length;n++){var t=e.Contents[n];m.videosData=m.videosData||[],m.videosData.push(l(t))}}),m},u={getBaseUrl:function(e){return"undefined"==typeof e&&(e=a.getUrlVar("ndn_playerServicesEnv")||""),e=e.replace(/[^A-Za-z0-9-_]/g,""),"//"+(e?e+"-":"")+"lps.newsinc.com"},getEndpointUrl:function(e,t,i,n,o,a,s,l){var d=this.getBaseUrl(),c="&insid="+(r.getPageViewSessionId()||"")+"&uut="+(r.getUniqueUserId()||"")+"&embedIndex="+e.get("embedIndex")+"&ver="+r.getBuild()+"&benv="+r.getEnv()+"&embedOriginUrl="+encodeURIComponent(r.getEmbedOriginUrl());if(s&&l)return d+"/player/show/"+s+"/"+l+"?trackingGroupId="+(i?i:"0")+"&widgetId="+(t?t:"0")+"&playlistId="+(n?n:"0")+c;var u=this.getItemLimit(a);return d+"/player/show/"+(i||"0")+"/"+(t||"0")+"/"+(n||"0")+"/"+(o||"0")+"/3"+(u?"/"+u:"")+"?d="+(new Date).getTime()+c},getItemLimit:function(e){return e&&40>=e?t.contains([1,3],e)||(e=e>15?40:15):e=null,e},fetchData:function(t,i,o,a,r,l){return e.Deferred(e.proxy(function(d){var u=t.get("config");o||(o=t.get("playlistItemsLimit")),e.ajax({type:"GET",url:this.getEndpointUrl(t,u.widgetId,u.trackingGroup,i||u.playlistId,a||u.videoId,o,r,l),contentType:"json",dataType:"jsonp"}).done(function(t){if(s.inMode("playerServices")&&console.log("[Ndn_PlayerServices] Response:",t),!t||!t.Playlists)return d.reject();var i=c(t,o);s.inMode("playerServices")&&console.log("[Ndn_PlayerServices] Parsed response:",i),e.each(i.playlists,function(){n.cachePlaylistData(this,o)}),i.videosData&&e.each(i.videosData,function(){n.cacheVideoData(this)}),d.resolve(i)}).fail(function(){d.reject({reason:r||l?"storyVideoUnavailable":""})})},this)).promise()},getWidgetSettings:function(e){var t=e.get("config");return this.fetchData(e,null,null,null,t.providerId,t.providerStoryId)},getPlaylistData:function(t,i,o){return e.Deferred(e.proxy(function(a){"undefined"==typeof o&&(o=i.get("playlistItemsLimit"));var r=n.getPlaylistData(t,o);r?a.resolve(r):this.fetchData(i,t).done(e.proxy(function(){r=n.getPlaylistData(t,o),r?a.resolve(r):a.reject()},this)).fail(a.reject)},this)).promise()},getVideoData:function(t,i){return e.Deferred(e.proxy(function(o){var a=n.getVideoData(t);a?o.resolve(a):this.fetchData(i,null,1,t).done(e.proxy(function(){a=n.getVideoData(t),a?o.resolve(a):o.reject()},this)).fail(o.reject)},this)).promise()}};return u}),Ndn_Require.define("models/Ndn/Widget/PlayerOptions",["jquery","backbone","models/Ndn/Utils/BrowserStorage","models/Ndn/Utils/UserAgent"],function(e,t,i,n){var o=[],a=t.Model.extend({defaults:{product:null,container:null,autoplay:null},initialize:function(t){this.set({product:t}),this.initializeDom(),this.synchronizeInterface(),this.initializeEventListeners(),a.registerComponent(this),t.on("widgetEmbedEnd",e.proxy(function(){this.get("container").insertAfter(t.getContainerElement())},this))},initializeDom:function(){var t=this.get("product").getContainerElement(),i=e('<div class="ndn_playerOptions"><b>Autoplay:</b> <a href="#" data-autoplay="on">On</a> | <a href="#" data-autoplay="off">Off</a></div>').css("width",t.width());this.set("container",i)},initializeEventListeners:function(){this.get("container").on("click","a",function(t){return e(this).hasClass("ndn_selected")||a.setIsPlayOnInViewAlwaysOnForSinglePlayers("on"==e(this).data("autoplay")),a.synchronizeAllInterfaces(),t.preventDefault(),!1})},synchronizeInterface:function(){var t=this.get("container"),i=a.getPlayOnInViewToggleForSinglePlayers();t.find("a").each(function(){e(this).toggleClass("ndn_selected","on"==e(this).data("autoplay")&&i||"on"!=e(this).data("autoplay")&&!i)})}},{registerComponent:function(e){o.push(e)},synchronizeAllInterfaces:function(){e.each(o,function(){this.synchronizeInterface()})},getPlayOnInViewToggleForSinglePlayers:function(){return n.isDesktop()&&"false"!=i.get("playOnInViewForSinglePlayers")},setIsPlayOnInViewAlwaysOnForSinglePlayers:function(e){i.set("playOnInViewForSinglePlayers",e?"true":"false")}});return a}),Ndn_Require.define("models/Ndn/Legacy/Config/Ap",["jquery"],function(e){var t={1153168:"90703",1296344:"90416",10003188:"90693",TXABI:"90459",PAALM:"90364",GASTA:"90683",TXAMA:"90582",ARLID:"90554",GAATH:"90604",GAAUG:"90612",TXAUS:"90105",MTBOZ:"90721",PABUT:"90433",FLCAP:"90364",TXCOR:"90550",VACUL:"90527",IAWEB:"90364",MIESC:"90364",VADAR:"90528",ALDOT:"90510",PAERI:"90464",IAEST:"90364",FLJAJ:"90049",NCHIC:"90518",TXHOU:"90000",NCCON:"90517",JRC:"90734",WIKEN:"90233",WABRE:"90552",MOCAG:"90589",NDMIN:"90364",FLNAP:"90542",INBNB:"90605",ALOPE:"90514",MNROC:"90379",VARIT:"90535",FLSAR:"90492",INSBT:"90575",MNPAU:"90156",TXSAN:"90551",CAPAS:"90494",TNMEM:"90547",MSCCD:"90135",OHFIN:"90421",OHCAM:"90249",MIHOU:"90364",MIIRO:"90364",VACHA:"90526",NCFAY:"90364",wvwhe:"90364",TNKNN:"90542",OHMAR:"90364",HIMAN:"90364",NCMAR:"90519",MIMAR:"90364",VALYD:"90532",VAWAY:"90538",SCCHA:"90349",NYJAP:"90364",OHEAS:"90249",OHSAL:"90364",ILSPR:"90108",GAGAI:"90079",WVWEI:"90364",PAWIL:"90087",NYALT:"90001",WAKR:"90412",TXWIC:"90553",NCWIN:"90522",WRKO:"90629",WSPATV:"90507",WTKKFM:"90456",PAYOK:"90732",FLMIH:"90045",WABEL:"90472",SCCOL:"90474",CAFRE:"90476",CAMOD:"90479",CASAB:"90482",WATAC:"90483",FLBRA:"90484",ILROR:"90108",MAQUI:"90108",CTNOR:"90108",MABRO:"90108",WSAW:"90447",FLTAM:"90426",NVLAS:"90277",INSID:"90531",WNCNTV:"90777",WCMHTV:"90061",OREUG:"90878",SCFLO:"90784",WJARTV:"90053",WIMIL:"90078",RIJRJ:"90446",WRGBTV:"90028",WWMTTV:"90029",ILALT:"90033",WPECTV:"90039",KTVLTV:"90042",OHLIM:"90043",AAAA:"0000",WASECA:"90667",PAYOR:"90681",GACOV:"90691",GAHIN:"90686",CASCN:"90152",CAMAN:"90690",WIEAU:"90694",MSMCC:"90695",FLNAV:"90696",LAMOR:"90697",LAFRA:"90698",SCAIK:"90699",ARFOR:"90700",MIGHT:"90702"};return{getTrackingGroupFromApPartnerId:function(e){return t[e]||"90121"},translate:function(t,i){return e.Deferred(e.proxy(function(n){var o=i;return t.f&&(o.trackingGroup=this.getTrackingGroupFromApPartnerId((t.f+"").toUpperCase()),"0"==o.widgetId&&(o.widgetId="3989")),!o.videoId&&t.g?e.ajax({type:"GET",url:window.location.protocol+"//dmeserve.newsinc.com/apids/lookup.jsonp?apvid="+t.g,dataType:"jsonp"}).then(function(e){o.videoId=e,n.resolve(o)}):void n.resolve(o)},this)).promise()}}}),Ndn_Require.define("models/Ndn/Legacy/Config/TritonLoyaltyProgram",["jquery"],function(e){return{translate:function(t,i){return e.Deferred(function(e){t.memberid=t.memberid||t.membedid||"",""!=t.memberid&&"none"!=t.memberid&&(i.loyaltyProgramId="ndntritonservice",i.loyaltyProgramData={memberId:t.memberid,siteId:t.siteid}),e.resolve(i)}).promise()}}}),Ndn_Require.define("models/Ndn/Legacy/Config",["underscore","jquery","models/Ndn/Utils/UrlParser","models/Ndn/Legacy/Config/Ap","models/Ndn/Legacy/Config/TritonLoyaltyProgram"],function(e,t,i,n,o){return{translate:function(a,r){return t.Deferred(function(s){var l=i.parseHref(a),d=l.queryParams;for(var c in d)d.hasOwnProperty(c)&&c!=c.toLowerCase()&&(d[c.toLowerCase()]=d[c],delete d.paramKey);var u=l.url.match(/^http:[\/]{2}embed\.newsinc\.com/)?l.path.toLowerCase():"",p={widgetId:d.wid,siteSection:d.sitesection||"",videoId:d.vid||d.vcid||d.spid||"",trackingGroup:d.freewheel||"",playlistId:d.cid||"",hideWhenUnavailable:"true"==d.pp_hideExpired};t.each(p,function(e){""==this&&delete p[e]});var h={"/single/embed.js":"VideoPlayer/Single","/inform/article/matching/video/embed.js":"VideoPlayer/Single","/horizontaltitle550/embed.js":"VideoLauncher/Horizontal","/inline/embed.js":"VideoPlayer/Inline300","/inlinesound/embed.js":"VideoPlayer/Inline300","/inline590/embed.js":"VideoPlayer/Inline590","/inlinesound590/embed.js":"VideoPlayer/Inline590","/toppicks/embed.js":"VideoLauncher/Slider"};if("undefined"!=typeof r)p.type=r;else if("undefined"!=typeof h[u])p.type=h[u];else{var g={slider:"VideoLauncher/Slider",plist:"VideoLauncher/Playlist300x250",vertical:"VideoLauncher/VerticalTower",horizontal:"VideoLauncher/Horizontal",horizontal400:"VideoLauncher/Horizontal",horizontal500:"VideoLauncher/Horizontal"},m=d.type||d.thumbid;"undefined"!=typeof g[m]?p.type=g[m]:e.contains(["/thumbnail/embed.js","/thumbnail/iframe.html"],u)&&(p.type="VideoLauncher/Slider")}e.contains(["/inlinesound/embed.js","/inlinesound590/embed.js","/thumbnailsound/embed.js"],u)&&(p.rmmSoundOn=!0),(d.width||d.w)&&(p.width=d.width||d.w),(d.height||d.h)&&(p.height=d.height||d.h);var f={"/horizontaltitle550/embed.js":550};"undefined"!=typeof f[u]?p.width=f[u]:"horizontal400"==d.type?p.width=425:e.contains(["horizontal","horizontal500"],d.type)&&(p.width=550);for(var y=["playlistId","widgetId","videoId","trackingGroup"],_=0;_<y.length;_++){var v=y[_];"0"==p[v]&&delete p[v]}("/single/iframe.html"!=u&&!p.type||"VideoPlayer/Single"==p.type)&&(p.width||(p.width=600),p.height||(p.height=360)),n.translate(d,p).then(function(e){return o.translate(d,e)}).fail(s.reject).done(s.resolve)}).promise()}}}),Ndn_Require.define("models/Ndn/Widget/Config",["jquery","underscore","models/Ndn/App","models/Ndn/Utils/UserAgent","models/Ndn/Utils/UrlParser","models/Ndn/Widget/PlayerOptions","models/Ndn/Legacy/Config","models/Ndn/Debugger"],function(e,t,i,n,o,a,r,s){var l=s.inMode("config"),d=["configId","distributorId","widgetId","type","trackingGroup","playlistId","videoId","placementId","placementPageId","providerId","providerStoryId","siteSection","acceptsConfigFromUrl","acceptsConfigFromUrlPrefix","loyaltyProgramId","loyaltyProgramData","legacyEmbedUrl","autoPlay","playOnMouseover","playOnInView","hideWhenUnavailable","continuousPlay","rmmSoundOn","splitVersion","adsEnabled","width","height","aspectRatio","pb"],c={"VideoPlayer/Single":{typeId:5},"VideoPlayer/16x9":{typeId:2},"VideoPlayer/Inline300":{typeId:4,typeIdForAutoPlay:13},"VideoPlayer/Inline590":{typeId:11,typeIdForAutoPlay:14},"VideoLauncher/Slider":{typeId:21},"VideoLauncher/Playlist300x250":{typeId:18},"VideoLauncher/Horizontal":{typeId:19},"VideoLauncher/VerticalTower":{typeId:20},"VideoPlayer/PTR":{typeId:21},InView:{typeId:25},"VideoPlayer/Studio":{typeId:33}},u={"videolauncher/slider300x250":"VideoLauncher/Slider","videoplayer/single":"VideoPlayer/Single","videoplayer/default":"VideoPlayer/Single"},p=function(){var e={};return t.each(c,function(t,i){e[i.toLowerCase()]=i}),e}(),h=function(e){return e.toLowerCase&&u[e.toLowerCase()]&&(e=u[e.toLowerCase()]),e};return{cleanConfig:function(i){var n=t.extend({},i);e.each(n,function(t,i){"string"==typeof n[t]&&(n[t]=e.trim(n[t]))});var o=["autoPlay","playOnMouseover","rmmSoundOn","adsEnabled","acceptsConfigFromUrl","playOnInView"];e.each(o,function(e,i){if("string"==typeof n[i]){var o=n[i];o=""==o?!0:t.contains(["true","1"],o.toLowerCase())?!0:!1,n[i]=o}else"undefined"!=typeof n[i]&&(n[i]=!!n[i])});var a=["continuousPlay","pb"];return e.each(a,function(e,t){"undefined"!=typeof n[t]&&(n[t]=parseInt(n[t]))}),e.each(n,function(e){t.contains(d,e)||delete n[e]}),n.type&&(n.type=h(n.type),n.type=p[(n.type||"").toLowerCase()],n.type&&"undefined"==typeof p[n.type.toLowerCase()]&&delete n.type),n.placementId&&(n.distributorId=n.trackingGroup),"VideoPlayer/Single"!=n.type&&delete n.pb,n},getType:function(e){return e.splitVersion||e.type},getPltValue:function(e,t){var i=c[e.splitVersion||e.type],n=t.settings.behavior;if(n["float"].enabled&&"VideoPlayer/Single"==e.type)return 24;var o=n.rmm;if(o.enabled&&o.numberOfAdCalls>1)return 22;var a=n.ptr;return"VideoPlayer/PTR"==(e.splitVersion||e.type)&&a.playsInIframe?23:e.autoPlay&&i.typeIdForAutoPlay?i.typeIdForAutoPlay:0!=e.rmmSoundOn&&i.typeIdForAutoPlay?i.typeIdForAutoPlay:i.typeId},getFinalizedConfig:function(e,t,i){var n=this.getBrowserSettings(i),o=this.processPlayerBehaviorSetting(e);return o=this.applyConfigDefaults(o,t),o=this.applyBrowserSettings(o,n),"undefined"!=typeof o.pb&&delete o.pb,o=this.processPlayerBehaviorSetting(o),l&&console.log("getFinalizedConfig(",e,", ",t,", ",i,"); config ==",o),o},applyConfigDefaults:function(e,i){var n=t.extend({},e);return delete n.adsEnabled,n=t.extend({},i,n),n.playOnMouseover&&"VideoPlayer/Single"!=n.type&&(n.playOnMouseover=!1),"InView"==n.type&&(n.widgetId="5"),n},getBrowserSettings:function(e){return{isAbleToPlayVideoAutomatically:n.isAbleToPlayVideoAutomatically(),playOnInViewToggleForSinglePlayers:a.getPlayOnInViewToggleForSinglePlayers(),playOnInViewToggleForSinglePlayersEnabled:e.settings.behavior.provided.playOnInViewToggle.enabled,hasCursor:n.hasCursor(),ableToUseEarlyContentRmm:n.isSafari()||n.isChrome()}},applyBrowserSettings:function(e,i){return l&&console.log("applyBrowserSettings(",e,", ",i),"VideoPlayer/PTR"!=e.splitVersion||t.contains(["VideoLauncher/Slider","VideoLauncher/Playlist300x250"],e.type)&&i.isAbleToPlayVideoAutomatically||(e.splitVersion=""),i.playOnInViewToggleForSinglePlayersEnabled&&"VideoPlayer/Single"==e.type&&(e.autoPlay=!1,e.playOnInView=i.playOnInViewToggleForSinglePlayers),i.isAbleToPlayVideoAutomatically||(e.autoPlay=!1,e.playOnInView=!1),i.hasCursor||(e.playOnMouseover=!1),e},getConfigFromElement:function(t,i){l&&console.log("getConfigFromElement(",t,");");var n={},o=new RegExp(this.hasUpdatedEmbedCode(t,i)?"^data-(.*)$":"^data-config-(.*)$");return e.each(t[0].attributes,function(e,t){var i;if(i=t.name.replace(/\s/g,"").toLowerCase().match(o)){var a=i[1].replace(/-(\w)/g,function(e,t){return t.toUpperCase()});n[a]=t.value}}),n.configId&&(n.widgetId=n.configId),n.configId=n.widgetId,l&&console.log("result ==",n),n},getDefaultUrlVarPrefixForConfigSettings:function(){return"ndn."},isOnForcedMigrationRedirectedLandingPage:function(e){return!o.getUrlVar("legacyEmbedUrl")&&o.getUrlVar("freewheel")&&!o.getUrlVar(e+"trackingGroup")},getConfigFromLandingPageUrl:function(t){var n=i.getAppUrlInfo(t)?"":Ndn_Widget_Config.getDefaultUrlVarPrefixForConfigSettings(),a=o.parseHref(t).queryParams,r={};return e.each(a,function(e,t){e.substr(0,n.length)==n&&(r[e.substr(n.length)]=t)}),r},processConfigFromElement:function(t,i,n){return l&&console.log("processConfigFromElement(",t,", ",i,", ",n,");"),this.process(e.extend({},this.getConfigFromElement(t,n),i||{}))},getEmbedCode:function(t,i,n){"undefined"==typeof i&&(i=!1);var o='<div class="'+(i?"ndn_embed":"inform-embed")+'"',a=i?"data-":"data-config-";return n&&(o+=' id="'+n+'"'),e.each(t,function(e,t){var i=a+e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()});o+=" "+i+'="'+t+'"'}),o+="></div>"},process:function(i){if(l&&console.log("process(",i,");"),"InView"==i.type&&(i.widgetId="5"),i=this.cleanConfig(i),l&&console.log("After cleaning config, config ==",i),i.acceptsConfigFromUrl){var n=i.hasOwnProperty("acceptsConfigFromUrlPrefix")?i.acceptsConfigFromUrlPrefix:this.getDefaultUrlVarPrefixForConfigSettings();this.isOnForcedMigrationRedirectedLandingPage(n)?i.legacyEmbedUrl||(i.legacyEmbedUrl=window.location.href+""):i=this.cleanConfig(t.extend({},o.getUrlVarsWithPrefix(n),i))}return e.Deferred(function(e){i.legacyEmbedUrl?r.translate(i.legacyEmbedUrl,i.type).done(function(n){i=t.extend(n,i),e.resolve(i)}):e.resolve(i)}).promise().always(function(e){"undefined"==typeof e.type&&(e.type=""),e.type=(e.type+"").replace(" ",""),""==e.type&&(e.type="VideoPlayer/Single")})},processPlayerBehaviorSetting:function(t){var i={0:{autoPlay:!1,playOnMouseover:!1},1:{autoPlay:!0,playOnMouseover:!1},3:{autoPlay:!1,playOnMouseover:!0}},n=e.extend({},t),o=n.pb;return"undefined"!=typeof i[o]?(n=e.extend({},n,i[o]),n.pb=o):e.each(i,function(t,i){var o=!0;return e.each(i,function(e,t){n[e]!==t&&(o=!1)}),o?(n.pb=t,!1):void 0}),n},hasUpdatedEmbedCode:function(i,n){if(n&&t.contains(n,"legacyjsapi"))return!1;var o=!0;return e.each(i[0].attributes,function(e,t){var i;if(i=t.name.replace(/\s/g,"").toLowerCase().match(/^data-config-(.*)$/)){var n=i[1].replace(/-(\w)/g,function(e,t){return t.toUpperCase()});"id"!=n&&(o=!1)}}),o},retrofitEmbedCode:function(t,i){e.each(t,function(e,t){var n="data-config-"+e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()});i.attr(n,t)})},processDefaultDimensions:function(e,i){"undefined"==typeof i&&(i=!1),l&&console.log("processDefaultDimensions(",e,", ",i,");");var n=t.extend({},e);"VideoPlayer/Single"==n.type&&!n.aspectRatio&&i&&(n.width&&n.height||(n.aspectRatio="16:9"));var o=n.aspectRatio+"";if(o.match(/:/g)){var a=o.split(":"),r=a[0],s=a[1];n.width?n.height=s+"/"+r+"w":n.height?n.width=r+"/"+s+"h":(n.width="100%",n.height=s+"/"+r+"w")}return n}}}),function(e,t){"object"==typeof exports&&exports?module.exports=t:"function"==typeof Ndn_Require.define&&Ndn_Require.define.amd?Ndn_Require.define("mustache",t):e.Mustache=t}(this,function(){function e(e,t){return _.call(e,t)}function t(t){return!e(g,t)}function i(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function n(e){return String(e).replace(/[&<>"'\/]/g,function(e){return A[e]})}function o(e){this.string=e,this.tail=e,this.pos=0}function a(e,t){this.view=e||{},this.parent=t,this._cache={}}function r(){this.clearCache()}function s(e,t,i,n){for(var o,a,r,l="",d=0,c=e.length;c>d;++d)switch(o=e[d],a=o[1],o[0]){case"#":if(r=i.lookup(a),"object"==typeof r)if(E(r))for(var u=0,p=r.length;p>u;++u)l+=s(o[4],t,i.push(r[u]),n);else r&&(l+=s(o[4],t,i.push(r),n));else if("function"==typeof r){var h=null==n?null:n.slice(o[3],o[5]);r=r.call(i.view,h,function(e){return t.render(e,i)}),null!=r&&(l+=r)}else r&&(l+=s(o[4],t,i,n));break;case"^":r=i.lookup(a),(!r||E(r)&&0===r.length)&&(l+=s(o[4],t,i,n));break;case">":r=t.getPartial(a),"function"==typeof r&&(l+=r(i));break;case"&":r=i.lookup(a),null!=r&&(l+=r);break;case"name":r=i.lookup(a),null!=r&&(l+=C.escape(r));break;case"text":l+=a}return l}function l(e){for(var t,i=[],n=i,o=[],a=0,r=e.length;r>a;++a)switch(t=e[a],t[0]){case"#":case"^":o.push(t),n.push(t),n=t[4]=[];break;case"/":var s=o.pop();s[5]=t[2],n=o.length>0?o[o.length-1][4]:i;break;default:n.push(t)}return i}function d(e){for(var t,i,n=[],o=0,a=e.length;a>o;++o)t=e[o],t&&("text"===t[0]&&i&&"text"===i[0]?(i[1]+=t[1],i[3]=t[3]):(i=t,n.push(t)));return n}function c(e){return[new RegExp(i(e[0])+"\\s*"),new RegExp("\\s*"+i(e[1]))]}function u(e,n){function a(){if(I&&!P)for(;N.length;)delete b[N.pop()];else N=[];I=!1,P=!1}if(e=e||"",n=n||C.tags,"string"==typeof n&&(n=n.split(h)),2!==n.length)throw new Error("Invalid tags: "+n.join(", "));for(var r,s,u,g,_,v=c(n),E=new o(e),A=[],b=[],N=[],I=!1,P=!1;!E.eos();){if(r=E.pos,u=E.scanUntil(v[0]))for(var S=0,T=u.length;T>S;++S)g=u.charAt(S),t(g)?N.push(b.length):P=!0,b.push(["text",g,r,r+1]),r+=1,"\n"==g&&a();if(!E.scan(v[0]))break;if(I=!0,s=E.scan(y)||"name",E.scan(p),"="===s?(u=E.scanUntil(m),E.scan(m),E.scanUntil(v[1])):"{"===s?(u=E.scanUntil(new RegExp("\\s*"+i("}"+n[1]))),E.scan(f),E.scanUntil(v[1]),s="&"):u=E.scanUntil(v[1]),!E.scan(v[1]))throw new Error("Unclosed tag at "+E.pos);if(_=[s,u,r,E.pos],b.push(_),"#"===s||"^"===s)A.push(_);else if("/"===s){if(0===A.length)throw new Error('Unopened section "'+u+'" at '+r);var w=A.pop();if(w[1]!==u)throw new Error('Unclosed section "'+w[1]+'" at '+r)}else if("name"===s||"{"===s||"&"===s)P=!0;else if("="===s){if(n=u.split(h),2!==n.length)throw new Error("Invalid tags at "+r+": "+n.join(", "));v=c(n)}}var w=A.pop();if(w)throw new Error('Unclosed section "'+w[1]+'" at '+E.pos);return b=d(b),l(b)}var p=/\s*/,h=/\s+/,g=/\S/,m=/\s*=/,f=/\s*\}/,y=/#|\^|\/|>|\{|&|=|!/,_=RegExp.prototype.test,v=Object.prototype.toString,E=Array.isArray||function(e){return"[object Array]"===v.call(e)},A={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};o.prototype.eos=function(){return""===this.tail},o.prototype.scan=function(e){var t=this.tail.match(e);return t&&0===t.index?(this.tail=this.tail.substring(t[0].length),this.pos+=t[0].length,t[0]):""},o.prototype.scanUntil=function(e){var t,i=this.tail.search(e);switch(i){case-1:t=this.tail,this.pos+=this.tail.length,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,i),this.tail=this.tail.substring(i),this.pos+=i}return t},a.make=function(e){return e instanceof a?e:new a(e)},a.prototype.push=function(e){return new a(e,this)},a.prototype.lookup=function(e){var t=this._cache[e];if(!t){if("."==e)t=this.view;else for(var i=this;i;){if(e.indexOf(".")>0){t=i.view;for(var n=e.split("."),o=0;t&&o<n.length;)t=t[n[o++]]}else t=i.view[e];if(null!=t)break;i=i.parent}this._cache[e]=t}return"function"==typeof t&&(t=t.call(this.view)),t},r.prototype.clearCache=function(){this._cache={},this._partialCache={}},r.prototype.compile=function(e,t){var i=this._cache[e];if(!i){var n=C.parse(e,t);i=this._cache[e]=this.compileTokens(n,e)}return i},r.prototype.compilePartial=function(e,t,i){var n=this.compile(t,i);return this._partialCache[e]=n,n},r.prototype.getPartial=function(e){return e in this._partialCache||!this._loadPartial||this.compilePartial(e,this._loadPartial(e)),this._partialCache[e]},r.prototype.compileTokens=function(e,t){var i=this;return function(n,o){if(o)if("function"==typeof o)i._loadPartial=o;else for(var r in o)i.compilePartial(r,o[r]);return s(e,i,a.make(n),t)}},r.prototype.render=function(e,t,i){return this.compile(e)(t,i)};var C={};C.name="mustache.js",C.version="0.7.2",C.tags=["{{","}}"],C.Scanner=o,C.Context=a,C.Writer=r,C.parse=u,C.escape=n;var b=new r;return C.clearCache=function(){return b.clearCache()},C.compile=function(e,t){return b.compile(e,t)},C.compilePartial=function(e,t,i){return b.compilePartial(e,t,i)},C.compileTokens=function(e,t){return b.compileTokens(e,t)},C.render=function(e,t,i){return b.render(e,t,i)},C.to_html=function(e,t,i,n){var o=C.render(e,t,i);return"function"!=typeof n?o:void n(o)},C}()),Ndn_Require.define("models/Ndn/LoyaltyProgram",["backbone","jquery","mustache"],function(e,t,i){var n=function(e){return"ndntritonservice"==e?"http://loyalty.newsinc.com/ndntritonservice.svc/GetCredit/{{memberId}}/{{siteId}}":void 0},o=function(e,t){n(e);return i.to_html(n(e),t)};return e.Model.extend({defaults:{id:null,customData:null,ajaxUrl:""},initialize:function(){e.Model.prototype.initialize.apply(this,arguments),this.set({ajaxUrl:o(this.get("id"),this.get("customData"))})},execute:function(){t.getJSON(this.get("ajaxUrl"),function(e){})}})}),Ndn_Require.define("lib/respond",[],function(){return window.matchMedia=window.matchMedia||function(e,t){"use strict";var i,n=e.documentElement,o=n.firstElementChild||n.firstChild,a=e.createElement("body"),r=e.createElement("div");return r.id="mq-test-1",r.style.cssText="position:absolute;top:-100em",a.style.background="none",a.appendChild(r),function(e){return r.innerHTML='&shy;<style media="'+e+'"> #mq-test-1 { width: 42px; }</style>',n.insertBefore(a,o),i=42===r.offsetWidth,n.removeChild(a),{matches:i,
media:e}}}(document),function(e){"use strict";function t(){A(!0)}var i={};if(e.respond=i,i.update=function(){},i.mediaQueriesSupported=e.matchMedia&&e.matchMedia("only all").matches,!i.mediaQueriesSupported){var n,o,a,r=e.document,s=r.documentElement,l=[],d=[],c=[],u={},p=30,h=r.getElementsByTagName("head")[0]||s,g=r.getElementsByTagName("base")[0],m=h.getElementsByTagName("link"),f=[],y=function(){for(var t=0;t<m.length;t++){var i=m[t],n=i.className,o=i.href,a=i.media,r=i.rel&&"stylesheet"===i.rel.toLowerCase();"_nw2eStyles"==n&&o&&r&&!u[o]&&(console.log("respond.js: processing styles at "+i.href),i.styleSheet&&i.styleSheet.rawCssText?(v(i.styleSheet.rawCssText,o,a),u[o]=!0):(!/^([a-zA-Z:]*\/\/)/.test(o)&&!g||o.replace(RegExp.$1,"").split("/")[0]===e.location.host)&&f.push({href:o,media:a}))}_()},_=function(){if(f.length){var t=f.shift();C(t.href,function(i){v(i,t.href,t.media),u[t.href]=!0,e.setTimeout(function(){_()},0)})}},v=function(e,t,i){var n=e.match(/@media[^\{]+\{([^\{\}]*\{[^\}\{]*\})+/gi),o=n&&n.length||0;t=t.substring(0,t.lastIndexOf("/"));var a=function(e){return e.replace(/(url\()['"]?([^\/\)'"][^:\)'"]+)['"]?(\))/g,"$1"+t+"$2$3")},r=!o&&i;t.length&&(t+="/"),r&&(o=1);for(var s=0;o>s;s++){var c,u,p,h;r?(c=i,d.push(a(e))):(c=n[s].match(/@media *([^\{]+)\{([\S\s]+?)$/)&&RegExp.$1,d.push(RegExp.$2&&a(RegExp.$2))),p=c.split(","),h=p.length;for(var g=0;h>g;g++)u=p[g],l.push({media:u.split("(")[0].match(/(only\s+)?([a-zA-Z]+)\s?/)&&RegExp.$2||"all",rules:d.length-1,hasquery:u.indexOf("(")>-1,minw:u.match(/\(\s*min\-width\s*:\s*(\s*[0-9\.]+)(px|em)\s*\)/)&&parseFloat(RegExp.$1)+(RegExp.$2||""),maxw:u.match(/\(\s*max\-width\s*:\s*(\s*[0-9\.]+)(px|em)\s*\)/)&&parseFloat(RegExp.$1)+(RegExp.$2||"")})}A()},E=function(){var e,t=r.createElement("div"),i=r.body,n=!1;return t.style.cssText="position:absolute;font-size:1em;width:1em",i||(i=n=r.createElement("body"),i.style.background="none"),i.appendChild(t),s.insertBefore(i,s.firstChild),e=t.offsetWidth,n?s.removeChild(i):i.removeChild(t),e=a=parseFloat(e)},A=function(t){var i="clientWidth",u=s[i],g="CSS1Compat"===r.compatMode&&u||r.body[i]||u,f={},y=m[m.length-1],_=(new Date).getTime();if(t&&n&&p>_-n)return e.clearTimeout(o),void(o=e.setTimeout(A,p));n=_;for(var v in l)if(l.hasOwnProperty(v)){var C=l[v],b=C.minw,N=C.maxw,I=null===b,P=null===N,S="em";b&&(b=parseFloat(b)*(b.indexOf(S)>-1?a||E():1)),N&&(N=parseFloat(N)*(N.indexOf(S)>-1?a||E():1)),C.hasquery&&(I&&P||!(I||g>=b)||!(P||N>=g))||(f[C.media]||(f[C.media]=[]),f[C.media].push(d[C.rules]))}for(var T in c)c.hasOwnProperty(T)&&c[T]&&c[T].parentNode===h&&h.removeChild(c[T]);for(var w in f)if(f.hasOwnProperty(w)){var D=r.createElement("style"),x=f[w].join("\n");D.type="text/css",D.media=w,h.insertBefore(D,y.nextSibling),D.styleSheet?D.styleSheet.cssText=x:D.appendChild(r.createTextNode(x)),c.push(D)}},C=function(e,t){var i=b();i&&(i.open("GET",e,!0),i.onreadystatechange=function(){4!==i.readyState||200!==i.status&&304!==i.status||t(i.responseText)},4!==i.readyState&&i.send(null))},b=function(){var t=!1;try{t=new e.XMLHttpRequest}catch(i){t=new e.ActiveXObject("Microsoft.XMLHTTP")}return function(){return t}}();y(),i.update=y,e.addEventListener?e.addEventListener("resize",t,!1):e.attachEvent&&e.attachEvent("onresize",t)}}(this),respond}),Ndn_Require.define("text!templates/embed.html",[],function(){return'<!doctype html>\n<html>\n<head>\n    <title>Inform Player Suite</title>\n    \n    <meta charset="UTF-8" />\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <!-- Force IE compatibility mode OFF -->\n    <meta http-equiv="X-UA-Compatible" content="IE=EDGE" />\n    \n    <link href="{{appUrl}}/img/favicon.ico" title="Icon" type="image/x-icon" rel="icon" />\n    <link href="{{appUrl}}/img/favicon.ico" title="Icon" type="image/x-icon" rel="shortcut icon" />\n    <script>\n        var _nw2e = _nw2e || [];\n        _nw2e.isInIframe = true;\n        _nw2e.appOverrideSettings = \'{{appOverrideSettings}}\';\n        _nw2e.iframeId = \'{{iframeId}}\';\n    </script>\n    {{embedCodeScriptTag}}\n    <style>\n		html, body {\n			padding: 0px;\n			margin: 0px;\n			border: none;\n			width: 100%;\n			height: 100%;\n		}\n    \n    	#landing-page-embed-container.ndn_widget_VideoPlayer-Single,\n    	#landing-page-embed-container.ndn_widget_VideoPlayer-Studio {\n    		width: 100%;\n    		height: 100%;\n    	}\n    </style>\n</head>\n<body>{{embedCode}}</body>\n</html>\n'});var _nw2e=_nw2e||[];Ndn_Require.define("models/Ndn/Widget",["jquery","underscore","backbone","require","models/Ndn/App","models/Ndn/Widget/CssInjector","models/Ndn/PlayerServices","models/Ndn/Utils/UrlParser","models/Ndn/Utils/UserAgent","models/Ndn/Widget/Config","models/Ndn/LoyaltyProgram","models/Ndn/EventHub","models/Ndn/Analytics/ChartbeatStrategy","models/Ndn/Debugger","lib/respond","text!templates/embed.html"],function($,_,Backbone,require,Ndn_App,Ndn_Widget_CssInjector,Ndn_PlayerServices,Ndn_Utils_UrlParser,Ndn_Utils_UserAgent,Ndn_Widget_Config,Ndn_LoyaltyProgram,Ndn_EventHub,Ndn_Analytics_ChartbeatStrategy,Ndn_Debugger,respond,embedTemplate){if(_nw2e.Ndn_Widget)return _nw2e.Ndn_Widget;var _nextEmbedIndex=0,_getElementFullHtml=function(e){var t=document.createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML},_handleConfigDimensions=function(widget,containerElement){function maintainAspectRatio(dimension){if("width"==dimension||"height"==dimension){var dimensionParameter="width"!=dimension?"width":"height",dimensionParameterVariable=dimensionParameter.substr(0,1);(widget.get("config")[dimensionParameter]||"").match(/[w|h]/gi)||(widget.get("config")[dimension]=widget.get("config")[dimension].replace(/([\d).])([h|w])/gi,"$1*$2").replace(/([h|w])([wh(])/gi,"$1*$2"),widget.on("containerResize",function(){var dimensionParameterValue=containerElement[dimensionParameter](),newDimensionValueCalculation=widget.get("config")[dimension].replace(new RegExp(dimensionParameterVariable,"gi"),dimensionParameterValue).replace(/[^-()\d\/*+.]/g,"");containerElement.css(dimension,eval(newDimensionValueCalculation)+"px")}))}}widget.set("config",Ndn_Widget_Config.processDefaultDimensions(widget.get("config"),Ndn_Widget_Config.hasUpdatedEmbedCode(containerElement))),containerElement.resize(function(){widget.synchronizeContainerDimensions()}),$.each(["width","height"],function(e,t){widget.get("config")[t]&&(widget.get("config")[t]+="",widget.get("config")[t].match(/h|w/gi)?maintainAspectRatio(t):widget.get("config")[t].match(/%|[a-z]/gi)?containerElement.css(t,widget.get("config")[t]):containerElement.css(t,widget.get("config")[t]+"px"))})},Ndn_Widget=Backbone.Model.extend({defaults:{config:{},templates:[],templatePaths:[],initialConfig:{},placedBy:null,containerElement:null,embedIndex:null,widgetUid:null,isAttached:!1,configComplete:!1,settings:null,loyaltyProgram:null,hasBeenPositionedBelowTheFold:!1,settingsPending:!1,dfpPodPositionValue:null,providedContainerElementHtml:null,parentWidget:null,splitVersionModel:null,ptrBehavior:!1,isModal:!1,usesAdStudies:!1,carousel:null,thumbnailCarousel:null},initialize:function(e,t){this.set({parentWidget:t||this,initialConfig:_.extend({},e),config:e}),this.set("dfpPodPositionValue",1),this.isParentWidget()&&e.loyaltyProgramId&&this.set({loyaltyProgram:new Ndn_LoyaltyProgram({id:e.loyaltyProgramId,customData:function(){try{return $.parseJSON(e.loyaltyProgramData)}catch(t){return{}}}()})})},triggerEvent:function(e,t,i){if(i){var i=i.split(",");$.each(i,$.proxy(function(i,n){n=n.replace(/\s/g,""),Backbone.Model.prototype.trigger.call(this,n+":"+e,t)},this))}else Backbone.Model.prototype.trigger.apply(this,arguments)},isNdnPlayerSuiteProduct:function(){return!0},hideContainer:function(){this.getParentWidget().getContainerElement().attr("style","display:none !important")},embedSplitVersion:function(){return $.Deferred($.proxy(function(e){var t=this.get("config").splitVersion;if(t){var i=this;i.getContainerElement().addClass(Ndn_Widget.getDomClassIdentifier(i.get("config").splitVersion));var n="models/Ndn/Widget/"+t+"Model";require([n],function(t){var n=new t(i.get("config")).set({containerElement:i.getContainerElement().get(0)});n.setParentWidget(i),i.set("splitVersionModel",n);var o=n.get("widgetView");n.set("view",new o({el:i.getContainerElement().get(0),model:n})),i.trigger("splitVersionModelAvailable"),n.embed().done(e.resolve)})}else{this.set("splitVersionModel",this),this.getContainerElement().addClass(Ndn_Widget.getDomClassIdentifier(this.get("config").type));var o=this.get("widgetView");this.set("view",new o({el:this.getContainerElement().get(0),model:this})),this.trigger("splitVersionModelAvailable"),this.embed().done(e.resolve)}},this)).promise()},setIsModal:function(e){this.set("isModal",e)},isModal:function(){return this.get("isModal")},isParentWidget:function(){return this.getParentWidget()===this},getObservableData:function(){return{data:{containerElement:this.getContainerElement().get(0),embedIndex:this.get("embedIndex")},identifiers:[this.getContainerElement().attr("id"),"#"+this.get("embedIndex")]}},onceConfigIsComplete:function(e){this.get("configComplete")?e():this.once("configComplete",e)},getTemplate:function(e){var t=this.get("templates");return"undefined"!=typeof t[e]?t[e]:null},getSplitVersionId:function(){var e=this.get("config");return e.splitVersion||e.type},getWidgetTypeId:function(){return this.getPltValue()},getPltValue:function(){return Ndn_Widget_Config.getPltValue(this.get("config"),this.getCachedSettings())},usesAdStudies:function(){return this.get("usesAdStudies")},synchronizeContainerDimensions:function(){this.trigger("containerResize")},getSplitVersionModel:function(){return this.get("splitVersionModel")},isPtr:function(){return this.getParentWidget().get("ptrBehavior")===!0},setIsPtr:function(e){this.getParentWidget().set("ptrBehavior",e)},getParentWidget:function(){return this.get("parentWidget")},setParentWidget:function(e){this.set("parentWidget",e)},getEmbedIndex:function(){return this.get("embedIndex")},embed:function(){},getFoldPositionId:function(e){if("undefined"==typeof e&&(e=$(this.get("containerElement"))),Ndn_Widget.isEmbeddedByIframe())return"0";var t,i=$(window).height()+$(window).scrollTop(),n=i>=e.offset().top+Math.floor(e.height()/2);return n?t="1":(this.set({hasBeenPositionedBelowTheFold:!0}),t="2"),t},isInView:function(e){if("undefined"==typeof e&&(e=$(this.get("containerElement"))),Ndn_Widget.isEmbeddedByIframe())return!1;var t=$(window).height()+$(window).scrollTop(),i=t>=e.offset().top+Math.floor(e.height()/2),n=$(document).scrollTop()>=e.offset().top+Math.floor(e.height()/2);return!i||n?!1:!0},getThumbnailsEnabled:function(){return!1},shouldBeMuted:function(){return this!=this.getSplitVersionModel()?this.getSplitVersionModel().shouldBeMuted():this.get("videoPlayer").isShowingRmm()&&!this.get("config").rmmSoundOn?!0:!1},isEmbedded:function(){return this.get("view")&&this.get("view").el},onceEmbedded:function(e){this.isEmbedded()?e():this.once("embed",e)},getContainerElement:function(){return $(this.get("containerElement"))},getCachedSettings:function(){return this.isParentWidget()?this.get("settings"):this.getParentWidget().getCachedSettings()},processSettings:function(e){var t=e,i=this.get("config"),n="VideoLauncher/Slider"==this.getParentWidget().get("config").type,o=t.settings.behavior,a=o.provided;return function(){var e=a.rmm,i=Ndn_Utils_UserAgent.isAbleToPlayVideoAutomatically()||n,r=_.contains(["/",""],window.location.pathname+""),s=i&&n&&!r&&e.continuousPlayPercentage>0&&100*Math.random()<=e.continuousPlayPercentage;i&&s&&e.numberOfAdCalls>1&&(t.defaultWidgetConfig.splitVersion=""),Ndn_Debugger.inMode("rmmCp")&&(console.log("providedSettings ==",e),console.log("rmmEnabled ==",i),console.log("isOnHomepage ==",r),console.log("isSlider ==",n),console.log("shouldUseProvidedRmmContinuousPlay ==",s));var l=(s?e.continuousPlay:0)+1;o.rmm={enabled:i,continuousPlay:s?e.continuousPlay:0,numberOfAdCalls:Ndn_App.getSetting("rmmAdCalls")||l,earlyContent:e.earlyContent},i&&n&&!Ndn_Utils_UserAgent.isDesktop()&&(o.rmm=_.extend(o.rmm,{adPlayer:"displayAd",numberOfAdCalls:1,earlyContent:!1})),_.extend(t.settings.rmm,t.settings.behavior.rmm)}(),o.ptr={enabled:Ndn_Utils_UserAgent.isAbleToPlayVideoAutomatically()&&"VideoPlayer/PTR"==t.defaultWidgetConfig.splitVersion,previewLength:a.ptr.previewLength,playsInIframe:a.ptr.playsInIframe},o["float"]={enabled:"VideoPlayer/Single"==this.getParentWidget().get("config").type&&a["float"].enabled&&!Ndn_Widget.isEmbeddedByIframe()&&Ndn_Utils_UserAgent.isDesktop(),initialPosition:Ndn_App.getSetting("floatPosition")||a["float"].initialPosition},t.settings.behavior.playOnInViewToggle={enabled:a.playOnInViewToggle.enabled&&"VideoPlayer/Single"==i.type},t.settings.behavior.playbackMode=function(){if(_.contains(["VideoLauncher/Slider","VideoLauncher/Playlist300x250","VideoPlayer/PTR"],i.splitVersion||i.type)){var e=a.forceHtmlPlayerForSlider.siteSections.split(",");if(_.contains(e,i.siteSection))return"html"}return"default"}(),t.settings.browser=Ndn_Widget_Config.getBrowserSettings(t),t.settings.browser.ableToUseEarlyContentRmm||(o.rmm.earlyContent=!1),t},getSettings:function(){return this.isParentWidget()?$.Deferred($.proxy(function(e){this.get("settings")?e.resolve(this.get("settings")):this.get("settingsPending")?this.once("settingsReceived",function(t){e.resolve(t)}):(this.set("settingsPending",!0),Ndn_PlayerServices.getWidgetSettings(this).done($.proxy(function(t){this.set("config",Ndn_Widget_Config.getFinalizedConfig(this.get("config"),t.defaultWidgetConfig,t)),t=this.processSettings(t),Ndn_Debugger.inMode("settings")&&console.log("Product Settings:",t);var i=$.proxy(function(){Ndn_Debugger.inMode("playerSettings")&&console.log("[Ndn_Widget] playerSettings ==",t),this.set("settings",t),this.set("configComplete",!0),this.trigger("configComplete",this.get("config")),e.resolve(this.get("settings")),this.trigger("settingsReceived",this.get("settings"))},this);i()},this)).fail(function(t){e.reject(t)}))},this)).promise():this.getParentWidget().getSettings()},hasRmmEnabled:function(){return this.getCachedSettings().settings.behavior.rmm.enabled},getDebugInfo:function(){return this.get("videoPlayer")?this.get("videoPlayer").getDebugInfo():void 0},getPlayerContainerElementId:function(){return this.getParentWidget().get("widgetUid")+"-player"},getDfpPodPositionValue:function(){var e=this.get("dfpPodPositionValue");return this.set("dfpPodPositionValue",e+1),e},isLaunchToStudioEnabled:function(){return!!this.getParentWidget().get("settings").launchToStudio&&(this.getParentWidget().get("settings").launchToStudio.enabled||!1)},getLandingPageUrl:function(e){var t=this.get("config"),i={type:"VideoPlayer/16x9",trackingGroup:t.trackingGroup,widgetId:t.widgetId,playlistId:t.playlistId,siteSection:t.siteSection,embedOriginUrl:encodeURIComponent(Ndn_Widget.getEmbedOriginUrl())},e=_.extend(e,i),n="";if(e.videoId=""+e.videoId,this.isLaunchToStudioEnabled()){n=this.getParentWidget().get("settings").launchToStudio.url;var o={videoId:e.videoId,playlistId:e.playlistId};n+="?"+$.param(o)}else n="http://"+Ndn_Widget.getAppDomain()+"/",n+="?type="+e.type,n+="&"+$.param(_.omit(e,"type"));return n},getPlacedByAnalyticsString:function(){var e={jsapi:1,ppembed:2,wordpress:3,fromSlider:4,recommender:5,videowire:6,legacyjsapi:100},t=[];return $.each(this.get("placedBy"),function(){var i=this;"undefined"!=typeof e[i]&&t.push(e[i])}),"."+t.join(".")+(t.length?".":"")},getVideoDataForLaunchers:function(e){var t=[];return _.each(e,$.proxy(function(e){var i={videoId:e.videoId,videoTitle:e.videoTitle,landingPageUrl:this.getLandingPageUrl({videoId:e.videoId}),thumbnailUrl:e.thumbnailUrl,provider:{logoUrl:e.provider.logoUrl,name:e.provider.name},stillImageUrl:e.stillImageUrl};t.push(i)},this)),t},handleApiInstruction:function(e){"destruct"==e?this.destruct():("videoPause"==e||"videoPlay"==e)&&this.onceConfigIsComplete($.proxy(function(){this.get("videoPlayer")&&("videoPause"==e&&this.get("videoPlayer").pause(),"videoPlay"==e&&this.get("videoPlayer").play())},this))},destruct:function(){var e=this.getContainerElement().attr("id");Ndn_App.unintegrateWidget(this),this.getContainerElement().remove(),this.triggerEvent("destruct",{containerElementId:e},"hook,analytics")}},{getAppUrlSuffix:function(){return Ndn_App.getAppUrlSuffix()},addHook:function(e,t){return Ndn_App.addHook(e,t)},getEmbedOriginUrl:function(){return Ndn_App.getEmbedOriginUrl(arguments)},getAdsTargeting:function(){return Ndn_App.getAdsTargeting(arguments)},isBuilt:function(){return Ndn_App.isBuilt(arguments)},isOnSsl:function(){return Ndn_App.isOnSsl()},getAppUrl:function(){return Ndn_App.getAppUrl(arguments)},getAppDomain:function(){return Ndn_App.getAppDomain(arguments)},isEmbeddedByIframe:function(){return Ndn_App.isEmbeddedByIframe(arguments)},isOnAppPage:function(){return Ndn_App.isOnAppPage(arguments)},getNextEmbedIndex:function(){return _nextEmbedIndex++},getDomClassIdentifier:function(e){return"ndn_widget_"+e.charAt(0).toUpperCase()+e.slice(1).replace("/","-")},embed:function(e,t,i){i=i||[];var n="undefined"!=typeof e.nodeType&&1==e.nodeType,o=n?null:e;e=$(n?e:"#"+o);var a=_getElementFullHtml(e.get(0));if(!e.length)throw n?"Invalid dom element provided for embed":'Unable to find dom element with id "'+o+'" for embed';return $.Deferred(function(n){Ndn_Widget_Config.processConfigFromElement(e,t,i).done(function(t){if(e.hasClass("ndn_embedding")||e.hasClass("ndn_embedded"))return void n.reject("duplicateEmbedProcess");e.addClass("ndn_embedding").addClass("ndn_embed").addClass("ndn_embedContainer");var o=Ndn_Widget.getNextEmbedIndex(),r="ndn-widget-embed-"+(o+1);e.addClass(r).data("ndn-widget-uid",r),t.placementId&&e.attr("id",t.placementId);var s=function(){return"undefined"==typeof e.attr("id")&&e.attr("id",r),e.attr("id")}();if(e.hasClass("ndn_embed_wordpress")&&i.push("wordpress"),Ndn_EventHub.on("hook:"+s+"/widgetEmbedStart",function(e){n.resolve(e.system.widget)}),t.distributorId&&!t.legacyEmbedUrl)return Ndn_Widget_Config.hasUpdatedEmbedCode(e)&&Ndn_Widget_Config.retrofitEmbedCode(t,e),void function(){var e=Ndn_Utils_UrlParser.getUrlVar("ndn_ppEnv")?Ndn_Utils_UrlParser.getUrlVar("ndn_ppEnv")+"-dme.newsinc.com":"dmeserve.newsinc.com",i={paths:{}};i.paths["perfectPixel"+t.distributorId]=window.location.protocol+"//"+e+"/dpid/"+t.distributorId+"/PPEmbed";var n=_nw2e.requireConfig(i);n(["perfectPixel"+t.distributorId],function(){})}();t.distributorId&&t.legacyEmbedUrl&&i.push("ppembed"),Ndn_App.isInLaunchedBrowserWindow()&&i.push("fromSlider");var l="models/Ndn/Widget/"+t.type+"Model";require([l],function(s){var l=new s(t).set({initialContainerElementHtml:a,containerElement:e.get(0),embedIndex:o,widgetUid:r,placedBy:i});if((Ndn_App.getSetting("forceIframes")||Ndn_App.getSetting("forceIframesUsingSrc"))&&!Ndn_App.isEmbeddedByIframe()&&_.contains(["VideoPlayer/Inline590","VideoLauncher/Slider","VideoLauncher/Playlist300x250"],t.type)){"VideoPlayer/Inline590"==t.type?e.css({width:"590px",height:"530px"}):e.css({width:"300px",height:"250px"});var d="ndn-forced-iframe-embed-"+o,c=$(document.createElement("iframe")).attr("id",d).addClass("ndn_embed_iframe").css({width:"100%",height:"100%",overflow:"hidden",border:0}).attr("scrolling","no");if(Ndn_App.getSetting("forceIframesUsingSrc")){var u=Ndn_App.getAppUrlInfo(Ndn_App.getAppUrl()),p=u?u.baseUrl:"http://"+Ndn_App.getAppDomain(),h=p+"/?"+$.param(t)+"&ndn_appSettings="+encodeURIComponent($.param(Ndn_App.getOverrideSettings()))+"&ndn_iframeId="+d;if(Ndn_Debugger.isEnabled()){var g=[];$.each(Ndn_Debugger.getEnabledModes(),function(e){g.push(e)}),h+="&ndn_debug="+g.join(",")}e.append(c.attr("src",h))}else{e.append(c);var m=embedTemplate.replace(/\{{2}embedCode\}{2}/g,Ndn_Widget_Config.getEmbedCode(t,!1,"landing-page-embed-container")).replace(/\{{2}iframeId\}{2}/g,d).replace(/\{{2}appOverrideSettings\}{2}/g,$.param(Ndn_App.getOverrideSettings())).replace(/\{{2}appUrl\}{2}/g,Ndn_App.getAppUrl()).replace(/\{{2}embedCodeScriptTag\}{2}/g,Ndn_App.getEmbedCodeScriptTag(Ndn_App.getAppUrl()));try{var f=c.get(0).contentWindow.document;f.open(),f.write(m),f.close()}catch(y){}}return e.addClass("ndn_embedded").removeClass("ndn_embedding"),n.reject("iframeEmbed")}Ndn_App.integrateWidget(l),l.on("splitVersionModelAvailable",function(){l.getSettings().done(function(e){var t=e.settings.analytics.chartbeat;t.enabled&&_.contains(["VideoPlayer/Single","VideoPlayer/Studio","VideoPlayer/16x9"],l.get("config").type)&&Ndn_Analytics_ChartbeatStrategy.enableForNdnProduct(l,t.uid)})}),Ndn_Widget_CssInjector.injectCss(l.get("config").type),l.on("configComplete",function(){Ndn_Widget_CssInjector.injectCss(l.get("config").type)}),_handleConfigDimensions(l,e),l.onceConfigIsComplete(function(){l.triggerEvent("configComplete",l.get("config"),"hook,analytics")}),l.getSettings().done($.proxy(function(){l.embedSplitVersion().done(function(){e.addClass("ndn_embedded").removeClass("ndn_embedding"),l.onceConfigIsComplete(function(){l.trigger("widgetEmbedEnd"),l.triggerEvent("widgetEmbedEnd",{},"hook,analytics")})})},this)).fail(function(e){l.hideContainer(),e&&"storyVideoUnavailable"==e.reason&&l.triggerEvent("storyVideoUnavailable",{providerId:l.get("config").providerId,providerStoryId:l.get("config").providerStoryId},"hook")})})})}).promise()}});return _nw2e.Ndn_Widget=Ndn_Widget,Ndn_Widget}),Ndn_Require.define("models/Ndn/AdBlockDetection/secretmedia-sdk",[],function(){return function(Aa,F,Ba){function Ca(e,t){function i(){}i.prototype=e;var n,o=new i;for(n in t)o[n]=t[n];return t.toString!==Object.prototype.toString&&(o.toString=t.toString),o}function Ia(e){return e instanceof Array?function(){return l.iter(e)}:"function"==typeof e.iterator?G(e,e.iterator):e.iterator}function G(e,t){if(null==t)return null;null==t.__id__&&(t.__id__=Ja++);var i;return null==e.hx__closures__?e.hx__closures__={}:i=e.hx__closures__[t.__id__],null==i&&(i=function(){return i.method.apply(i.scope,arguments)},i.scope=e,i.method=t,e.hx__closures__[t.__id__]=i),i}F.secretmedia=F.secretmedia||{},F.secretmedia.pptjs=F.secretmedia.pptjs||{},F.secretmedia.asbridge=F.secretmedia.asbridge||{},F.secretmedia.sdk=F.secretmedia.sdk||{};var I=function(){return m.__string_rec(this,"")},X=function(e,t){t=t.split("u").join(""),this.r=new RegExp(e,t)};X.__name__=!0,X.prototype={match:function(e){return this.r.global&&(this.r.lastIndex=0),this.r.m=this.r.exec(e),this.r.s=e,null!=this.r.m},__class__:X};var q=function(){};q.__name__=!0,q.urlEncode=function(e){return encodeURIComponent(e)},q.startsWith=function(e,t){return e.length>=t.length&&l.substr(e,0,t.length)==t},q.endsWith=function(e,t){var i=t.length,n=e.length;return n>=i&&l.substr(e,n-i,i)==t},q.isSpace=function(e,t){var i=l.cca(e,t);return i>8&&14>i||32==i},q.ltrim=function(e){for(var t=e.length,i=0;t>i&&q.isSpace(e,i);)i++;return i>0?l.substr(e,i,t-i):e},q.rtrim=function(e){for(var t=e.length,i=0;t>i&&q.isSpace(e,t-i-1);)i++;return i>0?l.substr(e,0,t-i):e},q.trim=function(e){return q.ltrim(q.rtrim(e))},q.replace=function(e,t,i){return e.split(t).join(i)},q.hex=function(e,t){var i="",n=d.unmangle("_229");do i=n.charAt(15&e)+i,e>>>=4;while(e>0);if(null!=t)for(;i.length<t;)i="0"+i;return i},q.fastCodeAt=function(e,t){return e.charCodeAt(t)};var l=function(){};l.__name__=!0,l.cca=function(e,t){var i=e.charCodeAt(t);return i!=i?void 0:i},l.substr=function(e,t,i){return null!=t&&0!=t&&null!=i&&0>i?"":(null==i&&(i=e.length),0>t?(t=e.length+t,0>t&&(t=0)):0>i&&(i=e.length+i-t),e.substr(t,i))},l.indexOf=function(e,t,i){var n=e.length;for(0>i&&(i+=n,0>i&&(i=0));n>i;){if(e[i]===t)return i;i++}return-1},l.iter=function(e){return{cur:0,arr:e,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var pa=function(){};pa.__name__=!0;var Da=function(){};Da.__name__=!0,Da.exists=function(e,t){for(var i=Ia(e)();i.hasNext();){var n=i.next();if(t(n))return!0}return!1};var la=function(){this.length=0};la.__name__=!0,la.prototype={iterator:function(){return new fa(this.h)},__class__:la};var fa=function(e){this.head=e,this.val=null};fa.__name__=!0,fa.prototype={hasNext:function(){return null!=this.head},next:function(){return this.val=this.head[0],this.head=this.head[1],this.val},__class__:fa};var Fa={__name__:!0,_1:function(e,t){var i=d.unmangle("_1");return e[i](t)},_2:function(e,t,i){var n=d.unmangle("_2");e[n](t,i)}};Math.__name__=!0;var t=function(){};t.__name__=!0,t.hasField=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.field=function(e,t){try{return e[t]}catch(i){return i instanceof n&&(i=i.val),null}},t.setField=function(e,t,i){e[t]=i},t.callMethod=function(e,t,i){return t.apply(e,i)};var k=function(){};k.__name__=!0,k.string=function(e){return m.__string_rec(e,"")},k.parseInt=function(e){var t=parseInt(e,10);return 0!=t||120!=l.cca(e,1)&&88!=l.cca(e,1)||(t=parseInt(e)),isNaN(t)?null:t},k.random=function(e){return 0>=e?0:Math.floor(Math.random()*e)};var N=function(){};N.__name__=!0;var ga=function(e){this.url=e,this.headers=new la,this.params=new la,this.async=!0};ga.__name__=!0,ga.prototype={setPostData:function(e){return this.postData=e,this},cancel:function(){null!=this.req&&(this.req.abort(),this.req=null)},request:function(e){var t=this;t.responseData=null;var i=this.req=J.createXMLHttpRequest(),o=function(e){if(4==i.readyState){var o;try{o=i.status}catch(a){a instanceof n&&(a=a.val),o=null}if(null!=o&&(e=window.location.protocol.toLowerCase(),new X("^(?:about|app|app-storage|.+-extension|file|res|widget):$","").match(e)&&(o=null!=i.responseText?200:404)),void 0==o&&(o=null),null!=o&&t.onStatus(o),null!=o&&o>=200&&400>o)t.req=null,t.onData(t.responseData=i.responseText);else if(null==o)t.req=null,t.onError("Failed to connect or resolve host");else switch(o){case 12029:t.req=null,t.onError("Failed to connect to host");break;case 12007:t.req=null,t.onError("Unknown host");break;default:t.req=null,t.responseData=i.responseText,t.onError("Http Error #"+i.status)}}};this.async&&(i.onreadystatechange=o);var a=this.postData;if(null!=a)e=!0;else for(var r=new fa(this.params.h);null!=r.head;){var s;r.val=r.head[0],r.head=r.head[1],s=r.val,a=null==a?"":a+"&",a+=encodeURIComponent(s.param)+"="+encodeURIComponent(s.value)}try{if(e)i.open("POST",this.url,this.async);else if(null!=a){var l=1>=this.url.split("?").length;i.open("GET",this.url+(l?"?":"&")+a,this.async),a=null}else i.open("GET",this.url,this.async)}catch(d){return d instanceof n&&(d=d.val),t.req=null,void this.onError(d.toString())}for(!Da.exists(this.headers,function(e){return"Content-Type"==e.header})&&e&&null==this.postData&&i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e=new fa(this.headers.h);null!=e.head;)e.val=e.head[0],e.head=e.head[1],r=e.val,i.setRequestHeader(r.header,r.value);i.send(a),this.async||o(null)},onData:function(e){},onError:function(e){},onStatus:function(e){},__class__:ga};var qa=function(e,t){this.high=e,this.low=t};qa.__name__=!0,qa.prototype={__class__:qa};var h=function(){};h.__name__=!0,h.trace=function(e,t){m.__trace(e,t)};var ha=function(){};ha.__name__=!0,ha.getString=function(e){for(var t=0,i=ha.content;t<i.length;){var n=i[t];if(++t,n.name==e)return null!=n.str?n.str:A.decode(n.data).toString()}return null};var Y=function(e){var t=this;this.id=setInterval(function(){t.run()},e)};Y.__name__=!0,Y.delay=function(e,t){var i=new Y(t);return i.run=function(){i.stop(),e()},i},Y.prototype={stop:function(){null!=this.id&&(clearInterval(this.id),this.id=null)},run:function(){},__class__:Y};var w=function(e){this.length=e.byteLength,this.b=new ra(e),this.b.bufferValue=e,e.hxBytes=this,e.bytes=this.b};w.__name__=!0,w.alloc=function(e){return new w(new sa(e))},w.ofString=function(e){for(var t=[],i=0;i<e.length;){var n=q.fastCodeAt(e,i++);n>=55296&&56319>=n&&(n=n-55232<<10|1023&q.fastCodeAt(e,i++)),127>=n?t.push(n):(2047>=n?t.push(192|n>>6):(65535>=n?t.push(224|n>>12):(t.push(240|n>>18),t.push(128|n>>12&63)),t.push(128|n>>6&63)),t.push(128|63&n))}return new w(new ra(t).buffer)},w.prototype={get:function(e){return this.b[e]},set:function(e,t){this.b[e]=255&t},getString:function(e,t){if(0>e||0>t||e+t>this.length)throw new n(B.OutsideBounds);for(var i="",o=this.b,a=String.fromCharCode,r=e,s=e+t;s>r;){var l=o[r++];if(128>l){if(0==l)break;i+=a(l)}else if(224>l)i+=a((63&l)<<6|127&o[r++]);else if(240>l)var d=o[r++],i=i+a((31&l)<<12|(127&d)<<6|127&o[r++]);else var d=o[r++],c=o[r++],l=(15&l)<<18|(127&d)<<12|(127&c)<<6|127&o[r++],i=i+a((l>>10)+55232),i=i+a(1023&l|56320)}return i},toString:function(){return this.getString(0,this.length)},__class__:w};var A=function(){};A.__name__=!0,A.encode=function(e,t){null==t&&(t=!0);var i=new Z(A.BYTES).encodeBytes(e).toString();if(t)switch(e.length%3){case 1:i+="==";break;case 2:i+="="}return i},A.decode=function(e,t){if(null==t&&(t=!0),t)for(;61==l.cca(e,e.length-1);)e=l.substr(e,0,-1);return new Z(A.BYTES).decodeBytes(w.ofString(e))};var Z=function(e){for(var t=e.length,i=1;t>1<<i;)i++;if(i>8||t!=1<<i)throw new n("BaseCode : base length must be a power of two.");this.base=e,this.nbits=i};Z.__name__=!0,Z.prototype={encodeBytes:function(e){for(var t=this.nbits,i=this.base,n=8*e.length/t|0,o=w.alloc(n+(0==8*e.length%t?0:1)),a=0,r=0,s=(1<<t)-1,l=0,d=0;n>d;){for(;t>r;)r+=8,a<<=8,a|=e.get(l++);r-=t,o.set(d++,i.b[a>>r&s])}return r>0&&o.set(d++,i.b[a<<t-r&s]),o},initTable:function(){for(var e=[],t=0;256>t;){var i=t++;e[i]=-1}for(t=0,i=this.base.length;i>t;){var n=t++;e[this.base.b[n]]=n}this.tbl=e},decodeBytes:function(e){var t=this.nbits;null==this.tbl&&this.initTable();for(var i=this.tbl,o=e.length*t>>3,a=w.alloc(o),r=0,s=0,l=0,d=0;o>d;){for(;8>s;){var s=s+t,r=r<<t,c=i[e.get(l++)];if(-1==c)throw new n("BaseCode : invalid encoded char");r|=c}s-=8,a.set(d++,r>>s&255)}return a},__class__:Z};var K=function(){};K.__name__=!0,K.encode=function(e){var t=new K;return e=t.doEncode(K.str2blks(e)),t.hex(e)},K.str2blks=function(e){for(var t=(e.length+8>>6)+1,i=[],n=16*t,o=0;n>o;){var a=o++;i[a]=0}for(n=0;n<e.length;)i[n>>2]|=l.cca(e,n)<<(8*e.length+n)%4*8,n++;return i[n>>2]|=128<<(8*e.length+n)%4*8,e=8*e.length,t=16*t-2,i[t]=255&e,i[t]|=(e>>>8&255)<<8,i[t]|=(e>>>16&255)<<16,i[t]|=(e>>>24&255)<<24,i},K.prototype={bitOR:function(e,t){return(e>>>1|t>>>1)<<1|1&e|1&t},bitXOR:function(e,t){return(e>>>1^t>>>1)<<1|1&e^1&t},bitAND:function(e,t){return(e>>>1&t>>>1)<<1|1&e&t&1},addme:function(e,t){var i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i},hex:function(e){for(var t="",i=0;i<e.length;){var n=e[i];++i;for(var o=0;4>o;)var a=o++,t=t+("0123456789abcdef".charAt(n>>8*a+4&15)+"0123456789abcdef".charAt(n>>8*a&15))}return t},rol:function(e,t){return e<<t|e>>>32-t},cmn:function(e,t,i,n,o,a){return this.addme(this.rol(this.addme(this.addme(t,e),this.addme(n,a)),o),i)},ff:function(e,t,i,n,o,a,r){return this.cmn(this.bitOR(this.bitAND(t,i),this.bitAND(~t,n)),e,t,o,a,r)},gg:function(e,t,i,n,o,a,r){return this.cmn(this.bitOR(this.bitAND(t,n),this.bitAND(i,~n)),e,t,o,a,r)},hh:function(e,t,i,n,o,a,r){return this.cmn(this.bitXOR(this.bitXOR(t,i),n),e,t,o,a,r)},ii:function(e,t,i,n,o,a,r){return this.cmn(this.bitXOR(i,this.bitOR(t,~n)),e,t,o,a,r)},doEncode:function(e){for(var t=1732584193,i=-271733879,n=-1732584194,o=271733878,a=0;a<e.length;)var r=t,s=i,l=n,d=o,t=this.ff(t,i,n,o,e[a],7,-680876936),o=this.ff(o,t,i,n,e[a+1],12,-389564586),n=this.ff(n,o,t,i,e[a+2],17,606105819),i=this.ff(i,n,o,t,e[a+3],22,-1044525330),t=this.ff(t,i,n,o,e[a+4],7,-176418897),o=this.ff(o,t,i,n,e[a+5],12,1200080426),n=this.ff(n,o,t,i,e[a+6],17,-1473231341),i=this.ff(i,n,o,t,e[a+7],22,-45705983),t=this.ff(t,i,n,o,e[a+8],7,1770035416),o=this.ff(o,t,i,n,e[a+9],12,-1958414417),n=this.ff(n,o,t,i,e[a+10],17,-42063),i=this.ff(i,n,o,t,e[a+11],22,-1990404162),t=this.ff(t,i,n,o,e[a+12],7,1804603682),o=this.ff(o,t,i,n,e[a+13],12,-40341101),n=this.ff(n,o,t,i,e[a+14],17,-1502002290),i=this.ff(i,n,o,t,e[a+15],22,1236535329),t=this.gg(t,i,n,o,e[a+1],5,-165796510),o=this.gg(o,t,i,n,e[a+6],9,-1069501632),n=this.gg(n,o,t,i,e[a+11],14,643717713),i=this.gg(i,n,o,t,e[a],20,-373897302),t=this.gg(t,i,n,o,e[a+5],5,-701558691),o=this.gg(o,t,i,n,e[a+10],9,38016083),n=this.gg(n,o,t,i,e[a+15],14,-660478335),i=this.gg(i,n,o,t,e[a+4],20,-405537848),t=this.gg(t,i,n,o,e[a+9],5,568446438),o=this.gg(o,t,i,n,e[a+14],9,-1019803690),n=this.gg(n,o,t,i,e[a+3],14,-187363961),i=this.gg(i,n,o,t,e[a+8],20,1163531501),t=this.gg(t,i,n,o,e[a+13],5,-1444681467),o=this.gg(o,t,i,n,e[a+2],9,-51403784),n=this.gg(n,o,t,i,e[a+7],14,1735328473),i=this.gg(i,n,o,t,e[a+12],20,-1926607734),t=this.hh(t,i,n,o,e[a+5],4,-378558),o=this.hh(o,t,i,n,e[a+8],11,-2022574463),n=this.hh(n,o,t,i,e[a+11],16,1839030562),i=this.hh(i,n,o,t,e[a+14],23,-35309556),t=this.hh(t,i,n,o,e[a+1],4,-1530992060),o=this.hh(o,t,i,n,e[a+4],11,1272893353),n=this.hh(n,o,t,i,e[a+7],16,-155497632),i=this.hh(i,n,o,t,e[a+10],23,-1094730640),t=this.hh(t,i,n,o,e[a+13],4,681279174),o=this.hh(o,t,i,n,e[a],11,-358537222),n=this.hh(n,o,t,i,e[a+3],16,-722521979),i=this.hh(i,n,o,t,e[a+6],23,76029189),t=this.hh(t,i,n,o,e[a+9],4,-640364487),o=this.hh(o,t,i,n,e[a+12],11,-421815835),n=this.hh(n,o,t,i,e[a+15],16,530742520),i=this.hh(i,n,o,t,e[a+2],23,-995338651),t=this.ii(t,i,n,o,e[a],6,-198630844),o=this.ii(o,t,i,n,e[a+7],10,1126891415),n=this.ii(n,o,t,i,e[a+14],15,-1416354905),i=this.ii(i,n,o,t,e[a+5],21,-57434055),t=this.ii(t,i,n,o,e[a+12],6,1700485571),o=this.ii(o,t,i,n,e[a+3],10,-1894986606),n=this.ii(n,o,t,i,e[a+10],15,-1051523),i=this.ii(i,n,o,t,e[a+1],21,-2054922799),t=this.ii(t,i,n,o,e[a+8],6,1873313359),o=this.ii(o,t,i,n,e[a+15],10,-30611744),n=this.ii(n,o,t,i,e[a+6],15,-1560198380),i=this.ii(i,n,o,t,e[a+13],21,1309151649),t=this.ii(t,i,n,o,e[a+4],6,-145523070),o=this.ii(o,t,i,n,e[a+11],10,-1120210379),n=this.ii(n,o,t,i,e[a+2],15,718787259),i=this.ii(i,n,o,t,e[a+9],21,-343485551),t=this.addme(t,r),i=this.addme(i,s),n=this.addme(n,l),o=this.addme(o,d),a=a+16;
return[t,i,n,o]},__class__:K};var L=function(){this.h={}};L.__name__=!0,L.__interfaces__=[N],L.prototype={set:function(e,t){null!=r[e]?this.setReserved(e,t):this.h[e]=t},get:function(e){return null!=r[e]?this.getReserved(e):this.h[e]},setReserved:function(e,t){null==this.rh&&(this.rh={}),this.rh["$"+e]=t},getReserved:function(e){return null==this.rh?null:this.rh["$"+e]},remove:function(e){if(null!=r[e]){if(e="$"+e,null==this.rh||!this.rh.hasOwnProperty(e))return!1;delete this.rh[e]}else{if(!this.h.hasOwnProperty(e))return!1;delete this.h[e]}return!0},keys:function(){var e=this.arrayKeys();return l.iter(e)},arrayKeys:function(){var e,t=[];for(e in this.h)this.h.hasOwnProperty(e)&&t.push(e);if(null!=this.rh)for(e in this.rh)36==e.charCodeAt(0)&&t.push(e.substr(1));return t},__class__:L};var B={__ename__:!0,__constructs__:["Blocked","Overflow","OutsideBounds","Custom"],Blocked:["Blocked",0]};B.Blocked.toString=I,B.Blocked.__enum__=B,B.Overflow=["Overflow",1],B.Overflow.toString=I,B.Overflow.__enum__=B,B.OutsideBounds=["OutsideBounds",2],B.OutsideBounds.toString=I,B.OutsideBounds.__enum__=B,B.Custom=function(e){return e=["Custom",3,e],e.__enum__=B,e.toString=I,e};var n=function(e){Error.call(this),this.val=e,this.message=String(e),Error.captureStackTrace&&Error.captureStackTrace(this,n)};n.__name__=!0,n.__super__=Error,n.prototype=Ca(Error.prototype,{__class__:n});var m=function(){};m.__name__=!0,m.__unhtml=function(e){return e.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;")},m.__trace=function(e,t){var i;if(i=null!=t?t.fileName+":"+t.lineNumber+": ":"",i+=m.__string_rec(e,""),null!=t&&null!=t.customParams)for(var n=0,o=t.customParams;n<o.length;){var a=o[n];++n,i+=","+m.__string_rec(a,"")}var r;"undefined"!=typeof document&&null!=(r=document.getElementById("haxe:trace"))?r.innerHTML+=m.__unhtml(i)+"<br/>":"undefined"!=typeof Aa&&null!=Aa.log&&Aa.log(i)},m.getClass=function(e){if(e instanceof Array&&null==e.__enum__)return Array;var t=e.__class__;return null!=t?t:(e=m.__nativeClassName(e),null!=e?m.__resolveNativeClass(e):null)},m.__string_rec=function(e,t){if(null==e)return"null";if(5<=t.length)return"<...>";var i=typeof e;switch("function"==i&&(e.__name__||e.__ename__)&&(i="object"),i){case"object":if(e instanceof Array){if(e.__enum__){if(2==e.length)return e[0];i=e[0]+"(",t+="	";for(var o=2,a=e.length;a>o;)var r=o++,i=2!=r?i+(","+m.__string_rec(e[r],t)):i+m.__string_rec(e[r],t);return i+")"}for(i=e.length,o="[",t+="	",a=0;i>a;)r=a++,o+=(r>0?",":"")+m.__string_rec(e[r],t);return o+"]"}try{o=e.toString}catch(s){return s instanceof n&&(s=s.val),"???"}if(null!=o&&o!=Object.toString&&"function"==typeof o&&(i=e.toString(),"[object Object]"!=i))return i;i=null,o="{\n",t+="	",a=null!=e.hasOwnProperty;for(i in e)a&&!e.hasOwnProperty(i)||"prototype"==i||"__class__"==i||"__super__"==i||"__interfaces__"==i||"__properties__"==i||(2!=o.length&&(o+=", \n"),o+=t+i+" : "+m.__string_rec(e[i],t));return t=t.substring(1),o+("\n"+t+"}");case"function":return"<function>";case"string":return e;default:return String(e)}},m.__interfLoop=function(e,t){if(null==e)return!1;if(e==t)return!0;var i=e.__interfaces__;if(null!=i)for(var n=0,o=i.length;o>n;){var a=n++,a=i[a];if(a==t||m.__interfLoop(a,t))return!0}return m.__interfLoop(e.__super__,t)},m.__instanceof=function(e,t){if(null==t)return!1;switch(t){case Ka:return(0|e)===e;case Ga:return"number"==typeof e;case Ha:return"boolean"==typeof e;case String:return"string"==typeof e;case Array:return e instanceof Array&&null==e.__enum__;case La:return!0;default:if(null==e)return!1;if("function"==typeof t){if(e instanceof t||m.__interfLoop(m.getClass(e),t))return!0}else if("object"==typeof t&&m.__isNativeObj(t)&&e instanceof t)return!0;return t==Ma&&null!=e.__name__||t==Na&&null!=e.__ename__?!0:e.__enum__==t}},m.__nativeClassName=function(e){return e=m.__toStr.call(e).slice(8,-1),"Object"==e||"Function"==e||"Math"==e||"JSON"==e?null:e},m.__isNativeObj=function(e){return null!=m.__nativeClassName(e)},m.__resolveNativeClass=function(e){return Ba[e]};var J=function(){};J.__name__=!0,J.getLocalStorage=function(){try{var e=window.localStorage;return e.getItem(""),e}catch(t){return t instanceof n&&(t=t.val),null}},J.getSessionStorage=function(){try{var e=window.sessionStorage;return e.getItem(""),e}catch(t){return t instanceof n&&(t=t.val),null}},J.createXMLHttpRequest=function(){if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)return new ActiveXObject("Microsoft.XMLHTTP");throw new n("Unable to create XMLHttpRequest object.")};var H=function(e){if(e instanceof Array&&null==e.__enum__)this.a=e,this.byteLength=e.length;else{this.a=[];for(var t=0;e>t;){var i=t++;this.a[i]=0}this.byteLength=e}};H.__name__=!0,H.sliceImpl=function(e,t){var i=new ra(this,e,null==t?null:t-e),n=new sa(i.byteLength);return new ra(n).set(i),n},H.prototype={slice:function(e,t){return new H(this.a.slice(e,t))},__class__:H};var O=function(){};O.__name__=!0,O._new=function(e,t,i){if("number"==typeof e){for(i=[],t=0;e>t;){var o=t++;i[o]=0}i.byteLength=i.length,i.byteOffset=0,i.buffer=new H(i)}else if(m.__instanceof(e,H))null==t&&(t=0),null==i&&(i=e.byteLength-t),i=0==t?e.a:e.a.slice(t,t+i),i.byteLength=i.length,i.byteOffset=t,i.buffer=e;else{if(!(e instanceof Array&&null==e.__enum__))throw new n("TODO "+k.string(e));i=e.slice(),i.byteLength=i.length,i.byteOffset=0,i.buffer=new H(i)}return i.subarray=O._subarray,i.set=O._set,i},O._set=function(e,t){if(m.__instanceof(e.buffer,H)){if(e.byteLength+t>this.byteLength)throw new n("set() outside of range");for(var i=0,o=e.byteLength;o>i;){var a=i++;this[a+t]=e[a]}}else{if(!(e instanceof Array&&null==e.__enum__))throw new n("TODO");if(e.length+t>this.byteLength)throw new n("set() outside of range");for(i=0,o=e.length;o>i;)a=i++,this[a+t]=e[a]}},O._subarray=function(e,t){var i=O._new(this.slice(e,t));return i.byteOffset=e,i};var x=function(){};x.__name__=!0,x.prototype={__class__:x};var ia=function(e){this.prefix=e};ia.__name__=!0,ia.__interfaces__=[x],ia.prototype={encode:function(e){return q.startsWith(e,this.prefix)||(e=this.prefix+e),e},decode:function(e){return q.startsWith(e,this.prefix)&&(e=l.substr(e,this.prefix.length,null)),e},__class__:ia};var R=function(e,t){null==t&&(t=""),this.obfuscate=new C(e),this.prefixer=new ia(t)};R.__name__=!0,R.__interfaces__=[x],R.fromUrl=function(e,t){null==t&&(t="");var i=new ia(t).decode(e),i=u.getTopLevelDomain(i);return new R(i,t)},R.prototype={encode:function(e){return e=this.obfuscate.encode(e),this.prefixer.encode(e)},decode:function(e){return e=this.prefixer.decode(e),this.obfuscate.decode(e)},__class__:R};var aa=F.secretmedia.sdk.SdkJs=function(e,t,i,n,o){null==o&&(o=""),null==n&&(n=""),null==i&&(i=!1),this.ppt=new ma(e,t,i,n,o)};aa.__name__=!0,aa.main=function(){v.overrideTrace()},aa.prototype={unblock:function(e,t){this.ppt.unblock(e,t)},proxify:function(e){return this.ppt.proxify(e)},__class__:aa},N=F.SMSdk=function(e,t,i,n,o){aa.call(this,e,t,i,n,o)},N.__name__=!0,N.main=function(){},N.__super__=aa,N.prototype=Ca(aa.prototype,{__class__:N});var ba=function(e,t){null==t&&(t=""),this.config=e,this.prefix=t};ba.__name__=!0,ba.fromAppKey=function(e,t){null==t&&(t="");var i=ta.decode(e);return new ba({gitHash:pa.gitHash,publisherId:i[d.unmangle("_62")],sdkVersion:"1.0.0",proxyDomain:i[d.unmangle("_55")]},t)},ba.prototype={getConfigUrl:function(){var e={};d.set("_57",e,this.config.publisherId),d.set("_55",e,this.config.proxyDomain),d.set("_58",e,this.config.sdkVersion),d.set("_59",e,this.config.gitHash);var t=d.unmangle("_60");return d.set("_61",e,t),e=ua.encode(e),this.prefix+e},parseConfig:function(e){return va.decode(e)},getProxy:function(e){return new R(this.config.proxyDomain,this.prefix)},__class__:ba};var S={__ename__:!0,__constructs__:["InvalidAbsoluteUrl","InvalidScheme","InvalidSubDomain"],InvalidAbsoluteUrl:function(e){return e=["InvalidAbsoluteUrl",0,e],e.__enum__=S,e.toString=I,e},InvalidScheme:function(e){return e=["InvalidScheme",1,e],e.__enum__=S,e.toString=I,e},InvalidSubDomain:function(e){return e=["InvalidSubDomain",2,e],e.__enum__=S,e.toString=I,e}},d={__name__:!0,_new:function(e){return e},unmangle:function(e){return d.map[e]},set:function(e,t,i){return t[d.unmangle(e)]=i}},u=function(){};u.__name__=!0,u.isSpecial=function(e){for(var t=0,i=u.SPECIAL_PREFIXES;t<i.length;){var n=i[t];if(++t,0==e.indexOf(n))return!0}return!1},u.makeAbsolute=function(e,t){if(""==e)return t;if(u.isSpecial(e))return e;var i,o=e.indexOf("?");i=o>=0?l.substr(e,o,null):null;var a;a=null!=i?l.substr(e,0,o):e;var o=a.indexOf("//"),r=a.indexOf("/");if(o>0&&o==r)return e;var r=t.indexOf("//"),s=t.indexOf("/");if(0>=r||r!=s)throw new n(S.InvalidAbsoluteUrl(t));if(0==o)return l.substr(t,0,r)+e;var o=l.substr(t,0,r),s=l.substr(t,r+2,null),r=s.indexOf("/"),r=0>r?s:l.substr(s,0,r),s=l.substr(s,r.length+1,null),d=s.indexOf("?"),s=(null!=(d>=0?l.substr(s,d,null):null)?l.substr(s,0,d):s).split("/");for(s.pop(),a=a.split("/"),null!=i&&(d=a.pop(),a.push(d+i)),i=""==a[0]?[]:s.slice(0),s=0;s<a.length;)switch(d=a[s],++s,d){case"..":i.pop();break;case".":break;default:i.push(d)}return""!=i[0]&&i.unshift(""),o+"//"+r+i.join("/")},u.getDomain=function(e){var t=e.indexOf("//");if(0>t||t!=e.indexOf("/"))throw new n(S.InvalidAbsoluteUrl(e));return e=l.substr(e,t+2,null),t=e.indexOf("/"),t>0?l.substr(e,0,t):e},u.getTopLevelDomain=function(e){return u.getDomain(e).split(".").slice(-2).join(".")},u.getExtension=function(e){var t=e.indexOf("?");return t>-1&&(e=l.substr(e,0,t)),e=e.split("."),1<e.length?e.pop():""},u.current=function(){return window.document.location.href};var T=function(){this.nextId=0,this.instances=new L,this.callbacks=new L,v.overrideTrace()};T.__name__=!0,T.prototype={callCallback:function(e,t){try{var i=this.callbacks.get(e);if(null!=i)return h.trace(d.unmangle("_125")+k.string(i.fun)+d.unmangle("_9")+k.string(t),{fileName:"BridgeBase.hx",lineNumber:87,className:"secretmedia.asbridge.BridgeBase",methodName:"callCallback"}),this.callbacks.remove(e),i.fun.apply(i.scope,t)}catch(o){o instanceof n&&(o=o.val),h.trace(d.unmangle("_126")+k.string(o)+d.unmangle("_127")+e+d.unmangle("_128")+k.string(t)+")",{fileName:"BridgeBase.hx",lineNumber:93,className:"secretmedia.asbridge.BridgeBase",methodName:"callCallback"})}return null},createCallback:function(e,t){var i=d.unmangle("_129")+this.nextId++ +"_"+Math.round(1e4*Math.random());return h.trace(d.unmangle("_130")+i,{fileName:"BridgeBase.hx",lineNumber:107,className:"secretmedia.asbridge.BridgeBase",methodName:"createCallback"}),this.callbacks.set(i,{scope:e,fun:t}),i},addInstance:function(e){var t=d.unmangle("_131")+this.nextId++ +"_"+Math.round(1e4*Math.random());return h.trace(d.unmangle("_132")+t,{fileName:"BridgeBase.hx",lineNumber:124,className:"secretmedia.asbridge.BridgeBase",methodName:"addInstance"}),this.instances.set(t,e),t},findInstance:function(e){return this.instances.get(e)},__class__:T};var ca=F.secretmedia.asbridge.BridgeToAs=function(){this.loadedCbk=[],T.call(this),this.bridgeName="_"+Math.floor(1e5*Math.random()),t.setField(window,this.bridgeName,this)};ca.__name__=!0,ca.main=function(){},ca.__super__=T,ca.prototype=Ca(T.prototype,{loadSwf:function(e,t,i){var n=this;if(h.trace(e,{fileName:"BridgeToAs.hx",lineNumber:45,className:"secretmedia.asbridge.BridgeToAs",methodName:"loadSwf"}),null!=this.objectTag)h.trace(d.unmangle("_107"),{fileName:"BridgeToAs.hx",lineNumber:47,className:"secretmedia.asbridge.BridgeToAs",methodName:"loadSwf"}),t();else if(this.loadedCbk.push({success:t,timeout:i}),null==this.flashLoader){this.flashLoader=new wa,t=new L,i=d.unmangle("_108");var o=d.unmangle("_109");null!=r[i]?t.setReserved(i,o):t.h[i]=o,i=d.unmangle("_110"),o=d.unmangle("_111"),null!=r[i]?t.setReserved(i,o):t.h[i]=o,i=d.unmangle("_112"),null!=r[i]?t.setReserved(i,"1"):t.h[i]="1",i=d.unmangle("_113"),null!=r[i]?t.setReserved(i,"1"):t.h[i]="1",i=new L,i.set(T.FLASHVAR_BRIDGE_NAME,this.bridgeName);var a=this.flashLoader.createSwfObject(e,""+this.bridgeName+d.unmangle("_115"),t,t,i),s=Y.delay(function(){for(h.trace(d.unmangle("_116")+2e3,{fileName:"BridgeToAs.hx",lineNumber:66,className:"secretmedia.asbridge.BridgeToAs",methodName:"loadSwf"}),window.document.body.removeChild(a);0<n.loadedCbk.length;)n.loadedCbk.shift().timeout()},2e3);this.onFlashLoaded=function(){for(h.trace(d.unmangle("_117")+k.string(a),{fileName:"BridgeToAs.hx",lineNumber:71,className:"secretmedia.asbridge.BridgeToAs",methodName:"loadSwf"}),n.objectTag=a,s.stop();0<n.loadedCbk.length;)n.loadedCbk.shift().success()},window.document.body.appendChild(a)}},callAsCallback:function(e,t){h.trace(this.bridgeName,{fileName:"BridgeToAs.hx",lineNumber:88,className:"secretmedia.asbridge.BridgeToAs",methodName:"callAsCallback",customParams:[e,t]});for(var i=0,n=t.length;n>i;){var o=i++;"string"==typeof t[o]&&(t[o]="'"+k.string(t[o])+"'")}return this.callAsMethod(d.unmangle("_121"),[e,t])},callAsMethod:function(e,i){if(null==i&&(i=[]),null==this.objectTag){var o=window.document.getElementsByTagName(d.unmangle("_72"));this.objectTag=this.findMyFlash(o),null==this.objectTag&&(o=window.document.getElementsByTagName(d.unmangle("_118")),this.objectTag=this.findMyFlash(o))}if(null!=this.objectTag&&null!=t.field(this.objectTag,e)){h.trace(this.objectTag,{fileName:"BridgeToAs.hx",lineNumber:117,className:"secretmedia.asbridge.BridgeToAs",methodName:"callAsMethod",customParams:[e,t.field(this.objectTag,e)]});try{return t.callMethod(this.objectTag,t.field(this.objectTag,e),i)}catch(a){a instanceof n&&(a=a.val),h.trace(d.unmangle("_119")+k.string(a),{fileName:"BridgeToAs.hx",lineNumber:123,className:"secretmedia.asbridge.BridgeToAs",methodName:"callAsMethod"})}}else h.trace(d.unmangle("_120")+this.bridgeName+")",{fileName:"BridgeToAs.hx",lineNumber:127,className:"secretmedia.asbridge.BridgeToAs",methodName:"callAsMethod",customParams:[this.objectTag,e]});return null},findMyFlash:function(e){for(var i=0;i<e.length;){var n=e[i];if(++i,null!=t.field(n,this.bridgeName))return n}return null},__class__:ca});var wa=function(){};wa.__name__=!0,wa.prototype={createSwfObject:function(e,i,n,o,a){for(var s="",l=a.keys();l.hasNext();)var c=l.next(),s=s+(c+"="+q.urlEncode(null!=r[c]?a.getReserved(c):a.h[c])+"&");for(a=d.unmangle("_94"),null!=r[a]?n.setReserved(a,s):n.h[a]=s,a=d.unmangle("_94"),null!=r[a]?o.setReserved(a,s):o.h[a]=s,s=d.unmangle("_61"),a=d.unmangle("_95"),null!=r[s]?n.setReserved(s,a):n.h[s]=a,t.hasField(window,d.unmangle("_96"))?(s=d.unmangle("_97"),a=d.unmangle("_98"),null!=r[s]?n.setReserved(s,a):n.h[s]=a,s=d.unmangle("_27"),null!=r[s]?o.setReserved(s,e):o.h[s]=e):(s=d.unmangle("_99"),null!=r[s]?n.setReserved(s,e):n.h[s]=e),s=e="",a=n.keys();a.hasNext();)l=a.next(),e+=" "+l+d.unmangle("_100")+(null!=r[l]?n.getReserved(l):n.h[l])+'"';for(n=o.keys();n.hasNext();)a=n.next(),s+=" "+a+d.unmangle("_100")+(null!=r[a]?o.getReserved(a):o.h[a])+'"';for(i=d.unmangle("_101")+i+'"'+e+">",n=o.keys();n.hasNext();)e=n.next(),i+=d.unmangle("_102")+e+d.unmangle("_103")+(null!=r[e]?o.getReserved(e):o.h[e])+d.unmangle("_104");return i+=d.unmangle("_105"),o=window.document.createElement(d.unmangle("_106")),o.innerHTML=i,i=o.firstChild,o.removeChild(i),i},__class__:wa};var ta=function(){};ta.__name__=!0,ta.encode=function(e){return e=JSON.stringify(e),A.encode(w.ofString(e))},ta.decode=function(e){return e=A.decode(e).toString(),JSON.parse(e)};var va=function(){};va.__name__=!0,va.decode=function(e){return e=A.decode(e.substring(15)).toString(),JSON.parse(e)},va.encode=function(e){throw new n(d.unmangle("_42"))};var ua=function(){};ua.__name__=!0,ua.encode=function(e){var t=JSON.stringify(e),t=(new D).encode(t);return d.unmangle("_54")+U.string(V.BASE32,30)+"."+e[d.unmangle("_55")]+"/"+t},ua.decode=function(e){var t=e.indexOf("?");for(t>=0&&(e=e.substring(0,t)),e=e.split("/");""==e[0];)e.shift();return e=(new D).decode(e.slice(1).join("/")),JSON.parse(e)};var C=function(e){if(2!=e.split(".").length)throw new n("Invalid proxy domain "+e+" (should be a top level domain, with 1 dot only)");this.proxyDomain=e,this.hosts=new na,this.paths=new D,this.queryStrings=new ja};C.__name__=!0,C.__interfaces__=[x],C.chunkSubdomain=function(e){if(63<=e.length){for(var t=[],i=0;i<e.length;)t.push(l.substr(e,i,60)),i+=60;return t.join(".")}return e},C.prototype={isEncoded:function(e){return e=u.getDomain(e),q.endsWith(e,this.proxyDomain)},encode:function(e){if(u.isSpecial(e)||this.isEncoded(e))return e;var t=e.indexOf("#"),i="";t>-1&&(i=e.substring(t),e=e.substring(0,t));for(var t=e.indexOf(d.unmangle("_245"))+d.unmangle("_245").length,t=e.indexOf("/",t),o=e.substring(0,t),t=e.substring(t),a=2*(Math.round(43*Math.random())+6),r=null,s=C.SCHEMES.keys();s.hasNext();){var c=s.next(),p=c+d.unmangle("_245");if(0==e.indexOf(p)){r=k.string(a+C.SCHEMES.get(c)),o=o.substring(p.length);break}}if(null==r)throw new n(S.InvalidScheme(e));return e=this.hosts.encode(r+o),e=C.chunkSubdomain(e),o="",a=d.unmangle("_246"),r=t.indexOf(a),r>0?(s=t.substring(0,r+a.length),o=l.substr(t,r+a.length,null),0<o.length&&(o=l.substr(o,0,1)+this.queryStrings.encode(l.substr(o,1,null))),a=this.paths.encode(s)+a):a=this.paths.encode(t),t=u.getExtension(t),-1<l.indexOf(C.KEEP_EXTENSIONS,t,0)&&(a+="."+t),d.unmangle("_247")+e+"."+this.proxyDomain+"/"+a+o+i},decode:function(e){if(!this.isEncoded(e))return e;var t=e.indexOf("#"),i="";t>-1&&(i=e.substring(t),e=e.substring(0,t));var o=e.indexOf(d.unmangle("_245"))+d.unmangle("_245").length,a=e.indexOf("/",o)+1,t=e.substring(0,a-1),t=t.substring(o),t=t.split(".");if(3>t.length)throw new n(S.InvalidSubDomain(e));t.pop(),t.pop();for(var t=t.join(""),t=this.hosts.decode(t),o=k.parseInt(t.substring(0,2)),r="",s=C.SCHEMES.keys();s.hasNext();){var c=s.next();if(o%2==C.SCHEMES.get(c)){r=c;break}}if(""==r)throw new n(S.InvalidScheme(e));return t=r+d.unmangle("_245")+t.substring(2),e=e.substring(a),a="",o=e.indexOf("?"),o>=0&&(a=e.substring(o),a=l.substr(a,0,1)+this.queryStrings.decode(l.substr(a,1,null)),e=e.substring(0,o)),o=e.indexOf("."),o>=0&&(e=e.substring(0,o)),e=this.paths.decode(e),t+e+a+i},__class__:C};var V=function(){};V.__name__=!0;var na=function(e){null==e&&(e=-1),this.keys=new oa(d.unmangle("_230"),d.unmangle("_231")),this.seed=-1==e?(new Date).getHours():e};na.__name__=!0,na.__interfaces__=[x],na.prototype={encode:function(e){var t=V.BASE32.charAt(this.seed%24);return e=new W(this.keys,t).encode(e),t+M.encode(e,!1).toLowerCase()},decode:function(e){var t=l.substr(e,0,1),t=new W(this.keys,t);return e=l.substr(e,1,null).toUpperCase(),t.decode(M.decode(e,!1))},__class__:na};var oa=function(e,t){this.key=e,this.shared=t};oa.__name__=!0,oa.prototype={md5Pair:function(e){return e=K.encode(e+this.shared),{a:da.parseHex(e.charAt(0)),b:da.parseHex(e.charAt(1))+1}},__class__:oa};var D=function(){this.keys=new oa(d.unmangle("_45"),d.unmangle("_46"))};D.__name__=!0,D.__interfaces__=[x],D.prototype={encodeSpecialChars:function(e){for(var t=D.replacements.keys();t.hasNext();){var i=t.next(),n=D.replacements.get(i);e=q.replace(e,i,n[k.random(n.length)])}return e},decodeSpecialChars:function(e){for(var t=D.replacements.keys();t.hasNext();)for(var i=t.next(),n=0,o=D.replacements.get(i);n<o.length;){var a=o[n];++n,e=q.replace(e,a,i)}return e},encode:function(e){var t=U.string(V.BASE64,8),i=this.keys.md5Pair(t),n=new W(this.keys,t),t=t+U.string(V.BASE64,i.a),t=t+A.encode(n.encode(e),!1),t=t+U.string(V.BASE64,i.b);return this.encodeSpecialChars(t)},decode:function(e){e=this.decodeSpecialChars(e);var t=l.substr(e,0,8),i=this.keys.md5Pair(t),t=new W(this.keys,t),n=8+i.a;return e=l.substr(e,n,e.length-n-i.b),t.decode(A.decode(e,!1)).toString()},__class__:D};var ja=function(){};ja.__name__=!0,ja.__interfaces__=[x],ja.prototype={encode:function(e){return e.split("&amp;").map(function(e){for(var t="",i=0,n=e.length;n>i;)var o=i++,a=e.charAt(o),t=0!=o&&0==o%3&&0>e.substring(o-2,o).indexOf("%")&&new X("^[a-zA-Z0-9]$","").match(a)?t+("%"+q.hex(l.cca(a,0),2)):t+a;return t}).join("&amp;")},decode:function(e){return e.split("&amp;").map(function(e){for(var t="",i=0;i<e.length;){var n=e.charAt(i);if("%"==n){var o=l.substr(e,i+1,2),o=da.decodeChar(o);null!=o&&new X("^[a-zA-Z0-9]$","").match(o)?(t+=o,i+=2):t+=n}else t+=n;i++}return t}).join("&amp;")},__class__:ja};var W=function(e,t){this.keys=e,this.salt=t};W.__name__=!0,W.prototype={encode:function(e){return e=[this.keys.key,e].join(":"),xa.encode(w.ofString(e),this.salt,this.keys.shared)},decode:function(e){if(e=xa.encode(e,this.salt,this.keys.shared).toString().split(":"),e[0]!=this.keys.key)throw new n(d.unmangle("_56"));return e.slice(1).join(":")},__class__:W};var M=function(){};M.__name__=!0,M.encode=function(e,t){null==t&&(t=!0);var i=new Z(M.BYTES).encodeBytes(e).toString();if(t&&0<i.length%8)for(var n=0,o=8-i.length%8;o>n;)n++,i+="=";return i},M.decode=function(e,t){if(null==t&&(t=!0),t)for(;61==l.cca(e,e.length-1);)e=l.substr(e,0,-1);return new Z(M.BYTES).decodeBytes(w.ofString(e))};var da=function(){};da.__name__=!0,da.parseHex=function(e){return k.parseInt(d.unmangle("_47")+e)},da.encodeChar=function(e){return q.hex(l.cca(e,0),2)},da.decodeChar=function(e){return e=k.parseInt(d.unmangle("_47")+e),null==e?null:String.fromCharCode(e)};var U=function(){};U.__name__=!0,U["char"]=function(e){return e.charAt(k.random(e.length))},U.string=function(e,t){for(var i=[],n=0;t>n;)n++,i.push(e.charAt(k.random(e.length)));return i.join("")},U.pick=function(e){return e[k.random(e.length)]};var xa=function(){};xa.__name__=!0,xa.encode=function(e,t,i){for(var n=Math.floor(e.length/16),n=n+1,o="",a=0;n>a;)var r=a++,o=o+K.encode(t+r+K.encode(i));for(t=w.alloc(e.length),i=0,n=e.length;n>i;)a=i++,t.set(a,e.b[a]^l.cca(o,a));return t};var ya=function(){};ya.__name__=!0,ya.prototype={substitute:function(e,i,n){var o=d.unmangle(i);null==t.field(e,"_"+o)&&t.setField(e,"_"+o,t.field(e,o)),e[o]=function(){return h.trace(d.unmangle("_8")+o+d.unmangle("_9")+arguments[0],{fileName:"Interceptor.hx",lineNumber:32,className:"secretmedia.dom.Interceptor",methodName:"substitute"}),n(this,t.field(e,"_"+o),arguments)}},poll:function(e,t){var i=null,i=function(n){for(n=0;n<e.length;){var o=e[n];++n;for(var o=window.document.getElementsByTagName(o),a=0;a<o.length;){var r=o[a];++a,t(r)}}window.requestAnimationFrame(i)};i()},__class__:ya};var y=function(e,t,i){null==i&&(i=""),this.urls=new R(e,i),e=J.getLocalStorage(),i=null;var o=d.unmangle("_0");if(null!=e&&null!=e.getItem(o)?i=e.getItem(o):null!=t?this.whiteList=t:i=ha.getString(o),null!=i)try{this.whiteList=JSON.parse(i)}catch(a){a instanceof n&&(a=a.val),h.trace("VirtDom:: Error parsing the white list "+i,{fileName:"VirtDom.hx",lineNumber:85,className:"secretmedia.dom.VirtDom",methodName:"new"})}h.trace("VirtDom:: White list is now",{fileName:"VirtDom.hx",lineNumber:88,className:"secretmedia.dom.VirtDom",methodName:"new",customParams:[this.whiteList]})};y.__name__=!0,y.startVirtualDom=function(e,t,i){if(null==i&&(i=""),y.doOnlyOnce(window.document.getElementsByTagName("html")[0])){h.trace(d.unmangle("_5")+e,{fileName:"VirtDom.hx",lineNumber:42,className:"secretmedia.dom.VirtDom",methodName:"startVirtualDom"}),e=new y(e,t,i),t=new ya,i=window;var n;n=i[d.unmangle("_6")][d.unmangle("_7")],t.substitute(n,"_10",G(e,e.appendChildAndInsertBefore)),t.substitute(n,"_33",G(e,e.appendChildAndInsertBefore)),t.substitute(i[d.unmangle("_34")],"_35",G(e,e.createNewElement)),t.substitute(i[d.unmangle("_34")],"_37",G(e,e.postMessage)),t.poll([d.unmangle("_30"),d.unmangle("_25"),d.unmangle("_23"),d.unmangle("_24")],G(e,e.processPolledElement))}},y.callSuper=function(e,t,i){var o=null;try{o=t.apply(e,i)}catch(a){a instanceof n&&(a=a.val),h.trace(d.unmangle("_32"),{fileName:"VirtDom.hx",lineNumber:101,className:"secretmedia.dom.VirtDom",methodName:"callSuper"})}return o},y.doOnlyOnce=function(e){return null==Fa._1(e,d.unmangle("_3"))?(Fa._2(e,d.unmangle("_3"),d.unmangle("_4")),!0):!1},y.prototype={appendChildAndInsertBefore:function(e,t,i){return h.trace(d.unmangle("_11"),{fileName:"VirtDom.hx",lineNumber:115,className:"secretmedia.dom.VirtDom",methodName:"appendChildAndInsertBefore"}),i[0]=this.processElement(i[0]),y.callSuper(e,t,i)},createNewElement:function(e,t,i){return h.trace(d.unmangle("_36"),{fileName:"VirtDom.hx",lineNumber:129,className:"secretmedia.dom.VirtDom",methodName:"createNewElement"}),e=y.callSuper(window.document,t,i),this.processElement(e),e},postMessage:function(e,t,i){return h.trace(d.unmangle("_38"),{fileName:"VirtDom.hx",lineNumber:145,className:"secretmedia.dom.VirtDom",methodName:"postMessage"}),i[1]="*",y.callSuper(e,t,i)},processPolledElement:function(e){this.processElement(e,!0)},processElement:function(e,t){null==t&&(t=!1);try{var i;switch(e.nodeType){case 3:i=null;break;default:i=e.tagName.toUpperCase()}if(i==d.unmangle("_23")){var o=e.src;if(this.changeSrc(e),t&&e.src!=o){var a=e.parentNode;a.removeChild(e);var r=window.document.createElement("script");r.src=o,a.insertBefore(r,a.firstChild),h.trace(d.unmangle("_22")+r.src,{fileName:"VirtDom.hx",lineNumber:182,className:"secretmedia.dom.VirtDom",methodName:"processElement"})}}else if(i==d.unmangle("_24"))this.changeSrc(e);else if(i==d.unmangle("_25")){var s=e.src;if(this.changeSrc(e),t&&e.src!=s){var l=e.parentNode;null!=l&&(l.insertBefore(e,l.firstChild),h.trace(d.unmangle("_22")+e.src,{fileName:"VirtDom.hx",lineNumber:196,className:"secretmedia.dom.VirtDom",methodName:"processElement"}))}}else i==d.unmangle("_30")&&this.processObject(e)}catch(c){c instanceof n&&(c=c.val),h.trace(d.unmangle("_31")+k.string(e),{fileName:"VirtDom.hx",lineNumber:206,className:"secretmedia.dom.VirtDom",methodName:"processElement"})}return e},isInWhiteList:function(e){if(1==this.whiteList[d.unmangle("_19")])return!0;if(null!=this.whiteList[d.unmangle("_20")])for(var t=0,i=this.whiteList[d.unmangle("_20")];t<i.length;){var n=i[t];if(++t,new X(n.url,"i").match(e))return!0}return h.trace(d.unmangle("_21")+e,{fileName:"VirtDom.hx",lineNumber:240,className:"secretmedia.dom.VirtDom",methodName:"isInWhiteList"}),!1},processUrl:function(e){return e=this.urls.encode(u.makeAbsolute(e,window.document.location.href)),h.trace(d.unmangle("_18")+e,{fileName:"VirtDom.hx",lineNumber:246,className:"secretmedia.dom.VirtDom",methodName:"processUrl"}),e},changeSrc:function(e){var t=e[d.unmangle("_12")];switch(t){case"":break;default:y.doOnlyOnce(e)&&this.isInWhiteList(t)&&(h.trace(d.unmangle("_13")+k.string(e)+" "+e.src,{fileName:"VirtDom.hx",lineNumber:255,className:"secretmedia.dom.VirtDom",methodName:"changeSrc"}),e.src=this.processUrl(e.src))}return e},processObject:function(e){var t=!1,i=e.data;if(""==i)for(var i=e.getElementsByTagName(d.unmangle("_26")),n=0;n<i.length;){var o=i[n];if(++n,o.name==d.unmangle("_27")&&y.doOnlyOnce(o)){this.isInWhiteList(o.value)&&(o.value=this.processUrl(o.value),t=!0,h.trace(d.unmangle("_28")+k.string(e)+" "+o.value,{fileName:"VirtDom.hx",lineNumber:277,className:"secretmedia.dom.VirtDom",methodName:"processObject"}));break}}else""!=i&&y.doOnlyOnce(e)&&this.isInWhiteList(e.data)&&(h.trace(d.unmangle("_13")+k.string(e)+" "+e.data,{fileName:"VirtDom.hx",lineNumber:285,className:"secretmedia.dom.VirtDom",methodName:"processObject"}),e.data=this.processUrl(e.data),t=!0);return t&&(t=e.getElementsByTagName(d.unmangle("_25")),0<t.length&&(t=t[0],h.trace(d.unmangle("_29")+k.string(e)+" "+k.string(t),{fileName:"VirtDom.hx",lineNumber:295,className:"secretmedia.dom.VirtDom",methodName:"processObject"}),this.changeSrc(t))),e},__class__:y},x=function(){},x.__name__=!0,x.prototype={__class__:x};var v=function(){};v.__name__=!0,v.__interfaces__=[x],v.overrideTrace=function(){var e=new v;return h.trace=G(e,e.trace),e},v.prototype={isDebug:function(){return this.eval(v.isDebugExpr)},trace:function(e,t){this.isDebug()&&this.call(v.traceFunction,Ea.toArray(e,t))},log:function(e,t){this.call(v.traceFunction,[e,t].filter(function(e){return null!=e}))},eval:function(a){return eval(a)},call:function(a,b){return eval("("+a+")").apply(null,[b])},__class__:v};var ka=function(e,t){null==t&&(t=!1),this.document=e,this.alwaysFire=t};ka.__name__=!0,ka.__interfaces__=[x],ka.prototype={log:function(e,i){if(null==i||!t.hasField(i,d.unmangle("_73"))||!t.hasField(i,d.unmangle("_74")))return h.trace(d.unmangle("_75"),{fileName:"FontLogger.hx",lineNumber:42,className:"secretmedia.logger.FontLogger",methodName:"log"});if(this.alwaysFire||1>100*Math.random()){var n=d.unmangle("_76")+e+"-"+k.string(i.clientId)+d.unmangle("_77")+k.string(i.appKey);this.send(n,i)}},trace:function(e,t){},send:function(e,t){var i=this.document.createElement("style");i.textContent=d.unmangle("_78")+e+d.unmangle("_79"),i.type=d.unmangle("_80"),this.document.head.appendChild(i)},__class__:ka};var Ea=function(){};Ea.__name__=!0,Ea.toArray=function(e,t){var i=[e];return null!=t&&(null!=t.customParams&&(i=i.concat(t.customParams)),i.unshift(""+t.fileName+":"+t.lineNumber+" "+t.className+d.unmangle("_86")+t.methodName)),i};var ea=function(e){this.strategy=e};ea.__name__=!0,ea.__interfaces__=[x],ea.send=function(e,t){null==t&&(t={}),null==t.location&&(t.location=window.document.location.href);var i=JSON.stringify(t),n=new ga(e);n.setPostData(i),n.request(!0)},ea.prototype={log:function(e,t){var i=d.unmangle("_63")+e,i=this.strategy.encode(i);ea.send(i,t)},trace:function(e,t){},__class__:ea};var za=function(){this.allowDetectionStateCache=!0,this.alwaysFireFontLogger=!1;var e=J.getLocalStorage();null!=e&&"true"==e.getItem(P.ENABLE_DEBUG)&&(this.alwaysFireFontLogger="true"==e.getItem(P.ALWAYS_FIRE_FONT_LOGGER),this.allowDetectionStateCache="false"!=e.getItem(P.ALLOW_DETECTION_STATE_CACHE))};za.__name__=!0,za.prototype={setDetectionState:function(e){var t=J.getSessionStorage();null!=t&&t.setItem(P.DETECTION_STATE,e)},getDetectionState:function(){if(0==this.allowDetectionStateCache)return null;var e=J.getSessionStorage();return null!=e?e.getItem(P.DETECTION_STATE):null},__class__:za};var P={__name__:!0},p={__name__:!0},Q=function(e){this.pingSwfUrl=e};Q.__name__=!0,Q.detectFlashPlayer=function(){if(null!=window.navigator.plugins&&0<window.navigator.plugins.length&&(t.hasField(window.navigator.plugins,d.unmangle("_154"))||t.hasField(window.navigator.plugins,d.unmangle("_155")))){var e=window.document.createElement(d.unmangle("_118"));t.setField(e,d.unmangle("_61"),d.unmangle("_95")),window.document.body.appendChild(e);var i="Pan"in e;return window.document.body.removeChild(e),i?(h.trace(d.unmangle("_157"),{fileName:"Detector.hx",lineNumber:171,className:"secretmedia.pptjs.Detector",methodName:"detectFlashPlayer"}),!0):(h.trace(d.unmangle("_156"),{fileName:"Detector.hx",lineNumber:168,className:"secretmedia.pptjs.Detector",methodName:"detectFlashPlayer"}),!1)}return h.trace(d.unmangle("_158"),{fileName:"Detector.hx",lineNumber:174,className:"secretmedia.pptjs.Detector",methodName:"detectFlashPlayer"}),!1},Q.isPptCompatible=function(){try{return null!=J.getSessionStorage()&&("undefined"!=typeof InstallTrigger||!!window.chrome&&!!window.chrome.webstore)}catch(e){return e instanceof n&&(e=e.val),!1}},Q.prototype={testDom:function(e){var t=!1;try{var i=window.document.createElement(d.unmangle("_106"));i.setAttribute(d.unmangle("_133"),e),i.setAttribute(d.unmangle("_134"),e),i.setAttribute(d.unmangle("_135"),d.unmangle("_136")),window.document.body.appendChild(i),t=0==i.offsetWidth||0==i.offsetHeight,window.document.body.removeChild(i)}catch(o){o instanceof n&&(o=o.val),h.trace(d.unmangle("_137"),{fileName:"Detector.hx",lineNumber:44,className:"secretmedia.pptjs.Detector",methodName:"testDom",customParams:[o]})}return h.trace(d.unmangle("_138")+e+d.unmangle("_139")+(null==t?"null":""+t),{fileName:"Detector.hx",lineNumber:46,className:"secretmedia.pptjs.Detector",methodName:"testDom"}),t},testUrls:function(e,t,i,n){var o=this;if(0<e.length){var a=e.shift();this.ping(a,function(){h.trace(d.unmangle("_144")+a,{fileName:"Detector.hx",lineNumber:58,className:"secretmedia.pptjs.Detector",
methodName:"testUrls"}),o.pingFlash(a,function(){h.trace(d.unmangle("_148")+a,{fileName:"Detector.hx",lineNumber:60,className:"secretmedia.pptjs.Detector",methodName:"testUrls"}),o.testUrls(e,t,i,n)},function(){h.trace(d.unmangle("_149"),{fileName:"Detector.hx",lineNumber:63,className:"secretmedia.pptjs.Detector",methodName:"testUrls",customParams:[a]}),i(303)},function(){h.trace(d.unmangle("_150"),{fileName:"Detector.hx",lineNumber:68,className:"secretmedia.pptjs.Detector",methodName:"testUrls",customParams:[a]}),n(2)})},function(e){h.trace(d.unmangle("_151")+a,{fileName:"Detector.hx",lineNumber:72,className:"secretmedia.pptjs.Detector",methodName:"testUrls"}),i(303)},function(){h.trace(d.unmangle("_152")+a,{fileName:"Detector.hx",lineNumber:77,className:"secretmedia.pptjs.Detector",methodName:"testUrls"}),n(1)})}else h.trace(d.unmangle("_153"),{fileName:"Detector.hx",lineNumber:82,className:"secretmedia.pptjs.Detector",methodName:"testUrls"}),t()},ping:function(e,t,i,n){var o=new ga(e),a=!1,r=Y.delay(function(){h.trace(d.unmangle("_140"),{fileName:"Detector.hx",lineNumber:97,className:"secretmedia.pptjs.Detector",methodName:"ping"}),a=!0,o.cancel(),n()},2e3);o.onData=function(e){a||(t(),r.stop())},o.onError=function(e){h.trace(d.unmangle("_141")+e,{fileName:"Detector.hx",lineNumber:110,className:"secretmedia.pptjs.Detector",methodName:"ping"}),a||(i(e),r.stop())},o.onStatus=function(e){a||(h.trace(d.unmangle("_142")+e+d.unmangle("_143"),{fileName:"Detector.hx",lineNumber:118,className:"secretmedia.pptjs.Detector",methodName:"ping"}),o.cancel())},o.request()},pingFlash:function(e,t,i,n){var o=this;null==this.bridge&&(this.bridge=new ca),this.bridge.loadSwf(this.pingSwfUrl,function(){var a=o.bridge.createCallback(o.bridge,function(o){switch(h.trace(d.unmangle("_145")+o+d.unmangle("_127")+e+")",{fileName:"Detector.hx",lineNumber:136,className:"secretmedia.pptjs.Detector",methodName:"pingFlash"}),o){case d.unmangle("_122"):t();break;case d.unmangle("_123"):i();break;case d.unmangle("_124"):n()}});h.trace(d.unmangle("_146")+e+")",{fileName:"Detector.hx",lineNumber:143,className:"secretmedia.pptjs.Detector",methodName:"pingFlash"}),o.bridge.callAsMethod(d.unmangle("_147"),[e,a])},function(){n()})},start:function(e,t,i,n){1!=e.enable?(h.trace(d.unmangle("_159"),{fileName:"Detector.hx",lineNumber:204,className:"secretmedia.pptjs.Detector",methodName:"start"}),n(111)):this.testDom(e.divId)?(h.trace(d.unmangle("_160")+e.divId+")",{fileName:"Detector.hx",lineNumber:210,className:"secretmedia.pptjs.Detector",methodName:"start"}),i(302)):(h.trace(d.unmangle("_161")+e.divId+")",{fileName:"Detector.hx",lineNumber:214,className:"secretmedia.pptjs.Detector",methodName:"start"}),0!=e.testUrls?this.testUrls(e.urls,function(){h.trace(d.unmangle("_162"),{fileName:"Detector.hx",lineNumber:218,className:"secretmedia.pptjs.Detector",methodName:"start"}),t(402)},function(e){h.trace(d.unmangle("_163"),{fileName:"Detector.hx",lineNumber:222,className:"secretmedia.pptjs.Detector",methodName:"start"}),i(e)},function(e){h.trace(d.unmangle("_164"),{fileName:"Detector.hx",lineNumber:226,className:"secretmedia.pptjs.Detector",methodName:"start"}),n(e)}):(h.trace(d.unmangle("_165"),{fileName:"Detector.hx",lineNumber:231,className:"secretmedia.pptjs.Detector",methodName:"start"}),t(402)))},__class__:Q};var z={__ename__:!0,__constructs__:["NO_CONFIG_YET","CONSTRUCTOR_PARAM","LOADED"],NO_CONFIG_YET:["NO_CONFIG_YET",0]};z.NO_CONFIG_YET.toString=I,z.NO_CONFIG_YET.__enum__=z,z.CONSTRUCTOR_PARAM=["CONSTRUCTOR_PARAM",1],z.CONSTRUCTOR_PARAM.toString=I,z.CONSTRUCTOR_PARAM.__enum__=z,z.LOADED=["LOADED",2],z.LOADED.toString=I,z.LOADED.__enum__=z;var ma=F.secretmedia.pptjs.Ppt=function(e,t,i,o,a){if(null==a&&(a=""),null==o&&(o=""),null==i&&(i=!1),this.postLogger=this.fontLogger=null,this.initCallbacks=[],this.configProvenance=z.NO_CONFIG_YET,this.state=p.NONE,v.overrideTrace(),this.appKey=e,this.clientId=t,this.adBlockAlreadyDetected=i,this.prefix=a,this.browserStorageConfig=new za,this.fontLogger=new ka(window.document,this.browserStorageConfig.alwaysFireFontLogger),h.trace("hash: "+pa.gitHash+", appKey: "+e,{fileName:"Ppt.hx",lineNumber:184,className:"secretmedia.pptjs.Ppt",methodName:"new"}),Q.isPptCompatible()){try{this.context=ba.fromAppKey(e,a),this.publisherId=this.context.config.publisherId}catch(r){r instanceof n&&(r=r.val),this.state=p.DISABLED,h.trace("could not decrypt app key "+k.string(r),{fileName:"Ppt.hx",lineNumber:219,className:"secretmedia.pptjs.Ppt",methodName:"new"}),this.fontLogger.log(k.string(7),{appKey:e,clientId:t})}try{this.proxyDomain=this.context.config.proxyDomain,""!=o?(this.configProvenance=z.CONSTRUCTOR_PARAM,this.onConfigSuccess(o)):(this.configUrl=this.context.getConfigUrl(),this.loadConfig())}catch(r){r instanceof n&&(r=r.val),this.state=p.DISABLED,h.trace("could not make config file URL: "+k.string(r),{fileName:"Ppt.hx",lineNumber:244,className:"secretmedia.pptjs.Ppt",methodName:"new"}),this.fontLogger.log(k.string(8),{appKey:e,clientId:t})}}else h.trace("this browser is not supported",{fileName:"Ppt.hx",lineNumber:187,className:"secretmedia.pptjs.Ppt",methodName:"new"}),this.state=p.DISABLED,this.fontLogger.log(k.string(105),{appKey:e,clientId:t})};ma.__name__=!0,ma.main=function(){v.overrideTrace(),h.trace(d.unmangle("_188"),{fileName:"Ppt.hx",lineNumber:49,className:"secretmedia.pptjs.Ppt",methodName:"main"})},ma.prototype={callInitCallbacks:function(){h.trace(""+this.initCallbacks.length+d.unmangle("_178"),{fileName:"Ppt.hx",lineNumber:254,className:"secretmedia.pptjs.Ppt",methodName:"callInitCallbacks"});for(var e=0,t=this.initCallbacks;e<t.length;){var i=t[e];++e,i()}this.initCallbacks=[]},loadConfig:function(){this.state=p.INIT_PENDING,this.configProvenance=z.LOADED,h.trace(d.unmangle("_186"),{fileName:"Ppt.hx",lineNumber:268,className:"secretmedia.pptjs.Ppt",methodName:"loadConfig",customParams:[this.configUrl]});var e=new ga(this.configUrl);e.onData=G(this,this.onConfigSuccess),e.onError=G(this,this.onConfigError),e.request()},onConfigTimeout:function(){h.trace(d.unmangle("_185"),{fileName:"Ppt.hx",lineNumber:282,className:"secretmedia.pptjs.Ppt",methodName:"onConfigTimeout"}),this.state=p.DISABLED,this.callInitCallbacks()},onConfigTimeoutPingFlash:function(){h.trace(d.unmangle("_184"),{fileName:"Ppt.hx",lineNumber:294,className:"secretmedia.pptjs.Ppt",methodName:"onConfigTimeoutPingFlash"}),this.onConfigTimeout()},onConfigError:function(e){h.trace(d.unmangle("_187"),{fileName:"Ppt.hx",lineNumber:304,className:"secretmedia.pptjs.Ppt",methodName:"onConfigError",customParams:[e]}),this.state=p.OUR_DOMAIN_BLOCKED,this.ourDomainBlocked(null,202)},onConfigErrorPingFlash:function(){h.trace(d.unmangle("_181"),{fileName:"Ppt.hx",lineNumber:317,className:"secretmedia.pptjs.Ppt",methodName:"onConfigErrorPingFlash"}),this.state=p.OUR_DOMAIN_BLOCKED,this.ourDomainBlocked(null,200)},onConfigSuccess:function(e){h.trace(d.unmangle("_170"),{fileName:"Ppt.hx",lineNumber:331,className:"secretmedia.pptjs.Ppt",methodName:"onConfigSuccess"});try{this.config=this.context.parseConfig(e)}catch(t){t instanceof n&&(t=t.val),h.trace(d.unmangle("_171"),{fileName:"Ppt.hx",lineNumber:337,className:"secretmedia.pptjs.Ppt",methodName:"onConfigSuccess",customParams:[t,e]})}null!=this.config.proxyUrl&&""!=this.config.proxyUrl&&(this.proxyDomain=this.config.proxyUrl),h.trace(d.unmangle("_172"),{fileName:"Ppt.hx",lineNumber:343,className:"secretmedia.pptjs.Ppt",methodName:"onConfigSuccess",customParams:[this.config]}),this.postLogger=new ea(this.context.getProxy(this.config)),e=d.unmangle("_173"),e=this.proxify(u.makeAbsolute("//smblock.s3.amazonaws.com/sdk/master/ping.swf",window.location.href)),this.detector=new Q(e),1==this.adBlockAlreadyDetected?(this.state=p.BLOCKED,this.onConfigSuccessPingFlash()):0==this.config.testProxyDomainInFlash||0==Q.detectFlashPlayer()?(h.trace(d.unmangle("_179")+k.string(this.config.testProxyDomainInFlash),{fileName:"Ppt.hx",lineNumber:360,className:"secretmedia.pptjs.Ppt",methodName:"onConfigSuccess"}),this.onConfigSuccessPingFlash()):(h.trace(d.unmangle("_180")+this.configUrl,{fileName:"Ppt.hx",lineNumber:365,className:"secretmedia.pptjs.Ppt",methodName:"onConfigSuccess"}),this.detector.pingFlash(this.configUrl,G(this,this.onConfigSuccessPingFlash),G(this,this.onConfigErrorPingFlash),G(this,this.onConfigTimeoutPingFlash)))},onConfigSuccessPingFlash:function(){h.trace(d.unmangle("_177"),{fileName:"Ppt.hx",lineNumber:372,className:"secretmedia.pptjs.Ppt",methodName:"onConfigSuccessPingFlash"}),this.state==p.INIT_PENDING&&(this.state=p.INIT_DONE),this.callInitCallbacks()},proxify:function(e){h.trace(d.unmangle("_174")+e+" "+k.string(this.config),{fileName:"Ppt.hx",lineNumber:387,className:"secretmedia.pptjs.Ppt",methodName:"proxify"}),this.configProvenance==z.NO_CONFIG_YET&&h.trace(d.unmangle("_175"),{fileName:"Ppt.hx",lineNumber:390,className:"secretmedia.pptjs.Ppt",methodName:"proxify"});try{return this.context.getProxy(this.config).encode(e)}catch(t){return t instanceof n&&(t=t.val),h.trace(d.unmangle("_176")+k.string(t),{fileName:"Ppt.hx",lineNumber:397,className:"secretmedia.pptjs.Ppt",methodName:"proxify"}),e}},unblock:function(e,t){var i=this;h.trace(d.unmangle("_189")+e+" "+k.string(t),{fileName:"Ppt.hx",lineNumber:410,className:"secretmedia.pptjs.Ppt",methodName:"unblock"});var o=function(e,o){try{h.trace(d.unmangle("_190")+e+" "+(null==o?"null":""+o),{fileName:"Ppt.hx",lineNumber:414,className:"secretmedia.pptjs.Ppt",methodName:"unblock"}),t(e,o)}catch(a){a instanceof n&&(a=a.val),h.trace(d.unmangle("_191"),{fileName:"Ppt.hx",lineNumber:418,className:"secretmedia.pptjs.Ppt",methodName:"unblock",customParams:[a,t]}),null!=i.postLogger?i.postLogger.log(k.string(9),{appKey:i.appKey,clientId:i.clientId}):i.fontLogger.log(k.string(9),{appKey:i.appKey,clientId:i.clientId})}};switch(this.state){case d.unmangle("_88"):case d.unmangle("_87"):h.trace(d.unmangle("_192"),{fileName:"Ppt.hx",lineNumber:431,className:"secretmedia.pptjs.Ppt",methodName:"unblock",customParams:[e]}),this.initCallbacks.push(function(){h.trace(d.unmangle("_193"),{fileName:"Ppt.hx",lineNumber:434,className:"secretmedia.pptjs.Ppt",methodName:"unblock",customParams:[e,i.state]}),i.unblock(e,t)});break;case d.unmangle("_93"):this.disabled(e,o,null);break;case d.unmangle("_90"):this.notBlocked(e,o,null);break;case d.unmangle("_91"):this.blocked(e,o,null);break;case d.unmangle("_92"):this.ourDomainBlocked(e,null);break;case d.unmangle("_89"):h.trace(d.unmangle("_199"),{fileName:"Ppt.hx",lineNumber:449,className:"secretmedia.pptjs.Ppt",methodName:"unblock"});var a=this.browserStorageConfig.getDetectionState();if(null!=a)switch(a){case d.unmangle("_93"):this.state=p.DISABLED,h.trace(d.unmangle("_200"),{fileName:"Ppt.hx",lineNumber:457,className:"secretmedia.pptjs.Ppt",methodName:"unblock"}),this.disabled(e,o,107);break;case d.unmangle("_90"):this.state=p.NOT_BLOCKED,h.trace(d.unmangle("_201"),{fileName:"Ppt.hx",lineNumber:461,className:"secretmedia.pptjs.Ppt",methodName:"unblock"}),this.notBlocked(e,o,404);break;case d.unmangle("_91"):this.state=p.BLOCKED,h.trace(d.unmangle("_202"),{fileName:"Ppt.hx",lineNumber:465,className:"secretmedia.pptjs.Ppt",methodName:"unblock"}),this.blocked(e,o,307);break;default:this.state=p.DISABLED,h.trace(d.unmangle("_203"),{fileName:"Ppt.hx",lineNumber:469,className:"secretmedia.pptjs.Ppt",methodName:"unblock"}),this.disabled(e,o,109)}else this.detector.start(this.config,function(t){i.state=p.NOT_BLOCKED,h.trace(d.unmangle("_204")+t+d.unmangle("_205"),{fileName:"Ppt.hx",lineNumber:477,className:"secretmedia.pptjs.Ppt",methodName:"unblock"}),1==i.config.cacheDetection&&i.browserStorageConfig.setDetectionState(p.NOT_BLOCKED),i.notBlocked(e,o,t)},function(t){h.trace(d.unmangle("_204")+t+d.unmangle("_206"),{fileName:"Ppt.hx",lineNumber:483,className:"secretmedia.pptjs.Ppt",methodName:"unblock"}),1==i.config.cacheDetection&&i.browserStorageConfig.setDetectionState(p.BLOCKED),i.blocked(e,o,t)},function(t){i.state=p.DISABLED,h.trace(d.unmangle("_204")+t+d.unmangle("_207"),{fileName:"Ppt.hx",lineNumber:490,className:"secretmedia.pptjs.Ppt",methodName:"unblock"}),1==i.config.cacheDetection&&i.browserStorageConfig.setDetectionState(p.DISABLED),i.disabled(e,o,t)})}},ourDomainBlocked:function(e,t){h.trace(d.unmangle("_182"),{fileName:"Ppt.hx",lineNumber:507,className:"secretmedia.pptjs.Ppt",methodName:"ourDomainBlocked"}),h.trace(d.unmangle("_183"),{fileName:"Ppt.hx",lineNumber:508,className:"secretmedia.pptjs.Ppt",methodName:"ourDomainBlocked"}),h.trace(d.unmangle("_182"),{fileName:"Ppt.hx",lineNumber:509,className:"secretmedia.pptjs.Ppt",methodName:"ourDomainBlocked"}),null!=t&&(null!=this.postLogger?this.postLogger.log(k.string(t),{appKey:this.appKey,clientId:this.clientId}):this.fontLogger.log(k.string(t),{appKey:this.appKey,clientId:this.clientId}))},handleError:function(e,t,i){h.trace(d.unmangle("_182"),{fileName:"Ppt.hx",lineNumber:527,className:"secretmedia.pptjs.Ppt",methodName:"handleError"}),h.trace(d.unmangle("_208")+e,{fileName:"Ppt.hx",lineNumber:528,className:"secretmedia.pptjs.Ppt",methodName:"handleError"}),h.trace(d.unmangle("_182"),{fileName:"Ppt.hx",lineNumber:529,className:"secretmedia.pptjs.Ppt",methodName:"handleError"}),this.state=p.DISABLED,t(e,!1),null!=i&&(null!=this.postLogger?this.postLogger.log(k.string(i),{appKey:this.appKey,clientId:this.clientId}):this.fontLogger.log(k.string(i),{appKey:this.appKey,clientId:this.clientId}))},blocked:function(e,t,i){null!=this.config.vastUrl&&""!=this.config.vastUrl&&(h.trace(d.unmangle("_196")+this.config.vastUrl+")",{fileName:"Ppt.hx",lineNumber:553,className:"secretmedia.pptjs.Ppt",methodName:"blocked"}),e=this.config.vastUrl),e=this.proxify(e),h.trace(d.unmangle("_182"),{fileName:"Ppt.hx",lineNumber:558,className:"secretmedia.pptjs.Ppt",methodName:"blocked"}),h.trace(d.unmangle("_197")+e,{fileName:"Ppt.hx",lineNumber:559,className:"secretmedia.pptjs.Ppt",methodName:"blocked"}),h.trace(d.unmangle("_182"),{fileName:"Ppt.hx",lineNumber:560,className:"secretmedia.pptjs.Ppt",methodName:"blocked"}),this.state=p.BLOCKED,this.config.virtualDom?y.startVirtualDom(this.proxyDomain,this.config.whiteList,this.prefix):h.trace(d.unmangle("_198"),{fileName:"Ppt.hx",lineNumber:568,className:"secretmedia.pptjs.Ppt",methodName:"blocked"}),t(e,!0),null!=i&&(null!=this.postLogger?this.postLogger.log(k.string(i),{appKey:this.appKey,clientId:this.clientId}):this.fontLogger.log(k.string(i),{appKey:this.appKey,clientId:this.clientId}))},notBlocked:function(e,t,i){h.trace(d.unmangle("_182"),{fileName:"Ppt.hx",lineNumber:589,className:"secretmedia.pptjs.Ppt",methodName:"notBlocked"}),h.trace(d.unmangle("_195")+e,{fileName:"Ppt.hx",lineNumber:590,className:"secretmedia.pptjs.Ppt",methodName:"notBlocked"}),h.trace(d.unmangle("_182"),{fileName:"Ppt.hx",lineNumber:591,className:"secretmedia.pptjs.Ppt",methodName:"notBlocked"}),t(e,!1),null!=i&&(null!=this.postLogger?this.postLogger.log(k.string(i),{appKey:this.appKey,clientId:this.clientId}):this.fontLogger.log(k.string(i),{appKey:this.appKey,clientId:this.clientId}))},disabled:function(e,t,i){h.trace(d.unmangle("_182"),{fileName:"Ppt.hx",lineNumber:611,className:"secretmedia.pptjs.Ppt",methodName:"disabled"}),h.trace(d.unmangle("_194")+e,{fileName:"Ppt.hx",lineNumber:612,className:"secretmedia.pptjs.Ppt",methodName:"disabled"}),h.trace(d.unmangle("_182"),{fileName:"Ppt.hx",lineNumber:613,className:"secretmedia.pptjs.Ppt",methodName:"disabled"}),t(e,!1),null!=i&&(null!=this.postLogger?this.postLogger.log(k.string(i),{appKey:this.appKey,clientId:this.clientId}):this.fontLogger.log(k.string(i),{appKey:this.appKey,clientId:this.clientId}))},__class__:ma};var Ja=0;Array.prototype.indexOf&&(l.indexOf=function(e,t,i){return Array.prototype.indexOf.call(e,t,i)}),String.prototype.__class__=String,String.__name__=!0,Array.__name__=!0,Date.prototype.__class__=Date,Date.__name__=["Date"];var Ka={__name__:["Int"]},La={__name__:["Dynamic"]},Ga=Number;Ga.__name__=["Float"];var Ha=Boolean;Ha.__ename__=["Bool"];var Ma={__name__:["Class"]},Na={};null==Array.prototype.map&&(Array.prototype.map=function(e){for(var t=[],i=0,n=this.length;n>i;){var o=i++;t[o]=e(this[o])}return t}),null==Array.prototype.filter&&(Array.prototype.filter=function(e){for(var t=[],i=0,n=this.length;n>i;){var o=this[i++];e(o)&&t.push(o)}return t}),ha.content=[{name:"__",data:"eyJfMCI6IndoaXRlTGlzdCIsIl8xIjoiZ2V0QXR0cmlidXRlIiwiXzIiOiJzZXRBdHRyaWJ1dGUiLCJfMyI6ImRhdGEtcGFzc3BhcnRvdXQiLCJfNCI6ImZvcnRib3lhcmQiLCJfNSI6InN0YXJ0VmlydHVhbERvbSAiLCJfNiI6IkhUTUxFbGVtZW50IiwiXzciOiJwcm90b3R5cGUiLCJfOCI6IkNhbGwgdG8gIiwiXzkiOiIgd2l0aCAiLCJfMTAiOiJhcHBlbmRDaGlsZCIsIl8xMSI6IlZpcnREb206OiBhcHBlbmRDaGlsZEFuZEluc2VydEJlZm9yZSIsIl8xMiI6InNyYyIsIl8xMyI6IlZpcnREb206OiBwcm94aWZpZWQgIiwiXzE0IjoiYWJvdXQ6IiwiXzE1IjoibWFpbHRvOiIsIl8xNiI6ImNocm9tZToiLCJfMTciOiJqYXZhc2NyaXB0OiIsIl8xOCI6IlZpcnREb206OiBlbmNvZGVVcmwgcmV0dXJucyAiLCJfMTkiOiJ3aGl0ZUxpc3RBbGwiLCJfMjAiOiJmcm9tanMiLCJfMjEiOiJWaXJ0RG9tOjogV2hpdGUgbGlzdCByZWplY3Q6ICIsIl8yMiI6IlZpcnREb206OiByZWF0dGFjaCAiLCJfMjMiOiJTQ1JJUFQiLCJfMjQiOiJJRlJBTUUiLCJfMjUiOiJFTUJFRCIsIl8yNiI6IlBBUkFNIiwiXzI3IjoibW92aWUiLCJfMjgiOiJWaXJ0RG9tOjogcHJveGlmaWVkIChQQVJBTSB0YWcpICIsIl8yOSI6IlZpcnREb206OiBmb3VuZCBlbWJlZCB0YWcgaW4gb2JqZWN0IHRhZyAiLCJfMzAiOiJPQkpFQ1QiLCJfMzEiOiJWaXJ0RG9tOjogRXJyb3Igd2hpbGUgcHJvY2Vzc2luZyBlbGVtZW50ICIsIl8zMiI6IlZpcnREb206OiBFcnJvciB3aGlsZSBpbnZva2luZyB0aGUgb3JpZ2luYWwgZnVuY3Rpb24uIiwiXzMzIjoiaW5zZXJ0QmVmb3JlIiwiXzM0Ijoid2luZG93IiwiXzM1IjoiY3JlYXRlRWxlbWVudCIsIl8zNiI6IlZpcnREb206OiBjcmVhdGVFbGVtZW50IiwiXzM3IjoicG9zdE1lc3NhZ2UiLCJfMzgiOiJWaXJ0RG9tOjogcG9zdE1lc3NhZ2UiLCJfMzkiOiJFUmVnOjptYXRjaGVkIiwiXzQwIjoiTm8gc3RyaW5nIG1hdGNoZWQiLCJfNDEiOiIjX19kZWxpbV9fIyIsIl80MiI6Ik5vdCBpbXBsZW1lbnRlZCIsIl80MyI6IkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8iLCJfNDQiOiJhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3IiwiXzQ1Ijoic2VjcmV0bWVkaWEiLCJfNDYiOiJ0b3RvdG90b3QiLCJfNDciOiIweCIsIl80OCI6InVoQUZ6IiwiXzQ5IjoicE9pZCIsIl81MCI6InhhYXhhIiwiXzUxIjoiZFNWS2N6IiwiXzUyIjoieGFaWnIiLCJfNTMiOiJkc29palYiLCJfNTQiOiIvLyIsIl81NSI6ImNvbmZpZ1VybCIsIl81NiI6IkNhbm5vdCBkZWNvZGUgc3RyaW5nOiBrZXkgaXMgaW52YWxpZCIsIl81NyI6ImlkUHVibGlzaGVyIiwiXzU4Ijoic21TZGtWZXJzaW9uIiwiXzU5IjoiZ2l0SGFzaCIsIl82MCI6ImNvbmZpZyIsIl82MSI6InR5cGUiLCJfNjIiOiJwdWJsaXNoZXJJZCIsIl82MyI6ImxvZzovLyIsIl82NCI6IlJlZmxlY3QuZ2V0UHJvcGVydHkiLCJfNjUiOiJnZXRfIiwiXzY2Ijoic2V0XyIsIl82NyI6IlJlZmxlY3Quc2V0UHJvcGVydHkiLCJfNjgiOiJfX2lkX18iLCJfNjkiOiJoeF9fY2xvc3VyZXNfXyIsIl83MCI6ImZ1bmN0aW9uIiwiXzcxIjoic3RyaW5nIiwiXzcyIjoib2JqZWN0IiwiXzczIjoiY2xpZW50SWQiLCJfNzQiOiJhcHBLZXkiLCJfNzUiOiJNaXNzaW5nIGZpZWxkcyBpbiB0aGUgZGF0YSBvYmplY3QuIE11c3QgaGF2ZSBjbGllbnRJZCBhbmQgYXBwS2V5IiwiXzc2IjoiLy9jYWNoZS5mcmVlZm9udHN0b3JlLmNvbS9hcmlhbC0iLCJfNzciOiIudHRmPyIsIl83OCI6IkBmb250LWZhY2UgeyBmb250LWZhbWlseTogXCJkYWZvbnRcIjsgc3JjOiB1cmwoIiwiXzc5IjoiKTt9IiwiXzgwIjoidGV4dC9jc3MiLCJfODEiOiJzZWNyZXRtZWRpYS5lbmFibGVMb2dzIiwiXzgyIjoiKGZ1bmN0aW9uKCl7XG5cdFx0aWYoIHR5cGVvZiB3aW5kb3cgPT0gXCJ1bmRlZmluZWRcIiB8fCB0eXBlb2YgbG9jYXRpb24gPT0gXCJ1bmRlZmluZWRcIiApIHtcbiAgICAgIC8vIG5vZGVqcyBjYXNlXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cdFx0dmFyIHdpbiA9IHdpbmRvdztcblx0XHR0cnkge1xuXHRcdFx0d2luID0gd2luZG93LnRvcDtcblx0XHR9XG4gICAgY2F0Y2goZSkge31cbiAgICB0cnl7XG4gICAgICByZXR1cm4gd2luLmxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiIiwiXzgzIjoiXCIpID09PSBcInRydWVcIiB8fFxuICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oXCIiLCJfODQiOiJcIikgPT09IFwidHJ1ZVwiIHx8XG4gICAgICAgIFtcImxvY2FsaG9zdFwiLCBcIjEyNy4wLjAuMVwiXS5pbmRleE9mKCBsb2NhdGlvbi5ob3N0bmFtZSApID4gLTE7XG4gICAgfVxuICAgIGNhdGNoKGUpe1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblx0fSkoKSIsIl84NSI6ImZ1bmN0aW9uKCl7XG5cdFx0dmFyIGEgPSBhcmd1bWVudHMsYztcblx0XHR0cnkgeyBjID0gd2luZG93LnRvcC5jb25zb2xlOyB9IGNhdGNoICggZSApIHsgYyA9IGNvbnNvbGU7IH1cbiAgICAgICAgYy5sb2cuYXBwbHkoYywgYVswXSk7XG5cdH0iLCJfODYiOiI6OiIsIl84NyI6Ik5PTkUiLCJfODgiOiJJTklUX1BFTkRJTkciLCJfODkiOiJJTklUX0RPTkUiLCJfOTAiOiJOT1RfQkxPQ0tFRCIsIl85MSI6IkJMT0NLRUQiLCJfOTIiOiJPVVJfRE9NQUlOX0JMT0NLRUQiLCJfOTMiOiJESVNBQkxFRCIsIl85NCI6IkZsYXNoVmFycyIsIl85NSI6ImFwcGxpY2F0aW9uL3gtc2hvY2t3YXZlLWZsYXNoIiwiXzk2IjoiQWN0aXZlWE9iamVjdCIsIl85NyI6ImNsYXNzaWQiLCJfOTgiOiJjbHNpZDpkMjdjZGI2ZS1hZTZkLTExY2YtOTZiOC00NDQ1NTM1NDAwMDAiLCJfOTkiOiJkYXRhIiwiXzEwMCI6Ij1cIiIsIl8xMDEiOiI8b2JqZWN0IGlkPVwiIiwiXzEwMiI6IjxwYXJhbSBuYW1lPVwiIiwiXzEwMyI6IlwiIHZhbHVlPVwiIiwiXzEwNCI6IlwiIC8+IiwiXzEwNSI6Ijwvb2JqZWN0PiIsIl8xMDYiOiJkaXYiLCJfMTA3IjoiYWxyZWFkeSBsb2FkZWQiLCJfMTA4IjoiYWxsb3dzY3JpcHRhY2Nlc3MiLCJfMTA5IjoiYWx3YXlzIiwiXzExMCI6ImFsbG93bmV0d29ya2luZyIsIl8xMTEiOiJhbGwiLCJfMTEyIjoid2lkdGgiLCJfMTEzIjoiaGVpZ2h0IiwiXzExNCI6ImJyaWRnZU5hbWUiLCJfMTE1IjoiX29iaiIsIl8xMTYiOiJUaW1lb3V0ISAiLCJfMTE3Ijoib25GbGFzaExvYWRlZCBjYWxsZWQgYnkgQVMgIiwiXzExOCI6ImVtYmVkIiwiXzExOSI6IkVycm9yIGluIEFTOiAiLCJfMTIwIjoiY2FsbENhbGxiYWNrIEVycm9yOiBjb3VsZCBub3QgZmluZCB0aGUgRmxhc2ggb2JqZWN0IHRhZyAoaWQ9IiwiXzEyMSI6ImNhbGxDYWxsYmFjayIsIl8xMjIiOiJsb2FkZWQiLCJfMTIzIjoiYmxvY2tlZCIsIl8xMjQiOiJ0aW1lb3V0IiwiXzEyNSI6ImNhbGxpbmcgIiwiXzEyNiI6IkVycm9yIGNhbGxpbmcgY2FsbGJhY2s6ICIsIl8xMjciOiIgKCIsIl8xMjgiOiIsICIsIl8xMjkiOiJjYmtfIiwiXzEzMCI6IkJyaWRnZUJhc2U6OiBjcmVhdGVDYWxsYmFjayAiLCJfMTMxIjoiaW5zdF8iLCJfMTMyIjoiQnJpZGdlQmFzZTo6IGFkZEluc3RhbmNlICIsIl8xMzMiOiJjbGFzcyIsIl8xMzQiOiJpZCIsIl8xMzUiOiJzdHlsZSIsIl8xMzYiOiJ3aWR0aDoxcHg7aGVpZ2h0OjFweDtiYWNrZ3JvdW5kLWNvbG9yOiNmZjAwMDAiLCJfMTM3IjoiRXJyb3I6IEphdmFzY3JpcHQgRE9NIHRlc3QgZmFpbGVkIHdpdGggYW4gZXJyb3IgIiwiXzEzOCI6InRlc3REb20gcmV0dXJucyBkaXYgIiwiXzEzOSI6IiBpcyBoaWRkZW46ICIsIl8xNDAiOiJUaW1lb3V0ISIsIl8xNDEiOiJvbkVycm9yICIsIl8xNDIiOiJvblN0YXR1cyAiLCJfMTQzIjoiID0+IGNhbmNlbCByZXF1ZXN0IiwiXzE0NCI6InRlc3QgVVJMcyBpbiBwcm9nZXNzLCB0aGlzIFVSTCBpcyBub3QgYmxvY2tlZCBpbiBKUzogIiwiXzE0NSI6IlBpbmcgaXMgYmFjayB3aXRoICIsIl8xNDYiOiJQaW5nIHN0YXJ0cyAoIiwiXzE0NyI6InBpbmciLCJfMTQ4IjoidGVzdCBVUkxzIGluIHByb2dlc3MsIHRoaXMgVVJMIGlzIG5vdCBibG9ja2VkIGluIEZsYXNoOiAiLCJfMTQ5IjoidGVzdCBVUkxzIGVuZCwgYmxvY2tlZCBpbiBGbGFzaCIsIl8xNTAiOiJ0ZXN0IFVSTHMgZW5kLCB0aW1lb3V0IGluIEZsYXNoISIsIl8xNTEiOiJ0ZXN0IFVSTHMgZW5kLCBibG9ja2VkIGluIEpTOiAiLCJfMTUyIjoidGVzdCBVUkxzIGVuZCwgdGltZW91dCBpbiBKUyEgIiwiXzE1MyI6InRlc3QgVVJMcyBlbmQsIE5PVCBibG9ja2VkICIsIl8xNTQiOiJTaG9ja3dhdmUgRmxhc2giLCJfMTU1IjoiU2hvY2t3YXZlIEZsYXNoIDIuMCIsIl8xNTYiOiJmbGFzaCBpcyBpbnN0YWxsZWQgYnV0IE5PVCBhY3RpdmF0ZWQiLCJfMTU3IjoiZmxhc2ggaXMgaW5zdGFsbGVkIGFuZCBhY3RpdmF0ZWQiLCJfMTU4IjoiZmxhc2ggaXMgTk9UIGluc3RhbGxlZCIsIl8xNTkiOiJEZXRlY3Rpb24gaXMgZGlzYWJsZWQgZnJvbSBjb25maWciLCJfMTYwIjoidGVzdERvbSA9PiBibG9ja2VkICgiLCJfMTYxIjoidGVzdERvbSA9PiBOT1QgYmxvY2tlZCAoIiwiXzE2MiI6InRlc3RVcmxzID0+IG5vdCBibG9ja2VkIiwiXzE2MyI6InRlc3RVcmxzID0+IGJsb2NrZWQiLCJfMTY0IjoidGVzdFVybHMgdGltZW91dCA9PiBkaXNhYmxlZCIsIl8xNjUiOiJ0ZXN0VXJscyBpcyBkaXNhYmxlZCBmcm9tIGNvbmZpZyA9PiBub3QgYmxvY2tlZCIsIl8xNjYiOiJzZWNyZXRtZWRpYS5lbmFibGVEZWJ1ZyIsIl8xNjciOiJzZWNyZXRtZWRpYS5hbHdheXNGaXJlRm9udExvZ2dlciIsIl8xNjgiOiJzZWNyZXRtZWRpYS5hbGxvd0RldGVjdGlvblN0YXRlQ2FjaGUiLCJfMTY5Ijoic2VjcmV0bWVkaWEuZGV0ZWN0aW9uU3RhdGUiLCJfMTcwIjoiYmVnaW4gcGFyc2UgY29uZmlnIGZpbGUiLCJfMTcxIjoiRXJyb3IgcGFyc2luZyBjb25maWcgZmlsZSAiLCJfMTcyIjoiZW5kIHBhcnNlIGNvbmZpZyBmaWxlICIsIl8xNzMiOiIvc2RrL3B1Yi9waW5nLnN3ZiIsIl8xNzQiOiJwcm94eWZ5ICIsIl8xNzUiOiJFcnJvcjogcHJveGlmaWVkIGNhbGxlZCBiZWZvcmUgdGhlIGNvbmZpZyBhbmQgZGV0ZWN0aW9uIGhhdmUgb2NjdXJlZCIsIl8xNzYiOiJFcnJvciAiLCJfMTc3Ijoib25Db25maWdTdWNjZXNzUGluZ0ZsYXNoIiwiXzE3OCI6IiBjYWxsYmFja3MiLCJfMTc5Ijoic2tpcCBmbGFzaCBwaW5nOiAiLCJfMTgwIjoiZmxhc2ggcGluZyBjb25maWcgVVJMICIsIl8xODEiOiJFcnJvciBsb2FkaW5nIGNvbmZpZyBmcm9tIEZsYXNoIiwiXzE4MiI6IioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioiLCJfMTgzIjoiQWRibG9jayBkZXRlY3RlZCBhbmQgb3VyIGRvbWFpbiBibG9ja2VkIiwiXzE4NCI6IlRJTUVPVVQgbG9hZGluZyBjb25maWcgaW4gRmxhc2guIiwiXzE4NSI6IlRJTUVPVVQgbG9hZGluZyBjb25maWcuIERvIG5vdGhpbmcgYW55bW9yZSwganVzdCBsZXQgdGhlIGNhbGxlciBoYW5kbGUgYXMgaWYgdGhlcmUgaXMgbm8gYWQgYmxvY2siLCJfMTg2IjoiYmVnaW4gbG9hZCBjb25maWcgZmlsZSAiLCJfMTg3IjoiRXJyb3IgbG9hZGluZyBjb25maWcgPT4gb3VyIGRvbWFpbiBpcyBibG9ja2VkIiwiXzE4OCI6IlBwdDo6IEJvb3RzdHJhcCIsIl8xODkiOiJ1bmJsb2NrIGNhbGxlZCBieSBob3N0LCAiLCJfMTkwIjoiY2JrIGNhbGxlZCAiLCJfMTkxIjoiRXJyb3Igd2hpbGUgY2FsbGluZyB0aGUgY2FsbGJhY2sgcGFzc2VkIHRvIGNiazogIiwiXzE5MiI6IlVuYmxvY2ssIGluaXQgcGVuZGluZywgZGVsYXkgZXhlY3V0aW9uIiwiXzE5MyI6IlVuYmxvY2sgaXMgYmFjayBhZnRlciBpbml0IiwiXzE5NCI6IlNNIGRpc2FibGVkICIsIl8xOTUiOiJBZGJsb2NrIG5vdCBkZXRlY3RlZCAiLCJfMTk2IjoiY29uZmlnLnZhc3RVcmwgZGV0ZWN0ZWQsIG91ciB2YXN0IHdpbGwgYmUgcHJveGlmaWVkIGluc3RlYWQgb2YgdGhlIHByb3ZpZGVkIG9uZSAoIiwiXzE5NyI6IkFkYmxvY2sgZGV0ZWN0ZWQgIiwiXzE5OCI6IlZpcnR1YWxEb20gaXMgZGlzYWJsZWQ6IGZyb20gY29uZmlnIiwiXzE5OSI6IioqIHN0YXJ0IGRldGVjdG9yIiwiXzIwMCI6IioqIGRldGVjdGlvbiBzdGF0ZSB3YXMgY2FjaGVkOiBkaXNhYmxlZCIsIl8yMDEiOiIqKiBkZXRlY3Rpb24gc3RhdGUgd2FzIGNhY2hlZDogbm90IGJsb2NrZWQiLCJfMjAyIjoiKiogZGV0ZWN0aW9uIHN0YXRlIHdhcyBjYWNoZWQ6IGJsb2NrZWQiLCJfMjAzIjoiKiogZGV0ZWN0aW9uIHN0YXRlIHdhcyBjYWNoZWQgYnV0IHRoZSBzdGF0ZSBpcyB1bmtub3duLCBub3cgZGlzYWJsZWQiLCJfMjA0IjoiKiogc3RhcnQgaXMgYmFjayAgKCIsIl8yMDUiOiIsIG5vdCBibG9ja2VkKSIsIl8yMDYiOiIsIGJsb2NrZWQpIiwiXzIwNyI6IiwgZGlzYWJsZWQpIiwiXzIwOCI6IkFuIGVycm9yIG9jY3VyZWQsIHZhc3RVcmw9ICIsIl8yMDkiOiJhbHRlcm5hdGVVcmwiLCJfMjEwIjoicHJveHlCYXNlIiwiXzIxMSI6IlRvbyBtYW55IGFyZ3VtZW50cyIsIl8yMTIiOiJObyBzdWNoIGNvbnN0cnVjdG9yICIsIl8yMTMiOiJDb25zdHJ1Y3RvciAiLCJfMjE0IjoiIG5lZWQgcGFyYW1ldGVycyIsIl8yMTUiOiIgZG9lcyBub3QgbmVlZCBwYXJhbWV0ZXJzIiwiXzIxNiI6IiBpcyBub3QgYSB2YWxpZCBlbnVtIGNvbnN0cnVjdG9yIGluZGV4IiwiXzIxNyI6Il9fY2xhc3NfXyIsIl8yMTgiOiJfX3Byb3BlcnRpZXNfXyIsIl8yMTkiOiJfX25hbWVfXyIsIl8yMjAiOiJfX2ludGVyZmFjZXNfXyIsIl8yMjEiOiJfX3N1cGVyX18iLCJfMjIyIjoiX19tZXRhX18iLCJfMjIzIjoiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVoyMzQ1NjciLCJfMjI0IjoiJmFtcDsiLCJfMjI1IjoiJmx0OyIsIl8yMjYiOiImZ3Q7IiwiXzIyNyI6IiZxdW90OyIsIl8yMjgiOiImIzAzOTsiLCJfMjI5IjoiMDEyMzQ1Njc4OUFCQ0RFRiIsIl8yMzAiOiJzbSIsIl8yMzEiOiJ0byIsIl8yMzIiOiJodHRwcyIsIl8yMzMiOiJodHRwIiwiXzIzNCI6ImxvZyIsIl8yMzUiOiJtcDQiLCJfMjM2IjoibXAzIiwiXzIzNyI6ImZsdiIsIl8yMzgiOiJtcGVnIiwiXzIzOSI6IndtdiIsIl8yNDAiOiJ3ZWJtIiwiXzI0MSI6IjNncCIsIl8yNDIiOiJmNHYiLCJfMjQzIjoiZjRtIiwiXzI0NCI6InVrbiIsIl8yNDUiOiI6Ly8iLCJfMjQ2IjoiLnN3ZiIsIl8yNDciOiJodHRwOi8vIn0"}];var r={},sa=Ba.ArrayBuffer||H;null==sa.prototype.slice&&(sa.prototype.slice=H.sliceImpl);var ra=Ba.Uint8Array||O._new;pa.gitHash=q.trim("fb603bc\n"),A.CHARS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",A.BYTES=w.ofString(A.CHARS),new qa(0,0),m.__toStr={}.toString,O.BYTES_PER_ELEMENT=1,ba.VERSION="1.0.0",d.map=JSON.parse(ha.getString("__")),u.DOUBLE_SLASH="//",u.SPECIAL_PREFIXES=[d.unmangle("_14"),d.unmangle("_15"),d.unmangle("_16"),d.unmangle("_17")],d.unmangle("_122"),d.unmangle("_123"),d.unmangle("_124"),T.FLASHVAR_BRIDGE_NAME=d.unmangle("_114"),ca.TIMEOUT_DELAY_MS=2e3,C.SCHEMES=function(e){e=new L;var t=d.unmangle("_232");return null!=r[t]?e.setReserved(t,1):e.h[t]=1,t=d.unmangle("_233"),null!=r[t]?e.setReserved(t,0):e.h[t]=0,t=d.unmangle("_234"),null!=r[t]?e.setReserved(t,2):e.h[t]=2,e}(this),C.KEEP_EXTENSIONS=[d.unmangle("_235"),d.unmangle("_236"),d.unmangle("_237"),d.unmangle("_238"),d.unmangle("_239"),d.unmangle("_240"),d.unmangle("_241"),d.unmangle("_242"),d.unmangle("_243"),d.unmangle("_244")],V.BASE64=d.unmangle("_43"),V.BASE32=d.unmangle("_44"),D.SALT_LENGTH=8,D.SEPARATOR=":",D.replacements=function(e){e=new L;var t=[d.unmangle("_48"),d.unmangle("_49"),d.unmangle("_50")];return null!=r["+"]?e.setReserved("+",t):e.h["+"]=t,t=[d.unmangle("_51"),d.unmangle("_52"),d.unmangle("_53")],null!=r["/"]?e.setReserved("/",t):e.h["/"]=t,e}(this),ja.AMP="&amp;",W.SEPARATOR=":",M.CHARS=d.unmangle("_223"),M.BYTES=w.ofString(M.CHARS),v.KEY_ENABLE_LOGS=d.unmangle("_81"),v.isDebugExpr=d.unmangle("_82")+v.KEY_ENABLE_LOGS+d.unmangle("_83")+v.KEY_ENABLE_LOGS+d.unmangle("_84"),v.traceFunction=d.unmangle("_85"),ka.PERCENT_SENT=1,P.ENABLE_DEBUG=d.unmangle("_166"),P.ALWAYS_FIRE_FONT_LOGGER=d.unmangle("_167"),P.DETECTION_STATE=d.unmangle("_169"),P.ALLOW_DETECTION_STATE_CACHE=d.unmangle("_168"),p.NONE=d.unmangle("_87"),p.INIT_PENDING=d.unmangle("_88"),p.INIT_DONE=d.unmangle("_89"),p.NOT_BLOCKED=d.unmangle("_90"),p.BLOCKED=d.unmangle("_91"),p.OUR_DOMAIN_BLOCKED=d.unmangle("_92"),p.DISABLED=d.unmangle("_93"),Q.TIMEOUT_DELAY_MS=2e3,N.main()}("undefined"!=typeof console?console:{log:function(){}},"undefined"!=typeof window?window:exports,"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this),SMSdk}),Ndn_Require.define("models/Ndn/AdBlockDetection/AdBlockDetector",["jquery","underscore","backbone","models/Ndn/AdBlockDetection/secretmedia-sdk"],function(e,t,i,n){var o="eyJjb25maWdVcmwiOiJlY2xhbXBzaWFsZW1vbnRyZWUubmV0IiwiYWx0ZXJuYXRlVXJsIjoiYmVuaXNvbmNhbm9yb3VzLm9yZyIsInB1Ymxpc2hlcklkIjoiOTcifQ==",a=new n(o,""),r=null;return{hasAdBlocker:function(){return e.Deferred(e.proxy(function(e){return null!==r?e.resolve(r):(setTimeout(function(){e.resolve(null)},1e3),void a.unblock("",function(t,i){r=i,e.resolve(i)}))},this)).promise()},proxify:function(e){return a.proxify(e)},getCachedScenarioId:function(){return null===r?2:r===!0?1:0}}}),Ndn_Require.define("models/Ndn/VideoPlayer/Params",["jquery","underscore","models/Ndn/App","models/Ndn/Widget","models/Ndn/Widget/Config","models/Ndn/Utils/UserAgent","models/Ndn/Debugger","models/Ndn/AdBlockDetection/AdBlockDetector"],function(e,t,i,n,o,a,r,s){var l={getVideoAssetId:function(e,t){return t?"23408962":e+""},getParams:function(d){var c=d.videoPlayer,u=d.widget,p=u,h=u.get("config"),g=h,m=d.currentVideoData,f=d.productSettings,y=d.isRmm,_=d.isMuted,v=d.hasAdBlock,E=s.getCachedScenarioId(),A=l.getVideoAssetId(m.videoId,y||c.isShowingPtr()),C=this.getShareScenarioId(f.settings.share,m.settings.share),b=i.getBuild(),N=i.getEnv(),I=o.getPltValue(h,f),P=this.getPlayerBehaviorId(c,h,f.settings.behavior),S=this.getWgtValue(h,y),T=0==S,w=(g.siteSection||"").split("_"),D=w[1]||"oth",x=w[2]||"non",M=w[3]||"",L=n.getEmbedOriginUrl(),k=encodeURIComponent(L),R=encodeURIComponent(encodeURIComponent(L)),O=encodeURIComponent(window.location.href.toString()),V=encodeURIComponent(O),G=c.getContainerElement(),U=G.width(),B=G.height(),H=this.getVideoSizeId(parseInt(U)),F=p.getFoldPositionId(c.getContainerElement()),j=m.antiKeywords||"",z=m.provider.id,W=(m.provider.trackingGroup,!_),Y=c.get("currentAteiValue"),q=function(){var e={wgt:S,external_url:k,dpid:g.trackingGroup,sitesection:g.siteSection,sec:D,sub:x,pt:M,fp:F,cp:parseInt(g.continuousPlay),pb:P,snd:W?"1":"0",videosize:H};null!==I&&(e.plt=I);try{f.settings.auditude.enableGoogleAds&&(e.descriptionUrl=V)}catch(t){}return e}(),Z=this.getAuditudeUserDataString(q),X=function(){var e={userData:Z,external_url:k};return q.descriptionUrl&&(e.descriptionUrl=q.descriptionUrl),e}(),J=function(){try{var e=f.settings.dfp;return e.accountNumber+"/"+e.adOwnershipGroupId+(a.isMobile()?"_mob":"")+"/"+e.adTrackingGroupId+"/"+g.siteSection+"/"+D+"/"+x}catch(t){}}(),K="flash"==c.getPlaybackMode()?"flash":"html5",$=c.getTruViewCounter(),Q=p.getEmbedIndex(),ee=f.settings.dfp.adTrackingGroupNumber,te=function(){if(!f.settings.dfp)return[];var n=f.settings.dfp.isSafeViralOverride,o=f.defaultWidgetConfig.trackingGroup,r=function(){var e=i.getAdsTargeting().getInstance("lotame");return(e.isLoaded()?e.getSegments():[]).join(",")}(),s=[["wgt",S],["plt",I],["pb",P]];t.contains(["VideoPlayer/PTR","VideoLauncher/Slider","VideoLauncher/Playlist300x250"],g.type)&&(s=s.concat([["ptr",f.settings.behavior.provided.ptr.enabled?"1":"0"]]),s=s.concat([["thmb",p.getSplitVersionModel().getThumbnailsEnabled()?1:0]])),s=s.concat([["snd",W?"1":"0"],["fp",F],["cp",parseInt(g.continuousPlay)],["vs",H],["pt",M],["dpid",n?f.settings.dfp.adTrackingGroupNumber:o],["sitesection",g.siteSection],["vt",K],["cpvnum",$],["plid",g.playlistId||""],["assetid",A],["modal",c.get("widget").isModal()?"1":"0"],["width",U],["height",B],["vli",c.getVideoLoadIndex()],["dtype",a.getDeviceType()],["ab",E+""],["lat",r],["akw",j]]),n&&s.push(["ordpid",o]),s=s.concat([["wid",g.widgetId],["cpid",z],["insid",i.getPageViewSessionId()],["embedIndex",Q],["ver",b],["benv",N],["atei",Y],["ua",a.getBrowser().toLowerCase()],["ext_url",k],["de_url",R],["adserver","dfp"]]);
var l=[];return e.each(s,function(e,t){var i=t[0],n=(t[1]+"").substr(0,256);l.push([i,n])}),l}(),ie=function(){var t=[];return e.each(te,function(e,i){var n=i[0],o=i[1];t.push(n+"="+o)}),encodeURIComponent(t.join("&"))}(),ne=function(){return"VideoPlayer/16x9"==g.type||"VideoPlayer/Inline300"==g.type||"VideoPlayer/Studio"==g.type?"300x250":""}(),oe=function(){return"Bloomberg"==((m||{}).provider||{}).name?{ca2:"19630659",ca3:"NDN"}:{}}(),ae={adTrackingGroupNumber:ee,aud_zone_id:function(){try{return f.settings.auditude.trackingGroupAuditudeId}catch(e){}}(),buildNumber:b,buildEnvironment:N,trackingGroup:g.trackingGroup,auditudeUserData:q,auditudeParams:X,adServer:function(){try{return f.settings.ads.server}catch(e){}}(),adsEnabled:g.adsEnabled,siteSection:g.siteSection,siteSectionSecValue:D,siteSectionSubValue:x,distributorName:function(){try{return f.distributor.name}catch(e){}}(),distributorType:"",pageViewSessionId:i.getPageViewSessionId(),producerCategory:function(){try{return m.provider.category}catch(e){}}(),videoId:m.videoId,videoAssetId:A,producerId:z,videoDuration:function(){try{return m.mediaContent[0].duration}catch(e){}}(),videoIndex:d.videoIndex,videoPlayerType:K,playerBehaviorId:P,isSoundEnabled:W,isUiAdSeries:T,foldPositionId:F,wgtValue:S,widgetId:g.widgetId||"",widgetTypeId:I,pltValue:I,videoPlayerWidth:U,videoPlayerHeight:B,continuousPlay:parseInt(g.continuousPlay),rmmSoundOn:!!g.rmmSoundOn,providerName:m.provider.name,shareScenarioId:C,playlistId:g.playlistId||"",playlistName:function(){try{return c.getActivePlaylistData().title||""}catch(e){}}(),encodedEmbedOriginUrl:k,doubleEncodedEmbedOriginUrl:R,doubleEncodedCurrentPageUrl:V,videoSizeId:H,producerAuditudeId:function(){try{return f.settings.auditude.trackingGroupAuditudeId}catch(e){}}(),mediaAnalyticsC5Value:c.isShowingRmm()||"VideoPlayer/PTR"==p.getSplitVersionId()?"02":"03",embedMethod:n.isEmbeddedByIframe()?"iframe":"JS",embedIndex:Q,dfpParams:te,dfpEncodedParams:ie,dfpIuValue:J,dfpCiuSzsValue:ne,dfpPodPositionValue:p.getDfpPodPositionValue(),truViewCounter:$,hasAdBlock:v,adBlockDetectionId:E,comscoreCa2:oe.ca2||"null",comscoreCa3:oe.ca3||"null",comscoreCa6:oe.ca6||"null"};return r.inMode("playerParams")&&"function"==typeof console.dir&&(console.log("[Ndn_VideoPlayer] Parameters:"),console.dir(ae)),ae},getShareScenarioId:function(e,t){var i=e.email.enabled,n=e.socialNetworks.enabled,o=t.embedCode.enabled;switch(!0){case n&&i&&o:return 1;case n&&i&&!o:return 2;case n&&!i&&!o:return 3;case!n&&i&&o:return 4;case!n&&!i&&o:return 5;case!n&&!i&&!o:return 6;case!n&&i&&!o:return 7}},getPlayerBehaviorId:function(e,t,i){return e.isRotatingRmm()?"5":e.isShowingPtr()&&i.ptr.playsInIframe?"6":e.isShowingPtr()?"4":e.isShowingRmm()?"2":t.autoPlay?"1":t.playOnInView?"7":t.playOnMouseover?"3":"0"},getWgtValue:function(e,i){if(i){if(e.rmmSoundOn){if("VideoPlayer/Inline300"==e.type||"VideoLauncher/Slider"==e.type)return 9;if("VideoPlayer/Inline590"==e.type)return 10}else if(t.contains(["VideoPlayer/Inline300","VideoPlayer/Inline590","VideoLauncher/Slider","VideoLauncher/Playlist300x250","VideoPlayer/PTR"],e.type))return 1;if(t.contains(["VideoLauncher/VerticalTower","VideoLauncher/Horizontal"],e.type))return 8}else if(t.contains(["VideoPlayer/PTR"],o.getType(e)))return 1;return 0},getVideoSizeId:function(e){return 300>=e?1:315>e?2:350>e?3:400>e?4:5},getAuditudeUserDataString:function(t){var n="",o=["legolas"];return e.each(o,function(){var t=i.getAdsTargeting().getInstance(this),o=t.get("auditudeSegmentsKey");t.isLoaded()&&e.each(t.getSegments(),function(){n+=o+"="+this+";"})}),e.each(t,function(e,t){n+=e+"="+t+";"}),n}};return l}),Ndn_Require.define("models/Ndn/TemplateSet",["underscore","backbone","mustache"],function(e,t,i){return t.Model.extend({defaults:{rendered:[],templates:{}},initialize:function(e){this.set("templates",e)},getTemplate:function(t,n){var o=this.get("templates")[t][0],a=this.get("templates")[t][1];return"undefined"==typeof n?("undefined"==typeof this.get("rendered")[t]&&(this.get("rendered")[t]=i.to_html(o,a)),this.get("rendered")[t]):i.to_html(o,e.extend({},a,n))}})}),Ndn_Require.define("text!lib/amp.premier/config/skin/ndn_assets.xml",[],function(){return"<application>\n	<player ad_control_enabled='true' ad_server_timeout='20'\n		auto_replay='false' branding_preload='none' core_player_name='ndn-player'\n		dvr_enabled='0' fullscreen_enabled='true' hds_live_low_latency='true'\n		mbr_start_index='2' netsession_install_prompt_frequency_secs='-1'\n		show_feature_bar='false' use_last_known_bitrate='false'\n		use_netsession_client='false' volume='75'>\n	</player>\n	<locale id=\"en\"></locale>\n</application>"}),Ndn_Require.define("text!lib/amp.premier/config/skin/ndn_assets_small.xml",[],function(){return"<application>\n	<player ad_control_enabled='true' ad_server_timeout='20'\n		branding_preload='none' core_player_name='ndn-player' dvr_enabled='0'\n		hds_live_low_latency='true' mbr_start_index='2'\n		netsession_install_prompt_frequency_secs='-1' show_feature_bar='false'\n		use_last_known_bitrate='false' use_netsession_client='false'>\n	</player>\n	<!-- \n	<view skin='{{akamaiJsLibFolderUrl}}/ndn.assets.small.swf'>\n		<element id='adOptions'>\n			<element id='adChoices' target='http://assets.newsinc.com/info/adchoices.html' />\n			<element id='adCountdown' />\n            <element id=\"adCount\" />\n		</element>\n		<element id='captionDisplay' style='bottom: 0px; opacity:1;' />\n		<element id='controls' scrubPosition='top' backgroundAlpha='.8' height='40' itemMargin='12' autoHideDelay='1' transitionTime='0.5'>\n			<element id='playPauseBtn' />\n			<element id='scrubBar' collapsedHeight='4' style='background: linear-gradient(90deg, #232323 #232323); height: 4px;' />\n			<element id='progressBar' style='background: linear-gradient(90deg, #0099CC #0099CC);' />\n			<element id='loadedBar' style='background: linear-gradient(90deg, #666666 #666666);' />\n			<element id='streamTimeIndicator' position='left'>\n				<element id='streamTime' />\n				<element id='streamDuration' color='#666666' />\n			</element>\n			<element id='shareBtn' />\n			<element id='facebookBtn' />\n			<element id='twitterBtn' />\n			<element id='volumeBar' backgroundColor='#111111' trackColor='#C1C1C3' color='#0099CC' position='relative' width='25' />\n			<element id='volumeBtn' />\n			<element id='fullscreenBtn' />\n			<element id='posterBackground' color='#000000' alpha='1' />\n		</element>\n		<element id=\"loadingView\" radius=\"0\" />\n	</view>\n	-->\n	<locale id=\"en\"></locale>\n</application>"}),Ndn_Require.define("lib/amp.premier/config/skin/templates",["models/Ndn/TemplateSet","models/Ndn/Widget","text!lib/amp.premier/config/skin/ndn_assets.xml","text!lib/amp.premier/config/skin/ndn_assets_small.xml"],function(e,t,i,n){var o={akamaiJsLibFolderUrl:t.getAppUrl()+"/js/lib/amp.premier",akamaiResourcesFolderUrl:t.getAppUrl()+"/resources"};return new e({ndn_assets:[i,o],ndn_assets_small:[n,o]})}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){if(void 0===this||null===this)throw new TypeError('"this" is null or not defined');var i=this.length>>>0;for(t=+t||0,1/0===Math.abs(t)&&(t=0),0>t&&(t+=i,0>t&&(t=0));i>t;t++)if(this[t]===e)return t;return-1}),Date.now||(Date.now=function(){return+new Date}),Function.prototype.bind||(Function.prototype.bind=function(e){function t(){}if("function"!=typeof this)throw new TypeError("Bind must be called on a function");var i=[].slice,n=i.call(arguments,1),o=this,a=function(){return o.apply(this instanceof t?this:e||{},n.concat(i.call(arguments)))};return t.prototype=o.prototype,a.prototype=new t,a}),"object"!=typeof JSON&&(JSON={}),function(){function f(e){return 10>e?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var i,n,o,a,r,s=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,r=[],"[object Array]"===Object.prototype.toString.apply(l)){for(a=l.length,i=0;a>i;i+=1)r[i]=str(i,l)||"null";return o=0===r.length?"[]":gap?"[\n"+gap+r.join(",\n"+gap)+"\n"+s+"]":"["+r.join(",")+"]",gap=s,o}if(rep&&"object"==typeof rep)for(a=rep.length,i=0;a>i;i+=1)"string"==typeof rep[i]&&(n=rep[i],o=str(n,l),o&&r.push(quote(n)+(gap?": ":":")+o));else for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(o=str(n,l),o&&r.push(quote(n)+(gap?": ":":")+o));return o=0===r.length?"{}":gap?"{\n"+gap+r.join(",\n"+gap)+"\n"+s+"}":"{"+r.join(",")+"}",gap=s,o}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,i){var n;if(gap="",indent="","number"==typeof i)for(n=0;i>n;n+=1)indent+=" ";else"string"==typeof i&&(indent=i);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var i,n,o=e[t];if(o&&"object"==typeof o)for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n=walk(o,i),void 0!==n?o[i]=n:delete o[i]);return reviver.call(e,t,o)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(e){function t(e,t){this.setNotifyMethod(e),this.setNotifyContext(t)}function i(e,t,i){this.name=e,this.body=t,this.type=i}function n(){}function o(){}function a(){this.subCommands=[],this.initializeMacroCommand()}function r(e,t){this.mediatorName=e||this.constructor.NAME,this.viewComponent=t}function s(e,t){this.proxyName=e||this.constructor.NAME,null!=t&&this.setData(t)}function l(e){if(null!=l.instanceMap[e])throw Error(l.MULTITON_MSG);this.initializeNotifier(e),l.instanceMap[e]=this,this.initializeFacade()}function d(e){if(null!=d.instanceMap[e])throw Error(d.MULTITON_MSG);this.multitonKey=e,d.instanceMap[this.multitonKey]=this,this.mediatorMap=[],this.observerMap=[],this.initializeView()}function c(e){if(c.instanceMap[e])throw Error(c.MULTITON_MSG);this.multitonKey=e,c.instanceMap[e]=this,this.proxyMap=[],this.initializeModel()}function u(e){if(null!=u.instanceMap[e])throw Error(u.MULTITON_MSG);this.multitonKey=e,u.instanceMap[this.multitonKey]=this,this.commandMap=[],this.initializeController()}function p(e,t,i){for(var n,o,e=e.split("."),i=i||h.global,a=0,r=e.length;r>a;a++)n=i,o=e[a],i=null==i[o]?i[o]={}:i[o];return null==t?i:n[o]=t}if(null==e&&(e=window),!e.puremvc){t.prototype.setNotifyMethod=function(e){this.notify=e},t.prototype.setNotifyContext=function(e){this.context=e},t.prototype.getNotifyMethod=function(){return this.notify},t.prototype.getNotifyContext=function(){return this.context},t.prototype.notifyObserver=function(e){this.getNotifyMethod().call(this.getNotifyContext(),e)},t.prototype.compareNotifyContext=function(e){return e===this.context},t.prototype.notify=null,t.prototype.context=null,i.prototype.getName=function(){return this.name},i.prototype.setBody=function(e){this.body=e},i.prototype.getBody=function(){return this.body},i.prototype.setType=function(e){this.type=e},i.prototype.getType=function(){return this.type},i.prototype.toString=function(){var e="Notification Name: "+this.getName(),e=e+("\nBody:"+(null==this.body?"null":this.body.toString()));return e+="\nType:"+(null==this.type?"null":this.type)},i.prototype.name=null,i.prototype.type=null,i.prototype.body=null,n.prototype.sendNotification=function(e,t,i){var n=this.getFacade();n&&n.sendNotification(e,t,i)},n.prototype.initializeNotifier=function(e){this.multitonKey=""+e,this.facade=this.getFacade()},n.prototype.getFacade=function(){if(null==this.multitonKey)throw Error(n.MULTITON_MSG);return l.getInstance(this.multitonKey)},n.prototype.multitonKey=null,n.MULTITON_MSG="multitonKey for this Notifier not yet initialized!",o.prototype=new n,o.prototype.constructor=o,o.prototype.execute=function(){},a.prototype=new n,a.prototype.constructor=a,a.prototype.subCommands=null,a.prototype.initializeMacroCommand=function(){},a.prototype.addSubCommand=function(e){this.subCommands.push(e)},a.prototype.execute=function(e){for(;0<this.subCommands.length;){var t=new(this.subCommands.shift());t.initializeNotifier(this.multitonKey),t.execute(e)}},r.NAME="Mediator",r.prototype=new n,r.prototype.constructor=r,r.prototype.getMediatorName=function(){return this.mediatorName},r.prototype.setViewComponent=function(e){this.viewComponent=e},r.prototype.getViewComponent=function(){return this.viewComponent},r.prototype.listNotificationInterests=function(){return[]},r.prototype.handleNotification=function(){},r.prototype.onRegister=function(){},r.prototype.onRemove=function(){},r.prototype.mediatorName=null,r.prototype.viewComponent=null,s.NAME="Proxy",s.prototype=new n,s.prototype.constructor=s,s.prototype.getProxyName=function(){return this.proxyName},s.prototype.setData=function(e){this.data=e},s.prototype.getData=function(){return this.data},s.prototype.onRegister=function(){},s.prototype.onRemove=function(){},s.prototype.proxyName=null,s.prototype.data=null,l.prototype.initializeFacade=function(){this.initializeModel(),this.initializeController(),this.initializeView()},l.getInstance=function(e){return null==e?null:(null==l.instanceMap[e]&&(l.instanceMap[e]=new l(e)),l.instanceMap[e])},l.prototype.initializeController=function(){null==this.controller&&(this.controller=u.getInstance(this.multitonKey))},l.prototype.initializeModel=function(){null==this.model&&(this.model=c.getInstance(this.multitonKey))},l.prototype.initializeView=function(){null==this.view&&(this.view=d.getInstance(this.multitonKey))},l.prototype.registerCommand=function(e,t){this.controller.registerCommand(e,t)},l.prototype.removeCommand=function(e){this.controller.removeCommand(e)},l.prototype.hasCommand=function(e){return this.controller.hasCommand(e)},l.prototype.registerProxy=function(e){this.model.registerProxy(e)},l.prototype.retrieveProxy=function(e){return this.model.retrieveProxy(e)},l.prototype.removeProxy=function(e){var t=null;return null!=this.model&&(t=this.model.removeProxy(e)),t},l.prototype.hasProxy=function(e){return this.model.hasProxy(e)},l.prototype.registerMediator=function(e){null!=this.view&&this.view.registerMediator(e)},l.prototype.retrieveMediator=function(e){return this.view.retrieveMediator(e)},l.prototype.removeMediator=function(e){var t=null;return null!=this.view&&(t=this.view.removeMediator(e)),t},l.prototype.hasMediator=function(e){return this.view.hasMediator(e)},l.prototype.sendNotification=function(e,t,n){this.notifyObservers(new i(e,t,n))},l.prototype.notifyObservers=function(e){null!=this.view&&this.view.notifyObservers(e)},l.prototype.initializeNotifier=function(e){this.multitonKey=e},l.hasCore=function(e){return null!=l.instanceMap[e]},l.removeCore=function(e){null!=l.instanceMap[e]&&(c.removeModel(e),d.removeView(e),u.removeController(e),delete l.instanceMap[e])},l.prototype.controller=null,l.prototype.model=null,l.prototype.view=null,l.prototype.multitonKey=null,l.instanceMap=[],l.MULTITON_MSG="Facade instance for this Multiton key already constructed!",d.prototype.initializeView=function(){},d.getInstance=function(e){return null==e?null:(null==d.instanceMap[e]&&(d.instanceMap[e]=new d(e)),d.instanceMap[e])},d.prototype.registerObserver=function(e,t){null!=this.observerMap[e]?this.observerMap[e].push(t):this.observerMap[e]=[t]},d.prototype.notifyObservers=function(e){if(null!=this.observerMap[e.getName()]){for(var t,i=this.observerMap[e.getName()],n=[],o=0;o<i.length;o++)t=i[o],n.push(t);for(o=0;o<n.length;o++)t=n[o],t.notifyObserver(e)}},d.prototype.removeObserver=function(e,t){for(var i=this.observerMap[e],n=0;n<i.length;n++)if(1==i[n].compareNotifyContext(t)){i.splice(n,1);break}0==i.length&&delete this.observerMap[e]},d.prototype.registerMediator=function(e){if(null==this.mediatorMap[e.getMediatorName()]){e.initializeNotifier(this.multitonKey),this.mediatorMap[e.getMediatorName()]=e;var i=e.listNotificationInterests();if(0<i.length)for(var n=new t(e.handleNotification,e),o=0;o<i.length;o++)this.registerObserver(i[o],n);e.onRegister()}},d.prototype.retrieveMediator=function(e){return this.mediatorMap[e]},d.prototype.removeMediator=function(e){var t=this.mediatorMap[e];if(t){for(var i=t.listNotificationInterests(),n=0;n<i.length;n++)this.removeObserver(i[n],t);delete this.mediatorMap[e],t.onRemove()}return t},d.prototype.hasMediator=function(e){return null!=this.mediatorMap[e]},d.removeView=function(e){delete d.instanceMap[e]},d.prototype.mediatorMap=null,d.prototype.observerMap=null,d.instanceMap=[],d.prototype.multitonKey=null,d.MULTITON_MSG="View instance for this Multiton key already constructed!",c.prototype.initializeModel=function(){},c.getInstance=function(e){return null==e?null:(null==c.instanceMap[e]&&(c.instanceMap[e]=new c(e)),c.instanceMap[e])},c.prototype.registerProxy=function(e){e.initializeNotifier(this.multitonKey),this.proxyMap[e.getProxyName()]=e,e.onRegister()},c.prototype.retrieveProxy=function(e){return this.proxyMap[e]},c.prototype.hasProxy=function(e){return null!=this.proxyMap[e]},c.prototype.removeProxy=function(e){var t=this.proxyMap[e];return t&&(this.proxyMap[e]=null,t.onRemove()),t},c.removeModel=function(e){delete c.instanceMap[e]},c.prototype.proxyMap=null,c.instanceMap=[],c.MULTITON_MSG="Model instance for this Multiton key already constructed!",u.prototype.initializeController=function(){this.view=d.getInstance(this.multitonKey)},u.getInstance=function(e){return null==e?null:(null==this.instanceMap[e]&&(this.instanceMap[e]=new this(e)),this.instanceMap[e])},u.prototype.executeCommand=function(e){var t=this.commandMap[e.getName()];null!=t&&(t=new t,t.initializeNotifier(this.multitonKey),t.execute(e))},u.prototype.registerCommand=function(e,i){null==this.commandMap[e]&&this.view.registerObserver(e,new t(this.executeCommand,this)),this.commandMap[e]=i},u.prototype.hasCommand=function(e){return null!=this.commandMap[e]},u.prototype.removeCommand=function(e){this.hasCommand(e)&&(this.view.removeObserver(e,this),this.commandMap[e]=null)},u.removeController=function(e){delete this.instanceMap[e]},u.prototype.view=null,u.prototype.commandMap=null,u.prototype.multitonKey=null,u.instanceMap=[],u.MULTITON_MSG="controller key for this Multiton key already constructed";var h={global:function(){return this}(),extend:function(e,t){if("function"!=typeof e)throw new TypeError("#extend- child should be Function");if("function"!=typeof t)throw new TypeError("#extend- parent should be Function");if(t!==e){var i=new Function;return i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}},decorate:function(e,t){for(var i in t)e[i]=t[i];return e}};e.puremvc={View:d,Model:c,Controller:u,SimpleCommand:o,MacroCommand:a,Facade:l,Mediator:r,Observer:t,Notification:i,Notifier:n,Proxy:s,define:function(e,t,i){e||(e={});var n=e.name,o=e.parent,a="function"==typeof o,r=e.scope||null;if("parent"in e&&!a)throw new TypeError("Class parent must be Function");if(e.hasOwnProperty("constructor")){if(e=e.constructor,"function"!=typeof e)throw new TypeError("Class constructor must be Function")}else e=a?function(){o.apply(this,arguments)}:new Function;if(a&&h.extend(e,o),t&&(a=e.prototype,h.decorate(a,t),a.constructor=e),i&&h.decorate(e,i),n){if("string"!=typeof n)throw new TypeError("Class name must be primitive string");p(n,e,r)}return e},declare:p}}}(this);var swfobject=function(){function e(){if(!M){try{var e=I.getElementsByTagName("body")[0].appendChild(I.createElement("span"));e.parentNode.removeChild(e)}catch(t){return}M=!0;for(var e=T.length,i=0;e>i;i++)T[i]()}}function t(e){M?e():T[T.length]=e}function i(e){if("undefined"!=typeof N.addEventListener)N.addEventListener("load",e,!1);else if("undefined"!=typeof I.addEventListener)I.addEventListener("load",e,!1);else if("undefined"!=typeof N.attachEvent)h(N,"onload",e);else if("function"==typeof N.onload){var t=N.onload;N.onload=function(){t(),e()}}else N.onload=e}function n(){var e=I.getElementsByTagName("body")[0],t=I.createElement("object");t.setAttribute("type","application/x-shockwave-flash");var i=e.appendChild(t);if(i){var n=0;!function(){if("undefined"!=typeof i.GetVariable){var a=i.GetVariable("$version");a&&(a=a.split(" ")[1].split(","),R.pv=[parseInt(a[0],10),parseInt(a[1],10),parseInt(a[2],10)])}else if(10>n)return n++,void setTimeout(arguments.callee,10);e.removeChild(t),i=null,o()}()}else o()}function o(){var e=w.length;if(e>0)for(var t=0;e>t;t++){var i=w[t].id,n=w[t].callbackFn,o={success:!1,id:i};if(0<R.pv[0]){var d=p(i);if(d)if(!g(w[t].swfVersion)||R.wk&&312>R.wk)if(w[t].expressInstall&&r()){o={},o.data=w[t].expressInstall,o.width=d.getAttribute("width")||"0",o.height=d.getAttribute("height")||"0",d.getAttribute("class")&&(o.styleclass=d.getAttribute("class")),d.getAttribute("align")&&(o.align=d.getAttribute("align"));for(var c={},d=d.getElementsByTagName("param"),u=d.length,h=0;u>h;h++)"movie"!=d[h].getAttribute("name").toLowerCase()&&(c[d[h].getAttribute("name")]=d[h].getAttribute("value"));s(o,c,i,n)}else l(d),n&&n(o);else f(i,!0),n&&(o.success=!0,o.ref=a(i),n(o))}else f(i,!0),n&&((i=a(i))&&"undefined"!=typeof i.SetVariable&&(o.success=!0,o.ref=i),n(o))}}function a(e){var t=null;return(e=p(e))&&"OBJECT"==e.nodeName&&("undefined"!=typeof e.SetVariable?t=e:(e=e.getElementsByTagName("object")[0])&&(t=e)),t}function r(){return!L&&g("6.0.65")&&(R.win||R.mac)&&!(R.wk&&312>R.wk)}function s(e,t,i,n){L=!0,E=n||null,A={success:!1,id:i};var o=p(i);o&&("OBJECT"==o.nodeName?(_=d(o),v=null):(_=o,v=i),e.id="SWFObjectExprInst",("undefined"==typeof e.width||!/%$/.test(e.width)&&310>parseInt(e.width,10))&&(e.width="310"),("undefined"==typeof e.height||!/%$/.test(e.height)&&137>parseInt(e.height,10))&&(e.height="137"),I.title=I.title.slice(0,47)+" - Flash Player Installation",n=R.ie&&R.win?"ActiveX":"PlugIn",n="MMredirectURL="+encodeURI(N.location).toString().replace(/&/g,"%26")+"&MMplayerType="+n+"&MMdoctitle="+I.title,t.flashvars="undefined"!=typeof t.flashvars?t.flashvars+("&"+n):n,R.ie&&R.win&&4!=o.readyState&&(n=I.createElement("div"),i+="SWFObjectNew",n.setAttribute("id",i),o.parentNode.insertBefore(n,o),o.style.display="none",function(){4==o.readyState?o.parentNode.removeChild(o):setTimeout(arguments.callee,10)}()),c(e,t,i))}function l(e){if(R.ie&&R.win&&4!=e.readyState){var t=I.createElement("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(d(e),t),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(d(e),e)}function d(e){var t=I.createElement("div");if(R.win&&R.ie)t.innerHTML=e.innerHTML;else if((e=e.getElementsByTagName("object")[0])&&(e=e.childNodes))for(var i=e.length,n=0;i>n;n++)1==e[n].nodeType&&"PARAM"==e[n].nodeName||8==e[n].nodeType||t.appendChild(e[n].cloneNode(!0));return t}function c(e,t,i){var n,o=p(i);if(R.wk&&312>R.wk)return n;if(o)if("undefined"==typeof e.id&&(e.id=i),R.ie&&R.win){var a,r="";for(a in e)e[a]!=Object.prototype[a]&&("data"==a.toLowerCase()?t.movie=e[a]:"styleclass"==a.toLowerCase()?r+=' class="'+e[a]+'"':"classid"!=a.toLowerCase()&&(r+=" "+a+'="'+e[a]+'"'));a="";for(var s in t)t[s]!=Object.prototype[s]&&(a+='<param name="'+s+'" value="'+t[s]+'" />');o.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+r+">"+a+"</object>",D[D.length]=e.id,n=p(e.id)}else{s=I.createElement("object"),s.setAttribute("type","application/x-shockwave-flash");for(var l in e)e[l]!=Object.prototype[l]&&("styleclass"==l.toLowerCase()?s.setAttribute("class",e[l]):"classid"!=l.toLowerCase()&&s.setAttribute(l,e[l]));for(r in t)t[r]!=Object.prototype[r]&&"movie"!=r.toLowerCase()&&(e=s,a=r,l=t[r],i=I.createElement("param"),i.setAttribute("name",a),i.setAttribute("value",l),e.appendChild(i));o.parentNode.replaceChild(s,o),n=s}return n}function u(e){var t=p(e);t&&"OBJECT"==t.nodeName&&(R.ie&&R.win?(t.style.display="none",function(){if(4==t.readyState){var i=p(e);if(i){for(var n in i)"function"==typeof i[n]&&(i[n]=null);i.parentNode.removeChild(i)}}else setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function p(e){var t=null;try{t=I.getElementById(e)}catch(i){}return t}function h(e,t,i){e.attachEvent(t,i),x[x.length]=[e,t,i]}function g(e){var t=R.pv;return e=e.split("."),e[0]=parseInt(e[0],10),e[1]=parseInt(e[1],10)||0,e[2]=parseInt(e[2],10)||0,t[0]>e[0]||t[0]==e[0]&&t[1]>e[1]||t[0]==e[0]&&t[1]==e[1]&&t[2]>=e[2]?!0:!1}function m(e,t,i,n){if(!R.ie||!R.mac){var o=I.getElementsByTagName("head")[0];o&&(i=i&&"string"==typeof i?i:"screen",n&&(b=C=null),C&&b==i||(n=I.createElement("style"),n.setAttribute("type","text/css"),n.setAttribute("media",i),C=o.appendChild(n),R.ie&&R.win&&"undefined"!=typeof I.styleSheets&&0<I.styleSheets.length&&(C=I.styleSheets[I.styleSheets.length-1]),b=i),R.ie&&R.win?C&&"object"==typeof C.addRule&&C.addRule(e,t):C&&"undefined"!=typeof I.createTextNode&&C.appendChild(I.createTextNode(e+" {"+t+"}")))}}function f(e,t){if(k){var i=t?"visible":"hidden";M&&p(e)?p(e).style.visibility=i:m("#"+e,"visibility:"+i)}}function y(e){return null!=/[\\\"<>\.;]/.exec(e)&&"undefined"!=typeof encodeURIComponent?encodeURIComponent(e):e}var _,v,E,A,C,b,N=window,I=document,P=navigator,S=!1,T=[function(){S?n():o()}],w=[],D=[],x=[],M=!1,L=!1,k=!0,R=function(){var e="undefined"!=typeof I.getElementById&&"undefined"!=typeof I.getElementsByTagName&&"undefined"!=typeof I.createElement,t=P.userAgent.toLowerCase(),i=P.platform.toLowerCase(),n=i?/win/.test(i):/win/.test(t),i=i?/mac/.test(i):/mac/.test(t),t=/webkit/.test(t)?parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,o=!1,a=[0,0,0],r=null;if("undefined"!=typeof P.plugins&&"object"==typeof P.plugins["Shockwave Flash"])!(r=P.plugins["Shockwave Flash"].description)||"undefined"!=typeof P.mimeTypes&&P.mimeTypes["application/x-shockwave-flash"]&&!P.mimeTypes["application/x-shockwave-flash"].enabledPlugin||(S=!0,o=!1,r=r.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),a[0]=parseInt(r.replace(/^(.*)\..*$/,"$1"),10),a[1]=parseInt(r.replace(/^.*\.(.*)\s.*$/,"$1"),10),a[2]=/[a-zA-Z]/.test(r)?parseInt(r.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if("undefined"!=typeof N.ActiveXObject)try{var s=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");s&&(r=s.GetVariable("$version"))&&(o=!0,r=r.split(" ")[1].split(","),a=[parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10)])}catch(l){}return{w3:e,pv:a,wk:t,ie:o,win:n,mac:i}}();return function(){R.w3&&(("undefined"!=typeof I.readyState&&"complete"==I.readyState||"undefined"==typeof I.readyState&&(I.getElementsByTagName("body")[0]||I.body))&&e(),M||("undefined"!=typeof I.addEventListener&&I.addEventListener("DOMContentLoaded",e,!1),R.ie&&R.win&&(I.attachEvent("onreadystatechange",function(){"complete"==I.readyState&&(I.detachEvent("onreadystatechange",arguments.callee),e())}),N==top&&function(){if(!M){try{I.documentElement.doScroll("left")}catch(t){return void setTimeout(arguments.callee,0)}e()}}()),R.wk&&function(){M||(/loaded|complete/.test(I.readyState)?e():setTimeout(arguments.callee,0))}(),i(e)))}(),function(){R.ie&&R.win&&window.attachEvent("onunload",function(){for(var e=x.length,t=0;e>t;t++)x[t][0].detachEvent(x[t][1],x[t][2]);for(e=D.length,t=0;e>t;t++)u(D[t]);for(var i in R)R[i]=null;R=null;for(var n in swfobject)swfobject[n]=null;swfobject=null})}(),{registerObject:function(e,t,i,n){if(R.w3&&e&&t){var o={};o.id=e,o.swfVersion=t,o.expressInstall=i,o.callbackFn=n,w[w.length]=o,f(e,!1)}else n&&n({success:!1,id:e})},getObjectById:function(e){return R.w3?a(e):void 0},embedSWF:function(e,i,n,o,a,l,d,u,p,h){var m={success:!1,id:i};R.w3&&!(R.wk&&312>R.wk)&&e&&i&&n&&o&&a?(f(i,!1),t(function(){n+="",o+="";var t={};if(p&&"object"==typeof p)for(var y in p)t[y]=p[y];if(t.data=e,t.width=n,t.height=o,y={},u&&"object"==typeof u)for(var _ in u)y[_]=u[_];if(d&&"object"==typeof d)for(var v in d)y.flashvars="undefined"!=typeof y.flashvars?y.flashvars+("&"+v+"="+d[v]):v+"="+d[v];if(g(a))_=c(t,y,i),t.id==i&&f(i,!0),m.success=!0,m.ref=_;else{if(l&&r())return t.data=l,void s(t,y,i,h);f(i,!0)}h&&h(m)})):h&&h(m)},switchOffAutoHideShow:function(){k=!1},ua:R,getFlashPlayerVersion:function(){return{major:R.pv[0],minor:R.pv[1],release:R.pv[2]}},hasFlashPlayerVersion:g,createSWF:function(e,t,i){return R.w3?c(e,t,i):void 0},showExpressInstall:function(e,t,i,n){R.w3&&r()&&s(e,t,i,n)},removeSWF:function(e){R.w3&&u(e)},createCSS:function(e,t,i,n){R.w3&&m(e,t,i,n)},addDomLoadEvent:t,addLoadEvent:i,callDomLoadFunctions:e,getQueryParamValue:function(e){var t=I.location.search||I.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return y(t);for(var t=t.split("&"),i=0;i<t.length;i++)if(t[i].substring(0,t[i].indexOf("="))==e)return y(t[i].substring(t[i].indexOf("=")+1))}return""},expressInstallCallback:function(){if(L){var e=p("SWFObjectExprInst");e&&_&&(e.parentNode.replaceChild(_,e),v&&(f(v,!0),R.ie&&R.win&&(_.style.display="block")),E&&E(A)),L=!1}}}}();!function(){function e(){var e,t,i,n=this;t=null,this.getSDK=function(){return t},this.setSDK=function(i){var n,o;t=i,e();for(n in t)o=t[n],window[n]=o;return t},this.saveSDK=function(e,t){var n,o,a;if(null!=t&&null!=e&&""!==e){if(null==t.main)for(n in t)if(o=t[n],(null!=o?o.VERSION:void 0)===e){t.main=o;break}return null==(a=t.version)&&(t.version=e),i.push(t),this[e]=t,t}},i=[],this.getVersions=function(){return i.slice()},this.getVersion=function(e){return this[e]},this.setVersion=function(e){return t=this.getVersion(e),null==t?null:(this.setSDK(t),t)},this.revert=function(){return this.setSDK(i[0])},this.noConflict=function(){var e;return e=this.getSDK(),this.revert(),e},this.create=function(){var e;return e=function(e,t){return this.prototype=e.prototype,e.apply(this,t)},function(i){return new e(t.main,arguments)}}(),(e=function(){var e,i,o,a,r;if(null!=(a=window.com)&&null!=(r=a.akamai)?r.amp:void 0)for(e in window)if(o=window[e],(o===window.AMP||o===window.AMPremier)&&null!=(null!=o?o.VERSION:void 0)&&""!==o.VERSION&&o.VERSION!==(null!=t?t.version:void 0)&&null==n[o.VERSION]){i={},i.main=o,i.com=window.com,window.AMP&&(i.AMP=window.AMP),window.AMPPremier&&(i.AMPremier=window.AMPPremier),window.Utils&&(i.Utils=window.Utils),window.QueryString&&(i.QueryString=window.QueryString),window.QueryParams&&(i.QueryParams=window.QueryParams),n.saveSDK(o.VERSION,i);break}})()}function t(e){return{}.hasOwnProperty(e)}function i(e,i){function n(){this.constructor=e}for(var o in i)t.call(i,o)&&(e[o]=i[o]);return n.prototype=i.prototype,e.prototype=new n,e.__super__=i.prototype,e}function n(e){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1}function o(e,t){return function(){return e.apply(t,arguments);
}}function a(){}function r(e,t){this.config=e,r.__super__.constructor.call(this,t)}function s(e){this.viewComponent=e,s.__super__.constructor.call(this,this.getModuleName()+"-"+Date.now()),this.dispatcher=new Nt(this),this.logger=bt,this.moduleMap={}}function l(){}function d(){d.__super__.constructor.call(this)}function c(e){var t,i,n,o;e.className=mo.PREFIX+"player",i=et.create("install-flash",e),o=et.create(null,i,"p","To view this page ensure that Adobe Flash Player version 10.2.0 or greater is installed."),t=et.create(null,i,"a"),t.href="http://www.adobe.com/go/getflashplayer",n=et.create(null,t,"img"),n.src="//www.adobe.com/images/shared/download_buttons/get_flash_player.gif",n.alt="Get Adobe Flash player"}function u(){this.map={}}function p(){p.__super__.constructor.call(this)}function h(){h.__super__.constructor.call(this)}function g(){g.__super__.constructor.call(this)}function m(){m.__super__.constructor.call(this)}function f(){f.__super__.constructor.call(this)}function y(){y.__super__.constructor.call(this)}function _(){_.__super__.constructor.call(this)}function v(){v.__super__.constructor.call(this)}function E(){E.__super__.constructor.call(this)}function A(){A.__super__.constructor.call(this)}function C(){C.__super__.constructor.call(this)}function N(){N.__super__.constructor.call(this)}function I(){I.__super__.constructor.call(this)}function P(){P.__super__.constructor.call(this)}function S(){S.__super__.constructor.call(this)}function T(){T.__super__.constructor.call(this)}function w(){w.__super__.constructor.call(this)}function D(){D.__super__.constructor.call(this)}function x(){x.__super__.constructor.call(this)}function M(){M.__super__.constructor.call(this)}function L(){L.__super__.constructor.call(this)}function k(){k.__super__.constructor.call(this)}function R(){R.__super__.constructor.call(this)}function O(){O.__super__.constructor.call(this)}function V(){V.__super__.constructor.call(this)}function G(){G.__super__.constructor.call(this)}function U(){U.__super__.constructor.call(this)}function B(){B.__super__.constructor.call(this)}function H(){H.__super__.constructor.call(this)}function F(){F.__super__.constructor.call(this)}function j(){j.__super__.constructor.call(this)}function z(){z.__super__.constructor.call(this)}function W(e){null==this.cssPrefix&&(this.cssPrefix=mo.PREFIX),W.__super__.constructor.call(this,this.mediatorName,e)}function Y(e){Y.__super__.constructor.call(this,e)}function q(e,t,i,n){this.componentName=null!=e?e:this.componentName,this.componentType=null!=t?t:this.componentType,this.viewComponent=this.createViewComponent(i,n),this.classList=this.viewComponent._classList,null==this.mediatorName&&(this.mediatorName=this.createMediatorName()),q.__super__.constructor.call(this,this.viewComponent)}function Z(){Z.__super__.constructor.call(this,null,null,null,null)}function X(){X.__super__.constructor.call(this)}function J(){J.__super__.constructor.call(this)}function K(){K.__super__.constructor.call(this)}function $(){$.__super__.constructor.call(this)}function Q(){}function ee(){ee.__super__.constructor.call(this)}function te(){te.__super__.constructor.call(this)}function ie(){ie.__super__.constructor.call(this),this.keyHandler=this.keypress.bind(this)}function ne(){ne.__super__.constructor.call(this)}function oe(){oe.__super__.constructor.call(this)}function ae(e){ae.__super__.constructor.call(this,e)}function re(e){re.__super__.constructor.call(this,e)}function se(){se.__super__.constructor.call(this,this.constructor.NAME,{}),this.setupHDN1()}function le(e){le.__super__.constructor.call(this,e)}function de(){de.__super__.constructor.call(this)}function ce(e,t){this.player=e,this.config=t,ce.__super__.constructor.call(this,this.constructor.NAME),this.proxy=new lt(this.config),this.player.registerProxy(this.proxy)}function ue(e,t){this.mediatorName="#@{getComponentType()}-mediator",ue.__super__.constructor.call(this,e,null,null,t)}function pe(){pe.__super__.constructor.call(this)}function he(){he.__super__.constructor.call(this)}function ge(e,t){this.componentName=e,this.layers=[],ge.__super__.constructor.call(this,null,null,null,t)}function me(e){me.__super__.constructor.call(this,this.type,e)}function fe(){fe.__super__.constructor.call(this)}function ye(){ye.__super__.constructor.call(this)}function _e(){_e.__super__.constructor.call(this)}function ve(){ve.__super__.constructor.call(this)}function Ee(){}function Ae(){Ae.__super__.constructor.call(this)}function Ce(){Ce.__super__.constructor.call(this)}function be(e){be.__super__.constructor.call(this,e)}function Ne(e){Ne.__super__.constructor.call(this,e)}function Ie(){Ie.__super__.constructor.call(this,Ie.NAME),this.data={core:null,muted:!1,started:!1,volume:1,currentTime:0,duration:0,src:null,ended:!1,paused:!1,seeking:!1,loading:!1},"desktop"===Pt.getDevice()&&(this.initialized=!0),this.handlers={timeupdate:this.ontimeupdate.bind(this),durationchange:this.ondurationchange.bind(this),play:this.onplay.bind(this),playing:this.onplaying.bind(this),pause:this.onpause.bind(this),loadeddata:this.onloadeddata.bind(this),waiting:this.onwaiting.bind(this),seeking:this.onseeking.bind(this),seeked:this.onseeked.bind(this),ended:this.onended.bind(this),progress:this.onprogress.bind(this),error:this.onerror.bind(this),loadstart:this.onloadstart.bind(this),canplay:this.oncanplay.bind(this),canplaythrough:this.oncanplaythrough.bind(this),loadedmetadata:this.onloadedmetadata.bind(this)},this.resumeHandlers={seeked:this.resumeseeked.bind(this),loadedmetadata:this.resumeloadedmetadata.bind(this)}}function Pe(){Pe.__super__.constructor.call(this)}function Se(e){this.supportedTypes=null!=e?e:this.supportedTypes,Se.__super__.constructor.call(this)}function Te(e){this.player=e,Te.__super__.constructor.call(this)}function we(e){this.flashObjectID+=Date.now(),this.plugins={},this.displayState=yo.NORMAL,this.debug=/debug\=true/.test(location.search),we.__super__.constructor.call(this,e)}function De(e){this.module=e,De.__super__.constructor.call(this,e.getModuleName(),this)}function xe(){}function Me(){Me.__super__.constructor.call(this)}function Le(e){var t,i,n;null==e&&(e={}),t=Pt.override(Xt.defaults.data,e),/amp\-debug\=true/.test(location.search.toLowerCase())===!0&&(t.debug=!0),t.mode=Pt.getPlaybackMode(t.mode),t.version=Xt.getVersion();for(i in t)n=t[i],this[i]=n}function ke(){ke.__super__.constructor.call(this),null==this.contextName&&(this.contextName=this.constructor.NAME)}function Re(){Re.__super__.constructor.call(this)}function Oe(){}function Ve(){Ve.__super__.constructor.call(this)}function Ge(){Ge.__super__.constructor.call(this)}function Ue(){Ue.__super__.constructor.call(this)}function Be(){Be.__super__.constructor.call(this)}function He(){He.__super__.constructor.call(this)}function Fe(){Fe.__super__.constructor.call(this)}function je(){je.__super__.constructor.call(this)}function ze(){ze.__super__.constructor.call(this)}function We(){We.__super__.constructor.call(this)}function Ye(){Ye.__super__.constructor.call(this)}function qe(){qe.__super__.constructor.call(this)}function Ze(){Ze.__super__.constructor.call(this)}function Xe(){Xe.__super__.constructor.call(this)}function Je(){Je.__super__.constructor.call(this)}function Ke(){this.plugins=[],this.registered=[],Ke.__super__.constructor.call(this,this.constructor.NAME,{})}function $e(e){this.element=e}function Qe(){Qe.__super__.constructor.call(this,this.constructor.NAME,{}),this.data={},this.contextMap={},this.configurationMap={}}function et(){}function tt(e){null!=e&&this.parse(e)}function it(e){it.__super__.constructor.call(this,e)}function nt(e){this.message=nt.MESSAGE+e}function ot(e){ot.__super__.constructor.call(this,e)}function at(e){at.__super__.constructor.call(this,e)}function rt(e){this.token=new RegExp(this.tokenStart.source+"([^#]*)"+this.tokenEnd.source,"g"),rt.__super__.constructor.call(this,e)}function st(e){st.__super__.constructor.call(this,e)}function lt(e){var t,i;if(lt.__super__.constructor.call(this),this.data={language:navigator.language||navigator.browserLanguage,locales:St.prototype.data.locales},null!=e&&(null!=e.language&&(this.data.language=e.language),null!=e.locales))for(i in e.locales)if(null!=this.data.locales[i])for(t in e.locales[i])this.data.locales[i][t]=e.locales[i][t];else this.data.locales[i]=e.locales[i]}function dt(e){dt.__super__.constructor.call(this,e)}function ct(){ct.__super__.constructor.call(this)}function ut(){ut.__super__.constructor.call(this),this.device=Pt.getDevice()}function pt(e){this.defaults=St.prototype.data,pt.__super__.constructor.call(this,e)}function ht(e,t,i){var a;this.target=e,this.type=t,this.handler=i,this.trigger=o(this.trigger,this),ht.instances.push(this),this.types=[],a=this.type,n.call(ht.EVENTS,a)>=0?Pt.isTouchDevice()?(this.types.push(ht.TOUCH_EVENTS[this.type]),this.type===ht.TOUCH_EVENTS[1]&&this.types.push(ht.TOUCH_EVENTS[4])):this.types.push(ht.MOUSE_EVENTS[this.type]):this.type instanceof Array?this.types=this.type:this.types.push(this.type),this.bind()}function gt(){gt.__super__.constructor.call(this)}function mt(e){this.defaultPlaybackCore=e,mt.__super__.constructor.call(this),this.playbackCoreMap={},this.activePlaybackCore=this.defaultPlaybackCore,this.registerPlaybackCore(new gt)}function ft(){this.data={metadata:{}},ft.__super__.constructor.call(this)}function yt(){yt.__super__.constructor.call(this)}function _t(e,t,i){_t.__super__.constructor.call(this,e,t,i)}function vt(){this.item=[],this.metadata={}}function Et(){this.metadata={}}function At(e,t){this.type=e,null!=t&&(this.detail=this.data=t)}function Ct(){}function bt(){}function Nt(e,t){this.target=null!=e?e:this,this.catchErrors=null!=t?t:!0,this.listenerMap={}}function It(){It.__super__.constructor.call(this)}function Pt(){}function St(){St.__super__.constructor.call(this,this,!1)}function Tt(e,t,i,n,o){this.onclick=null!=o?o:this.onclick,Tt.__super__.constructor.call(this,n,null,t,i),this.icon=this.create("icon"),null!=e&&(this.label=this.createText("label",e))}function wt(e,t){this.element=e,this.timeout=t,wt.__super__.constructor.call(this),this.resetHandler=this.reset.bind(this)}function Dt(e){Dt.__super__.constructor.call(this,null,null,e)}function xt(e,t){this.player=e,this.config=t,xt.__super__.constructor.call(this),this.dispatcher=new Nt(this),this.createDefaults()}function Mt(){Mt.__super__.constructor.call(this)}function Lt(){Lt.__super__.constructor.call(this)}function kt(){kt.__super__.constructor.call(this)}function Rt(){Rt.__super__.constructor.call(this)}function Ot(){Ot.__super__.constructor.call(this)}function Vt(){Vt.__super__.constructor.call(this)}function Gt(){Gt.__super__.constructor.call(this)}function Ut(){Ut.__super__.constructor.call(this)}function Bt(e,t){Bt.__super__.constructor.call(this,e,t)}function Ht(e){Ht.__super__.constructor.call(this,e)}function Ft(e){Ft.__super__.constructor.call(this,null,e)}function jt(e,t){this.direction=null!=t?t:this.direction,jt.__super__.constructor.call(this,null,null,e)}function zt(e){zt.__super__.constructor.call(this,null,null,e)}function Wt(e){this.panels=[],this.closeHandler=this.mouseupHandler.bind(this),Wt.__super__.constructor.call(this,null,null,e)}function Yt(e){Yt.__super__.constructor.call(this,e,"horizontal")}function qt(e){qt.__super__.constructor.call(this,null,e)}function Zt(){Zt.__super__.constructor.call(this)}function Xt(){}function Jt(){return Jt.__super__.constructor.apply(this,arguments)}function Kt(){Kt.__super__.constructor.call(this)}function $t(){$t.__super__.constructor.call(this)}function Qt(){Qt.__super__.constructor.call(this)}function ei(){ei.__super__.constructor.call(this)}function ti(){ti.__super__.constructor.call(this)}function ii(){ii.__super__.constructor.call(this)}function ni(){ni.__super__.constructor.call(this)}function oi(){oi.__super__.constructor.call(this)}function ai(){ai.__super__.constructor.call(this)}function ri(){ri.__super__.constructor.call(this)}function si(){si.__super__.constructor.call(this)}function li(){li.__super__.constructor.call(this)}function di(){di.__super__.constructor.call(this)}function ci(){ci.__super__.constructor.call(this)}function ui(){ui.__super__.constructor.call(this)}function pi(){pi.__super__.constructor.call(this)}function hi(){hi.__super__.constructor.call(this)}function gi(){gi.__super__.constructor.call(this)}function mi(){mi.__super__.constructor.call(this)}function fi(e,t){fi.__super__.constructor.call(this,e,t)}function yi(e,t,i,n,o,a,r,s,l,d,c){this.id=e,this.title=t,this.duration=i,this.position=n,this.type=o,this.partner=a,this.advertiser=r,this.companions=s,this.request=l,this.metadata=d,this.totalAds=c}function _i(e){_i.__super__.constructor.call(this,e)}function vi(e){vi.__super__.constructor.call(this,e)}function Ei(e){Ei.__super__.constructor.call(this,e),this.intervals=[],this.loadedmetadata=this.onLoadedMetadata.bind(this)}function Ai(e){Ai.__super__.constructor.call(this,e)}function Ci(){Ci.__super__.constructor.call(this)}function bi(){bi.__super__.constructor.call(this)}function Ni(e){Ni.__super__.constructor.call(this,e),this.helper=new Ct}function Ii(){Ii.__super__.constructor.call(this)}function Pi(){Pi.__super__.constructor.call(this)}function Si(){Si.__super__.constructor.call(this)}function Ti(){Ti.__super__.constructor.call(this)}function wi(e,t){null==t&&(t={}),wi.__super__.constructor.call(this,e,t),null!=t.url&&(this.url=t.url),null!=t.data&&(this.data=t.data),this.player.load=function(){}}function Di(){Di.__super__.constructor.call(this)}function xi(e,t){null==t&&(t={}),xi.__super__.constructor.call(this,e,t)}function Mi(){Mi.__super__.constructor.call(this)}function Li(e){Li.__super__.constructor.call(this,e)}function ki(){ki.__super__.constructor.call(this)}function Ri(){Ri.__super__.constructor.call(this)}function Oi(e,t,i){this.startTime=e,this.endTime=t,this.id=i}function Vi(){}function Gi(){}function Ui(){Ui.__super__.constructor.call(this)}function Bi(){var e,t=this;this.captions=[],this.head=document.getElementsByTagName("head")[0],e=window.com||{},e.akamai=e.akamai||{},e.akamai.amp=e.akamai.amp||{},e.akamai.amp.plugins=e.akamai.amp.plugins||{},e.akamai.amp.plugins.subply=e.akamai.amp.plugins.subply||{},e.akamai.amp.plugins.subply.response=function(e){t.parse(e),t.poll()},null==window.com&&(window.com=e),Bi.__super__.constructor.call(this,this.constructor.NAME)}function Hi(){Hi.__super__.constructor.call(this)}function Fi(){Fi.__super__.constructor.call(this)}function ji(){ji.__super__.constructor.call(this)}function zi(){zi.__super__.constructor.call(this)}function Wi(e,t){var i,n=this;this.kind=e.kind,this.type=e.type,this.src=e.src,this.language=e.srclang,this.label=e.label||this.srclang||this.kind,this.cues=e.cues||[],this.styles=e.styles||{},this.activeCues=[],this.isLive=/live-subply/.test(this.type),null==this.src||""===this.src||this.isLive?setTimeout(t,1):i=Pt.get(this.src,{onload:function(){try{CaptionParsers[n.type].parse(n,i.response)}catch(e){return void bt.error("Could not parse caption track: "+n.src)}"function"==typeof t&&t()},onerror:function(){bt.error("Could not load caption track: "+n.src)}})}function Yi(e,t){Yi.__super__.constructor.call(this,e,t)}function qi(e){this.activeCaptions=[],this.providers={},this.tracks=[],qi.__super__.constructor.call(this,e)}function Zi(e){Zi.__super__.constructor.call(this,null,null,e,null)}function Xi(e){Xi.__super__.constructor.call(this,Xi.NAME,e)}function Ji(e){Ji.__super__.constructor.call(this,e)}function Ki(){Ki.__super__.constructor.call(this)}function $i(e,t){null==t&&(t={}),$i.__super__.constructor.call(this,e,t)}function Qi(){Qi.__super__.constructor.call(this)}function en(e){en.__super__.constructor.call(this,e)}function tn(){tn.__super__.constructor.call(this)}function nn(){nn.__super__.constructor.call(this)}function on(e){on.__super__.constructor.call(this,e)}function an(){return an.__super__.constructor.apply(this,arguments)}function rn(){rn.__super__.constructor.call(this)}function sn(){sn.__super__.constructor.call(this)}function ln(){ln.__super__.constructor.call(this)}function dn(){return dn.__super__.constructor.apply(this,arguments)}function cn(e){cn.__super__.constructor.call(this,e)}function un(){un.__super__.constructor.call(this)}function pn(){pn.__super__.constructor.call(this)}function hn(){hn.__super__.constructor.call(this)}function gn(){gn.__super__.constructor.call(this)}function mn(){mn.__super__.constructor.call(this)}function fn(){fn.__super__.constructor.call(this)}function yn(){yn.__super__.constructor.call(this)}function _n(){_n.__super__.constructor.call(this)}function vn(){vn.__super__.constructor.call(this)}function En(){En.__super__.constructor.call(this)}function An(){An.__super__.constructor.call(this)}function Cn(){Cn.__super__.constructor.call(this)}function bn(){bn.__super__.constructor.call(this)}function Nn(){Nn.__super__.constructor.call(this)}function In(e){In.__super__.constructor.call(this,e)}function Pn(e){Pn.__super__.constructor.call(this,e)}function Sn(e,t){Sn.__super__.constructor.call(this,e,t)}function Tn(){return Tn.__super__.constructor.apply(this,arguments)}function wn(){wn.__super__.constructor.call(this)}function Dn(){return Dn.__super__.constructor.apply(this,arguments)}function xn(e){xn.__super__.constructor.call(this,e)}function Mn(){Mn.__super__.constructor.call(this)}function Ln(){Ln.__super__.constructor.call(this)}function kn(){kn.__super__.constructor.call(this)}function Rn(){Rn.__super__.constructor.call(this)}function On(){On.__super__.constructor.call(this)}function Vn(){Vn.__super__.constructor.call(this)}function Gn(){return Gn.__super__.constructor.apply(this,arguments)}function Un(){Un.__super__.constructor.call(this)}function Bn(e){Bn.__super__.constructor.call(this,e)}function Hn(){Hn.__super__.constructor.call(this)}function Fn(){Fn.__super__.constructor.call(this)}function jn(){jn.__super__.constructor.call(this)}function zn(e){zn.__super__.constructor.call(this,null,null,null,e,onclick)}function Wn(e){Wn.__super__.constructor.call(this,e,null,null,null)}function Yn(e){Yn.__super__.constructor.call(this,e)}function qn(e){qn.__super__.constructor.call(this,e)}function Zn(e){Zn.__super__.constructor.call(this,e)}function Xn(e,t){null==t&&(t={}),Xn.__super__.constructor.call(this,e,t)}function Jn(e){Jn.__super__.constructor.call(this,e)}function Kn(e,t){Kn.__super__.constructor.call(this,e,t)}function $n(){$n.__super__.constructor.call(this),this.controls={}}function Qn(){Qn.__super__.constructor.call(this)}function eo(){eo.__super__.constructor.call(this)}function to(){to.__super__.constructor.call(this)}var io,no,oo;if(null==(oo=window.AKAMAI_MEDIA_PLAYER)&&(window.AKAMAI_MEDIA_PLAYER=new e),no="AMP Premier - NDN v1.34.0.0001",null==window.AKAMAI_MEDIA_PLAYER[no]){io=window.AKAMAI_MEDIA_PLAYER[no]={},a.construct=function(){var e,t,i;i=this.deserialize(window.location.search);for(e in i)t=i[e],a[e]=t;return!0},a.serialize=function(e,t){var i,n,o,a;o=[];for(n in e)a=e[n],null!=a&&(i=t?t+"["+n+"]":n,o.push("object"==typeof a?this.serialize(a,i):encodeURIComponent(i)+"="+encodeURIComponent(a)));return o.join("&")},a.deserialize=function(e){var t;return null!=e&&(t={},e=e.replace(/^[^?]*\?/,""),e.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(e,i,n,o){t[decodeURIComponent(i)]=decodeURIComponent(o)})),t},a.constructed=a.construct(),i(r,puremvc.Proxy),r.NAME="ModuleProxy",r.prototype.defaults=null,r.prototype.config=null,r.prototype.initializeNotifier=function(e){r.__super__.initializeNotifier.call(this,e),this.createData()},r.prototype.createData=function(){this.setData(this.config)},r.prototype.setData=function(e){var t,i,n,o,a;null==e&&(e={}),n={},a=this.defaults;for(i in a)t=a[i],o=i in e?e[i]:t,n[i]=o;return r.__super__.setData.call(this,n),e},i(s,puremvc.Facade),s.prototype.logger=null,s.prototype.config=null,s.prototype.moduleName=null,s.prototype.moduleMap=null,s.prototype.viewComponent=null,s.prototype.dispatcher=null,s.prototype.oninitialized=null,s.prototype.parentModule=null,s.prototype.initialize=function(e,t){this.config=e,this.parentModule=t,this.loadResources()},s.prototype.loadResources=function(){var e,t,i,n,o;if(!(null!=(n=this.config.resources)?n.length:void 0)>0)return void this.resourcesLoaded();for(o=this.config.resources,t=0,i=o.length;i>t;t++)e=o[t],e.src=this.evaluatePaths(e.src);Xt.addResources(this.config.resources,this.resourcesLoaded.bind(this))},s.prototype.evaluatePaths=function(e){var t,i,n;if(null!=e)return t=this.config.paths||(null!=(i=this.parentModule)&&null!=(n=i.config)?n.paths:void 0),null!=t&&(e=e.replace(/#{paths\.[^}]*}/g,function(e){return xe.eval(e,null,null,null,t)})),e},s.prototype.resourcesLoaded=function(){this.createFramework(),"function"==typeof this.oninitialized&&this.oninitialized(this)},s.prototype.createFramework=function(){this.createModel(),this.createController(),this.createView()},s.prototype.createModel=function(){this.registerProxy(new r(this.config))},s.prototype.createView=function(){},s.prototype.createController=function(){this.registerCommand(uo.DISPATCH_EVENT,Me)},s.prototype.getModuleName=function(){return this.moduleName},s.prototype.getConfig=function(){return this.config},s.prototype.hasModule=function(e){return null!=this.moduleMap[e]},s.prototype.getModules=function(){var e,t,i,n;t={},n=this.moduleMap;for(e in n)i=n[e],t[e]=i.module;return t},s.prototype.registerModule=function(e){var t,i;i=e.getModuleName(),null!=e&&null==this.moduleMap[i]&&(t=new De(e),this.moduleMap[i]=t,this.registerMediator(t),e.onRegister())},s.prototype.retrieveModule=function(e){return this.moduleMap[e].module},s.prototype.removeModule=function(e){var t;return t=this.moduleMap[e],null!=t?(delete this.moduleMap[e],this.removeMediator(e),t.module.onRemove(),t.module):void 0},s.prototype.listNotificationInterests=function(){return[]},s.prototype.listNotificationPublications=function(){return[]},s.prototype.getViewComponent=function(){return this.viewComponent},s.prototype.setViewComponent=function(e){return this.viewComponent=e,e},s.prototype.onRegister=function(){},s.prototype.onRemove=function(){},s.prototype.destroy=function(){var e,t,i,n,o;if(null!=this.viewComponent&&(this.viewComponent.innerHTML="",this.viewComponent.className=""),null!=this.getModules())for(o=this.getModules(),i=0,n=o.length;n>i;i++)t=o[i],this.removeModule(t.getModuleName()),t.destroy();puremvc.Facade.removeCore(this.multitonKey);for(e in this)this[e]=null,delete this[e]},s.prototype.addEventListener=function(e,t){this.dispatcher.addEventListener(e,t)},s.prototype.logEvent=function(e){var t;/(timeupdate)/.test(e.type)!==!0&&(t=this.getModuleName().toUpperCase(),e.dispatcher&&(t+=" "+e.dispatcher),this.logger.log("["+t+" EVENT] "+e.type,e))},s.prototype.dispatchEvent=function(e){this.logEvent(e),this.dispatcher.dispatchEvent(e)},s.prototype.removeEventListener=function(e,t){this.dispatcher.removeEventListener(e,t)},l.createTextContent=function(e,t){var i;return i=/[\&<>]/.test(t)?e.createCDATASection(t):e.createTextNode(t)},l.updateTextContent=function(e,t){var i;return i=l.createTextContent(e.ownerDocument,t),e.removeChild(e.childNodes[0]),e.appendChild(i),e},l.serialize=function(e){var t;if(null!=e){if("string"==typeof e)return e;try{return t=new XMLSerializer,t.serializeToString(e)}catch(i){try{return t=document.implementation.createLSSerializer(),xmlSerializer.writeToString(e)}catch(n){try{return e.xml}catch(o){}}}}},l.parse=function(e){var t,i;return window.DOMParser?(t=new DOMParser,i=t.parseFromString(e,"text/xml")):(i=new ActiveXObject("Microsoft.XMLDOM"),i.async=!1,i.loadXML(e)),i},i(d,puremvc.SimpleCommand),d.prototype.execute=function(e){var t,i;this.sendNotification(uo.READY,this.facade.config),t=null!=(i=this.facade.config)?i.media:void 0,null!=t&&this.sendNotification(uo.SET_MEDIA,t)},c.prototype.getModules=function(){return[]},u.prototype.map=null,u.prototype.add=function(e,t){this.map[e]=t},u.prototype.item=function(e){return this.map[e]},u.prototype.remove=function(e){var t;return t=this.map[e],null!=t&&(this.map[e]=null,delete this.map[e]),t},i(p,u),p.prototype.add=function(e,t){var i,n;return i=this.item(e.src),e.enabled===!1||(null!=i?i.loaded:void 0)===!0?void t():(null!=i?i.loaded:void 0)===!1?void i.callbacks.push(t):(e.loaded=!1,e.callbacks=[t],n=this.resourceLoaded.bind(e),p.__super__.add.call(this,e.src,e),e.type===Pt.mimeTypes.js?void Pt.loadScript(e.src,n,document.body):(e.type===Pt.mimeTypes.css&&Pt.loadStyleSheet(e.src),void n()))},p.prototype.resourceLoaded=function(){var e,t,i,n;for(this.loaded=!0,t=this.callbacks,this.callbacks=null,delete this.callbacks,i=0,n=t.length;n>i;i++)(e=t[i])();t=null},p.prototype.addResources=function(e,t){var i,n,o,a=this;return!(null!=e?e.length:void 0)>0?void t():(n=0,o=function(){a.add(e[n],i)},i=function(){n++,n>=e.length?t():o()},void o())},i(h,puremvc.SimpleCommand),h.prototype.applicationState=null,h.prototype.media=null,h.prototype.player=null,h.prototype.playback=null,h.prototype.config=null,h.prototype.logger=null,h.prototype.bindings=null,h.prototype.params=null,h.prototype.playerCore=null,h.prototype.security=null,h.prototype.initializeNotifier=function(e){var t;h.__super__.initializeNotifier.call(this,e),this.player=this.facade.player||this.facade,this.applicationState=this.player.appState,this.media=this.player.media,this.config=this.player.configuration,this.logger=this.player.logger,this.bindings=this.player.bindings,this.params=this.player.params,this.playerCore=this.player.playerCore,this.security=this.player.security,this.playback=(null!=(t=this.player.playerCore)?t.getActivePlaybackCore():void 0)||this.player.playback},i(g,h),g.prototype.execute=function(e){var t;switch(this.applicationState.getPlayState()){case ho.ENDED:t=uo.REPLAY;break;case ho.PAUSED:case ho.READY:t=uo.PLAY;break;case ho.PLAYING:t=uo.PAUSE;break;case ho.WAITING:this.facade.getMediaElement().paused===!0&&(t=uo.PLAY)}this.sendNotification(t,!0)},i(m,h),m.prototype.execute=function(e){var t;t=this.applicationState.getDisplayState()===yo.FULL_SCREEN?yo.NORMAL:yo.FULL_SCREEN,this.sendNotification(uo.CHANGE_DISPLAY_STATE,t)},i(f,h),f.prototype.dispatchEvent=function(e,t){var i;"string"!=typeof e&&(t=e.getBody()||{},e=e.getName()),i=new At(e,t),this.sendNotification(uo.DISPATCH_EVENT,i)},f.prototype.dispatchEventAfterCommand=function(e,t){setTimeout(this.dispatchEvent.bind(this,e,t),0)},f.prototype.execute=function(e){this.dispatchEvent(e)},i(y,f),y.prototype.execute=function(e){this.applicationState.getIsUserActive()!==!0&&(this.sendNotification(uo.CHANGE_PLAY_STATE,ho.PLAYING),y.__super__.execute.call(this,e))};var ao={EXTERNAL:"external"},ro={AUTO:"auto",PERSISTENT:"persistent",NONE:"none"};i(_,f),_.prototype.execute=function(e){this.playback.pause(),this.sendNotification(uo.CHANGE_ACTIVE_STATE,vo.ACTIVE),_.__super__.execute.call(this,e)},i(v,h),v.prototype.execute=function(e){this.config.setAutoplay(e.getBody())},i(E,h),E.prototype.execute=function(e){this.config.setLoop(e.getBody())},i(A,h),A.prototype.execute=function(e){this.playback.setVolume(e.getBody())},i(C,puremvc.SimpleCommand),C.prototype.execute=function(e){var t;t=e.getBody(),this.sendNotification(uo.MEDIA_CHANGE,t),this.facade.getAutoplay()===!0&&this.sendNotification(uo.PLAY)},i(N,h),N.prototype.execute=function(e){var t,i,n;i=e.getBody(),0===i&&this.media.getType()===Pt.mimeTypes.m3u8&&(i=.25),i!==this.playback.getCurrentTime()&&(this.sendNotification(uo.CHANGE_PLAY_STATE,ho.WAITING),this.sendNotification(uo.DISPLAY_TIME,{currentTime:i,duration:this.playback.getDuration()}),this.sendNotification(uo.CHANGE_ACTIVE_STATE,vo.ACTIVE),n=this.facade.getMediaElement(),this.applicationState.pausedBeforeSeek=n.paused,0===n.readyState?(t=function(e){n.removeEventListener("loadedmetadata",t,!1),this.playback.setCurrentTime(i)},n.addEventListener("loadedmetadata",t,!1)):this.playback.setCurrentTime(i))},i(I,f),I.prototype.execute=function(e){this.applicationState.getSeeking()!==!0&&(this.applicationState.setSeeking(!0),I.__super__.execute.call(this,e))},i(P,f),P.prototype.execute=function(e){var t=this;return this.applicationState.getIsUserActive()===!0?void setTimeout(this.sendNotification.bind(this,e.getName(),e.getBody()),100):void setTimeout(function(){var i;t.applicationState.setSeeking(!1),t.dispatchEvent(e),i=t.applicationState.pausedBeforeSeek===!0?ho.PAUSED:ho.PLAYING,t.sendNotification(uo.CHANGE_PLAY_STATE,i)},1)},i(S,h),S.prototype.execute=function(e){this.playback.setCurrentTime(.25),this.sendNotification(uo.PLAY),this.sendNotification(uo.CHANGE_PLAY_STATE,ho.PLAYING)},i(T,h),T.prototype.execute=function(e){this.playback.pause(),this.playback.getCurrentTime()!==this.playback.getDuration()&&this.playback.setCurrentTime(this.playback.getDuration())},i(w,f),w.prototype.execute=function(e){this.config.getLoop()===!0?(w.__super__.execute.call(this,e),this.sendNotification(uo.REPLAY)):(this.sendNotification(uo.CHANGE_PLAY_STATE,ho.ENDED),this.sendNotification(uo.CHANGE_ACTIVE_STATE,vo.ACTIVE),w.__super__.execute.call(this,e))},i(D,h),D.prototype.execute=function(e){this.sendNotification(uo.PLAY_REQUEST),this.sendNotification(uo.DISPLAY_TIME,{currentTime:0,duration:this.media.getDuration()}),this.sendNotification(uo.STARTED,e.getBody())},i(x,h),x.prototype.execute=function(e){this.applicationState.setIsUserActive(e.getBody())},i(M,f),M.prototype.execute=function(e){this.sendNotification(uo.CHANGE_PLAY_STATE,ho.WAITING),M.__super__.execute.call(this,e)},i(L,h),L.prototype.execute=function(e){this.playback.setMuted(e.getBody())},i(k,f),k.prototype.execute=function(e){var t;t=e.getBody(),this.security.setMedia(t),this.security.getAuthorized()===!1?this.sendNotification(fo.AUTHORIZE,t):this.sendNotification(uo.MEDIA_VALIDATED,t),k.__super__.execute.call(this,e)},i(R,f),R.prototype.execute=function(e){var t;this.media.authorized=!0,t=this.security.createURL(this.media.getSrc()),this.media.setSrc(t),this.sendNotification(uo.MEDIA_VALIDATED,this.media.getData()),R.__super__.execute.call(this,e)},i(O,h),O.prototype.execute=function(e){this.playback.initialized=!0},i(V,h),V.prototype.execute=function(e){this.playerCore.registerPlaybackCore(e.getBody())},i(G,f),G.prototype.execute=function(e){var t;t="amp"===e.getBody().target?uo.REMOVE_APPLICATION_STATE:uo.ADD_APPLICATION_STATE,this.sendNotification(t,"remote-playback"),G.__super__.execute.call(this,e)},i(U,h),U.prototype.execute=function(e){var t;t=e.getBody(),this.sendNotification(uo.CHANGE_CONTENT,{from:this.media.getData(),to:t}),this.media.updateData(t),this.sendNotification(uo.UPDATE_DATA_BINDINGS),this.sendNotification(uo.CHANGE_CONTENT,this.media.getData())},i(B,f),B.prototype.execute=function(e){this.sendNotification(uo.DISPLAY_TIME,{currentTime:this.playback.getCurrentTime(),duration:this.playback.getDuration()}),B.__super__.execute.call(this,e)},i(H,h),H.prototype.execute=function(e){this.playback.setMuted(!this.playback.getMuted())},i(F,f),F.prototype.execute=function(e){this.media.started!==!0&&(this.media.started=!0,F.__super__.execute.call(this,e))},i(j,h),j.prototype.execute=function(e){var t,i,n,o,a;for(n=this.player.getMediaElement(),i=e.getBody(),o=0,a=i.length;a>o;o++)t=i[o],n.addEventListener(t,this.playback.handlers[t])},i(z,h),z.prototype.execute=function(e){var t,i,n,o,a;for(n=this.player.getMediaElement(),i=e.getBody(),o=0,a=i.length;a>o;o++)t=i[o],n.removeEventListener(t,this.playback.handlers[t])},i(W,puremvc.Mediator),W.prototype.config=null,W.prototype.cssPrefix=null,W.prototype.classList=null,W.prototype.initializeNotifier=function(e){var t;W.__super__.initializeNotifier.call(this,e),t=this.facade.player||this.facade,this.config=t.retrieveProxy(r.NAME),this.classList={prefix:this.cssPrefix,element:this.viewComponent,contains:function(e,t){var i,n;return null==t&&(t=this.element),i=this.prefix+e,null!=(null!=(n=t.classList)?n.contains:void 0)?t.classList.contains(i):-1!==t.className.indexOf(i)},
add:function(e,t){var i,n;null==t&&(t=this.element),i=this.prefix+e,null!=(null!=(n=t.classList)?n.add:void 0)?t.classList.add(i):this.contains(e,t)||(""!==t.className?t.className+=" "+i:t.className=i)},remove:function(e,t){var i,n,o;null==t&&(t=this.element),i=this.prefix+e,null!=(null!=(o=t.classList)?o.remove:void 0)?t.classList.remove(i):this.contains(e,t)&&(n=new RegExp(" ?"+i),t.className=t.className.replace(n,""))},toggle:function(e,t){var i;return null==t&&(t=this.element),null!=(null!=(i=t.classList)?i.toggle:void 0)?t.classList.toggle(this.prefix+e):this.contains(e,t)?this.remome(e,t):this.add(e,t)}}},i(Y,W),Y.prototype.localizationManager=null,Y.prototype.initializeNotifier=function(e){var t;Y.__super__.initializeNotifier.call(this,e),t=this.facade.player||this.facade,this.localizationManager=t.retrieveProxy(lt.NAME)},i(q,Y),q.prototype.componentName=null,q.prototype.componentType=null,q.prototype.classList=null,q.prototype.state=null,q.prototype.disabled=!1,q.prototype.onRegister=function(){et.bindEvents(this.viewComponent,this)},q.prototype.createViewComponent=function(e,t){var i;return i=this.getTypeList(),et.create(i,e,t)},q.prototype.createMediatorName=function(){var e;return e=this.getTypeList(),e.push("mediator"),e.push(et.createUID()),e.join("-")},q.prototype.getTypeList=function(){var e;return e=[],null!=this.componentName&&e.push(this.componentName),null!=this.componentType&&(e=e.concat(this.componentType)),e},q.prototype.create=function(e,t,i,n){return null==t&&(t=this),t===!1&&(t=null),et.create(e,t,i,n)},q.prototype.createText=function(e,t,i,n){return null==i&&(i=this),et.create(e,i,n,t)},q.prototype.setState=function(e){return e!==this.state?(null!=this.state&&this.classList.remove(this.state),this.state=e,null!=this.state&&this.classList.add(this.state),e):void 0},q.prototype.getState=function(){return this.state},q.prototype.setDisabled=function(e){return e!==this.disabled?(this.disabled=e,this.disabled?this.classList.add("disabled"):this.classList.remove("disabled"),e):void 0},q.prototype.getDisabled=function(){return this.disabled},i(Z,q),Z.prototype.componentType="overlay",Z.prototype.onRegister=function(){Z.__super__.onRegister.call(this),this.registerOverlay()},Z.prototype.onRemove=function(){Z.__super__.onRemove.call(this),this.removeOverlay()},Z.prototype.registerOverlay=function(){this.sendNotification(uo.ADD_OVERLAY,this.viewComponent)},Z.prototype.removeOverlay=function(){this.sendNotification(uo.REMOVE_OVERLAY,this.viewComponent)},i(X,Z),X.prototype.componentName="context-menu",X.prototype.contextMenu=null,X.prototype.onRegister=function(){var e=this;X.__super__.onRegister.call(this),ht.create(this.facade.viewComponent,ht.CONTEXTMENU,function(t){return t.preventDefault(),e.contextMenuHandler(t),!1})},X.prototype.contextMenuHandler=function(e){var t,i=this;this.contextMenu&&this.removeContextMenu(),this.contextMenu=et.create("context-menu",document.body,"ul"),t=et.create("context-item",this.contextMenu,"li",this.facade.getVersion()),this.contextMenu.style.top=e.pageY+"px",this.contextMenu.style.left=e.pageX+"px",ht.create(document.body,ht.CLICK,function(e){return i.removeContextMenu(e),!1})},X.prototype.removeContextMenu=function(e){try{ht.clear(document.body,ht.CLICK),document.body.removeChild(this.contextMenu),this.contextMenu=null}catch(t){}},i(J,Z),J.prototype.componentName="end-slate",J.prototype.onRegister=function(){null!=this.config.getEndSlate()&&J.__super__.onRegister.call(this)},J.prototype.listNotificationInterests=function(){return[uo.MEDIA_CHANGE]},J.prototype.handleNotification=function(e){var t,i,n,o,a;switch(e.getName()){case uo.MEDIA_CHANGE:n=e.getBody(),t=this.config.getEndSlate(),a=this.getViewComponent(),i="",null!=t&&(o=t.usePoster===!0?n.poster:t.url,null!=o&&""!==o&&(i='<img src="'+o+'" class="end-slate-image" />')),a.innerHTML=i}},i(K,Z),K.prototype.componentName="waiting",K.prototype.bar=null,K.prototype.text=null,K.prototype.onRegister=function(){this.bar=this.create("waiting-bar"),this.text=this.createText("waiting-text",this.localizationManager.getString(Q.MSG_BUFFERING)),K.__super__.onRegister.call(this)},i($,Z),$.prototype.componentName="loading",Q.MSG_LIVE="MSG_LIVE",Q.MSG_REPLAY="MSG_REPLAY",Q.MSG_BUFFERING="MSG_BUFFERING_TEXT",Q.MSG_CC="MSG_CC",Q.MSG_CC_TITLE="MSG_CC_TITLE",Q.MSG_CC_LANGUAGE="MSG_CC_LANGUAGE",Q.MSG_CC_PRESETS="MSG_CC_PRESETS",Q.MSG_CC_FONT="MSG_CC_FONT",Q.MSG_CC_EDGE="MSG_CC_EDGE",Q.MSG_CC_SIZE="MSG_CC_SIZE",Q.MSG_CC_SCROLL="MSG_CC_SCROLL",Q.MSG_CC_COLOR="MSG_CC_COLOR",Q.MSG_CC_BACKGROUND="MSG_CC_BACKGROUND",Q.MSG_CC_EDGE="MSG_CC_EDGE",Q.MSG_CC_WINDOW="MSG_CC_WINDOW",Q.MSG_CC_OPACITY="MSG_CC_OPACITY",Q.MSG_CC_SHOW_ADVANCED="MSG_CC_SHOW_ADVANCED",Q.MSG_CC_HIDE_ADVANCED="MSG_CC_HIDE_ADVANCED",Q.MSG_CC_RESET="MSG_CC_RESET",Q.MSG_CC_CANCEL="MSG_CC_CANCEL",Q.MSG_CC_APPLY="MSG_CC_APPLY",Q.MSG_SECONDS="MSG_SECONDS",Q.MSG_RECOMMENDATIONS_TITLE="MSG_RECOMMENDATIONS_TITLE",Q.MSG_NEXT_VIDEO="MSG_NEXT_VIDEO",Q.MSG_NEXT_AD="MSG_NEXT_AD",Q.MSG_TIME_SEPARATOR="MSG_TIME_SEPARATOR",Q.MSG_VIEW_ALL="MSG_VIEW_ALL",Q.MSG_VIDEO="MSG_VIDEO",i(ee,Z),ee.prototype.componentName="replay",ee.prototype.replay=null,ee.prototype.icon=null,ee.prototype.label=null,ee.prototype.onRegister=function(){this.replay=this.create("replay-button"),this.replay.onclick=this.onclick.bind(this),this.icon=this.create("replay-icon",this.replay),this.label=this.createText("replay-label",this.localizationManager.getString(Q.MSG_REPLAY),this.replay),ee.__super__.onRegister.call(this)},ee.prototype.onclick=function(e){return e.stopImmediatePropagation(),this.sendNotification(uo.REPLAY),!1},i(te,h),te.prototype.execute=function(e){var t;t=this.config.getControls().mode!==ro.PERSISTENT?e.getBody():vo.ACTIVE,this.applicationState.setActiveState(t)},i(ie,f),ie.interval=null,ie.keyHandler=null,ie.prototype.keypress=function(e){switch(e.keyCode){case 27:break;case 32:this.facade.getEnded()||(this.facade.getPaused()?this.facade.play():this.facade.pause())}},ie.prototype.execute=function(e){var t,i,n,o,a=this;return n=e.getBody(),this.applicationState.setDisplayState(n),this.config.getFullscreen().mode===ao.EXTERNAL?void this.sendNotifications(n):(t=this.facade.getMediaElement(),o=this.facade.getViewComponent(),i={},null!=o.webkitRequestFullScreen?(i.enter=o.webkitRequestFullScreen.bind(o),i.exit=null!=document.webkitExitFullscreen?document.webkitExitFullscreen.bind(document):document.webkitCancelFullScreen.bind(document),i.event="onwebkitfullscreenchange",i.element="webkitFullscreenElement",i.error="webkitfullscreenerror"):null!=o.requestFullscreen?(i.enter=o.requestFullscreen.bind(o),i.exit=null!=document.exitFullscreen?document.exitFullscreen.bind(document):document.cancelFullscreen.bind(document),i.event="onfullscreenchange",i.element="fullscreenElement",i.error="fullscreenerror"):null!=o.mozRequestFullScreen?(i.enter=o.mozRequestFullScreen.bind(o),i.exit=document.mozCancelFullScreen.bind(document),i.event="onmozfullscreenchange",i.element="mozFullscreenElement",i.error="mozfullscreenerror"):null!=o.msRequestFullscreen?(i.enter=o.msRequestFullscreen.bind(o),i.exit=document.msExitFullscreen.bind(document),i.event="MSFullscreenChange",i.element="msFullscreenElement",i.error="MSFullscreenError"):null!=t.webkitEnterFullscreen&&(i.enter=t.webkitEnterFullscreen.bind(t),i.exit=t.webkitExitFullscreen.bind(t),i.event=null,i.error=null),n===yo.FULL_SCREEN?(null!=i.event?o[i.event]=function(e){null==document[i.element]&&a.sendNotification(uo.CHANGE_DISPLAY_STATE,yo.NORMAL)}:(clearInterval(ie.interval),ie.interval=setInterval(function(){t.webkitDisplayingFullscreen!==!0&&(a.sendNotification(uo.CHANGE_DISPLAY_STATE,yo.NORMAL),clearInterval(ie.interval))},100)),null!=i.error&&document.addEventListener(i.error,this.facade.logger.error.bind(this.facade.logger)),i.enter(),this.playback.keyHandler=this.keypress.bind(this),window.addEventListener("keypress",this.playback.keyHandler)):n===yo.NORMAL&&(window.removeEventListener("keypress",this.playback.keyHandler),this.playback.keyHandler=null,null!=i&&"function"==typeof i.exit&&i.exit(),t[i.event]=null,clearInterval(ie.interval)),void this.sendNotifications(n))},ie.prototype.sendNotifications=function(e){setTimeout(this.sendNotification.bind(this,uo.FULL_SCREEN_CHANGE,e),100),this.dispatchEvent("fullscreenchange",e===yo.FULL_SCREEN)},i(ne,f),ne.prototype.execute=function(e){var t;t=e.getBody(),t&&this.playback.initialized!==!0&&this.sendNotification(uo.INITIALIZED),this.playback.initialized===!0&&(this.media.getSrc()||this.media.getSource())&&(this.playback.getStarted()||this.sendNotification(uo.START),this.playback.play(),ne.__super__.execute.call(this,e))},i(oe,h),oe.prototype.execute=function(e){var t;t=this.applicationState.getActiveState()===vo.ACTIVE?vo.INACTIVE:vo.ACTIVE,this.sendNotification(uo.CHANGE_ACTIVE_STATE,t)},i(ae,s),ae.prototype.moduleName="amp",ae.prototype.playerType=null,ae.prototype.config=null,ae.prototype.mediaElement=null,ae.prototype.hidden=!1,ae.prototype.l10n=null,ae.prototype.setViewComponent=function(e){return e.amp=this,ae.__super__.setViewComponent.call(this,e)},ae.prototype.setMediaElement=function(e){return this.mediaElement=e,e},ae.prototype.getPlayerType=function(){return this.playerType},ae.prototype.getVersion=function(){return Xt.getVersion()},ae.prototype.createPlugins=function(){this.sendNotification(po.REGISTER_PLUGINS,this.config)},ae.prototype.createMediaElement=function(){return null},ae.prototype.createFramework=function(){ae.__super__.createFramework.call(this),this.mediaElement=this.createMediaElement(),this.createPlugins()},ae.prototype.getLanguage=function(){return this.retrieveProxy(lt.NAME).getLanguage()},ae.prototype.setLanguage=function(e){return this.retrieveProxy(lt.NAME).setLanguage(e),e},ae.prototype.getMediaElement=function(){return this.mediaElement},ae.prototype.getContainer=function(){return this.getViewComponent()},ae.prototype.evaluateBinding=function(e){},ae.prototype.canPlayType=function(e){},ae.prototype.load=function(){},ae.prototype.play=function(){},ae.prototype.replay=function(){},ae.prototype.pause=function(){},ae.prototype.end=function(){},ae.prototype.setParams=function(e){},ae.prototype.getParams=function(){},ae.prototype.setAutoplay=function(e){},ae.prototype.getAutoplay=function(){},ae.prototype.setLoop=function(e){},ae.prototype.getLoop=function(){},ae.prototype.setMuted=function(e){},ae.prototype.getMuted=function(){},ae.prototype.mute=function(){return this.setMuted(!0)},ae.prototype.unmute=function(){return this.setMuted(!1)},ae.prototype.setMedia=function(e){var t,i,n,o;if(i=e.src,t=null!=(n=e.source)&&null!=(o=n[0])?o.src:void 0,!(null!=i&&""!==i||null!=t&&""!==t))throw new Error("[AMP ERROR] Invalid Media")},ae.prototype.getMedia=function(){},ae.prototype.setCurrentTime=function(e){},ae.prototype.getCurrentTime=function(){},ae.prototype.getDuration=function(){},ae.prototype.setSrc=function(e){},ae.prototype.getSrc=function(){},ae.prototype.setSource=function(e){},ae.prototype.getSource=function(){},ae.prototype.setVolume=function(e){},ae.prototype.getVolume=function(){},ae.prototype.getSeeking=function(){},ae.prototype.getPaused=function(){},ae.prototype.getEnded=function(){},ae.prototype.setDisplayState=function(e){},ae.prototype.getDisplayState=function(){},ae.prototype.enterFullScreen=function(){},ae.prototype.exitFullScreen=function(){},ae.prototype.setHidden=function(e){var t;e!==this.hidden&&(this.hidden=e,t=this.viewComponent.style,this.hidden?(this.hiddenData={width:t.width,height:t.height,paused:this.getPaused()},t.width=t.height="0px",this.hiddenData.paused===!1&&this.pause()):(t.width=this.hiddenData.width,t.height=this.hiddenData.height,this.hiddenData.paused===!1&&this.play(),this.hiddenData=null))},ae.prototype.getHidden=function(){return this.hidden},ae.prototype.recordContentChange=function(e){},ae.prototype.setPlaybackRate=function(){},ae.prototype.getPlaybackRate=function(){},i(re,ae),re.prototype.playerType="html",re.prototype.media=null,re.prototype.bindings=null,re.prototype.configuration=null,re.prototype.params=null,re.prototype.appState=null,re.prototype.security=null,re.prototype.playerCore=null,re.prototype.createMediaElement=function(){var e,t;return e=new ue("html5","video"),t=e.getViewComponent(),null==t.dataset&&(t.dataset={}),this.sendNotification(uo.PLAYBACK_CORE_CHANGE,e),t},re.prototype.createModel=function(){var e;this.bindings=new Qe,this.registerProxy(this.bindings),this.security=new se,this.registerProxy(this.security),this.configuration=new pt(this.config),this.registerProxy(this.configuration),this.registerProxy(new lt(this.config)),this.appState=new ut,this.registerProxy(this.appState),this.appState.setRenderMode(_o.HTML),e=new Ie,this.registerProxy(e),this.media=new ft,this.registerProxy(this.media),this.playerCore=new mt(e),this.registerProxy(this.playerCore),this.params=new dt(this.config.params),this.registerProxy(this.params),this.bindings.initialize()},re.prototype.createView=function(){var e,t,i;this.registerMediator(new ge("html5",this.getViewComponent())),this.registerMediator(new Ke),this.registerMediator(new he),this.registerMediator(new qe),e=new Ye,this.registerMediator(e),this.registerMediator(new $),(null!=(t=this.config.controls)?t["native"]:void 0)!==!0&&this.registerMediator(new X),this.registerMediator(new K),this.registerMediator(new ee),this.registerMediator(new J),(null!=(i=this.config.titlebar)?i.enabled:void 0)===!0&&this.registerMediator(new Xe),this.registerMediator(new Ze)},re.prototype.createController=function(){re.__super__.createController.call(this),this.registerCommand(po.PLUGINS_INITIALIZED,d),this.registerCommand(uo.PLAY,ne),this.registerCommand(uo.PLAYING,y),this.registerCommand(uo.PAUSE,_),this.registerCommand(uo.CHANGE_PLAY_STATE,Ve),this.registerCommand(uo.TOGGLE_FULL_SCREEN,m),this.registerCommand(uo.CHANGE_DISPLAY_STATE,ie),this.registerCommand(uo.TOGGLE_ACTIVE,oe),this.registerCommand(uo.CHANGE_ACTIVE_STATE,te),this.registerCommand(uo.SET_MEDIA,Ge),this.registerCommand(uo.CHANGE_MEDIA,We),this.registerCommand(uo.MEDIA_VALIDATED,C),this.registerCommand(uo.MEDIA_CHANGE,ze),this.registerCommand(uo.UPDATE_DATA_BINDINGS,Fe),this.registerCommand(uo.START,D),this.registerCommand(uo.SEEK,N),this.registerCommand(uo.SEEKING,I),this.registerCommand(uo.SEEKED,P),this.registerCommand(uo.CHANGE_VOLUME,A),this.registerCommand(uo.CHANGE_MUTED,L),this.registerCommand(uo.CHANGE_AUTOPLAY,v),this.registerCommand(uo.CHANGE_LOOP,E),this.registerCommand(uo.END,T),this.registerCommand(uo.ENDED,w),this.registerCommand(uo.REPLAY,S),this.registerCommand(uo.ERROR,Be),this.registerCommand(uo.READY,He),this.registerCommand(uo.WAITING,M),this.registerCommand(uo.CHANGE_DURATION,Ue),this.registerCommand(uo.CHANGE_PARAMS,je),this.registerCommand(uo.IS_USER_ACTIVE,x),this.registerCommand(fo.CHECK_AUTHORIZATION,k),this.registerCommand(fo.AUTHORIZED,R),this.registerCommand(fo.SET_KEY,fe),this.registerCommand(fo.SET_TOKEN,ye),this.registerCommand(uo.INITIALIZED,O),this.registerCommand(uo.REGISTER_PLAYBACK_CORE,V),this.registerCommand(go.TOGGLE_PLAY_PAUSE,g),this.registerCommand(go.SEEK,N),this.registerCommand(uo.PLAYBACK_TARGET_CHANGE,G),this.registerCommand(uo.RECORD_CONTENT_CHANGE,U),this.registerCommand(uo.TIME_UPDATE,B),this.registerCommand(uo.TOGGLE_MUTED,H),this.registerCommand(uo.PLAY_REQUEST,F),this.registerCommand(uo.PLAY_STATE_CHANGE,f),this.registerCommand(uo.PROGRESS,f),this.registerCommand(uo.CAN_PLAY,f),this.registerCommand(uo.CAN_PLAY_THROUGH,f),this.registerCommand(uo.VOLUME_CHANGE,f),this.registerCommand(uo.LOAD_START,f),this.registerCommand(uo.STARTED,f),this.registerCommand(uo.LOADED_METADATA,f),this.registerCommand(uo.DURATION_CHANGE,f),this.registerCommand(uo.MEDIUM_CHANGE,f),this.registerCommand(uo.TEMPORAL_TYPE_CHANGE,f),this.registerCommand(uo.LANGUAGE_CHANGE,f),this.registerCommand(uo.PLAYBACK_TARGET_AVAILABLE,f),this.registerCommand(fo.AUTHORIZE,f),this.registerCommand(fo.AUTHORIZATION_FAILED,f),this.registerCommand(uo.FAIL_OVER_ATTEMPT,f),this.registerCommand(uo.PAUSED,f),this.registerCommand(uo.ENABLE_VIDEO_EVENTS,j),this.registerCommand(uo.DISABLE_VIDEO_EVENTS,z)},re.prototype.evaluateBinding=function(e){return this.bindings.evaluateBinding(e)},re.prototype.recordContentChange=function(e){this.sendNotification(uo.RECORD_CONTENT_CHANGE,e)},re.prototype.canPlayType=function(e){return this.retrieveProxy(Ie.NAME).canPlayType(e)},re.prototype.load=function(){this.sendNotification(uo.LOAD)},re.prototype.play=function(){this.sendNotification(uo.PLAY,!0)},re.prototype.replay=function(){this.sendNotification(uo.REPLAY)},re.prototype.pause=function(){this.sendNotification(uo.PAUSE)},re.prototype.end=function(){this.sendNotification(uo.END)},re.prototype.setParams=function(e){return this.sendNotification(uo.CHANGE_PARAMS,e),e},re.prototype.getParams=function(){return this.params.getData()},re.prototype.setAutoplay=function(e){return this.sendNotification(uo.CHANGE_AUTOPLAY,e),e},re.prototype.getAutoplay=function(){var e,t,i;return t=this.retrieveProxy(Ie.NAME),e=t.initialized&&(this.configuration.getAutoplay()||(null!=(i=this.getMedia())?i.autoplay:void 0)===!0)},re.prototype.setLoop=function(e){return this.sendNotification(uo.CHANGE_LOOP,e),e},re.prototype.getLoop=function(){return this.configuration.getLoop()},re.prototype.setMuted=function(e){return this.sendNotification(uo.CHANGE_MUTED,e),e},re.prototype.getMuted=function(){return this.retrieveProxy(Ie.NAME).getMuted()},re.prototype.setMedia=function(e){return re.__super__.setMedia.call(this,e),this.sendNotification(uo.SET_MEDIA,e),e},re.prototype.getMedia=function(){return this.media.getData()},re.prototype.setCurrentTime=function(e){return this.sendNotification(uo.SEEK,e),e},re.prototype.getCurrentTime=function(){return this.retrieveProxy(Ie.NAME).getCurrentTime()},re.prototype.getDuration=function(){return this.media.getDuration()},re.prototype.setSrc=function(e){return this.sendNotification(uo.SET_MEDIA,{src:e}),e},re.prototype.getSrc=function(){return this.retrieveProxy(Ie.NAME).getSrc()},re.prototype.setSource=function(e){return this.sendNotification(uo.SET_MEDIA,{source:e}),e},re.prototype.getSource=function(){return this.media.getSource()},re.prototype.setVolume=function(e){return this.sendNotification(uo.CHANGE_VOLUME,e),e},re.prototype.getVolume=function(){return this.retrieveProxy(Ie.NAME).getVolume()},re.prototype.getSeeking=function(){return this.retrieveProxy(Ie.NAME).getSeeking()},re.prototype.getPaused=function(){return this.retrieveProxy(Ie.NAME).getPaused()},re.prototype.getEnded=function(){return this.retrieveProxy(Ie.NAME).getEnded()},re.prototype.setDisplayState=function(e){this.sendNotification(uo.CHANGE_DISPLAY_STATE,e)},re.prototype.getDisplayState=function(e){return this.appState.getDisplayState()},re.prototype.enterFullScreen=function(){this.sendNotification(uo.CHANGE_DISPLAY_STATE,yo.FULL_SCREEN)},re.prototype.exitFullScreen=function(){this.sendNotification(uo.CHANGE_DISPLAY_STATE,yo.NORMAL)},re.prototype.setPlaybackRate=function(e){this.mediaElement.playbackRate=e},re.prototype.getPlaybackRate=function(){return this.mediaElement.playbackRate};var so={READY:"jsApiReady",RESET:"mediaPlayerReset",LOADING:"mediaPlayerLoading",PLAYER_ERROR:"mediaPlayerError",MEDIA_ERROR:"mediaError",ERROR_STREAM_NOT_FOUND:"mediaPlayerErrorStreamNotFound",CAPABILITY_CHANGE:"mediaPlayerCapabilityChange",PLAYBACK_OPEN:"mediaPlayerPlaybackOpen",PLAYBACK_CLOSE:"mediaPlayerPlaybackClose",PLAYING:"mediaPlayerPlaying",ENDED:"mediaPlayerPlaybackSequenceComplete",PAUSED:"mediaPlayerPaused",BUFFERING:"mediaPlayerBuffering",DURATION_CHANGE:"mediaPlayerDurationChange",TIME_UPDATE:"mediaPlayerPlayheadUpdate",SEEKING_CHANGE:"mediaPlayerSeekingChange",ERROR:"error",VOLUME_CHANGE:"mediaPlayerVolumeChanged",PLAY_STATE_CHANGE:"mediaPlayerPlayStateChange",STATE_CHANGE:"mediaPlayerStateChange",CAPTION_DATA_CHANGE:"mediaPlayerCaptiondataChange",FAIL_OVER_ATTEMPT:"mediaPlayerFailoverAttempt",ELEMENT_EVENT:"mediaPlayerElementEvent",PLAY:"mediaPlayerResumeOrPausePlayback",APPLICATION_STATE_CHANGE:"mediaPlayerApplicationStateChange",INITIALIZED:"mediaPlayerInitialized",FULLSCREEN_CHANGE:"mediaPlayerFullscreenChange",AUTHORIZE:"mediaPlayerAuthenticate",CAPTIONING_REQUEST:"mediaPlayerCaptioningRequest",CAPTION_LANG_CHANGE:"mediaPlayerCaptionLangChange",RECOMMENDATIONS_LOADED:"mediaPlayerRecommendationsLoaded",RECOMMENDATION_SELECTED:"mediaPlayerRecommendationSelected",SHARE:"mediaPlayerShare",SHARE_REQUEST:"mediaPlayerShareRequest",AUTO_ADVANCE:"mediaPlayerAutoAdvance",CREATE_FLASH_VARS:"createFlashVars",CREATE_XML:"createXML",FLASH_CREATED:"flashCreated",PLAY_REQUEST:"mediaPlayerPlaybackSequenceInitiated",LOAD_FEED:"mediaPlayerDataFeedRequested",FEED_LOADED:"mediaPlayerFeedLoaded"};i(se,puremvc.Proxy),se.NAME="SecurityProxy",se.prototype.setupHDN1=function(){var e=this;return window.retrieveToken=function(t,i){var n;try{e.facade.logger.debug("[AMP AUTH] HDN1: Token Requested",t,i),n=e.getToken(),null!=n?e.facade.getMediaElement().tokenRetrievalSuccess("&primaryToken="+n):e.sendNotification(fo.AUTHORIZE)}catch(o){e.facade.logger.error("[AMP AUTH ERROR]: Token Retrival Error",o)}return!0}},se.prototype.getKey=function(){return this.data.key},se.prototype.setKey=function(e){return this.data.key=e,e},se.prototype.getToken=function(){return this.data.token},se.prototype.setToken=function(e){return this.data.token=e,e},se.prototype.getSecret=function(){var e;return null==this.data.token?null:(e="",null!=this.data.key&&(e+=this.data.key),e+=this.data.token)},se.prototype.createURL=function(e){var t;return t=this.getSecret(),null!=t&&(e+=/\?/.test(e)?"&":"?",e+=t),e},se.prototype.getAuthorized=function(){return this.data.authorized},se.prototype.setAuthorized=function(e){return this.data.authorized=e,e},se.prototype.getProvider=function(){return this.data.provider},se.prototype.setProvider=function(e){return this.data.provider=e,e},i(le,r),le.NAME=r.NAME,le.prototype.bindings=null,le.prototype.configurationName=null,le.prototype.configurationData=null,le.prototype.contextName=null,le.prototype.contextData=null,le.prototype.value=null,le.prototype.getConfigurationName=function(){return this.configurationName},le.prototype.getConfigurationData=function(){return this.configurationData.value||{}},le.prototype.getContextName=function(){return this.contextName},le.prototype.getContextData=function(){return this.contextData},le.prototype.onRegister=function(){var e;e=this.facade.player||this.facade,null==this.configurationName&&(this.configurationName=this.facade.moduleName),this.bindings=e.retrieveProxy(Qe.NAME),this.bindings.registerConfiguration(this)},le.prototype.setData=function(e){var t,i,n;null==e&&(e={}),this.data={},n=this.defaults;for(t in n)i=n[t],this.data[t]=t in e?e[t]:i;return this.configurationData=new st(this.data),this.data},le.prototype.getValue=function(e){var t;return this.bindings.update(),this.value[e]=null!=(t=this.configurationData.data[e])?t.compile(this.bindings.getData()):void 0,this.value[e]},le.prototype.compile=function(e,t){return null==t&&(t=!1),null==this.configurationData?null:(null==e&&(e=this.bindings.getData()),null!=this.contextName&&null!=this.contextData&&(e=Pt.clone(e),e[this.contextName]=this.contextData),this.configurationData.compile(e,t),this.value=this.configurationData.value,this.configurationData.value)};var lo={SET_DIMENSIONS:"mediaanalytics:setDimensions"};i(de,h),de.prototype.execute=function(e){this.player.started=!0,this.sendNotification(uo.STARTED,e.getBody()),this.sendNotification(uo.PLAY,e.getBody())},i(ce,puremvc.Mediator),ce.prototype.player=null,ce.prototype.config=null,ce.prototype.proxy=null,ce.NAME="LocalizationWrapper",ce.prototype.getString=function(e){return this.proxy.getString(e)},ce.prototype.listNotificationInterests=function(){return[so.CREATE_FLASH_VARS,so.CREATE_XML]},ce.prototype.handleNotification=function(e){var t,i,n,o,a,r,s,d,c,u,p,h,g,m,f;switch(ce.__super__.handleNotification.call(this,e),u=e.getName(),i=e.getBody(),u){case so.CREATE_FLASH_VARS:a=i.flashvars,n=i.config,a.locale_setting=this.proxy.getLocaleId();break;case so.CREATE_XML:m=i.xml,t=m.firstChild,c=m.getElementsByTagName("locales")[0],null==c&&(c=m.createElement("locales"),t.appendChild(c)),f=this.proxy.getLocales();for(s in f){d=f[s],o=m.createElement("locale"),o.setAttribute("id",s),c.appendChild(o);for(r in d)g=d[r],p=m.createElement("property"),p.setAttribute("key",r),h=l.createTextContent(m,g),p.appendChild(h),o.appendChild(p)}}},i(ue,q),ue.prototype.componentType="media-element",i(pe,q),pe.prototype.componentType="layer",pe.prototype.onRegister=function(){pe.__super__.onRegister.call(this),this.registerLayer()},pe.prototype.onRemove=function(){pe.__super__.onRemove.call(this),this.removeLayer()},pe.prototype.registerLayer=function(){this.sendNotification(uo.ADD_LAYER,this.viewComponent)},pe.prototype.removeLayer=function(){this.sendNotification(uo.REMOVE_LAYER,this.viewComponent)},i(he,pe),he.prototype.componentName="video",he.prototype.listNotificationInterests=function(){return[uo.PLAYBACK_CORE_CHANGE]},he.prototype.handleNotification=function(e){var t,i,n;switch(i=e.getName(),t=e.getBody(),i){case uo.PLAYBACK_CORE_CHANGE:n=this.facade.getMediaElement(),null!=n&&this.viewComponent.removeChild(n),n=(null!=t&&"function"==typeof t.getViewComponent?t.getViewComponent():void 0)||t,this.facade.setMediaElement(n),null!=n&&this.viewComponent.appendChild(n)}},i(ge,q),ge.prototype.componentType="player",ge.prototype.core=null,ge.prototype.medium=null,ge.prototype.layers=null,ge.prototype.ready=!1,ge.prototype.onRegister=function(){var e;ge.__super__.onRegister.call(this),e=Pt.getDevice(),null!=e&&this.classList.add(e)},ge.prototype.listNotificationInterests=function(){return[uo.DISPLAY_STATE_CHANGE,uo.ACTIVE_STATE_CHANGE,uo.PLAY_STATE_CHANGE,uo.ADD_APPLICATION_STATE,uo.REMOVE_APPLICATION_STATE,uo.MEDIUM_CHANGE,uo.DURATION_CHANGE,uo.TEMPORAL_TYPE_CHANGE,uo.ADD_LAYER,uo.REMOVE_LAYER,uo.READY]},ge.prototype.handleNotification=function(e){var t,i,n,o,a,r;switch(i=e.getName(),t=e.getBody(),i){case uo.ACTIVE_STATE_CHANGE:case uo.PLAY_STATE_CHANGE:case uo.DISPLAY_STATE_CHANGE:case uo.MEDIUM_CHANGE:r=t,n=r.newState,o=r.oldState,null!=o&&this.classList.contains(o)&&this.classList.remove(o),null!=n&&this.classList.add(n);break;case uo.ADD_APPLICATION_STATE:a=t,this.classList.add(a);break;case uo.REMOVE_APPLICATION_STATE:a=t,this.classList.remove(a);break;case uo.TEMPORAL_TYPE_CHANGE:"live"===t?this.sendNotification(uo.ADD_APPLICATION_STATE,"live"):this.sendNotification(uo.REMOVE_APPLICATION_STATE,"live");break;case uo.DURATION_CHANGE:t>3600?this.sendNotification(uo.ADD_APPLICATION_STATE,"long-form"):this.sendNotification(uo.REMOVE_APPLICATION_STATE,"long-form");break;case uo.ADD_LAYER:this.addLayer(t);break;case uo.REMOVE_LAYER:this.removeLayer(t);break;case uo.READY:this.initialize()}},ge.prototype.initialize=function(){var e,t,i,n;for(this.ready=!0,n=this.layers,t=0,i=n.length;i>t;t++)e=n[t],this.viewComponent.contains(e)||this.viewComponent.appendChild(e)},ge.prototype.addLayer=function(e){this.layers.push(e),this.ready&&this.viewComponent.appendChild(e)},ge.prototype.removeLayer=function(e){var t;this.viewComponent.contains(e)&&this.viewComponent.removeChild(e),t=this.layers.indexOf(e),t>=0&&this.layers.splice(t,1)},i(me,ge),me.NAME="FlashPlayerMediator",me.prototype.type="flash",me.prototype.listNotificationInterests=function(){return me.__super__.listNotificationInterests.call(this).concat([po.PLUGINS_INITIALIZED])},me.prototype.handleNotification=function(e){var t,i;switch(i=e.getName(),t=e.getBody(),i){case uo.READY:return;case po.PLUGINS_INITIALIZED:return void this.initialize()}me.__super__.handleNotification.call(this,e)},i(fe,f),fe.prototype.execute=function(e){this.security.setKey(e.getBody()),fe.__super__.execute.call(this,e)},i(ye,f),ye.prototype.execute=function(e){this.security.setToken(e.getBody()),this.security.setAuthorized(!0),ye.__super__.execute.call(this,e)};var co={START_AUTHENTICATION:"aisauthenticationstarted",AUTHENTICATED:"aisauthenticated",AUTHENTICATING:"aisauthenticating",AUTHENTICATION_COMPLETE:"aisauthenticationcomplete",CHOOSE_AUTH_PROVIDER:"aischooseprovider",CHOOSE_PLAY_OPTIONS:"aischooseplayoptions",LAUNCH_IDP_LOGIN:"aislaunchidplogin"};i(_e,h),_e.prototype.plugin=null,_e.prototype.proxy=null,_e.prototype.initializeNotifier=function(e){_e.__super__.initializeNotifier.call(this,e),this.proxy=this.facade.retrieveProxy(r.NAME),this.plugin=this.facade},i(ve,_e),ve.prototype.execute=function(e){this.proxy.vcsSet(0)},Ee.setCookie=function(e,t,i,n,o){var a;return t=escape(t),null!=i&&(a=new Date,a.setDate(a.getDate()+i),t+="; expires="+a.toUTCString()),null!=o&&(t+="; domain="+o),null!=n&&(t+="; path="+n),document.cookie=e+"="+t},Ee.getCookie=function(e){var t,i,n,o,a,r,s;for(i=document.cookie.split(";"),r=0,s=i.length;s>r;r++)if(t=i[r],n=t.indexOf("="),o=t.substr(0,n).replace(/^\s+|\s+$/g,""),a=unescape(t.substr(n+1)),o===e)return a},Ee.deleteCookie=function(e){return this.setCookie(e,"",-1)},i(Ae,_e),Ae.prototype.execute=function(e){this.proxy.vcsSet(this.proxy.currentTime)},i(Ce,_e),Ce.prototype.execute=function(e){var t;t=Math.floor(e.getBody()),0!==t&&t%30===0&&t!==this.proxy.currentTime&&this.proxy.vcsSet(t),this.proxy.currentTime=t},i(be,le),be.NAME=r.NAME,be.prototype.enabled=!0,be.prototype.plugin=null,be.prototype.setEnabled=function(e){return this.enabled=e,e},be.prototype.getEnabled=function(){return this.enabled},be.prototype.createPlugin=function(){},be.prototype.initialize=function(){this.plugin=this.createPlugin()},be.prototype.error=function(e){this.facade.logger.error("[AMP "+this.facade.getModuleName().toUpperCase()+" Error]",e)},i(Ne,be),Ne.NAME=r.NAME,Ne.prototype.client=null,Ne.prototype.currentTime=null,Ne.prototype.idps=null,Ne.prototype.idp=null,Ne.prototype.token=null,Ne.prototype.authz=null,Ne.prototype.defaults={platformID:null,resourceID:null,contentID:null,responseTargets:null,logos:{base:null,group:null,key:"full"}},Ne.prototype.getScript=function(){return this.value.plugin},Ne.prototype.initialize=function(){this.client=window.ais_client,this.client.setLogging(this.facade.logger.enabled),this.client.setPlatformId(this.value.platformID),this.client.setUseCache(!/MSIE [7-8]/.test(navigator.userAgent)),this.client.assignhandler("bounce",this.bounceHandler.bind(this)),this.client.assignhandler("chooser",this.chooserHandler.bind(this)),this.client.assignhandler("init",this.initHandler.bind(this)),this.client.assignhandler("authz_query",this.authz_queryHandler.bind(this)),this.client.assignhandler("identity",this.identityHandler.bind(this)),this.client.assignhandler("logout_result",this.logoutHandler.bind(this)),this.client.assignhandler("vcs",this.vcsHandler.bind(this)),window.onunload=function(){}},Ne.prototype.authorize=function(){this.authz=null,this.token=null,this.disengage(),this.sendNotification(co.START_AUTHENTICATION)},Ne.prototype.authorized=function(e){null==e&&(e=this.token),this.engage(),this.sendNotification(co.AUTHENTICATION_COMPLETE),this.sendNotification(fo.AUTHORIZED,e)},Ne.prototype.play=function(e){return this.sendNotification(uo.INITIALIZED),this.sendNotification(uo.PLAY),null!=e?this.sendNotification(uo.SEEK,e):void 0},Ne.prototype.engage=function(){this.facade.registerCommand(uo.TIME_UPDATE,Ce),this.facade.registerCommand(uo.PAUSE,Ae),this.facade.registerCommand(uo.ENDED,ve)},Ne.prototype.disengage=function(){this.facade.removeCommand(uo.TIME_UPDATE),this.facade.removeCommand(uo.PAUSE),this.facade.removeCommand(uo.ENDED)},Ne.prototype.logout=function(){var e,t,i,n,o;switch(t=(null!=(o=this.idp.window_display)?o.method:void 0)||"redirect",i=this.getTarget(t),this.setRedirect(t),t){case"redirect":window.open(this.client.logoutFormat(i),"_top");break;case"popup":n=this.idp.window_display.width||320,e=this.idp.window_display.height||240,window.open(this.client.logoutFormat(i),"ais_popup","width="+n+",height="+e);
}},Ne.prototype.bounce=function(e){this.client.bounce()},Ne.prototype.init=function(e){this.client.init()},Ne.prototype.choose=function(){this.client.chooser()},Ne.prototype.resourceAccess=function(e){null==e&&(e=this.value.resourceID),this.client.resourceAccess(e)},Ne.prototype.vcsSet=function(e){return e=Pt.formatTimecode(e),this.client.vcsSet(this.value.contentID,e)},Ne.prototype.bounceHandler=function(e,t){var i;i="true"===t.authenticated.toString(),i===!1?(this.sendNotification(uo.DISPATCH_EVENT,new At("authenticationfailed")),this.sendNotification(fo.AUTHORIZATION_FAILED),this.choose()):i===!0&&this.init()},Ne.prototype.initHandler=function(e,t){var i,n,o,a,r;this.idp=t.idps,this.facade.idps={},r=t.idps;for(i in r){o=r[i],this.facade.idps.key=i;for(n in o)a=o[n],this.facade.idps[n]=a;break}for(i in t)o=t[i],"idps"!==i&&null!=o&&(this.facade[i]=o);this.facade.idps.logo=this.value.logos.base+this.facade.idps.logos[this.value.logos.key],this.facade.player.sendNotification(uo.REMOVE_APPLICATION_STATE,"authenticating"),this.sendNotification(co.AUTHENTICATED,this.facade.idps),this.resourceAccess(this.value.resourceID)},Ne.prototype.chooserHandler=function(e,t){this.facade.sendNotification(uo.ADD_APPLICATION_STATE,"authenticating"),t.possible_idps=this.idps=this.sort(t.possible_idps,"value","display_name"),this.sendNotification(co.CHOOSE_AUTH_PROVIDER,t)},Ne.prototype.launchIDPLogin=function(e){var t,i,n,o,a,r;switch(this.sendNotification(co.AUTHENTICATING,!0),i=this.idps[e],n=(null!=(r=i.window_display)?r.method:void 0)||"redirect",o=this.getTarget(n),this.setRedirect(n),n){case"redirect":window.open(this.client.loginFormat(e,o),"_top");break;case"popup":n=i.window_display.method||"popup",a=i.window_display.width||320,t=i.window_display.height||240,window.open(this.client.loginFormat(e,o),"ais_popup","width="+a+",height="+t)}},Ne.prototype.identityHandler=function(e,t){var i;i=t.identity.attributes.aisuid},Ne.prototype.authz_queryHandler=function(e,t){var i,n,o;i="true"===t.authorization.toString(),i===!1?(this.sendNotification(fo.AUTHORIZATION_FAILED),this.authorize()):i===!0&&(this.authz=t,n={mvpdName:this.facade.idps.name,viewerId:this.client.aisuid,"std:viewerId":this.client.aisuid},this.facade.player.setParams({mvpdname:n.mvpdName}),this.facade.player.sendNotification(lo.SET_DIMENSIONS,n),this.facade.viewerId=this.client.aisuid,o=t.resource,null!=o&&(this.facade.resource=o),this.token="hdnea="+t.security_token,this.sendNotification(fo.SET_KEY,"hdnea="),this.sendNotification(fo.SET_TOKEN,t.security_token),this.sendNotification(co.AUTHENTICATING,!1),null!=this.value.contentID?this.client.vcsGet(this.value.contentID):this.authorized(this.token))},Ne.prototype.logoutHandler=function(e,t){top.location.href=top.location.href},Ne.prototype.vcsHandler=function(e,t){"get"===t.operation&&("00:00:00"===t.ph_pos||"00:00"===t.ph_pos?(this.client.vcsSet(this.value.contentID,t.ph_pos),this.authorized(this.token)):this.sendNotification(co.CHOOSE_PLAY_OPTIONS,Pt.flattenTimecode(t.ph_pos)))},Ne.prototype.sort=function(e,t,i){var n,o,a,r,s,l,d,c;s={},n=[],o=0;for(r in e)l=e[r],n[o]={key:r,value:l[i]},o++;for(n.sort(function(e,i){var n,o;return n="value"===t?e.value.toLowerCase():e.key.toLowercase(),o="value"===t?i.value.toLowerCase():i.key.toLowercase(),o>n?-1:n>o?1:0}),o=d=0,c=n.length;c>d;o=++d)a=n[o],s[a.key]=e[a.key];return s},Ne.prototype.setRedirect=function(e){var t,i,n;try{t=/\/dev\./,n=window.top.location.href||window.top.location,i=t.test(n)?n.replace(t,"/"):null,Ee.setCookie(this.getTarget(e),n,1,"/",i)}catch(o){}},Ne.prototype.getTarget=function(e){return null==e&&(e="redirect"),this.value.responseTargets[e]},i(Ie,puremvc.Proxy),Ie.NAME="PlaybackProxy",Ie.prototype.data=null,Ie.prototype.initialized=!1,Ie.prototype.enabled=null,Ie.prototype.handlers=null,Ie.prototype.resumeHandlers=null,Ie.prototype.playWhenLoaded=!1,Ie.prototype.metadataloaded=!1,Ie.prototype.getEnabled=function(){return this.enabled},Ie.prototype.setEnabled=function(e){return e!==this.enabled?(this.enabled=e,this.enabled===!0?this.load():this.applyHandlers(!1),e):void 0},Ie.prototype.applyHandlers=function(e){var t,i,n,o,a;null==e&&(e=!0),o=this.getMediaElement(),t=e?"addEventListener":"removeEventListener",a=this.handlers;for(n in a)i=a[n],o[t](n,i)},Ie.prototype.resumeloadedmetadata=function(e){var t;t=e.target,t.removeEventListener("loadedmetadata",this.resumeHandlers.loadedmetadata),this.handlers.durationchange(e),this.data.currentTime>0?(t.addEventListener("seeked",this.resumeHandlers.seeked),setTimeout(this.seek.bind(this),0)):this.resumecomplete()},Ie.prototype.resumeseeked=function(e){var t;t=e.target,t.removeEventListener("seeked",this.resumeHandlers.seeked),this.resumecomplete()},Ie.prototype.resumecomplete=function(){this.data.loading=!1,this.applyHandlers(!0),this.playWhenLoaded===!0&&setTimeout(this.play.bind(this),0)},Ie.prototype.ontimeupdate=function(e){this.data.currentTime=e.target.currentTime,this.sendNotification(uo.TIME_UPDATE,this.data.currentTime)},Ie.prototype.ondurationchange=function(e){var t;t=this.getMediaElement().duration,t===this.data.duration||0===t||isNaN(t)||(this.data.duration=t,/Android 4/.test(navigator.userAgent)&&-1!==e.target.src.indexOf(".m3u8")||this.sendNotification(uo.CHANGE_DURATION,t))},Ie.prototype.onplay=function(e){this.data.paused=!1},Ie.prototype.onplaying=function(e){this.data.paused=!1,this.data.seeking=!1,this.sendNotification(uo.PLAYING)},Ie.prototype.onpause=function(e){this.data.seeking!==!0&&(this.data.paused=!0,e.target.readyState>0&&(this.sendNotification(uo.PAUSED),this.sendNotification(uo.CHANGE_PLAY_STATE,ho.PAUSED)))},Ie.prototype.onloadeddata=function(e){this.sendNotification(uo.LOADED_DATA)},Ie.prototype.onwaiting=function(e){this.sendNotification(uo.WAITING)},Ie.prototype.onseeking=function(e){e.target.removeEventListener("timeupdate",this.handlers.timeupdate),this.data.seeking=!0,this.sendNotification(uo.SEEKING)},Ie.prototype.onseeked=function(e){this.data.seeking=!1,this.sendNotification(uo.SEEKED),e.target.addEventListener("timeupdate",this.handlers.timeupdate)},Ie.prototype.onended=function(e){this.data.ended=!0,this.sendNotification(uo.ENDED)},Ie.prototype.onprogress=function(e){var t,i;try{i=e.target,t=i.buffered,this.sendNotification(uo.PROGRESS,t.end(t.length-1)/i.duration)}catch(n){}},Ie.prototype.onerror=function(e){this.sendNotification(uo.ERROR,e.target.error)},Ie.prototype.onloadstart=function(e){this.sendNotification(uo.LOAD_START)},Ie.prototype.oncanplay=function(e){this.sendNotification(uo.CAN_PLAY)},Ie.prototype.oncanplaythrough=function(e){this.sendNotification(uo.CAN_PLAY_THROUGH),this.sendNotification(uo.PROGRESS,this.getDuration())},Ie.prototype.onloadedmetadata=function(e){this.metadataloaded=!0,this.sendNotification(uo.ENABLE_FULL_SCREEN),this.sendNotification(uo.LOADED_METADATA)},Ie.prototype.reset=function(){this.data.currentTime=0,this.data.duration=0,this.data.src=null,this.data.ended=!1,this.data.paused=!1,this.data.seeking=!1,this.data.started=!1,this.data.loading=!1},Ie.prototype.getStarted=function(){return this.data.started},Ie.prototype.getMediaElement=function(){return this.facade.getMediaElement()},Ie.prototype.canPlayType=function(e){var t;return t=this.getMediaElement().canPlayType(e)||"",(/Android 4\.[1-9]/.test(navigator.userAgent)||/Silk\/3/.test(navigator.userAgent))&&e===Pt.mimeTypes.m3u8&&(t="maybe"),"probably"===t&&/video\/f4m|x-flv/.test(e)&&/UCBrowser/.test(navigator.userAgent)&&(t=""),t},Ie.prototype.getPaused=function(){return this.data.paused},Ie.prototype.getEnded=function(){return this.data.ended},Ie.prototype.getSeeking=function(){return this.data.seeking},Ie.prototype.getCurrentTime=function(){return this.data.currentTime},Ie.prototype.setCurrentTime=function(e){return e!==this.data.currentTime?(this.data.currentTime=e,this.getStarted()&&this.seek(e),e):void 0},Ie.prototype.seek=function(e){null==e&&(e=this.data.currentTime),this.getMediaElement().currentTime=e},Ie.prototype.getSrc=function(){return this.data.src},Ie.prototype.setSrc=function(e){return(null==e||""===e)&&this.sendNotification(uo.ERROR,"The value of src is not supported: "+e),this.reset(),this.data.src=e,e},Ie.prototype.getVolume=function(){return this.getMediaElement().volume},Ie.prototype.setVolume=function(e){return e>=0&&1>=e&&e!==this.getMediaElement().volume&&this.sendNotification(uo.VOLUME_CHANGE,this.getMediaElement().volume=e),e},Ie.prototype.getMuted=function(){return this.data.muted},Ie.prototype.setMuted=function(e){var t;return this.data.muted=e,this.data.muted===!0?(this.data.volume=this.getVolume(),t=0):t=this.data.volume,this.sendNotification(uo.CHANGE_VOLUME,t),e},Ie.prototype.getDuration=function(){return this.data.duration},Ie.prototype.play=function(){if(this.data.started!==!0){if(this.data.started=!0,this.setEnabled(!0),this.playWhenLoaded=!0,this.metadataloaded===!1)return}else if(this.data.loading===!0)return void(this.playWhenLoaded=!0);this.getMediaElement().play()},Ie.prototype.pause=function(){this.data.paused=!0,this.getMediaElement().pause()},Ie.prototype.load=function(){var e,t;this.data.loading=!0,this.playWhenLoaded=!1,this.metadataloaded=!1,e=this.getMediaElement(),e.addEventListener("loadedmetadata",this.handlers.loadedmetadata),e.addEventListener("loadedmetadata",this.resumeHandlers.loadedmetadata),e.addEventListener("durationchange",this.handlers.durationchange),e.addEventListener("canplaythrough",this.handlers.canplaythrough),e.addEventListener("error",this.handlers.error),e.src=this.data.src,Pt.isIPad()&&(null!=(t=Pt.getIOSversion())?t[0]:void 0)<8?setTimeout(e.load.bind(e),100):e.load()},i(Pe,puremvc.SimpleCommand),Pe.prototype.execute=function(e){var t,i,n;t=this.facade.retrieveProxy(ft.NAME),i=this.facade.retrieveProxy(se.NAME),n=t.getSrc()||"",-1===n.indexOf(".smil")&&(n=i.createURL(n)),t.setSrc(n),this.facade.getMediaElement().authenticationComplete({media:t.getData()})},i(Se,Ie),Se.prototype.supportedTypes=null,Se.prototype.playbackCoreName=null,Se.prototype.getPlaybackCoreName=function(){return this.playbackCoreName},Se.prototype.getSupportedTypes=function(){return this.supportedTypes},Se.prototype.setSupportedTypes=function(e){return this.supportedTypes=e,e},Se.prototype.canPlayType=function(e){return-1!==this.getSupportedTypes().indexOf(e)?"maybe":""},i(Te,Se),Te.NAME=Ie.NAME,Te.prototype.player=null,Te.prototype.initialized=!0,Te.prototype.playbackCoreName="flash",Te.prototype.supportedTypes=["video/mp4","video/x-flv","video/f4m","application/smil","application/smil+xml"],Te.prototype.getPaused=function(){return this.player.getPaused()},Te.prototype.getEnded=function(){return this.player.getEnded()},Te.prototype.getSeeking=function(){return this.player.getSeeking()},Te.prototype.getCurrentTime=function(){return this.player.getCurrentTime()},Te.prototype.setCurrentTime=function(e){return this.player.setCurrentTime(e),e},Te.prototype.getSrc=function(){return this.player.getSrc()},Te.prototype.setSrc=function(e){return this.player.setSrc(e),e},Te.prototype.getVolume=function(){return this.player.getVolume()},Te.prototype.setVolume=function(e){return this.player.setVolume(e),e},Te.prototype.getMuted=function(){return this.player.getMuted()},Te.prototype.setMuted=function(e){return this.player.setMuted(e),e},Te.prototype.getDuration=function(e){return this.player.getDuration()},Te.prototype.play=function(){this.player.play()},Te.prototype.pause=function(){this.player.pause()},Te.prototype.load=function(){this.player.load()},i(we,ae),we.prototype.initialize=function(e,t){var i,n;this.config=e,this.parentModule=t,this.createDefaults(),this.logEvents=(null!=(i=this.config.flash)?i.logEvents:void 0)===!0||"true"===(null!=(n=a["amp-flash-log"])?n.toLowerCase():void 0),we.__super__.initialize.call(this,this.config,this.parentModule)},we.prototype.createFramework=function(){var e,t,i,n,o,a,r,s,l,d=this;we.__super__.createFramework.call(this),i=this.config.flash||{},a=(null!=(l=i["static"])?l.enabled:void 0)===!0?i["static"]:i,o=this.debug&&null!=a.debug?a.debug:a.swf||"amp.swf",r=i.version||"10.1",t=this.evaluatePaths(i.expressInstallSWF)||"playerProductInstall.swf",n=this.createParams(i),e=this.createAttributes(i),this.flashvars=this.createFlashVars(i),null==this.flashvars.settings_url&&(s=this.createXML(this.config),null!=s&&(this.flashvars.settings_xml=s)),swfobject.embedSWF(this.evaluatePaths(o),this.flashObjectID,"100%","100%",r,t,this.flashvars,n,e,function(e){d.createdHandler(e)})},we.prototype.playerType="flash",we.prototype.flashObjectID="flashObject",we.prototype.playState=null,we.prototype.loaded=!1,we.prototype.flashvars=null,we.prototype.seeking=!1,we.prototype.paused=!1,we.prototype.ended=!1,we.prototype.muted=!1,we.prototype.plugins=null,we.prototype.debug=!1,we.prototype.started=!1,we.prototype.displayState=null,we.prototype.logEvents=!1,we.prototype.media=null,we.prototype.bindings=null,we.prototype.configuration=null,we.prototype.params=null,we.prototype.appState=null,we.prototype.security=null,we.prototype.playback=null,we.prototype.configuration=null,we.prototype.flashPlugins=[{id:"AkamaiAdvancedStreamingPlugin",src:"http://players.edgesuite.net/flash/plugins/osmf/advanced-streaming-plugin/v3.9/osmf2.0/AkamaiAdvancedStreamingPlugin.swf",absolute:!0,host:"osmf",main:"com.akamai.osmf.AkamaiAdvancedStreamingPluginInfo",type:"application/x-shockwave-flash"},{id:"ErrorMessagingPlugin",src:"#{paths.resources}plugins/ErrorMessagingPlugin.swf",blocking:!1,host:"akamai",main:"ErrorMessagingPlugin",type:"application/x-shockwave-flash"},{id:"VideoMetricsViewPlugin",src:"#{paths.resources}plugins/VideoMetricsViewPlugin.swf",blocking:!1,host:"akamai",main:"VideoMetricsViewPlugin",type:"application/x-shockwave-flash"},{id:"VideoStatsInfoOverlayPlugin",src:"#{paths.resources}plugins/VideoStatsInfoOverlayPlugin.swf",blocking:!1,host:"akamai",main:"VideoStatsInfoOverlayPlugin",type:"application/x-shockwave-flash"}],we.prototype.createModel=function(){this.appState=new ut,this.registerProxy(this.appState),this.bindings=new Qe,this.registerProxy(this.bindings),this.security=new se,this.registerProxy(this.security),this.media=new ft,this.registerProxy(this.media),this.playback=new Te(this),this.registerProxy(this.playback),this.configuration=new pt(this.config),this.registerProxy(this.configuration)},we.prototype.createView=function(){this.registerMediator(new me(this.getViewComponent())),this.registerMediator(new he),this.registerMediator(new Ye),this.registerMediator(new ce(this,this.config))},we.prototype.createController=function(){we.__super__.createController.call(this),this.registerCommand(fo.AUTHORIZED,Pe),this.registerCommand(fo.SET_TOKEN,ye),this.registerCommand(fo.SET_KEY,fe),this.registerCommand(uo.CHANGE_PLAY_STATE,Ve),this.registerCommand(uo.PLAY_STATE_CHANGE,f),this.registerCommand(uo.START,de),this.registerCommand(uo.STARTED,f),this.registerCommand(uo.PLAY,f),this.registerCommand(so.FLASH_CREATED,f)},we.prototype.createMediaElement=function(){var e,t;return e=new ue("flash","div"),t=e.getViewComponent(),t.id=t.name=this.flashObjectID,this.sendNotification(uo.PLAYBACK_CORE_CHANGE,e),t},we.prototype.createDefaults=function(){var e,t,i,n,o,a,r,s;if(!(!(null!=(a=this.flashPlugins)?a.length:void 0)>0)){for(t=this.config.resources||[],null!=(null!=(r=this.config.flash)?r.resources:void 0)&&(t=t.concat(this.config.flash.resources)),i=Pt.mimeTypes.swf,s=this.flashPlugins,n=0,o=s.length;o>n;n++)e=s[n],null!=e&&0===t.filter(function(t){return t.id===e.id}).length&&(null==e.type&&(e.type=i),t.push(e));this.config.resources=t}},we.prototype.createParams=function(e){var t;return t={allowFullScreen:!0,allowScriptAccess:"always",wmode:"direct",bgColor:"#000000"},null!=e.params&&(null!=e.params.allowFullScreen&&(t.allowFullScreen=e.params.allowFullScreen),null!=e.params.allowScriptAccess&&(t.allowScriptAccess=e.params.allowScriptAccess),null!=e.params.wmode&&(t.wmode=e.params.wmode),null!=e.params.bgColor&&(t.bgColor=e.params.bgColor)),"direct"===t.wmode&&/MSIE/.test(navigator.userAgent)&&(t.wmode="transparent"),t},we.prototype.getModules=function(){return this.plugins},we.prototype.createPlugins=function(){var e,t,i,n,o,a;a=Xt.plugins;for(i in a)if(o=a[i],i in this.config&&this.config[i].enabled!==!1)if(e=o[this.getPlayerType()],null!=e)try{n=this[i]=this.plugins[i]=new e(this,this.config[i]),this.registerMediator(this.plugins[i]),t="function"==typeof n.getFeatureName?n.getFeatureName():void 0,null!=t&&(this[t]=n),this.logger.debug("[AMP] Plugin registered: "+i)}catch(r){this.logger.error("[AMP] Plugin could not be created: "+i+". "+r);continue}else this.logger.debug("[AMP] Plugin could not be found: "+i);this.sendNotification(po.PLUGINS_INITIALIZED,this.plugins)},we.prototype.createAttributes=function(e){var t;return t={id:this.flashObjectID,name:this.flashObjectID},null!=e.attributes&&(null!=e.attributes.id&&(t.id=e.attributes.id),null!=e.attributes.name&&(t.name=e.attributes.name)),t},we.prototype.createFlashJSON=function(e,t){var i,n;return null==e&&(e=this.config),e=JSON.stringify(e),e=this.evaluatePaths(e),e=JSON.parse(e),n=function(e,t,n){switch(typeof n){case"string":e[t]=escape(n);break;case"object":i(n)}},i=function(e){var t,i,o,a;if(e instanceof Array)for(t=o=0,a=e.length;a>o;t=++o)i=e[t],n(e,t,i);else if("object"==typeof e)for(t in e)i=e[t],n(e,t,i)},i(e),escape(JSON.stringify(e,null,t))},we.prototype.createFlashVars=function(e){var t,i,n,o,a,r,s,l;if(t={},n=JSON.parse(JSON.stringify(this.config)),n.flash=null,delete n.flash,n.locales=null,delete n.locales,n.params=null,delete n.params,n.rules=null,delete n.rules,t.settings_json=this.createFlashJSON(n),null!=this.config.autoplay&&(t.auto_play=this.config.autoplay),null!=this.config.rules&&Pt.mergeRules(this.config.rules),t.hinting_rules=escape(JSON.stringify(Pt.rules)),null!=this.config.volume&&(t.volume=Pt.clamp(this.config.volume,0,1)),null!=this.config.target&&(t.external_target=this.config.target),null!=this.config.name&&(t.core_player_name=this.config.name),null!=this.config.domain&&(t.embed_domain=t.domain=this.config.domain),t.auto_replay=this.config.loop===!0,null!=this.config.fullscreen&&(t.fullscreen_enabled=this.config.fullscreen.enabled!==!1&&this.config.fullscreen.mode!==ao.EXTERNAL),null!=this.config.titlebar&&(t.titlebar_enabled=this.config.titlebar.enabled!==!1),null!=this.config.params&&(t.params=escape(JSON.stringify(this.config.params))),null!=this.config.version&&(t.context_menu_label=this.config.version),null!=(null!=(a=this.config.controls)?a.displaySceneMarkers:void 0)&&(t.displaySceneMarkers=this.config.controls.displaySceneMarkers),null!=this.config.media&&(null!=this.config.media.src&&(this.setSrc(this.config.media.src),t.video_url=escape(this.config.media.src)),null!=this.config.media.source&&this.config.media.source.length>0&&(this.setSource(this.config.media.source),t.video_url=escape(this.media.getSrc())),null!=this.config.media.medium&&(this.setMedium(this.config.media.medium),t.medium=this.config.media.medium),null!=this.config.media.title&&(t.title=escape(this.config.media.title)),null!=this.config.media.poster&&(t.poster=escape(this.config.media.poster)),null!=this.config.media.temporalType&&(t.temporalType=this.config.media.temporalType)),"audio"===this.getMedium()&&(t.controls=!0,t.auto_hide=-1),null!=(null!=(r=this.config.ima)&&null!=(s=r.overlay)?s.delay:void 0)&&(t.overlay_ad_delay=this.config.ima.overlay.delay),null!=this.config.ticker&&this.config.ticker.enabled!==!1&&(null!=this.config.ticker.url&&(t.ticker_text_url=this.config.ticker.url),null!=this.config.ticker.interval&&(t.ticker_polling_interval=this.config.ticker.interval),null!=this.config.ticker.speed&&(t.ticker_speed=this.config.ticker.speed)),t.show_play_button_overlay=!1,t.auto_play_list=!1,t.next_video_timer=0,null==t.context_menu_mode&&(t.context_menu_mode=this.debug===!0?"long":"short"),this.sendNotification(so.CREATE_FLASH_VARS,{flashvars:t,config:this.config}),null!=e.vars){l=e.vars;for(i in l)o=l[i],t[i]=o}return t},we.prototype.createXML=function(e){var t,i,n,o,a,r,s,d,c,u,p,h,g,m,f,y,_,v,E,A,C,b,N,I,P;if(null==(null!=e&&null!=(N=e.flash)?N.xml:void 0)&&(null==e.flash&&(e.flash={}),e.flash.xml="<appication></application>"),v=l.parse(e.flash.xml),v.childNodes.length>1&&v.removeChild(v.firstChild),this.sendNotification(so.CREATE_XML,{config:e,xml:v}),c=function(e){var t,i,n,a,r,s,l;if(a=e.resources,i=[],a instanceof Array&&(null!=a?a.length:void 0)>0)for(s=0,l=a.length;l>s;s++)n=a[s],n.type===m&&(n=Pt.clone(n),o===!0?null!=n.main&&""!==n.main?(n.src=n.main,n.type="static"):n.type="dynamic":null!=n.src&&""!==n.src?n.type="dynamic":(n.src=n.main,n.type="static"),delete n.main,i.push(n));for(t in e)r=e[t],"flash"!==t&&null!=(a=null!=r?r.resources:void 0)&&a instanceof Array&&a.length>0&&(i=i.concat(c(r)));return i},m=Pt.mimeTypes.swf,h=c(this.config),o=(null!=(I=e.flash["static"])?I.enabled:void 0)===!0,(null!=h?h.length:void 0)>0)for(d=v.getElementsByTagName("plugins"),d.length<1?(d=v.createElement("plugins"),v.firstChild.appendChild(d)):d=d[0],E=0,C=h.length;C>E;E++)if(p=h[E],p.enabled!==!1){s=v.createElement("plugin");for(a in p)f=p[a],"src"!==a?s.setAttribute(a,f):("id"===a&&"AkamaiAdvancedStreamingPlugin"===f&&this.debug===!0&&(f=f.replace("AkamaiAdvancedStreamingPlugin.swf","AkamaiAdvancedStreamingPlugin-logging.swf")),s.appendChild(l.createTextContent(v,f)));d.appendChild(s)}if(u=function(e,t){var i,n,o,a,r;if(null!=e.attributes){a=e.attributes;for(n in a)o=a[n],t.setAttribute(n,o)}if(null!=e.elements){r=e.elements;for(n in r)o=r[n],i=v.createElement("element"),i.setAttribute("id",n),u(o,i),t.appendChild(i)}return t},y=this.config.flash.view,null!=y&&(_=u(y,v.createElement("view")),v.firstChild.appendChild(_)),r=null!=(P=this.config.fullscreen)?P.mode:void 0,null!=r)for(n=v.getElementsByTagName("element"),A=0,b=n.length;b>A;A++)i=n[A],"fullscreenBtn"===i.getAttribute("id")&&i.setAttribute("action","external");return g=l.serialize(v),t=g.match(/<application>[\w\W\s\S\d\D]*<\/application>/)[0]||g,t=t.replace(/[\n\r\t]/g,""),t=this.evaluatePaths(t),escape(t)},we.prototype.createdHandler=function(e){var t=this;this.mediaElement=e.ref,this.mediaElement.className=mo.PREFIX+ue.prototype.componentType,this.mediaElement.eventHandler=function(e,i){return t.eventHandler(e,i)},this.sendNotification(so.FLASH_CREATED),null!=this.getMedium()&&this.setMedium(this.getMedium())},we.prototype.eventHandler=function(e,t){var i,n,o,a,r,s;this.logEvents&&!this.excludedFlashEvents.test(e)&&this.logger.log("[AMP FLASH EVENT] "+e,t);try{switch(e){case so.INITIALIZED:a=o="ready";break;case so.RESET:null==t&&(o="ready"),this.started=!1;break;case so.LOADING:a="loadstart";break;case so.PLAYER_ERROR:a=o="error";break;case so.MEDIA_ERROR:a=o="error";break;case so.ERROR_STREAM_NOT_FOUND:a=o="error";break;case so.CAPABILITY_CHANGE:n=t.type,"canPlayChange"===n&&t.enabled===!0?(a="canplay",this.loaded=!0):"canSeekChange"===n&&t.enabled===!0?a="canplaythrough":"temporalChange"===n&&t.enabled===!0&&(a="loadedmetadata",this.started||this.sendNotification(uo.START,t));break;case so.PLAYING:this.started||this.sendNotification(uo.START,t),a=o="playing",this.ended=!1,this.paused=!1;break;case so.ELEMENT_EVENT:"fullscreenBtn"===t.element&&"click"===t.type&&(null!=(r=this.config)&&null!=(s=r.fullscreen)?s.mode:void 0)===ao.EXTERNAL&&(o=this.getDisplayState()===yo.FULL_SCREEN?yo.NORMAL:yo.FULL_SCREEN,this.setDisplayState(o));break;case so.PLAY_REQUEST:a="playrequest",this.loaded=!0;break;case so.PLAY:"paused"!==this.playState&&this.started&&this.sendNotification(uo.PLAY,t);break;case so.ENDED:a=o="ended",this.ended=!0;break;case so.PAUSED:a="pause",o="paused",this.paused=!0;break;case so.BUFFERING:"ended"!==this.className&&(a=o="waiting");break;case so.DURATION_CHANGE:isNaN(t.time)||(a="durationchange",t=t.time);break;case so.VOLUME_CHANGE:a="volumechange";break;case so.TIME_UPDATE:a="timeupdate";break;case so.SEEKING_CHANGE:a=t.seeking?"seeking":"seeked",this.seeking=t.seeking;break;case so.FULLSCREEN_CHANGE:a="fullscreenchange",t="fullScreen"===t.displayState,this.applyDisplayState(t?yo.FULL_SCREEN:yo.NORMAL);break;case so.FAIL_OVER_ATTEMPT:a="failoverattempt",t=t;break;case so.ERROR:e=null;break;case so.AUTHORIZE:a=fo.AUTHORIZE}null!=e&&e!==a&&(n=new At(e,t),n.dispatcher="FLASH",this.sendNotification(uo.DISPATCH_EVENT,n),this.sendNotification(e,t)),null!=a&&("error"===a&&(i=t.error||t,this.error("Flash Error",i)),this.sendNotification(a,t),this.sendNotification(uo.DISPATCH_EVENT,new At(a,t))),null!=o&&this.setPlayState(o)}catch(i){this.error("Event Error: "+e,i)}},we.prototype.error=function(e,t){this.logger.error("[AMP FLASH ERROR]",e,t)},we.prototype.excludedFlashEvents=/(mediaPlayerPlayheadUpdate|mediaPlayerElementEvent|adComponentPlaybackProgress)/,we.prototype.logFlashEvents=!1,we.prototype.logEvent=function(e){"FLASH"===e.dispatcher&&this.logFlashEvents===!1||this.excludedFlashEvents.test(e.type)===!0||we.__super__.logEvent.call(this,e)},we.prototype.setPlayState=function(e){var t;if(e!==this.playState)return t={newState:e,oldState:this.playState},this.playState=e,this.sendNotification(uo.PLAY_STATE_CHANGE,t),e},we.prototype.setMedia=function(e){return we.__super__.setMedia.call(this,e),null!=this.playState&&this.setPlayState("ready"),this.media.setData(e),null!=e.src&&this.setSrc(e.src),null!=e.source&&e.source.length>0&&this.setSource(e.source),this.sendNotification(uo.MEDIA_CHANGE,e),this.loaded=!0,this.mediaElement.loadURL(this.media.getSrc(),this.media.getData()),e},we.prototype.getMedia=function(){return this.media.getData()},we.prototype.load=function(){this.loaded=!0,this.mediaElement.loadURL(this.media.getSrc())},we.prototype.play=function(){this.loaded||this.load(),this.mediaElement.unpause()},we.prototype.setMuted=function(e){this.muted=e;try{e===!0?this.mediaElement.mute():this.mediaElement.unmute()}catch(t){this.error("Flash muted error",t)}return e},we.prototype.getMuted=function(){return this.muted},we.prototype.getSrc=function(e){return this.mediaElement.getURL()},we.prototype.setSrc=function(e){return this.media.setSrc(e),this.loaded=!1,this.setMedium(Pt.getMimeType(e)),e},we.prototype.setAutoplay=function(e){return this.mediaElement.setPlayerProperty("autoplay",e),e},we.prototype.getAutoplay=function(){return this.mediaElement.getPlayerProperty("autoplay")},we.prototype.getMedium=function(){return this.media.getData().medium},we.prototype.setMedium=function(e){var t,i,n;return t=this.media.getData(),e!==t.medium?(null!=t.medium&&(n="medium-"+t.medium),i=t.medium=/audio/.test(e)?"audio":"video",this.sendNotification(uo.MEDIUM_CHANGE,{newState:"medium-"+i,oldState:n}),e):void 0},we.prototype.setSource=function(e){var t,i,n=this;if(!(null==e||e.length<1)){if(i=this.media.getData(),i.source=e,this.loaded=!1,t=Pt.selectSource(e,function(e){return n.canPlayType(e)}),null==(null!=t?t.src:void 0)||""===t.src)throw new Error("No valid source could be found");return this.setSrc(t.src),"undefined"!=typeof type&&null!==type&&this.setMedium(type),e}},we.prototype.getSource=function(e){return this.media.getData().source},we.prototype.getSeeking=function(){return this.seeking},we.prototype.getPaused=function(){return this.paused},we.prototype.getEnded=function(){return this.ended},we.prototype.getFlashXML=function(){var e,t;return t=unescape(this.flashvars.settings_xml),e=l.parse(t),e.toString=function(){return t},e},we.prototype.getFlashVars=function(){return this.flashvars},we.prototype.getFlashJSON=function(){return JSON.parse(unescape(this.flashvars.settings_json))},we.prototype.evaluateBinding=function(e){return this.mediaElement.evaluateBinding(e)},we.prototype.canPlayType=function(e){return n.call(Pt.flashTypes,e)>=0?"maybe":""},we.prototype.replay=function(){this.mediaElement.replay()},we.prototype.pause=function(){this.mediaElement.pause()},we.prototype.end=function(){this.mediaElement.stopPlayer()},we.prototype.getCurrentTime=function(e){return this.mediaElement.getCurrentTime()},we.prototype.setCurrentTime=function(e){return this.mediaElement.jumpToTime(e),e},we.prototype.getParams=function(){return this.mediaElement.getParams()},we.prototype.setParams=function(e){return this.mediaElement.setParams(e),e},we.prototype.getVolume=function(){return this.mediaElement.getVolume()},we.prototype.setVolume=function(e,t){return this.mediaElement.setVolume(e,t||""),e},we.prototype.getDuration=function(){return this.mediaElement.getDuration()},we.prototype.getDisplayState=function(e){return this.displayState},we.prototype.setDisplayState=function(e){var t;if(e!==this.displayState&&(this.applyDisplayState(e),(null!=(t=this.config.fullscreen)?t.mode:void 0)!==ao.EXTERNAL))return this.displayState===yo.FULL_SCREEN?this.mediaElement.enterFullScreen():this.mediaElement.exitFullScreen(),e},we.prototype.applyDisplayState=function(e){var t;e!==this.displayState&&(t={newState:e,oldState:this.displayState},this.displayState=e,this.sendNotification(uo.DISPLAY_STATE_CHANGE,t),this.sendNotification(uo.DISPATCH_EVENT,new At("fullscreenchange",this.displayState===yo.FULL_SCREEN)))},we.prototype.enterFullScreen=function(){this.setDisplayState(yo.FULL_SCREEN)},we.prototype.exitFullScreen=function(){this.setDisplayState(yo.NORMAL)},we.prototype.recordContentChange=function(e){this.mediaElement.recordContentChange(e)},i(De,puremvc.Mediator),De.prototype.module=null,De.prototype.mediator=null,De.prototype.initializeNotifier=function(e){var t,i=this;De.__super__.initializeNotifier.call(this,e),t=this.module.listNotificationPublications(),null!=t&&(this.mediator=new puremvc.Mediator(this.facade.getModuleName()),this.mediator.listNotificationInterests=function(){return t},this.mediator.handleNotification=function(e){i.facade.sendNotification(e.getName(),e.getBody(),e.getType())})},De.prototype.onRegister=function(){null!=this.mediator&&this.module.registerMediator(this.mediator)},De.prototype.onRemove=function(){null!=this.mediator&&this.module.removeMeditator(this.mediator)},De.prototype.listNotificationInterests=function(){return this.module.listNotificationInterests()},De.prototype.handleNotification=function(e){this.module.sendNotification(e.getName(),e.getBody(),e.getType())};var uo={STARTUP:"startup",LOAD:"load",PAUSE_REQUEST:"pauserequest",TOGGLE_PLAY_PAUSE:"togglePlayPause",CHANGE_PLAY_STATE:"chageplaystate",PLAY_STATE_CHANGE:"playstatechange",TOGGLE_FULL_SCREEN:"toggleFullScreen",CHANGE_DISPLAY_STATE:"chageDisplayState",DISPLAY_STATE_CHANGE:"displayStateChange",FULL_SCREEN_CHANGE:"fullscreenchange",DISABLE_FULL_SCREEN:"disableFullScreen",ENABLE_FULL_SCREEN:"enableFullScreen",LANGUAGE_CHANGE:"languagechange",TOGGLE_ACTIVE:"toggleActive",CHANGE_ACTIVE_STATE:"changeactivestate",ACTIVE_STATE_CHANGE:"activestatechange",CHANGE_MEDIA:"changeMedia",SET_MEDIA:"setmedia",MEDIA_VALIDATED:"mediavalidated",UPDATE_DATA_BINDINGS:"updatedatabindings",CHANGE_VOLUME:"changevolume",CHANGE_MUTED:"changemuted",TOGGLE_MUTED:"togglemuted",SEEK:"seek",CHANGE_DURATION:"changeduration",CHANGE_AUTOPLAY:"changeAutoplay",CHANGE_LOOP:"changeLoop",PLAYBACK_CORE_CHANGE:"playbackCoreChange",START:"start",END:"end",REPLAY:"replay",REGISTER_PLUGIN:"registerPlugin",REGISTER_PLUGINS:"registerPlugins",PLUGIN_REGISTERED:"pluginRegistered",ADD_LAYER:"addLayer",REMOVE_LAYER:"removeLayer",ADD_OVERLAY:"addOverlay",REMOVE_OVERLAY:"removeOverlay",ADD_CONTROL:"addControl",REMOVE_CONTROL:"removeControl",ADD_CONTROL_STATE:"addControlState",REMOVE_CONTROL_STATE:"removeControlState",ADD_APPLICATION_STATE:"addApplicationState",REMOVE_APPLICATION_STATE:"removeApplicationState",DISPATCH_EVENT:"dispatchEvent",CHANGE_PARAMS:"changeParams",ADD_CUE_POINTS:"addCuePoints",REMOVE_CUE_POINTS:"removeCuePoints",INITIALIZED:"initialized",REGISTER_PLAYBACK_CORE:"registerPlaybackCore",REMOVE_PLAYBACK_CORE:"removePlaybackCore",DISPLAY_TIME:"displaytime",IS_USER_ACTIVE:"isUserActive",LOADED_METADATA:"loadedmetadata",READY:"ready",ERROR:"error",
ENDED:"ended",STARTED:"started",DURATION_CHANGE:"durationchange",SEEKING:"seeking",SEEKED:"seeked",TIME_UPDATE:"timeupdate",LOAD_START:"loadstart",LOADED_DATA:"loadeddata",CAN_PLAY:"canplay",CAN_PLAY_THROUGH:"canplaythrough",PROGRESS:"progress",MEDIA_CHANGE:"mediachange",WAITING:"waiting",PLAY:"play",PLAYING:"playing",PAUSE:"pause",PAUSED:"paused",PLAY_REQUEST:"playrequest",MEDIUM_CHANGE:"mediumchange",TEMPORAL_TYPE_CHANGE:"temporaltypechange",VOLUME_CHANGE:"volumechange",FAIL_OVER_ATTEMPT:"failoverattempt",PLAYBACK_TARGET_CHANGE:"playbacktargetchange",PLAYBACK_TARGET_AVAILABLE:"playbacktargetavailable",RECORD_CONTENT_CHANGE:"recordcontentchange",CHANGE_CONTENT:"changecontent",CONTENT_CHANGED:"contentchanged"};xe.SINGLE=/^\s*#{([^#{}]+)}\s*$/,xe.TOKEN=/#{([^#}]*)}/g,xe.RETURN="return ",xe.EVENT="event",xe.ELEMENT="element",xe.PATHS="paths",xe.eval=function(e,t,i,n,o){var a,r,s;return null==e?e:(r=null!=(s=this.SINGLE.exec(e))?s[1]:null,a=null!=r?this.evalBinding(r,t,i,n,o):this.evalString(e,t,i,n,o))},xe.evalString=function(e,t,i,n,o){return e.replace(this.TOKEN,this.replaceBinding.bind(this,t,i,n,o))},xe.replaceBinding=function(e,t,i,n,o,a,r,s){return this.evalBinding(a,e,t,i,n)},xe.evalBinding=function(e,t,i,n,o){var a;try{a=this.exec(e,t,i,n,o)}catch(r){a="#{"+e+"}"}return a},xe.exec=function(e,t,i,n,o){return new Function(this.EVENT,this.ELEMENT,this.PATHS,this.RETURN+e).bind(t)(i,n,o)},i(Me,puremvc.SimpleCommand),Me.prototype.execute=function(e){var t,i;i=this.facade.player||this.facade,t=e.getBody(),t.player=i,this.facade.dispatchEvent(t)},Le.create=function(e){return new Le(e)};var po={REGISTER_PLUGINS:"registerPlugins",PLUGIN_REGISTERED:"pluginRegistered",PLUGINS_INITIALIZED:"pluginsinitialized"},ho={READY:"ready",PLAYING:"playing",PAUSED:"paused",ENDED:"ended",LOADING:"loading",WAITING:"waiting",SEEKING:"seeking",ERROR:"error"};i(ke,puremvc.Proxy),ke.prototype.contextName=null,ke.prototype.contextData=null,ke.prototype.getContextName=function(){return this.contextName},ke.prototype.getContextData=function(){return this.contextData},i(Re,puremvc.Proxy),Re.NAME="PlaybackProxy",Re.prototype.src=null,Re.prototype.canPlayType=function(e){return"external"===e},Re.prototype.getSrc=function(){return this.src},Re.prototype.setSrc=function(e){return(null==e||""===e)&&this.sendNotification(uo.ERROR,"The value of src is not supported: "+e),e!==this.src&&(this.src=e),e},Re.prototype.play=function(){window.open(this.getSrc(),"_blank")},Re.prototype.load=function(){},Re.prototype.setVolume=function(){},Re.prototype.pause=function(){},Re.prototype.setEnabled=function(){},Re.prototype.getCurrentTime=function(){return 0},Re.prototype.setCurrentTime=function(e){},Re.prototype.getDuration=function(){return 0};var go={TOGGLE_PLAY_PAUSE:"usertogglePlayPause",PLAY:"userplay",PAUSE:"userpause",SEEK:"userseek"};Oe.prototype.data=null,Oe.prototype.value=null,Oe.prototype.source=null,Oe.prototype.parse=function(e){},Oe.prototype.compile=function(e,t){null==e&&(e={}),null==t&&(t=!1)};var mo={PREFIX:"akamai-"},fo={CHECK_AUTHORIZATION:"checkAuthorization",AUTHORIZATION_FAILED:"authorizationfailed",AUTHORIZE:"authorize",AUTHORIZED:"authorized",SET_TOKEN:"settoken",SET_KEY:"setkey"};i(Ve,h),Ve.prototype.execute=function(e){this.applicationState.setPlayState(e.getBody())},i(Ge,h),Ge.prototype.execute=function(e){var t;t=e.getBody(),this.sendNotification(uo.CHANGE_MEDIA,t),t=this.media.getData(),this.media.authorized===!0&&this.sendNotification(uo.MEDIA_VALIDATED,t)},i(Ue,h),Ue.prototype.execute=function(e){var t;t=e.getBody(),this.media.getDuration()!==t&&this.media.setDuration(t)},i(Be,f),Be.prototype.execute=function(e){var t;t=this.playback.getMediaElement(),ht.clear(t),this.logger.error("[AMP ERROR]",e.getBody()),this.sendNotification(uo.CHANGE_PLAY_STATE,ho.ERROR),Be.__super__.execute.call(this,e)},i(He,f),He.prototype.execute=function(e){var t,i;t=null!=(i=this.facade.config)?i.volume:void 0,null!=t&&this.sendNotification(uo.CHANGE_VOLUME,t),this.sendNotification(uo.CHANGE_DISPLAY_STATE,yo.NORMAL),this.sendNotification(uo.CHANGE_PLAY_STATE,ho.READY),this.sendNotification(uo.CHANGE_ACTIVE_STATE,vo.ACTIVE),this.dispatchEventAfterCommand(e)},i(Fe,h),Fe.prototype.execute=function(e){var t;t=e.getBody()||{},this.bindings.compile(t.contexts,t.suppressErrors)},i(je,h),je.prototype.execute=function(e){this.params.setData(e.getBody()),this.sendNotification(uo.UPDATE_DATA_BINDINGS,{suppressErrors:!0})},i(ze,f),ze.prototype.execute=function(e){var t;t=e.getBody(),this.playerCore.setPlaybackType(t.type),this.playback.setSrc(t.src),this.playback.setCurrentTime(t.startTime||0),ze.__super__.execute.call(this,e)},i(We,h),We.prototype.execute=function(e){var t;t=e.getBody(),this.playback.setEnabled(!1),this.playback.pause(),this.sendNotification(uo.CHANGE_PLAY_STATE,ho.READY),this.sendNotification(uo.CHANGE_ACTIVE_STATE,vo.ACTIVE);try{this.media.setData(t)}catch(i){this.sendNotification(uo.ERROR,i.message)}this.sendNotification(uo.UPDATE_DATA_BINDINGS),this.sendNotification(fo.AUTHORIZE)},i(Ye,pe),Ye.prototype.componentName="overlays",Ye.NAME="OverlayLayerMediator",Ye.prototype.createMediatorName=function(){return Ye.NAME},Ye.prototype.listNotificationInterests=function(){return[uo.ADD_OVERLAY,uo.REMOVE_OVERLAY]},Ye.prototype.handleNotification=function(e){var t,i;switch(t=e.getName(),i=e.getBody(),t){case uo.ADD_OVERLAY:this.viewComponent.appendChild(i);break;case uo.REMOVE_OVERLAY:this.viewComponent.removeChild(i)}},i(qe,pe),qe.prototype.componentName="poster",qe.prototype.poster=null,qe.prototype.clickHandler=null,qe.prototype.onRegister=function(){this.poster=this.create("poster-content"),this.poster.onclick=this.onclick.bind(this),qe.__super__.onRegister.call(this)},qe.prototype.onclick=function(e){return e.stopImmediatePropagation(),e.preventDefault(),this.sendNotification(go.TOGGLE_PLAY_PAUSE,!0),!1},qe.prototype.listNotificationInterests=function(){return[uo.CHANGE_MEDIA]},qe.prototype.handleNotification=function(e){var t,i;switch(e.getName()){case uo.CHANGE_MEDIA:i=e.getBody().poster,t=null!=i&&""!==i?'<img src="'+i+'" class="'+this.cssPrefix+'poster-image" />':"",this.poster.innerHTML=t}},i(Ze,pe),Ze.prototype.message=null,Ze.prototype.componentName="error",Ze.prototype.onRegister=function(){Ze.__super__.onRegister.call(this),this.message=this.create("error-message")},Ze.prototype.listNotificationInterests=function(){return[uo.ERROR]},Ze.prototype.handleNotification=function(e){var t,i;switch(e.getName()){case uo.ERROR:switch(t=e.getBody(),i="Error: ",t.code){case MediaError.MEDIA_ERR_ABORTED:i+="Media was aborted.";break;case MediaError.MEDIA_ERR_DECODE:i+="Decode Error.";break;case MediaError.MEDIA_ERR_NETWORK:i+="Network Error.";break;case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:i+="Source not supported.";break;default:i+=t}this.message.textContent=i}},i(Xe,Z),Xe.prototype.componentName="title-bar",Xe.prototype.title=null,Xe.prototype.description=null,Xe.prototype.onRegister=function(){this.title=this.create("title-text"),this.description=this.create("description-text"),Xe.__super__.onRegister.call(this)},Xe.prototype.listNotificationInterests=function(){return[uo.CHANGE_MEDIA]},Xe.prototype.handleNotification=function(e){var t,i;switch(e.getName()){case uo.CHANGE_MEDIA:t=e.getBody(),i=t.title,null==i||""===i||"undefined"===i?this.classList.add("hidden"):(this.title.innerHTML=i,this.description.innerHTML=t.description?t.description:"",this.classList.remove("hidden"))}},i(Je,s),Je.prototype.player=null,Je.prototype.proxy=null,Je.prototype.initialize=function(e,t){this.player=t,this.logger=this.player.logger,Je.__super__.initialize.call(this,e,t)},Je.prototype.resourcesLoaded=function(){"function"==typeof this.oninitialized&&this.oninitialized(this)},Je.prototype.onRegister=function(){var e;this.createFramework(),null!=(e=this.retrieveProxy(be.NAME))&&"function"==typeof e.initialize&&e.initialize(),this.sendNotification(po.PLUGIN_REGISTERED,this)},Je.prototype.logEvent=function(e){var t;/(timeupdate|timeremaining)/.test(e.type)!==!0&&(t=this.player.getModuleName().toUpperCase()+" "+this.getModuleName().toUpperCase(),null!=e.dispatcher&&(t+=" "+e.dispatcher),this.logger.log("["+t+" EVENT] "+e.type,e))},Je.prototype.listNotificationPublications=function(){var e,t,i;return t=[uo.ADD_LAYER,uo.REMOVE_LAYER,uo.ADD_OVERLAY,uo.REMOVE_OVERLAY,uo.ADD_APPLICATION_STATE,uo.REMOVE_APPLICATION_STATE,uo.IS_USER_ACTIVE],t.concat(function(){var t;t=[];for(e in po)i=po[e],t.push(i);return t}())},i(Ke,puremvc.Mediator),Ke.NAME="PluginAdapter",Ke.prototype.plugins=null,Ke.prototype.registered=null,Ke.prototype.onRegister=function(){return Ke.__super__.onRegister.call(this)},Ke.prototype.listNotificationInterests=function(){return[po.REGISTER_PLUGINS,po.PLUGIN_REGISTERED]},Ke.prototype.handleNotification=function(e){var t,i,n,o,a,r,s,l,d,c,u,p;switch(s=e.getName(),t=e.getBody(),s){case po.REGISTER_PLUGINS:c=this.facade.getPlayerType(),i=t,l=this.onplugininitialized.bind(this),p=Xt.plugins;for(r in p)if(u=p[r],r in i&&(a=i[r],null!=a&&a.enabled!==!1))if(n=u[c],null!=n)try{d=new n,d.oninitialized=l,this.plugins.push(d.initialize.bind(d,a,this.facade))}catch(h){this.logger.error("[AMP] Plugin could not be created: "+r+". "+h);continue}else this.facade.logger.debug("[AMP] Plugin could not be found: "+r);this.plugins.forEach(function(e){return e()});break;case po.PLUGIN_REGISTERED:this.registered.push(t),s="function"==typeof t.getModuleName?t.getModuleName():void 0,null!=s&&(this.facade[s]=t),o="function"==typeof t.getFeatureName?t.getFeatureName():void 0,null!=o&&(this.facade[o]=t),this.facade.logger.debug("[AMP] Plugin registered: "+t.getModuleName()),this.registered.length===this.plugins.length&&this.sendNotification(po.PLUGINS_INITIALIZED,this.plugins)}},Ke.prototype.onplugininitialized=function(e){this.facade.registerModule(e)},$e.prototype.element=null,$e.prototype.prefix=mo.PREFIX,$e.prototype.contains=function(e){return this.constructor.contains(e,this.element,this.prefix)},$e.prototype.add=function(e){this.constructor.add(e,this.element,this.prefix)},$e.prototype.remove=function(e){this.constructor.remove(e,this.element,this.prefix)},$e.prototype.toggle=function(e){return this.constructor.contains(e,this.element,this.prefix)},$e.contains=function(e,t,i){var n,o;return null==i&&(i=""),n=i+e,null!=(null!=(o=t.classList)?o.contains:void 0)?t.classList.contains(n):-1!==t.className.indexOf(n)},$e.add=function(e,t,i){var n,o;null==i&&(i=""),n=i+e,null!=(null!=(o=t.classList)?o.add:void 0)?t.classList.add(n):this.contains(e,t)||(""!==t.className?t.className+=" "+n:t.className=n)},$e.remove=function(e,t,i){var n,o,a;null==i&&(i=""),n=i+e,null!=(null!=(a=t.classList)?a.remove:void 0)?t.classList.remove(n):this.contains(e,t)&&(o=new RegExp(" ?"+n),t.className=t.className.replace(o,""))},$e.toggle=function(e,t,i){var n,o;null==i&&(i=""),n=i+e,null!=(null!=(o=t.classList)?o.toggle:void 0)?t.classList.toggle(this.prefix+e):this.contains(e,t)?this.remome(e,t):this.add(e,t)},i(Qe,puremvc.Proxy),Qe.NAME="DataBindingProxy",Qe.prototype.contextMap=null,Qe.prototype.configurationMap=null,Qe.prototype.paramsProxy=null,Qe.prototype.initialize=function(){this.paramsProxy=this.facade.retrieveProxy(dt.NAME),this.registerContext(this.facade.retrieveProxy(ft.NAME)),this.registerContext(this.facade.retrieveProxy(lt.NAME)),this.registerContext(this.facade.retrieveProxy(mt.NAME)),this.registerContext(this.facade.retrieveProxy(pt.NAME)),this.update()},Qe.prototype.registerContext=function(e){null!=e&&(this.contextMap[e.getContextName()]=e)},Qe.prototype.retrieveContext=function(e){return this.contextMap[e]},Qe.prototype.removeContext=function(e){var t;return t=this.contextMap[e],delete this.contextMap[e],t},Qe.prototype.registerConfiguration=function(e){null!=e&&(this.configurationMap[e.getConfigurationName()]=e,e.compile(this.context,!0))},Qe.prototype.retrieveConfiguration=function(e){return this.configurationMap[e]},Qe.prototype.removeConfiguration=function(e){var t;return t=this.configurationMap[e],delete this.configurationMap[e],t},Qe.prototype.evaluateBinding=function(e){var t;return t=new rt(e),t.compile(this.data),t.value},Qe.prototype.update=function(e){var t,i,n,o,a,r;this.data.now=Date.now(),a=this.contextMap;for(n in a)t=a[n],-1!==(null!=e&&"function"==typeof e.indexOf?e.indexOf(n):void 0)&&(this.data[n]=t.getContextData());this.paramsProxy.compile(this.data),r=this.paramsProxy.value;for(i in r)o=r[i],this.data[i]=o;return this.data},Qe.prototype.compile=function(e,t){var i,n,o,a,r;null==t&&(t=!1),this.update(e),n=Pt.clone(this.data),a=this.paramsProxy.getConfigurationName(),r=this.configurationMap;for(o in r)i=r[o],o!==a&&i.compile(n,t)},et.create=function(e,t,i,n){var o,a,r,s,l;if(null==i&&(i="div"),"string"==typeof i&&(i=document.createElement(i)),o=new $e(i),null!=e)for("string"==typeof e&&(e=[e]),s=0,l=e.length;l>s;s++)a=e[s],o.add(a);return i._classList=o,null!=n&&(null!=i.innerText?i.innerText=n:i.textContent=n),null!=t&&(null!=t.getViewComponent&&(r=t.getViewComponent()),null!=r&&(t=r),t.appendChild(i)),i},et.bindEvents=function(e,t,i){var o,a;null==i&&(i=["onRemove","onRegister"]);for(o in t)a=t[o],n.call(i,o)>=0||!/^on/.test(o)||null==(null!=a?a.bind:void 0)||(e[o]=a.bind(t))},et.createUID=function(e){var t,i,n,o;return null==e&&(e=16),t=Date.now(),i=2,n=e*i-1,o=Math.round(Math.random()*n+e),(o.toString(16)+t.toString(16)).toUpperCase()},i(tt,Oe),tt.prototype.data=null,tt.prototype.value=null,tt.prototype.source=null,tt.prototype.parse=function(e){var t;return t=e instanceof Array?new it(e):e instanceof Object?new st(e):new rt(e)},i(it,tt),it.prototype.parse=function(e){var t,i,n,o;for(this.data=[],t=n=0,o=e.length;o>n;t=++n)i=e[t],this.data[t]=it.__super__.parse.call(this,i);return this.data},it.prototype.compile=function(e,t){var i,n,o,a,r;for(null==e&&(e={}),null==t&&(t=!1),this.value=[],r=this.data,i=o=0,a=r.length;a>o;i=++o){n=r[i];try{this.value[i]=n.compile(e,t)}catch(s){this.value[i]=null,t||bt.error(s)}}return this.value},i(nt,Error),nt.MESSAGE="Tokenization Error: Could not find token value for: ",i(ot,tt),ot.prototype.parse=function(e){return this.source=this.data=this.value=e,e},ot.prototype.compile=function(e,t){return null==e&&(e=null),null==t&&(t=!1),this.value},i(at,tt),at.prototype.exec=null,at.prototype.parse=function(e){return this.source=this.data=e,this.exec=new Function("context","var value; with(context){value = "+this.data+";}return value;"),this.data},at.prototype.compile=function(e,t){if(null==e&&(e={}),null==t&&(t=!1),null==this.exec)return this.value;try{this.value=this.exec(e)}catch(i){if(this.value=null,!t)throw new nt(this.data)}return this.value},i(rt,tt),rt.prototype.exec=null,rt.prototype.tokenStart=/#{/,rt.prototype.tokenEnd=/}/,rt.prototype.token=null,rt.prototype.parse=function(e){var t,i,n,o,a,r,s,l,d;if(this.source=e,this.data=[],this.token.test(this.source)){for(s=[],n="<<>>",o=null,a=this.source.replace(this.token,function(e,t,i,a){return s.push(t),o=n,i>0&&i<a.length-e.length&&(o+=n),o}),i=a.split(n),r=0,l=0,d=i.length;d>l;l++)t=i[l],""===t&&s[r]?(this.data.push(new at(s[r])),r++):""!==t&&this.data.push(new ot(t));1===this.data.length&&(this.data=this.data[0])}else this.data=new ot(e);return this.data},rt.prototype.compile=function(e,t){var i,n,o,a;if(null==e&&(e={}),null==t&&(t=!1),null==this.data)return this.value;try{if(this.data instanceof Oe)this.value=this.data.compile(e,t);else for(this.value="",a=this.data,n=0,o=a.length;o>n;n++)i=a[n],this.value+=i.compile(e,t)}catch(r){if(this.value=null,!t)throw new nt(this.source)}return this.value},i(st,tt),st.prototype.parse=function(e){var t,i;this.source=e,this.data={};for(t in e)i=e[t],this.data[t]=st.__super__.parse.call(this,i);return this.data},st.prototype.compile=function(e,t){var i,n,o;null==e&&(e={}),null==t&&(t=!1),this.value={},o=this.data;for(i in o){n=o[i];try{this.value[i]=n.compile(e,t)}catch(a){this.value[i]=null,bt.error(a)}}return this.value},i(lt,ke),lt.NAME="LocalizationProxy",lt.prototype.contextName="l10n",lt.prototype.locale=null,lt.prototype.localeId=null,lt.prototype.onRegister=function(){this.setLocale(this.data.language)},lt.prototype.getContextData=function(){return this.locale},lt.prototype.getLanguage=function(){return this.data.language},lt.prototype.setLanguage=function(e){return this.data.language=e,this.setLocale(e),this.sendNotification(uo.LANGUAGE_CHANGE,e),e},lt.prototype.setLocale=function(e){return this.localeId=e,this.locale=this.data.locales[this.localeId],null==this.locale&&(this.localeId=e.substring(0,2),this.locale=this.data.locales[this.localeId]),this.facade.l10n=this.locale,e},lt.prototype.getLocaleId=function(){return this.localeId},lt.prototype.getLocales=function(){return this.data.locales},lt.prototype.setLocales=function(e){return this.data.locales=e,e},lt.prototype.getString=function(e){var t;return t=this.locale||this.data.locales.en,t[e]||""},lt.prototype.getLanguageString=function(e){var t,i;return"string"!=typeof e||null==e||""===e?"":(t="MSG_"+e.toUpperCase(),i=this.getString(t),""===i&&(e=e.split("-").shift(),t="MSG_"+e.toUpperCase(),i=this.getString(t)),i)},i(dt,le),dt.NAME="ParamsProxy",dt.prototype.defaults={},dt.prototype.configurationName="params",dt.prototype.setData=function(e){var t,i,n;this.data=(null!=(n=this.configurationData)?n.source:void 0)||{};for(t in e)i=e[t],this.data[t]=e[t];return this.configurationData=new st(this.data),this.data},i(ct,f),ct.prototype.execute=function(e){this.sendNotification(uo.PLAY_REQUEST),this.playback.play(),ct.__super__.execute.call(this,e)};var yo={NORMAL:"normal",FULL_SCREEN:"full-screen"},_o={FLASH:"flash",HTML:"html"},vo={ACTIVE:"active",INACTIVE:"inactive"};i(ut,puremvc.Proxy),ut.NAME="ApplicationStateProxy",ut.prototype.displayState=null,ut.prototype.playState=null,ut.prototype.renderMode=null,ut.prototype.activeState=null,ut.prototype.seeking=!1,ut.prototype.isUserActive=!1,ut.prototype.device=null,ut.prototype.getDisplayState=function(){return this.displayState},ut.prototype.setDisplayState=function(e){var t;e!==t&&(t=this.displayState,this.displayState=e,this.sendNotification(uo.DISPLAY_STATE_CHANGE,{oldState:t,newState:this.displayState}))},ut.prototype.getPlayState=function(){return this.playState},ut.prototype.setPlayState=function(e){var t;if(e!==this.playState){if(this.seeking===!0)switch(e){case ho.PLAYING:case ho.READY:this.seeking=!1;break;default:return}t=this.playState,this.playState=e,this.sendNotification(uo.PLAY_STATE_CHANGE,{oldState:t,newState:this.playState})}},ut.prototype.getDevice=function(){return this.device},ut.prototype.getSeeking=function(){return this.seeking},ut.prototype.setSeeking=function(e){e!==this.seeking&&(this.seeking=e)},ut.prototype.getIsUserActive=function(){return this.isUserActive},ut.prototype.setIsUserActive=function(e){e!==this.isUserActive&&(this.isUserActive=e)},ut.prototype.getRenderMode=function(){return this.renderMode},ut.prototype.setRenderMode=function(e){e!==this.renderMode&&(this.renderMode=e)},ut.prototype.getMedium=function(){return this.medium},ut.prototype.setMedium=function(e){var t;e!==this.medium&&(t=null!=this.medium?"medium-"+this.medium:this.medium,this.medium=e,this.sendNotification(uo.MEDIUM_CHANGE,{oldState:t,newState:"medium-"+this.medium}))},ut.prototype.getActiveState=function(){return this.activeState},ut.prototype.setActiveState=function(e){var t;e!==this.activeState&&(t=this.activeState,this.activeState=e,this.sendNotification(uo.ACTIVE_STATE_CHANGE,{oldState:t,newState:this.activeState}))},i(pt,r),pt.NAME=r.NAME,pt.prototype.getContextName=function(){return"paths"},pt.prototype.getContextData=function(){return this.getPaths()},pt.prototype.setData=function(e){return null!=e.rules&&Pt.mergeRules(e.rules),pt.__super__.setData.call(this,e),e},pt.prototype.getAutoplay=function(){return this.data.autoplay},pt.prototype.setAutoplay=function(e){return this.data.autoplay=e,e},pt.prototype.getLoop=function(){return this.data.loop},pt.prototype.setLoop=function(e){return this.data.loop=e,e},pt.prototype.getEndSlate=function(){return this.data.endslate},pt.prototype.setEndSlate=function(e){return this.data.endslate=e,e},pt.prototype.getDomain=function(){return this.data.domain},pt.prototype.setDomain=function(e){return this.data.domain=e,e},pt.prototype.getTarget=function(){return this.data.target},pt.prototype.setTarget=function(e){return this.data.target=e,e},pt.prototype.getName=function(){return this.data.name},pt.prototype.setName=function(e){return this.data.name=e,e},pt.prototype.getPaths=function(){return this.data.paths},pt.prototype.setPaths=function(e){return this.data.paths=e,e},pt.prototype.getVersion=function(){return this.data.version},pt.prototype.getControls=function(){return this.data.controls},pt.prototype.setControls=function(e){return this.data.controls=e,e},pt.prototype.getFullscreen=function(){return this.data.fullscreen||{}},pt.prototype.setFullscreen=function(e){return this.data.fullscreen=e,e},ht.PRESS=0,ht.RELEASE=1,ht.MOVE=2,ht.CLICK=3,ht.CONTEXTMENU=4,ht.EVENTS=[ht.PRESS,ht.RELEASE,ht.MOVE,ht.CLICK,ht.CONTEXTMENU],ht.MOUSE_EVENTS=["mousedown","mouseup","mousemove","click","contextmenu"],ht.TOUCH_EVENTS=["touchstart","touchend","touchmove","click","touchcancel"],ht.instances=[],ht.create=function(e,t,i){return new ht(e,t,i)},ht.bind=function(e,t){var i,n,o,a,r;for(r=ht.instances,i=o=0,a=r.length;a>o;i=++o)n=r[i],n.target===e&&(null==t||n.type===t)&&n.bind()},ht.unbind=function(e,t){var i,n,o,a,r;for(r=ht.instances,i=o=0,a=r.length;a>o;i=++o)n=r[i],n.target===e&&(null==t||n.type===t)&&n.unbind()},ht.clear=function(e,t){var i,n,o,a,r;for(r=ht.instances,i=o=0,a=r.length;a>o;i=++o)n=r[i],(null!=n?n.target:void 0)===e&&(null==t||n.type===t)&&(n.clear(),ht.instances.splice(i,1))},ht.prototype.types=null,ht.prototype.bind=function(){var e,t,i,n;for(n=this.types,t=0,i=n.length;i>t;t++)e=n[t],null!=this.target.addEventListener?this.target.addEventListener(e,this.trigger,!1):null!=this.target.attachEvent&&this.target.attachEvent("on"+e,this.trigger)},ht.prototype.unbind=function(){var e,t,i,n;for(n=this.types,t=0,i=n.length;i>t;t++)e=n[t],null!=this.target.removeEventListener?this.target.removeEventListener(e,this.trigger):null!=this.target.attachEvent&&this.target.removeEvent("on"+e,this.trigger)},ht.prototype.clear=function(){this.unbind(),this.target=null,this.handler=null,this.type=null,this.types=null},ht.prototype.trigger=function(e){this.handler(e)},i(gt,Se),gt.prototype.onRegister=function(){var e;e=new ue("html5","audio"),this.sendNotification(uo.PLAYBACK_CORE_CHANGE,e)},gt.prototype.onRemove=function(){this.facade.createMediaElement()},gt.prototype.canPlayType=function(e){return/audio/.test(e)?"maybe":""},i(mt,ke),mt.NAME="PlayerProxy",mt.prototype.contextName="player",mt.prototype.playbackCoreMap=null,mt.prototype.defaultPlaybackCore=null,mt.prototype.activePlaybackCore=null,mt.prototype.getActivePlaybackCore=function(){return this.activePlaybackCore},mt.prototype.registerPlaybackCore=function(e){null!=e&&(this.playbackCoreMap[e.getPlaybackCoreName()]=e)},mt.prototype.retrievePlaybackCore=function(e){return this.playbackCoreMap[e]},mt.prototype.removePlaybackCore=function(e){var t;return t=this.playbackCoreMap[e],delete this.playbackCoreMap[e],t},mt.prototype.setPlaybackType=function(e){var t,i,n,o,a;n=this.defaultPlaybackCore,a=this.playbackCoreMap;for(i in a)if(t=a[i],""!==t.canPlayType(e)){n=t;break}return o=this.facade.retrieveProxy(Ie.NAME),o!==n&&(this.facade.removeProxy(Ie.NAME),this.facade.registerProxy(n),n.setData(o.getData())),this.activePlaybackCore=n,e},mt.prototype.canPlayType=function(e){var t,i,n,o;o=this.playbackCoreMap;for(n in o)if(i=o[n],t=i.canPlayType(e),""!==t)return t;return t=this.defaultPlaybackCore.canPlayType(e)},mt.prototype.getContextData=function(){var e,t,i,n;return e=this.facade.retrieveProxy(pt.NAME),n=this.facade.retrieveProxy(Ie.NAME),i=this.facade.retrieveProxy(ft.NAME),t=this.facade.getViewComponent(),{width:t.offsetWidth,height:t.offsetHeight,mode:"html5",autoplay:e.getAutoplay(),domain:e.getDomain(),name:e.getName(),currentTime:n.getCurrentTime(),duration:n.getDuration(),version:e.getVersion(),timecode:{duration:Pt.formatTimecode(i.getDuration()),currentTime:Pt.formatTimecode(n.getCurrentTime())}}},i(ft,ke),ft.NAME="MediaProxy",ft.prototype.contextName="media",ft.prototype.data=null,ft.prototype.started=!1,ft.prototype.authorized=!0,ft.prototype.getContextData=function(){return{width:this.getWidth(),height:this.getHeight(),title:this.getTitle(),description:this.getDescription(),src:this.getSrc(),duration:this.getDuration(),guid:this.getGUID(),isLive:this.getIsLive(),metadata:this.getMetadata(),temporalType:this.getTemporalType(),poster:this.getPoster(),category:this.getCategory()}},ft.prototype.setData=function(e){var t;return this.started=!1,this.data.autoplay=e.autoplay,this.data.type=e.type,null!=e.source&&this.setSource(e.source),null!=e.src&&this.setSrc(e.src),this.data.title=e.title,null!=e.duration&&this.setDuration(e.duration),this.data.poster=e.poster,this.data.guid=e.guid,this.data.link=e.link,this.data.embed=e.embed,this.data.width=e.width,this.data.height=e.height,this.data.category=e.category,this.data.startTime=e.startTime,this.data.description=e.description,this.data.status=e.status||{},"blocked"===(null!=(t=this.data.status)?t.state:void 0)&&(this.authorized=!1),this.data.category=e.category,this.data.metadata=e.metadata||{},null!=e.isLive&&this.setIsLive(e.isLive),null!=e.temporalType?this.setTemporalType(e.temporalType):this.setTemporalType("vod"),null!=e.medium&&this.setMedium(e.medium),null!=e.pubDate&&this.setPubDate(e.pubDate),null!=e.track&&this.setTrack(e.track),this.setScenes(e.scenes),this.setKeys(e.keys),e},ft.prototype.updateData=function(e){var t,i;for(t in e)i=e[t],t in this.data&&(this.data[t]=i)},ft.prototype.getGUID=function(){return this.data.guid},ft.prototype.setGUID=function(e){return this.data.guid=e},ft.prototype.getLink=function(){return this.data.link},ft.prototype.setLint=function(e){return this.data.link=e},ft.prototype.getStartTime=function(){return this.data.startTime||0},ft.prototype.getEmbed=function(){return this.data.embed},ft.prototype.setEmbed=function(e){return this.data.embed=e},ft.prototype.getAutoplay=function(){return this.data.autoplay},ft.prototype.setAutoplay=function(e){return this.data.autoplay=e},ft.prototype.getPubDate=function(){return this.data.pubDate},ft.prototype.setPubDate=function(e){return this.data.pubDate=e},ft.prototype.getCategory=function(){return this.data.category},ft.prototype.setCategory=function(e){return this.data.category=e},ft.prototype.getSrc=function(){return this.data.src},ft.prototype.setSrc=function(e){return this.data.src=e,null!=this.data.src&&null==this.data.type?this.setType(Pt.getMimeType(this.data.src)):void 0},ft.prototype.getType=function(){return this.data.type},ft.prototype.setType=function(e){var t;return this.data.type=e,t=/audio/.test(this.data.type)?"audio":"video",this.setMedium(t)},ft.prototype.getMedium=function(){return this.data.medium},ft.prototype.setMedium=function(e){return e!==this.data.medium?(this.data.medium=e,this.facade.retrieveProxy(ut.NAME).setMedium(e)):void 0},ft.prototype.getMetadata=function(){return this.data.metadata},ft.prototype.setMetadata=function(e){return this.data.metadata=e},ft.prototype.getSource=function(){return this.data.source},ft.prototype.setSource=function(e){var t,i;if(!(null==e||e.length<1)){if(this.data.source=e,i=this.facade.retrieveProxy(mt.NAME)||this.facade,null!=i&&(t=Pt.selectSource(e,function(e){return i.canPlayType(e)})),null!=(null!=t?t.src:void 0)&&""!==t.src)return this.setSrc(t.src),this.setType(t.type);throw new Error("No valid source could be found")}},ft.prototype.getTrack=function(){return this.data.track},ft.prototype.setTrack=function(e){return this.data.track=e},ft.prototype.getTitle=function(){return this.data.title},ft.prototype.setTitle=function(e){return this.data.title=e},ft.prototype.getWidth=function(){return this.data.width},ft.prototype.setWidth=function(e){return this.data.width=e},ft.prototype.getHeight=function(){return this.data.height},ft.prototype.setHeight=function(e){return this.data.height=e},ft.prototype.getDescription=function(){return this.data.description},ft.prototype.setDescription=function(e){return this.data.description=e},ft.prototype.getCategory=function(){return this.data.category},ft.prototype.setCategory=function(e){return this.data.category=e},ft.prototype.getDuration=function(e){return this.data.duration},ft.prototype.setDuration=function(e){var t;if(0!==e&&(t=navigator.userAgent,1!==e||!/Android/.test(t)||/Android.*Chrome/.test(t)))return e!==this.data.duration&&(this.data.duration=e,this.sendNotification(uo.DURATION_CHANGE,e)),e===1/0&&this.setTemporalType("live"),e},ft.prototype.getPoster=function(e){return this.data.poster},ft.prototype.setPoster=function(e){return this.data.poster=e},ft.prototype.getIsLive=function(){return this.data.isLive},ft.prototype.setIsLive=function(e){return e!==this.data.isLive?this.data.isLive=e:void 0},ft.prototype.getTemporalType=function(){return this.data.temporalType||"vod"},ft.prototype.setTemporalType=function(e){return e!==this.data.temporalType?(this.data.temporalType=e,this.sendNotification(uo.TEMPORAL_TYPE_CHANGE,e)):void 0},ft.prototype.getScenes=function(){return this.data.scenes},ft.prototype.setScenes=function(e){var t,i,n,o,a;if(null!=e){for(t=o=0,a=e.length;a>o;t=++o)i=e[t],i.start=isNaN(n=Pt.flattenTimecode(i.sceneStartTime))?0:n,i.end=isNaN(n=Pt.flattenTimecode(i.sceneEndTime))?0:n,i.title=i.sceneTitle||"",i.description=i.sceneDescription||"",i.position=t+1;this.data.scenes=e}},ft.prototype.getScene=function(e){var t,i,n,o,a;for(a=this.data.scenes,t=n=0,o=a.length;o>n;t=++n)if(i=a[t],i.start<=e&&e<i.end)return i},ft.prototype.setKeys=function(e){this.data.keys=e},ft.prototype.getKeys=function(){return this.data.keys},i(yt,ft),yt.NAME="MediaProxy",yt.prototype.setSource=function(e){return null==e||e.length<1?void 0:(e=e.filter(function(e){return"external"===e.type}),yt.__super__.setSource.call(this,e))},i(_t,ae),_t.prototype.playerType="external",_t.prototype.createModel=function(){var e,t;this.registerProxy(new lt(this.config)),this.registerProxy(new ut),t=new Re,this.registerProxy(new mt(t)),e=new Qe,this.registerProxy(e),this.registerProxy(new pt(this.config)),this.registerProxy(t),this.registerProxy(new yt),this.registerProxy(new dt(this.config.params)),e.initialize()},_t.prototype.createView=function(){var e,t,i=this;this.registerMediator(new ge("external",this.getViewComponent())),this.registerMediator(new Ke),t=new Ye,this.registerMediator(t),ht.create(t.viewComponent,ht.CLICK,function(){return i.sendNotification(uo.TOGGLE_ACTIVE)}),this.registerMediator(new qe),this.registerMediator(new Xe),e=new Ze,this.viewComponent.appendChild(e.getViewComponent()),this.registerMediator(e)},_t.prototype.createController=function(){_t.__super__.createController.call(this),this.registerCommand(uo.UPDATE_DATA_BINDINGS,Fe),this.registerCommand(go.TOGGLE_PLAY_PAUSE,ct),this.registerCommand(uo.PLAY,ct),this.registerCommand(uo.CHANGE_PLAY_STATE,Ve),this.registerCommand(uo.SET_MEDIA,Ge),this.registerCommand(uo.CHANGE_MEDIA,We),this.registerCommand(uo.MEDIA_CHANGE,ze),this.registerCommand(uo.MEDIA_VALIDATED,C),this.registerCommand(uo.ERROR,Be),this.registerCommand(po.PLUGINS_INITIALIZED,d),this.registerCommand(uo.READY,He),this.registerCommand(uo.CHANGE_PARAMS,je)},_t.prototype.evaluateBinding=function(e){var t;return null!=(t=this.retrieveProxy(Qe.NAME))?t.evaluateBinding(e):void 0},_t.prototype.canPlayType=function(e){return"maybe"},_t.prototype.play=function(){this.sendNotification(uo.PLAY)},_t.prototype.setParams=function(e){return this.sendNotification(uo.CHANGE_PARAMS,e),e},_t.prototype.getParams=function(){return this.retrieveProxy(dt.NAME).getData()},_t.prototype.setAutoplay=function(e){
return!1},_t.prototype.getAutoplay=function(){return!1},_t.prototype.setLoop=function(e){return!1},_t.prototype.getLoop=function(){return!1},_t.prototype.setMuted=function(e){return!1},_t.prototype.getMuted=function(){return!1},_t.prototype.setMedia=function(e){return this.sendNotification(uo.SET_MEDIA,e),e},_t.prototype.getMedia=function(e){var t;return null!=(t=this.retrieveProxy(ft.NAME))?t.getData():void 0},_t.prototype.setCurrentTime=function(e){return 0},_t.prototype.getCurrentTime=function(e){return 0},_t.prototype.getDuration=function(e){return this.retrieveProxy(ft.NAME).getDuration()},_t.prototype.setSrc=function(e){return this.sendNotification(uo.SET_MEDIA,{src:e}),e},_t.prototype.getSrc=function(e){return this.retrieveProxy(ft.NAME).getSrc()},_t.prototype.setSource=function(e){return this.sendNotification(uo.SET_MEDIA,{source:e}),e},_t.prototype.getSource=function(){return this.retrieveProxy(ft.NAME).getSource()},_t.prototype.setVolume=function(e){return e},_t.prototype.getVolume=function(e){return 1},_t.prototype.getSeeking=function(){return!1},_t.prototype.getPaused=function(){return!1},_t.prototype.getEnded=function(){return!1},vt.prototype.title=null,vt.prototype.link=null,vt.prototype.description=null,vt.prototype.category=null,vt.prototype.pubDate=null,vt.prototype.language=null,vt.prototype.ttl=null,vt.prototype.item=null,vt.prototype.metadata=null,Et.prototype.src=null,Et.prototype.source=null,Et.prototype.title=null,Et.prototype.description=null,Et.prototype.link=null,Et.prototype.guid=null,Et.prototype.pubDate=null,Et.prototype.poster=null,Et.prototype.thumbnail=null,Et.prototype.embed=null,Et.prototype.category=null,Et.prototype.type=null,Et.prototype.medium=null,Et.prototype.duration=null,Et.prototype.track=null,Et.prototype.metadata=null,Et.prototype.scenes=null,Et.prototype.startTime=null;var Eo={AUTO:"auto",HTML:"html",FLASH:"flash",EXTERNAL:"external",NONE:"none"};At.prototype.type=null,At.prototype.target=null,At.prototype.detail=null,Ct.prototype.getFeed=function(e,t,i){return Pt.getJson(e,t,i)},Ct.prototype.getMediaNode=function(e,t,i){var n,o,a,r;return null==i&&(i=!0),a="media-"+t,n=e["media-group"]||e,o=n["media-content"],null!=o&&null!=o[a]?r=o[a]:null!=n[a]?r=n[a]:null!=e[a]?r=e[a]:null!=e[t]&&i&&(r=e[t]),r},Ct.prototype.createEmbed=function(e){var t,i,n,o,a,r;try{if(t=this.getMediaNode(e,"embed"),null==t)return i;for(i={},i.url=t["@attributes"].url,i.width=t["@attributes"].width,i.height=t["@attributes"].height,i.params={},t["media-param"]instanceof Array||(t["media-param"]=[t["media-param"]]),r=t["media-param"],o=0,a=r.length;a>o;o++)n=r[o],i.params[n["@attributes"].name]=n["#text"]}catch(s){bt.error("[AMP Feed Parse Error] embed parse error: "+s.message,s)}return i},Ct.prototype.createFeed=function(e){var t,i,n,o,a,r,s,l,d;try{if(t=e.channel,i=new vt,null!=t){for(i.title=t.title,i.description=t.description,i.language=t.language,i.category=t.category,i.pubDate=new Date(Date.parse(t.pubDate)),i.ttl=t.ttl,o=t.item instanceof Array?t.item:[t.item],l=0,d=o.length;d>l;l++)n=o[l],r=this.createMedia(n),i.item.push(r);for(a in t)s=t[a],a in i||(i.metadata[a]=s)}}catch(c){bt.error("[AMP Feed Parse Error] feed parse error: "+c.message,c)}return i},Ct.prototype.createMedia=function(e){var t,i,n,o,a,r,s,l,d,c,u,p,h,g,m,f,y,_,v,E;try{if(s=new Et,r=this.getMediaNode(e,"content"),r instanceof Array)for(s.source=[],p=0,m=r.length;m>p;p++)n=r[p],d={src:n["@attributes"].url,type:n["@attributes"].type},i=n["media-category"],null!=i&&(t=i["@attributes"],"http://mrss.akamai.com/user_agent_hint"===t.schema&&(a=t.label||i["#text"],null!=a&&""!==a&&(null==d.rules&&(d.rules=[]),d.rules.push(a)))),s.source.push(d),s.medium=n["@attributes"].medium,s.duration=parseFloat(n["@attributes"].duration);else s.type=r["@attributes"].type,s.src=r["@attributes"].url,s.medium=r["@attributes"].medium,s.duration=parseFloat(r["@attributes"].duration);if(s.guid=e.guid,s.title=this.getMediaNode(e,"title"),s.link=e.link,s.description=this.getMediaNode(e,"description"),s.pubDate=new Date(Date.parse(e.pubDate)),s.thumbnail=s.poster=null!=(_=this.getMediaNode(e,"thumbnail"))&&null!=(v=_["@attributes"])?v.url:void 0,s.embed=this.createEmbed(e),s.scenes=null!=(E=this.getMediaNode(e,"scenes"))?E["media-scene"]:void 0,l=this.getMediaNode(e,"status",!1),null!=l&&(s.status={state:l["@attributes"].state,reason:l["@attributes"].reason}),s.category=e.category,s.category instanceof Array||(s.category=[s.category]),l=this.getMediaNode(e,"category",!1),null!=l)for(h=0,f=l.length;f>h;h++)i=l[h],null!=i["#text"]&&""!==i["#text"]&&s.category.push(i["#text"]);if(null!=s.category&&s.category.sort(function(e,t){return e=e.toLowerCase(),t=t.toLowerCase(),e>t?1:t>e?-1:0}),l=this.getMediaNode(e,"subTitle"),null!=l)for(null==s.track&&(s.track=[]),l instanceof Array||(l=[l]),g=0,y=l.length;y>g;g++)c=l[g],null!=c["@attributes"]&&s.track.push({src:c["@attributes"].href,type:c["@attributes"].type,kind:"captioning",srclang:c["@attributes"].lang||"en"});i=e.category,i instanceof Array||(i=[i]),s.isLive="live"===e.temporalType||null!=i&&-1!==i.join(",").indexOf("live_stream"),s.temporalType=s.isLive?"live":"ondemand";for(o in e)u=e[o],o in s||(s.metadata[o]=u)}catch(A){bt.error("[AMP Feed Parse Error] media parse error: "+A.message,A)}return s},bt.enabled=!1,bt.enable=function(e){return null==e&&(e=/debug\=true/.test(location.search.toLowerCase())),this.enabled=e,this.enabled||(this.log=this.trace=this.debug=this.info=this.warn=this.error=this.fatal=function(){}),e},bt.log=function(){try{arguments.length>1&&null!=arguments[1]?console.log.apply(console,arguments):console.log(arguments[0])}catch(e){}},bt.trace=function(){try{console.trace.apply(console,arguments)}catch(e){}},bt.debug=function(){try{console.log.apply(console,arguments)}catch(e){this.log.apply(this,arguments)}},bt.info=function(){try{console.info.apply(console,arguments)}catch(e){}},bt.warn=function(){try{console.warn.apply(console,arguments)}catch(e){}},bt.error=function(){try{console.error.apply(console,arguments)}catch(e){this.log.apply(this,arguments)}},bt.fatal=function(){try{console.fatal.apply(console,arguments)}catch(e){}},Nt.prototype.addEventListener=function(e,t,i){null!=t&&null!=e&&(null==this.listenerMap[e]&&(this.listenerMap[e]=[]),-1===this.listenerMap[e].indexOf(t)&&this.listenerMap[e].push(t))},Nt.prototype.dispatchEvent=function(e){var t,i,n,o;if(i=this.listenerMap[e.type],t=this.target["on"+e.type],e.target=this.target,null!=t&&t.apply(this.target,[e]),null!=i)for(n=0,o=i.length;o>n;n++)t=i[n],t.apply(this.target,[e])},Nt.prototype.callListener=function(e,t){try{t.apply(this.target,[e])}catch(i){if(this.catchErrors!==!0)throw i;this.processEventError(i,e,t)}},Nt.prototype.processEventError=function(e,t,i){var n,o,a;o=e.fileName||e.sourceURL,a=e.lineNumber||e.line,n={message:e.message,name:"AMP Event Listener Error",file:o,fileName:o,line:a,lineNumber:a,error:e,event:t,listener:i,functionName:i.name,toString:function(){var e;return e=""+this.name+":",e+="\n	"+this.error.toString(),null!=this.event&&(e+="\n		event: "+this.event.type),null!=this.listener&&(e+="\n		function: "+this.listener.name),null!=this.file&&(e+="\n		file: "+this.file),null!=this.line&&(e+="\n		line: "+this.line),e}},setTimeout(function(e){throw e},0,n)},Nt.prototype.removeEventListener=function(e,t,i){var n,o;if(null!=t&&null!=e&&(o=this.listenerMap[e],null!=o&&(n=null!=o?o.indexOf(t):void 0,-1!==n)))return o.splice(n,1)},i(It,Nt),It.prototype.xhr=null,It.prototype.headers=null,It.prototype.response=null,It.prototype.responseXML=null,It.prototype.responseText=null,It.prototype.responseType=null,It.prototype.withCredentials=!1,It.prototype.readyState=0,It.prototype.status=null,It.prototype.open=function(e,t){var i,n,o=this;try{n=new XMLHttpRequest}catch(a){n=new window.ActiveXObject("Microsoft.XMLHTTP")}if(It.isCORS(t))if(Object.prototype.hasOwnProperty.call(n,"withCredentials"))try{n.withCredentials=this.withCredentials}catch(a){bt.warn("[AMP XHR WARNING]","withCredentials not properly supported in this browser.",a)}else"undefined"!=typeof XDomainRequest&&(i=!0,n=new XDomainRequest);if(null!=n){i&&(n.onprogress=function(){},n.ontimeout=function(){},n.onerror=function(){},n.onload=function(e){"function"==typeof n.onreadystatechange&&(n.readyState=4,n.status=200,n.contentType.match(/\/xml/)&&(n.responseXML=new ActiveXObject("Microsoft.XMLDOM"),n.responseXML.async=!1,n.responseXML.loadXML(n.responseText)),n.onreadystatechange.call(n,e,!1))}),n.onreadystatechange=function(e){var t,i;if(o.readyState=n.readyState,o.dispatchEvent(new At("readystatechange",n)),4===n.readyState)if(o.status=n.status,199<(t=o.status)&&400>t||0===o.status){if(null==n.responseText&&(n.responseText=n.text),o.responseText=n.responseText,null!=n.responseXML&&(null!=(i=n.responseXML.childNodes)?i.length:void 0)>0)o.response=o.responseXML=n.responseXML,o.responseType="document";else try{o.response=JSON.parse(n.responseText),o.responseType="json"}catch(a){o.response=n.responseText,o.responseType="text"}o.dispatchEvent(new At("load",o))}else 0!==o.status&&o.dispatchEvent(new At("error",o))};try{"undefined"!=typeof n.onerror&&(n.onerror=function(e){o.dispatchEvent(new At("error",o))})}catch(a){}n.open(e,t)}this.xhr=n},It.prototype.send=function(e){var t,i,n,o=this;if(null!=this.headers){n=this.headers;for(t in n)i=n[t],null!=t&&null!=i&&this.xhr.setRequestHeader(t,i)}setTimeout(function(){o.xhr.send(e)},0)},It.prototype.setRequestHeader=function(e,t){null!=e&&null!=t&&(null==this.headers&&(this.headers={}),this.headers[e]=t)},It.prototype.setRequestHeaders=function(e){return this.headers=e,e},It.prototype.getResponseHeader=function(e){var t;return null!=(t=this.xhr)&&"function"==typeof t.getResponseHeader?t.getResponseHeader(e):void 0},It.prototype.getAllResponseHeaders=function(){var e;return null!=(e=this.xhr)&&"function"==typeof e.getAllResponseHeaders?e.getAllResponseHeaders():void 0},It.isCORS=function(e){var t,i,n,o;return i=document.createElement("a"),i.href=e,t=""!==i.hostname?i.hostname:location.hostname,n="0"!==i.port?i.port:location.port,o=":"!==i.protocol?i.protocol:location.protocol,location.protocol!==o||location.hostname!==t||location.port!==n&&!(""===location.port&&"80"===n)},Pt.blankImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAMAAAAoyzS7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NjI2QkJDQTBCMzQ4MTFFMUFERDJBRkRGQUQwNTcxRTIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NjI2QkJDQTFCMzQ4MTFFMUFERDJBRkRGQUQwNTcxRTIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowODg4NjdFQkIzNDgxMUUxQUREMkFGREZBRDA1NzFFMiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowODg4NjdFQ0IzNDgxMUUxQUREMkFGREZBRDA1NzFFMiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pu0++ecAAAAGUExURf///wAAAFXC034AAAABdFJOUwBA5thmAAAADElEQVR42mJgAAgwAAACAAFPbVnhAAAAAElFTkSuQmCC",Pt.mimeTypes={mp4:"video/mp4",flv:"video/x-flv",f4m:"video/f4m",smil:"application/smil",smilxml:"application/smil+xml",m3u8:"application/x-mpegURL",mp3:"audio/mpeg",json:"application/json",txt:"text/plain",xml:"application/xml",ogv:"video/ogg",webm:"video/webm",mpd:"application/dash+xml",ism:"application/vnd.ms-sstr+xml",js:"text/javascript",css:"text/css",swf:"application/x-shockwave-flash"},Pt.flashTypes=[Pt.mimeTypes.mp4,Pt.mimeTypes.flv,Pt.mimeTypes.f4m,Pt.mimeTypes.smil,Pt.mimeTypes.smilxml],Pt.rules={flashTablets:{label:"Android 2 & 3 or Kindle Fire 1",regexp:"Android [23]|Silk/1"},html5Phones:{label:"iPhone",regexp:"iPhone"},html5Tablets:{label:"HTML5 Tablets",regexp:"iPad|Android [4-9]|Silk/2"},desktop:{label:"Desktop",regexp:"^((?!iPad|iPhone|Android|BlackBerry|PlayBook|Silk).)*$"}},Pt.getPlaybackMode=function(e){var t,i,n,o;null==e&&(e=(null!=(o=a["amp-mode"])?o.toLowerCase():void 0)||Eo.AUTO),i=!1,this.ieFallback();for(t in Eo)if(n=Eo[t],n===e){i=!0;break}return i||(e=Eo.AUTO),e!==Eo.AUTO?(e!==Eo.FLASH||this.hasFlash()||(e=Eo.NONE),e):(this.hasFlash()||(e=this.supportsHTML5Video()?Eo.HTML:Eo.NONE),e===Eo.AUTO&&(e=this.isHTML5()?Eo.HTML:Eo.FLASH),e)},Pt.mergeRules=function(e){var t,i,n;n=[];for(t in e)i=e[t],n.push(Pt.rules[t]=i);return n},Pt.checkRules=function(e){var t,i,n,o,a;if(null!=e&&e.length>0)for(o=0,a=e.length;a>o;o++)if(t=e[o],(n=Pt.rules[t])&&(i=new RegExp(n.regexp),i.test(navigator.userAgent)))return!0;return!1},Pt.selectSource=function(e,t){var i,n,o,a,r;for(n=0,a=e.length;a>n;n++)if(i=e[n],Pt.checkRules(i.rules))return i;for(o=0,r=e.length;r>o;o++)if(i=e[o],""!==t(i.type||Pt.getMimeType(i.src)))return i;return null},Pt.getMimeType=function(e){return this.mimeTypes[Pt.getFileExtension(e)]},Pt.selectTrack=function(e,t){var i,n,o,a;for(o=0,a=e.length;a>o;o++)if(i=e[o],i.kind===t){n=i;break}return n},Pt.isIPhone=function(){return/iPhone/.test(navigator.platform)||/iPhone/.test(navigator.userAgent)},Pt.isIPad=function(){return/iPad/.test(navigator.platform)||/iPad/.test(navigator.userAgent)},Pt.isAndroid=function(){return/Android [4-9]/.test(navigator.userAgent)},Pt.isKindleFireHD=function(){return/Silk\/2/.test(navigator.userAgent)},Pt.isKindleFire=function(){return/Silk\/1/.test(navigator.userAgent)},Pt.isBlackBerry=function(){return/BlackBerry;|PlayBook|BB10/.test(navigator.userAgent)},Pt.isFirefoxOS=function(){return/\(Mobile;.*Firefox\//.test(navigator.userAgent)},Pt.supportsHTML5Video=function(){var e;return e=document.createElement("video"),null!=e.canPlayType},Pt.isHTML5=function(){return this.isIOS()||this.isAndroid()||this.isKindleFireHD()||this.isBlackBerry()||this.isFirefoxOS()},Pt.isIOS=function(){var e,t;return e=/iPad|iPhone|iPod/i,t=e.test(navigator.platform)||e.test(navigator.userAgent)},Pt.getIOSversion=function(){var e;return/iP(hone|od|ad)/.test(navigator.platform)?(e=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3]||0,10)]):void 0},Pt.hasFlash=function(){return swfobject.hasFlashPlayerVersion("1")},Pt.isFullscreenDevice=function(){return this.isKindleFireHD()||this.isIPhone()},Pt.getDevice=function(){var e;return e=null,this.isIPhone()?e="iphone":this.isIPad()?e="ipad":/Android/.test(navigator.userAgent)?e="android":this.isKindleFireHD()?e="kindlefirehd":this.isKindleFire()?e="kindlefire":/Mac|Win32/.test(navigator.platform)&&(e="desktop"),e},Pt.xmlToJson=function(e){var t,i,n,o,a,r,s,l,d,c,u,p;if(r={},9===e.nodeType&&(e=e.firstChild),1===e.nodeType){if(e.attributes.length>0)for(r["@attributes"]={},u=e.attributes,o=s=0,d=u.length;d>s;o=++s)t=u[o],r["@attributes"][t.nodeName]=t.nodeValue}else(3===e.nodeType||4===e.nodeType)&&(r=e.nodeValue);if(e.hasChildNodes())for(p=e.childNodes,o=l=0,c=p.length;c>l;o=++l)i=p[o],(3!==i.nodeType||/\S/.test(i.nodeValue))&&(a=i.nodeName.replace(/:/,"-"),n=this.xmlToJson(i),null==n["@attributes"]&&null!=n["#text"]&&(n=n["#text"]),null==r[a]?r[a]=n:(r[a]instanceof Array||(r[a]=[r[a]]),r[a].push(n)));return r},Pt.getXHR=function(){return new It},Pt.get=function(e,t,i){var n;return null==t&&(t={}),null==i&&(i=null),n=Pt.getXHR(),null!=t&&(null!=t.withCredentials&&(n.withCredentials=t.withCredentials),null!=t.onload&&(n.onload=t.onload),null!=t.onerror&&(n.onerror=t.onerror)),n.open("GET",e),null!=i&&n.setRequestHeaders(i),n.send(),n},Pt.send=function(e,t,i,n){var o;return null==i&&(i={}),null==n&&(n={"Content-Type":"String"}),o=Pt.getXHR(),null!=i.onload&&(o.onload=i.onload),null!=i.onerror&&(o.onerror=i.onerror),o.open("POST",e),null!=n&&o.setRequestHeaders(n),o.send(t),o},Pt.loadScript=function(e,t,i){var n,o;return n=i||document.getElementsByTagName("head")[0],o=document.createElement("script"),o.type="text/javascript",null!=t&&(o.addEventListener?o.onload=function(e){t()}:o.readyState&&(o.onreadystatechange=function(e){("loaded"===this.readyState||"complete"===this.readyState)&&(this.onreadystatechange=null,t())})),o.src=e,n.appendChild(o),o},Pt.loadStyleSheet=function(e){var t,i;return t=document.getElementsByTagName("head")[0],i=document.createElement("link"),i.rel="stylesheet",i.type="text/css",i.href=e,t.appendChild(i)},Pt.read=function(e,t,i,n){var o,a;null==t&&(t={}),null==i&&(i=""),null==n&&(n=[]);try{return a=this.get(e,t,n),o=a.responseText||a.text,i===Pt.mimeTypes.json?JSON.parse(o):i===Pt.mimeTypes.xml&&null!=a.responseXML?a.responseXML:o}catch(r){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.error&&console.error("Read Error: ",r),null}},Pt.getFileExtension=function(e){return e.split(".").pop().replace(/\?.*/,"")},Pt.getResponseHeader=function(e,t,i){var n;return null==i&&(i={}),n=Pt.getXHR(),null!=i.onerror&&(n.onerror=i.onerror),n.open("HEAD",e,!1),n.send(),n.getResponseHeader(t)},Pt.getResponseHeaders=function(e,t,i){var n,o,a,r,s;if(null==i&&(i={}),a=Pt.getXHR(),null!=i.onerror&&(a.onerror=i.onerror),a.open("HEAD",e,!1),a.send(),o={},null==t)return a.getAllResponseHeaders();for(r=0,s=t.length;s>r;r++)n=t[r],o[n]=a.getResponseHeader(n);return o},Pt.isTouch=null,Pt.isTouchDevice=function(){if(null==this.isTouch)try{document.createEvent("TouchEvent"),this.isTouch=!0}catch(e){this.isTouch=!1}return this.isTouch},Pt.clamp=function(e,t,i){return t>e&&(e=t),e>i&&(e=i),e},Pt.beacon=function(e){var t;return t=document.getElementById("beaconId"),null==t&&(t=document.createElement("img"),t.setAttribute("id","beaconId"),t.setAttribute("height",0),t.setAttribute("width",0),document.body.appendChild(t),t.style.display="none"),t.setAttribute("src",e),t},Pt.getElementOffset=function(e){var t;if(t={left:0,top:0},e.offsetParent)for(t.left=e.offsetLeft,t.top=e.offsetTop;e=e.offsetParent;)t.left+=e.offsetLeft,t.top+=e.offsetTop;return t},Pt.override=function(e,t,i){var n,o;if(null==i&&(i=!0),null==e)return t;if(null==t)return e;i===!0&&(e=Pt.clone(e),t=Pt.clone(t));for(n in t)o=t[n],"object"==typeof o?(null==e[n]&&(e[n]=o instanceof Array?[]:{}),e[n]=Pt.override(e[n],o,!1)):e[n]=o;return e},Pt.clone=function(e,t){var i,n,o,a,r,s,l,d;if(null==t&&(t=!0),"object"!=typeof e)i=e;else{i=e instanceof Array?[]:{};for(a in e)if(s=e[a],"object"==typeof s&&t===!0)if(s instanceof Array)for(i[a]=[],l=0,d=s.length;d>l;l++)n=s[l],i[a].push(this.clone(n));else{i[a]={};for(o in s)r=s[o],i[a][o]=this.clone(r)}else i[a]=s}return i},Pt.formatTimecode=function(e,t){var i;return e=parseInt(e),isNaN(e)?"00:00":(i=Pt.formatZeroFill(e%60),e=parseInt(e/60),i=Pt.formatZeroFill(e%60)+":"+i,e=parseInt(e/60),e>0&&(i=Pt.formatZeroFill(e)+":"+i),t>=3600&&5===i.length&&(i="00:"+i),i)},Pt.formatZeroFill=function(e){var t;return t=e.toString(),10>e&&(t="0"+t),t},Pt.flattenTimecode=function(e,t){var i,n,o,a;if(null==t&&(t=30),null==e||""===e)return NaN;for(o=e.split(":"),i=0,4===o.length?i=parseInt(o.pop())/t:3===o.length&&(o[2]=o[2].replace(",","."),-1!==o[2].indexOf(".")&&(n=o[2].split(".")),(null!=n?n.length:void 0)>1&&(o[2]=n[0],i=parseInt(n[1])/1e3)),a=parseInt(o.pop());o.length>0;)a+=Math.pow(60,o.length)*parseInt(o.shift());return a+i},Pt.cacheBust=function(e,t,i){var n;return null==t&&(t="cacheBust"),null==i&&(i=Date.now()),n=-1===e.indexOf("?")?"?":"&",e+n+t+"="+i},Pt.formatStyleName=function(e){return e.replace(/([A-Z])/,"-$1").toLowerCase()},Pt.trim=function(e){var t;return t=e.replace(/^\s*(.*)/,"$1"),t.replace(/(.*)\s*$/,"$1")},Pt.getJson=function(e,t,i){var n;return n=Pt.getXHR(),n.open("GET",e),n.onload=function(e){var i;i="document"===n.responseType?Pt.xmlToJson(n.responseXML):n.response,"function"==typeof t&&t(i)},n.onerror=function(e){"function"==typeof i&&i(e)},n.send(),n},Pt.getSource=function(e,t,i){var n,o;o=Pt.getPlaybackMode(),n=function(e){var i,n,a,r;n=new Ct,e=n.createFeed(e),(null!=e&&null!=(r=e.item)?r.length:void 0)>0&&(i=function(e){return"flash"===o&&-1!==Pt.flashTypes.indexOf(e)||"html"===o&&-1===Pt.flashTypes.indexOf(e)?"maybe":""},a=Pt.selectSource(e.item[0].source,i)),"function"==typeof t&&t(a)},Pt.getJson(e,n,i)},Pt.trackMouse=function(){try{null!=document.addEventListener?document.addEventListener("mousemove",this.mouseTracker):null!=document.attachEvent&&document.attachEvent("mousemove",this.mouseTracker)}catch(e){}},Pt.clientX=0,Pt.clientY=0,Pt.pageX=0,Pt.pageY=0,Pt.mouseTracker=function(e){Pt.clientX=e.clientX,Pt.clientY=e.clientY,Pt.pageX=e.pageX,Pt.pageY=e.pageY},Pt.isMouseOverElement=function(e){var t;if(t=!1,null==e)return t;try{t=e.contains(document.elementFromPoint(Pt.clientX,Pt.clientY))}catch(i){t=!1}return t},Pt.trackMouse(),Pt.getActualSize=function(e,t){var i,n,o;return null==t&&(t=!0),o=e.offsetWidth,i=e.offsetHeight,t===!0&&(n=getComputedStyle(e),o+=parseInt(n.marginLeft)+parseInt(n.marginRight),i+=parseInt(n.marginTop)+parseInt(n.marginBottom)),{width:o,height:i}},Pt.ieFallback=function(){return Array.prototype.filter?void 0:Array.prototype.filter=function(e){"use strict";var t,i,n,o,a,r,s,l,d;if("undefined"==typeof this||null===this)throw new TypeError;if(a=Object(this),n=a.length>>>0,"function"!=typeof e)throw new TypeError;for(o=[],r=arguments[1],t=l=0,d=n.length;d>l;t=++l)i=n[t],t in b&&(s=a[t],e.call(r,s,t,a)&&o.push(s));return o}},i(St,Nt),St.UNINITIALIZED=0,St.LOADING=1,St.LOADED=2,St.parseModule=function(e){var t,i,n,o,a,r,s,l,d;for(s={},o=0,i=e.childNodes,n=i.length,a=0,r=null,t=null,l=0,d=i.length;d>l;l++)r=i[l],1===(null!=r?r.nodeType:void 0)&&(s[r.nodeName]=this.parseItem(r));return s},St.parseItem=function(e){var t,i,n,o,a,r;if(n=(""+e.getAttribute("type")).toLowerCase(),o=e.textContent||e.text||e.innerText,"object"!==n&&"array"!==n&&/#\{.*\}/.test(o))return o;switch(n){case"object":o=this.parseModule(e);break;case"array":for(o=[],i=e.childNodes,a=0,r=i.length;r>a;a++)t=i[a],1===t.nodeType&&o.push(this.parseItem(t));break;case"boolean":o="true"===o.toLowerCase();break;case"number":o=parseFloat(o)}return o},St.prototype.url=null,St.prototype.data={paths:{player:"../amp.premier/",resources:"../resources/"},resources:[{src:"#{paths.player}amp.premier.css",type:"text/css"}],rules:{android_4_gets_m3u8:{regexp:"Android 4"}},autoplay:!0,loop:!1,target:"_blank",domain:"akamai.com",fullscreen:{},controls:{},volumepanel:{direction:"vertical"},captioning:{},playoverlay:{},flash:{swf:"#{paths.player}AkamaiPremierPlayer.swf",debug:"#{paths.player}AkamaiPremierPlayer-debug.swf",expressInstallSWF:"#{paths.player}playerProductInstall.swf","static":{enabled:!1,swf:"#{paths.player}AkamaiPremierPlayer-static.swf",debug:"#{paths.player}AkamaiPremierPlayer-debug.swf"},view:{attributes:{skin:"#{paths.player}ndn.assets.swf"},elements:{infoOverlayAdvanced:{attributes:{displayStates:"preplay,paused,ns,fs,mouseover",style:"top: 0px;"},elements:{"":{elements:{"":{attributes:{key:"less",type:"String"},elements:{}}}}}},adOptions:{elements:{adChoices:{attributes:{target:"http://www.akamai.com/"}},adCountdown:{}}},captionDisplay:{attributes:{initState:"cookie|on",settingsEnabled:"true",style:"bottom: 40px; opacity:1; windowColor:0x000000; windowOpacity:0; font:Arial; fontSize:12; fontColor:0xffffff; fontOpacity:1; fontBGColor:0x000000; fontBGOpacity:0; edgeType:left_drop_shadow; edgeColor:0x000000; edgeOpacity:1; scroll:popOut;"}},controls:{attributes:{autoHideDelay:"1",backgroundAlpha:".8",height:"51",scrubPosition:"top",transitionTime:"0.50"},elements:{playPauseBtn:{},scrubBar:{attributes:{collapsedHeight:"5",style:"height: 9px; background: linear-gradient(90deg, #232323 #232323);"}},progressBar:{attributes:{style:"background: linear-gradient(90deg, #0099CC #0099CC);"}},loadedBar:{attributes:{style:"background: linear-gradient(90deg, #666666 #666666);"}},streamTimeIndicator:{attributes:{position:"left"},elements:{streamTime:{},streamDuration:{attributes:{color:"#666666"}}}},timeLocationIndicator:{},brandingBtn:{attributes:{itemMargin:"20"}},shareBtn:{},facebookBtn:{},twitterBtn:{},captionBtn:{},volumeBar:{attributes:{backgroundColor:"#111111",color:"#0099CC",position:"relative",trackColor:"#C1C1C3",width:"25"}},volumeBtn:{},fullscreenBtn:{},posterBackground:{attributes:{alpha:"1",color:"#000000"}}}}}},xml:'<?xml version="1.0" encoding="UTF-8"?><application><player ad_control_enabled="true" ad_server_timeout="5" auto_play="false" auto_replay="false" branding_preload="none" core_player_name="ndn-player" dvr_enabled="0" hds_live_low_latency="true" mbr_start_index="2" netsession_install_prompt_frequency_secs="-1" share_mode="2" show_feature_bar="false" use_last_known_bitrate="false" use_netsession_client="false" volume="50"></player><params><property key="dpid" type="Number">99999</property><property key="sitesection" type="String">ndn</property><property key="sec" type="String">oth</property><property key="sub" type="String">non</property><property key="plt" type="Number">11</property><property key="wgt" type="Number">0</property><property key="fp" type="Number">0</property><property key="title" type="String">#{media.title}</property><property key="aud_params" type="Object"><property key="external_url" type="String">http://newsinc.com</property><property key="descriptionUrl" type="String">http://newsinc.com</property><property key="userData" type="String">dpid=34567;sitesection=ndn;sec=oth;sub=non;plt=11;wgt=0fp=0;videotype=#{player.mode}</property></property></params></application>'},branding:{logo:"#{paths.resources}images/akamai_logo1.png"},dash:{resources:[{type:"text/javascript",src:"http://dashif.org/reference/players/javascript/1.4.0/dist/dash.all.js"}],buffer:1},locales:{en:{MSG_TIME_SEPARATOR:" / ",MSG_EMAIL_TO:"To",MSG_EMAIL_FROM:"From",MSG_EMAIL_VIDEO:"Email this video",MSG_EMAIL_MESSAGE_DEFAULT:"Check out this video from xxx",MSG_EMAIL_MESSAGE:"Message",MSG_EMAIL_ADDRESS_INVALID:"Invalid Email Address",MSG_EMAIL_MESSAGE_INVALID:"Please limit your message to 500 characters or less.",MSG_EMAIL_CHARACTERS_REMAINING_TEXT:" characters left",MSG_EMAIL_SEND_FAILURE:"Message could not be sent.",MSG_EMAIL_SEND_SUCCESS_MESSAGE:"Your email has been sent!",MSG_SHARE_VIDEO_TEXT:"Share this video...",MSG_POST_TEXT:"Post",MSG_EMBED_TEXT:"Embed",MSG_LINK_TEXT:"Link",MSG_SHARE_CONNECT_FAILURE:"Unable to connect. Please try again.",MSG_SHARE_CONTENT_DISABLED:"Share and embed are disabled.",MSG_VERSION_TEXT:"Version",MSG_BUFFERING_TEXT:"buffering",MSG_CUSTOMIZE_CLIP_POINTS:"Customize the start and end point of the video.",MSG_PAUSE:"Pause",MSG_PREVIEW:"Preview",MSG_CURRENT:"Currrent",MSG_SEEK_TO:"Seek to",MSG_LIVE:"LIVE",MSG_DEFAULT_ERROR_MESSAGE:"Sorry, we were unable to play the media you selected. Please try again, or select alternate media.",MSG_ERROR_PREFIX:"Error encountered:",MSG_STREAM_NOT_FOUND:"Stream not found",MSG_CURRENT_WORKING_BANDWIDTH:"Current working bandwidth",MSG_CURRENT_BITRATE_PLAYING:"Current bitrate playing",MSG_MAX_BITRATE_AVAILABLE:"Max bitrate available",MSG_NOT_AVAILABLE:"Not Available",MSG_GO_LIVE:"GO LIVE",MSG_REPLAY:"Replay",MSG_NEXT_VIDEO:"Video starts in: ",MSG_RECOMMENDED:"Recommended",MSG_VIEW_ALL:"View all ",MSG_VIDEO:" videos",MSG_CC:"CC",MSG_CC_TITLE:"Caption",MSG_CC_LANGUAGE:"Track :",MSG_CC_PRESETS:"Presets :",MSG_CC_FONT:"Font :",MSG_CC_EDGE:"Edge :",MSG_CC_SIZE:"Size :",MSG_CC_SCROLL:"Scroll :",MSG_CC_COLOR:"Color :",MSG_CC_BACKGROUND:"Background :",MSG_CC_WINDOW:"Window :",MSG_CC_OPACITY:"Opacity :",MSG_CC_SHOW_ADVANCED:"Show Advanced Settings",MSG_CC_HIDE_ADVANCED:"Hide Advanced Settings",MSG_NEXT_AD:"Next ad starts in: ",MSG_CC_RESET:"Default",MSG_CC_CANCEL:"Cancel",MSG_CC_APPLY:"Apply",MSG_EN:"English",MSG_ES:"Spanish",MSG_DE:"German",MSG_FR:"French",MSG_IT:"Italian",MSG_RU:"Russian",MSG_ZH:"Chinese",MSG_CHROMECAST_MESSAGE:"Video playing on another screen",MSG_RETRY_MESSAGE:"Content not yet available, retrying in",MSG_SECONDS:"seconds",MSG_RETRY_FAILED:"Retry failed",MSG_RECOMMENDATIONS_TITLE:"Recommended"},es:{MSG_TIME_SEPARATOR:" / ",MSG_EMAIL_TO:"a",MSG_EMAIL_FROM:"de",MSG_EMAIL_VIDEO:"Enviar este vdeo",MSG_EMAIL_MESSAGE_DEFAULT:"Echa un vistazo a este video de xxx",MSG_EMAIL_MESSAGE:"mensaje",MSG_EMAIL_ADDRESS_INVALID:"Direccin de correo electrnico no vlida",MSG_EMAIL_MESSAGE_INVALID:"Por favor limite su mensaje a 500 caracteres o menos.",MSG_EMAIL_CHARACTERS_REMAINING_TEXT:"personajes de la izquierda",MSG_EMAIL_SEND_FAILURE:"El mensaje no pudo ser enviado.",MSG_EMAIL_SEND_SUCCESS_MESSAGE:"Tu email ha sido enviado!",MSG_SHARE_VIDEO_TEXT:"Comparte este vdeo...",MSG_POST_TEXT:"enviar",MSG_EMBED_TEXT:"incrustar",MSG_LINK_TEXT:"enlace",MSG_SHARE_CONNECT_FAILURE:"No se puede conectar. Por favor, intntelo de nuevo.",MSG_SHARE_CONTENT_DISABLED:"Compartir e incrustar estn desactivados.",MSG_VERSION_TEXT:"versin",MSG_BUFFERING_TEXT:"el almacenamiento en bfer",MSG_CUSTOMIZE_CLIP_POINTS:"Personalizar el inicio y el punto final del video.",MSG_PAUSE:"romper",MSG_PREVIEW:"vista previa",MSG_CURRENT:"corriente",MSG_SEEK_TO:"Tratar de",MSG_LIVE:"EN VIVO",MSG_DEFAULT_ERROR_MESSAGE:"Lo sentimos, no hemos podido jugar los medios de comunicacin seleccionados. Por favor, intntelo de nuevo, o seleccionar los medios de comunicacin alternativos.",MSG_ERROR_PREFIX:"Se produjo un error:",MSG_STREAM_NOT_FOUND:"Stream que no se encuentra",MSG_CURRENT_WORKING_BANDWIDTH:"Ancho de banda actual de trabajo",MSG_CURRENT_BITRATE_PLAYING:"Tasa de bits de reproduccin actual",MSG_MAX_BITRATE_AVAILABLE:"Tasa de bits mxima disponible",MSG_NOT_AVAILABLE:"No est disponible",MSG_GO_LIVE:"IR A VIVIR",MSG_REPLAY:"Repetir",MSG_NEXT_VIDEO:"El prximo video comienza en: ",MSG_RECOMMENDED:"Recomendado",MSG_CC:"CC",MSG_VIEW_ALL:"ver todo ",MSG_VIDEO:" vdeos.",MSG_EN:"Ingls",MSG_ES:"Espaol",MSG_DE:"Alemn",MSG_FR:"Francs",MSG_IT:"Italiano",MSG_RU:"Ruso",MSG_ZH:"Chino",MSG_RETRY_MESSAGE:"Content not yet available, retrying in",MSG_SECONDS:"seconds",MSG_RETRY_FAILED:"Retry failed",MSG_RECOMMENDATIONS_TITLE:"Recomendado"}}},St.prototype.xml=null,St.prototype.readyState=St.UNINITIALIZED,St.prototype.loaded=!1,St.prototype.flash={PlaybackMetricsPlugin:{src:"#{paths.resources}plugins/PlaybackMetricsPlugin.swf",blocking:!1,host:"akamai",main:"PlaybackMetricsPlugin"},SubclipMonitorPlugin:{src:"#{paths.resources}plugins/SubclipMonitorPlugin.swf",blocking:!1,host:"akamai",main:"SubclipMonitorPlugin"},NetSessionClientPlugin:{src:"#{paths.resources}plugins/NetSessionClientPlugin.swf",blocking:!1,host:"akamai",main:"NetSessionClientPlugin"}},St.prototype.loadURL=function(e,t){var i,n=this;null==t&&(t=!1),this.url=e,this.setReadyState(St.LOADING),i=Pt.get(e,{withCredentials:t,onload:function(e){var t,i,o;o=e.detail,"document"===o.responseType?(n.xml=o.responseXML,i=7!==n.xml.firstChild.nodeType?n.xml.firstChild:n.xml.childNodes[1],t=St.parseModule(i)):(t=o.response,"string"==typeof t&&(t=JSON.parse(t))),n.loadData(t)},onerror:function(e){n.dispatchEvent(new At("error",e)),bt.error(e)}})},St.prototype.loadData=function(e){this.data=e,this.setReadyState(St.LOADED)},St.prototype.load=function(e,t){switch(null==t&&(t=!1),typeof e){case"object":this.loadData(e);break;case"string":this.loadURL(e,t);break;default:throw new Error("[AMP ERROR] Invalid default configuration resource")}},St.prototype.setReadyState=function(e){this.readyState=e,this.dispatchEvent(new At("readystatechange",e)),e!==St.LOADED||this.loaded||(this.loaded=!0,this.dispatchEvent(new At("load",this.data)))},i(Tt,q),Tt.prototype.componentType="button",Tt.prototype.icon=null,Tt.prototype.label=null,Tt.prototype.onclick=null,i(wt,Nt),wt.prototype.events=["mousemove","mousedown","keypress","DOMMouseScroll","mousewheel","touchmove","MSPointerMove"],
wt.prototype.resetHandler=null,wt.prototype.element=null,wt.prototype.timeout=null,wt.prototype.active=!0,wt.prototype.timeoutId=null,wt.prototype.applyListeners=function(e){var t,i,n,o;for(null==e&&(e="add"),o=this.events,i=0,n=o.length;n>i;i++)t=o[i],this.element[""+e+"EventListener"](t,this.resetHandler)},wt.prototype.start=function(e){null!=e&&(this.timeout=e),this.stop(),this.applyListeners("add"),this.timeoutId=setTimeout(this.setActive.bind(this,!1),this.timeout)},wt.prototype.stop=function(){this.applyListeners("remove"),clearTimeout(this.timeoutId)},wt.prototype.reset=function(){this.setActive(!0),this.start()},wt.prototype.setActive=function(e){return e!==this.active?(this.active=e,this.dispatchEvent(new At("activechange",{active:this.active})),e):void 0},wt.prototype.getActive=function(){return this.active},i(Dt,q),Dt.prototype.componentName="logo",Dt.prototype.url=null,Dt.prototype.onRegister=function(){Dt.__super__.onRegister.call(this),this.sendNotification(uo.ADD_CONTROL_STATE,this.componentName+"-enabled")},Dt.prototype.onclick=function(e){return e.stopImmediatePropagation(),this.sendNotification(uo.DISPATCH_EVENT,new At("controlsLogoClicked")),!1},i(xt,puremvc.Mediator),xt.NAME="PluginWrapper",xt.prototype.player=null,xt.prototype.config=null,xt.prototype.dispatcher=null,xt.prototype.flashPlugins=null,xt.prototype.createFlashVars=null,xt.prototype.createXML=null,xt.prototype.createDefaults=function(){this.player.createDefaults.call(this)},xt.prototype.addEventListener=function(e,t){this.dispatcher.addEventListener(e,t)},xt.prototype.logEvent=function(e){},xt.prototype.dispatchEvent=function(e){"timeupdate"!==e.type&&"timeremaining"!==e.type&&this.player.logger.log("[AMP "+this.constructor.NAME.replace("Wrapper","").toUpperCase()+" EVENT] "+e.type,e),e.player=this.player,this.dispatcher.dispatchEvent(e)},xt.prototype.removeEventListener=function(e,t){this.dispatcher.removeEventListener(e,t)},xt.prototype.createElement=function(e,t,i){var n;return n=e.createElement("element"),n.setAttribute("id",t),null==i&&(i=this.getControls(e).controls),null!=i&&i.appendChild(n),n},xt.prototype.createProperty=function(e,t,i,n){var o,a,r;if(o=e.createElement("property"),o.setAttribute("key",t),null!=n&&n.appendChild(o),null!=i)if("object"!=typeof i||i instanceof Array)a=l.createTextContent(e,i.toString()),o.appendChild(a);else for(t in i)r=i[t],this.createProperty(e,t,r,o);return o},xt.prototype.listNotificationInterests=function(){return[so.CREATE_FLASH_VARS,so.CREATE_XML]},xt.prototype.handleNotification=function(e){var t,i;switch(i=e.getName(),t=e.getBody(),i){case so.CREATE_FLASH_VARS:"function"==typeof this.createFlashVars&&this.createFlashVars(t.flashvars);break;case so.CREATE_XML:"function"==typeof this.createXML&&this.createXML(t.xml)}},i(Mt,puremvc.SimpleCommand),Mt.prototype.execute=function(e){var t;t=this.facade.retrieveProxy(Ht.NAME),t.start()},i(Lt,puremvc.SimpleCommand),Lt.prototype.execute=function(e){var t;t=this.facade.retrieveProxy(Ht.NAME),t.stop()},i(kt,puremvc.SimpleCommand),kt.prototype.execute=function(e){var t,i,n;n=this.facade.retrieveProxy(Ht.NAME),t=this.facade.player.retrieveProxy(ut.NAME),i=e.getBody(),i.newState===vo.ACTIVE&&t.getPlayState()!==ho.READY&&"desktop"!==Pt.getDevice()&&n.start()},i(Rt,puremvc.SimpleCommand),Rt.prototype.execute=function(e){this.facade.player.getMediaElement().controls=!1},i(Ot,puremvc.SimpleCommand),Ot.prototype.execute=function(e){this.facade.player.getMediaElement().controls=!0},i(Vt,puremvc.SimpleCommand),Vt.prototype.execute=function(e){var t,i,n;i=e.getBody(),n=i.poster,t=this.facade.player.getMediaElement(),null!=n&&""!==n&&(t.poster=n),t.src=i.src,this.facade.player.getAutoplay()!==!0&&this.facade.applyClickHandler()},i(Gt,puremvc.SimpleCommand),Gt.prototype.execute=function(e){this.facade.applyClickHandler(!1)},i(Ut,puremvc.SimpleCommand),Ut.prototype.execute=function(e){var t;t=this.facade.retrieveProxy(Ht.NAME),t.start()},i(Bt,xt),Bt.NAME="ControlsWrapper",Bt.prototype.mode="auto",Bt.prototype.autoHide=5,Bt.prototype.listNotificationInterests=function(){return Bt.__super__.listNotificationInterests.apply(this,arguments).concat([uo.MEDIUM_CHANGE])},Bt.prototype.handleNotification=function(e){var t,i,n;switch(Bt.__super__.handleNotification.call(this,e),n=e.getName(),t=e.getBody(),n){case uo.MEDIUM_CHANGE:i=/audio/.test(t)?"persistent":this.mode,this.setMode(i)}},Bt.prototype.createFlashVars=function(e){return null!=this.config.mode&&(this.mode=e.controls_mode=this.config.mode),e},Bt.prototype.createXML=function(e){var t,i,n,o,a;return t=null!=(i=this.player.config)&&null!=(n=i.flash)&&null!=(o=n.view)&&null!=(a=o.elements)?a.controls:void 0,null!=t?(null!=t.attributes.autoHideDelay?this.autoHide=t.attributes.autoHideDelay:null!=this.config.autoHide&&(this.autoHide=this.config.autoHide,t.attributes.autoHideDelay=this.config.autoHide),e):void 0},Bt.prototype.getMode=function(){return this.mode},Bt.prototype.setMode=function(e){if(e!==this.mode){try{this.mode=e,this.player.mediaElement.setPlayerProperty("controlsMode",e)}catch(t){this.facade.logger.error("[AMP CONTROLS ERROR]",t)}return e}},Bt.prototype.getAutoHide=function(){return this.autoHide},i(Ht,r),Ht.NAME=r.NAME,Ht.prototype.defaults={mode:"auto",autoHide:3},Ht.prototype.timeout=null,Ht.prototype.appState=null,Ht.prototype.controls=null,Ht.prototype.interactiveElement=null,Ht.prototype.idleUtil=null,Ht.prototype.initializeNotifier=function(e){Ht.__super__.initializeNotifier.call(this,e),this.appState=this.facade.player.retrieveProxy(ut.NAME),this.controls=this.facade.retrieveMediator(ut.NAME)},Ht.prototype.onRegister=function(){var e=this;Ht.__super__.onRegister.call(this),null!=this.config.mode&&this.changeMode(this.config.mode),this.interactiveElement=this.facade.player.retrieveMediator(Ye.NAME).getViewComponent(),"desktop"===Pt.getDevice()?(ht.create(this.interactiveElement,"mouseenter",function(){e.stop(),e.appState.activeState!==vo.ACTIVE&&e.sendNotification(uo.CHANGE_ACTIVE_STATE,vo.ACTIVE)}),ht.create(this.interactiveElement,"mouseleave",function(){e.start()}),this.idleUtil=new wt(this.facade.player.getViewComponent(),1e3*this.data.autoHide),this.idleUtil.addEventListener("activechange",function(t){var i;i=t.detail.active!==!0?vo.INACTIVE:vo.ACTIVE,e.sendNotification(uo.CHANGE_ACTIVE_STATE,i)}),this.idleUtil.start()):ht.create(this.interactiveElement,ht.CLICK,function(){e.sendNotification(uo.TOGGLE_ACTIVE)})},Ht.prototype.setMode=function(e){return this.data.mode===e?e:(this.changeMode(e),e)},Ht.prototype.changeMode=function(e){"auto"===this.data.mode&&this.stop(),this.facade.sendNotification(uo.REMOVE_APPLICATION_STATE,"controls-"+this.data.mode),this.data.mode=e,this.facade.sendNotification(uo.ADD_APPLICATION_STATE,"controls-"+this.data.mode)},Ht.prototype.getMode=function(){return this.data.mode},Ht.prototype.setAutoHide=function(e){return this.data.autoHide=e,e},Ht.prototype.getAutoHide=function(){return this.data.autoHide},Ht.prototype.start=function(){this.stop(),"auto"===this.data.mode&&(this.timeout=setTimeout(this.hide.bind(this),1e3*this.data.autoHide))},Ht.prototype.stop=function(){clearTimeout(this.timeout),this.timeout=null},Ht.prototype.hide=function(){return"auto"===this.data.mode?this.appState.getIsUserActive()!==!0&&!Pt.isMouseOverElement(this.facade.viewComponent)||this.appState.getDisplayState()===yo.FULL_SCREEN?void this.facade.sendNotification(uo.CHANGE_ACTIVE_STATE,vo.INACTIVE):void this.start():void 0},i(Ft,Tt),Ft.prototype.componentName="full-screen",Ft.prototype.onRegister=function(){Ft.__super__.onRegister.call(this),this.sendNotification(uo.ADD_CONTROL_STATE,this.componentName+"-enabled")},Ft.prototype.onclick=function(e){return e.stopImmediatePropagation(),this.sendNotification(uo.TOGGLE_FULL_SCREEN),!1},Ft.prototype.listNotificationInterests=function(){return[uo.DISABLE_FULL_SCREEN,uo.ENABLE_FULL_SCREEN]},Ft.prototype.handleNotification=function(e){var t,i;switch(i=e.getName(),t=e.getBody(),i){case uo.DISABLE_FULL_SCREEN:this.setDisabled(!0);break;case uo.ENABLE_FULL_SCREEN:this.setDisabled(!1)}},i(jt,q),jt.prototype.componentType="slider",jt.prototype.trackView=null,jt.prototype.handleView=null,jt.prototype.valueView=null,jt.prototype.startCapView=null,jt.prototype.endCapView=null,jt.prototype.min=0,jt.prototype.max=1,jt.prototype.value=0,jt.prototype.dragging=!1,jt.prototype.draggingInterval=null,jt.prototype.draggingDelay=250,jt.prototype.direction="vertical",jt.prototype.pressHandler=null,jt.prototype.releaseHandler=null,jt.prototype.moveHandler=null,jt.prototype.clickHandler=null,jt.prototype.onRegister=function(){jt.__super__.onRegister.call(this),this.startCapView=this.create("start-cap"),this.endCapView=this.create("end-cap"),this.trackView=this.create("track"),this.valueView=this.create("value",this.trackView),this.handleView=this.create("handle",this.trackView),this.pressHandler=ht.create(this.handleView,ht.PRESS,this.handlePressHandler.bind(this)),this.releaseHandler=ht.create(window,ht.RELEASE,this.handleReleaseHandler.bind(this)),this.releaseHandler.unbind(),this.moveHandler=ht.create(window,ht.MOVE,this.updateHandler.bind(this,!1)),this.moveHandler.unbind(),this.clickHandler=ht.create(this.trackView,ht.CLICK,this.updateHandler.bind(this,!0))},jt.prototype.setDirection=function(e){return this.direction=e,e},jt.prototype.getDirection=function(){return this.direction},jt.prototype.setValue=function(e){return this.updateValue(e),this.valueChanged(e),e},jt.prototype.getValue=function(){return this.value},jt.prototype.setDragging=function(e){return e!==this.dragging?(this.dragging=e,this.sendNotification(uo.IS_USER_ACTIVE,this.dragging),this.dragging===!0?this.draggingInterval=setInterval(this.dragUpdateHandler.bind(this),this.draggingDelay):(clearInterval(this.draggingInterval),this.dragUpdateHandler()),this.dragging):void 0},jt.prototype.getDragging=function(){return this.dragging},jt.prototype.updateValue=function(e){var t;this.value=Pt.clamp(e,this.min,this.max),"vertical"===this.direction?(e="height",t="bottom"):(e="width",t="left"),this.valueView.style[e]=this.handleView.style[t]=""+100*this.value+"%"},jt.prototype.calculateValue=function(e){var t,i,n,o,a;if(n=0,i=this.facade.player.retrieveProxy(ut.NAME).getDisplayState()!==yo.FULL_SCREEN,"vertical"===this.getDirection()){if(a=this.viewComponent.offsetHeight,i)n=Pt.getElementOffset(this.viewComponent).top;else for(t=this.viewComponent,o=this.facade.player.viewComponent;t&&o!==t;)n+=t.offsetTop-t.scrollTop+t.clientTop,t=t.offsetParent;n+=a,e=-(e.y-n)-window.scrollY}else a=this.viewComponent.offsetWidth,n=i?Pt.getElementOffset(this.viewComponent).left:this.viewComponent.offsetLeft,e=e.x-n+window.scrollX;return Pt.clamp(e/a,0,1)},jt.prototype.handlePressHandler=function(e){return this.moveHandler.bind(),this.releaseHandler.bind(),this.clickHandler.unbind(),this.setDragging(!0),e.stopImmediatePropagation(),!1},jt.prototype.handleReleaseHandler=function(e){return this.moveHandler.unbind(),this.releaseHandler.unbind(),this.clickHandler.bind(),this.setDragging(!1),e.stopImmediatePropagation(),!1},jt.prototype.updateHandler=function(e,t){var i,n;return t.stopImmediatePropagation(),i={x:t.clientX||t.targetTouches[0].clientX,y:t.clientY||t.targetTouches[0].clientY},n=this.calculateValue(i),e===!0?this.setValue(n):this.updateValue(n),!1},jt.prototype.dragUpdateHandler=function(){this.setValue(this.value)},jt.prototype.valueChanged=function(){};var Ao={ADD_PANEL:"addPanel",REMOVE_PANEL:"removePanel",OPEN_PANEL:"openPanel",CLOSE_PANEL:"closePanel",TOGGLE_PANEL:"togglePanel",CLOSE_ALL_PANELS:"closeAllPanels"};i(zt,q),zt.prototype.componentName="time-display",zt.prototype.duration=null,zt.prototype.currentTimeDisplay=null,zt.prototype.separatorDisplay=null,zt.prototype.durationDisplay=null,zt.prototype.liveDisplay=null,zt.prototype.onRegister=function(){zt.__super__.onRegister.call(this),this.liveDisplay=this.createText("live-display",this.localizationManager.getString(Q.MSG_LIVE)),this.currentTimeDisplay=this.createText("current-time-display","00:00",this,"span"),this.separatorDisplay=this.createText("separator-display",this.localizationManager.getString(Q.MSG_TIME_SEPARATOR),this,"span"),this.durationDisplay=this.createText("duration-display","00:00",this,"span")},zt.prototype.listNotificationInterests=function(){return[uo.PLAY,uo.DURATION_CHANGE,uo.ENDED,uo.DISPLAY_TIME]},zt.prototype.handleNotification=function(e){var t,i;switch(i=e.getName(),t=e.getBody(),i){case uo.PLAY:this.updateDuration();break;case uo.DURATION_CHANGE:this.duration=t,this.updateCurrentTime(),this.updateDuration();break;case uo.ENDED:this.updateCurrentTime(this.duration),this.updateDuration();break;case uo.DISPLAY_TIME:this.updateCurrentTime(t.currentTime,t.duration),this.updateDuration(t.duration)}},zt.prototype.updateCurrentTime=function(e,t){null==e&&(e=this.currentTime),null==t&&(t=this.duration),this.currentTimeDisplay.textContent=Pt.formatTimecode(e,t)},zt.prototype.updateDuration=function(e){null==e&&(e=this.duration),this.durationDisplay.textContent=Pt.formatTimecode(e)},i(Wt,q),Wt.prototype.componentName="panels",Wt.prototype.activePanel=null,Wt.prototype.panels=null,Wt.prototype.closeHandler=null,Wt.prototype.listNotificationInterests=function(){var e,t;return function(){var i;i=[];for(e in Ao)t=Ao[e],i.push(t);return i}().concat([])},Wt.prototype.handleNotification=function(e){var t,i;switch(i=e.getName(),t=e.getBody(),i){case Ao.ADD_PANEL:this.addPanel(t);break;case Ao.REMOVE_PANEL:this.removePanel(t);break;case Ao.OPEN_PANEL:this.openPanel(t);break;case Ao.CLOSE_PANEL:this.closePanel(t);break;case Ao.CLOSE_ALL_PANELS:this.closeAllPanels(t);break;case Ao.TOGGLE_PANEL:this.togglePanel(t)}},Wt.prototype.addPanel=function(e){this.panels.push(e),this.viewComponent.appendChild(e.getViewComponent())},Wt.prototype.removePanel=function(e){this.panels.splice(this.panels.indexOf(e),1),this.viewComponent.removeChild(e.getViewComponent())},Wt.prototype.openPanel=function(e){e!==this.activePanel&&null!=e&&(this.closeAllPanels(),this.activePanel=e,this.activePanel.classList.add("active"),"desktop"!==Pt.getDevice()&&this.sendNotification(uo.IS_USER_ACTIVE,!0),document.addEventListener("mouseup",this.closeHandler))},Wt.prototype.closePanel=function(e){e.classList.remove("active"),null!=this.activePanel&&(this.activePanel=null,"desktop"!==Pt.getDevice()&&this.sendNotification(uo.IS_USER_ACTIVE,!1),document.removeEventListener("mouseup",this.closeHandler))},Wt.prototype.togglePanel=function(e){e===this.activePanel?this.closePanel(e):this.openPanel(e)},Wt.prototype.closeAllPanels=function(){var e,t,i,n;for(n=this.panels,t=0,i=n.length;i>t;t++)e=n[t],this.closePanel(e)},Wt.prototype.mouseupHandler=function(e){var t,i,n;i=document.elementFromPoint(e.clientX,e.clientY),n=this.activePanel.getViewComponent(),t=this.activePanel.control.getViewComponent(),i!==n&&n.contains(i)===!1&&i!==t&&t.contains(i)===!1&&this.closeAllPanels()},i(Yt,jt),Yt.prototype.componentName="progress",Yt.prototype.bufferValue=null,Yt.prototype.scrubTime=null,Yt.prototype.scrubTimeSeparator=null,Yt.prototype.cuePoints=null,Yt.prototype.cues=null,Yt.prototype.duration=0,Yt.prototype.isLive=!1,Yt.prototype.previewData={src:null,previewWidth:null,previewHeight:null,imgWidth:null,imgHeight:null,count:null},Yt.prototype.onRegister=function(){Yt.__super__.onRegister.call(this),this.bufferValue=this.create("buffer-value",!1),this.trackView.insertBefore(this.bufferValue,this.trackView.lastChild),this.cuePoints=this.create("cue-points",this.trackView),this.scrubTimeSeparator=this.create("scrub-time-separator",this.trackView),this.scrubTime=this.create("scrub-time",this.trackView),this.thumbPreview=this.create("thumb-preview")},Yt.prototype.listNotificationInterests=function(){return[uo.ENDED,uo.MEDIA_CHANGE,uo.DURATION_CHANGE,uo.PROGRESS,uo.ADD_CUE_POINTS,uo.REMOVE_CUE_POINTS,uo.DISPLAY_TIME]},Yt.prototype.handleNotification=function(e){var t,i,n;switch(i=e.getName(),t=e.getBody(),i){case uo.MEDIA_CHANGE:this.isLive="live"===t.temporalType,this.updateValue(0),this.bufferValue.style.width="0%",this.updatePreview(t.metadata);break;case uo.PROGRESS:n=Pt.clamp(t/this.duration*100,0,100),this.bufferValue.style.width=n+"%";break;case uo.DURATION_CHANGE:this.duration=t,this.updateCuePoints();break;case uo.ENDED:this.updateValue(1);break;case uo.ADD_CUE_POINTS:this.cues=t,this.updateCuePoints();break;case uo.REMOVE_CUE_POINTS:this.removeCuePoints();break;case uo.DISPLAY_TIME:this.dragging===!1&&this.updateValue(t.currentTime/t.duration,t.duration)}},Yt.prototype.updateCuePoints=function(){var e,t,i,n,o,a,r;if(null!=this.cues&&0!==this.cues.length&&(null==(null!=(o=this.facade.player.config)&&null!=(a=o.controls)?a.displaySceneMarkers:void 0)||this.facade.player.config.controls.displaySceneMarkers!==!1))for(this.removeCuePoints(),r=this.cues,i=0,n=r.length;n>i;i++)e=r[i],0!==e&&-1!==e&&(t=this.create("cue-point",this.cuePoints),t.style.left=e/this.duration*100+"%")},Yt.prototype.updatePreview=function(e){var t,i=this;this.previewData.src=e.previewThumbnailSrc,this.previewData.previewHeight=e.previewThumbnailHeight,this.previewData.previewWidth=e.previewThumbnailWidth,this.previewData.count=e.previewThumbnailCount,t=new Image,this.previewData.src&&(t.src=this.previewData.src),ht.create(t,"load",function(e){return e.stopImmediatePropagation(),i.previewData.imgWidth=e.target.width,i.previewData.imgHeight=e.target.height,!1}),this.previewData.src&&(this.thumbPreview.style.backgroundImage="url("+this.previewData.src+")"),this.thumbPreview.style.width=this.previewData.previewWidth+"px",this.thumbPreview.style.height=this.previewData.previewHeight+"px"},Yt.prototype.removeCuePoints=function(){null!=this.cuePoints&&(this.cuePoints.innerHTML="")},Yt.prototype.valueChanged=function(){this.sendNotification(go.SEEK,this.value*this.facade.player.retrieveProxy(ft.NAME).getDuration())},Yt.prototype.updateValue=function(e,t){null==t&&(t=this.duration),this.isLive===!0&&(e=1),isNaN(e)===!0&&(e=0),Yt.__super__.updateValue.call(this,e),this.getDragging()===!0&&(this.scrubTime.textContent=Pt.formatTimecode(this.value*t)),this.scrubTime.style.left=this.scrubTimeSeparator.style.left=""+(100*this.value).toFixed(2)+"%",this.previewInterval=this.duration/this.previewData.count,this.previewImgIndex=Math.floor(this.value*t/this.previewInterval),this.previewRow=Math.floor(this.previewImgIndex*this.previewData.previewWidth/this.previewData.imgWidth),this.xpos="-"+this.previewData.previewWidth*this.previewImgIndex+"px ",this.ypos="-"+this.previewData.previewHeight*this.previewRow.toFixed(0)+"px ",this.thumbPreview.style.backgroundPosition=this.xpos+this.ypos,this.thumbPreview.style.left=""+(100*this.value-18).toFixed(2)+"%"},Yt.prototype.handlePressHandler=function(e){Yt.__super__.handlePressHandler.call(this,e),this.classList.add("scrubbing")},Yt.prototype.handleReleaseHandler=function(e){Yt.__super__.handleReleaseHandler.call(this,e),this.classList.remove("scrubbing")},i(qt,Tt),qt.prototype.componentName="play-pause",qt.prototype.onclick=function(e){return e.stopImmediatePropagation(),e.preventDefault(),this.sendNotification(go.TOGGLE_PLAY_PAUSE),!1};var Co={BREAK_START:"adsbreakstart",BREAK_END:"adsbreakend",AD_CONTAINER_CREATED:"adscontainercreated",AD_LOADED:"adsloaded",AD_MANAGER_LOADED:"adsmanagerloaded",AD_STARTED:"adsstarted",AD_TIME_UPDATE:"adstimeupdate",AD_TIME_REMAINING:"adstimeremaining",AD_DURATION_CHANGE:"adsdurationchange",AD_ENDED:"adsended",AD_ERROR:"adserror",AD_PLAY:"adsplay",AD_PAUSE:"adspause",AD_PAUSED:"adspaused",AD_RESUME:"adsresume",AD_CLICKED:"adclicked",AD_COMPANION:"adscompanion",FIRST_QUARTILE:"adsfirstquartile",MIDPOINT:"adsmidpoint",THIRD_QUARTILE:"adsthirdquartile",LOG:"adslog",REQUEST:"adsrequest",SKIPPED:"adsskipped",IMPRESSION:"adsimpression"};i(Zt,pe),Zt.prototype.componentName="controls",Zt.prototype.activeControlPanel=null,Zt.prototype.controlBar=null,Zt.prototype.panels=null,Zt.prototype.onRegister=function(){var e;Zt.__super__.onRegister.call(this),this.facade.viewComponent=this.viewComponent,this.controlBar=this.create("control-bar"),this.facade.registerMediator(new Wt(this.viewComponent)),this.facade.registerMediator(new qt(this.controlBar)),this.facade.registerMediator(new zt(this.controlBar)),this.facade.registerMediator(new Yt(this.controlBar)),null!=this.facade.config.logo&&this.facade.registerMediator(new Dt(this.controlBar)),e=this.create("separator",this.controlBar)},Zt.prototype.listNotificationInterests=function(){return[uo.READY,uo.ADD_CONTROL,uo.REMOVE_CONTROL,uo.ADD_CONTROL_STATE,uo.REMOVE_CONTROL_STATE]},Zt.prototype.handleNotification=function(e){var t,i,n;switch(i=e.getName(),t=e.getBody(),i){case uo.READY:(null!=(n=t.fullscreen)?n.enabled:void 0)!==!1&&this.facade.registerMediator(new Ft(this.controlBar));break;case uo.ADD_CONTROL_STATE:this.classList.add(t);break;case uo.REMOVE_CONTROL_STATE:this.classList.remove(t);break;case uo.ADD_CONTROL:this.controlBar.appendChild(t);break;case uo.REMOVE_CONTROL:this.controlBar.contains(t)&&this.controlBar.removeChild(t)}},Xt.create=function(e,t,i){var n,o;if("string"==typeof e&&(e=document.getElementById(e)),null==e)throw new Error("[AMP ERROR] Invalid container. Could not find DOM element with id: "+e);switch(t=t instanceof Le?t:Le.create(t),bt.enable(t.debug),o=this.getVersion(),null==e.dataset&&(e.dataset={}),e.dataset["amp.version"]=o,bt.log("[AMP] "+o),t.mode){case Eo.HTML:n=new re(e);break;case Eo.FLASH:n=new we(e);break;case Eo.EXTERNAL:n=new _t(e);break;case Eo.NONE:n=new c(e)}return n.onready=i,n.initialize(t),e.amp=n,n},Xt.getVersion=function(){return this.VERSION},Xt.VERSION="AMP Premier - NDN v1.34.0.0001",Xt.defaults=new St,Xt.plugins=[],Xt.loadDefaults=function(e,t,i,n){null==n&&(n=!1),null!=t&&this.defaults.addEventListener("load",t),null!=i&&this.defaults.addEventListener("error",i),this.defaults.load(e,n)},Xt.getPlaybackMode=function(){return Pt.getPlaybackMode()},Xt.registerPlugin=function(e,t,i){var n;null==(n=this.plugins)[e]&&(n[e]={}),this.plugins[e][t]=i},Xt.resourceManager=null,Xt.getResourceManager=function(){return null==this.resourceManager&&(this.resourceManager=new p),this.resourceManager},Xt.addResource=function(e,t){return this.getResourceManager().add(e,t)},Xt.addResources=function(e,t){return this.getResourceManager().addResources(e,t)},Xt.getResource=function(e){return this.getResourceManager().item(e)},Xt.removeResource=function(e){return this.getResourceManager().remove(e)},i(Jt,xt),Jt.NAME="PlayOverlayWrapper",Jt.prototype.createFlashVars=function(e){return e.show_play_button_overlay=null!=this.config.enabled?this.config.enabled:!0,e},Xt.registerPlugin("playoverlay","flash",Jt),i(Kt,Z),Kt.prototype.componentName="play",Kt.prototype.onclick=function(e){return e.stopImmediatePropagation(),e.preventDefault(),this.sendNotification(go.TOGGLE_PLAY_PAUSE),!1},i($t,Je),$t.prototype.moduleName="controls",$t.prototype.createFramework=function(){return this.config["native"]===!0?(this.player.getMediaElement().controls=!0,this.player.sendNotification(uo.ADD_APPLICATION_STATE,"controls-native"),this.registerCommand(uo.MEDIA_VALIDATED,Vt),this.registerCommand(Co.BREAK_START,Rt),this.registerCommand(Co.BREAK_END,Ot),this.registerCommand(uo.STARTED,Gt),void(this.createView=function(){})):void $t.__super__.createFramework.call(this)},$t.prototype.applyClickHandler=function(e){null==e&&(e=!0),this.player.getMediaElement().onclick=e?this.clickHandler.bind(this):null,this.player.getMediaElement().onplay=e?this.clickHandler.bind(this):null},$t.prototype.clickHandler=function(e){this.sendNotification(go.TOGGLE_PLAY_PAUSE,!0)},$t.prototype.createController=function(){$t.__super__.createController.call(this),this.registerCommand(uo.START,Ut),this.registerCommand(uo.PLAY,Mt),this.registerCommand(uo.PAUSE,Lt),this.registerCommand(uo.ACTIVE_STATE_CHANGE,kt)},$t.prototype.createModel=function(){this.proxy=new Ht(this.config),this.registerProxy(this.proxy)},$t.prototype.createView=function(){this.registerMediator(new Zt)},$t.prototype.listNotificationInterests=function(){var e,t;return function(){var i;i=[];for(e in Ao)t=Ao[e],i.push(t);return i}().concat([uo.MEDIA_CHANGE,uo.TIME_UPDATE,uo.DURATION_CHANGE,uo.PROGRESS,uo.ENDED,uo.ADD_CUE_POINTS,uo.REMOVE_CUE_POINTS,uo.DISABLE_FULL_SCREEN,uo.ENABLE_FULL_SCREEN,uo.READY,uo.ADD_CONTROL,uo.REMOVE_CONTROL,uo.ADD_CONTROL_STATE,uo.REMOVE_CONTROL_STATE,uo.ACTIVE_STATE_CHANGE,uo.START,uo.PLAY,uo.PAUSE,Co.BREAK_START,Co.BREAK_END,uo.CHANGE_MEDIA,uo.DISPLAY_TIME,uo.MEDIA_VALIDATED,uo.STARTED])},$t.prototype.listNotificationPublications=function(){return $t.__super__.listNotificationPublications.call(this).concat([uo.CHANGE_ACTIVE_STATE,uo.TOGGLE_FULL_SCREEN,go.SEEK,uo.TOGGLE_ACTIVE,go.TOGGLE_PLAY_PAUSE])},$t.prototype.setMode=function(e){return this.proxy.setMode(e),e},$t.prototype.getMode=function(){return this.proxy.getMode()},$t.prototype.setAutoHide=function(e){return this.proxy.setAutoHide(e),e},$t.prototype.getAutoHide=function(){return this.proxy.getAutoHide()},Xt.registerPlugin("controls","html",$t),Xt.registerPlugin("controls","flash",Bt),Xt.registerPlugin("controls","external",$t),i(Qt,_e),Qt.prototype.execute=function(e){this.proxy.contentStarted()},i(ei,_e),ei.prototype.execute=function(e){this.proxy.contentEnded()},i(ti,_e),ti.prototype.dispatchEvent=function(e,t){var i,n,o;"string"!=typeof e&&(t=e.getBody()||{},e=e.getName()),n="function"==typeof(o=this.plugin).getFeatureName?o.getFeatureName():void 0,null!=n&&(e=e.replace(new RegExp("^("+n+")"),"")),n=this.plugin.getModuleName(),e=e.replace(new RegExp("^("+n+")"),""),i=new At(e,t),this.sendNotification(uo.DISPATCH_EVENT,i)},ti.prototype.dispatchEventAfterCommand=function(e,t){setTimeout(this.dispatchEvent.bind(this,e,t),0)},ti.prototype.execute=function(e){this.dispatchEvent(e)},i(ii,_e),ii.prototype.execute=function(e){this.proxy.setMedia(e.getBody())},i(ni,puremvc.SimpleCommand),ni.prototype.execute=function(e){this.facade.player.getMediaElement().dataset.isad=!0},i(oi,puremvc.SimpleCommand),oi.prototype.execute=function(e){this.facade.player.getMediaElement().dataset.isad=!1},i(ai,puremvc.SimpleCommand),ai.prototype.execute=function(e){var t,i;try{i=e.getBody(),t={adDuration:i.duration,adPartnerId:i.partner,adTitle:i.title,adId:i.id},"function"==typeof akamaiHandleAdLoaded&&akamaiHandleAdLoaded(t)}catch(n){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]",n)}},i(ri,_e),ri.prototype.execute=function(e){try{"function"==typeof akamaiHandleAdStarted&&akamaiHandleAdStarted()}catch(t){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]",t)}},i(si,_e),si.prototype.execute=function(e){var t,i;t=e.getBody(),i=Math.round(t.currentTime/t.duration*100);try{i>=25&&this.proxy.percent<25?(this.facade.logger.debug("MediaAnalytics: First Quartile"),"function"==typeof akamaiHandleAdFirstQuartile&&akamaiHandleAdFirstQuartile()):i>=50&&this.proxy.percent<50?(this.facade.logger.debug("MediaAnalytics: Second Quartile"),"function"==typeof akamaiHandleAdMidpoint&&akamaiHandleAdMidpoint()):i>=75&&this.proxy.percent<75&&(this.facade.logger.debug("MediaAnalytics: Third Quartile"),"function"==typeof akamaiHandleAdThirdQuartile&&akamaiHandleAdThirdQuartile())}catch(n){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]",n)}this.proxy.percent=i},i(li,puremvc.SimpleCommand),li.prototype.execute=function(e){try{"function"==typeof akamaiHandleAdCompleted&&akamaiHandleAdCompleted()}catch(t){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]",t)}this.facade.player.getMediaElement().dataset.isad=!0},i(di,_e),di.prototype.execute=function(e){var t;t=e.getBody(),this.proxy.setDimensions(t)},i(ci,_e),ci.prototype.execute=function(e){this.proxy.updatedMedia(e.getBody())},i(ui,_e),ui.prototype.execute=function(e){return this.sendNotification(uo.PLAY_REQUEST),this.proxy.getStarted()===!1?void this.sendNotification(uo.START,!0):(this.proxy.play(),void this.facade.player.sendNotification(uo.CHANGE_PLAY_STATE,ho.PLAYING))},i(pi,_e),pi.prototype.execute=function(e){this.proxy.pause(),this.player.sendNotification(uo.CHANGE_PLAY_STATE,ho.PAUSED)},i(hi,ti),hi.prototype.execute=function(e){var t;t=this.proxy.getPaused()||this.proxy.getStarted()===!1?uo.PLAY:uo.PAUSE,this.sendNotification(t,!0)},i(gi,ti),gi.prototype.execute=function(e){this.proxy.setVolume(e.getBody()),gi.__super__.execute.call(this,e)},i(mi,ti),mi.prototype.execute=function(e){this.sendNotification(uo.PLAY_REQUEST),this.playback.initialized===!1&&this.player.sendNotification(uo.INITIALIZED),this.proxy.start(),this.player.sendNotification(uo.CHANGE_PLAY_STATE,ho.PLAYING),mi.__super__.execute.call(this,e)},i(fi,xt),fi.NAME="MediaAnalyticsWrapper",fi.prototype.flashPlugins=[{id:"OSMFCSMALoader",host:"osmf",main:"com.akamai.playeranalytics.osmf.OSMFCSMALoaderInfo",type:"application/x-shockwave-flash"}],fi.prototype.listNotificationInterests=function(){return fi.__super__.listNotificationInterests.call(this).concat([uo.MEDIA_CHANGE,lo.SET_DIMENSIONS])},fi.prototype.createFlashVars=function(e){var t,i,n,o,a;if(t=null!=(o=this.player.config)&&null!=(a=o.media)?a.mediaanalytics:void 0,null!=t)for(i in t)n=t[i],e["report_"+i]=n;return e},fi.prototype.createXML=function(e){var t,i,n,o,a,r,s,d,c,u;if(t=e.firstChild,a=e.getElementsByTagName("metrics")[0],null==a&&(a=e.createElement("metrics"),t.appendChild(a)),d=e.createElement("vendor"),d.setAttribute("id","akamai"),a.appendChild(d),null!=this.config.config&&(n=e.createElement("property"),n.setAttribute("key","MEDIA_ANALYTICS_BEACON"),n.appendChild(l.createTextContent(e,this.config.config)),d.appendChild(n),r=(null!=(c=this.config.plugin)?c.swf:void 0)||"http://79423.analytics.edgesuite.net/csma/plugin/csma.swf",n=e.createElement("property"),n.setAttribute("key","MEDIA_ANALYTICS_PLUGIN_PATH"),n.appendChild(l.createTextContent(e,r)),d.appendChild(n)),null!=this.config.dimensions){i=e.createElement("property"),i.setAttribute("key","dimensions"),d.appendChild(i),u=this.config.dimensions;for(o in u)s=u[o],n=e.createElement("property"),n.setAttribute("key",o),n.appendChild(l.createTextContent(e,s)),i.appendChild(n)}return e},fi.prototype.handleNotification=function(e){var t,i,n,o,a,r,s;switch(fi.__super__.handleNotification.call(this,e),o=e.getName(),t=e.getBody(),o){case uo.MEDIA_CHANGE:if(n=t,null!=(null!=(r=n.mediaanalytics)?r.dimensions:void 0)){n.dimensions=[],s=n.mediaanalytics.dimensions;for(i in s)a=s[i],n.dimensions.push({key:i,value:a})}break;case lo.SET_DIMENSIONS:this.setDimensions(t)}},fi.prototype.setDimensions=function(e){return this.player.mediaElement.setPlayerProperty("maDimensions",e),e};var bo={INITIALIZED:"ima/initialize",ADD_OVERLAY:"ima/addOverlay",REMOVE_OVERLAY:"ima/removeOverlay"};yi.prototype.id=null,yi.prototype.title=null,yi.prototype.duration=NaN,yi.prototype.position=NaN,yi.prototype.totalAds=NaN,yi.prototype.type=null,yi.prototype.partner=null,yi.prototype.advertiser=null,yi.prototype.companions=null,yi.prototype.metadata=null,yi.prototype.request=null,yi.prototype.error=null,i(_i,le),_i.prototype.configurationName="imaoverlay",_i.NAME="IMAOveralyProxy",_i.prototype.defaults={adTagUrl:null,duration:15,interval:30,delay:30},_i.prototype.durationTimer=null,_i.prototype.intervalTimer=null,_i.prototype.delayTimer=null,_i.prototype.stop=function(){clearTimeout(this.durationTimer),clearTimeout(this.delayTimer),clearTimeout(this.intervalTimer)},_i.prototype.play=function(){var e=this;this.stop(),this.delayTimer=setTimeout(function(){return e.requestAd()},1e3*this.value.delay)},_i.prototype.requestAd=function(){var e,t;e=this.getValue("adTagUrl"),null!=e&&(e=e.replace("[timestamp]",(new Date).getTime()),e=e.replace("__random-number__",(new Date).getTime())),t=Pt.get(e,{withCredentials:!0,onload:this.vastLoadHandler.bind(this),onerror:this.error.bind(this)},!1)},_i.prototype.vastLoadHandler=function(e){var t,i,n,o,a,r;if(r=e.target.responseXML,null!=r)try{t=r.querySelector("NonLinear"),
null!=t?(a=null!=r.querySelector("Impression")?r.querySelector("Impression").textContent:"",n=null!=r.querySelector("Tracking[event=creativeView]")?r.querySelector("Tracking[event=creativeView]").textContent:"",i=null!=t.querySelector("NonLinearClickThrough")?t.querySelector("NonLinearClickThrough").textContent:"",o={src:t.querySelector("StaticResource").textContent,width:t.getAttribute("width"),height:t.getAttribute("height"),tracking:[a,n],href:i},this.displayAd(o)):this.error("No overlay was returned")}catch(s){this.error(s)}},_i.prototype.error=function(e){this.facade.logger.error("[AMP IMA OVERLAY ERROR]",e),this.stop()},_i.prototype.displayAd=function(e){var t=this;this.sendNotification(bo.ADD_OVERLAY,e),this.durationTimer=setTimeout(function(){return t.sendNotification(bo.REMOVE_OVERLAY),t.intervalTimer=setTimeout(function(){return t.requestAd()},1e3*t.value.interval)},1e3*this.value.duration)},i(vi,be),vi.NAME=be.NAME,vi.prototype.inprogress=!1,vi.prototype.paused=!1,vi.prototype.started=!1,vi.prototype.adVO=null,vi.prototype.contextName="ad",vi.prototype.getContextData=function(){return this.adVO||{}},vi.prototype.setCompanions=function(e){return this.adVO.companions=e,this.sendNotification(Co.AD_COMPANION,this.adVO),e},vi.prototype.getCompanions=function(){var e;return null!=(e=this.adVO)?e.companions:void 0},vi.prototype.getInProgress=function(){return this.inprogress},vi.prototype.setInProgress=function(e){return this.inprogress=e,e},vi.prototype.getStarted=function(){return this.started},vi.prototype.setStarted=function(e){return this.started=e,e},vi.prototype.getPaused=function(){return this.paused},vi.prototype.setPaused=function(e){return this.paused=e,e},vi.prototype.play=function(){this.setPaused(!1),this.sendNotification(Co.AD_PLAY,this.adVO)},vi.prototype.pause=function(){this.setPaused(!0),this.sendNotification(Co.AD_PAUSE,this.adVO)},vi.prototype.breakStart=function(){this.setInProgress(!0)},vi.prototype.breakEnd=function(){this.setInProgress(!1),this.reset()},vi.prototype.error=function(e,t){var i;null==t&&(t=!0),i=("function"==typeof e.getMessage?e.getMessage():void 0)||e.message,this.facade.logger.error("[AMP AD ERROR]",""+i+" Skipping ad content.",e),null==this.adVO&&(this.adVO={}),this.adVO.error=e,this.sendNotification(Co.AD_ERROR,this.adVO),t===!0&&this.endBreak()},vi.prototype.engage=function(e){this.getEnabled()!==!1&&(this.setStarted(!1),this.getInProgress()&&(this.reset(),this.facade.player.sendNotification(uo.REMOVE_APPLICATION_STATE,"ad-mode")),this.engageAds())},vi.prototype.engageAds=function(){this.facade.player.removeCommand(uo.START),this.facade.player.removeCommand(uo.PLAY),this.facade.player.removeCommand(uo.PAUSE),this.facade.player.removeCommand(uo.ENDED),this.facade.player.removeCommand(go.PLAY),this.facade.player.removeCommand(go.PAUSE),this.facade.player.removeCommand(go.TOGGLE_PLAY_PAUSE),this.facade.isFullscreenDevice()&&this.facade.player.removeCommand(uo.CHANGE_DURATION),this.facade.removeCommand(uo.STARTED),this.facade.removeCommand(uo.ENDED),this.facade.registerCommand(uo.START,mi),this.facade.registerCommand(uo.PLAY,ui),this.facade.registerCommand(uo.PAUSE,pi),this.facade.registerCommand(go.PLAY,ui),this.facade.registerCommand(go.PAUSE,pi),this.facade.registerCommand(go.TOGGLE_PLAY_PAUSE,hi),this.facade.registerCommand(uo.VOLUME_CHANGE,gi)},vi.prototype.reset=function(){this.facade.removeCommand(uo.START),this.facade.removeCommand(uo.PLAY),this.facade.removeCommand(uo.PAUSE),this.facade.removeCommand(go.PLAY),this.facade.removeCommand(go.PAUSE),this.facade.removeCommand(go.TOGGLE_PLAY_PAUSE),this.facade.removeCommand(uo.VOLUME_CHANGE),this.facade.player.registerCommand(uo.START,D),this.facade.player.registerCommand(uo.PLAY,ne),this.facade.player.registerCommand(uo.PAUSE,_),this.facade.player.registerCommand(uo.ENDED,w),this.facade.player.registerCommand(go.PLAY,ne),this.facade.player.registerCommand(go.PAUSE,_),this.facade.player.registerCommand(go.TOGGLE_PLAY_PAUSE,g),this.facade.isFullscreenDevice()&&this.facade.player.registerCommand(uo.CHANGE_DURATION,Ue),this.facade.registerCommand(uo.STARTED,Qt),this.facade.registerCommand(uo.ENDED,ei)},vi.prototype.startBreak=function(){return this.setStarted(!0),this.sendNotification(Co.BREAK_START,this.adVO),this.getEnabled()===!1?(this.endBreak(),!1):!0},vi.prototype.endBreak=function(){this.sendNotification(Co.BREAK_END,this.adVO)},vi.prototype.start=function(){this.startBreak()},vi.prototype.contentPlay=function(){this.facade.player.sendNotification(uo.PLAY,!0)},vi.prototype.contentPause=function(){this.facade.player.mediaElement.pause()},vi.prototype.contentStarted=function(){},vi.prototype.contentSeek=function(e){},vi.prototype.contentEnded=function(){},vi.prototype.setVolume=function(e){},vi.prototype.getVolume=function(){},vi.prototype.terminateAd=function(){},vi.prototype.terminateAllAds=function(){},i(Ei,vi),Ei.NAME=vi.NAME,Ei.prototype.defaults={adTagUrl:null,overlay:null,width:null,height:null,maxBitrate:-1,ppid:null,companions:null},Ei.prototype.key="ima",Ei.prototype.intervals=null,Ei.prototype.adDisplayContainer=null,Ei.prototype.adDisplayContainerInitialized=!1,Ei.prototype.adsLoader=null,Ei.prototype.adsRenderingSettings=null,Ei.prototype.adsManagerLoaded=!1,Ei.prototype.adsManager=null,Ei.prototype.cuepoints=null,Ei.prototype.adLoaded=!1,Ei.prototype.playWhenLoaded=!1,Ei.prototype.contentHasEnded=!1,Ei.prototype.adTagUrl=null,Ei.prototype.viewMode=null,Ei.prototype.playbackCore=null,Ei.prototype.loadedmetadata=null,Ei.prototype.setEnabled=function(e){var t;return Ei.__super__.setEnabled.call(this,e),e===!1&&(null!=(t=this.adsManager)&&"function"==typeof t.destroy&&t.destroy(),this.getInProgress()&&this.contentPlay()),e},Ei.prototype.onLoadedMetadata=function(e){e.target.removeEventListener("loadedmetadata",this.loadedmetadata),this.canPlay()&&this.playWhenLoaded===!0&&this.startAd()},Ei.prototype.initialize=function(){},Ei.prototype.ready=function(){var e;this.viewMode=google.ima.ViewMode.NORMAL,window.addEventListener("resize",this.resize.bind(this)),null!=this.config.vpaidAllowed&&google.ima.settings.setVpaidAllowed(this.config.vpaidAllowed),null!=this.config.vpaidMode&&null!=(e=google.ima.ImaSdkSettings.VpaidMode[this.config.vpaidMode.toUpperCase()])&&google.ima.settings.setVpaidMode(e),this.adDisplayContainer=this.createPlugin(),this.adsLoader=new google.ima.AdsLoader(this.adDisplayContainer),this.adsRenderingSettings=new google.ima.AdsRenderingSettings,this.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoaded.bind(this),!1),this.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError.bind(this),!1)},Ei.prototype.createPlugin=function(){return new google.ima.AdDisplayContainer(this.facade.getViewComponent().container,null,this.facade.getViewComponent().adClickHandlerContainer)},Ei.prototype.engage=function(e){var t;null==e&&(e=!0),this.getEnabled()!==!1&&(Ei.__super__.engage.call(this),this.adsManagerLoaded===!0&&this.contentHasEnded===!1&&null!=(t=this.adsManager)&&"function"==typeof t.destroy&&t.destroy(),this.adsManagerLoaded=!1,this.contentHasEnded=!1,this.adsManagerLoaded=!1,this.playWhenLoaded=!1)},Ei.prototype.setVolume=function(e){var t;return null!=(t=this.adsManager)&&t.setVolume(e),e},Ei.prototype.getVolume=function(){var e;return null!=(e=this.adsManager)?e.getVolume():void 0},Ei.prototype.requestAd=function(){var e,t,i,n,o,a,r;return this.sendNotification(Co.REQUEST,this.adVO),o=this.facade.player.getViewComponent().clientWidth,i=this.facade.player.getViewComponent().clientHeight,e=new google.ima.AdsRequest,this.adTagUrl=this.getValue("adTagUrl"),t=this.getValue("adsResponse"),null!=t&&""!==t?e.adsResponse=Pt.read(t,null,Pt.mimeTypes.txt):e.adTagUrl=this.adTagUrl,null==e.adsResponse&&null==e.adTagUrl?void this.onAdError("No valid adTagUrl or adsResponse provided."):(e.linearAdSlotWidth=o,e.linearAdSlotHeight=i,e.nonLinearAdSlotWidth=(null!=(a=this.value.overlay)?a.width:void 0)||o,e.nonLinearAdSlotHeight=(null!=(r=this.value.overlay)?r.height:void 0)||i,n=this.adsLoader.getSettings(),null!=this.config.ppid&&n.setPpid(this.getValue("ppid")),void this.adsLoader.requestAds(e))},Ei.prototype.requestOverlay=function(){var e,t;t=this.value.overlay,null!=t&&(e=new google.ima.AdsRequest,e.adTagUrl=t.adTagUrl,e.nonLinearAdSlotWidth=t.width||300,e.nonLinearAdSlotHeight=t.height||50,this.adsLoader.requestAds(e))},Ei.prototype.start=function(){var e;return this.playbackCore=this.facade.player.retrieveProxy(mt.NAME).getActivePlaybackCore(),e=this.facade.player.getMediaElement(),this.playbackCore.setEnabled(!1),e.src=this.playbackCore.getSrc(),e.addEventListener("loadedmetadata",this.loadedmetadata),e.load(),Ei.__super__.start.call(this)===!1?!1:(this.adDisplayContainerInitialized!==!0&&(this.adDisplayContainer.initialize(),this.adDisplayContainerInitialized=!0),void(this.canPlay()===!0?this.startAd():(this.playWhenLoaded=!0,this.requestAd())))},Ei.prototype.canPlay=function(){return this.adsManagerLoaded===!0},Ei.prototype.startAd=function(){var e;this.playWhenLoaded=!1;try{e=this.facade.player.retrieveProxy(Ie.NAME).getVolume(),this.setVolume(e),null==this.viewMode&&(this.viewMode=google.ima.ViewMode.NORMAL),this.adsManager.init(this.facade.player.getViewComponent().clientWidth,this.facade.player.getViewComponent().clientHeight,this.viewMode),this.adsManager.start()}catch(t){this.error(t)}},Ei.prototype.resize=function(e){var t;null!=e&&(this.viewMode=e===yo.FULL_SCREEN?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),null!=(t=this.adsManager)&&t.resize(this.facade.player.getViewComponent().clientWidth,this.facade.player.getViewComponent().clientHeight,this.viewMode)},Ei.prototype.onAdsManagerLoaded=function(e){var t,i;this.adsRenderingSettings.bitrate=this.getValue("maxBitrate"),this.adsRenderingSettings.autoAlign=!0,this.adsRenderingSettings.useStyledNonLinearAds=!0,null!=(i=this.adsManager)&&"function"==typeof i.destroy&&i.destroy(),this.adsManager=e.getAdsManager(this.facade.player.mediaElement,this.adsRenderingSettings),this.facade.player.sendNotification(Co.AD_MANAGER_LOADED,{adManager:this.adsManager,viewMode:google.ima.ViewMode.NORMAL,adContainer:this.facade.getViewComponent()}),this.adsManagerLoaded=!0,this.cuePoints=this.adsManager.getCuePoints(),this.facade.player.sendNotification(uo.ADD_CUE_POINTS,this.cuePoints),t=this.onAdEvent.bind(this),this.adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.contentPause.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.contentPlay.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,t),this.adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,t),this.adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,t),this.adsManager.addEventListener(google.ima.AdEvent.Type.RESUME,this.onAdResumed.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.PAUSED,this.onAdPaused.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,t),this.adsManager.addEventListener(google.ima.AdEvent.Type.CLICK,this.onAdClick.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.IMPRESSION,t),this.adsManager.addEventListener(google.ima.AdEvent.Type.FIRST_QUARTILE,t),this.adsManager.addEventListener(google.ima.AdEvent.Type.MIDPOINT,t),this.adsManager.addEventListener(google.ima.AdEvent.Type.THIRD_QUARTILE,t),this.adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPED,t),this.facade.player.getConfig().debug===!0&&this.adsManager.addEventListener(google.ima.AdEvent.Type.LOG,t),this.canPlay()&&this.playWhenLoaded===!0&&this.startAd()},Ei.prototype.onAdClick=function(e){return(null!=e?e.getAd().isLinear():void 0)===!1?void this.facade.player.sendNotification(uo.PAUSE):void(this.getPaused()||this.pause())},Ei.prototype.onAdPaused=function(e){this.setPaused(!0),this.facade.player.sendNotification(uo.CHANGE_PLAY_STATE,ho.PAUSED),this.facade.player.sendNotification(uo.CHANGE_ACTIVE_STATE,vo.ACTIVE),this.facade.player.sendNotification(Co.AD_PAUSED,this.adVO)},Ei.prototype.onAdResumed=function(e){this.setPaused(!1),this.facade.player.sendNotification(uo.CHANGE_PLAY_STATE,ho.PLAYING)},Ei.prototype.onAdEvent=function(e){var t,i,n,o,a,r,s,l,d;switch(t=e.getAd(),null!=this.adVO&&(null!=t&&(t.wrapperAdIds="function"==typeof t.getWrapperAdIds?t.getWrapperAdIds():void 0,t.wrapperAdSystems="function"==typeof t.getWrapperAdSystems?t.getWrapperAdSystems():void 0),this.adVO.metadata=t),e.type){case google.ima.AdEvent.Type.IMPRESSION:this.sendNotification(Co.IMPRESSION,this.adVO);break;case google.ima.AdEvent.Type.LOADED:t.isLinear()?(a=t.getAdPodInfo().getPodIndex(),r=0===a?"preroll":-1===a?"postroll":"midroll",this.adVO=new yi(t.getAdId(),t.getAdId(),t.getDuration(),a,r,"ima",null,null,this.adTagUrl,t,t.getAdPodInfo().getTotalAds()),(!this.getInProgress()&&"midroll"===r||"postroll"===r)&&(this.startBreak(),this.engageAds()),this.sendNotification(Co.AD_LOADED,this.adVO),this.sendNotification(Co.AD_DURATION_CHANGE,this.adVO)):(this.facade.player.sendNotification(uo.ADD_APPLICATION_STATE,"ad-overlaymode"),this.contentPlay());break;case google.ima.AdEvent.Type.STARTED:t.isLinear()&&(this.adVO.position=t.getAdPodInfo().getAdPosition(),this.sendNotification(Co.AD_STARTED,this.adVO),this.intervals.push(setInterval(this.onAdTimeUpdate.bind(this),300)),this.facade.player.sendNotification(uo.CHANGE_PLAY_STATE,ho.PLAYING),this.sendNotification(Co.AD_PLAY,this.adVO));try{for(n=[],o=("function"==typeof this.getConfigurationData&&null!=(d=this.getConfigurationData())?d.companions:void 0)||[],s=0,l=o.length;l>s;s++)i=o[s],n=n.concat(t.getCompanionAds(i.width,i.height));(null!=n?n.length:void 0)>0&&this.setCompanions(n)}catch(c){this.facade.logger.error("[AMP IMA ERROR]","Could not retrieve companion ads:",c)}break;case google.ima.AdEvent.Type.COMPLETE:t.isLinear()&&this.sendNotification(Co.AD_ENDED,this.adVO);break;case google.ima.AdEvent.Type.FIRST_QUARTILE:this.sendNotification(Co.FIRST_QUARTILE,this.adVO);break;case google.ima.AdEvent.Type.MIDPOINT:this.sendNotification(Co.MIDPOINT,this.adVO);break;case google.ima.AdEvent.Type.THIRD_QUARTILE:this.sendNotification(Co.THIRD_QUARTILE,this.adVO);break;case google.ima.AdEvent.Type.LOG:this.sendNotification(Co.LOG,this.adVO);break;case google.ima.AdEvent.Type.SKIPPED:this.sendNotification(Co.SKIPPED,this.adVO);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:this.getInProgress()===!0&&this.endBreak()}},Ei.prototype.onAdTimeUpdate=function(e){var t;t=this.adsManager.getRemainingTime(),this.sendNotification(Co.AD_TIME_UPDATE,this.adVO.duration-t),this.sendNotification(Co.AD_TIME_REMAINING,t)},Ei.prototype.onAdError=function(e){var t;t=(null!=e&&"function"==typeof e.getError?e.getError():void 0)||e,this.error(t),this.contentPlay(!1)},Ei.prototype.play=function(){var e;Ei.__super__.play.call(this);try{null!=(e=this.adsManager)&&e.resume(),this.sendNotification(Co.AD_RESUME)}catch(t){this.facade.logger.error("[AMP IMA ERROR]","resume",t)}},Ei.prototype.pause=function(){Ei.__super__.pause.call(this);try{this.adsManager.pause()}catch(e){this.facade.logger.error("[AMP IMA ERROR]","pause",e)}},Ei.prototype.breakEnd=function(){var e,t,i,n,o;for(o=this.intervals,i=0,n=o.length;n>i;i++)e=o[i],clearInterval(this.intervals.pop());Ei.__super__.breakEnd.call(this),t=this.facade.retrieveProxy(_i.NAME),null!=t&&t.play()},Ei.prototype.setCompanions=function(e){var t,i,n,o,a;for(i=[],n=0,o=e.length;o>n;n++)t=e[n],i.push({data:t.getContent(),type:null!=(a=t.getContentType())?a.toLowerCase():void 0,width:t.getWidth(),height:t.getHeight(),metadata:t});return Ei.__super__.setCompanions.call(this,i),e},Ei.prototype.contentPause=function(){this.sendNotification(uo.DISABLE_VIDEO_EVENTS,["pause","ended","durationchange","error"]),Ei.__super__.contentPause.call(this)},Ei.prototype.contentPlay=function(){var e,t;return this.getInProgress()===!0&&this.endBreak(),this.sendNotification(uo.ENABLE_VIDEO_EVENTS,["pause","ended","durationchange","error"]),"postroll"===(null!=(e=this.adVO)?e.type:void 0)?void this.facade.player.sendNotification(uo.ENDED):(Ei.__super__.contentPlay.call(this),void("midroll"===(null!=(t=this.adVO)?t.type:void 0)&&"desktop"===Pt.getDevice()&&this.facade.player.setCurrentTime(Math.floor(this.facade.player.getCurrentTime()))))},Ei.prototype.contentEnded=function(){var e;this.contentHasEnded=!0;try{null!=(e=this.adsLoader)&&"function"==typeof e.contentComplete&&e.contentComplete()}catch(t){this.facade.logger.error("[AMP IMA ERROR]","contentComplete",t)}},Ei.prototype.terminateAd=function(){var e;try{null!=(e=this.adsManager)&&e.stop()}catch(t){this.facade.logger.error("[AMP IMA ERROR]","terminateAd",t)}this.endBreak(),this.contentPlay()},Ei.prototype.terminateAllAds=function(){var e;try{null!=(e=this.adsManager)&&e.destroy()}catch(t){this.facade.logger.error("[AMP IMA ERROR]","terminateAllAds",t)}this.endBreak(),this.contentPlay()},i(Ai,be),Ai.NAME=r.NAME,Ai.prototype.defaults={config:null,dimensions:null},Ai.prototype.ready=function(){try{window.akamaiSetVideoObject(this.facade.player.getMediaElement())}catch(e){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]","Could not set video tag",e)}},Ai.prototype.setDimensions=function(e){var t,i,n;t=this.configurationData.source.dimensions;for(i in e)n=e[i],null!=n&&(t[i]=n);return this.configurationData.parse(this.configurationData.source),this.applyDimensions(t),e},Ai.prototype.applyDimensions=function(e){var t,i;if(null!=window.setAkamaiMediaAnalyticsData)try{for(t in e)i=e[t],setAkamaiMediaAnalyticsData(t,i)}catch(n){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]","Could not set dimensions:",n)}},Ai.prototype.setMedia=function(e){var t,i;return t=null!=(null!=(i=e.mediaanalytics)?i.dimensions:void 0)?Pt.override(this.value.dimensions,e.mediaanalytics.dimensions):this.value.dimensions,this.applyDimensions(t),e},Ai.prototype.udpateMedia=function(e){return"function"==typeof akamaiHandleTitleSwitch&&akamaiHandleTitleSwitch(e),e},i(Ci,puremvc.SimpleCommand),Ci.prototype.execute=function(e){this.facade.retrieveProxy(Ai.NAME).ready()};var No={LOAD_FEED:"loadfeed",FEED_CHANGED:"feedchanged",FEED_LOADED:"feedloaded",FEED_ERROR:"feederror"};i(bi,Je),bi.prototype.moduleName="playoverlay",bi.prototype.createModel=function(){},bi.prototype.createView=function(){this.registerMediator(new Kt)},bi.prototype.listNotificationPublications=function(){return bi.__super__.listNotificationPublications.call(this).concat([go.TOGGLE_PLAY_PAUSE])},Xt.registerPlugin("playoverlay","html",bi),Xt.registerPlugin("playoverlay","external",bi),i(Ni,r),Ni.NAME=r.NAME,Ni.prototype.defaults={url:null,data:null},Ni.prototype.feed=null,Ni.prototype.helper=null,Ni.prototype.setURL=function(e){var t=this;return this.data.url=this.facade.evaluatePaths(e),this.sendNotification(uo.DISPATCH_EVENT,new At("request",this.data.url)),this.helper.getFeed(this.data.url,function(e){t.sendNotification(No.FEED_LOADED,e),t.sendNotification(No.CHANGE_FEED,e)},function(i){t.sendNotification(No.FEED_ERROR,{error:i,url:e}),bt.error("[AMP Feed Load Error]",t.data.url,i)}),e},Ni.prototype.getURL=function(){return this.data.url},Ni.prototype.setFeedData=function(e){return this.data.data=e,this.feed=this.helper.createFeed(e),this.sendNotification(No.FEED_CHANGED,this.feed),e},Ni.prototype.getFeedData=function(){return this.data.data},Ni.prototype.invoke=function(){null!=this.data.url&&""!==this.data.url?this.sendNotification(No.LOAD_FEED,this.data.url):null!=this.data.data&&setTimeout(this.sendNotification.bind(this,No.CHANGE_FEED,this.data.data),1)},i(Ii,puremvc.SimpleCommand),Ii.prototype.execute=function(e){var t;t=this.facade.retrieveProxy(Ni.NAME),t.setURL(e.getBody())},i(Pi,puremvc.SimpleCommand),Pi.prototype.execute=function(e){var t;t=this.facade.retrieveProxy(Ni.NAME),t.setFeedData(e.getBody())},i(Si,ti),Si.prototype.execute=function(e){var t,i;Si.__super__.execute.call(this,e),this.player.sendNotification(uo.CHANGE_PLAY_STATE,ho.READY),t=e.getBody(),i=t.item[0],this.player.sendNotification(uo.SET_MEDIA,i)},i(Ti,puremvc.SimpleCommand),Ti.prototype.execute=function(e){var t;t=this.facade.retrieveProxy(Ni.NAME),t.invoke()},i(wi,xt),wi.NAME="FeedWrapper",wi.prototype.url=null,wi.prototype.data=null,wi.prototype.updateData=!0,wi.prototype.createFlashVars=function(e){null!=this.url&&""!==this.url&&(e.data_feed_url=escape(this.facade.evaluatePaths(this.url)))},wi.prototype.listNotificationInterests=function(){return wi.__super__.listNotificationInterests.apply(this,arguments).concat([so.READY,so.FEED_LOADED,so.LOAD_FEED])},wi.prototype.handleNotification=function(e){var t,i,n,o,a,r,s,l=this;switch(wi.__super__.handleNotification.call(this,e),o=e.getName(),t=e.getBody(),o){case so.FEED_LOADED:this.updateData===!1?this.updateData=!0:this.data=JSON.parse(t),a="loaded",t=this.data,i=new Ct,n=null!=(r=i.createFeed(this.data))&&null!=(s=r.item)?s[0]:void 0,null!=n&&this.player.media.setData(n),this.sendNotification(No.FEED_CHANGED,this.data);break;case so.LOAD_FEED:a="request";break;case so.READY:null!=this.data?setTimeout(function(){l.setData(l.data)},25):null!=this.url&&""!==this.url&&this.sendNotification(No.LOAD_FEED,this.url)}null!=a&&this.dispatchEvent(new At(a,t))},wi.prototype.setURL=function(e){return null!=e&&""!==e&&(this.url=e,this.player.mediaElement.playFile(this.url,this.player.getAutoplay()),this.sendNotification(No.LOAD_FEED,this.url)),e},wi.prototype.getURL=function(){return this.url},wi.prototype.setData=function(e){return this.data=e,this.updateData=!1,this.player.mediaElement.playFile(this.data,this.player.getAutoplay()),e},wi.prototype.getData=function(){return this.data},i(Di,Je),Di.prototype.moduleName="mediaanalytics",Di.prototype.initialize=function(e,t){window.AKAMAI_MEDIA_ANALYTICS_CONFIG_FILE_PATH=e.config,Di.__super__.initialize.call(this,e,t)},Di.prototype.createModel=function(){this.proxy=new Ai(this.config),this.registerProxy(this.proxy)},Di.prototype.createController=function(){Di.__super__.createController.call(this),this.registerCommand(uo.READY,Ci),this.registerCommand(uo.MEDIA_CHANGE,ii),this.registerCommand(Co.BREAK_START,ni),this.registerCommand(Co.BREAK_END,oi),this.registerCommand(Co.AD_LOADED,ai),this.registerCommand(Co.AD_STARTED,ri),this.registerCommand(Co.AD_TIME_UPDATE,si),this.registerCommand(Co.AD_ENDED,li),this.registerCommand(lo.SET_DIMENSIONS,di),this.registerCommand(uo.CONTENT_CHANGED,ci)},Di.prototype.listNotificationInterests=function(){return[uo.READY,uo.MEDIA_CHANGE,Co.BREAK_START,Co.BREAK_END,Co.AD_LOADED,Co.AD_STARTED,Co.AD_TIME_UPDATE,Co.AD_ENDED,lo.SET_DIMENSIONS,uo.CONTENT_CHANGED]},Di.prototype.setDimensions=function(e){return this.retrieveProxy(Ai.NAME).setDimensions(e),e},Xt.registerPlugin("mediaanalytics","html",Di),Xt.registerPlugin("mediaanalytics","flash",fi),i(xi,xt),xi.NAME="InfoWrapper",xi.prototype.listNotificationInterests=function(){return[so.CREATE_FLASH_VARS,so.CREATE_XML,so.SHARE,so.SHARE_REQUEST]},xi.prototype.handleNotification=function(e){var t,i,n,o,a,r,s,d,c,u,p,h,g,m,f,y;switch(d=e.getName(),i=e.getBody(),d){case so.CREATE_FLASH_VARS:r=i.flashvars;break;case so.CREATE_XML:for(m=i.xml,t=m.firstChild,g=m.getElementsByTagName("view")[0],a=m.getElementsByTagName("element"),f=0,y=a.length;y>f;f++)if(o=a[f],"infoOverlayAdvanced"===o.getAttribute("id")){s=o;break}if(null==g)return;null==s&&(s=m.createElement("element"),s.setAttribute("id","infoOverlayAdvanced"),s.setAttribute("displayStates","preplay,paused,ns,fs,mouseover"),g.insertBefore(s,g.childNodes[0])),n=m.createElement("data"),s.appendChild(n),null!=this.config.title&&(c=m.createElement("property"),c.setAttribute("key","title"),p=l.createTextContent(m,this.config.title),c.appendChild(p),n.appendChild(c)),null!=this.config.description&&(c=m.createElement("property"),c.setAttribute("key","description"),p=l.createTextContent(m,this.config.description),c.appendChild(p),n.appendChild(c)),null!=this.config.more&&(c=m.createElement("property"),c.setAttribute("key","more"),p=l.createTextContent(m,this.config.more),c.appendChild(p),n.appendChild(c)),null!=this.config.less&&(c=m.createElement("property"),c.setAttribute("key","less"),p=l.createTextContent(m,this.config.less),c.appendChild(p),n.appendChild(c)),null!=this.config.provider&&(u=m.createElement("property"),u.setAttribute("key","provider"),n.appendChild(u),null!=this.config.provider.name&&(c=m.createElement("property"),c.setAttribute("key","name"),p=l.createTextContent(m,this.config.provider.name),c.appendChild(p),u.appendChild(c)),null!=this.config.provider.image&&(c=m.createElement("property"),c.setAttribute("key","image"),p=l.createTextContent(m,this.config.provider.image),c.appendChild(p),u.appendChild(c)));break;case so.SHARE:case so.SHARE_REQUEST:h="share"}return null!=h?this.dispatchEvent(new At(h,i)):void 0},Xt.registerPlugin("info","flash",xi),i(Mi,Z),Mi.prototype.initializeNotifier=function(e){Mi.__super__.initializeNotifier.call(this,e),this.plugin=this.facade.retrieveProxy(r.NAME),this.media=this.facade.player.retrieveProxy(ft.NAME)},Mi.prototype.onRegister=function(){Mi.__super__.onRegister.call(this),this.facade.viewComponent=this.viewComponent},i(Li,le),Li.prototype.configurationName="info",Li.NAME=r.NAME,Li.prototype.defaults={title:"#{media.title}",description:"#{media.description}",provider:{},more:"read more",less:"less"},i(ki,Mi),ki.prototype.componentName="info",ki.prototype.title=null,ki.prototype.shortDescription=null,ki.prototype.icon=null,ki.prototype.provider=null,ki.prototype.onRegister=function(){this.title=this.create("info-title"),this.provider=this.create("info-provider"),this.shortDescription=this.create("info-short-description"),this.icon=this.create("info-icon",this,"img"),this.dataChangedHandler(),ki.__super__.onRegister.call(this)},ki.prototype.listNotificationInterests=function(){return[uo.MEDIA_CHANGE]},ki.prototype.handleNotification=function(e){var t,i;switch(i=e.getName(),t=e.getBody(),i){case uo.MEDIA_CHANGE:this.dataChangedHandler()}},ki.prototype.moreClicked=function(e){return this.classList.add("open")},ki.prototype.closeClicked=function(e){return this.classList.remove("open")},ki.prototype.dataChangedHandler=function(){var e,t;return null!=this.plugin.value.title&&(this.title.textContent=this.plugin.value.title),null!=(null!=(t=this.plugin.value.provider)?t.image:void 0)&&(this.icon.src=this.plugin.value.provider.image),e=getComputedStyle(this.title),this.title.clientHeight>parseInt(e.lineHeight)?(this.classList.add("info-small"),void(this.shortDescription.innerHTML=this.provider.innerHTML="")):(this.classList.remove("info-small"),this.truncateDescription(this.plugin.value.description,this.plugin.value.more),void(this.provider.textContent=null!=this.plugin.value.provider.name?""+this.plugin.value.provider.name:""))},ki.prototype.truncateDescription=function(e){var t,i,n,o,a,r,s;if(i="...",o="",a=this.shortDescription,a.textContent="",null!=e)for(n=r=0,s=e.length;s>r;n=++r){if(t=e[n],a.textContent=o+t+i,a.scrollHeight>a.clientHeight){a.textContent=o+i;break}o+=t}},i(Ri,Je),Ri.prototype.moduleName="feed",Ri.prototype.createModel=function(){this.proxy=new Ni(this.config),this.registerProxy(this.proxy)},Ri.prototype.createController=function(){Ri.__super__.createController.call(this),this.registerCommand(uo.READY,Ti),this.registerCommand(No.LOAD_FEED,Ii),this.registerCommand(No.CHANGE_FEED,Pi),this.registerCommand(No.FEED_CHANGED,Si),this.registerCommand(No.FEED_LOADED,ti),this.registerCommand(No.FEED_ERROR,ti)},Ri.prototype.listNotificationInterests=function(){return Ri.__super__.listNotificationInterests.call(this).concat([uo.READY])},Ri.prototype.listNotificationPublications=function(){var e,t;return Ri.__super__.listNotificationPublications.call(this).concat(function(){var i;i=[];for(e in No)t=No[e],i.push(t);return i}())},Ri.prototype.setURL=function(e){return this.sendNotification(No.LOAD_FEED,e),e},Ri.prototype.getURL=function(){return this.proxy.getURL()},Ri.prototype.setData=function(e){return this.sendNotification(No.CHANGE_FEED,e),e},Ri.prototype.getData=function(){return this.proxy.getFeedData()},Xt.registerPlugin("feed","html",Ri),Xt.registerPlugin("feed","flash",wi),Oi.prototype.id=null,Oi.prototype.startTime=null,Oi.prototype.endTime=null,Oi.prototype.text=null,Oi.prototype.html=null,Oi.prototype.align=null;var Io={REGISTER_FEATURE:"registerfeature"};Vi.prototype.parse=function(e,t){var i,n,o,a,r,s,l,d,c,u,p;for(t=t.replace(/\r/g,""),n=t.split("\n\n"),u=0,p=n.length;p>u;u++){i=n[u],s=i.split("\n");try{r=s[0],c=s[1].match(/([0-9:\,]+)\s*-->\s*([0-9:\,]+)/).slice(1),l=Pt.flattenTimecode(c[0]),a=Pt.flattenTimecode(c[1]),d=s.slice(2)}catch(h){bt.warn("SRT Parsing Warning")}o=new Oi(l,a,"cue_"+r),o.html="<p>"+d.join("<br />")+"</p>",o.text=d.join("\n"),e.cues.push(o)}return e},Gi.prototype.parse=function(e,t){var i,n,o,a,r;return"string"==typeof t&&(t=l.parse(t)),a=Array.prototype.slice.call(t.querySelectorAll("styling style")),a.forEach(function(t,i,n){var o,a,r;r="",a=t.getAttribute("id")||t.getAttribute("xml:id"),o=Array.prototype.slice.call(t.attributes),o.forEach(function(e,t,i){return"tts"===e.prefix?r+=Pt.formatStyleName(e.localName)+":"+e.nodeValue+";":void 0}),e.styles[a]=r}),o=Array.prototype.slice.call(t.querySelectorAll("body [style]")),o.forEach(function(t,i,n){var o;o=t.getAttribute("style"),t.setAttribute("style",e.styles[o])}),r=t.querySelector("tt"),n=r.getAttribute("lang")||r.getAttribute("xml:lang"),(void 0===e.language||null===e.language)&&(e.language=n),i=Array.prototype.slice.call(t.querySelectorAll("body p[begin]")),i.forEach(function(t,n,o){var a,r,s,d,c;d=t.getAttribute("begin"),t.removeAttribute("begin"),null!=t.getAttribute("end")?(s=t.getAttribute("end"),t.removeAttribute("end")):null!=i[n+1]&&(s=i[n+1].getAttribute("begin")),r=new Oi(Pt.flattenTimecode(d),Pt.flattenTimecode(s),"cue_"+n),a=t.getAttributeNS("http://www.w3.org/ns/ttml#styling","textAlign"),null!=a&&(r.align="center"===a?"middle":a,t.removeAttributeNS("http://www.w3.org/ns/ttml#styling","textAlign")),c=l.serialize(t),c=c.replace(/\s*xmlns="[^"]*"/,""),r.html=c,c=c.replace(/^<p[^>]*>/,""),c=c.replace(/<\/p>$/,""),c=c.replace(/<br\/>/,"\n"),c=c.replace(/<span style="([^"]*)"/,"<c.$1"),c=c.replace(/<\/span>/,"</c>"),r.text=c,e.cues.push(r)}),e},i(Ui,Je),Ui.prototype.moduleName="info",Ui.prototype.createModel=function(){this.registerProxy(new Li(this.config))},Ui.prototype.createView=function(){this.registerMediator(new ki)},Ui.prototype.listNotificationInterests=function(){return[uo.MEDIA_CHANGE]},Xt.registerPlugin("info","html",Ui),Xt.registerPlugin("info","external",Ui),i(Bi,puremvc.Proxy),Bi.NAME="LiveCaptionProxy",Bi.prototype.data={base:"http://test.plymedia.com.s3.amazonaws.com/online/Akamai_",interval:1e3},Bi.prototype.caption=null,Bi.prototype.head=null,Bi.prototype.script=null,Bi.prototype.timeout=null,Bi.prototype.getURL=function(){return this.data.url},Bi.prototype.setURL=function(e){return this.data.url=e,e},Bi.prototype.start=function(){this.send()},Bi.prototype.poll=function(){var e,t=this;e=setTimeout(function(){t.send()},this.data.interval||1e3)},Bi.prototype.send=function(){null!=this.script&&this.head.removeChild(this.script),this.script=Pt.loadScript(this.data.base+this.data.url+".js?nocache="+Date.now())},Bi.prototype.stop=function(){clearTimeout(timeout)},Bi.prototype.parse=function(e){var t,i,n,o,a;if(e.Stream===this.data.url&&!(null!=this.caption&&this.caption.id>=e.Ticks)){for(this.caption=new Oi(Pt.flattenTimecode(e.From),Pt.flattenTimecode(e.To),e.Ticks),this.caption.text=e.Text,t="",a=e.Text.split("\n"),n=0,o=a.length;o>n;n++)i=a[n],""!==t&&(t+="<br />"),t+="<span>"+i+"</span>";return this.caption.html="<p>"+t+"</p>",this.sendNotification(So.CUE_CHANGE,[this.caption]),
this.caption}},CaptionParsers={"application/ttml+xml":new Gi,"application/x-subrip":new Vi,undefined:new Gi},i(Hi,_e),Hi.prototype.execute=function(e){var t,i,o,a,r,s,l,d,c;if(s=e.getBody(),l=this.proxy.getTrack(),null!=l){for(t=l.activeCues,a=l.cues,i=!1,d=0,c=a.length;c>d;d++)o=a[d],s>=o.startTime&&s<o.endTime?n.call(t,o)>=0||(t.push(o),i=!0):(r=t.indexOf(o),-1!==r&&(t.splice(r,1),i=!0));i===!0&&this.sendNotification(So.CUE_CHANGE,t)}},i(Fi,_e),Fi.prototype.execute=function(e){var t;t=e.getBody().track,null!=t&&(this.proxy.setTracks(t),this.sendNotification(So.ENABLED,!0))},i(ji,ti),ji.prototype.execute=function(e){this.proxy.setHidden(!e.getBody()),ji.__super__.execute.call(this,e)};var Po={SETTING_CHANGE:"settingchange",UPDATE_SETTINGS:"updatesettings"};i(zi,puremvc.SimpleCommand),zi.prototype.execute=function(e){var t,i,n;t=this.facade.retrieveProxy(qi.NAME),i=t.getTrack(),null==i&&(null!=(n=t.getTracks())?n.length:void 0)>0&&(i=t.autoSelectTrack()),(null!=i?i.isLive:void 0)===!0&&(this.facade.removeCommand(uo.TIME_UPDATE),t=this.facade.retrieveProxy(Bi.NAME),null==t&&(t=new Bi,this.facade.registerProxy(t)),t.setURL(i.src),t.start())};var So={VISIBILITY_CHANGE:"captioningvisibilitychange",ENABLED:"captioningenabled",TRACKS_LOADED:"captioningtracksloaded",TRACK_SELECTED:"captioningtrackselected",CUE_CHANGE:"captioningcuechange",SETTINGS_VISIBILITY_CHANGE:"captioningsettingsvisibility",TOGGLE_SETTINGS_VISIBILITY:"togglesettingsvisibility",SETTINGS_CHANGE:"captioningsettingschange"};Wi.prototype.kind=null,Wi.prototype.src=null,Wi.prototype.language=null,Wi.prototype.cues=null,Wi.prototype.label=null,Wi.prototype.activeCues=null,Wi.prototype.type=null,Wi.prototype.styles=null,Wi.prototype.isLive=!1,i(Yi,xt),Yi.NAME="CaptioningWrapper",Yi.prototype.flashPlugins=[{id:"AdobeCaptionPlugin",src:"#{paths.resources}plugins/AdobeCaptionPlugin.swf",blocking:!1,host:"akamai",main:"AdobeCaptionPlugin",type:"application/x-shockwave-flash"},{id:"AMPCaptionPlugin",src:"#{paths.resources}plugins/AMPCaptionPlugin.swf",blocking:!1,host:"akamai",main:"AMPCaptionPlugin",type:"application/x-shockwave-flash"},{id:"CaptionSettingsPlugin",src:"#{paths.resources}plugins/CaptionSettingsPlugin.swf",blocking:!1,host:"akamai",main:"CaptionSettingsPlugin",type:"application/x-shockwave-flash"}],Yi.prototype.hidden=!0,Yi.prototype.createXML=function(e){var t,i,n,o;if(n=null!=(o=this.config.flash)?o.subply:void 0,null!=n)try{null!=n.timeMethod&&(i=e.getElementsByTagName("player")[0],i.setAttribute("subply_time_method",n.timeMethod)),null!=n.plugin&&(t=e.firstChild,n=e.getElementsByTagName("subply")[0],null==n&&(n=e.createElement("subply"),t.appendChild(n)),this.createProperty(e,"SUBPLY_URL",this.config.flash.subply.plugin,n))}catch(a){this.facade.logger.error("[AMP CAPTIONING ERROR]",a)}},Yi.prototype.createFlashVars=function(e){var t,i,n,o,a,r,s,l;if(n=this.player.config,null!=(null!=(s=n.media)?s.track:void 0)){if(o=Pt.selectTrack(n.media.track,"captions"),null!=o.src&&""!==o.src&&(e.caption_url=o.src),n.media.track.length>1){for(i=[],t=[],l=n.media.track,a=0,r=l.length;r>a;a++)o=l[a],i.push(o.src),t.push(o.srclang);e.caption_url=i.join(","),e.caption_language=t.join(",")}e.caption_type=null!=o.type?encodeURIComponent(o.type):"application/ttml+xml"}},Yi.prototype.listNotificationInterests=function(){return Yi.__super__.listNotificationInterests.apply(this,arguments).concat([uo.MEDIA_CHANGE,so.CAPTIONING_REQUEST,so.CAPTION_LANG_CHANGE])},Yi.prototype.handleNotification=function(e){var t,i,n,o,a;switch(Yi.__super__.handleNotification.call(this,e),n=e.getName(),t=e.getBody(),n){case so.CAPTION_LANG_CHANGE:a="";break;case so.CAPTIONING_REQUEST:a="visibilitychange",t=t.enabled,this.hidden=!t;break;case uo.MEDIA_CHANGE:i=t,null!=i.track&&(o=Pt.selectTrack(i.track,"captions"),null!=(null!=o?o.src:void 0)&&""!==o.src&&(i.captioningUrl=o.src),i.captioningType=o.type||"application/ttml+xml")}null!=a&&""!==a&&this.dispatchEvent(new At(a,t))},Yi.prototype.getHidden=function(){return this.hidden},Yi.prototype.setHidden=function(e){return this.hidden=e,this.facade.getMediaElement().setPlayerProperty("captionDisplay",{visible:!e}),e},Yi.prototype.selectTrackByIndex=function(e){},Yi.prototype.selectTrackByLanguage=function(e){this.facade.getMediaElement().setTrackByLanguage(e)},Yi.prototype.changeSettings=function(e){this.hidden=!e.visible,this.facade.getMediaElement().setPlayerProperty("captionDisplay",{visible:e.visible,style:this.parseObject(e)})},Yi.prototype.parseObject=function(e){var t,i,n,o;t={};try{for(n in e)switch(n){case"fontFamily":t.font=e[n];break;case"fontColor":case"backgroundColor":case"edgeColor":case"windowColor":i="fontColor"===n?"font":"backgroundColor"===n?"fontBG":"edgeColor"===n?"edge":"window",-1!==(null!=(o=e[n])?o.indexOf("rgba"):void 0)&&(t[i+"Color"]=this.parseRGBA(e[n]),t[i+"Opacity"]=e[n].replace(/^.*,(.+)\)/,"$1"));break;default:t[n]=e[n]}delete e.visible}catch(a){this.facade.logger.error("Captioning Settings Parse Error",a)}return t},Yi.prototype.parseRGBA=function(e){return e=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i),e&&4===e.length?"0x"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2):""},Xt.registerPlugin("captioning","flash",Yi),i(qi,be),qi.NAME=r.NAME,qi.prototype.defaults={},qi.prototype.hidden=!0,qi.prototype.tracks=null,qi.prototype.track=null,qi.prototype.activeCaptions=null,qi.prototype.captions=null,qi.prototype.loaded=!0,qi.prototype.useNative=function(){var e;return null!=this.facade.player.mediaElement.textTracks&&3===(null!=(e=window.TextTrackCue)?e.length:void 0)},qi.prototype.getTracks=function(){return this.tracks},qi.prototype.setTracks=function(e){var t,i,n,o,a,r,s,l=this;for(this.tracks=[],this.track=null,t=e.length,n=0,a=function(){n++,n===t&&(l.sendNotification(So.TRACKS_LOADED,l.tracks),l.autoSelectTrack())},r=0,s=e.length;s>r;r++)i=e[r],o=new Wi(i,a),this.tracks.push(o);return e},qi.prototype.getTrack=function(){return this.track},qi.prototype.setTrack=function(e){return this.track=e,this.captions=this.track.cues,this.activeCaptions=[],this.sendNotification(So.TRACK_SELECTED,this.track),e},qi.prototype.selectTrackByIndex=function(e){var t;return e>=0&&e<this.tracks.length&&(t=this.tracks[e],this.setTrack(t)),t},qi.prototype.selectTrackByLanguage=function(e){var t,i,n,o,a;for(a=this.tracks,n=0,o=a.length;o>n;n++)if(t=a[n],t.language===e){i=t;break}return null!=i&&this.setTrack(i),i},qi.prototype.getHidden=function(){return this.hidden},qi.prototype.setHidden=function(e){return this.hidden=e,e},qi.prototype.autoSelectTrack=function(){var e,t,i;return e=null!=(i=this.facade.player.retrieveProxy(lt.NAME))?i.getLanguage():void 0,null!=e&&(e=e.split("-").shift(),t=this.selectTrackByLanguage(e)),null==t&&(t=this.tracks[0],this.setTrack(t)),t},i(Zi,q),Zi.prototype.componentName="captioning-settings",Zi.prototype.captioningObject={"default":{fontFamily:"Arial,sans-serif",size:"1.3em",scroll:"popout",fontColor:"rgba(255,255,255,1)",edgeType:null,edgeColor:"rgba(0, 0, 0, 0)",backgroundColor:"rgba(0,0,0,0)",windowColor:"rgba(0,0,0,0.5)"},appliedStyleText:"",selected:{fontFamily:null,size:null,fontColor:null,edgeType:null,edgeColor:null,backgroundColor:null,windowColor:null},preset1:{fontFamily:"Arial,sans-serif",size:"1.3em",fontColor:"rgba(255,255,255,1)",edgeType:null,edgeColor:"rgba(0, 0, 0, 0)",backgroundColor:"rgba(0,0,0,0)",windowColor:"rgba(0,0,0,0)"},preset2:{fontFamily:"Arial,sans-serif",size:"1.3em",fontColor:"rgba(255,255,0,1)",edgeType:null,edgeColor:"rgba(0, 0, 0, 0)",backgroundColor:"rgba(0,0,0,0)",windowColor:"rgba(0,0,0,0)"},preset3:{fontFamily:"Arial,sans-serif",size:"1.3em",fontColor:"rgba(255,255,255,1)",edgeType:null,edgeColor:"rgba(0, 0, 0, 0)",backgroundColor:"rgba(0,0,0,1)",windowColor:"rgba(0,0,0,0)"},preset4:{fontFamily:"Arial,sans-serif",size:"1.3em",fontColor:"rgba(255,255,0,1)",edgeType:null,edgeColor:"rgba(0, 0, 0, 1)",backgroundColor:"rgba(0,0,0,0)",windowColor:"rgba(0,0,0,0.5)"},instance:null},Zi.prototype.captionText=null,Zi.prototype.settingsUiVisible=!1,Zi.prototype.captionningStyle=null,Zi.prototype.swatchColorCurr=null,Zi.prototype.swatchOpacityCurr=null,Zi.prototype.colorPicker=null,Zi.prototype.colorPickerOpacity=null,Zi.prototype.advancedSettingContainer=null,Zi.prototype.list={font:null,language:null,edge:null,size:null,scroll:null},Zi.prototype.picker={color:null,background:null,edge:null,window:null},Zi.prototype.toggle={ON:null,OFF:null,disabled:!1},Zi.prototype.scroll={type:"popout",typeSpeed:5,lines:2,scrollTimer:[],speed:10,popout:null,rollup:null,painton:null},Zi.prototype.onRegister=function(){var e,t,i,n,o,a,r,s,l,d,c,u,p,h,g,m,f,y,_,v,E,A=this;for(this.captionText=this.create("caption-text",this.viewComponent.parentElement),f=this.create("captioning-titlebar"),y=this.create("captioning-title",f,"span",this.localizationManager.getString(Q.MSG_CC_TITLE)),this.toggle.OFF=this.create("captioning-toggle-btn",f,"div","OFF"),this.toggle.ON=this.create("captioning-toggle-btn",f,"div","ON"),ht.create(this.toggle.ON,ht.CLICK,function(e){return e.stopImmediatePropagation(),A.toggle.disabled||A.toggleButtonHandler(!0),!1}),this.toggle.disabled||this.classList.add("captioning-floater-btnselected",this.toggle.OFF),ht.create(this.toggle.OFF,ht.CLICK,function(e){return e.stopImmediatePropagation(),A.toggle.disabled||A.toggleButtonHandler(!1),!1}),i=this.create("captioning-row"),n=this.create("captioning-label",i,"span",this.localizationManager.getString(Q.MSG_CC_LANGUAGE)),this.list.language=this.create("captioning-dropdown",i,"select"),this.languageListPopulate(),ht.create(this.list.language,"change",function(e){var t;return e.stopImmediatePropagation(),t="None"!==e.target.selectedValue,A.sendNotification(So.VISIBILITY_CHANGE,t),t&&A.facade.setTrack(A.facade.selectTrackByIndex(e.target.selectedIndex)),!1}),n=this.create("captioning-label",i,"span",this.localizationManager.getString(Q.MSG_CC_PRESETS)),l=this.create(["captioning-preset","captioning-preset1"],i,null,"Aa"),d=this.create(["captioning-preset","captioning-preset2"],i,null,"Aa"),c=this.create(["captioning-preset","captioning-preset3"],i,null,"Aa"),u=this.create(["captioning-preset","captioning-preset4"],i,null,"Aa"),ht.create(l,ht.CLICK,function(e){return e.stopImmediatePropagation(),A.captioningObject.selected=A.cloneObject(A.captioningObject.preset1),A.applyCaptioningStyle(),!1}),ht.create(d,ht.CLICK,function(e){return e.stopImmediatePropagation(),A.captioningObject.selected=A.cloneObject(A.captioningObject.preset2),A.applyCaptioningStyle(),!1}),ht.create(c,ht.CLICK,function(e){return e.stopImmediatePropagation(),A.captioningObject.selected=A.cloneObject(A.captioningObject.preset3),A.applyCaptioningStyle(),!1}),ht.create(u,ht.CLICK,function(e){return e.stopImmediatePropagation(),A.captioningObject.selected=A.cloneObject(A.captioningObject.preset4),A.applyCaptioningStyle(),!1}),this.advancedSettingContainer=this.create("captioning-advanced-container"),i=this.create("captioning-row",this.advancedSettingContainer),n=this.create("captioning-label",i,"span",this.localizationManager.getString(Q.MSG_CC_FONT)),this.list.font=this.create("captioning-dropdown",i,"select"),this.create(null,this.list.font,"option","Monospaced Serif").value="'Courier New', Courier, 'Nimbus Mono L', 'Cutive Mono', monospace",this.create(null,this.list.font,"option","Proportional Serif").value="'Times New Roman', Times, Georgia, Cambria, 'PT Serif Caption', serif",this.create(null,this.list.font,"option","Monospaced Sans-Serif").value="'Deja Vu Sans Mono', 'Lucida Console', Monaco, Consolas, 'PT Mono', monospace",this.create(null,this.list.font,"option","Proportional Sans-Serif").value="Roboto, 'Arial Unicode Ms', Arial, Helvetica, Verdana, 'PT Sans Caption', sans-serif",this.create(null,this.list.font,"option","Casual").value="'Comic Sans MS', Impact, Handlee, fantasy",this.create(null,this.list.font,"option","Cursive").value="'Monotype Corsiva', 'URW Chancery L', 'Apple Chancery', 'Dancing Script', cursive",this.create(null,this.list.font,"option","Small Capitals").value="'Arial Unicode Ms', Arial, Helvetica, Verdana, 'Marcellus SC', sans-serif; font-variant: small-caps",ht.create(this.list.font,"change",function(e){return e.stopImmediatePropagation(),A.captioningObject.selected.fontFamily=e.target.value,A.applyCaptioningStyle(!1),!1}),i.appendChild(this.list.font),n=this.create("captioning-label",i,"span",this.localizationManager.getString(Q.MSG_CC_EDGE)),this.list.edge=this.create("captioning-dropdown",i,"select"),this.create(null,this.list.edge,"option","None").value="none",this.create(null,this.list.edge,"option","Depressed").value="text-shadow: 0px 1px 0px",this.create(null,this.list.edge,"option","Left Drop Shadow").value="text-shadow: -3px 3px 2px",this.create(null,this.list.edge,"option","Raised").value="text-shadow: 0px 1px 1px",this.create(null,this.list.edge,"option","Right Drop Shadow").value="text-shadow: 3px 3px 2px",this.create(null,this.list.edge,"option","Uniform").value="text-shadow: 0px 0px 4px",ht.create(this.list.edge,"change",function(e){return e.stopImmediatePropagation(),A.captioningObject.selected.edgeType=e.target.value,A.applyCaptioningStyle(!1),!1}),i=this.create("captioning-row",this.advancedSettingContainer),this.create("captioning-label",i,"span",this.localizationManager.getString(Q.MSG_CC_SIZE)),this.list.size=this.create("captioning-dropdown",i,"select"),this.create(null,this.list.size,"option","Small").value=".8em",this.create(null,this.list.size,"option","Medium").value="1.3em",this.create(null,this.list.size,"option","Large").value="2.3em",this.list.size.selectedIndex=1,ht.create(this.list.size,"change",function(e){return e.stopImmediatePropagation(),A.captioningObject.selected.size=e.target.value,A.applyCaptioningStyle(!1),!1}),this.create("captioning-label",i,"span",this.localizationManager.getString(Q.MSG_CC_SCROLL)),this.list.scroll=this.create("captioning-dropdown",i,"select"),this.create(null,this.list.scroll,"option","Pop-Out").value="popout",this.create(null,this.list.scroll,"option","Roll-On").value="rollon",this.create(null,this.list.scroll,"option","Paint-On").value="painton",ht.create(this.list.scroll,"change",function(e){return e.stopImmediatePropagation(),A.captioningObject.selected.scroll=e.target.value,A.scroll.type=e.target.value,"painton"===e.target.value?A.captionText.classList.add("akamai-captioning-typed"):A.captionText.classList.remove("akamai-captioning-typed"),!1}),i=this.create("captioning-row",this.advancedSettingContainer),this.create("captioning-label-small",i,"span",this.localizationManager.getString(Q.MSG_CC_COLOR)),this.picker.color=this.create("captioning-color-picker",i),this.picker.color.style.backgroundColor=this.captioningObject["default"].fontColor,ht.create(this.picker.color,ht.CLICK,function(e){var t,i;return e.stopImmediatePropagation(),A.colorPicker.style.display="block"===A.colorPicker.style.display?"none":"block","block"===A.colorPicker.style.display&&(null!=(i=A.swatchColorCurr)&&(i.style.borderColor="rgba(0,0,0,0.3)"),A.colorPicker.style.left="152px",A.colorPicker.name="fontColor",A.captioningObject.instance=A.picker.color,-1!==A.picker.color.style.backgroundColor.indexOf("rgba")&&(t=A.picker.color.style.backgroundColor.replace(/^rgba?\(|\s+|\)$/g,"").split(",")[3]),A.colorPickerOpacity.value=null!=t?t:1),!1}),this.create("captioning-label-small",i,"span",this.localizationManager.getString(Q.MSG_CC_BACKGROUND)),this.picker.background=this.create("captioning-color-picker",i),this.picker.background.style.backgroundColor=this.captioningObject["default"].backgroundColor,ht.create(this.picker.background,ht.CLICK,function(e){var t,i;return e.stopImmediatePropagation(),A.colorPicker.style.display="block"===A.colorPicker.style.display?"none":"block","block"===A.colorPicker.style.display&&(null!=(i=A.swatchColorCurr)&&(i.style.borderColor="rgba(0,0,0,0.3)"),A.colorPicker.style.left="264px",A.colorPicker.name="backgroundColor",A.captioningObject.instance=A.picker.background,-1!==A.picker.background.style.backgroundColor.indexOf("rgba")&&(t=A.picker.background.style.backgroundColor.replace(/^rgba?\(|\s+|\)$/g,"").split(",")[3]),A.colorPickerOpacity.value=null!=t?t:1),!1}),this.create("captioning-label-small",i,"span",this.localizationManager.getString(Q.MSG_CC_EDGE)),this.picker.edge=this.create("captioning-color-picker",i),this.picker.edge.style.backgroundColor=this.captioningObject["default"].edgeColor,ht.create(this.picker.edge,ht.CLICK,function(e){var t,i;return e.stopImmediatePropagation(),A.colorPicker.style.display="block"===A.colorPicker.style.display?"none":"block","block"===A.colorPicker.style.display&&(null!=(i=A.swatchColorCurr)&&(i.style.borderColor="rgba(0,0,0,0.3)"),A.colorPicker.style.left="212px",A.colorPicker.name="edgeColor",A.captioningObject.instance=A.picker.edge,-1!==A.picker.edge.style.backgroundColor.indexOf("rgba")&&(t=A.picker.edge.style.backgroundColor.replace(/^rgba?\(|\s+|\)$/g,"").split(",")[3]),A.colorPickerOpacity.value=null!=t?t:1),!1}),this.create("captioning-label-small",i,"span",this.localizationManager.getString(Q.MSG_CC_WINDOW)),this.picker.window=this.create("captioning-color-picker",i),this.picker.window.style.backgroundColor=this.captioningObject["default"].windowColor,ht.create(this.picker.window,ht.CLICK,function(e){var t,i;return e.stopImmediatePropagation(),A.colorPicker.style.display="block"===A.colorPicker.style.display?"none":"block","block"===A.colorPicker.style.display&&(null!=(i=A.swatchColorCurr)&&(i.style.borderColor="rgba(0,0,0,0.3)"),A.colorPicker.style.left="300px",A.colorPicker.name="windowColor",A.captioningObject.instance=A.picker.window,-1!==A.picker.window.style.backgroundColor.indexOf("rgba")&&(t=A.picker.window.style.backgroundColor.replace(/^rgba?\(|\s+|\)$/g,"").split(",")[3]),A.colorPickerOpacity.value=null!=t?t:1),!1}),p=this.create(["caption-text","caption-text-preview"]),h=this.create(null,p,"p","Lorem ipsum dolor sit amet"),i=this.create("captioning-footer-container"),e=this.create("captioning-footer-button",i,"div",this.localizationManager.getString(Q.MSG_CC_APPLY)),t=this.create("captioning-footer-button",i,"div",this.localizationManager.getString(Q.MSG_CC_CANCEL)),g=this.create("captioning-footer-button",i,"div",this.localizationManager.getString(Q.MSG_CC_RESET)),this.facade.getViewComponent().clientWidth>=0&&(_=this.create("captioning-advanced-button",i,"div",this.localizationManager.getString(Q.MSG_CC_SHOW_ADVANCED)),ht.create(_,ht.CLICK,function(e){return e.stopImmediatePropagation(),"block"===A.advancedSettingContainer.style.display?(e.target.innerHTML=A.localizationManager.getString(Q.MSG_CC_SHOW_ADVANCED),A.advancedSettingContainer.style.display="none",A.colorPicker.style.display="none"):(e.target.innerHTML=A.localizationManager.getString(Q.MSG_CC_HIDE_ADVANCED),A.advancedSettingContainer.style.display="block"),!1})),ht.create(e,ht.CLICK,function(e){e.stopImmediatePropagation();try{localStorage.setItem(mo.PREFIX+"captioningDefault",JSON.stringify(A.captioningObject.selected))}catch(t){A.facade.logger.error("LocalStorage Not Supported on this Browser",t)}return A.sendNotification(So.SETTINGS_VISIBILITY_CHANGE,A.settingsUiVisible),A.applyCaptioningStyle(!1,!0),A.sendNotification(So.SETTINGS_CHANGE,A.captioningObject.selected),!1}),ht.create(t,ht.CLICK,function(e){return e.stopImmediatePropagation(),A.sendNotification(So.SETTINGS_VISIBILITY_CHANGE,A.settingsUiVisible),!1}),ht.create(g,ht.CLICK,function(e){return e.stopImmediatePropagation(),A.colorPicker.style.display="none",A.applyCaptioningStyle(!0),!1}),this.captionningStyle=this.create(null,document.getElementsByTagName("head")[0],"style"),this.captionningStyle.type="text/css",r=["#000000","#660000","#990000","#ff0000","#000066","#660066","#990066","#ff0066","#006600","#666600","#996600","#ff6600","#006666","#666666","#996666","#ff6666","#009900","#669966","#999900","#ff9900","#009966","#669966","#999966","#ff9966","#00ff00","#66ff00","#99ff00","#ffff00","#00ff66","#66ff66","#99ff66","#ffff66","#000099","#660099","#990099","#ff0099","#0000ff","#6600ff","#9900ff","#ff00ff","#006699","#666699","#996699","#ff6699","#0066ff","#6666ff","#9966ff","#ff66ff","#009999","#669999","#999999","#ff9999","#0099ff","#6699ff","#9999ff","#ff99ff","#0099ff","#66ff99","#99ff99","#ffff99","#00ffff","#66ffff","#99ffff","#ffffff"],this.colorPicker=this.create("colorpicker-palette",this.viewComponent.parentElement),m=this.create("colorpicker-swatch",!1,null,"&nbsp;"),v=0,E=r.length;E>v;v++)a=r[v],m.style.backgroundColor=a,o=m.cloneNode(),ht.create(o,ht.CLICK,function(e){return e.stopImmediatePropagation(),null!==A.swatchColorCurr&&(A.swatchColorCurr.style.borderColor="rgba(0,0,0,0.3)"),A.swatchColorCurr=e.target,A.swatchColorCurr.style.borderColor="rgba(255, 50, 50, 1)",A.captioningObject.instance.style.backgroundColor=A.captioningObject.selected[A.colorPicker.name]=A.toRGBA(e.target.style.backgroundColor),A.applyCaptioningStyle(!1),!1}),this.colorPicker.appendChild(o);this.create("opacity-label",this.colorPicker,"span",this.localizationManager.getString(Q.MSG_CC_OPACITY)),this.colorPickerOpacity=this.create("colorpicker-slider",this.colorPicker,"input"),this.colorPickerOpacity.type="range",this.colorPickerOpacity.min=0,this.colorPickerOpacity.max=1,this.colorPickerOpacity.step=.1,this.colorPickerOpacity.value=1,ht.create(this.colorPickerOpacity,"change",function(e){return e.stopImmediatePropagation(),A.captioningObject.instance.style.backgroundColor=A.captioningObject.selected[A.colorPicker.name]=A.toRGBA(A.captioningObject.instance.style.backgroundColor),A.applyCaptioningStyle(!1),!1}),this.swatchOpacityCurr=this.colorPickerOpacity,ht.create(document,ht.CLICK,function(e){return e.stopImmediatePropagation(),"akamai-colorpicker-palette"!==e.target.className&&"akamai-opacity-label"!==e.target.className&&"akamai-colorpicker-slider"!==e.target.className&&"none"!==A.colorPicker.style.display&&(A.colorPicker.style.display="none"),!1}),null!=localStorage.getItem(mo.PREFIX+"captioningDefault")?(this.captioningObject.selected=JSON.parse(localStorage.getItem(mo.PREFIX+"captioningDefault")),this.applyCaptioningStyle(!1)):(s=!(null!=this.facade.config.style||"undefined"!==this.facade.config.style),s||(this.captioningObject.selected=this.cloneObject(this.facade.config.style)),this.applyCaptioningStyle(s)),Zi.__super__.onRegister.call(this)},Zi.prototype.toRGBA=function(e){var t,i;return i=e.replace(/^rgba?\(|\s+|\)$/g,"").split(","),t="rgba("+i[0]+","+i[1]+","+i[2]+","+this.swatchOpacityCurr.value+")"},Zi.prototype.languageListPopulate=function(){var e,t,i,n,o,a;if(i=this.facade.getTracks(),null!=i){for(this.list.language.innerHTML="",n=0,o=i.length;o>n;n++)t=i[n],e=t.language,e=this.facade.player.retrieveProxy(lt.NAME).getLanguageString(e),null!=e&&""!==e&&(this.create(null,this.list.language,"option",e).value=t.language);this.toggle.disabled=0===this.list.language.childElementCount,this.toggle.disabled&&this.create(null,this.list.language,"option","None"),this.list.language.value=null!=(a=this.facade.getTrack())?a.language:void 0}},Zi.prototype.cloneObject=function(e){var t,i;t={};for(i in e)t[i]=e[i];return t},Zi.prototype.applyCaptioningStyle=function(e,t){var i,n,o,a,r,s;null==e&&(e=!1),null==t&&(t=!1),e?(this.captioningObject.selected=this.cloneObject(this.captioningObject["default"]),this.list.font.value=this.captioningObject["default"].fontFamily,this.list.edge.value=null!=this.captioningObject["default"].edgeType?this.captioningObject["default"].edgeType:"none",this.list.size.value=this.captioningObject["default"].size,this.list.scroll.value=this.captioningObject["default"].scroll,this.picker.color.style.backgroundColor=this.captioningObject["default"].fontColor,this.picker.background.style.backgroundColor=this.captioningObject["default"].backgroundColor,this.picker.edge.style.backgroundColor=this.captioningObject["default"].edgeColor,this.picker.window.style.backgroundColor=this.captioningObject["default"].windowColor):(null!=this.captioningObject.selected.fontFamily&&(this.list.font.value=this.captioningObject.selected.fontFamily),this.list.edge.value=null!=this.captioningObject.selected.edgeType?this.captioningObject.selected.edgeType:"none",null!=this.captioningObject.selected.size&&(this.list.size.value=this.captioningObject.selected.size),null!=this.captioningObject.selected.scroll&&(this.list.scroll.value=this.captioningObject.selected.scroll),this.picker.color.style.backgroundColor=this.captioningObject.selected.fontColor,null!=this.captioningObject.selected.backgroundColor&&(this.picker.background.style.backgroundColor=this.captioningObject.selected.backgroundColor),null!=this.captioningObject.selected.edgeColor&&(this.picker.edge.style.backgroundColor=this.captioningObject.selected.edgeColor),null!=this.captioningObject.selected.windowColor&&(this.picker.window.style.backgroundColor=this.captioningObject.selected.windowColor)),a="font-family: "+(e?this.captioningObject["default"].fontFamily:this.list.font.value)+" !important;",o=(e?this.captioningObject["default"].edgeType+this.captioningObject["default"].edgeColor:this.list.edge.value+" "+this.picker.edge.style.backgroundColor)+" !important;",r="font-size: "+(e?this.captioningObject["default"].size:this.list.size.value)+" !important;",n="color: "+(e?this.captioningObject["default"].fontColor:this.picker.color.style.backgroundColor)+" !important;",i="background-color: "+(e?this.captioningObject["default"].backgroundColor:this.picker.background.style.backgroundColor)+" !important;",s="background-color: "+(e?this.captioningObject["default"].windowColor:this.picker.window.style.backgroundColor)+" !important;",t?this.captionningStyle.innerHTML=this.captioningObject.appliedStyleText=".akamai-caption-text { "+a+r+o+s+" }.akamai-caption-text p { "+n+i+" }":this.captionningStyle.innerHTML=this.captioningObject.appliedStyleText+".akamai-caption-text-preview { "+a+r+o+s+" }.akamai-caption-text-preview p { "+n+i+" }"},Zi.prototype.toggleButtonHandler=function(e,t){null==e&&(e=!1),null==t&&(t=!0),e?(this.classList.add("captioning-floater-btnselected",this.toggle.ON),this.classList.remove("captioning-floater-btnselected",this.toggle.OFF)):(this.classList.add("captioning-floater-btnselected",this.toggle.OFF),this.classList.remove("captioning-floater-btnselected",this.toggle.ON)),t&&this.sendNotification(So.VISIBILITY_CHANGE,e),this.sendNotification(Po.UPDATE_SETTINGS,{captioning:{hidden:!e}})},Zi.prototype.getCaptionDisplayHeight=function(){var e,t,i;for(e=0,t=i=this.captionText.childNodes.length;t&&(--t,3!==i||0!==t);)e+=Pt.getActualSize(this.captionText.childNodes[t]).height;return e+"px"},Zi.prototype.scrollCaptions=function(e,t,i){var n,o,a;null==e&&(e=this.captionText.scrollHeight),null==t&&(t=this.captionText.scrollTop),null==i&&(i=20),a=(e-t)/i,n=this.captionText,(o=function(){var i;if(e>t)return n.scrollTop=t+=a,setTimeout(o,20);for(i=[];n.childNodes.length>2;)i.push(n.removeChild(n.firstChild));return i})()},Zi.prototype.listNotificationInterests=function(){return[So.CUE_CHANGE,So.SETTINGS_VISIBILITY_CHANGE,So.TOGGLE_SETTINGS_VISIBILITY,So.SETTINGS_CHANGE,So.TRACK_SELECTED,So.VISIBILITY_CHANGE,uo.CHANGE_MEDIA]},Zi.prototype.handleNotification=function(e){var t,i,n,o,a,r,s,l,d,c,u,p,h,g,m,f,y,_,v,E,A;switch(l=e.getName(),t=e.getBody(),l){case uo.CHANGE_MEDIA:this.captionText.innerHTML="";break;case So.CUE_CHANGE:for(i="",g=0,y=t.length;y>g;g++)o=t[g],i+=o.html;switch(this.scroll.type){case"popout":this.captionText.innerHTML=i;break;case"rollon":case"painton":for(p=document.createElement("div"),p.innerHTML=i,E=p.childNodes,a=m=0,_=E.length;_>m;a=++m)n=E[a],this.captionText.appendChild(n);this.captionText.style.maxHeight=this.getCaptionDisplayHeight(),this.scrollCaptions()}break;case So.SETTINGS_VISIBILITY_CHANGE:case So.TOGGLE_SETTINGS_VISIBILITY:this.settingsUiVisible&&(this.colorPicker.style.display="none"),this.settingsUiVisible=!this.settingsUiVisible,this.settingsUiVisible&&1===this.list.language.length&&this.languageListPopulate(),d=this.settingsUiVisible?uo.ADD_APPLICATION_STATE:uo.REMOVE_APPLICATION_STATE,u="cc-setting-active",this.sendNotification(d,u);break;case So.SETTINGS_CHANGE:for(r in t)switch(h=t[r],r){case"fontFamily":case"fontSize":case"scroll":case"edgeType":for(s="fontFamily"===r?"font":"fontSize"===r?"size":"edgeType"===r?"edge":"scroll",A=this.list[s].options,a=f=0,v=A.length;v>f;a=++f)c=A[a],-1!==c.label.toLowerCase().indexOf(h.toLowerCase())&&(this.list[s].selectedIndex=a,"fontSize"===r&&(r="size"),this.captioningObject.selected[r]=c.value,"scroll"===r&&(this.scroll.type=this.captioningObject.selected.scroll=c.value,"painton"===c.value?this.captionText.classList.add("akamai-captioning-typed"):this.captionText.classList.remove("akamai-captioning-typed")));break;case"backgroundColor":case"edgeColor":case"fontColor":case"windowColor":this.captioningObject.selected[r]=h}this.applyCaptioningStyle(!1,!0),null!=t.visible&&this.facade.setHidden(!t.visible);break;case So.TRACK_SELECTED:this.list.language.value=e.body.language;break;case So.VISIBILITY_CHANGE:this.toggleButtonHandler(t,!1)}},i(Xi,Y),Xi.NAME="CaptioningNativeMediator",Xi.prototype.video=null,Xi.prototype.index=-1,Xi.prototype.plugin=null,Xi.prototype.onRegister=function(){this.video=this.facade.player.mediaElement,this.plugin=this.facade.retrieveProxy(qi.NAME)},Xi.prototype.listNotificationInterests=function(){return[So.VISIBILITY_CHANGE,So.TRACK_SELECTED,So.TRACKS_LOADED]},Xi.prototype.handleNotification=function(e){var t,i,n,o,a,r,s,l,d,c;switch(t=e.getBody(),e.getName()){case So.TRACKS_LOADED:for(r=0,l=t.length;l>r;r++)if(a=t[r],"captions"===a.kind||"subtitles"===a.kind)for(n=this.video.addTextTrack(a.kind,a.label,a.srclang),c=a.cues,s=0,d=c.length;d>s;s++)i=c[s],o=new TextTrackCue(i.startTime,i.endTime,i.text),i.id=i.id,n.addCue(o);break;case So.TRACK_SELECTED:this.index>-1&&(this.video.textTracks[this.index].mode="hidden"),this.index=this.plugin.getTracks().indexOf(t),this.plugin.getHidden()||(this.video.textTracks[this.index].mode="showing");break;case So.VISIBILITY_CHANGE:this.video.textTracks[this.index].mode=this.plugin.getHidden()?"hidden":"showing"}},i(Ji,Mi),Ji.prototype.componentName="captioning",Ji.prototype.captionButton=null,Ji.prototype.onRegister=function(){var e;e=new Tt(this.localizationManager.getString(Q.MSG_CC),this.viewComponent,null,"caption",this.onclick.bind(this)),this.facade.registerMediator(e),this.captionButton=e.getViewComponent(),this.sendNotification(uo.ADD_CONTROL,this.captionButton),Ji.__super__.onRegister.call(this)},Ji.prototype.onclick=function(e){var t;return e.stopImmediatePropagation(),"embedded"===(null!=(t=this.plugin.getTrack())?t.type:void 0)?this.sendNotification(So.VISIBILITY_CHANGE,this.plugin.getHidden()):e.currentTarget===this.captionButton&&this.sendNotification(So.SETTINGS_VISIBILITY_CHANGE,this.plugin.getHidden()),!1},Ji.prototype.listNotificationInterests=function(){return[So.VISIBILITY_CHANGE,So.ENABLED,So.TRACK_SELECTED]},Ji.prototype.handleNotification=function(e){var t,i,n;switch(t=e.getBody(),i=t?uo.ADD_APPLICATION_STATE:uo.REMOVE_APPLICATION_STATE,e.getName()){case So.TRACK_SELECTED:n="cc-embedded",i="embedded"===t.type?uo.ADD_APPLICATION_STATE:uo.REMOVE_APPLICATION_STATE;break;case So.VISIBILITY_CHANGE:n="cc-active";break;case So.ENABLED:i=t?uo.ADD_CONTROL_STATE:uo.REMOVE_CONTROL_STATE,n="cc-enabled"}this.sendNotification(i,n)},i(Ki,Je),Ki.NAME="Feature",Ki.prototype.featureName=null,Ki.prototype.getFeatureName=function(){return this.featureName},Ki.prototype.registerFeature=function(){null!=this.getFeatureName()&&this.player.sendNotification(Io.REGISTER_FEATURE,this)},Ki.prototype.onRegister=function(){this.registerFeature(),Ki.__super__.onRegister.call(this)},Ki.prototype.listNotificationPublications=function(){return Ki.__super__.listNotificationPublications.call(this).concat([Io.REGISTER_FEATURE]);
},i($i,xt),$i.NAME="ShareWrapper",$i.prototype.controls=["share","facebook","twitter"],$i.prototype.getFeatureName=function(){return"share"},$i.prototype.createFlashVars=function(e){return null==e.share_mode&&(e.share_mode=2),e},$i.prototype.createXML=function(e){var t,i,n,o,a,r,s,l,d;if(t=null!=(a=this.player.config)&&null!=(r=a.flash)&&null!=(s=r.view)&&null!=(l=s.elements)?l.controls:void 0,null!=t){for(null==t.elements&&(t.elements={}),d=this.controls,n=0,o=d.length;o>n;n++)i=d[n],this.config[i]===!0&&null==t.elements[i+"Btn"]&&(t.elements[i+"Btn"]={});return e}},$i.prototype.listNotificationInterests=function(){return $i.__super__.listNotificationInterests.call(this).concat([so.SHARE,so.SHARE_REQUEST])},$i.prototype.handleNotification=function(e){var t,i,n;switch($i.__super__.handleNotification.call(this,e),i=e.getName(),t=e.getBody(),i){case so.SHARE:case so.SHARE_REQUEST:n="share"}null!=n&&this.dispatchEvent(new At(n,t))},Xt.registerPlugin("share","flash",$i),i(Qi,Mi),Qi.prototype.componentName="share",Qi.prototype.shareControl=null,Qi.prototype.shareSeparator=null,Qi.prototype.embed=null,Qi.prototype.onRegister=function(){this.sendNotification(uo.ADD_CONTROL_STATE,"share-enabled"),this.shareControl=this.create(["share","control"],!1),this.shareSeparator=this.create(["share","separator"],this.shareControl),this.createButton("share"),this.plugin.getFacebook()===!0&&this.createButton("facebook"),this.plugin.getTwitter()===!0&&this.createButton("twitter"),this.sendNotification(uo.ADD_CONTROL,this.shareControl),Qi.__super__.onRegister.call(this)},Qi.prototype.createButton=function(e){var t;t=new Tt(null,this.shareControl,null,e,this.clickHandler.bind(this,e)),this.facade.registerMediator(t)},Qi.prototype.clickHandler=function(e,t){return t.stopImmediatePropagation(),this.sendNotification(uo.DISPATCH_EVENT,new At("share",{provider:e,link:this.plugin.getLink(),embed:this.plugin.getEmbed()})),!1},Qi.prototype.listNotificationInterests=function(){return[uo.MEDIA_CHANGE]},Qi.prototype.handleNotification=function(e){var t,i,n;switch(n=e.getName(),t=e.getBody(),n){case uo.MEDIA_CHANGE:i=t,null!=i.embed?this.sendNotification(uo.ADD_CONTROL_STATE,"share-enabled"):this.sendNotification(uo.REMOVE_CONTROL_STATE,"share-enabled")}},i(en,be),en.NAME=r.NAME,en.prototype.defaults={facebook:!1,twitter:!1},en.prototype.loaded=!0,en.prototype.link=null,en.prototype.embed=null,en.prototype.getEmbed=function(){return this.embed},en.prototype.setEmbed=function(e){return this.embed=e},en.prototype.getLink=function(){return this.link},en.prototype.setLink=function(e){return this.link=e},en.prototype.getFacebook=function(){return this.getConfigurationData().facebook},en.prototype.setFacebook=function(e){return this.data.facebook=e},en.prototype.getTwitter=function(){return this.getConfigurationData().twitter},en.prototype.setTwitter=function(e){return this.data.twitter=e},i(tn,puremvc.SimpleCommand),tn.prototype.execute=function(e){var t,i;t=e.getBody(),i=this.facade.retrieveProxy(en.NAME),i.setEmbed(t.embed),i.setLink(t.link)},i(nn,Ki),nn.prototype.featureName="captioning",nn.prototype.moduleName="captioning",nn.prototype.createController=function(){this.registerCommand(uo.CHANGE_MEDIA,Fi),this.registerCommand(uo.STARTED,zi),this.registerCommand(uo.TIME_UPDATE,Hi),this.registerCommand(So.VISIBILITY_CHANGE,ji),this.registerCommand(So.ENABLED,ti),this.registerCommand(So.TRACK_SELECTED,ti),this.registerCommand(So.TRACKS_LOADED,ti),this.registerCommand(So.CUE_CHANGE,ti)},nn.prototype.createModel=function(){this.proxy=new qi(this.config),this.registerProxy(this.proxy)},nn.prototype.createView=function(){var e;e=new Ji,this.registerMediator(e),this.registerMediator(new Zi(e.viewComponent))},nn.prototype.createAPI=function(){return new CaptioningAPI(this)},nn.prototype.listNotificationInterests=function(){return[uo.CHANGE_MEDIA,uo.STARTED,uo.TIME_UPDATE,So.TOGGLE_SETTINGS_VISIBILITY]},nn.prototype.listNotificationPublications=function(){var e,t;return nn.__super__.listNotificationPublications.call(this).concat(function(){var i;i=[];for(e in So)t=So[e],t!==So.TOGGLE_SETTINGS_VISIBILITY&&i.push(t);return i}()).concat([uo.ADD_CONTROL,uo.REMOVE_CONTROL,Po.UPDATE_SETTINGS,uo.ADD_CONTROL_STATE,uo.REMOVE_CONTROL_STATE])},nn.prototype.getHidden=function(){return this.proxy.getHidden()},nn.prototype.setHidden=function(e){return this.sendNotification(So.VISIBILITY_CHANGE,!e),e},nn.prototype.getTracks=function(){return this.proxy.getTracks()},nn.prototype.getTrack=function(){return this.proxy.getTrack()},nn.prototype.setTrack=function(e){return this.proxy.setTrack(e),e},nn.prototype.selectTrackByIndex=function(e){return this.proxy.selectTrackByIndex(e)},nn.prototype.selectTrackByLanguage=function(e){return this.proxy.selectTrackByLanguage(e)},nn.prototype.changeSettings=function(e){return this.sendNotification(So.SETTINGS_CHANGE,e),e},Xt.registerPlugin("captioning","html",nn),i(on,le),on.prototype.configurationName="comscore",on.NAME=r.NAME,on.prototype.defaults={url:"http://b.scorecardresearch.com/b",events:{ads:null,video:null},data:{c1:null,c2:null,c3:null,c4:null,c5:null,c6:null,c7:null,c8:null,c9:null,c10:null,c14:null}},on.prototype.adStart=function(){var e;e=this.constructURL("ads","started"),Pt.beacon(e)},on.prototype.videoStart=function(){var e;e=this.constructURL("video","started"),Pt.beacon(e)},on.prototype.constructURL=function(e,t){var i,n,o,a,r,s,l,d,c,u,p,h,g;if(i={},o=null!=(p=this.value.events)?p[e]:void 0,null!=o)for(c=0,u=o.length;u>c;c++)a=o[c],a.type===t&&(n=a);h=this.value.data;for(r in h)d=h[r],i[r]=(null!=n&&null!=(g=n.data)?g[r]:void 0)||d;null==i.c7&&(i.c7=document.location.href.substr(0,512)),null==i.c8&&(i.c8=document.referrer.substr(0,512)),null==i.c9&&(i.c9=document.title),null==i.cv&&(i.cv="2.0"),i.rn=Date.now(),l=this.value.url,s=[];for(r in i)d=i[r],null!=d&&""!==d&&s.push(r+"="+escape(d));return s.length>0&&(l+="?"+s.join("&")),l.substr(0,2080)},i(an,xt),an.NAME="ComscoreWrapper",an.prototype.flashPlugins=[{id:"ComscorePlugin",src:"#{paths.resources}plugins/ComscorePlugin.swf",blocking:!1,host:"akamai",main:"ComscorePlugin",type:"application/x-shockwave-flash"}],an.prototype.createXML=function(e){var t,i,n,o,a,r,s,d,c,u,p,h,g,m,f,y,_,v,E;t=e.firstChild,r=e.getElementsByTagName("metrics")[0],null==r&&(r=e.createElement("metrics"),t.appendChild(r)),h=e.createElement("vendor"),h.setAttribute("id","comscore"),r.appendChild(h),a={ads:{started:"adStart",ended:"adComplete"},video:{started:"videoStart",ended:"videoComplete"}},c=[{value:"c1",key:"COMSCORE_CSC1"},{value:"c2",key:"COMSCORE_CSC2"},{value:"c3",key:"COMSCORE_CSC3"},{value:"c4",key:"COMSCORE_CSC4"},{value:"c5",key:"COMSCORE_CSC5"},{value:"c6",key:"COMSCORE_CSC6"},{value:"c7",key:"COMSCORE_CSC7"},{value:"c8",key:"COMSCORE_CSC8"},{value:"c9",key:"COMSCORE_CSC9"},{value:"c10",key:"COMSCORE_CSC10"},{value:"c11",key:"COMSCORE_CSC14"}],_=this.config.events;for(p in _)if(o=_[p],null!=o&&o.length>0)for(g=0,f=o.length;f>g;g++)for(n=o[g],s=e.createElement("property"),s.setAttribute("key",a[p][n.type]),h.appendChild(s),i=e.createElement("property"),i.setAttribute("key","COMSCORE_CSURL"),u=l.createTextContent(e,this.config.url),i.appendChild(u),s.appendChild(i),m=0,y=c.length;y>m;m++)d=c[m],u=(null!=(v=n.data)?v[d.value]:void 0)||(null!=(E=this.config.data)?E[d.value]:void 0),null!=u&&""!==u&&(i=e.createElement("property"),i.setAttribute("key",d.key),u=l.createTextContent(e,u),i.appendChild(u),s.appendChild(i));return e},i(rn,puremvc.SimpleCommand),rn.prototype.execute=function(e){var t;t=this.facade.retrieveProxy(on.NAME),t.adStart()},i(sn,puremvc.SimpleCommand),sn.prototype.execute=function(e){var t;t=this.facade.retrieveProxy(on.NAME),t.videoStart()},i(ln,Ki),ln.prototype.moduleName="share",ln.prototype.featureName="share",ln.prototype.createModel=function(){this.registerProxy(new en(this.config))},ln.prototype.createController=function(){ln.__super__.createController.call(this),this.registerCommand(uo.MEDIA_CHANGE,tn)},ln.prototype.createView=function(){this.registerMediator(new Qi)},ln.prototype.listNotificationInterests=function(){return[uo.MEDIA_CHANGE]},ln.prototype.listNotificationPublications=function(){return ln.__super__.listNotificationPublications.apply(this,arguments).concat([uo.ADD_CONTROL,uo.REMOVE_CONTROL,uo.ADD_CONTROL_STATE,uo.REMOVE_CONTROL_STATE])},Xt.registerPlugin("share","html",ln),Xt.registerPlugin("share","external",ln),i(dn,xt),dn.NAME="ComscoreStreamsenseWrapper",dn.prototype.flashPlugins=[{id:"ComscoreStreamSensePlugin",src:"#{paths.resources}plugins/ComscoreStreamSensePlugin.swf",blocking:!1,host:"akamai",main:"ComscoreStreamSensePlugin"}],dn.prototype.createXML=function(e){var t,i,n,o,a,r,s;for(t=e.firstChild,i=e.getElementsByTagName("metrics")[0],null==i&&(i=e.createElement("metrics"),t.appendChild(i)),a=e.createElement("vendor"),a.setAttribute("id","comscoreStreamSense"),i.appendChild(a),o=[{value:this.config.data.clientId,key:"C2"},{value:this.config.data.publisherSecret,key:"PUBLISHER_SECRET"},{value:this.config.data.appVersion,key:"APP_VERSION"},{value:this.config.data.metadata,key:"metadata"}],r=0,s=o.length;s>r;r++)n=o[r],null!=n.value&&this.createProperty(e,n.key,n.value,a);return e},i(cn,be),cn.NAME=r.NAME,cn.prototype.defaults={plugin:{js:null},data:{clientId:null,publisherSecret:null,appVersion:null,metadata:null}},cn.prototype.myStreamingTag=null,cn.prototype.getScript=function(){return this.config.plugin.js},cn.prototype.initialize=function(){cn.__super__.initialize.call(this),"undefined"!=typeof ns_akamaiplayercomscore&&null!==ns_akamaiplayercomscore&&null===this.myStreamingTag&&(this.myStreamingTag=new ns_akamaiplayercomscore.StreamingTag({customerC2:this.value.data.clientId}))},cn.prototype.mediaChange=function(){null!=this.myStreamingTag&&this.myStreamingTag.stop(),this.myStreamingTag=null,this.myStreamingTag=new ns_akamaiplayercomscore.StreamingTag({customerC2:this.value.data.clientId}),this.facade.logger.log("[AMP ComscoreStreamsense Event] : Media Change, StreamTag ReInitialize")},cn.prototype.adStart=function(e){null==e&&(e=null),this.myStreamingTag.playVideoAdvertisement(this.getMetaData(!0)),this.facade.logger.log("[AMP ComscoreStreamsense Event] : Ad Start")},cn.prototype.start=function(e){var t;null==e&&(e=null),(null!=(t=this.facade.player.ads)?t.getInProgress():0)||(this.myStreamingTag.playVideoContentPart(this.getMetaData()),this.facade.logger.log("[AMP ComscoreStreamsense Event] : Content Play"))},cn.prototype.stop=function(){this.myStreamingTag.stop(),this.facade.logger.log("[AMP ComscoreStreamsense Event] : Stop")},cn.prototype.ended=function(){this.myStreamingTag.stop(),this.facade.logger.log("[AMP ComscoreStreamsense Event] : End"),this.myStreamingTag=null,this.myStreamingTag=new ns_akamaiplayercomscore.StreamingTag({customerC2:this.value.data.clientId})},cn.prototype.getMetaData=function(e){var t,i,n,o;null==e&&(e=!1),i={},n=e?this.value.data.metadata.ads:this.value.data.metadata.video;for(t in n)o=n[t],"null"!==o&&(i[t]=o);return i},i(un,puremvc.SimpleCommand),un.prototype.execute=function(e){var t;t=this.facade.retrieveProxy(cn.NAME),t.start(e.body)},i(pn,puremvc.SimpleCommand),pn.prototype.execute=function(e){var t;t=this.facade.retrieveProxy(cn.NAME),t.adStart(e.body)},i(hn,puremvc.SimpleCommand),hn.prototype.execute=function(e){var t;t=this.facade.retrieveProxy(cn.NAME),t.stop(e.body)},i(gn,puremvc.SimpleCommand),gn.prototype.execute=function(e){var t;t=this.facade.retrieveProxy(cn.NAME),t.adStart(e.body),t.stop(e.body)},i(mn,puremvc.SimpleCommand),mn.prototype.execute=function(e){var t;t=this.facade.retrieveProxy(cn.NAME),t.mediaChange()},i(fn,puremvc.SimpleCommand),fn.prototype.execute=function(e){var t;t=this.facade.retrieveProxy(cn.NAME),t.ended()},i(yn,Je),yn.prototype.moduleName="comscore",yn.prototype.createController=function(){yn.__super__.createController.call(this),this.registerCommand(uo.STARTED,sn),this.registerCommand(uo.CONTENT_CHANGED,sn),this.registerCommand(Co.AD_STARTED,rn)},yn.prototype.createModel=function(){this.registerProxy(new on(this.config))},yn.prototype.listNotificationInterests=function(){return[uo.STARTED,Co.AD_STARTED,uo.CONTENT_CHANGED]},Xt.registerPlugin("comscore","html",yn),Xt.registerPlugin("comscore","flash",an),i(_n,Z),_n.prototype.duration=null,_n.prototype.currentTime=null,_n.prototype.container=null,_n.prototype.banner=null,_n.prototype.text=null,_n.prototype.adText=null,_n.prototype.bg=null,_n.prototype.totalAds=null,_n.prototype.adPosition=null,_n.prototype.adClickHandlerContainer=null,_n.prototype.adContainerRequired=!0,_n.prototype.componentName="ads",_n.prototype.onRegister=function(){this.adContainerRequired&&(this.container=this.create("ad-container")),this.banner=this.create("ad-banner"),Pt.isHTML5()&&(this.viewComponent.adClickHandlerContainer=this.adClickHandlerContainer=this.create("ads-click-handler")),this.bg=this.create("ad-text-bg",this.banner),this.adText=this.create("ad-text-title",this.banner),this.text=this.create("ad-text",this.banner),this.adContainerRequired&&(this.viewComponent.container=this.container),_n.__super__.onRegister.call(this),this.sendNotification(Co.AD_CONTAINER_CREATED,this.viewComponent),this.facade.setViewComponent(this.viewComponent)},_n.prototype.listNotificationInterests=function(){return[Co.BREAK_START,Co.BREAK_END,Co.AD_TIME_REMAINING,Co.AD_STARTED]},_n.prototype.handleNotification=function(e){var t,i,n,o;switch(e.getName()){case Co.BREAK_END:this.text.textContent="",this.adText.textContent="";break;case Co.AD_TIME_REMAINING:o=Math.round(e.getBody()),n=null!=this.totalAds&&this.totalAds>0&&null!=this.adPosition&&this.adPosition!==this.totalAds?o>0?""+this.localizationManager.getString(Q.MSG_NEXT_AD)+o+" "+this.localizationManager.getString(Q.MSG_SECONDS):"":o>0?""+this.localizationManager.getString(Q.MSG_NEXT_VIDEO)+o+" "+this.localizationManager.getString(Q.MSG_SECONDS):"",this.text.textContent=n,i=this.facade.retrieveProxy(r.NAME).adVO.duration,o=i-o;break;case Co.AD_STARTED:t=e.getBody(),this.totalAds=t.totalAds,this.adPosition=t.position,n="Ad "+t.position+" of "+t.totalAds,null!=t.position&&null!=t.totalAds&&0!==t.position&&(this.adText.textContent=n)}},i(vn,_e),vn.prototype.execute=function(e){this.proxy.getEnabled()!==!1&&this.proxy.engage(e.getBody())},i(En,ti),En.prototype.execute=function(e){this.sendNotification(uo.UPDATE_DATA_BINDINGS,{contexts:[this.proxy.getContextName()]}),En.__super__.execute.call(this,e)},i(An,ti),An.prototype.execute=function(e){this.player.sendNotification(uo.ADD_APPLICATION_STATE,"ad-mode"),"desktop"!==this.applicationState.getDevice()&&this.player.sendNotification(uo.DISABLE_FULL_SCREEN),An.__super__.execute.call(this,e),this.proxy.breakStart()},i(Cn,ti),Cn.prototype.execute=function(e){Cn.__super__.execute.call(this,e),this.proxy.breakEnd(),this.player.sendNotification(uo.REMOVE_APPLICATION_STATE,"ad-mode"),"desktop"!==this.applicationState.getDevice()&&this.player.sendNotification(uo.ENABLE_FULL_SCREEN)},i(bn,_e),bn.prototype.execute=function(e){this.proxy.contentSeek(e.getBody())};var To={BREAK_START:"adComponentBreakInitiated",BREAK_END:"adComponentBreakComplete",AD_LOADED:"adComponentLoaded",AD_STARTED:"adComponentAdBegin",AD_TIME_UPDATE:"adComponentPlaybackProgress",AD_TIME_REMAINING:"adComponentTimeElapsed",AD_DURATION_CHANGE:"addurationchange",AD_ENDED:"adComponentAdComplete",AD_ERROR:"adComponentInitFailed",AD_PLAY:"adComponentPlaybackResumed",AD_PAUSE:"adComponentPlaybackPaused",AD_LOG:"adComponentLog",AD_COMPANION:"adComponentCompanion",AD_PLAYBACK_FAILED:"adComponentPlaybackFailed",AD_PLAYBACK_TERMINATED:"adComponentPlaybackTerminated",AD_MEDIA_LOADED:"adComponentMediaLoaded",AD_CLICKED:"adComponentClicked",AD_FIRST_QUARTILE:"adComponentFirstQuartile",AD_MIDPOINT:"adComponentMidpoint",AD_THIRD_QUARTILE:"adComponentThirdQuartile",AD_REQUEST:"adComponentAdsRequest",AD_SKIPPED:"adComponentAdSkipped",AD_IMPRESSION:"adComponentImpression"};i(Nn,Je),Nn.prototype.moduleName="comscorestreamsense",Nn.prototype.createModel=function(){this.registerProxy(new cn(this.config))},Nn.prototype.createController=function(){Nn.__super__.createController.call(this),this.registerCommand(uo.MEDIA_CHANGE,mn),this.registerCommand(Co.AD_STARTED,pn),this.registerCommand(Co.AD_ENDED,hn),this.registerCommand(Co.SKIPPED,hn),this.registerCommand(Co.AD_ERROR,gn),this.registerCommand(uo.PLAYING,un),this.registerCommand(uo.PAUSE,hn),this.registerCommand(uo.ENDED,fn)},Nn.prototype.listNotificationInterests=function(){return[uo.MEDIA_CHANGE,Co.AD_STARTED,Co.AD_ENDED,Co.AD_ERROR,Co.SKIPPED,uo.ENDED,uo.PAUSE,uo.PLAYING]},Xt.registerPlugin("comscorestreamsense","html",Nn),Xt.registerPlugin("comscorestreamsense","flash",dn),i(In,vi),In.NAME=vi.NAME,In.prototype.defaults={videoId:null,defaultId:null,domain:null,zoneId:null,companion:null,userData:null,params:null},In.prototype.key="auditude",In.prototype.session=null,In.prototype.options=null,In.prototype.initialize=function(){var e=this;this.options={controls:!1,auditudeHandlesChapterBreaks:!1,style:{backgroundColor:"#000",width:this.facade.player.mediaElement.clientWidth,height:this.facade.player.mediaElement.clientHeight},handlers:{play:function(){e.facade.logger.debug("ad play")},timeupdate:function(t,i,n){e.facade.sendNotification(Co.AD_TIME_REMAINING,n.duration-n.currentTime)},error:function(t){e.facade.logger.debug("ad error:",t),e.error()},pause:function(){e.facade.logger.debug("ad pause")},loadedmetadata:function(t,i,n){e.facade.logger.debug("ad loadedmetadata")},end:function(){e.facade.logger.debug("ad end")}}};try{this.plugin=this.createPlugin(),this.plugin.subscribe(aud.events.init_complete,function(t,i){e.facade.logger.debug("init_complete:",t,i);try{e.plugin.publish(aud.notifications.break_begin)}catch(n){e.error(n)}}),this.plugin.subscribe(aud.events.init_failed,function(t,i){e.error(t)}),this.plugin.subscribe(aud.events.break_begin,function(t,i){e.facade.logger.debug("break_begin:",t,i)}),this.plugin.subscribe(aud.events.pause_playback,function(t,i){e.facade.logger.debug("pause_playback: "+t+", "+i),e.contentPause(t,i)}),this.plugin.subscribe(aud.events.resume_playback,function(t,i){e.facade.logger.debug("resume_playback: ",t,i),e.contentPlay(t,i)}),this.plugin.subscribe(aud.events.linear_ad_begin,function(t,i,n){var o,a,r;e.facade.logger.debug("linear ad begin:",t,i,n),r=i._xmlDoc.querySelector("ad[id]"),null!=r&&(o=r.getAttribute("id")),r=i._xmlDoc.querySelector("inLine[adTitle]"),null!=r&&(a=r.getAttribute("adTitle")),e.adVO=new yi(o,a,n.asset.duration,1,"preroll","auditude",null,n.banners,null,n),e.sendNotification(Co.AD_LOADED,e.adVO),e.sendNotification(Co.AD_DURATION_CHANGE,e.adVO),e.facade.player.sendNotification(uo.CHANGE_PLAY_STATE,ho.PLAYING),e.sendNotification(Co.AD_PLAY),e.setInProgress(!0),e.setCompanions(n.banners),e.session=n.session,e.sendNotification(Co.AD_STARTED)}),this.plugin.subscribe(aud.events.linear_ad_end,function(t,i,n){e.facade.logger.debug("linear ad end:",t,i,n),e.sendNotification(Co.AD_ENDED)}),this.plugin.subscribe(aud.events.break_end,function(t,i){e.facade.logger.debug("break_end:",t,i),e.end()}),this.plugin.subscribe(aud.events.non_linear_ad_begin,function(t,i,n){e.facade.logger.debug("non linear ad begin"),e.setCompanions(n.banners)}),this.plugin.subscribe(aud.events.non_linear_ad_end,function(t,i,n){e.facade.logger.debug("non linear ad end")})}catch(t){this.error(t)}},In.prototype.createPlugin=function(){return aud.html5.AdPlayer(this.facade.container.container,null,this.value.domain,this.value.zoneId,this.options)},In.prototype.start=function(){var e,t,i,n,o,a,r;if(In.__super__.start.call(this)===!1)return!1;try{if(n=this.value.params||{},o="",null!=this.value.userData){r=this.value.userData;for(i in r)a=r[i],o+=""+i+"="+a+";"}null!=n.userData&&(o+=n.userData),""!==o&&(n.userData=o),t=this.value.videoId+"",null!=this.value.defaultId&&(e=this.value.defaultId+"",t=null!=t?[t,e]:e),this.facade.logger.log("Auditude init: ",t,n),this.plugin.init(t,n)}catch(s){this.error(s)}},In.prototype.play=function(){In.__super__.play.call(this),this.session.notifyResume()},In.prototype.pause=function(){In.__super__.pause.call(this),this.session.notifyPause()},In.prototype.breakStart=function(){},In.prototype.setCompanions=function(e){var t,i,n,o,a,r,s,l;if(!(null==e||e.length<1)){for(n=[],a=0,s=e.length;s>a;a++)t=e[a],n.push({data:t.data,type:t.resourceType,width:parseInt(t.width),height:parseInt(t.height),metadata:t});if(In.__super__.setCompanions.call(this,n),null!=this.value.companion&&(i=this.value.companion,o=document.getElementById(i.id),null!=o))for(r=0,l=e.length;l>r;r++)if(t=e[r],i.width===parseInt(t.width)&&i.height===parseInt(t.height)){o.innerHTML=t.data;break}}},In.prototype.contentStarted=function(){this.plugin.publish(aud.notifications.video_playback_started)},In.prototype.contentEnded=function(){this.plugin.publish(aud.notifications.video_playback_complete)},i(Pn,In),Pn.NAME=In.NAME,Pn.prototype.createPlugin=function(){return aud.html5.AdPlayer(this.facade.player.mediaElement,null,this.value.domain,this.value.zoneId,this.options)},Pn.prototype.engage=function(e){Pn.__super__.engage.call(this,e),this.sendNotification(uo.DISABLE_VIDEO_EVENTS,["ended"])},Pn.prototype.reset=function(e){Pn.__super__.reset.call(this,e),this.sendNotification(uo.ENABLE_VIDEO_EVENTS,["ended"])},Pn.prototype.play=function(){Pn.__super__.play.call(this),this.facade.player.mediaElement.play()},Pn.prototype.pause=function(){Pn.__super__.pause.call(this),this.facade.player.mediaElement.pause()},Pn.prototype.contentPause=function(){this.facade.player.mediaElement.pause()},i(Sn,xt),Sn.NAME="AdWrapper",Sn.prototype.enabled=!0,Sn.prototype.paused=!1,Sn.prototype.started=!1,Sn.prototype.adVO=null,Sn.prototype.getFeatureName=function(){return"ads"},Sn.prototype.getInProgress=function(){return this.player.mediaElement.getPlayerProperty("adInProgress")},Sn.prototype.getStarted=function(){return this.started},Sn.prototype.getPaused=function(){return this.paused},Sn.prototype.getCompanions=function(){var e;return null!=(e=this.adVO)?e.companions:void 0},Sn.prototype.setEnabled=function(e){return this.enabled=e,this.player.mediaElement.setPlayerProperty("adsEnabled",e),e},Sn.prototype.getEnabled=function(){return this.enabled},Sn.prototype.enable=function(){this.setEnabled(!0)},Sn.prototype.disable=function(){this.setEnabled(!1)},Sn.prototype.createFlashVars=function(e){return e.core_ads_enabled=!0,e},Sn.prototype.listNotificationInterests=function(){var e,t;return Sn.__super__.listNotificationInterests.call(this).concat(function(){var i;i=[];for(e in To)t=To[e],i.push(t);return i}())},Sn.prototype.handleNotification=function(e){var t,i,n,o,a;switch(Sn.__super__.handleNotification.call(this,e),n=e.getName(),t=e.getBody(),this.adVO=this.createAdVO(t),o=this,n){case To.BREAK_START:a=Co.BREAK_START;break;case To.BREAK_END:a=Co.BREAK_END;break;case To.AD_MEDIA_LOADED:a=Co.AD_LOADED,this.start=!1;break;case To.AD_STARTED:a=Co.AD_STARTED,this.started=!0,this.sendNotification(uo.ADD_APPLICATION_STATE,"ad-mode");break;case To.AD_TIME_UPDATE:a=Co.AD_TIME_UPDATE;break;case To.AD_TIME_REMAINING:a=Co.AD_TIME_REMAINING;break;case To.AD_ERROR:case To.AD_PLAYBACK_FAILED:a=Co.AD_ERROR,this.start=!1,this.sendNotification(uo.REMOVE_APPLICATION_STATE,"ad-mode");break;case To.AD_ENDED:case To.AD_PLAYBACK_TERMINATED:a=Co.AD_ENDED,this.sendNotification(uo.REMOVE_APPLICATION_STATE,"ad-mode");break;case To.AD_CLICKED:a=Co.AD_CLICKED;break;case To.AD_COMPANION:a=Co.AD_COMPANION,null!=this.adVO&&null!=t&&(this.adVO.companions=t);break;case To.AD_PAUSE:a=Co.AD_PAUSE,o=this.player,this.paused=!0,this.player.setPlayState("paused");break;case To.AD_PLAY:a=Co.AD_PLAY,this.paused=!0,this.player.setPlayState("playing");break;case To.AD_LOG:a=Co.AD_LOG;break;case To.AD_FIRST_QUARTILE:a=Co.FIRST_QUARTILE;break;case To.AD_MIDPOINT:a=Co.MIDPOINT;break;case To.AD_THIRD_QUARTILE:a=Co.THIRD_QUARTILE;break;case To.AD_REQUEST:a=Co.REQUEST;break;case To.AD_SKIPPED:a=Co.SKIPPED;break;case To.AD_IMPRESSION:a=Co.IMPRESSION}null!=a&&(this.sendNotification(a,this.adVO),i=new At(a.replace(/^ads/,""),this.adVO),i.player=this.player,o.dispatchEvent(i))},Sn.prototype.createAdVO=function(e){return null==e?null:new yi(e.id,e.title,e.duration,e.podIndex,e.podPosition,e.adPlatform,null,null,e.requestURL,e)},Sn.prototype.terminateAd=function(){this.player.mediaElement.terminateAd()},Sn.prototype.terminateAllAds=function(){this.player.mediaElement.terminateAllAds()},i(Tn,Sn),Tn.NAME="AuditudeWrapper",Tn.prototype.flashPlugins=[{id:"AuditudePlugin",src:"#{paths.resources}plugins/AuditudeStandardPlugin.swf",host:"akamai",main:"#{paths.resources}plugins/AuditudeStandardPlugin.swf",type:"application/x-shockwave-flash"}],Tn.prototype.createFlashVars=function(e){return null!=this.config.companion&&(e.ad_partner_companion_size=""+this.config.companion.width+"x"+this.config.companion.height),e},Tn.prototype.createXML=function(e){var t,i,n,o,a,r,s,l,d,c,u,p,h;for(i=e.firstChild,t=e.getElementsByTagName("admedia")[0],null==t&&(t=e.createElement("admedia"),i.appendChild(t)),l=e.createElement("vendor"),l.setAttribute("id","auditude"),t.appendChild(l),s=[{value:this.config.domain,key:"AUDITUDE_DOMAIN"},{value:this.config.videoId,key:"AUDITUDE_MEDIA_ID"},{value:this.config.defaultId,key:"AUDITUDE_DEFAULT_MEDIA_ID"},{value:this.config.zoneId,key:"AUDITUDE_ZONE_ID"},{value:this.config.prerollId,key:"AUDITUDE_PREROLL_MEDIA_ID"},{value:this.config.midrollId,key:"AUDITUDE_MIDROLL_MEDIA_ID"},{value:this.config.audienceManagerURL,key:"AUDITUDE_AUDIENCE_MGR_URL"},{value:this.config.version,key:"AUDITUDE_VERSION"}],d=0,u=s.length;u>d;d++)r=s[d],null!=r.value&&this.createProperty(e,r.key,r.value,l);if(null!=this.config.position&&l.setAttribute("position",this.config.position),null!=this.config.companions){for(o=[],a=[],h=this.config.companions,c=0,p=h.length;p>c;c++)n=h[c],o.push(n.width+"x"+n.height),a.push(n.id);this.createProperty(e,"AUDITUDE_COMPANION_SIZE",o.join(","),l),this.createProperty(e,"AUDITUDE_COMPANION_ID",o.join(","),l)}return null!=this.config.params&&this.createProperty(e,"AUDITUDE_PARAMS",this.config.params,l),null!=this.config.userData&&this.createProperty(e,"AUDITUDE_USER_DATA",this.config.userData,l),e},i(wn,Ki),wn.NAME="AdPlugin",wn.prototype.container=null,wn.prototype.featureName="ads",wn.prototype.createModel=function(){this.proxy=this.isFullscreenDevice()?this.createFullscreenProxy():this.createProxy(),this.registerProxy(this.proxy)},wn.prototype.createController=function(){wn.__super__.createController.call(this),this.registerCommand(uo.CHANGE_MEDIA,vn),this.registerCommand(Co.BREAK_START,An),this.registerCommand(Co.AD_LOADED,En),this.registerCommand(Co.BREAK_END,Cn),this.registerCommand(uo.SEEK,bn),this.registerCommand(go.SEEK,bn),this.registerCommand(Co.AD_STARTED,ti),this.registerCommand(Co.SKIPPED,ti),this.registerCommand(Co.AD_CONTAINER_CREATED,ti),this.registerCommand(Co.AD_LOADED,ti),this.registerCommand(Co.AD_MANAGER_LOADED,ti),this.registerCommand(Co.AD_TIME_UPDATE,ti),this.registerCommand(Co.AD_TIME_REMAINING,ti),this.registerCommand(Co.AD_DURATION_CHANGE,ti),this.registerCommand(Co.AD_ENDED,ti),this.registerCommand(Co.AD_ERROR,ti),this.registerCommand(Co.AD_COMPANION,ti),this.registerCommand(Co.FIRST_QUARTILE,ti),this.registerCommand(Co.MIDPOINT,ti),this.registerCommand(Co.THIRD_QUARTILE,ti),this.registerCommand(Co.LOG,ti),this.registerCommand(Co.REQUEST,ti),this.registerCommand(Co.AD_RESUME,ti),this.registerCommand(Co.AD_PLAY,ti),this.registerCommand(Co.AD_PAUSE,ti),this.registerCommand(Co.AD_PAUSED,ti),this.registerCommand(Co.IMPRESSION,ti)},wn.prototype.createView=function(){return this.registerMediator(new _n)},wn.prototype.isFullscreenDevice=function(){return Pt.isFullscreenDevice()},wn.prototype.createProxy=function(){},wn.prototype.createFullscreenProxy=function(){},wn.prototype.registered=function(){var e;wn.__super__.registered.call(this),e=this.player.retrieveProxy(Qe.NAME),e.registerContext(this.retrieveProxy(vi.NAME))},wn.prototype.listNotificationInterests=function(){return[uo.CHANGE_MEDIA,uo.PLAY,uo.PAUSE,uo.START,uo.STARTED,uo.ENDED,uo.READY,uo.SEEK,uo.VOLUME_CHANGE,uo.FULL_SCREEN_CHANGE,go.PLAY,go.PAUSE,go.SEEK,go.TOGGLE_PLAY_PAUSE]},wn.prototype.listNotificationPublications=function(){var e,t;return wn.__super__.listNotificationPublications.call(this).concat(function(){var i;i=[];for(e in Co)t=Co[e],i.push(t);return i}()).concat([uo.PLAY_REQUEST,uo.UPDATE_DATA_BINDINGS,uo.DISPLAY_TIME,uo.ADD_CUE_POINTS,uo.DISABLE_FULL_SCREEN,uo.ENABLE_VIDEO_EVENTS,uo.DISABLE_VIDEO_EVENTS])},wn.prototype.setEnabled=function(e){this.proxy.setEnabled(e)},wn.prototype.getEnabled=function(){return this.proxy.getEnabled()},wn.prototype.getInProgress=function(){return this.proxy.getInProgress()},wn.prototype.getStarted=function(){return this.proxy.getStarted()},wn.prototype.getPaused=function(){return this.proxy.getPaused()},wn.prototype.getCompanions=function(){return this.proxy.getCompanions()},wn.prototype.terminateAd=function(){this.proxy.terminateAd()},wn.prototype.terminateAllAds=function(){this.proxy.terminateAllAds()},i(Dn,Sn),Dn.NAME="IMAWrapper",Dn.prototype.flashPlugins=[{id:"GoogleIMAPlugin",src:"#{paths.resources}plugins/GoogleIMAPlugin.swf",blocking:!1,host:"akamai",main:"GoogleIMAPlugin",type:"application/x-shockwave-flash"},{id:"IMAOverlayAdPlugin",src:"#{paths.resources}plugins/IMAOverlayAdPlugin.swf",blocking:!1,host:"akamai",main:"IMAOverlayAdPlugin",type:"application/x-shockwave-flash"}],Dn.prototype.createXML=function(e){var t,i,n,o,a,r,s,l,d,c,u,p,h,g,m,f;for(i=e.firstChild,t=e.getElementsByTagName("admedia")[0],null==t&&(t=e.createElement("admedia"),i.appendChild(t)),d=e.createElement("vendor"),d.setAttribute("id","dfp"),t.appendChild(d),l=[{value:this.config.adTagUrl,key:"DFP_AD_TAG_URL"},{value:this.config.maxBitrate,key:"DFP_MAX_BITRATE"},{value:this.config.sceneMarkers,key:"displaySceneMarkers"},{value:this.config.ppid,key:"DFP_PPID"}],c=0,h=l.length;h>c;c++)s=l[c],null!=s.value&&this.createProperty(e,s.key,s.value,d);if(null!=this.config.position&&d.setAttribute("position",this.config.position),null!=this.config.params&&(null!=this.config.params.adTag&&this.createProperty(e,"DFP_AD_TAG_PARAMS",this.config.params.adTag,d),null!=this.config.params.manual&&this.createProperty(e,"DFP_MANUAL_PARAMS",this.config.params.manual,d)),null!=this.config.companions){for(o=[],a=[],f=this.config.companions,u=0,g=f.length;g>u;u++)n=f[u],o.push(n.width+"x"+n.height),a.push(n.id);this.createProperty(e,"DFP_SIZE",o.join(","),d),this.createProperty(e,"COMPANION_ID",a.join(","),d)}if(null!=this.config.disableCompanionAds&&this.createProperty(e,"disableCompanionAds",this.config.disableCompanionAds,d),null!=this.config.overlay)for(this.config.overlay.enabled===!0&&(r=e.createElement("overlay"),t.appendChild(r)),l=[{value:"dfp",key:"OVERLAY_AD_PARTNER"},{value:this.config.overlay.adTagUrl,key:"OVERLAY_AD_BASE_URL"},{value:this.config.overlay.delay,key:"OVERLAY_AD_DELAY"},{value:this.config.overlay.interval,key:"OVERLAY_AD_INTERVAL"},{value:this.config.overlay.duration,key:"OVERLAY_AD_DURATION"},{value:""+this.config.overlay.width+"x"+this.config.overlay.height,key:"OVERLAY_AD_SIZE"}],p=0,m=l.length;m>p;p++)s=l[p],null!=s.value&&this.createProperty(e,s.key,s.value,r);return e},i(xn,Ei),xn.NAME=Ei.NAME,xn.prototype.createPlugin=function(){return new google.ima.AdDisplayContainer(this.facade.getViewComponent().container,this.facade.player.getMediaElement(),this.facade.getViewComponent().container)},xn.prototype.engage=function(e){xn.__super__.engage.call(this,e),this.sendNotification(uo.DISABLE_VIDEO_EVENTS,["paused","ended","durationchange","error"])},xn.prototype.reset=function(e){xn.__super__.reset.call(this,e),this.sendNotification(uo.ENABLE_VIDEO_EVENTS,["paused","ended","durationchange","error"])},xn.prototype.breakStart=function(){this.playbackCore=this.facade.player.retrieveProxy(mt.NAME).getActivePlaybackCore(),
this.playbackCore.setEnabled(!1),this.setInProgress(!0)},xn.prototype.breakEnd=function(){xn.__super__.breakEnd.call(this),this.playbackCore.setEnabled(!0)},i(Mn,puremvc.SimpleCommand),Mn.prototype.execute=function(e){this.facade.sendNotification(uo.ADD_APPLICATION_STATE,"ad-overlay-mode")},i(Ln,puremvc.SimpleCommand),Ln.prototype.execute=function(e){var t;t=this.facade.retrieveProxy(_i.NAME),t.stop(),this.facade.player.sendNotification(uo.REMOVE_APPLICATION_STATE,"ad-overlay-mode")},i(kn,Z),kn.prototype.componentName="ad-overlay",kn.prototype.anchor=null,kn.prototype.image=null,kn.prototype.tracker=null,kn.prototype.tracker2=null,kn.prototype.closeButton=null,kn.prototype.closeText=null,kn.prototype.onRegister=function(){var e=this;this.anchor=this.create("ad-overlay-anchor"),this.anchor.target="_blank",this.image=this.create("ad-overlay-img",this.anchor,"img"),this.tracker=this.create(),this.tracker.width=0,this.tracker.height=0,this.tracker2=this.create(null,this,"img"),this.tracker2.width=0,this.tracker2.height=0,this.closeButton=this.create("ad-close-button",this.anchor),this.closeButton.onclick=function(t){return t.stopImmediatePropagation(),e.sendNotification(bo.REMOVE_OVERLAY),!1},this.closeText=this.createText("ad-close-text","x",this.closeButton),kn.__super__.onRegister.call(this)},kn.prototype.listNotificationInterests=function(){return[bo.ADD_OVERLAY,bo.REMOVE_OVERLAY]},kn.prototype.handleNotification=function(e){var t;switch(e.getName()){case bo.ADD_OVERLAY:t=e.getBody(),this.image.src=t.src,this.anchor.href=t.href,this.tracker.src=t.tracking[0],this.tracker2.src=t.tracking[1]}},i(Rn,puremvc.SimpleCommand),Rn.prototype.execute=function(e){this.facade.retrieveProxy(Ei.NAME).ready()},i(On,puremvc.SimpleCommand),On.prototype.execute=function(e){this.facade.retrieveProxy(Ei.NAME).resize(e.getBody())},i(Vn,wn),Vn.NAME="AuditudePlugin",Vn.prototype.moduleName="auditude",Vn.prototype.featureName="ads",Vn.prototype.createFullscreenProxy=function(){return new Pn(this.config)},Vn.prototype.createProxy=function(){return new In(this.config)},Vn.prototype.isFullscreenDevice=function(){return!0},Xt.registerPlugin("auditude","html",Vn),Xt.registerPlugin("auditude","flash",Tn),i(Gn,xt),Gn.NAME="AdChoicesWrapper",Gn.prototype.createXML=function(e){var t,i,n;return n=e.getElementsByTagName("view")[0],i=e.createElement("element"),i.setAttribute("id","adOptions"),n.appendChild(i),t=e.createElement("element"),t.setAttribute("id","adChoices"),t.setAttribute("target",this.config.target),i.appendChild(t),t=e.createElement("element"),t.setAttribute("id","adCountdown"),i.appendChild(t),t=e.createElement("element"),t.setAttribute("id","adCount"),i.appendChild(t),e},i(Un,q),Un.prototype.componentName="ad-choices",Un.prototype.icon=null,Un.prototype.text=null,Un.prototype.container=null,Un.prototype.onRegister=function(){var e;e=this.facade.retrieveProxy(r.NAME),this.container=this.create("ad-choices-link",this,"a"),this.container.target="_blank",this.container.href=e.getTarget(),this.text=this.createText("ad-choices-text","AdChoices",this.container),this.icon=this.create("ad-choices-icon",this.container),Un.__super__.onRegister.call(this)},Un.prototype.listNotificationInterests=function(){return[Co.AD_CONTAINER_CREATED]},Un.prototype.handleNotification=function(e){var t;switch(e.getName()){case Co.AD_CONTAINER_CREATED:t=e.getBody(),null!=t&&t.appendChild(this.viewComponent)}},i(Bn,r),Bn.NAME=r.NAME,Bn.prototype.defaults={target:null},Bn.prototype.getTarget=function(){return this.data.target},Bn.prototype.setTarget=function(e){return this.data.target=e},i(Hn,wn),Hn.prototype.moduleName="ima",Hn.prototype.createFullscreenProxy=function(){return new xn(this.config)},Hn.prototype.createProxy=function(){return new Ei(this.config)},Hn.prototype.isFullscreenDevice=function(){var e;return e=navigator.userAgent,Pt.isFullscreenDevice()||/Android 4\.[0-1]/.test(e)||/CrKey/.test(e)},Hn.prototype.createModel=function(){Hn.__super__.createModel.call(this),null!=this.config.overlay&&this.registerProxy(new _i(this.config.overlay))},Hn.prototype.createController=function(){Hn.__super__.createController.call(this),null!=this.config.overlay&&(this.registerCommand(bo.ADD_OVERLAY,Mn),this.registerCommand(bo.REMOVE_OVERLAY,Ln)),this.registerCommand(uo.READY,Rn),this.registerCommand(uo.FULL_SCREEN_CHANGE,On)},Hn.prototype.createView=function(){Hn.__super__.createView.call(this),null!=this.config.overlay&&this.registerMediator(new kn)},Xt.registerPlugin("ima","html",Hn),Xt.registerPlugin("ima","flash",Dn),i(Fn,Je),Fn.prototype.moduleName="adchoices",Fn.prototype.createModel=function(){this.registerProxy(new Bn(this.config))},Fn.prototype.createView=function(){this.registerMediator(new Un)},Fn.prototype.listNotificationInterests=function(){return[Co.AD_CONTAINER_CREATED]},Xt.registerPlugin("adchoices","html",Fn),Xt.registerPlugin("adchoices","flash",Gn),i(jn,Je),jn.prototype.listNotificationPublications=function(){return jn.__super__.listNotificationPublications.apply(this,arguments).concat([uo.ADD_CONTROL,uo.REMOVE_CONTROL,uo.ADD_CONTROL_STATE,uo.REMOVE_CONTROL_STATE])},i(zn,Tt),zn.prototype.panel=null,zn.prototype.timeout=null,zn.prototype.closePanelDelayed=null,zn.prototype.onRegister=function(){this.closePanelDelayed=this.delayedClosePanel.bind(this),"desktop"===Pt.getDevice()?(this.onmouseleave=this.closePanelDelayed,this.onmouseenter=this.openPanel,this.onclick=this.clickHandler):this.onclick=this.togglePanel,zn.__super__.onRegister.call(this),this.sendNotification(uo.ADD_CONTROL_STATE,""+this.componentName+"-enabled"),this.sendNotification(uo.ADD_CONTROL,this.viewComponent)},zn.prototype.openPanel=function(){clearTimeout(this.timeout),this.sendNotification(Ao.OPEN_PANEL,this.panel),this.panel.viewComponent.addEventListener("mouseleave",this.closePanelDelayed)},zn.prototype.closePanel=function(){Pt.isMouseOverElement(this.panel.viewComponent)||Pt.isMouseOverElement(this.viewComponent)||this.facade.player.retrieveProxy(ut.NAME).getIsUserActive()||(this.panel.viewComponent.addEventListener("mouseleave",this.closePanelDelayed),this.sendNotification(Ao.CLOSE_PANEL,this.panel))},zn.prototype.delayedClosePanel=function(){this.timeout=setTimeout(this.closePanel.bind(this),350)},zn.prototype.togglePanel=function(){this.sendNotification(Ao.TOGGLE_PANEL,this.panel)},zn.prototype.clickPanel=function(){},i(Wn,q),Wn.prototype.componentType="panel",Wn.prototype.control=null,Wn.prototype.onRegister=function(){Wn.__super__.onRegister.call(this),this.sendNotification(Ao.ADD_PANEL,this)},i(Yn,be),Yn.NAME=r.NAME,Yn.prototype.loaded=!0,Yn.prototype.controlName=null,Yn.prototype.getControlName=function(){return this.controlName},Yn.prototype.setControlName=function(e){return this.controlName=e},i(qn,Yn),qn.NAME=r.NAME,qn.prototype.hidden=!0,qn.prototype.getHidden=function(){return this.hidden},qn.prototype.setHidden=function(e){return this.hidden=e,e},i(Zn,qn),Zn.NAME=r.NAME,Zn.prototype.controlName="volume",Zn.prototype.defaults={direction:"vertical"},Zn.prototype.getDirection=function(){return this.data.direction},i(Xn,xt),Xn.NAME="VolumePanelWrapper",Xt.registerPlugin("volumepanel","flash",Xn),i(Jn,zn),Jn.prototype.clickHandler=function(){this.sendNotification(uo.TOGGLE_MUTED)},i(Kn,jt),Kn.prototype.componentName="volume",Kn.prototype.valueChanged=function(){this.sendNotification(uo.CHANGE_VOLUME,this.value),this.sendNotification(Po.UPDATE_SETTINGS,{volume:this.value})},Kn.prototype.listNotificationInterests=function(){return[uo.VOLUME_CHANGE,uo.READY]},Kn.prototype.handleNotification=function(e){switch(e.getName()){case uo.READY:this.updateValue(this.facade.player.retrieveProxy(Ie.NAME).getVolume());break;case uo.VOLUME_CHANGE:this.updateValue(e.getBody())}},i($n,Mi),$n.prototype.panel=null,$n.prototype.control=null,$n.prototype.separator=null,$n.prototype.controls=null,$n.prototype.labels=null,$n.prototype.closed=!0,$n.prototype.panelClass=Wn,$n.prototype.controlClass=zn,$n.prototype.onRegister=function(){this.panel=this.createPanel(this.componentName),this.control=this.createControl(this.componentName),this.separator=this.createSeparator(this.componentName),this.panel.control=this.control,this.control.panel=this.panel,null==this.labels&&(this.labels={}),this.createPanelControls(name)},$n.prototype.createControl=function(e){var t;return t=new this.controlClass(e),this.facade.registerMediator(t),t},$n.prototype.createPanel=function(e){var t;return t=new this.panelClass(e),this.facade.registerMediator(t),t},$n.prototype.createSeparator=function(e){return this.create(["separator","icon"],this.panel)},$n.prototype.createPanelControls=function(e){var t,i,n,o;t=this.plugin.getConfigurationData();for(i in t)n=t[i],n===!0&&(this.controls[i]=this.addPanelControl(new Tt(this.localizationManager.getString(this.labels[i]),null,null,i,null!=(o=this.panelButtonClickHandler)&&"function"==typeof o.bind?o.bind(this,i):void 0)))},$n.prototype.addPanelControl=function(e){return this.facade.registerMediator(e),this.panel.getViewComponent().appendChild(e.getViewComponent()),e},$n.prototype.panelButtonClickHandler=function(){this.sendNotification(Ao.CLOSE_PANEL,this.panel)},i(Qn,$n),Qn.prototype.componentName="volume",Qn.prototype.slider=null,Qn.prototype.level=null,Qn.prototype.controlClass=Jn,Qn.prototype.onRegister=function(){Qn.__super__.onRegister.call(this),this.slider=new Kn(this.panel,this.plugin.getDirection()),this.facade.registerMediator(this.slider)},Qn.prototype.updateVolumeButton=function(e){var t;t=Math.ceil(10*e),t!==this.level&&(null!=this.level&&this.sendNotification(uo.REMOVE_CONTROL_STATE,"volume-"+this.level),this.level=t,this.sendNotification(uo.ADD_CONTROL_STATE,"volume-"+this.level))},Qn.prototype.listNotificationInterests=function(){return Qn.__super__.listNotificationInterests.apply(this,arguments).concat([uo.VOLUME_CHANGE])},Qn.prototype.handleNotification=function(e){switch(Qn.__super__.handleNotification.call(this,e),e.getName()){case uo.VOLUME_CHANGE:this.updateVolumeButton(e.body)}},i(eo,jn),eo.prototype.listNotificationPublications=function(){var e,t;return eo.__super__.listNotificationPublications.call(this).concat(function(){var i;i=[];for(e in Ao)t=Ao[e],i.push(t);return i}())},i(to,eo),to.prototype.moduleName="volumepanel",to.prototype.isVolumeSettable=function(){var e,t,i,n;return i=!1,n=this.player.getMediaElement(),t=n.volume,e=Math.random(),n.volume=e,n.volume===e&&(i=!0),n.volume=t,i},to.prototype.createFramework=function(){this.isVolumeSettable()&&to.__super__.createFramework.call(this)},to.prototype.createModel=function(){this.registerProxy(new Zn(this.config))},to.prototype.createView=function(){this.isVolumeSettable()&&this.registerMediator(new Qn)},to.prototype.listNotificationPublications=function(){return to.__super__.listNotificationPublications.apply(this,arguments).concat([uo.CHANGE_VOLUME,uo.TOGGLE_MUTED,Po.UPDATE_SETTINGS])},to.prototype.listNotificationInterests=function(){return to.__super__.listNotificationInterests.apply(this,arguments).concat([uo.VOLUME_CHANGE,uo.READY])},Xt.registerPlugin("volumepanel","html",to),io.akamai={amp:{AMP:Xt,utils:{Utils:Pt,QueryString:a,Logger:bt}}},window.AKAMAI_MEDIA_PLAYER.saveSDK(no,io)}window.AKAMAI_MEDIA_PLAYER.setVersion(no)}(),Ndn_Require.define("amp_lib",function(){});var _nw2e=_nw2e||[];Ndn_Require.define("models/Akamai/VideoPlayerModel",["jquery","underscore","backbone","models/Ndn/App","models/Ndn/Widget","models/Ndn/Analytics","models/Ndn/Utils/UserAgent","models/Ndn/VideoPlayer/Params","models/Ndn/Debugger","models/Ndn/AdBlockDetection/AdBlockDetector","lib/amp.premier/config/skin/templates","amp_lib"],function(e,t,i,n,o,a,r,s,l,d,c){function u(e,t,i){var n=e,o=i,a=t;switch(o.length){case 0:return n[a]();case 1:return n[a](o[0]);case 2:return n[a](o[0],o[1]);case 3:return n[a](o[0],o[1],o[2]);case 4:return n[a](o[0],o[1],o[2],o[3]);case 5:return n[a](o[0],o[1],o[2],o[3],o[4]);case 6:return n[a](o[0],o[1],o[2],o[3],o[4],o[5]);case 7:return n[a](o[0],o[1],o[2],o[3],o[4],o[5],o[6]);case 8:return n[a](o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7]);case 9:return n[a](o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8]);case 10:return n[a](o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],o[9]);case 11:return n[a](o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],o[9],o[10]);case 12:return n[a](o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],o[9],o[10],o[11]);case 13:return n[a](o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],o[9],o[10],o[11],o[12]);case 14:return n[a](o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],o[9],o[10],o[11],o[12],o[13]);case 15:return n[a](o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],o[9],o[10],o[11],o[12],o[13],o[14]);case 16:return n[a](o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],o[9],o[10],o[11],o[12],o[13],o[14],o[15]);case 17:return n[a](o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],o[9],o[10],o[11],o[12],o[13],o[14],o[15],o[16]);case 18:return n[a](o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],o[9],o[10],o[11],o[12],o[13],o[14],o[15],o[16],o[17]);case 19:return n[a](o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],o[9],o[10],o[11],o[12],o[13],o[14],o[15],o[16],o[17],o[18])}}swfobject.callDomLoadFunctions(),_nw2e.videoPlayer=AKAMAI_MEDIA_PLAYER.noConflict();var p,h=function(e){e.akamaiJsLibFolderUrl=e.akamaiJsLibFolderUrl||o.getAppUrl()+"/js/lib/amp.premier",e.akamaiResourcesFolderUrl=e.akamaiResourcesFolderUrl||o.getAppUrl()+"/resources",e.aaspUrl="http:"==window.location.protocol?"http://players.edgesuite.net/flash/plugins/osmf/advanced-streaming-plugin/v3.4/osmf2.0/AkamaiAdvancedStreamingPlugin.swf":e.akamaiResourcesFolderUrl+"/plugins/AkamaiAdvancedStreamingPlugin.swf";var t="%7B%22flashTablets%22%3A%7B%22label%22%3A%22Android%202%20%26%203%20or%20Kindle%20Fire%201%22%2C%22regexp%22%3A%22Android%20%5B23%5D%7CSilk/1%22%7D%2C%22html5Phones%22%3A%7B%22label%22%3A%22iPhone%22%2C%22regexp%22%3A%22iPhone%22%7D%2C%22html5Tablets%22%3A%7B%22label%22%3A%22HTML5%20Tablets%22%2C%22regexp%22%3A%22iPad%7CAndroid%204%7CSilk/2%22%7D%2C%22desktop%22%3A%7B%22label%22%3A%22Desktop%22%2C%22regexp%22%3A%22%5E%28%28%3F%21iPad%7CiPhone%7CAndroid%7CBlackBerry%7CPlayBook%7CSilk%29.%29*%24%22%7D%2C%22android_4_gets_m3u8%22%3A%7B%22regexp%22%3A%22Android%204%22%7D%7D";return{resources:[],domain:"newsinc.com",target:"_top",params:{auditude_userDataString:"",distributorName:"",producerCategory:"",producerAuditudeId:"",tracking_group:9999,sitesection:"ndn",sec:"oth",sub:"non",plt:"11",wgt:1,fp:0,aud_zone_id:50974,aud_default_asset:"default_ndn",partner_type:"conventional",autoplay:1,continuous_play:1,sound:1,ad_server:"none",trans_time:0,size:"10x10",player_type:11,launcher_type:0,ads_enabled:0,wid:0,share:1,email:0,device_mode:1,external_url:"http://newsinc.com",override_playlist:0,user_token:"ZZZZZZZ",embed_type:0,ndn_session_id:"",rmm:0,wid_type:0,desc_url_type:"http://newsinc.com"},plugins:{AkamaiAdvancedStreamingPlugin:"com.akamai.osmf.AkamaiAdvancedStreamingPluginInfo",ComscorePlugin:e.akamaiResourcesFolderUrl+"/plugins/ComscorePlugin.swf",ComscoreStreamSensePlugin:e.akamaiResourcesFolderUrl+"/plugins/ComscoreStreamSensePlugin.swf"},paths:{player:e.akamaiJsLibFolderUrl+"/",resources:e.akamaiResourcesFolderUrl+"/"},fullscreen:{"native":!0},controls:{autoHide:5,mode:"auto"},info:{title:"#{media.title}",description:"#{media.description}",provider:{name:"#{media.metadata['ndn-provider'].name}",image:"#{media.metadata['ndn-provider'].image}"}},flash:{swf:e.akamaiJsLibFolderUrl+"/AkamaiPremierPlayer.swf",debug:e.akamaiJsLibFolderUrl+"/AkamaiPremierPlayer-debug.swf",vars:{locale_setting:"en",ad_server_timeout:30,ad_media_server_timeout:30,context_menu_mode:"short",overlay_ad_delay:3,volume:1,auto_replay:!1,fullscreen_enabled:!0,share_enabled:!0,auto_play:!1,hinting_rules:t,externalTarget:"_top",domain:"newsinc.com",embedDomain:"newsinc.com",show_play_button_overlay:!1,auto_play_list:!1,core_ads_enabled:!0,suppress_events:"mediaPlayerDataFeedUpdated",next_video_timer:-1},params:{wmode:r.isIe()||r.isFirefox()||r.isSafari()&&r.isWindows()?"transparent":"direct"},xml:c.getTemplate("ndn_assets",e),view:{attributes:{skin:e.akamaiJsLibFolderUrl+"/ndn.assets.swf"},elements:{captionDisplay:{attributes:{initState:"cookie",position:"relative",settingsEnabled:"true",style:"bottom: 26%; height:13%; windowColor:0xffffff; windowOpacity:0; font:Arial; fontColor:0xffffff; fontOpacity:1; fontBGColor:0x000000; fontBGOpacity:0.6; edgeType:none; edgeColor:0x00ff00; edgeOpacity:1; scroll:none; fontSize:12;"}},controls:{attributes:{scrubPosition:"top",backgroundAlpha:".8",height:"51",autoHideDelay:"1",transitionTime:"0.50"},elements:{playPauseBtn:{},scrubBar:{attributes:{collapsedHeight:"5",style:"background: linear-gradient(90deg, #232323 #232323); height: 9px;"}},progressBar:{attributes:{style:"background: linear-gradient(90deg, #0099CC #0099CC);"}},loadedBar:{attributes:{style:"background: linear-gradient(90deg, #666666 #666666);"}},streamTimeIndicator:{attributes:{position:"left"},elements:{streamTime:{},streamDuration:{attributes:{color:"#666666"}}}},captionBtn:{},shareBtn:{},facebookBtn:{},twitterBtn:{},volumeBar:{attributes:{backgroundColor:"#111111",trackColor:"#C1C1C3",color:"#0099CC",position:"relative",width:"25"}},volumeBtn:{},fullscreenBtn:{},posterBackground:{attributes:{color:"#000000",alpha:"1"}}}},loadingView:{attributes:{radius:"0"}},adOptions:{elements:{adChoices:{attributes:{target:"http://assets.newsinc.com/info/adchoices.html"}},adCountdown:{},adCount:{}}}}}},share:{facebook:!0,twitter:!0,enabled:!0},comscore:{url:o.isOnSsl()?"https://sb.scorecardresearch.com/b":"http://b.scorecardresearch.com/b",data:{c1:"1",c2:"11112732",c3:"#{distributorName}",c4:"#{media.metadata['ndn-provider'].name}",c5:"",c6:"#{siteSection}",c10:"#{producerCategory}"},events:{ads:[{type:"started",data:{c4:"#{media.metadata['ndn-provider'].name} 09",c5:"09"}}],video:[{type:"started",data:{c4:"#{media.metadata['ndn-provider'].name} #{mediaAnalyticsC5Value}",c5:"#{mediaAnalyticsC5Value}"}}]}},comscorestreamsense:{enabled:!0,resources:[{type:"text/javascript",src:e.akamaiResourcesFolderUrl+"/js/streamsense.4.1412.05.min.js"}],data:{clientId:"11112732",publisherSecret:"c3798e9f708f2d61a9cf8232b0503d5a",metadata:{ads:{ns_st_ci:"#{videoAssetId}",c3:"#{distributorName}",c4:"#{media.metadata['ndn-provider'].name}",c6:"#{siteSection}",ca2:"null",ca4:"null",ca6:"null"},video:{ns_st_ci:"#{videoAssetId}",c3:"#{distributorName}",c4:"#{media.metadata['ndn-provider'].name}",c6:"#{siteSection}",ca2:"#{comscoreCa2}",ca3:"#{comscoreCa3}",ca6:"null"}}}},ima:{version:3,resources:function(){var t=[{type:"text/javascript",src:window.location.protocol+"//s0.2mdn.net/instream/html5/ima3.js",debug:"//imasdk.googleapis.com/js/sdkloader/ima3_debug.js"}];return 1===e.adBlockDetectionId&&(t.push({id:"GoogleIMAPlugin",src:d.proxify("http://launch.newsinc.com/118/resources/plugins/GoogleIMAPlugin.swf"),blocking:!1,host:"akamai",main:"GoogleIMAPlugin",type:"application/x-shockwave-flash"}),t.push({id:"IMAOverlayAdPlugin",src:d.proxify("http://launch.newsinc.com/118/resources/plugins/IMAOverlayAdPlugin.swf"),blocking:!1,host:"akamai",main:"IMAOverlayAdPlugin",type:"application/x-shockwave-flash"})),t}(),vpaidAllowed:!0,vpaidMode:"enabled",companion:{width:"300",height:"250"},adTagUrl:window.location.protocol+"//pubads.g.doubleclick.net/gampad/ads?ad_rule=1&sz=750x425&iu=#{dfpIuValue}&ciu_szs=#{dfpCiuSzsValue}&vid=#{videoAssetId}&cmsid=1169&vpos=preroll&scor=#{now}&vad_type=linear&description_url=#{encodedEmbedOriginUrl}&playlistId=#{playlistId}&widgetId=#{widgetId}&trackingGroup=#{trackingGroup}&impl=s&gdfp_req=1&env=vp&output=xml_vast"+(n.getSetting("vast3")?"3":"2")+"&unviewed_position_start=1&url=#{encodedEmbedOriginUrl}&correlator=#{now}&cust_params=#{dfpEncodedParams}",enabled:"dfp"==e.adServer,ppid:a.getPpidValue(),disableCompanionAds:!0},auditude:{enabled:"Auditude"==e.adServer,resources:[{type:"text/javascript",src:"http://adunit.cdn.auditude.com/player/js/lib/plugin/1.3/aud.html5player.js"}],defaultId:"ndn_default",videoId:"#{videoAssetId}",domain:"auditude.com",zoneId:"#{aud_zone_id}",version:"ndn-1.0",params:"#{auditudeParams}",userData:{videotype:"#{player.mode}"}},autoplay:!1,volumepanel:{},volume:.75,rules:{PDL:{regexp:"Android 4"},HLS:{regexp:"Mac OS X 10_8_5"}},playoverlay:{enabled:!1},language:"en",locales:{en:{MSG_NEXT_VIDEO:e.adOverlayText,MSG_SECONDS:"seconds"}},debug:l.inMode("ampDebug"),mode:"auto"}},g=!1,m=function(t){var i=e.proxy(function(){try{this.get("isReady")&&(_(this,"setVolume",.01),_(this,"setMuted",!0))}catch(e){}},this),n=e.proxy(function(){try{this.get("isReady")&&(_(this,"setMuted",!1),_(this,"setVolume",.75))}catch(e){}},this),o=e.proxy(function(){this.isMuted()&&this.get("muteInterval")&&(clearInterval(this.get("muteInterval")),this.set("muteInterval",null),l.inMode("muteInterval")&&console.log("[Akamai_VideoPlayerModel] Mute interval unset."))},this);if(t){if(!this.isMuted()){var a=function(e){var t=e.get("widget").getCachedSettings();return t&&"undefined"!=typeof t.settings.muteInterval?t.settings.muteInterval:void 0}(this.get("videoPlayer"));a&&(this.set("muteInterval",setInterval(i,a)),l.inMode("muteInterval")&&console.log("[Akamai_VideoPlayerModel] Mute interval of "+a+" milliseconds was just set."))}i()}else o(),n();this.set("isMuted",t)},f=function(e,t){l.inMode("attemptedEvents")&&console.log("[Akamai_VideoPlayerModel ATTEMTPED EVENT] "+e);var i=function(e){l.inMode("unexpectedEvents")&&console.log("[Akamai_VideoPlayerModel UNEXPECTED EVENT] "+e)},n=this.get("videoPlayer");if(n.getActivePlayer()!==this)return i(e);if("adCompanion"==e){if(t={content:function(){try{if(t.data&&t.data[0])return t.data[0].data||t.data[0].content;if(t.data&&t.data.metadata&&t.data.metadata[0])return t.data.metadata[0].data||t.data.metadata[0].content}catch(e){}return""}()},!t.content)return}else if("videoStart"==e){if(n.isShowingVideo())return i(e);this.set({isShowingVideo:!0,isShowingAd:!1,isPlaying:!0})}else if("adStart"==e){if(n.isShowingAd())return i(e);this.set({isShowingVideo:!1,isShowingAd:!0,isPlaying:!0})}else if("adEnd"==e){if(!n.isShowingAd())return i(e);this.set("isShowingAd",!1),this.set("isPlaying",!1)}else if("videoEnd"==e){if(!n.isShowingVideo())return i(e);this.set("isShowingVideo",!1),this.set("isPlaying",!1)}else if("videoTimeUpdate"==e){if(!n.isShowingVideo()||!n.isPlaying())return void i(e);if(this.getCurrentTime()>this.getDuration())return i(e),void _(this,"end")}else if("pause"==e){if(!n.isShowingVideo()&&!n.isShowingAd()||!n.isPlaying())return i(e);this.set("isPlaying",!1)}else if("play"==e){if(!n.isShowingVideo()&&!n.isShowingAd())return i(e);this.set("isPlaying",!0)}n.trigger(e,t),this.trigger(e,t)},y=function(){var i=this,n=this.get("videoPlayer"),o=i.get("playerInstance"),a="flash"==n.getPlaybackMode(),r=e.proxy(function(e,t){f.call(this,e,t)},this);o.addEventListener("ready",e.proxy(function(i){o.addEventListener("canplay",function(e){r("videoLoadComplete")}),o.addEventListener("started",function(e){r("play",e),r("videoStart",e)}),o.addEventListener("playrequest",e.proxy(function(e){r("playRequest"),r(n.isShowingRmm()?"rmmStartRequest":"videoStartRequest")},this)),o.getMediaElement().addEventListener("loadedmetadata",function(){r("loadedmetadata")}),o.addEventListener("playstatechange",e.proxy(function(e){e&&e.data&&"playing"==e.data.newState&&(this.get("videoPlayer").isShowingAd()&&r("adResume",e),r("play",e),r("videoResume",e))},this)),o.addEventListener("mediaPlayerElementEvent",e.proxy(function(e){e.data&&e.data.element&&t.contains(["playPauseBtn","videoWindow"],e.data.element)&&"click"==e.data.type&&r("playerElementClick",{element:e.data.element})},this)),o.addEventListener("volumechange",e.proxy(function(e){e&&e.data&&"undefined"!=typeof e.data.currentVolume&&this.set("volume",e.data.currentVolume)},this)),o.addEventListener("fullscreenchange",function(e){e.data?r("enteringfullscreen",e):r("exitingfullscreen",e)}),o.addEventListener("volumechange",e.proxy(function(e){this.isMuted()||this.set("volume",e.data.currentVolume),this.get("videoPlayer").isPlayingAd()&&(t.isNumber(e.data.currentVolume)?0==e.data.currentVolume&&this.previous("volume")>0?r("adMute",e):e.data.currentVolume>0&&0==this.previous("volume")&&r("adUnmute",e):t.isNumber(e.data)&&(0==e.data?r("adMute",e):r("adUnmute",e)))},this)),o.addEventListener("loadstart",function(){r("videoLoadStart")}),o.addEventListener("timeupdate",function(e){r("videoTimeUpdate",e)}),o.addEventListener("ended",function(e){r("videoEnd",e)}),o.addEventListener("volumechange",function(e){r("videoVolumeChange")}),o.addEventListener("error",function(e){r("error",e)}),a?o.addEventListener("adComponentAdsRequest",function(e){var t=e.data;r("adRequest",{adTag:t.requestURL,receivedData:t})}):o.ads.addEventListener("request",function(e){r("adRequest",{receivedData:{}})}),function(){var e=function(e){try{var t=e.data;if(t){var i=t.metadata&&t.metadata.wrapperAdIds&&t.metadata.wrapperAdIds[0]||t.id;r("adLoad",{adId:i,adPlatform:t.adPlatform,adSystem:t.adSystem,adTitle:t.title,duration:t.duration,linear:t.linear?1:0,podPosition:t.podPosition,totalAds:t.totalAds,workflow:t.workflow,url:t.requestURL})}}catch(n){}};a?o.addEventListener("adComponentMediaLoaded",e):o.ads.addEventListener("loaded",e)}(),o.addEventListener("mediaPlayerElementEvent",function(e){"volumeBtn"==e.data.element&&"click"==e.data.type&&r("volumeButtonClick")}),o.addEventListener("pause",function(e){r("pause",e)}),o.addEventListener("playstatechange",function(e){e&&e.data&&"paused"==e.data.newState&&!e.player.getEnded()&&r("pause",e)}),o.addEventListener("mediaPlayerElementEvent",function(e){"videoWindow"==e.data.element&&"click"==e.data.type&&r("click",e)}),null!=o.share&&o.share.addEventListener("share",function(e){r("share",e)}),null!=o.captioning&&o.captioning.addEventListener("visibilitychange",function(e){}),o.ads.addEventListener("started",function(e){r("adStart")}),o.ads.addEventListener("ended",function(e){r("adEnd")}),o.ads.addEventListener("timeupdate",function(e){r("adTimeUpdate")}),o.ads.addEventListener("companion",function(e){r("adCompanion",e)}),o.ads.addEventListener("error",function(e){try{var t=e.data.metadata.error;t&&r("adError",{message:t.reason,receivedData:t})}catch(i){}}),o.ads.addEventListener("log",function(e){try{var t=e.data.metadata.metadata.error;t&&r("adError",{message:t.message,receivedData:t})}catch(i){}}),r("playerReady",i)},this))},_=function(e,t){var i=e.get("playerInstance"),n=Array.prototype.slice.call(arguments,2);l.inMode("delegateMethods")&&console.log("---> Akamai_VideoPlayerModel, _delegateMethod(",t,", ",n,");");var o,a=i;try{for(var r=t.split("."),s=0;s<r.length-1;s++){var d=r[s];if(null===a||"object"!=typeof a||"undefined"==typeof a[d])throw"Method parent could not be found.";a=a[d]}if(null===a||"object"!=typeof a)throw"Method parent could not be found.";o=r[r.length-1]}catch(c){l.isEnabled()&&console.log("ERROR TRYING TO FIND DELEGATE METHOD: ",c)}return a&&"function"==typeof a[o]?u(a,o,n):void 0},v=function(){return e.Deferred(e.proxy(function(t){E.call(this).done(e.proxy(function(){this.isSynchronized()?t.resolve():A.call(this).done(function(){t.resolve()})},this))},this))},E=function(){return e.Deferred(e.proxy(function(t){this.get("playerInstance")?t.resolve():this.get("videoPlayer").get("widget").getSettings().done(e.proxy(function(e){b.loadConfig({adServer:e.settings.ads.server,adOverlayText:this.get("params").videoPlayerWidth>350?"Your content starts in ":"Starts in ",hasAdBlock:this.get("videoPlayer").hasAdBlock(),adBlockDetectionId:this.get("videoPlayer").getParams().adBlockDetectionId}),this.set("playerInstance",b.getAmpPremier().create(this.get("videoPlayer").getContainerElementId(),this.getPlayerConfig())),y.call(this),this.onceReady(function(){t.resolve()})},this))},this)).promise()},A=function(){return e.Deferred(e.proxy(function(t){this.onceReady(e.proxy(function(){this.isSynchronized()||(m.call(this,this.get("isMuted")),this.get("isMuted")||_(this,"setVolume",this.get("volume")),_(this,"setAutoplay",this.get("playOnLoad")),_(this,"ads.setEnabled",this.get("adsEnabled")),_(this,"setParams",this.get("params")),_(this,"feed.setData",this.get("videoData")),this.toggleSynchronized(!0)),t.resolve()},this))},this)).promise()},C=function(t){"undefined"==typeof t&&(t=!1);var i=this.get("playerInstance");if(i){var n={currentTime:this.getCurrentTime()},o=["isReady","isShowingAd","isShowingVideo","isMuted"];e.each(o,e.proxy(function(e,i){t&&(n[i]=this.get(i)),this.set(i,this.defaults[i])},this)),this.setMuted(!1),this.set("savedState",n),this.get("videoPlayer").saveOverlays(),i.destroy(),this.set("playerInstance",null),this.set("timesDestructed",this.get("timesDestructed")+1),this.get("videoPlayer").initializeContainerElement(),this.get("videoPlayer").restoreOverlays(),this.toggleSynchronized(!1)}},b=i.Model.extend({defaults:{containerElementId:null,playerConfig:null,videoPlayer:null,playerInstance:null,muteInterval:null,volume:.75,isReady:!1,isShowingAd:!1,isShowingVideo:!1,isPlaying:!1,isMuted:!1,playOnLoad:!1,adsEnabled:!0,params:null,videoData:null,videoDataHasChanged:!1,previousVideoLoadData:null,savedState:null,timesDestructed:0,debugInfo:null},initialize:function(t){this.set({containerElementId:t.getContainerElementId(),videoPlayer:t,adsEventListeners:[]}),this.set("debugInfo",{ampVersion:b.getVersion(),playerConfigDefaults:b.getDebugConfig(),playerConfig:null,videosLoaded:[]}),this.set({playerConfig:null}),this.set("savedState",{}),this.on("volumeButtonClick",e.proxy(function(){this.isMuted()&&this.setMuted(!1)},this)),this.on("playerReady",e.proxy(function(){this.set("isReady",!0)},this)),this.handleClosedCaptioning()},isSynchronized:function(){return!this.get("videoDataHasChanged")},toggleSynchronized:function(e){this.set("videoDataHasChanged",!e)},getPlayerConfig:function(e){"undefined"==typeof e&&(e=!1);var i=this.get("videoPlayer"),n=i.get("widget"),o=n.get("config"),a={share:{facebook:!0,twitter:!0},feed:{enabled:!0},captioning:{enabled:!0}};if(i.isRotatingRmm()&&(a=t.extend(a,{comscore:{enabled:!1},comscorestreamsense:{enabled:!1}})),i.isForcedHtml5Player()&&(a.mode="html"),t.contains(["VideoPlayer/Inline300","VideoPlayer/PTR"],o.type)){var r;e&&(r=b.getDebugConfigParams()),a.flash={xml:c.getTemplate("ndn_assets_small",r)}}return i.hasInfoPanelEnabled()||(a.info={enabled:!1}),a},destroy:function(){C.call(this)},start:function(){if(this.isFlashPlayback()){var e=this.get("previousVideoLoadData");e&&this.load(t.extend({},e,{playOnLoad:!0}))}else this.play()},isFlashPlayback:function(){return"flash"==this.get("videoPlayer").getPlaybackMode()},load:function(t){this.set("previousVideoLoadData",t);var i=t.playOnLoad,n=t.adsEnabled,o=t.params,a=this.getAmpVideoData(t.videoData,t.isBumperVideo);this.setParams(o),this.setPlayOnLoad(i),(i||"flash"!=this.get("videoPlayer").getPlaybackMode())&&v.call(this).done(e.proxy(function(){this.setMuted(t.isMuted),this.setAdsEnabled(n),this.get("playerConfig")&&this.get("debugInfo").playerConfig||(this.get("debugInfo").playerConfig=this.getPlayerConfig(!0),this.set("playerConfig",this.getPlayerConfig())),this.get("debugInfo").videosLoaded.push([["setAutoplay",i],["ads.setEnabled",n],["setParams",o],["feed.setData",a]]),this.loadVideoData(a)},this))},onceReady:function(e){return this.get("isReady")?e():this.once("playerReady",e),this},loadVideoData:function(t){this.set("videoData",t),this.set("videoDataHasChanged",!0),this.get("playOnLoad")?(f.call(this,"videoStartRequest"),v.call(this)):r.isAbleToPlayVideoAutomatically()||v.call(this).done(e.proxy(function(){this.get("playOnLoad")&&this.play()},this))},getCurrentTime:function(){return this.get("playerInstance")?_(this,"getCurrentTime"):this.get("savedState").currentTime},setCurrentTime:function(e){return _(this,"setCurrentTime",e)},getAdDuration:function(){try{return this.get("playerInstance").ads.adVO.metadata.duration}catch(e){return null}},getAdCurrentTime:function(){
try{return this.get("playerInstance").ads.adVO.metadata.currentTime}catch(e){return null}},setPlayOnLoad:function(e){this.set("playOnLoad",e)},getPlayOnLoad:function(){return this.get("playOnLoad")},setAdsEnabled:function(e){this.set("adsEnabled",e)},setParams:function(e){this.set("params",e)},getParams:function(){return this.get("params")},getPlayerInstance:function(){return this.get("playerInstance")},getVideoPlayer:function(){return this.get("videoPlayer")},handleClosedCaptioning:function(){if(r.isOnIos()){var t=this,i=t.getVideoPlayer();t.onceReady(function(){var n=this.getPlayerInstance().getMediaElement();n.setAttribute("crossorigin","anonymous"),t.on("loadedmetadata",function(){if(t.isShowingVideo()){var e=function(){var e=i.getCurrentVideoData();if(e)for(var t=0;t<e.subtitles.length;t++){var n=e.subtitles[t];if("text/vtt"==n.type)return n}}();if(e){var o=document.createElement("track");o.kind="captions",o.label="English",o.srclang="en",o.src=e.url,o.type="text/vtt",o.addEventListener("load",function(){this.mode="disabled",n.textTracks[0].mode="disabled"}),n.appendChild(o)}}}),i.on("videoUnload",function(){e(n).find("track").remove()})})}},setMuted:function(e){l.inMode("mute")&&console.log("Akamai_VideoPlayerModel.setMuted(",arguments,");"),m.call(this,e)},isMuted:function(e){return e=e||!1,e?this.getVolume()<=.01:this.get("isMuted")},setVolume:function(e){this.set("volume",e),this.get("isReady")&&_(this,"setVolume",e)},getVolume:function(){return this.get("volume")},getDuration:function(){return _(this,"getDuration")},play:function(){f.call(this,"videoStartRequest"),v.call(this).done(e.proxy(function(){_(this,"play")},this))},getVideoPlayer:function(){return this.get("videoPlayer")},getProduct:function(){return this.getVideoPlayer().get("widget")},getAmpVideoData:function(e,t){var i=this.getProduct(),n=i.getCachedSettings(),o=this.get("videoPlayer"),a=o.getContainerElement(),r=a.width(),s=a.height(),d=5,c=6,u="Wed, 03 Aug 2011 10:00:21 -0400",p={"@attributes":{version:"2.0"},channel:{category:"",pubDate:u,language:"en",ttl:"10",item:{title:"NDN - AMP Premier",link:"http://akamai.com/player.html",description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc augue sapien, dapibus vitae imperdiet vitae, ullamcorper eget tortor. In lorem eros, porttitor quis commodo et, egestas a odio. Nunc eu augue sit amet dolor malesuada condimentum in eu velit. Donec commodo bibendum egestas. In viverra condimentum dapibus. Praesent molestie, dolor a laoreet cursus, massa sem varius tellus, at consectetur mauris ligula at dolor. Etiam semper augue et risus mattis iaculis tincidunt odio sodales. Vivamus eget elit quis metus pulvinar condimentum. Donec et vestibulum dui. Proin ultricies ligula sed felis pretium at adipiscing tortor bibendum. Morbi et ligula non massa facilisis lacinia. Duis at ligula mauris. Nullam ipsum tortor, lobortis eget adipiscing eu, sagittis eu sapien. Nunc dictum porttitor lobortis. Suspendisse cursus mollis lorem sed ultrices",category:"",pubDate:u,"ndn-provider":{id:e.provider.trackingGroup,name:e.provider.name,image:e.provider.logoUrl},"media-group":{"media-content":function(e){for(var i=[],n=0;n<e.length;n++){var o=e[n],a={"@attributes":{url:function(){var e=o.url.replace(" ",""),t=/^(rtmp:.*)\.flv$/gi.exec(e);return t&&(e=t[1]),/\.f4m\?/.exec(e)&&(e+="&hdcore=1"),e}(),medium:o.medium,type:o.type,duration:t?c:o.duration,width:640,height:360}},r={"video/mp4":"PDL","video/flv":"RMTP","video/x-flv":"RMTP","application/x-mpeg":"HLS","application/x-mpegURL":"HLS","video/f4m":"HDS"};"undefined"!=typeof r[o.type]&&(a["media-category"]={"@attributes":{schema:"http://mrss.akamai.com/user_agent_hint",label:r[o.type]}}),0==n&&(a["@attributes"].isDefault="true"),i.push(a)}return i}(e.mediaContent),"media-title":e.videoTitle,"media-subTitle":function(){for(var t=[],i=0;i<e.subtitles.length;i++){var n=e.subtitles[i];t.push({"@attributes":{type:n.type,lang:n.language,href:n.url}})}return t.length?t:null}(),"media-description":e.description,"media-thumbnail":{"@attributes":{url:o.getDynamicStillImages().getActiveStillImage(),width:(r||"604")+"",height:(s||"341")+""}}}}}},h=n.settings.share.enabled&&n.settings.share.socialNetworks.enabled&&e.settings.share.embedCode.enabled;return h&&(p.channel.item["media-group"]["media-embed"]={"@attributes":{url:"http://player.js",width:(r||"604")+"",height:(s||"341")+""},"media-param":{"@attributes":{name:"type"},"#text":"text/javascript"}}),t&&(p.channel.item["media-group"]["akamai-subclip"]={"akamai-start":d+"","akamai-end":d+c+""}),l.inMode("ampVideoData")&&console.log("[[ampVideoData]]",p),p},end:function(){this.isPlaying()&&_(this,"end")},pause:function(){this.isPlaying()&&_(this,"pause")},enableControls:function(){return _(this,"controls.setMode","auto")},disableControls:function(){return _(this,"controls.setMode","none")},isShowingVideo:function(){return this.get("isShowingVideo")},isShowingAd:function(){return this.get("isShowingAd")},isPlaying:function(){return this.get("isPlaying")},isPlayingVideo:function(){return this.get("isPlaying")&&this.get("isShowingVideo")},isPlayingAd:function(){return this.get("isPlaying")&&this.get("isShowingAd")},getDebugInfo:function(){return t.extend({},this.get("debugInfo"),{playerConfigDefaults:b.getDebugConfig()})}},{getVersion:function(){var e,t=_nw2e.videoPlayer.version||b.getAmpPremier().VERSION;return(e=t.match(/v([0-9.]+)$/))&&e[1]?e[1]:null},getAmpPremier:function(){return _nw2e.videoPlayer.akamai.amp.AMP},loadConfig:function(e){g||(p=this.getTestConfig(e),b.getAmpPremier().loadDefaults(b.getConfig(e)),g=!0)},getPlaybackMode:function(){return b.getAmpPremier().getPlaybackMode()},getConfig:function(e){return h(t.extend({},e))},getDebugConfigParams:function(){return{akamaiJsLibFolderUrl:"../amp.premier",akamaiResourcesFolderUrl:"../resources"}},getTestConfig:function(e){return h(t.extend({},e,b.getDebugConfigParams()))},getDebugConfig:function(){return p}});return b}),Ndn_Require.define("models/Ndn/VideoPlayer/OverlayAbstractModel",["jquery","backbone"],function(e,t){return t.Model.extend({initialize:function(){t.Model.prototype.initialize.apply(this,arguments),this.set("isShowing",!1)},hide:function(){"function"==typeof this.get("view").hide?this.get("view").hide():this.get("view").$el.hide(),this.set("isShowing",!1)},show:function(){"function"==typeof this.get("view").show?this.get("view").show():this.get("view").$el.prependTo(this.get("videoPlayer").getContainerElement()).show(),this.set("isShowing",!0)},isShowing:function(){return!!this.get("isShowing")}})}),Ndn_Require.define("text!templates/ndn/video-player/enforce-visibility-overlay.html",[],function(){return'<div class="ndn_enforceVisibilityOverlay ndn_playerOverlay">\n	<span class="ndn_errorMessage">This video player must be at least {{minimumDimensions}} pixels in order to operate.</span>\n</div>'}),Ndn_Require.define("views/Ndn/VideoPlayer/EnforceVisibilityOverlayView",["jquery","backbone","mustache","models/Ndn/Widget","models/Ndn/Utils/UserAgent","text!templates/ndn/video-player/enforce-visibility-overlay.html"],function(e,t,i,n,o,a){return t.View.extend({initialize:function(){t.View.prototype.initialize.call(this,arguments),o.isMobile()?this.$el=e(i.to_html(a,{minimumDimensions:this.model.get("minimumMobileWidth")+"x"+this.model.get("minimumMobileHeight")})):this.$el=e(i.to_html(a,{minimumDimensions:this.model.get("minimumWidth")+"x"+this.model.get("minimumHeight")}))}})}),Ndn_Require.define("jquery_resize",["jquery"],function(e){!function(e,t,i){"$:nomunge";function n(){o=t[s](function(){a.each(function(){var t=e(this),i=t.width(),n=t.height(),o=e.data(this,d);(i!==o.w||n!==o.h)&&t.trigger(l,[o.w=i,o.h=n])}),n()},r[c])}var o,a=e([]),r=e.resize=e.extend(e.resize,{}),s="setTimeout",l="resize",d=l+"-special-event",c="delay",u="throttleWindow";r[c]=250,r[u]=!0,e.event.special[l]={setup:function(){if(!r[u]&&this[s])return!1;var t=e(this);a=a.add(t),e.data(this,d,{w:t.width(),h:t.height()}),1===a.length&&n()},teardown:function(){if(!r[u]&&this[s])return!1;var t=e(this);a=a.not(t),t.removeData(d),a.length||clearTimeout(o)},add:function(t){function n(t,n,a){var r=e(this),s=e.data(this,d);s.w=n!==i?n:r.width(),s.h=a!==i?a:r.height(),o.apply(this,arguments)}if(!r[u]&&this[s])return!1;var o;return e.isFunction(t)?(o=t,n):(o=t.handler,void(t.handler=n))}}}(e,this)}),Ndn_Require.define("models/Ndn/VideoPlayer/EnforceVisibilityOverlayModel",["jquery","models/Ndn/App","models/Ndn/Utils/UrlParser","models/Ndn/Utils/UserAgent","models/Ndn/VideoPlayer/OverlayAbstractModel","views/Ndn/VideoPlayer/EnforceVisibilityOverlayView","jquery_resize"],function(e,t,i,n,o,a){var r=function(){var e=t.getEmbedOriginUrl(),n=i.parseHref(e),o=n.protocol+"//"+n.domain;return"https://tweetdeck.twitter.com"!=o}(),s=function(){if(!r)return!0;var e=this.get("videoPlayer").getContainerElement();return e.is(":visible")||e.hasClass("ndn_loadingOffScreen")?n.isMobile()?n.isMobile()?e.width()>=this.get("minimumMobileWidth")&&e.height()>=this.get("minimumMobileHeight"):void 0:e.width()>=this.get("minimumWidth")&&e.height()>=this.get("minimumHeight"):!1},l=function(){this.get("videoPlayer").get("widget").synchronizeContainerDimensions();var e=s.call(this),t=e!==this.get("meetsVisibilityRequirements");this.set("meetsVisibilityRequirements",e),t&&(e?c.call(this):d.call(this))},d=function(){this.show(),this.set("wasPlayingBeforeViolation",this.get("videoPlayer").isPlaying()),this.get("videoPlayer").pause(),this.trigger("visibilityViolation"),null!==this.get("checkInterval")&&this.set("checkInterval",setInterval(e.proxy(function(){l.call(this)},this),500))},c=function(){this.hide(),this.get("wasPlayingBeforeViolation")&&this.get("videoPlayer").play(),this.trigger("visibilityAppeasement"),clearInterval(this.get("checkInterval")),this.set("checkInterval",null)};return o.extend({defaults:{videoPlayer:null,minimumWidth:300,minimumHeight:168,minimumMobileWidth:250,minimumMobileHeight:141,meetsVisibilityRequirements:null,wasPlayingBeforeViolation:!1,checkInterval:null,view:null},initialize:function(t){this.set({videoPlayer:t,view:new a({model:this})}),this.hide(),t.onceEmbedded(e.proxy(function(){this.get("videoPlayer").getContainerElement().append(this.get("view").$el),t.getContainerElement().resize(e.proxy(function(){l.call(this)},this))},this)),t.addDeliberator("loadAttempt",e.proxy(function(e){l.call(this),this.get("meetsVisibilityRequirements")?e.resolve():this.once("visibilityAppeasement",e.resolve)},this))}})}),Ndn_Require.define("models/Ndn/Utils/FastClick",[],function(){var e="ontouchstart"in window;return function(t){function i(e){return l=!0,s.x=e.targetTouches[0].clientX,s.y=e.targetTouches[0].clientY,s.scroll=window.pageYOffset,!0}function n(e){return l&&(Math.abs(e.targetTouches[0].clientX-s.x)>10||Math.abs(e.targetTouches[0].clientY-s.y)>10)&&(l=!1),!0}function o(e){var t,i;return!l||Math.abs(window.pageYOffset-s.scroll)>5?!0:(t=document.elementFromPoint(s.x,s.y),t.nodeType===Node.TEXT_NODE&&(t=t.parentNode),(-1===t.className.indexOf("ndn_fastClick_clickevent")||-1!==t.className.indexOf("ndn_fastClick_touchandclickevent"))&&(i=document.createEvent("MouseEvents"),i.initMouseEvent("click",!0,!0,window,1,0,0,s.x,s.y,!1,!1,!1,!1,0,null),i.forwardedTouchEvent=!0,t.dispatchEvent(i)),t instanceof HTMLSelectElement||-1!==t.className.indexOf("ndn_fastClick_clickevent")?!1:void e.preventDefault())}function a(e){l=!1}function r(t){if(!window.event)return!0;var i,n=!0,o=window.event.forwardedTouchEvent;return e&&(i=document.elementFromPoint(s.x,s.y),(!i||!o&&-1==i.className.indexOf("ndn_fastClick_clickevent"))&&(n=!1)),n?!0:(t.stopPropagation(),t.preventDefault(),t.stopImmediatePropagation(),!1)}if("undefined"==typeof HTMLElement)return!1;if(!(t instanceof HTMLElement))throw new TypeError("Layer must be instance of HTMLElement");e&&(t.addEventListener("touchstart",i,!0),t.addEventListener("touchmove",n,!0),t.addEventListener("touchend",o,!0),t.addEventListener("touchcancel",a,!0)),t.addEventListener("click",r,!0),t.onclick instanceof Function&&(t.addEventListener("click",t.onclick,!1),t.onclick="");var s={x:0,y:0,scroll:0},l=!1}}),Ndn_Require.define("text!templates/ndn/video-player/start-overlay.html",[],function(){return'<div class="ndn_startOverlayContainer ndn_playerOverlay">\n    <div class="ndn_pauseVideoInfo">\n        <img class="ndn_pauseVideoLogo" src="" />\n        <div class="ndn_videoTitle"></div>\n        <div class="ndn_videoDescription"></div> \n		<div class="ndn_videoProviderName"></div>      \n        <div class="ndn_toggleDescription ndn_icon_info-circled" title="More Info"></div> \n        <div class="ndn_infoPanelOverlay"></div>\n    </div>\n	<div class="ndn_startOverlay">\n		<div class="ndn_startPlay ndn_fastClick_touchandclickevent"></div>\n	</div>\n</div>'}),Ndn_Require.define("views/Ndn/VideoPlayer/StartOverlayView",["jquery","mustache","backbone","models/Ndn/Utils/FastClick","models/Ndn/Utils/UserAgent","text!templates/ndn/video-player/start-overlay.html"],function(e,t,i,n,o,a){return i.View.extend({events:{mouseover:"onMouseover","click .ndn_startOverlay":"onOverlayClick","click .ndn_toggleDescription":"toggleDescription"},initialize:function(){i.View.prototype.initialize.call(this,arguments),this.$el=e(t.to_html(a,{})),new n(this.$el.find(".ndn_fastClick_touchandclickevent").get(0)),this.description=this.$el.find(".ndn_videoDescription"),this.model.get("videoPlayer").get("widget").get("config").playOnInView&&e(window).on("resize scroll",e.proxy(function(){this.$el.is(":visible")&&this.isInViewVertically()&&this.model.get("videoPlayer").trackVideoStartRequest("playOnInView").resetContinuousPlayCounter().start()},this))},isInViewVertically:function(){var t=this.$el.offset().top,i=t+this.$el.height(),n=e(window).scrollTop(),o=n+e(window).height();return n>t&&i>o||t>=n&&o>=t||i>=n&&o>=i},onOverlayClick:function(){var e=this.model.getDynamicStillImages();e.isEnabled()&&e.recordClick(this.model.getCurrentStillImageDisplayed()),this.model.get("videoPlayer").trackVideoStartRequest("startOverlayClick",{stillImage:this.model.getCurrentStillImageDisplayed()}).resetContinuousPlayCounter().start()},show:function(){this.$el.appendTo(this.model.get("videoPlayer").getContainerElement()).show()},hide:function(){this.$el.hide()},toggleDescription:function(){this.descriptionButton=this.$el.find(".ndn_toggleDescription"),this.descriptionButton.hasClass("ndn_icon_info-circled")?(this.descriptionButton.removeClass("ndn_icon_info-circled"),this.descriptionButton.addClass("ndn_icon_cancel-circled"),this.description.slideToggle("500","swing")):(this.descriptionButton.removeClass("ndn_icon_cancel-circled"),this.descriptionButton.addClass("ndn_icon_info-circled"),this.description.slideToggle("500","swing"))},onMouseover:function(){var e=this.model.get("videoPlayer"),t=e.get("widget"),i=t.get("config");!i.autoPlay&&i.playOnMouseover&&e.trackVideoStartRequest("mouseOverToPlay").resetContinuousPlayCounter().start()}})}),Ndn_Require.define("lib/jquery_plugins/jquery.backstretch.min",["jquery"],function(e){!function(e,t,i){e.fn.backstretch=function(n,o){return(n===i||0===n.length)&&e.error("No images were supplied for Backstretch"),0===e(t).scrollTop()&&t.scrollTo(0,0),this.each(function(){var t=e(this),i=t.data("backstretch");if(i){if("string"==typeof n&&"function"==typeof i[n])return void i[n](o);o=e.extend(i.options,o),i.destroy(!0)}i=new a(this,n,o),t.data("backstretch",i)})},e.backstretch=function(t,i){return e("body").backstretch(t,i).data("backstretch")},e.expr[":"].backstretch=function(t){return e(t).data("backstretch")!==i},e.fn.backstretch.defaults={centeredX:!0,centeredY:!0,duration:5e3,fade:0};var n={left:0,top:0,overflow:"hidden",margin:0,padding:0,height:"100%",width:"100%",zIndex:-999999},o={position:"absolute",display:"none",margin:0,padding:0,border:"none",width:"auto",height:"auto",maxHeight:"none",maxWidth:"none",zIndex:-999999},a=function(i,o,a){this.options=e.extend({},e.fn.backstretch.defaults,a||{}),this.images=e.isArray(o)?o:[o],e.each(this.images,function(){e("<img />")[0].src=this}),this.isBody=i===document.body,this.$container=e(i),this.$root=this.isBody?e(r?t:document):this.$container,i=this.$container.children(".backstretch").first(),this.$wrap=i.length?i:e('<div class="backstretch"></div>').css(n).appendTo(this.$container),this.isBody||(i=this.$container.css("position"),o=this.$container.css("zIndex"),this.$container.css({position:"static"===i?"relative":i,zIndex:"auto"===o?0:o,background:"none"}),this.$wrap.css({zIndex:-999998})),this.$wrap.css({position:this.isBody&&r?"fixed":"absolute"}),this.index=0,this.show(this.index),e(t).on("resize.backstretch",e.proxy(this.resize,this)).on("orientationchange.backstretch",e.proxy(function(){this.isBody&&0===t.pageYOffset&&(t.scrollTo(0,1),this.resize())},this))};a.prototype={resize:function(){try{var e,i={left:0,top:0},n=this.isBody?this.$root.width():this.$root.innerWidth(),o=n,a=this.isBody?t.innerHeight?t.innerHeight:this.$root.height():this.$root.innerHeight(),r=o/this.$img.data("ratio");r>=a?(e=(r-a)/2,this.options.centeredY&&(i.top="-"+e+"px")):(r=a,o=r*this.$img.data("ratio"),e=(o-n)/2,this.options.centeredX&&(i.left="-"+e+"px")),this.$wrap.css({width:n,height:a}).find("img:not(.deleteable)").css({width:o,height:r}).css(i)}catch(s){}return this},show:function(t){if(!(Math.abs(t)>this.images.length-1)){var i=this,n=i.$wrap.find("img").addClass("deleteable"),a={relatedTarget:i.$container[0]};return i.$container.trigger(e.Event("backstretch.before",a),[i,t]),this.index=t,clearInterval(i.interval),i.$img=e("<img />").css(o).bind("load",function(o){var r=this.width||e(o.target).width();o=this.height||e(o.target).height(),e(this).data("ratio",r/o),e(this).fadeIn(i.options.speed||i.options.fade,function(){n.remove(),i.paused||i.cycle(),e(["after","show"]).each(function(){i.$container.trigger(e.Event("backstretch."+this,a),[i,t])})}),i.resize()}).appendTo(i.$wrap),i.$img.attr("src",i.images[t]),i}},next:function(){return this.show(this.index<this.images.length-1?this.index+1:0)},prev:function(){return this.show(0===this.index?this.images.length-1:this.index-1)},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this.next(),this},cycle:function(){return 1<this.images.length&&(clearInterval(this.interval),this.interval=setInterval(e.proxy(function(){this.paused||this.next()},this),this.options.duration)),this},destroy:function(i){e(t).off("resize.backstretch orientationchange.backstretch"),clearInterval(this.interval),i||this.$wrap.remove(),this.$container.removeData("backstretch")}};var r,s=navigator.userAgent,l=navigator.platform,d=s.match(/AppleWebKit\/([0-9]+)/),d=!!d&&d[1],c=s.match(/Fennec\/([0-9]+)/),c=!!c&&c[1],u=s.match(/Opera Mobi\/([0-9]+)/),p=!!u&&u[1],h=s.match(/MSIE ([0-9]+)/),h=!!h&&h[1];r=!((-1<l.indexOf("iPhone")||-1<l.indexOf("iPad")||-1<l.indexOf("iPod"))&&d&&534>d||t.operamini&&"[object OperaMini]"==={}.toString.call(t.operamini)||u&&7458>p||-1<s.indexOf("Android")&&d&&533>d||c&&6>c||"palmGetResource"in t&&d&&534>d||-1<s.indexOf("MeeGo")&&-1<s.indexOf("NokiaBrowser/8.5.0")||h&&6>=h)}(e,window)}),Ndn_Require.define("jquery_autoellipsis",["jquery","underscore"],function(e,t){!function(e,t){function i(t){void 0===window.ndn_ellipsis_handler&&(window.ndn_ellipsis_handler=new EllipsisResizeHandler,e(window).on("resize",function(){clearTimeout(window.ndnResizeTimeout),window.ndnResizeTimeout=setTimeout(function(){window.ndn_ellipsis_handler.onResize.call(window.ndn_ellipsis_handler)},100)})),t.each(function(){window.ndn_ellipsis_handler.$elements=window.ndn_ellipsis_handler.$elements.add(this)})}function n(i,n){var s=i.data("jqae");s||(s={});var l=s.wrapperElement;l||(l=i.wrapInner("<div/>").find(">div"),l.css({margin:"0 0 0 0",padding:0,border:0}));var d=l.data("jqae");d||(d={});var c=d.originalContent;c?l=d.originalContent.clone(!0).data("jqae",{originalContent:c}).replaceAll(l):l.data("jqae",{originalContent:l.clone(!0)}),i.data("jqae",{wrapperElement:l,containerWidth:i.width(),containerHeight:i.height()});var u=i.height(),p=(parseInt(i.css("padding-top"),10)||0)+(parseInt(i.css("border-top-width"),10)||0)-(l.offset().top-i.offset().top),h=!1,g=l;n.selector&&(g=e(l.find(n.selector).get().reverse())),g.each(function(){var i=e(this),s=i.text(),d=!1;if(l.innerHeight()-i.innerHeight()>u+p)i.remove();else if(r(i),i.contents().length){if(h&&(a(i).get(0).nodeValue+=n.ellipsis,h=!1),1==i.contents().length){if(void 0===i.data("jaelh")){var c=l.attr("style"),g=l.html();l.attr("style","height: auto; padding: 0;").html("&nbsp;"),l.data("jaelh",l.innerHeight()),l.html(g),void 0!==c?l.attr("style",c):l.removeAttr("style")}var m=u+p+i.data("jaelh"),f=l.innerHeight(),y=m/f;if(1>y){var _=a(i),v=_.get(0).nodeValue.split(" ");_.get(0).nodeValue=t.first(v,Math.ceil(v.length*y)).join(" ")}}for(;l.innerHeight()>u+p;){if(d=o(i),!d){h=!0,i.remove();break}if(r(i),!i.contents().length){h=!0,i.remove();break}a(i).get(0).nodeValue+=n.ellipsis}"onEllipsis"==n.setTitle&&d||"always"==n.setTitle?i.attr("title",s):"never"!=n.setTitle&&i.removeAttr("title")}})}function o(t){var i=a(t);if(i.length){var n=i.get(0).nodeValue,o=n.lastIndexOf(" ");return o>-1?(n=e.trim(n.substring(0,o)),i.get(0).nodeValue=n):i.get(0).nodeValue="",!0}return!1}function a(e){if(e.contents().length){var t=e.contents(),i=t.eq(t.length-1);return i.filter(s).length?i:a(i)}e.append("");var t=e.contents();return t.eq(t.length-1)}function r(t){if(t.contents().length){var i=t.contents(),n=i.eq(i.length-1);if(n.filter(s).length){var o=n.get(0).nodeValue;return o=e.trim(o),""==o?(n.remove(),!0):!1}for(;r(n););return n.contents().length?!1:(n.remove(),!0)}return!1}function s(){return 3===this.nodeType}function l(e,t){p[e]=t,u||(u=window.setInterval(function(){c()},200))}function d(e){p[e]&&(delete p[e],p.length||u&&(window.clearInterval(u),u=void 0))}function c(){if(!h){h=!0;for(var t in p)e(t).each(function(){var i,o;i=e(this),o=i.data("jqae"),(o.containerWidth!=i.width()||o.containerHeight!=i.height())&&n(i,p[t])});h=!1}}EllipsisResizeHandler=function(){this.$elements=e(),this.onResize=function(){this.$elements.ellipsis()}};var u,p={},h=!1,g={ellipsis:"...",setTitle:"never",live:!1};e.fn.ellipsis=function(t,o){var a,r;return a=e(this),"string"!=typeof t&&(o=t,t=void 0),r=e.extend({},g,o),r.selector=t,a.each(function(){var t=e(this);n(t,r)}),r.live?l(a.selector,r):d(a.selector),r.updateOnWindowResize&&i(a),this}}(e,t)}),Ndn_Require.define("models/Ndn/VideoPlayer/StartOverlayModel",["jquery","underscore","models/Ndn/VideoPlayer/OverlayAbstractModel","views/Ndn/VideoPlayer/StartOverlayView","models/Ndn/Utils/UserAgent","models/Ndn/App","models/Ndn/Debugger","lib/jquery_plugins/jquery.backstretch.min","jquery_autoellipsis"],function(e,t,i,n,o,a,r){return i.extend({defaults:{videoPlayer:null,view:null},initialize:function(t){this.set({videoPlayer:t,images:[]}),this.set("view",new n({model:this})),this.get("videoPlayer").onceEmbedded(e.proxy(function(){this.get("videoPlayer").getContainerElement().append(this.get("view").$el.hide())},this));var i=e.proxy(function(){this.hide()},this);t.getDynamicStillImages().on({updatedImage:e.proxy(function(e){this.displayStillImage(e)},this)}),t.on({videoLoad:e.proxy(function(n){var o=t.getCurrentVideoData();o.videoId;r.inMode("kraken")&&console.log("[Ndn_VideoPlayer_StartOverlayModel] videoLoad, currentVideoData ==",o),this.get("videoPlayer").onceEmbedded(e.proxy(function(){n.playOnLoad||(this.show(),this.get("videoPlayer").once("videoTimeUpdate",i),this.get("videoPlayer").get("widget").get("config").adsEnabled&&this.get("videoPlayer").once("adTimeUpdate",i))},this))},this),play:i,videoStartRequest:i,adStart:i,videoStart:i})},getDynamicStillImages:function(){return this.get("videoPlayer").getDynamicStillImages()},getCurrentStillImageDisplayed:function(){return this.getDynamicStillImages().getActiveStillImage()},show:function(){var e=this.get("view").$el.find(".ndn_pauseVideoInfo"),t=this.get("videoPlayer").getCurrentVideoData();e.find(".ndn_videoTitle").html(t.videoTitle),e.find(".ndn_videoProviderName").html(t.provider.name),e.find(".ndn_videoDescription").html(t.description),e.find("img").attr("src",t.provider.logoUrl),e.show(),this.get("view").$el.prependTo(this.get("videoPlayer").getContainerElement()).show()},displayStillImage:function(e){var t=this.get("view").$el;t.backstretch(e,{fade:300})}})}),Ndn_Require.define("text!templates/ndn/video-player/pause-overlay/overlay.html",[],function(){return'<div class="ndn_pauseVideoInfoContainer">\n	<div class="ndn_pauseVideoInfo">\n		<img class="ndn_pauseVideoLogo" src="" />\n        <div class="ndn_videoTitle"></div>\n        <div class="ndn_videoDescription"></div>\n        <div class="ndn_videoProviderName"></div>      \n        <div class="ndn_toggleDescription ndn_icon_info-circled" title="More Info"></div>\n        <div class="ndn_toggleShare ndn_icon_share" title="Share"></div> \n        <div class="ndn_infoPanelOverlay"></div>\n    </div>\n</div>    \n<div class="ndn_pauseOverlay ndn_overlayContainer"> \n    <div class="ndn_pauseOverlay_centerContainer">\n        <div class="ndn_startPlay ndn_fastClick_touchandclickevent"></div>\n    </div>\n    <div class="ndn_pauseCarousel"></div>\n</div>\n'}),Ndn_Require.define("text!templates/ndn/video-player/pause-overlay/carousel.html",[],function(){return'<div class="ndn_sliderContainer">\n	<div class="ndn_sliderPrev ndn_sliderNavButton ndn_icon_left-circled"></div>\n	<div class="ndn_sliderWrapper">\n	<ul class="ndn_sliderItems ndn_pauseOverlay_selectableVideos">\n        {{#playlistItems}}\n        <li class="ndn_pauseOverlay_selectableVideo" data-video-id="{{videoId}}" title="{{videoTitle}}" data-video-index="{{videoIndex}}"> \n        	<div class="ndn_thumbnailContainer"> 		        \n	           	<img data-src="{{thumbnailUrl}}" alt="{{videoTitle}}" title="{{videoTitle}}"/>		\n        	</div>   	\n			<div class="ndn_sliderThumbnailTitle">\n                <div>{{videoTitle}}</div>\n			</div>\n        </li>\n        {{/playlistItems}}\n    </ul>\n	</div>\n	<div class="ndn_sliderNext ndn_sliderNavButton ndn_icon_right-circled"></div>\n</div>\n'}),Ndn_Require.define("jquery_imagesloaded",["jquery"],function(e,t){var i="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";e.fn.imagesLoaded=function(n){function o(){var t=e(p),i=e(h);l&&(h.length?l.reject(c,t,i):l.resolve(c)),e.isFunction(n)&&n.call(s,c,t,i)}function a(e){r(e.target,"error"===e.type)}function r(t,n){t.src===i||-1!==e.inArray(t,u)||(u.push(t),n?h.push(t):p.push(t),e.data(t,"imagesLoaded",{isBroken:n,src:t.src}),d&&l.notifyWith(e(t),[n,c,e(p),e(h)]),c.length===u.length&&(setTimeout(o),c.unbind(".imagesLoaded",a)))}var s=this,l=e.isFunction(e.Deferred)?e.Deferred():0,d=e.isFunction(l.notify),c=s.find("img").add(s.filter("img")),u=[],p=[],h=[];return e.isPlainObject(n)&&e.each(n,function(e,t){"callback"===e?n=t:l&&l[e](t)}),c.length?c.bind("load.imagesLoaded error.imagesLoaded",a).each(function(n,o){var a=o.src,s=e.data(o,"imagesLoaded");s&&s.src===a?r(o,s.isBroken):o.complete&&o.naturalWidth!==t?r(o,0===o.naturalWidth||0===o.naturalHeight):(o.readyState||o.complete)&&(o.src=i,o.src=a)}):o(),l?l.promise(s):s}}),Ndn_Require.define("jquery_bxslider",["jquery"],function(e){var t={},n={mode:"horizontal",slideSelector:"",infiniteLoop:!0,hideControlOnEnd:!1,speed:500,easing:null,slideMargin:0,startSlide:0,randomStart:!1,captions:!1,ticker:!1,tickerHover:!1,adaptiveHeight:!1,adaptiveHeightSpeed:500,video:!1,useCSS:!0,preloadImages:"visible",touchEnabled:!0,swipeThreshold:50,oneToOneTouch:!0,preventDefaultSwipeX:!0,preventDefaultSwipeY:!1,pager:!0,pagerType:"full",pagerShortSeparator:" / ",pagerSelector:null,buildPager:null,pagerCustom:null,controls:!0,nextText:"Next",prevText:"Prev",nextSelector:null,prevSelector:null,autoControls:!1,startText:"Start",stopText:"Stop",autoControlsCombine:!1,autoControlsSelector:null,auto:!1,pause:4e3,autoStart:!0,autoDirection:"next",autoHover:!1,autoDelay:0,minSlides:1,maxSlides:1,moveSlides:0,slideWidth:0,onSliderLoad:function(){},onSlideBefore:function(){},onSlideAfter:function(){},onSlideNext:function(){},onSlidePrev:function(){}};e.fn.bxSlider=function(o){if(0==this.length)return this;if(this.length>1)return this.each(function(){e(this).bxSlider(o)}),this;var a={},r=this;t.el=this;var s=e(window).width(),l=e(window).height(),d=function(){a.settings=e.extend({},n,o),a.settings.slideWidth=parseInt(a.settings.slideWidth),a.children=r.children(a.settings.slideSelector),a.children.length<a.settings.minSlides&&(a.settings.minSlides=a.children.length),a.children.length<a.settings.maxSlides&&(a.settings.maxSlides=a.children.length),a.settings.randomStart&&(a.settings.startSlide=Math.floor(Math.random()*a.children.length)),a.active={index:a.settings.startSlide},a.carousel=a.settings.minSlides>1||a.settings.maxSlides>1,a.carousel&&(a.settings.preloadImages="all"),a.minThreshold=a.settings.minSlides*a.settings.slideWidth+(a.settings.minSlides-1)*a.settings.slideMargin,a.maxThreshold=a.settings.maxSlides*a.settings.slideWidth+(a.settings.maxSlides-1)*a.settings.slideMargin,a.working=!1,a.controls={},a.interval=null,a.animProp="vertical"==a.settings.mode?"top":"left",a.usingCSS=a.settings.useCSS&&"fade"!=a.settings.mode&&function(){var e=document.createElement("div"),t=["WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var i in t)if(void 0!==e.style[t[i]])return a.cssPrefix=t[i].replace("Perspective","").toLowerCase(),a.animProp="-"+a.cssPrefix+"-transform",!0;return!1}(),"vertical"==a.settings.mode&&(a.settings.maxSlides=a.settings.minSlides),c()},c=function(){r.wrap('<div class="ndn_carousel-wrapper"><div class="ndn_carousel-viewport"></div></div>'),a.viewport=r.parent(),a.loader=e('<div class="ndn_carousel-loading" />'),a.viewport.prepend(a.loader),r.css({width:"horizontal"==a.settings.mode?215*a.children.length+"%":"auto",position:"relative"}),a.usingCSS&&a.settings.easing?r.css("-"+a.cssPrefix+"-transition-timing-function",a.settings.easing):a.settings.easing||(a.settings.easing="swing");m();if(a.viewport.css({width:"100%",overflow:"hidden",position:"relative"}),a.viewport.parent().css({maxWidth:h()}),a.children.css({"float":"horizontal"==a.settings.mode?"left":"none",listStyle:"none",position:"relative"}),a.children.width(g()),"horizontal"==a.settings.mode&&a.settings.slideMargin>0&&a.children.css("marginRight",a.settings.slideMargin),"vertical"==a.settings.mode&&a.settings.slideMargin>0&&a.children.css("marginBottom",a.settings.slideMargin),"fade"==a.settings.mode&&(a.children.css({position:"absolute",zIndex:0,display:"none"}),a.children.eq(a.settings.startSlide).css({zIndex:50,display:"block"})),a.controls.el=e('<div class="ndn_carousel-controls" />'),a.settings.captions&&N(),a.settings.infiniteLoop&&"fade"!=a.settings.mode&&!a.settings.ticker){var t="vertical"==a.settings.mode?a.settings.minSlides:a.settings.maxSlides,i=a.children.slice(0,t).clone().addClass("ndn_carousel-clone"),n=a.children.slice(-t).clone().addClass("ndn_carousel-clone");r.append(i).prepend(n)}a.active.last=a.settings.startSlide==f()-1,a.settings.video&&r.fitVids();var o=a.children.eq(a.settings.startSlide);"all"==a.settings.preloadImages&&(o=r.children()),a.settings.ticker?a.settings.pager=!1:(a.settings.pager&&A(),a.settings.controls&&C(),a.settings.auto&&a.settings.autoControls&&b(),(a.settings.controls||a.settings.autoControls||a.settings.pager)&&a.viewport.after(a.controls.el)),o.imagesLoaded(u)},u=function(){a.loader.remove(),_(),"vertical"==a.settings.mode&&(a.settings.adaptiveHeight=!0),a.viewport.height(p()),r.redrawSlider(),a.settings.onSliderLoad(a.active.index),a.initialized=!0,e(window).bind("resize",H),a.settings.auto&&a.settings.autoStart&&k(),a.settings.ticker&&R(),a.settings.pager&&D(a.settings.startSlide),a.settings.controls&&L(),a.settings.touchEnabled&&!a.settings.ticker&&V()},p=function(){
var t=0,n=e();if("vertical"==a.settings.mode||a.settings.adaptiveHeight)if(a.carousel){var o=1==a.settings.moveSlides?a.active.index:a.active.index*y();for(n=a.children.eq(o),i=1;i<=a.settings.maxSlides-1;i++)n=o+i>=a.children.length?n.add(a.children.eq(i-1)):n.add(a.children.eq(o+i))}else n=a.children.eq(a.active.index);else n=a.children;return"vertical"==a.settings.mode?(n.each(function(i){t+=e(this).outerHeight()}),a.settings.slideMargin>0&&(t+=a.settings.slideMargin*(a.settings.minSlides-1))):t=Math.max.apply(Math,n.map(function(){return e(this).outerHeight(!1)}).get()),t},h=function(){var e="100%";return a.settings.slideWidth>0&&(e="horizontal"==a.settings.mode?a.settings.maxSlides*a.settings.slideWidth+(a.settings.maxSlides-1)*a.settings.slideMargin:a.settings.slideWidth),e},g=function(){var e=a.settings.slideWidth,t=a.viewport.width();return 0==a.settings.slideWidth||a.settings.slideWidth>t&&!a.carousel||"vertical"==a.settings.mode?e=t:a.settings.maxSlides>1&&"horizontal"==a.settings.mode&&(t>a.maxThreshold||t<a.minThreshold&&(e=(t-a.settings.slideMargin*(a.settings.minSlides-1))/a.settings.minSlides)),e},m=function(){var e=1;if("horizontal"==a.settings.mode&&a.settings.slideWidth>0)if(a.viewport.width()<a.minThreshold)e=a.settings.minSlides;else if(a.viewport.width()>a.maxThreshold)e=a.settings.maxSlides;else{var t=a.children.first().width();e=Math.floor(a.viewport.width()/t)}else"vertical"==a.settings.mode&&(e=a.settings.minSlides);return e},f=function(){var e=0;if(a.settings.moveSlides>0)if(a.settings.infiniteLoop)e=a.children.length/y();else for(var t=0,i=0;t<a.children.length;)++e,t=i+m(),i+=a.settings.moveSlides<=m()?a.settings.moveSlides:m();else e=Math.ceil(a.children.length/m());return e},y=function(){return a.settings.moveSlides>0&&a.settings.moveSlides<=m()?a.settings.moveSlides:m()},_=function(){if(a.children.length>a.settings.maxSlides&&a.active.last&&!a.settings.infiniteLoop){if("horizontal"==a.settings.mode){var e=a.children.last(),t=e.position();v(-(t.left-(a.viewport.width()-e.width())),"reset",0)}else if("vertical"==a.settings.mode){var i=a.children.length-a.settings.minSlides,t=a.children.eq(i).position();v(-t.top,"reset",0)}}else{var t=a.children.eq(a.active.index*y()).position();a.active.index==f()-1&&(a.active.last=!0),void 0!=t&&("horizontal"==a.settings.mode?v(-t.left,"reset",0):"vertical"==a.settings.mode&&v(-t.top,"reset",0))}},v=function(e,t,i,n){if(a.usingCSS){var o="vertical"==a.settings.mode?"translate3d(0, "+e+"px, 0)":"translate3d("+e+"px, 0, 0)";r.css("-"+a.cssPrefix+"-transition-duration",i/1e3+"s"),"slide"==t?(r.css(a.animProp,o),r.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){r.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),x()})):"reset"==t?r.css(a.animProp,o):"ticker"==t&&(r.css("-"+a.cssPrefix+"-transition-timing-function","linear"),r.css(a.animProp,o),r.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){r.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),v(n.resetValue,"reset",0),O()}))}else{var s={};s[a.animProp]=e,"slide"==t?r.animate(s,i,a.settings.easing,function(){x()}):"reset"==t?r.css(a.animProp,e):"ticker"==t&&r.animate(s,speed,"linear",function(){v(n.resetValue,"reset",0),O()})}},E=function(){for(var t="",i=f(),n=0;i>n;n++){var o="";a.settings.buildPager&&e.isFunction(a.settings.buildPager)?(o=a.settings.buildPager(n),a.pagerEl.addClass("ndn_carousel-custom-pager")):(o=n+1,a.pagerEl.addClass("ndn_carousel-default-pager")),t+='<div class="ndn_carousel-pager-item"><a href="" data-slide-index="'+n+'" class="ndn_carousel-pager-link">'+o+"</a></div>"}a.pagerEl.html(t)},A=function(){a.settings.pagerCustom?a.pagerEl=e(a.settings.pagerCustom):(a.pagerEl=e('<div class="ndn_carousel-pager" />'),a.settings.pagerSelector?e(a.settings.pagerSelector).html(a.pagerEl):a.controls.el.addClass("ndn_carousel-has-pager").append(a.pagerEl),E()),a.pagerEl.delegate("a","click",w)},C=function(){a.controls.next=e('<a class="ndn_carousel-next" href="">'+a.settings.nextText+"</a>"),a.controls.prev=e('<a class="ndn_carousel-prev" href="">'+a.settings.prevText+"</a>"),a.controls.next.bind("click",I),a.controls.prev.bind("click",P),a.settings.nextSelector&&e(a.settings.nextSelector).append(a.controls.next),a.settings.prevSelector&&e(a.settings.prevSelector).append(a.controls.prev),a.settings.nextSelector||a.settings.prevSelector||(a.controls.directionEl=e('<div class="ndn_carousel-controls-direction" />'),a.controls.directionEl.append(a.controls.prev).append(a.controls.next),a.controls.el.addClass("ndn_carousel-has-controls-direction").append(a.controls.directionEl))},b=function(){a.controls.start=e('<div class="ndn_carousel-controls-auto-item"><a class="ndn_carousel-start" href="">'+a.settings.startText+"</a></div>"),a.controls.stop=e('<div class="ndn_carousel-controls-auto-item"><a class="ndn_carousel-stop" href="">'+a.settings.stopText+"</a></div>"),a.controls.autoEl=e('<div class="ndn_carousel-controls-auto" />'),a.controls.autoEl.delegate(".ndn_carousel-start","click",S),a.controls.autoEl.delegate(".ndn_carousel-stop","click",T),a.settings.autoControlsCombine?a.controls.autoEl.append(a.controls.start):a.controls.autoEl.append(a.controls.start).append(a.controls.stop),a.settings.autoControlsSelector?e(a.settings.autoControlsSelector).html(a.controls.autoEl):a.controls.el.addClass("ndn_carousel-has-controls-auto").append(a.controls.autoEl),M(a.settings.autoStart?"stop":"start")},N=function(){a.children.each(function(t){var i=e(this).find("img:first").attr("title");void 0!=i&&e(this).append('<div class="ndn_carousel-caption"><span>'+i+"</span></div>")})},I=function(e){a.settings.auto&&r.stopAuto(),r.goToNextSlide(),e.preventDefault()},P=function(e){a.settings.auto&&r.stopAuto(),r.goToPrevSlide(),e.preventDefault()},S=function(e){r.startAuto(),e.preventDefault()},T=function(e){r.stopAuto(),e.preventDefault()},w=function(t){a.settings.auto&&r.stopAuto();var i=e(t.currentTarget),n=parseInt(i.attr("data-slide-index"));n!=a.active.index&&r.goToSlide(n),t.preventDefault()},D=function(t){return"short"==a.settings.pagerType?void a.pagerEl.html(t+1+a.settings.pagerShortSeparator+a.children.length):(a.pagerEl.find("a").removeClass("active"),void a.pagerEl.each(function(i,n){e(n).find("a").eq(t).addClass("active")}))},x=function(){if(a.settings.infiniteLoop){var e="";0==a.active.index?e=a.children.eq(0).position():a.active.index==f()-1&&a.carousel?e=a.children.eq((f()-1)*y()).position():a.active.index==a.children.length-1&&(e=a.children.eq(a.children.length-1).position()),"horizontal"==a.settings.mode?v(-e.left,"reset",0):"vertical"==a.settings.mode&&v(-e.top,"reset",0)}a.working=!1,a.settings.onSlideAfter(a.children.eq(a.active.index),a.oldIndex,a.active.index)},M=function(e){a.settings.autoControlsCombine?a.controls.autoEl.html(a.controls[e]):(a.controls.autoEl.find("a").removeClass("active"),a.controls.autoEl.find("a:not(.ndn_carousel-"+e+")").addClass("active"))},L=function(){1==f()?(a.controls.prev.addClass("disabled"),a.controls.next.addClass("disabled")):!a.settings.infiniteLoop&&a.settings.hideControlOnEnd&&(0==a.active.index?(a.controls.prev.addClass("disabled"),a.controls.next.removeClass("disabled")):a.active.index==f()-1?(a.controls.next.addClass("disabled"),a.controls.prev.removeClass("disabled")):(a.controls.prev.removeClass("disabled"),a.controls.next.removeClass("disabled")))},k=function(){if(a.settings.autoDelay>0){setTimeout(r.startAuto,a.settings.autoDelay)}else r.startAuto();a.settings.autoHover&&r.hover(function(){a.interval&&(r.stopAuto(!0),a.autoPaused=!0)},function(){a.autoPaused&&(r.startAuto(!0),a.autoPaused=null)})},R=function(){var t=0;if("next"==a.settings.autoDirection)r.append(a.children.clone().addClass("ndn_carousel-clone"));else{r.prepend(a.children.clone().addClass("ndn_carousel-clone"));var i=a.children.first().position();t="horizontal"==a.settings.mode?-i.left:-i.top}v(t,"reset",0),a.settings.pager=!1,a.settings.controls=!1,a.settings.autoControls=!1,a.settings.tickerHover&&!a.usingCSS&&a.viewport.hover(function(){r.stop()},function(){var t=0;a.children.each(function(i){t+="horizontal"==a.settings.mode?e(this).outerWidth(!0):e(this).outerHeight(!0)});var i=a.settings.speed/t,n="horizontal"==a.settings.mode?"left":"top",o=i*(t-Math.abs(parseInt(r.css(n))));O(o)}),O()},O=function(e){speed=e?e:a.settings.speed;var t={left:0,top:0},i={left:0,top:0};"next"==a.settings.autoDirection?t=r.find(".ndn_carousel-clone").first().position():i=a.children.first().position();var n="horizontal"==a.settings.mode?-t.left:-t.top,o="horizontal"==a.settings.mode?-i.left:-i.top,s={resetValue:o};v(n,"ticker",speed,s)},V=function(){a.touch={start:{x:0,y:0},end:{x:0,y:0}},a.viewport.bind("touchstart",G)},G=function(e){if(a.working)e.preventDefault();else{a.touch.originalPos=r.position();var t=e.originalEvent;a.touch.start.x=t.changedTouches[0].pageX,a.touch.start.y=t.changedTouches[0].pageY,a.viewport.bind("touchmove",U),a.viewport.bind("touchend",B)}},U=function(e){var t=e.originalEvent,i=Math.abs(t.changedTouches[0].pageX-a.touch.start.x),n=Math.abs(t.changedTouches[0].pageY-a.touch.start.y);if(3*i>n&&a.settings.preventDefaultSwipeX?e.preventDefault():3*n>i&&a.settings.preventDefaultSwipeY&&e.preventDefault(),"fade"!=a.settings.mode&&a.settings.oneToOneTouch){var o=0;if("horizontal"==a.settings.mode){var r=t.changedTouches[0].pageX-a.touch.start.x;o=a.touch.originalPos.left+r}else{var r=t.changedTouches[0].pageY-a.touch.start.y;o=a.touch.originalPos.top+r}v(o,"reset",0)}},B=function(e){a.viewport.unbind("touchmove",U);var t=e.originalEvent,i=0;if(a.touch.end.x=t.changedTouches[0].pageX,a.touch.end.y=t.changedTouches[0].pageY,"fade"==a.settings.mode){var n=Math.abs(a.touch.start.x-a.touch.end.x);n>=a.settings.swipeThreshold&&(a.touch.start.x>a.touch.end.x?r.goToNextSlide():r.goToPrevSlide(),r.stopAuto())}else{var n=0;"horizontal"==a.settings.mode?(n=a.touch.end.x-a.touch.start.x,i=a.touch.originalPos.left):(n=a.touch.end.y-a.touch.start.y,i=a.touch.originalPos.top),!a.settings.infiniteLoop&&(0==a.active.index&&n>0||a.active.last&&0>n)?v(i,"reset",200):Math.abs(n)>=a.settings.swipeThreshold?(0>n?r.goToNextSlide():r.goToPrevSlide(),r.stopAuto()):v(i,"reset",200)}a.viewport.unbind("touchend",B)},H=function(t){var i=e(window).width(),n=e(window).height();(s!=i||l!=n)&&(s=i,l=n,r.redrawSlider())};return r.goToSlide=function(t,i){if(!a.working&&a.active.index!=t)if(a.working=!0,a.oldIndex=a.active.index,0>t?a.active.index=f()-1:t>=f()?a.active.index=0:a.active.index=t,a.settings.onSlideBefore(a.children.eq(a.active.index),a.oldIndex,a.active.index),"next"==i?a.settings.onSlideNext(a.children.eq(a.active.index),a.oldIndex,a.active.index):"prev"==i&&a.settings.onSlidePrev(a.children.eq(a.active.index),a.oldIndex,a.active.index),a.active.last=a.active.index>=f()-1,a.settings.pager&&D(a.active.index),a.settings.controls&&L(),"fade"==a.settings.mode)a.settings.adaptiveHeight&&a.viewport.height()!=p()&&a.viewport.animate({height:p()},a.settings.adaptiveHeightSpeed),a.children.filter(":visible").fadeOut(a.settings.speed).css({zIndex:0}),a.children.eq(a.active.index).css("zIndex",51).fadeIn(a.settings.speed,function(){e(this).css("zIndex",50),x()});else{a.settings.adaptiveHeight&&a.viewport.height()!=p()&&a.viewport.animate({height:p()},a.settings.adaptiveHeightSpeed);var n=0,o={left:0,top:0};if(!a.settings.infiniteLoop&&a.carousel&&a.active.last)if("horizontal"==a.settings.mode){var s=a.children.eq(a.children.length-1);o=s.position(),n=a.viewport.width()-s.width()}else{var l=a.children.length-a.settings.minSlides;o=a.children.eq(l).position()}else if(a.carousel&&a.active.last&&"prev"==i){var d=1==a.settings.moveSlides?a.settings.maxSlides-y():(f()-1)*y()-(a.children.length-a.settings.maxSlides),s=r.children(".ndn_carousel-clone").eq(d);o=s.position()}else if("next"==i&&0==a.active.index)o=r.find("> .ndn_carousel-clone").eq(a.settings.maxSlides).position(),a.active.last=!1;else if(t>=0){var c=t*y();o=a.children.eq(c).position()}if("undefined"!=typeof o){var u="horizontal"==a.settings.mode?-(o.left-n):-o.top;v(u,"slide",a.settings.speed)}}},r.goToNextSlide=function(){if(a.settings.infiniteLoop||!a.active.last){var e=parseInt(a.active.index)+1;r.goToSlide(e,"next")}},r.goToPrevSlide=function(){if(a.settings.infiniteLoop||0!=a.active.index){var e=parseInt(a.active.index)-1;r.goToSlide(e,"prev")}},r.startAuto=function(e){a.interval||(a.interval=setInterval(function(){"next"==a.settings.autoDirection?r.goToNextSlide():r.goToPrevSlide()},a.settings.pause),a.settings.autoControls&&1!=e&&M("stop"))},r.stopAuto=function(e){a.interval&&(clearInterval(a.interval),a.interval=null,a.settings.autoControls&&1!=e&&M("start"))},r.getCurrentSlide=function(){return a.active.index},r.getSlideCount=function(){return a.children.length},r.redrawSlider=function(){a.children.add(r.find(".ndn_carousel-clone")).width(g()),a.viewport.css("height",p()),a.settings.ticker||_(),a.active.last&&(a.active.index=f()-1),a.active.index>=f()&&(a.active.last=!0),a.settings.pager&&!a.settings.pagerCustom&&(E(),D(a.active.index))},r.destroySlider=function(){a.initialized&&(a.initialized=!1,e(".ndn_carousel-clone",this).remove(),a.children.removeAttr("style"),this.removeAttr("style").unwrap().unwrap(),a.controls.el&&a.controls.el.remove(),a.controls.next&&a.controls.next.remove(),a.controls.prev&&a.controls.prev.remove(),a.pagerEl&&a.pagerEl.remove(),e(".ndn_carousel-caption",this).remove(),a.controls.autoEl&&a.controls.autoEl.remove(),clearInterval(a.interval),e(window).unbind("resize",H))},r.reloadSlider=function(e){void 0!=e&&(o=e),r.destroySlider(),d()},d(),this}}),Ndn_Require.define("views/Ndn/VideoPlayer/PauseOverlayView",["jquery","underscore","backbone","mustache","models/Ndn/Utils/FastClick","models/Ndn/Utils/UserAgent","text!templates/ndn/video-player/pause-overlay/overlay.html","text!templates/ndn/video-player/pause-overlay/carousel.html","jquery_imagesloaded","jquery_autoellipsis","jquery_bxslider"],function(e,t,i,n,o,a,r,s){return i.View.extend({events:{"click .ndn_pauseOverlay_selectableVideo":"onVideoSelect","click .ndn_pauseOverlay":"resumePlay","click .ndn_startPlay":"resumePlay","click .ndn_sliderNext":"onSliderNextClick","click .ndn_sliderPrev":"onSliderPrevClick","click .ndn_toggleDescription":"toggleDescription","click .ndn_toggleShare":"openShareOverlay"},stopPropagation:function(e){e.stopPropagation()},carousel:null,slides:3,getWidgetContainerElement:function(){var e=this.model.get("videoPlayer").get("widget").getParentWidget();return e.getSplitVersionModel().get("view").$el},initialize:function(){i.View.prototype.initialize.call(this,arguments),this.$el=e(document.createElement("div")).addClass("ndn_pauseOverlayContainer ndn_playerOverlay"),this.model.get("videoPlayer").on("videoLoad",e.proxy(function(){var e=this.$el.is(":visible");e||this.$el.appendTo(this.model.get("videoPlayer").getContainerElement()).show(),this.$el.html()||this.generateHtml(),this.synchronizeVideoData(),this.$el.toggle(e)},this))},generateHtml:function(){this.$el.html(n.to_html(r,this.model.getTemplateData())),new o(this.$el.find(".ndn_fastClick_touchandclickevent").get(0)),this.generateCarousel()},usesCarousel:function(){return"VideoPlayer/Single"==this.model.get("videoPlayer").get("widget").get("config").type&&11!=a.getIeVersion()},generateCarousel:function(){if(this.usesCarousel()){this.$el.find(".ndn_pauseCarousel").html(n.to_html(s,this.model.getCarouselData()));var e=this.model.get("videoPlayer").getContainerElement(),t=e.width()>=this.model.get("fiveSlideWidth"),i=e.width()>=this.model.get("fourSlideWidth")&&e.width()<this.model.get("fiveSlideWidth");if(t)var o=t?5:3;else var o=i?4:3;var a=t?200:140;this.carousel=this.$el.find(".ndn_sliderItems").bxSlider({pager:!1,controls:!1,slideWidth:a,slideMargin:5,minSlides:3,maxSlides:o,onSliderLoad:function(){this.$el.find(".ndn_sliderNext, .ndn_sliderPrev").on("touchstart",function(e){e.target.css("background-color","#0099CC")}).on("touchend",function(e){e.target.css("background-color","#000000")})}.bind(this),onSlideBefore:function(e,t,i){this.loadImagesForSlide(i)}.bind(this)})}},synchronizeVideoData:function(){var e=this.model.getTemplateData(),t=this.$el.find(".ndn_pauseVideoInfo");t.find(".ndn_videoTitle").html(e.currentTitle),t.find(".ndn_videoDescription").html(e.currentDescription),t.find(".ndn_videoProviderName").html(e.providerName),t.find(".ndn_pauseVideoLogo").attr("src",e.producerLogo),this.model.canShowSocialButton()||this.$el.find(".ndn_icon_share").hide()},resumePlay:function(e){return this.hide(),this.model.get("videoPlayer").play(),this.$el.find(".ndn_infoOverlayContainer").css("visibility","visible"),!1},onVideoSelect:t.debounce(function(t){return this.model.get("videoPlayer").resetContinuousPlayCounter(),this.hide(),this.model.get("videoPlayer").trackVideoStartRequest("pauseOverlayCarouselThumbnail").play(e(t.currentTarget).data("video-index")),!1},500,!0),show:function(){this.$el.prependTo(this.model.get("videoPlayer").getContainerElement()).show(),this.usesCarousel()&&(this.carousel.reloadSlider(),this.loadImagesForSlide(0))},hide:function(){this.$el.find(".ndn_infoOverlayContainer").show(),this.$el.find(".ndn_infoOverlayContainer").css("visibility","visible"),this.$el.hide()},loadImagesForSlide:function(t){this.slides=this.$el.find(".ndn_sliderWrapper").width()%120>=108?Math.ceil(this.$el.find(".ndn_sliderWrapper").width()/120):Math.floor(this.$el.find(".ndn_sliderWrapper").width()/120);var i=t*this.slides;this.$el.find('li.ndn_pauseOverlay_selectableVideo:not(".ndn_carousel-clone")').filter(":eq("+i+"), :gt("+i+"):lt("+this.slides+")").each(function(t,i){var n=e(i).data("videoId"),o=this.$el.find('.ndn_pauseOverlay_selectableVideo[data-video-id="'+n+'"]');o.find("img[data-src]").each(function(){e(this).attr("src",e(this).data("src")).removeAttr("data-src")})}.bind(this))},onSliderPrevClick:function(e){return this.carousel.goToPrevSlide(),!1},onSliderNextClick:function(e){return this.carousel.goToNextSlide(),!1},toggleDescription:function(){this.descriptionButton=this.$el.find(".ndn_toggleDescription"),this.description=this.$el.find(".ndn_videoDescription"),this.descriptionButton.hasClass("ndn_icon_info-circled")?(this.descriptionButton.removeClass("ndn_icon_info-circled"),this.descriptionButton.addClass("ndn_icon_cancel-circled"),this.description.slideToggle("500","swing")):(this.descriptionButton.removeClass("ndn_icon_cancel-circled"),this.descriptionButton.addClass("ndn_icon_info-circled"),this.description.slideToggle("500","swing"))},openShareOverlay:function(e){return this.$el.hide(),this.model.get("videoPlayer").get("overlays").share.show(),e.stopPropagation(),e.preventDefault(),!1}})}),Ndn_Require.define("models/Ndn/VideoPlayer/PauseOverlayModel",["jquery","underscore","backbone","models/Ndn/Widget","models/Ndn/VideoPlayer/OverlayAbstractModel","views/Ndn/VideoPlayer/PauseOverlayView","jquery_resize"],function(e,t,i,n,o,a){return o.extend({defaults:{videoPlayer:null,view:null,isShowing:!1,fiveSlideWidth:1022,fourSlideWidth:750},initialize:function(t){this.set("videoPlayer",t),this.set("view",new a({model:this})),this.get("videoPlayer").onceEmbedded(e.proxy(function(){this.get("videoPlayer").getContainerElement().append(this.get("view").$el),this.hide(),this.get("videoPlayer").on("pause",e.proxy(function(){this.show()},this)).on("adStart videoStart play",e.proxy(function(){this.hide()},this)).on("exitingfullscreen",e.proxy(function(){this.get("videoPlayer").isPlaying()&&this.hide()},this))},this)),this.get("videoPlayer").toggleInfoPanel(!1)},getTemplateData:function(){var e=this.get("videoPlayer").get("widget").get("config"),i=this.get("videoPlayer").getCurrentVideoData(),o=n.getAppUrl(),a={videoBaseUrl:o};return i&&(a=t.extend(a,{currentTitle:i.videoTitle,currentThumb:i.stillFrameUrl,providerName:i.provider.name,currentDescription:i.description,producerLogo:i.provider.logoUrl,singleVideoFeed:encodeURIComponent("http://social.newsinc.com/media/json/69017/"+i.videoId+"/singleVideoOG.html?videoId="+i.videoId+"&type=VideoPlayer/16x9&trackingGroup=69017"),singleTwitterVideoFeed:encodeURIComponent("https://social.newsinc.com/media/json/69017/"+i.videoId+"/singleVideoOG.html?videoId="+i.videoId+"&type=VideoPlayer/Single&widgetId=2&trackingGroup=69017"),videoLink:o+"/?type=VideoPlayer/16x9&autoPlay="+e.autoPlay+"&continuousPlay="+e.continuousPlay+"&widgetId="+e.widgetId+"&trackingGroup=69016&playlistId="+e.playlistId+"&width=600&height=500&vcid="+i.videoId,emailLink:"mailto:?subject="+i.videoTitle+"&body=Check out this video:%0A%0A"+i.videoTitle+"%0A"+encodeURIComponent("https://social.newsinc.com/media/json/69017/"+i.videoId+"/singleVideoOG.html?videoId="+i.videoId+"&type=VideoPlayer/16x9&widgetId=2&trackingGroup=69017")})),a},getCarouselData:function(){var e=t.map(this.get("videoPlayer").getActivePlaylistData().items,function(e,t){return e.videoIndex=t,e});e.length=e.length-1;var i=e.length;return 0==i&&this.get("videoPlayer").getContainerElement().find(".ndn_pauseCarousel").hide(),{playlistItems:e}},isShowing:function(){return this.get("isShowing")},canShowSocialButton:function(){var e=this.get("videoPlayer").get("playerData").settings.share.socialNetworks.enabled;return e}})}),Ndn_Require.define("text!templates/ndn/video-player/share-overlay.html",[],function(){return'<div class="ndn_shareContainer ndn_shareTabs">\n\n    <div class="ndn_closeShare ndn_icon_cancel"></div>\n\n    <div class="ndn_shareBox">\n        <div class="ndn_shareButtons">\n            <div class="ndn_shareButtonList">\n                <ul class="ndn_shareButtonsList">\n                    <li class="ndn_mainShareButtons ndn_shareFacebook"><a class="ndn_a_shareFacebook ndn_icon_facebook" target="_blank" href="http://api.addthis.com/oexchange/0.8/forward/facebook/offer?url={{singleVideoFeedEncoded}}&pubid={{addThisPubId}}&ct=1"></a></li>\n                    <li class="ndn_mainShareButtons ndn_shareTwitter"><a class="ndn_a_shareTwitter ndn_icon_twitter" target="_blank" href="http://api.addthis.com/oexchange/0.8/forward/twitter/offer?url={{singleTwitterVideoFeedEncoded}}&title={{shareTitle}}&description={{shareDescription}}&pubid={{addThisPubId}}&ct=1"></a></li>\n                    <li class="ndn_mainShareButtons ndn_shareEmail"><a class="ndn_icon_mail-alt" href="{{emailLink}}"></a></li>\n                    <li class="ndn_mainShareButtons ndn_shareEmbed"><span class="ndn_icon_code"></span></li>\n                </ul>\n                <textarea readonly="" class="ndn_shareCopyVideoLinkText" >{{videoLink}}</textarea>\n            </div>\n\n        </div>\n    </div>\n    <div class="ndn_embedBox">\n        <div class="ndn_backToShare ndn_icon_left-big">BACK</div>\n        <div class="ndn_embedLink">\n        <span class="ndn_shareCopyEmbedCode ndn_linkEmbed">\n            <label for="ndn_shareCopyEmbedCodeText">Embed</label>\n        </span>\n            <textarea readonly="" class="ndn_shareCopyEmbedCodeText" >{{embedCode}}</textarea>\n        </div>\n    </div>\n    <div class="ndn_sharePrivacyPolicy">\n        <a href="http://www.newsinc.com/privacy-policy" target="_blank">Privacy Policy</a> &nbsp; | &nbsp; <a href="http://www.newsinc.com/player-terms" target="_blank">Terms of Use</a>\n    </div>\n</div>'}),Ndn_Require.define("bootstrap_tabs",["jquery"],function(e){!function(e){"use strict";var t=function(t){this.element=e(t)};t.prototype={constructor:t,show:function(){var t,i,n,o=this.element,a=o.closest("ul:not(.dropdown-menu)"),r=o.attr("data-target");r||(r=o.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),o.parent("li").hasClass("ndn_active")||(t=a.find(".active:last a")[0],n=e.Event("show",{relatedTarget:t}),o.trigger(n),n.isDefaultPrevented()||(i=e(r),this.activate(o.parent("li"),a),this.activate(i,i.parent(),function(){o.trigger({type:"shown",relatedTarget:t})})))},activate:function(t,i,n){function o(){a.removeClass("ndn_active").find("> .ndn_dropdown-menu > .ndn_active").removeClass("ndn_active"),t.addClass("ndn_active"),r?(t[0].offsetWidth,t.addClass("ndn_in")):t.removeClass("ndn_fade"),t.parent(".ndn_dropdown-menu")&&t.closest("li.ndn_dropdown").addClass("ndn_active"),n&&n()}var a=i.find("> .ndn_active"),r=n&&e.support.transition&&a.hasClass("ndn_fade");r?a.one(e.support.transition.end,o):o(),a.removeClass("in")}};var i=e.fn.tab;e.fn.tab=function(i){return this.each(function(){var n=e(this),o=n.data("tab");o||n.data("tab",o=new t(this)),"string"==typeof i&&o[i]()})},e.fn.tab.Constructor=t,e.fn.tab.noConflict=function(){return e.fn.tab=i,this},e(document).on("click.ndn_tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault(),e(this).tab("show")})}(e)}),Ndn_Require.define("views/Ndn/VideoPlayer/ShareOverlayView",["jquery","backbone","mustache","text!templates/ndn/video-player/share-overlay.html","jquery_autoellipsis","bootstrap_tabs"],function(e,t,i,n){return t.View.extend({events:{"click .ndn_closeShare":"onCloseClick","mouseenter .ndn_shareCopyVideoLinkText":"selectDirectLink","mouseenter .ndn_shareCopyEmbedCodeText":"selectEmbedCode","click .ndn_shareEmbed":"showEmbedLink","click .ndn_backToShare":"showEmbedLink"},initialize:function(){t.View.prototype.initialize.call(this,arguments),this.$el=e(document.createElement("div")).addClass("ndn_shareOverlay ndn_playerOverlay")},onCloseClick:function(){return this.model.get("videoPlayer").get("overlays").info.show(),this.model.get("videoPlayer").get("overlays").pause.hide(),this.model.get("videoPlayer").get("overlays").share.hide(),this.model.get("videoPlayer").play(),this.$el.find(".ndn_infoOverlayContainer").css("visibility","visible"),!1},updateHtml:function(){var e=this.model.get("videoPlayer").getCurrentVideoData(),t="http://social.newsinc.com/media/json/69017/"+e.videoId+"/singleVideoOG.html?type=VideoPlayer/16x9&trackingGroup=69017&videoId="+e.videoId;twitterShareVideoUrl="https://social.newsinc.com/media/json/69017/"+e.videoId+"/singleVideoOG.html?type=VideoPlayer/Single&widgetId=2&trackingGroup=69017&videoId="+e.videoId,this.$el.html(i.to_html(n,{shareTitle:e.videoTitle,shareDescription:e.description,shareThumb:e.thumbnailUrl,shareVideoId:e.videoId,addThisPubId:"ra-518bbde23f7ed2a9",singleVideoFeed:t,singleTwitterVideoFeed:twitterShareVideoUrl,singleVideoFeedEncoded:encodeURIComponent(t),singleTwitterVideoFeedEncoded:encodeURIComponent(twitterShareVideoUrl),embedCode:this.model.getEmbedCode(),videoLink:this.model.getDirectLink(),emailLink:"mailto:?subject="+e.videoTitle+"&body=Check out this video:%0A%0A"+e.videoTitle+"%0A"+encodeURIComponent("https://social.newsinc.com/media/json/69017/"+e.videoId+"/singleVideoOG.html?videoId="+e.videoId+"&type=VideoPlayer/16x9&widgetId=2&trackingGroup=69017")})),this.model.canShowEmailButton()||(this.model.get("videoPlayer").getContainerElement().find(".ndn_icon_mail-alt").hide(),this.model.get("videoPlayer").getContainerElement().find(".ndn_shareEmail").css("margin","0"),this.model.get("videoPlayer").getContainerElement().find(".ndn_shareFacebook").css("margin-left","9%"),this.model.get("videoPlayer").getContainerElement().find(".ndn_shareTwitter").css("margin-left","9%"),this.model.get("videoPlayer").getContainerElement().find(".ndn_shareEmbed").css("margin-left","9%")),this.model.canShowEmbedButton()||(this.model.get("videoPlayer").getContainerElement().find(".ndn_icon_code").hide(),this.model.get("videoPlayer").getContainerElement().find(".ndn_shareEmbed").css("margin","0"),this.model.get("videoPlayer").getContainerElement().find(".ndn_shareFacebook").css("margin-left","9%"),this.model.get("videoPlayer").getContainerElement().find(".ndn_shareTwitter").css("margin-left","9%"),this.model.get("videoPlayer").getContainerElement().find(".ndn_shareEmbed").css("margin-left","0%")),this.model.canShowSocialButton()||(this.model.get("videoPlayer").getContainerElement().find(".ndn_icon_twitter").hide(),this.model.get("videoPlayer").getContainerElement().find(".ndn_icon_facebook").hide(),this.model.get("videoPlayer").getContainerElement().find(".ndn_shareEmail").hide(),this.model.get("videoPlayer").getContainerElement().find(".ndn_icon_code").hide()),this.model.canShowSocialButton()&&this.model.canShowEmailButton()||this.model.get("videoPlayer").getContainerElement().find(".ndn_shareEmbed").css("margin-left","10%"),this.$el.find(".ndn_infoOverlayContainer").hide()},selectDirectLink:function(){return this.$el.find(".ndn_shareCopyVideoLinkText").select(),!1},selectEmbedCode:function(){return this.$el.find(".ndn_shareCopyEmbedCodeText").select(),!1},showEmbedLink:function(){return this.$el.find(".ndn_shareBox").fadeToggle("fast","linear"),this.$el.find(".ndn_embedBox").fadeToggle("fast","linear"),!1},getWidgetContainerElement:function(){var e=this.model.get("videoPlayer").get("widget").getParentWidget();return e.getSplitVersionModel().get("view").$el},resumePlay:function(e){return this.$el.find(".ndn_shareOverlay").hide(),this.$el.find(".ndn_infoOverlayContainer").show(),this.model.get("videoPlayer").play(),!1}})}),Ndn_Require.define("models/Ndn/VideoPlayer/ShareOverlayModel",["jquery","models/Ndn/VideoPlayer/OverlayAbstractModel","views/Ndn/VideoPlayer/ShareOverlayView","models/Ndn/App","models/Ndn/Widget/Config"],function(e,t,i,n,o){return t.extend({defaults:{videoPlayer:null,view:null},initialize:function(t){this.set("videoPlayer",t),this.set("view",new i({model:this})),this.get("videoPlayer").onceEmbedded(e.proxy(function(){this.get("videoPlayer").getContainerElement().append(this.get("view").$el.hide())},this)),this.get("videoPlayer").on("videoLoad",e.proxy(function(){this.get("view").updateHtml()},this)).on("share",e.proxy(function(e){if(this.get("videoPlayer").pause(),"facebook"==e.data.provider||"twitter"==e.data.provider){this.get("videoPlayer").getContainerElement().find(".ndn_pauseOverlayContainer").hide();var t=this.get("videoPlayer").getCurrentVideoData(),i=encodeURIComponent(this.getShareableUrl()),n=encodeURIComponent("https://social.newsinc.com/media/json/69017/"+t.videoId+"/singleVideoOG.html?type=VideoPlayer/Single&widgetId=2&trackingGroup=69017&videoId="+t.videoId);"facebook"==e.data.provider&&(shareUrl="http://api.addthis.com/oexchange/0.8/forward/"+e.data.provider+"/offer?url="+i+"&pubid=ra-518bbde23f7ed2a9&ct=1",shareUrl+="&title="+t.description),"twitter"==e.data.provider&&(shareUrl="http://api.addthis.com/oexchange/0.8/forward/"+e.data.provider+"/offer?url="+n+"&pubid=ra-518bbde23f7ed2a9&ct=1"),window.open(shareUrl,"","")}"share"==e.data.provider?(this.get("videoPlayer").getContainerElement().find(".ndn_pauseOverlayContainer").hide(),this.show()):this.show()},this))},getEmbedCode:function(){var e=this.get("videoPlayer").get("widget"),t=e.get("config"),i=this.get("videoPlayer").getCurrentVideoData(),n=this.get("videoPlayer").getCurrentPlaylistId();return'<iframe width="590" height="332" src="http://launch.newsinc.com/?type=VideoPlayer/Single&widgetId=1&trackingGroup=69016'+(t.siteSection?"&siteSection="+t.siteSection:"")+"&videoId="+i.videoId+(n?"&playlistId="+n:"")+'" frameborder="no" scrolling="no" noresize marginwidth="0" marginheight="0"></iframe>'},getDirectLink:function(){var e=this.get("videoPlayer").get("widget"),t=e.get("config"),i=this.get("videoPlayer").get("playerData").settings.share.directLink,a=this.get("videoPlayer").getCurrentVideoData(),r=(this.get("videoPlayer").get("playlistId"),!!n.getAppUrlInfo(i.landingPageUrl)),s=r?"":o.getDefaultUrlVarPrefixForConfigSettings(),l="&freewheel="+t.trackingGroup+"&sitesection="+t.siteSection+"&vid="+a.videoId,d=i.landingPageUrl;return-1===d.indexOf("?")&&(d+="?"),d+s+"trackingGroup="+e.get("config").trackingGroup+(t.siteSection?"&"+s+"siteSection="+t.siteSection:"")+"&"+s+"videoId="+a.videoId+(r?"":l)},canShowEmailButton:function(){var e=this.get("videoPlayer").get("playerData").settings.share.email.enabled;return e},canShowSocialButton:function(){var e=this.get("videoPlayer").get("playerData").settings.share.socialNetworks.enabled;
return e},canShowEmbedButton:function(){var e=this.get("videoPlayer").getCurrentVideoData().settings.share.embedCode.enabled;return e},getShareableUrl:function(e){return"undefined"==typeof e&&(e=(this.get("videoPlayer").getCurrentVideoData()||{}).videoId),"http://social.newsinc.com/media/json/69017/"+e+"/singleVideoOG.html?type=VideoPlayer/16x9&trackingGroup=69017&videoId="+e}})}),Ndn_Require.define("text!templates/ndn/video-player/endslate-overlay.html",[],function(){return'<div class="ndn_endslateContainer">\n	{{^mediaIsBlocked}}\n	    <div class="ndn_endslateClickSurface"></div>\n	    {{#showUnavailableAlert}}\n	    <div class="ndn_endslateAlertUnavailable">The requested video is no longer available</div>\n	    {{/showUnavailableAlert}}\n	    <div class="ndn_upNextContainer">\n			<span class="ndn_upNextLabel">Up Next: </span> \n			<div class="ndn_upNextThumbnailContainer">\n		    	<img class="ndn_upNextThumbnail" src="{{upNextThumbnail}}" />\n			</div>\n			<span class="ndn_upNextTitle">{{upNextTitle}}</span>			\n	    </div> \n	    {{#showCountdown}}\n	    <div class="ndn_startsInContainer">\n	        <div class="ndn_startsInLabel">Starts In:</div>\n	        <div class="ndn_startsInCountdownContainer">\n		        <span class="ndn_startsInCountdown">{{countdownValue}}</span>\n	        </div>\n	    </div>\n	    {{/showCountdown}}	    \n	{{/mediaIsBlocked}}\n    {{#mediaIsBlocked}}\n    	<div class="ndn_endslateMediaBlocked">We\'re sorry but this video cannot be played from your location.</div>\n    {{/mediaIsBlocked}}\n</div>'}),Ndn_Require.define("views/Ndn/VideoPlayer/EndslateOverlayView",["jquery","backbone","mustache","models/Ndn/VideoPlayer/EndslateOverlayModel","models/Ndn/Widget","text!templates/ndn/video-player/endslate-overlay.html","jquery_autoellipsis","lib/jquery_plugins/jquery.backstretch.min"],function(e,t,i,n,o,a){return t.View.extend({events:{"click .ndn_endslateClickSurface":"onSurfaceClick"},getWidgetContainerElement:function(){return this.model.get("widget").get("view").$el},initialize:function(){this.setElement(e(document.createElement("div")).addClass("ndn_endslateOverlay ndn_playerOverlay").prependTo(this.model.get("videoPlayer").getContainerElement()).hide().get(0)),this.model.on("endslateFinished",function(){this.trigger("endslateFinished"),this.hide()}.bind(this)).on("change:countdownValue",function(){this.$el.find(".ndn_startsInCountdown").html(this.model.get("countdownValue"))}.bind(this))},hide:function(){this.$el.hide()},show:function(t){this.model.set("type",t),this.model.getNextVideoData().done(e.proxy(function(e){var t=this.model.getTemplateData(e);this.$el.html(i.to_html(a,t)),this.$el.appendTo(this.model.get("videoPlayer").getContainerElement()).show(),void 0!=t.backgroundImage&&(this.$el.backstretch(t.backgroundImage).css("z-index",""),this.$el.find(".backstretch").css("z-index",110)),this.$el.height()<300&&this.$el.find(".ndn_upNextTitle").ellipsis(),this.$el.height()<250&&this.$el.find(".ndn_justWatchedContainer").hide(),this.model.displaysCountdown()&&this.model.countdownToNextPlaylist(),this.model.get("videoPlayer").getContainerElement().find(".ndn_infoOverlayContainer").css("visibility","hidden"),this.$el.prependTo(this.model.get("videoPlayer").getContainerElement()).show()},this))},onSurfaceClick:function(){this.model.get("videoPlayer").trackVideoStartRequest("endslateNextVideoClick"),this.trigger("endslateFinished"),this.model.playNextVideo(),this.hide()}})}),Ndn_Require.define("models/Ndn/VideoPlayer/EndslateOverlayModel",["jquery","underscore","mustache","models/Ndn/VideoPlayer/OverlayAbstractModel","models/Ndn/PlayerServices","views/Ndn/VideoPlayer/EndslateOverlayView"],function(e,t,i,n,o,a){var r=function(){null!==this.get("countdownInterval")&&(clearInterval(this.get("countdownInterval")),this.set({countdownInterval:null,countdownValue:5}))};return n.extend({defaults:{widget:null,videoPlayer:null,type:null,countdownInterval:null,countdownValue:5,view:null},initialize:function(t){t.onceEmbedded(e.proxy(function(){this.set({widget:t.get("widget"),videoPlayer:t}),this.set("view",new a({model:this})),this.get("videoPlayer").on("videoUnavailable",e.proxy(function(){this.get("view").show("videoNotAvailable")},this)).on("playlistEnd",e.proxy(function(){this.get("view").show("endOfPlaylist")},this)).on("isolatedVideoEnd",e.proxy(function(){this.get("view").show("isolatedVideoEnd")},this)).on("continuousPlayEnd",e.proxy(function(){0!=t.get("widget").get("config").continuousPlay&&this.get("view").show("playlistPause")},this)),this.get("widget").on("videoSelect",e.proxy(function(){r.call(this)},this))},this))},getTemplateData:function(e){var i=this.get("videoPlayer").getCurrentVideoData(),n={upNextTitle:e.videoTitle,upNextThumbnail:e.stillImageUrl,showUnavailableAlert:"videoNotAvailable"==this.get("type"),showCountdown:this.displaysCountdown(),mediaIsBlocked:"mediaBlocked"==this.get("type"),countdownValue:this.get("countdownValue")};return i&&null!=i&&(n=t.extend(n,{justWatchedThumbnail:i.stillImageUrl,backgroundImage:i.stillImageUrl})),n},transitionsToNewPlaylist:function(){return t.contains(["endOfPlaylist","videoNotAvailable","isolatedVideoEnd"],this.get("type"))},displaysCountdown:function(){return"isolatedVideoEnd"!=this.get("type")||this.get("widget").get("config").continuousPlay?t.contains(["endOfPlaylist","videoNotAvailable","isolatedVideoEnd"],this.get("type")):!1},getNextVideoData:function(){return e.Deferred(e.proxy(function(t){if("videoNotAvailable"===this.get("type"))var i=this.get("videoPlayer").getCurrentVideoData();else var i=this.get("videoPlayer").getNextVideoData();if(i)return t.resolve(i);var n=this.get("videoPlayer").getNextPlaylistId();o.getPlaylistData(n,this.get("widget")).fail(t.reject).done(e.proxy(function(e){t.resolve(e.items[0])},this))},this)).promise()},countdownToNextPlaylist:function(){this.set("countdownInterval",setInterval(function(){this.get("countdownValue")<=0&&this.trigger("endslateFinished"),this.decrementCountdownValue()}.bind(this),1e3)),this.on("endslateFinished",function(){r.call(this),this.playNextVideo()}.bind(this))},playNextVideo:function(){this.transitionsToNewPlaylist()?"videoNotAvailable"===this.get("type")?this.get("videoPlayer").load(0,this.get("videoPlayer").getNextPlaylistId(),this.get("videoPlayer").get("widget").get("config").autoPlay):this.get("videoPlayer").play(0,this.get("videoPlayer").getNextPlaylistId()):"playlistPause"==this.get("type")?this.get("videoPlayer").play(this.get("videoPlayer").get("currentVideoIndex")+1):this.get("videoPlayer").play()},decrementCountdownValue:function(){this.set("countdownValue",Math.max(0,this.get("countdownValue")-1))},cancelCountdown:function(){r.call(this)},getEndslateType:function(){return this.get("type")}})}),Ndn_Require.define("text!templates/ndn/video-player/info-overlay.html",[],function(){return'<div class="ndn_videoInfo">\n	<img class="ndn_videoProviderLogo" src="{{videoProviderLogo}}" />\n	<div class="ndn_videoTitle">{{videoTitle}}</div>\n	<div class="ndn_videoInfoDescription">{{videoDescription}}</div>\n	<div class="ndn_videoProviderName">{{videoProviderName}}</div>\n	<div class="ndn_toggleInfoDescription ndn_icon_info-circled" title="More Info"></div>\n	<div class="ndn_toggleShare ndn_icon_share" title="Share"></div>\n	<div class="ndn_infoPanelOverlay"></div>\n</div>'}),Ndn_Require.define("views/Ndn/VideoPlayer/InfoOverlayView",["jquery","mustache","backbone","models/Ndn/Utils/FastClick","text!templates/ndn/video-player/info-overlay.html","jquery_autoellipsis"],function(e,t,i,n,o){return i.View.extend({events:{"click .ndn_toggleInfoDescription":"toggleDescription","click .ndn_toggleShare":"openShareOverlay"},initialize:function(){i.View.prototype.initialize.call(this,arguments),this.setElement(e('<div class="ndn_infoOverlayContainer ndn_playerOverlay">').get(0))},toggleDescription:function(){this.descriptionButton=this.$el.find(".ndn_toggleInfoDescription"),this.description=this.$el.find(".ndn_videoInfoDescription"),this.descriptionButton.hasClass("ndn_icon_info-circled")?(this.descriptionButton.removeClass("ndn_icon_info-circled"),this.descriptionButton.addClass("ndn_icon_cancel-circled"),this.description.slideToggle("500","swing")):(this.descriptionButton.removeClass("ndn_icon_cancel-circled"),this.descriptionButton.addClass("ndn_icon_info-circled"),this.description.slideToggle("500","swing"))},openShareOverlay:function(e){return this.model.get("videoPlayer").pause(),this.model.get("videoPlayer").get("overlays").info.hide(),this.model.get("videoPlayer").get("overlays").pause.hide(),this.model.get("videoPlayer").get("overlays").share.show(),!1},updateHtml:function(){var e=this.model.get("videoPlayer").getCurrentVideoData();this.$el.html(t.to_html(o,{videoTitle:e.videoTitle,videoDescription:e.description,videoProviderLogo:e.provider.logoUrl,videoProviderName:e.provider.name})),this.model.canShowSocialButton()||this.$el.find(".ndn_icon_share").hide()}})}),Ndn_Require.define("models/Ndn/VideoPlayer/InfoOverlayModel",["jquery","models/Ndn/VideoPlayer/OverlayAbstractModel","views/Ndn/VideoPlayer/InfoOverlayView","models/Ndn/Widget"],function(e,t,i,n){return t.extend({defaults:{videoPlayer:null,view:null,toggleableDisplay:!0},initialize:function(t){this.set("videoPlayer",t),this.set("view",new i({model:this}));var n=this;this.get("view");t.on({videoLoad:e.proxy(function(t){this.get("view").updateHtml(),this.get("videoPlayer").onceEmbedded(e.proxy(function(){this.show()},this))},this),play:function(){n.setToggleableDisplay(!0).setVisibility(!1)},videoPause:function(){n.setToggleableDisplay(!1).setVisibility(!0,!0)}});this.get("view").$el;t.onceEmbedded(function(){var e=t.getContainerElement();e.on({"mouseenter touchstart":function(){n.get("toggleableDisplay")&&n.setVisibility(!0)},"mouseleave touchend":function(){n.get("toggleableDisplay")&&n.setVisibility(!1)}})})},setVisibility:function(e,t){"undefined"==typeof t&&(t=!1);var i=this.get("view").$el,n="flash"!=this.get("videoPlayer").getPlaybackMode();return n?e?(i.stop(!0,!0).css("display","block").css("visibility","visible"),i.delay(0).fadeIn(900)):i.stop(!0,!0).delay(4700).fadeOut(900):e?i.stop(!0,!0).fadeIn():i.stop(!0,!0).delay(1e3).fadeOut(800),t&&i.stop(!0,!0),this},setToggleableDisplay:function(e){return this.set("toggleableDisplay",e),this},show:function(e){return"VideoPlayer/Inline300"!=this.get("videoPlayer").get("widget").get("config").type&&t.prototype.show.apply(this,arguments),this},canShowSocialButton:function(){var e=this.get("videoPlayer").get("playerData").settings.share.socialNetworks.enabled;return e}})}),Ndn_Require.define("models/Ndn/Utils/DomElement",["jquery"],function(e){var t={};return{getFullHtml:function(e){var t=document.createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML},onceMeetsCondition:function(i,n,o,a){"undefined"==typeof a&&(a=500);var r=e(i);return e.Deferred(function(e){if(n(r))return e.resolve();if(r.data(o))t[o][r.data(o)].done(function(){e.resolve()});else{var i=setInterval(function(){n(r)&&(clearInterval(r.data(o)),r.removeData(o),e.resolve(),delete t[o][i])},a);t[o]=t[o]||{},t[o][i]=e,r.data(o,i)}}).promise()},onceVisible:function(e){return this.onceMeetsCondition(e,function(e){return e.is(":visible")},"isVisible")},onceHasWidthAndHeight:function(e){return this.onceMeetsCondition(e,function(e){return e.width()&&e.height()},"ndnWidthAndHeightInterval")}}});var _nw2e=_nw2e||[];Ndn_Require.define("models/Ndn/Analytics/Comscore",["jquery","require"],function(e,t){var i={paths:{}};i.paths.comscoreLibrary=("https:"==document.location.protocol?"https://sb":"http://b")+".scorecardresearch.com/beacon";var n=_nw2e.requireConfig(i);return{execute:function(e){n(["comscoreLibrary"],function(){COMSCORE.beacon(e)})},executeAdCall:function(e){this.execute({c1:"1",c2:"11112732",c3:e.distributorName,c4:e.providerName+" 09",c5:"09",c6:e.siteSection,c10:e.producerCategory})},executeVideoStartCall:function(e){this.execute({c1:"1",c2:"11112732",c3:e.distributorName,c4:e.providerName+" "+e.mediaAnalyticsC5Value,c5:e.mediaAnalyticsC5Value,c6:e.siteSection,c10:e.producerCategory})}}}),Ndn_Require.define("models/Ndn/Ads/AdPlayer",["jquery","underscore","backbone"],function(e,t,i){return i.Model.extend({defaults:{videoPlayer:null,params:null,containerElement:null,playerInstanceId:null,isReady:null,isActive:!1,adsPlayed:null,isShowingAd:null,debugInfo:null},initialize:function(t){this.set({videoPlayer:t.videoPlayer,params:t.params,containerElement:t.containerElement,isReady:!1,isShowingAd:!1,adsPlayed:0,debugInfo:{jqueryVersion:e.fn.jquery}}),this.on({adEnd:function(){this.set("adsPlayed",this.get("adsPlayed")+1)},adStart:function(){this.set("isShowingAd",!0)}}),this.bubbleEvents(t.videoPlayer),this.on({adStart:function(){this.getContainerElement().show()},"adEnd adTimeout adUnavailable adError":function(){this.trigger("adPlayerEnd",{adsPlayed:this.get("adsPlayed")})},adPlayerEnd:function(){this.getContainerElement().hide()}})},hasParentVideoPlayer:function(){return!!this.get("videoPlayer")},getParams:function(){return this.get("params")},getContainerElement:function(){return this.get("containerElement")},bubbleEvents:function(t){if(this.hasParentVideoPlayer()){var i=this,n=["adPlayerStart","adRequest","adLoad","adStart","adTimeUpdate","adTimeout","adEnd","adError","adUnavailable","adPlayerEnd"];e.each(n,function(){var e=this+"";i.on(e,function(n){i.isActive()&&t.trigger(e,n)})})}},start:function(){this.set("isActive",!0),this.trigger("adPlayerStart")},stop:function(){},toggleReady:function(e){this.set("isReady",e),this.trigger(e?"ready":"unready")},isReady:function(){return this.get("isReady")},isShowingAd:function(){return this.get("isShowingAd")},onceReady:function(e){this.isReady()?e():this.once("ready",function(){e()})},getAdCurrentTime:function(){return 0},getAdDuration:function(){return 0},getPlayerInstanceTypeId:function(){return this.get("playerInstanceId")},isActive:function(){return this.get("isActive")},destruct:function(){this.set({isActive:!1,isShowingAd:!1}),this.getContainerElement().empty(),this.trigger("destruct"),this.off()},debug:function(e){this.set("debugInfo",t.extend(this.get("debugInfo"),e))}},{load:function(e,t,i){}})}),Ndn_Require.define("text!templates/ndn/ads/easi-inform-player.html",[],function(){return'<html>\n<head>\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <script type="text/javascript" src="//cdn.spotxcdn.com/website/integrations/easi/inform/inform-solution.v2.js"></script>\n    <script type="text/javascript">\n        var oAdUnit;\n    \n        function startAd() {\n            window.parent.{{closures.onAdRequest}}();\n            \n            try {\n                oAdUnit = placeAdUnit("inform_container", {\n                    "spotx_channel_id": {{channelId}},\n                    "spotx_content_width": {{width}}, \n                    "spotx_content_height": {{height}}, \n                    "spotx_ad_done_function": "onAdDone",\n                    "custom": \'{{customDataString}}\',\n                    "events": {\n                        \'AdLoaded\': window.parent.{{closures.onAdLoad}},\n                        \'AdStarted\': window.parent.{{closures.onAdStart}}\n                    }\n                });\n            }\n            catch (e) {\n                window.parent.{{closures.onAdError}}(e.getMessage());\n            }\n        }\n        \n        function stopAd() {\n            oAdUnit && oAdUnit.close();\n        }\n        \n        function onAdDone(displayedAd) {\n            window.parent.{{closures.onAdDone}}(displayedAd);\n        }\n    </script>\n</head>\n<body style="margin:0;"><div id="inform_container"></div></body>\n</html>'}),Ndn_Require.define("models/Ndn/Ads/EasiInformPlayer",["jquery","underscore","backbone","mustache","models/Ndn/App","models/Ndn/Utils/UrlParser","models/Ndn/Utils/DomElement","models/Ndn/Utils/UserAgent","models/Ndn/Analytics/Comscore","models/Ndn/Ads/AdPlayer","models/Ndn/Debugger","text!templates/ndn/ads/easi-inform-player.html","lib/jquery_plugins/jquery.json"],function(e,t,i,n,o,a,r,s,l,d,c,u){var p=o.getSetting("easiTimeout")?parseInt(o.getSetting("easiTimeout")):15,h=c.inMode("easi"),g=function(e,t){var i=function(){e()?t():setTimeout(function(){i()},200)};i()},m=d.extend({defaults:{playerInstanceId:4,isPlayerInitialized:!1},initialize:function(e){d.prototype.initialize.call(this,e)},isPlayerInitialized:function(){return this.get("isPlayerInitialized")},initializePlayer:function(){this.isPlayerInitialized()||(this.initializeDom(),this.initializeIframeContent(),this.set("isPlayerInitialized",!0))},initializeDom:function(){var t=this.get("containerElement"),i=t.width(),n=t.height(),o=function(){var o=document.createElement("iframe");return o.scrolling="no",o.style.overflow="hidden",o.style.width=i+"px",o.style.height=n+"px",o.style.border="0",o.style.background="transparent none",e(o).attr("allowTransparency","true"),e(o).addClass("ndn_easiPlayer"),t.get(0).appendChild(o),o}();this.set("iframeElement",o),this.debug({iframeElementHtml:r.getFullHtml(o)})},initializeIframeContent:function(){var e=this.get("iframeElement"),t=this.getIframeContent(),i=e.contentDocument;i.open(),i.write(t),i.close(),this.set("iframeElement",e);var n=this;g(function(){return e&&e.contentWindow&&"function"==typeof e.contentWindow.startAd},function(){n.toggleReady(!0)}),this.debug({iframeContent:t})},getIframeContent:function(){var t=this.get("containerElement"),i=t.width(),o=t.height(),a=this.get("params"),r=this.getChannelId(s.isDesktop()),l={vs:a.videoSizeId,sitesection:a.siteSection,wgt:a.wgtValue,plt:a.pltValue,fp:a.foldPositionId,ab:a.adBlockDetectionId,dpid:a.adTrackingGroupNumber,ei:a.embedIndex,ci:a.widgetId},d=e.toJSON(l),c=this.getIframeClosures(),p=n.to_html(u.replace(/\{\{customDataString\}\}/g,d),{channelId:r,width:i,height:o,closures:c});return this.debug({iframeContent:p,instructions:function(){var t=["var _nw2e = _nw2e || [];","_nw2e.closures = _nw2e.closures || {};"];return e.each(c,function(e,i){t.push(i+" = function() {};")}),t.push("var _when = "+g+";"),t.push("_when(function() { return iframeElement && iframeElement.contentWindow && typeof iframeElement.contentWindow.startAd == 'function'; }, function() { iframeElement.contentWindow.startAd(); });"),t}()}),p},getIframeClosures:function(){var e=this;return{onAdRequest:o.makeClosureGlobal(function(){e.trigger("adRequest",{receivedData:{},playerInstanceType:4})}),onAdLoad:o.makeClosureGlobal(function(){h&&console.log("[Ndn_Ads_EasiInformPlayer] AdLoaded"),e.trigger("adLoad",{})}),onAdStart:o.makeClosureGlobal(function(){h&&console.log("[Ndn_Ads_EasiInformPlayer] AdStarted"),e.trigger("adStart",{})}),onAdDone:o.makeClosureGlobal(function(t){h&&console.log("[Ndn_Ads_EasiInformPlayer] AdDone "+t),e.trigger(t?"adEnd":"adUnavailable")}),onAdError:o.makeClosureGlobal(function(t){e.trigger("adError",{message:t})})}},getChannelId:function(e){return a.getParam("ndn_easiInformPlayerChannelId","query")||this.getParams().easi_channelId||(e?94802:77940)},start:function(){d.prototype.start.apply(this,arguments);var t=this;setTimeout(e.proxy(function(){this.isShowingAd()||(h&&console.log("[Ndn_Ads_EasiInformPlayer] adTimeout"),this.trigger("adTimeout"),this.destruct())},this),1e3*p),this.hasParentVideoPlayer()&&t.get("videoPlayer").logSandboxInstruction("easi",this.get("debugInfo")),this.getContainerElement().show(),r.onceVisible(this.get("containerElement")).done(function(){t.initializePlayer(),t.onceReady(function(){t.get("iframeElement").contentWindow.startAd()})})},stop:function(){this.get("iframeElement").contentWindow.stopAd()}},{load:function(t,i,n){return e.Deferred(e.proxy(function(e){return e.resolve(new m({containerElement:t,params:i,videoPlayer:n}))},this)).promise()}});return m}),Ndn_Require.define("text!templates/ndn/ads/display-ad.html",[],function(){return"<!doctype html>\n<html>\n<head></head>\n<body style=\"margin:0;\">\n<script type=\"text/javascript\">\n    rp_account   = '13402';\n    rp_site      = '83422';\n    rp_zonesize  = '391318-15';\n    rp_adtype    = 'js';\n    rp_smartfile = '[SMART FILE URL]';\n    rp_kw = '{{trackingGroup}}';\n</script>\n<script type=\"text/javascript\" src=\"http://ads.rubiconproject.com/ad/13402.js\"></script>\n<script type=\"text/javascript\">\n    window.informIframeIsLoaded = true;\n</script>\n</body>\n</html>"}),Ndn_Require.define("models/Ndn/Ads/DisplayAd",["jquery","mustache","models/Ndn/App","models/Ndn/Ads/AdPlayer","models/Ndn/Utils/UrlParser","models/Ndn/Debugger","models/Ndn/Analytics/Comscore","text!templates/ndn/ads/display-ad.html","lib/jquery_plugins/jquery.json"],function(e,t,i,n,o,a,r,s){var l=a.inMode("displayAd"),d=!1,c=l?15e9:15,u=n.extend({defaults:{playerInstanceId:6,containerElement:null,isReady:!1,params:null},initialize:function(t){n.prototype.initialize.call(this,t);var i=t.params,o=t.containerElement,r=(t.videoPlayer,300),s=250;a.inMode("adPlayer")&&this.on("all",function(e){console.log("Ndn_Ads_DisplayAd event: "+e)}),this.set({params:i,containerElement:o,iframeElement:function(){var t=document.createElement("iframe");return t.scrolling="no",t.style.overflow="hidden",t.style.width=r+"px",t.style.height=s+"px",t.style.border="0",t.style.background="transparent none",e(t).attr("allowTransparency","true"),e(t).addClass("ndn_easiPlayer"),o.get(0).appendChild(t),t}()}),this.get("iframeElement").onload=e.proxy(function(){this.get("iframeElement").onload=null;var t=e.proxy(function(){if(this.hasLoadedIframePlayer()){this.trigger("adRequest",{receivedData:{},playerInstanceType:this.getPlayerInstanceTypeId()}),this.trigger("adStart",{});var i=this;setTimeout(function(){i.trigger("adEnd")},1e3*c),this.set("isReady",!0)}else window.setTimeout(e.proxy(function(){t()},this),50)},this);t()},this)},getAdDuration:function(){return c},getAdCurrentTime:function(){return 0},start:function(){n.prototype.start.apply(this,arguments);var e=this.get("iframeElement").contentDocument;e.open(),e.write(t.to_html(s,{trackingGroup:this.getParams().adTrackingGroupNumber})),e.close(),this.trigger("adRequest",{receivedData:{},playerInstanceType:6}),this.trigger("adStart",{})},hasLoadedIframePlayer:function(){return!!this.get("iframeElement").contentWindow&&!!this.get("iframeElement").contentWindow.informIframeIsLoaded},getPlayerInstanceTypeId:function(){return this.get("playerInstanceId")}},{load:function(t,i,n){return e.Deferred(e.proxy(function(e){return d?e.reject():(d=!0,e.resolve(new u({containerElement:t,params:i,videoPlayer:n})))},this)).promise()}});return u}),Ndn_Require.define("models/Ndn/Analytics/ComscoreVme",["jquery","backbone"],function(e,t){return t.Model.extend({defaults:{videoPlayer:null,mostRecentAdId:null,isAdSeriesDone:!1,isUiAdSeries:!1},initialize:function(e){this.set("videoPlayer",e);var t=this;e.on({videoLoad:function(i){t.set({isAdSeriesDone:!1,isUiAdSeries:e.getParams().isUiAdSeries})},adLoad:function(e){t.isAdSeriesDone()||t.set("mostRecentAdId",e.adId)},adStart:function(e){t.isAdSeriesDone()||t.placeVmeTag()}})},isAdSeriesDone:function(){return this.get("isAdSeriesDone")},getVmeTag:function(){var e=this.get("videoPlayer"),t=e.get("widget"),i=t.get("config");return"http://b.voicefive.com/c2/18416366/rs.js#c1=3&c3=18416366_VME&c4="+t.getPltValue()+"_"+this.get("mostRecentAdId")+"&c5="+i.siteSection+"&c6=&c10=1&c11="+i.trackingGroup+"&c12=&c13=&c16=gen&ax_vme=1&"},placeVmeTag:function(){var e=this.getVmeTag(),t=document.createElement("script");t.type="text/javascript",t.src=e;var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(t,i),this.get("isUiAdSeries")||this.set("isAdSeriesDone",!0)}})}),Ndn_Require.define("models/Ndn/VideoPlayer/Behavior/RotatingRmm",["jquery","underscore","backbone","models/Ndn/Analytics/Comscore","models/Ndn/Utils/UserAgent"],function(e,t,i,n,o){return i.Model.extend({defaults:{videoPlayer:null,adCallsMade:0,bumpersShown:0},initialize:function(e){this.set("videoPlayer",e);var t=e.get("widget"),i=t.get("view"),o=this;e.on({"videoUnload loadAttempt":function(){i.setVideoPlayerOnScreen(!1)},videoEnd:function(){o.stepInto()},videoStart:function(){o.isShowingBumperVideo()?i.setVideoPlayerOnScreen(!0):setTimeout(function(){o.stepInto()},1e3)},adStart:function(){i.setVideoPlayerOnScreen(!0)},"adEnd adUnavailable adTimeout adError":function(){o.isShowingBumperVideo()||(i.setVideoPlayerOnScreen(!1),o.stepInto())}}),e.once({adStart:function(){n.executeAdCall(e.getParams())},videoStart:function(){n.executeVideoStartCall(e.getParams())}})},stepInto:function(){var e=this,i=this.get("videoPlayer"),n=i.get("widget").getCachedSettings().settings.behavior.rmm,a=function(a,r){return i.loadVideo(t.extend({videoIndex:0,playOnLoad:!0,isRmm:!0,adsEnabled:a,adPlayer:n.adPlayer||"easi",adPlayerData:{easi_channelId:o.isDesktop()?75776:93697},adPlayerFallsbackToAmp:!1,useAmp:r},{adPlayer:n.adPlayer||"amp",adPlayerFallsbackToAmp:!0,useAmp:!0})).done(function(){a&&e.set("adCallsMade",e.get("adCallsMade")+1),i.incrementContinuousPlayCounter()})};this.hasPlayedBumperVideo()?this.hasPlayedAllAds()?(i.resetContinuousPlayCounter(),i.concludeRmmContinuousPlay()):a(!0,!1):a(!this.getRmmSettings().earlyContent,!0).done(function(){e.set("bumpersShown",1)})},getProduct:function(){return this.get("videoPlayer").get("widget")},getRmmSettings:function(){return this.getProduct().getCachedSettings().settings.behavior.rmm},hasPlayedBumperVideo:function(){return this.get("bumpersShown")>0},hasPlayedAllAds:function(){return this.get("adCallsMade")>=this.getRmmSettings().numberOfAdCalls},isShowingBumperVideo:function(){return 0==this.get("videoPlayer").getVideoLoadIndex()}})}),Ndn_Require.define("models/Ndn/VideoPlayer/DynamicStillImages",["jquery","underscore","backbone","models/Ndn/App","models/Ndn/Utils/UserAgent","models/Ndn/Debugger"],function(e,t,i,n,o,a){var r="3b97e3bb-edc0-45d9-b355-edb28c72c815",s={},l=i.Model.extend({defaults:{videoPlayer:null,dynamicStillImagesInitialized:!1,hasDynamicStillImagesEnabled:!1,images:null,activeImageIndex:0,stillImageRotationInterval:null,currentVideoId:null},initialize:function(e){this.set({videoPlayer:e,images:[]})},toggle:function(t){var i=t.videoData,r=t.params,s=i.videoId,d=s!=this.get("currentVideoId");if(this.set("currentVideoId",s),d){this.set("hasDynamicStillImagesEnabled",!1),this.get("stillImageRotationInterval")&&clearInterval(this.get("stillImageRotationInterval")),this.set({activeImageIndex:0,stillImageRotationInterval:null}),this.determineStillImageSize(),this.beginQueue();var c=this.get("videoPlayer");if(n.getSetting("krakenApiEnabled")||e(c.getContainerElement()).resize(e.proxy(function(){this.determineStillImageSize()},this)),!this.get("dynamicStillImagesInitialized")){var u=c.get("widget"),p="VideoPlayer/Single"==u.get("config").type&&"0"==r.playerBehaviorId&&(i.hasDynamicStillImages||!!n.getSetting("forceKraken"))&&!!n.getSetting("krakenApiEnabled");a.inMode("kraken")&&console.log("shouldUseDynamicStillImages ==",p),this.set({hasDynamicStillImagesEnabled:p,dynamicStillImagesInitialized:!0}),p&&l.fetchImages(i.videoId).done(e.proxy(function(t){if(t.length&&(this.set("images",t),this.beginQueue(),this.get("images").length>1)){var i=o.isDesktop()?5e3:4e3;a.inMode("imageInterval")&&console.log("DynamicStillImages, image interval ==",i),this.set("stillImageRotationInterval",setInterval(e.proxy(this.activateNextImage,this),i))}},this))}}},isEnabled:function(){return this.get("hasDynamicStillImagesEnabled")},getImages:function(){return l.fetchImages(this.get("currentVideoId"))},getActiveStillImage:function(){return this.get("images")[this.get("activeImageIndex")]},beginQueue:function(){this.set("activeImageIndex",0),this.update()},activateNextImage:function(){var e=this.get("activeImageIndex"),t=this.get("images").length,i=e==t-1,n=i?0:e+1;this.set("activeImageIndex",n),e!=n&&this.update()},update:function(){this.trigger("updatedImage",this.getActiveStillImage())},determineStillImageSize:function(){var e=this.get("videoPlayer").getCurrentVideoData();this.set({images:[this.get("videoPlayer").getContainerElement().width()<400?e.stillImageUrl:e.stillImageXLUrl]}),this.update()},recordClick:function(){e.post("//dst.infinigraph.com/kraken/v1/visual/click",{external_id:this.get("currentVideoId"),key:r,image:this.getActiveStillImage(),_:e.now()})}},{hasImages:function(e){return t.isArray(s[e])},hasImagesPending:function(e){return!!s[e]&&!this.hasImages(e)},fetchImages:function(t){return e.Deferred(e.proxy(function(i){if(this.hasImages(t))i.resolve(s[t]);else if(this.hasImagesPending(t))s[t].done(function(e){i.resolve(e)}).fail(function(){i.resolve([])});else{s[t]=i;var n=[];e.get("//dst.infinigraph.com/kraken/v1/visual?external_id="+t+"&key="+r+"&_="+e.now()).done(function(i){i.hasOwnProperty("image")?n.push(i.image):i.hasOwnProperty("images")&&e.each(i.images,function(){n.push(this.image)}),s[t]=n,e.each(n,function(){var e=new Image;e.src=this+""})}).always(function(){i.resolve(n)})}},this)).promise()}});return l}),Ndn_Require.define("jquery_responsive_containers",["jquery","jquery_resize"],function(e){!function(e){"use strict";var t={feature:"min-width",value:"800px",className:"",callback:null};e.fn.responsiveContainer=function(i){if("undefined"==typeof i.feature)throw new Error('Responsive container error: No "feature" supplied, such as min-width.');if("undefined"==typeof i.value)throw new Error('Responsive container error: No "value" supplied, such as 800px.');if("undefined"==typeof i.className&&"undefined"==typeof i.callback)throw new Error('Responsive container error: No "className" or "callback" supplied, one or the other is needed, else theres no use.');var n=e.extend({},t,i);return this.each(function(){var t=e(this),i=function(){var e=!1,i=t.width();switch(""!==n.className&&t.removeClass(n.className),n.feature){case"min-width":n.value.replace("px","")<i&&(e=!0);break;case"max-width":n.value.replace("px","")>i&&(e=!0)}e&&(""!==n.className&&t.addClass(n.className),null!==n.callback&&n.callback({width:i}))};e(this).resize(i),i()})}}(e)}),Ndn_Require.define("models/Ndn/VideoPlayer",["jquery","underscore","backbone","models/Ndn/App","models/Ndn/Widget","models/Ndn/Utils/UserAgent","models/Akamai/VideoPlayerModel","models/Ndn/PlayerServices","models/Ndn/PlayerServices/Cache","models/Ndn/VideoPlayer/EnforceVisibilityOverlayModel","models/Ndn/VideoPlayer/StartOverlayModel","models/Ndn/VideoPlayer/PauseOverlayModel","models/Ndn/VideoPlayer/ShareOverlayModel","models/Ndn/VideoPlayer/EndslateOverlayModel","models/Ndn/VideoPlayer/InfoOverlayModel","models/Ndn/Ads/EasiInformPlayer","models/Ndn/Ads/DisplayAd","models/Ndn/Utils/UrlParser","models/Ndn/Analytics/Ndn","models/Ndn/Utils/DomElement","models/Ndn/Analytics/ComscoreVme","models/Ndn/VideoPlayer/Params","models/Ndn/VideoPlayer/Behavior/RotatingRmm","models/Ndn/VideoPlayer/DynamicStillImages","models/Ndn/Debugger","models/Ndn/AdBlockDetection/AdBlockDetector","lib/amp.premier/config/skin/templates","jquery_responsive_containers"],function(e,t,i,n,o,a,r,s,l,d,c,u,p,h,g,m,f,y,_,v,E,A,C,b,N,I,P){var S={easi:m,displayAd:f},T=(N.inMode("videoPlayer"),i.Model.extend({defaults:{adPlayer:null,currentQuartile:null,currentAdQuartile:null,currentVideoIndex:null,currentAdEvents:{adMute:0,adUnmute:0,adPause:0,adResume:0},playerData:null,playlistId:null,nextPlaylistId:null,player:null,playlistData:null,playerContainerElementId:null,widget:null,isEmbedded2:!1,continuousPlays:0,continuousPlaysLimit:null,isPlaying:!1,isShowingVideo:!1,isShowingAd:!1,infoPanelEnabled:!0,defaultPlayOnLoadValue:!1,isShowingRmm:!1,forcedHtml5Player:!1,hasVideoLoaded:!1,playlistItemsLimit:null,behavior:null,dynamicStillImages:null,overlays:{},deliberators:null,truViewCounter:0,params:null,videoLoadIndex:-1,sandboxInstructions:null,currentAteiValue:null,hasAdBlock:null},start:function(){this.hideOverlays(),this.get("player").start()},incrementTruViewCounter:function(){
this.set("truViewCounter",this.get("truViewCounter")+1)},getTruViewCounter:function(){return this.get("truViewCounter")},playRmm:function(e){return this.hasBehaviorModule()?this.get("behavior").stepInto():this.load({videoIndex:e,playOnLoad:!0,isRmm:!0})},hideOverlays:function(){e.each(this.get("overlays"),function(e,i){t.isNull(i)||i.hide()})},generateParams:function(e){var t=A.getParams({videoPlayer:this,widget:this.get("widget"),currentVideoData:e.currentVideoData||this.getCurrentVideoData(),productSettings:e.productSettings||this.get("widget").getCachedSettings(),isRmm:e.isRmm,isMuted:e.isMuted,videoIndex:e.videoIndex});return this.set("params",t),t},getVideoLoadIndex:function(){return this.get("videoLoadIndex")},initializeOverlays:function(){this.set("overlays",{endslate:new h(this),pause:new u(this),start:new c(this),share:new p(this),info:new g(this),enforceVisibility:new d(this)})},getDynamicStillImages:function(){return this.get("dynamicStillImages")},handleAlternativeAdExperience:function(i){return N.inMode("adPlayer")&&console.log("[adPlayer] Alternative Ad Experience",i),e.Deferred(e.proxy(function(e){if(!i.adsEnabled)return e.reject();var n=this,o=t.extend(this.generateParams({videoIndex:i.videoIndex,isRmm:i.isRmm,isMuted:i.isMuted,currentVideoData:i.videoDataToLoad,hasAdBlock:this.hasAdBlock(),productSettings:this.get("widget").getCachedSettings()}),i.adPlayerData);this.attemptUsingAdPlayer(i.adPlayerName,i.videoLoadIndex,o).done(function(t){t.on("adPlayerEnd",function(t){t.adsPlayed?e.resolve():e.reject()}),n.set("activePlayer",t),t.start()}).fail(function(){e.reject()})},this)).promise().always(e.proxy(function(){this.get("activePlayer")&&this.get("activePlayer").destruct(),this.set("activePlayer",null),"displayAd"==i.adPlayerName&&this.trigger("rmmContinuousPlayEnd")},this))},useAmpPlayer:function(e){N.inMode("ampPlayer")&&console.log("useAmpPlayer(",e,");"),e.adsEnabled&&this.set("adPlayer",this.get("player")),this.set("activePlayer",this.get("player"));var t=this.generateParams({isMuted:e.isMuted,isRmm:e.isRmm,videoIndex:e.videoIndex,currentVideoData:e.videoDataToLoad,productSettings:this.get("widget").getCachedSettings()});this.getDynamicStillImages().toggle({videoData:e.videoDataToLoad,params:t}),this.set("params",t),this.get("player").load({videoData:e.videoDataToLoad,adsEnabled:e.adsEnabled,playOnLoad:e.playOnLoad,isMuted:e.isMuted,params:t,isBumperVideo:!(!e.isRmm&&!n.getSetting("operationCwal"))})},attemptUsingAdPlayer:function(t,i,n){return e.Deferred(e.proxy(function(o){if(!t||!S[t])return o.reject("Unrecognized ad player type: "+t);var a=this,r="ndn_"+t+"PlayerContainer",s=S[t],l=this.getContainerElement().find("."+r).length,d=l?this.getContainerElement().find("."+r):e('<div class="'+r+' ndn_videoPlayer_adPlayer"></div>');l||this.getContainerElement().append(d),v.onceHasWidthAndHeight(d).done(e.proxy(function(){this.get("videoLoadIndex")==i?s.load(d,n,this).done(function(e){a.set("adPlayer",e),o.resolve(e)}).fail(function(){o.reject()}):o.reject()},this))},this)).promise()},saveOverlays:function(){var t=this.get("overlays"),i=e(document.createElement("div")).addClass("ndn_videoPlayer_overlaySaveContainer").hide();this.getContainerElement().after(i),e.each(t,e.proxy(function(e,t){t.get("view").$el.appendTo(i)},this))},onceVideoLoadIsAllowed:function(e){var t=this;n.getAnalyticsIds().done(function(){t.onceEmbedded(function(){t.deliberate("loadAttempt").done(function(){o.getAdsTargeting().onceIsDeliverable(function(){I.hasAdBlocker().done(function(i){t.set("hasAdBlock",i),e()})})})})})},hasAdBlock:function(){return this.get("hasAdBlock")},restoreOverlays:function(){var t=this.get("overlays");this.getContainerElement().parent().find(".ndn_videoPlayer_overlaySaveContainer");e.each(t,e.proxy(function(e,t){t.get("view").$el.appendTo(this.getContainerElement())},this))},initialize:function(i){if(this.set({widget:i,playerData:i.getCachedSettings(),sandboxInstructions:{}}),this.on({videoStart:function(){this.set({isShowingVideo:!0,isShowingAd:!1,isPlaying:!0})},adStart:function(){this.set({isShowingVideo:!1,isShowingAd:!0,isPlaying:!0})},adEnd:function(){this.set({isShowingAd:!1,isPlaying:!1})},videoEnd:function(){this.set({isShowingVideo:!1,isPlaying:!1})},pause:function(){this.set({isPlaying:!1})},play:function(){this.set({isPlaying:!0})},videoUnload:function(){this.set({isShowingVideo:!1,isShowingAd:!1,isPlaying:!1})}}),this.set("continuousPlaysLimit",i.get("config").continuousPlay),i.getCachedSettings().settings.analytics.comscore.vme.enabled&&new E(this),this.set("dynamicStillImages",new b(this)),N.inMode("videoLoad")&&this.on("videoLoad",function(e){console.log("[Ndn_VideoPlayer] videoLoad, event ==",e)}),N.inMode("playerEvents")||N.inMode("playerEventsData")||N.inMode("allPlayerEvents")){var n=this.trigger;this.trigger=e.proxy(function(e){if((N.inMode("allPlayerEvents")||!t.contains(["adTimeUpdate","videoTimeUpdate","videoVolumeChange"],e))&&0!==e.indexOf("change")){var i=["[Ndn_VideoPlayer Event]"];if(N.inMode("playerEventsData"))for(var o=0;o<arguments.length;o++)i.push(arguments[o]);else i.push(e);console.log.apply(console,i)}n.apply(this,arguments)},this)}this.set("deliberators",{loadAttempt:[]}),e.proxy(function(){var i=e.proxy(function(e){this.set("currentAdQuartile",e),this.get("widget").triggerEvent("adView",{percentPlayed:e,quartile:e,currentTime:100==e?this.get("adPlayer").getAdDuration():this.get("adPlayer").getAdCurrentTime(),videoData:this.getCurrentVideoData(),currentVideoIndex:this.get("currentVideoIndex"),playerWidth:this.getContainerElement().width(),playerHeight:this.getContainerElement().height(),dynamicStillImagesEnabled:this.getDynamicStillImages().isEnabled(),videoPlayerType:this.getParams().videoPlayerType},"analytics")},this);this.on({adStart:function(e){i(0),this._resetAdConversions()},adLoad:function(e){this.get("widget").trigger("analytics:adLoad",t.extend({},e,{dynamicStillImagesEnabled:this.getDynamicStillImages().isEnabled()}))},adError:function(e){this.get("widget").trigger("analytics:adError",t.extend({},e,{dynamicStillImagesEnabled:this.getDynamicStillImages().isEnabled()}))},adRequest:function(e){this.get("widget").trigger("analytics:adRequest",t.extend({},e,{dynamicStillImagesEnabled:this.getDynamicStillImages().isEnabled()}))},adTimeUpdate:function(e){var n=this.get("adPlayer");if(n.isPlayingAd()){var o=Math.floor(n.getAdCurrentTime()/n.getAdDuration()*100);t.contains([25,50,75],o)&&o>this.get("currentAdQuartile")&&i(o)}},adEnd:function(e){i(100),this.get("widget").trigger("analytics:adEnd",e),this._resetAdConversions()},adMute:function(e){var t=this.get("currentAdEvents");t.adMute++,this.set("currentAdEvents",t),this.get("widget").trigger("analytics:adMute",t)},adUnmute:function(e){var t=this.get("currentAdEvents");t.adUnmute++,this.set("currentAdEvents",t),this.get("widget").trigger("analytics:adUnmute",t)},adResume:function(e){var t=this.get("currentAdEvents");t.adResume++,this.set("currentAdEvents",t),this.get("widget").trigger("analytics:adResume",t)},rmmPause:function(e){var t=this.get("currentAdEvents");t.adPause++,this.set("currentAdEvents",t),1==this.isShowingAd()&&this.get("widget").trigger("analytics:adPause",t)},videoPause:function(e){var t=this.get("currentAdEvents");t.adPause++,this.set("currentAdEvents",t),1==this.isShowingAd()&&this.get("widget").trigger("analytics:adPause",t)}})},this)(),this.on("change:playlistData",e.proxy(function(){null!==this.get("playlistItemsLimit")&&this.get("playlistData")&&(this.get("playlistData").items=t.first(this.get("playlistData").items,this.get("playlistItemsLimit"))),N.inMode("playlistData")&&console.log("[Ndn_VideoPlayer] playlistData ==",this.get("playlistData"))},this)),e.proxy(function(){var i=e.proxy(function(e){this.set({currentQuartile:e}),this.isRotatingRmm()&&this.getVideoLoadIndex()>0||this.get("widget").triggerEvent("videoView",{isShowingRmm:this.isShowingRmm(),wgtValue:(this.get("params")||{}).wgtValue,videoLoadIndex:this.getVideoLoadIndex(),playerBehaviorId:this.getParams().playerBehaviorId,percentPlayed:e,quartile:e,currentTime:100==e?this.get("player").getDuration():this.get("player").getCurrentTime(),videoData:this.getCurrentVideoData(),playlistId:this.get("playlistId"),isInContinuousPlay:this.get("continuousPlays")>0,currentVideoIndex:this.get("currentVideoIndex"),playerWidth:this.getContainerElement().width(),playerHeight:this.getContainerElement().height(),dynamicStillImagesEnabled:this.getDynamicStillImages().isEnabled(),videoPlayerType:this.getParams().videoPlayerType},"hook,analytics")},this);this.on({videoStart:e.proxy(function(){this.isShowingPtr()||i(0),this.isShowingRmm()||this.get("widget").trigger("hook:videoStart",{videoId:this.getCurrentVideoData().videoId})},this),videoTimeUpdate:e.proxy(function(){var e=this.get("player");if(!this.isShowingRmm()&&!this.isShowingPtr()){var n=Math.floor(e.getCurrentTime()/e.getDuration()*100);t.contains([25,50,75],n)&&n>this.get("currentQuartile")&&i(n)}if(this.isShowingRmm()&&"flash"!=this.getPlaybackMode()){var o=6;e.getCurrentTime()>o&&e.end()}},this),videoEnd:e.proxy(function(){this.isShowingPtr()||i(100),this.isShowingRmm()||this.get("widget").trigger("hook:videoEnd",{videoId:this.getCurrentVideoData().videoId})},this)})},this)(),function(e){var t=function(){e.isShowingRmm()&&e.disableControls()},i=function(){e.enableControls()};e.on({videoStart:t,rmmUnload:i,rmmContinuousPlayEnd:i})}(this),N.inMode("rmmCp")&&this.on("rmmContinuousPlayEnd",function(){console.log(">> rmmContinuousPlayEnd heard!")}),this.on("videoEnd",e.proxy(function(){if(!this.hasBehaviorModule()){var t=this.get("continuousPlaysLimit"),i=e.proxy(function(){this.isShowingRmm()?this.trigger("rmmContinuousPlayEnd"):this.trigger("continuousPlayEnd")},this);return this.isShowingRmm()&&!this.isRotatingRmm()?void i():void(0==t?(this.isRotatingRmm()||this.loadVideoByIndex(this.get("currentVideoIndex"),!1),i()):(this.incrementContinuousPlayCounter(),this.getNextVideoData()?this.get("continuousPlays")>=t+1?(this.resetContinuousPlayCounter(),i()):this.isShowingRmm()?this.playRmm(this.get("currentVideoIndex")+1):this.play(this.get("currentVideoIndex")+1):this.getPlaylistId()?this.trigger("playlistEnd"):this.trigger("isolatedVideoEnd")))}},this)),this.on("pause",e.proxy(function(){this.isShowingRmm()?this.trigger("rmmPause"):this.trigger("videoPause")},this)),(this.isRotatingRmm()||"VideoLauncher/Slider"==this.get("widget").get("config").type)&&this.set("behavior",new C(this)),this.initializeOverlays()},hasBehaviorModule:function(){return!!this.get("behavior")},getProduct:function(){return this.get("widget")},concludeRmmContinuousPlay:function(){this.trigger("rmmContinuousPlayEnd")},getParams:function(){return this.get("params")||{}},getContinuousPlays:function(){return this.get("continuousPlays")},getContinuousPlaysLimit:function(){return this.get("continuousPlaysLimit")},trackVideoStartRequest:function(e,t){return this.get("widget").trigger("analytics:videoStartRequest",{source:e,dynamicStillImagesEnabled:this.getDynamicStillImages().isEnabled(),data:t||{}}),this},stepIntoNextVideo:function(){var e=this.getNextVideoData();return e||(this.getPlaylistId()?this.trigger("playlistEnd"):this.trigger("isolatedVideoEnd")),e},toggleInfoPanel:function(e){"undefined"==typeof e&&(e=!this.get("infoPanelEnabled")),this.set({infoPanelEnabled:e})},load:function(t,i,n){var o;o=1==arguments.length&&"object"==typeof arguments[0]?arguments[0]:{videoIndex:t,playlistId:i,playOnLoad:n,isRmm:!1};var a=this,r=a.get("widget"),s=r.get("config"),l=r.getCachedSettings(),t=o.videoIndex,i="undefined"!=typeof o.playlistId?o.playlistId:this.get("playlistId"),n="undefined"!=typeof o.playOnLoad?o.playOnLoad:this.get("defaultPlayOnLoadValue"),d="undefined"!=typeof o.isRmm?o.isRmm:!1;return e.Deferred(function(e){a.loadPlaylist(i).always(function(){var i="resolved"==this.state()?a.get("playlistId"):507;if("undefined"==typeof t){var o=s.videoId||s.providerId&&s.providerStoryId;if(o)if("undefined"!=typeof l.videosData)a.set({playlistData:{items:l.videosData},playlistId:null,nextPlaylistId:i}),t=0;else{if("undefined"==typeof l.videoIndex)return a.set({nextPlaylistId:i}),a.trigger("videoUnavailable"),e.resolve();t=l.videoIndex}else t=0}a.loadVideo({videoIndex:t,playOnLoad:n,isRmm:d}).done(e.resolve)})}).promise()},loadPlaylist:function(t){return e.Deferred(e.proxy(function(i){t||(t=this.get("playerData").defaultWidgetConfig.playlistId),s.getPlaylistData(t,this.get("widget"),this.get("playlistItemsLimit")).done(e.proxy(function(e){return this.set({playlistData:e,playlistId:t}),i.resolve()},this)).fail(e.proxy(function(){return this.set({playlistData:{items:[],playlistId:null},playlistId:null}),i.reject()},this))},this)).promise().done(e.proxy(function(){this.trigger("videoPlaylistLoad")},this))},deliberate:function(t){this.trigger(t);var i=[];return e.each(this.get("deliberators")[t],function(t,n){i.push(e.Deferred(n).promise())}),e.when.apply(e,i)},loadVideo:function(t){var i=this,n=i.get("widget"),o=n.get("config"),r=o.adsEnabled,s=t.videoIndex,l="undefined"!=typeof t.playOnLoad?t.playOnLoad:!1,d="undefined"!=typeof t.isRmm?t.isRmm:!1,c="undefined"!=typeof t.adsEnabled?t.adsEnabled:r,u="undefined"!=typeof t.adPlayer?t.adPlayer:"",p="undefined"!=typeof t.adPlayerData?t.adPlayerData:{},h="undefined"!=typeof t.adPlayerFallsbackToAmp?t.adPlayerFallsbackToAmp:!0,g="undefined"!=typeof t.useAmp?t.useAmp:!0;return e.Deferred(e.proxy(function(t){this.unloadVideo();var r=this.get("videoLoadIndex")+1;return this.set({isShowingRmm:d,currentVideoIndex:s,videoLoadIndex:r}),this.isVideoAvailable(s)?void this.onceVideoLoadIsAllowed(e.proxy(function(){this.set("currentAteiValue",_.getNextAtei());var e=a.isAbleToPlayVideoAutomatically(),m=this.get("playlistData").items[s],f=u||T.getAlternativeAdPlayerName({adsEnabled:c,adPlayer:u,isRmm:d,productConfig:o,ableToPlayVideoAutomatically:e});this.handleAlternativeAdExperience({adPlayerName:f,adPlayerData:p,adsEnabled:c,ableToPlayVideoAutomatically:e,videoIndex:s,videoLoadIndex:r,isRmm:d,isMuted:!1}).always(function(){i.set("activePlayer",null),g&&"displayAd"!=f&&("easi"==f&&i.setForcedHtml5Player(!0),i.useAmpPlayer({videoDataToLoad:m,isRmm:d,adsEnabled:c&&"resolved"!=this.state()&&h,isMuted:n.shouldBeMuted(i),playOnLoad:l}))});var y=this.getParams();this.set("hasVideoLoaded",!0),this.incrementTruViewCounter();var v={videoLoadIndex:this.getVideoLoadIndex(),videoData:m,playlistId:this.get("playlistId"),isSoundEnabled:y.isSoundEnabled,playerWidth:this.getContainerElement().width(),playerHeight:this.getContainerElement().height(),playerBehaviorId:y.playerBehaviorId,params:y,widgetConfig:o,dynamicStillImagesEnabled:this.getDynamicStillImages().isEnabled(),playOnLoad:l,hasAdBlock:this.hasAdBlock(),adBlockDetectionId:y.adBlockDetectionId};return this.get("widget").trigger("analytics:videoLoad",v),this.trigger("videoLoad",{videoData:m,playOnLoad:l,params:y}),this.get("widget").trigger("hook:videoLoad",v),t.resolve()},this)):(this.trigger("videoUnavailable"),t.reject())},this)).promise()},getActivePlayer:function(){return this.get("activePlayer")},loadVideoByIndex:function(e,t){"undefined"==typeof t&&(t=!1),this.loadVideo({videoIndex:e,playOnLoad:t})},unloadVideo:function(){this.get("hasVideoLoaded")&&(this.isShowingRmm()&&(this.set("isShowingRmm",!1),this.trigger("rmmUnload")),this.set({currentQuartile:null,hasVideoLoaded:!1,activePlayer:null,adPlayer:null}),this.trigger("videoUnload"))},getActivePlaylistData:function(){return this.get("playlistData")},getActiveVideoData:function(){return this.get("playlistData").items[this.get("currentVideoIndex")]},play:function(e,t){"undefined"==typeof e&&"undefined"==typeof t&&this.get("player").get("isReady")?this.get("player").play():this.load(e,t,!0)},pause:function(){this.get("player").pause()},getContainerElementId:function(){return this.get("playerContainerElementId")},getContainerElement:function(){return e("#"+this.getContainerElementId())},embed:function(t){return e.Deferred(e.proxy(function(i){this.get("widget").getSettings().done(e.proxy(function(e){this.get("playerData")||this.set("playerData",e),this.set("playerContainerElementId",t),this.set("player",new r(this)),this.initializeContainerElement(),this.set("isEmbedded2",!0),this.trigger("embed"),i.resolve()},this))},this)).promise()},initializeContainerElement:function(){var t=e("#"+this.get("playerContainerElementId"));t.addClass("ndn_videoPlayer");var i={"min-width":[[419,"largeView"]],"max-width":[[1198,"view1198"],[1022,"view1022"],[999,"view999"],[849,"view849"],[784,"view784"],[766,"view766"],[702,"view702"],[639,"view639"],[574,"view574"],[499,"view499"],[418,"smallView"]]};e.each(i,function(i,n){e.each(n,function(){var e=this[0],n="ndn_videoPlayer_"+this[1];t.responsiveContainer({feature:i,value:e+"px",className:n})})}),function(e){var i=t.get(0),n=function(){e.trigger("click")};i.addEventListener?i.addEventListener("click",n,!0):i.attachEvent&&i.attachEvent("onclick",n)}(this)},getCurrentTime:function(){return this.get("player").getCurrentTime()},getCurrentVideoId:function(){return this.getVideoData(this.get("currentVideoIndex")).videoId},getCurrentPlaylistId:function(){return this.get("playlistId")},loadVideoById:function(t,i){s.getVideoData(t,this.get("widget")).done(e.proxy(function(e){this.set({playlistData:{items:[e]},playlistId:null}),this.loadVideoByIndex(0,i)},this))},onceReady:function(e){return this.get("player").onceReady(e)},showOverlay:function(e){"undefined"!=typeof this.get("overlays")[e]&&this.get("overlays")[e].show()},getOverlay:function(e){return"undefined"!=typeof this.get("overlays")[e]?this.get("overlays")[e]:void 0},onceEmbedded:function(e){return this.get("isEmbedded2")?e():this.once("embed",e),this},resetContinuousPlayCounter:function(){return this.set({continuousPlays:0,truViewCounter:0}),this},incrementContinuousPlayCounter:function(){return this.set("continuousPlays",this.get("continuousPlays")+1),this},getPlaybackMode:function(){return"flash"!=r.getPlaybackMode()||this.isForcedHtml5Player()?"html":"flash"},setForcedHtml5Player:function(e){this.set("forcedHtml5Player",e)},isForcedHtml5Player:function(){return n.getSetting("forceHtmlPlayer")||"html"==this.get("widget").getCachedSettings().settings.behavior.playbackMode||this.get("forcedHtml5Player")},isRotatingRmm:function(){var e=this.get("widget"),t=e.getCachedSettings().settings.behavior.rmm;return t=t.enabled&&t.numberOfAdCalls>1},hasInfoPanelEnabled:function(){return this.get("infoPanelEnabled")},getVideosData:function(){var e=this.get("playlistData");return e&&"undefined"!=typeof e.items?e.items:[]},getVideoData:function(e){var t=this.getVideosData();return"undefined"!=typeof t[e]?t[e]:null},getCurrentVideoIndex:function(){return this.get("currentVideoIndex")},getCurrentVideoData:function(){return this.getVideoData(this.get("currentVideoIndex"))},getNextVideoData:function(){return this.getVideoData(this.get("currentVideoIndex")+1)},getPreviousVideoData:function(){return this.getVideoData(this.get("currentVideoIndex")-1)},isVideoAvailable:function(e){var t=this.get("playlistData");return t&&t.items&&t.items[e]},getPlaylistId:function(){return this.get("playlistId")},setDefaultPlayOnLoadValue:function(e){return this.set("defaultPlayOnLoadValue",e),this},setMuted:function(e){this.get("player").setMuted&&this.get("player").setMuted(e)},isMuted:function(e){return this.get("player").isMuted(e)},setVolume:function(e){this.get("player").setVolume(e)},getVolume:function(){return this.get("player").getVolume()},enableControls:function(){this.get("player").enableControls()},disableControls:function(){this.get("player").disableControls()},setNextPlaylistId:function(e){this.set({nextPlaylistId:e})},getNextPlaylistId:function(){return this.get("nextPlaylistId")},setPlaylistItemsLimit:function(e){this.set("playlistItemsLimit",e)},isShowingVideo:function(){return this.get("isShowingVideo")},isPlaying:function(){return this.get("isPlaying")},isShowingAd:function(){return this.get("isShowingAd")},isShowingVideo:function(){return this.get("isShowingVideo")},isPlayingAd:function(){return this.isPlaying()&&this.isShowingAd()},isPlayingVideo:function(){return this.isPlaying()&&this.isShowingVideo()},isShowingRmm:function(){return this.get("isShowingRmm")},isShowingPtr:function(){return this.get("widget").getSplitVersionModel().isPtr()},_resetAdConversions:function(){var e=t.extend({},this.get("currentAdEvents"));t.each(e,function(e,t,i){i[t]=0}),this.set("currentAdEvents",e)},addDeliberator:function(e,t){this.get("deliberators")[e]&&this.get("deliberators")[e].push(t)},logSandboxInstruction:function(e,t){this.get("sandboxInstructions")[e]=t},getDebugInfo:function(){var e=t.extend({},this.get("sandboxInstructions")),i=this.get("player")&&this.get("player").getDebugInfo().videosLoaded.length?this.get("player").getDebugInfo():null;return i&&(e=t.extend(e,{amp:i})),e=t.extend(e,i)}},{allowsAlternativeRmmAdPlayer:function(e){return t.contains(["VideoLauncher/Slider"],e.type)},getAlternativeAdPlayerName:function(e){if(n.getSetting("adPlayer"))return n.getSetting("adPlayer");var t=this.allowsAlternativeRmmAdPlayer(e.productConfig);if(e.adsEnabled&&e.isRmm&&t)if(e.ableToPlayVideoAutomatically);else if("VideoLauncher/Slider"==e.productConfig.type)return"displayAd";return""}}));return T}),Ndn_Require.define("models/Ndn/Widget/VideoPlayer/AbstractModel",["jquery","backbone","models/Ndn/Widget","models/Ndn/VideoPlayer","models/Ndn/Utils/UserAgent"],function(e,t,i,n,o){var a="14126";return i.extend({defaults:{videoPlayer:null},initialize:function(){i.prototype.initialize.apply(this,arguments)},initializeVideoPlayer:function(){this.set("videoPlayer",new n(this.getParentWidget()));var t=this.get("videoPlayer"),i=this.getParentWidget();t.setPlaylistItemsLimit(this.get("playlistItemsLimit")),t.on({pause:function(){i.trigger("hook:videoPause",{currentTime:t.getCurrentTime()})},"hook:rmmStartRequest":function(){i.trigger("hook:rmmStartRequest",{})}}),t.addDeliberator("loadAttempt",function(e){i.getSettings().done(function(t){var n=i.get("config");n.providerId&&n.providerStoryId&&!t.videosData?(i.getContainerElement().css({display:"none",width:"0px",height:"0px"}),e.reject()):e.resolve()})}),t.on({adEnd:e.proxy(function(){this.get("loyaltyProgram")&&this.get("loyaltyProgram").execute()},this.getParentWidget())}),i.get("config").videoId?t.on("isolatedVideoEnd",e.proxy(function(){t.once("videoStartRequest",function(){this.setNextPlaylistId(a)})},this)):t.setNextPlaylistId(a),this.get("videoPlayer").toggleInfoPanel(!1),this.trigger("videoPlayerInitialized")},initializeVideoPlayerForRmm:function(t){t=t||!1;var i=this.get("videoPlayer");i.on("click",e.proxy(function(){i.isShowingRmm()&&i.isShowingVideo()&&i.setDefaultPlayOnLoadValue(this.getParentWidget().get("config").autoPlay).play(0)},this)),this.getParentWidget().get("config").autoPlay&&!t?i.setDefaultPlayOnLoadValue(!0).load():this.hasRmmEnabled()?i.once("rmmContinuousPlayEnd",function(){i.setDefaultPlayOnLoadValue(!1).load()}).playRmm():i.setDefaultPlayOnLoadValue(!1).load()},embed:function(){return this.initializeVideoPlayer(),e.Deferred(e.proxy(function(t){this.get("view").render(this.getTemplate("default"),{appUrl:i.getAppUrl(),playerContainerElementId:this.getPlayerContainerElementId(),width:this.get("config").width,height:this.get("config").height}),this.trigger("containerInitialized"),this.get("videoPlayer").embed(this.getPlayerContainerElementId()).done(e.proxy(function(){this.trigger("videoPlayerEmbedded"),t.resolve()},this))},this)).promise()},destruct:function(){this.get("videoPlayer").destroy(),i.prototype.destruct.apply(this,arguments)},hideSelectableVideos:function(){this.getContainerElement().find(".ndn_selectableVideosContainer").hide()},toggleSelectableVideos:function(){var e=this.getContainerElement().find(".ndn_selectableVideosContainer");e.is(":visible")?e.slideUp():e.slideDown()}})}),Ndn_Require.define("text!templates/ndn/modal-embed/default.html",[],function(){return'<div class="ndn_modalEmbed">\n	<div id="ndn-modal-embed-{{modalEmbedIndex}}"></div>\n	<div class="ndn_closeModal"></div>\n</div>'}),Ndn_Require.define("text!templates/ndn/modal-embed/expandable.html",[],function(){return'<div class="ndn_modalEmbed ndn_modalEmbed_expandable">\n	<div class="ndn_videoTitle"></div>\n	<div class="ndn_modalEmbed_options">\n		<div class="ndn_modalEmbed_expand">(Expand)</div>\n		<div class="ndn_modalEmbed_close">(Close)</div>\n	</div>\n	<div id="ndn-modal-embed-{{modalEmbedIndex}}"></div>\n</div>'}),Ndn_Require.define("models/Ndn/ModalEmbed",["jquery","backbone","mustache","models/Ndn/App","models/Ndn/Widget","text!templates/ndn/modal-embed/default.html","text!templates/ndn/modal-embed/expandable.html"],function(e,t,i,n,o,a,r){var s=0;return t.Model.extend({defaults:{templates:{"default":a,expandable:r},sourceProduct:null,product:null,modalEmbedIndex:null,container:null},getNextModalEmbedIndex:function(){return s++},initialize:function(t,i){n.getSetting("launchModalEmbedsV2")&&(i=e.extend({},i,{type:"VideoPlayer/Inline590"})),this.set({sourceProduct:t,productConfig:i,modalEmbedIndex:this.getNextModalEmbedIndex()}),n.getSetting("launchModalEmbedsV2")?this.initializeDom2():this.initializeDom()},getInnerContainer:function(){return e("#ndn-modal-embed-"+this.get("modalEmbedIndex"))},initializeDom:function(){var t=778,i=825,n=e('<div class="ndn_modalEmbedScreen"></div>').appendTo("body"),a=e('<div class="ndn_modalEmbed"><div id="ndn-modal-embed-'+this.get("modalEmbedIndex")+'" data-config-type="VideoPlayer/16x9" data-config-playlist-id="'+this.get("productConfig").playlistId+'"  data-config-tracking-group="'+this.get("productConfig").trackingGroup+'" data-config-video-id="'+this.get("productConfig").videoId+'" data-config-widget-id="'+this.get("productConfig").widgetId+'" data-config-site-section="'+this.get("productConfig").siteSection+'"></div><div class="ndn_closeModal"></div></div>');n.css("opacity","0.7");var r=Math.max(20,Math.floor((e(window).height()-i)/2));a.css({top:e(window).scrollTop()+r+"px",width:t+"px"});var s=e.proxy(function(){a.css("left",Math.floor(e(window).width()/2)-Math.floor(t/2)+"px")},this);s(),e("body").append(a),e(window).resize(s),o.embed(this.getInnerContainer().get(0),this.get("productConfig"),["fromSlider"]).done(e.proxy(function(e){e.setIsModal(!0),this.set("product",e)},this));var l=e.proxy(function(){this.get("product")&&this.get("product").destruct(),n.hide(),a.hide()},this);n.on("click",l),a.on("click",".ndn_closeModal",l),this.set("container",a)},initializeDom2:function(){var t=600,n=this,a=e(i.to_html(r,{modalEmbedIndex:this.get("modalEmbedIndex")}));a.css({bottom:"0",width:t+"px"});var s=e.proxy(function(){a.css("left",Math.floor(e(window).width()/2)-Math.floor(t/2)+"px")},this);s(),e("body").append(a),e(window).resize(s),o.embed(this.getInnerContainer().get(0),this.get("productConfig")).done(e.proxy(function(t){t.setIsModal(!0),n.set("product",t),t.on("widgetEmbedEnd",e.proxy(function(){t.toggleSelectableVideos(),a.on("click",".ndn_modalEmbed_close",e.proxy(function(){this.get("product")&&this.get("product").destruct(),a.hide()},this)).on("click",".ndn_modalEmbed_expand",function(){t.toggleSelectableVideos()})},this))},this)),this.set("container",a)}})}),Ndn_Require.define("models/Ndn/Carousel",["jquery"],function(e){return{loadSlidePlaceholderImages:function(t,i,n,o){var a=i*n,r=a+n-1,s=o?'li:not(".ndn_carousel-clone") '+o+" li":'li.ndn_selectableVideo:not(".ndn_carousel-clone")',l=t.find(s).filter(":eq("+a+"), :gt("+a+"):lt("+r+")");l.each(function(){var t=["src","alt","title","class"];e(this).find(".ndn_imagePlaceholder").each(function(){var i=e(this),n="<img ";e.each(t,function(){var e=this+"";i.attr("data-"+e)&&(n+=e+'="'+i.attr("data-"+e)+'" ')}),n+="/>",e(this).replaceWith(n)})})}}});var _ndnq=_ndnq||[];Ndn_Require.define("views/Ndn/AbstractView",["jquery","underscore","backbone","mustache","models/Ndn/App","models/Ndn/Widget","models/Ndn/Widget/Config","models/Ndn/ModalEmbed","models/Ndn/Utils/UserAgent","models/Ndn/Carousel","jquery_autoellipsis","jquery_responsive_containers"],function(e,t,i,n,o,a,r,s,l,d){return i.View.extend({slides:1,initialize:function(){this.$el.on("mouseenter",".ndn_sliderNavButton",function(){e(this).addClass("ndn_hover"),(l.isMobile()||l.isOnIos())&&setTimeout(function(){e(this).removeClass("ndn_hover")}.bind(this),700)}).on("mouseleave",".ndn_sliderNavButton",function(){e(this).removeClass("ndn_hover")})},loadImagesForSlide:function(e,t){d.loadSlidePlaceholderImages(this.$el,e,this.slides,t)},render:function(e,t,i){var o,a=n.to_html(e,t);if(i===!0)o=a;else{var r=i?this.$el.find(i):this.$el;r.html(a)}return this.trigger("render",{template:e,params:t,selector:i}),o},displayCompanionAd:function(t,i){if(-1!==i.indexOf("<html")){var n,o;t.html(n=e(document.createElement("iframe")).css({width:"300px",height:"250px",overflow:"hidden"}).attr("scrolling","no"));try{o=n.get(0).contentWindow.document,o.open(),o.write(i),o.close()}catch(a){this.trigger("analytics:error",{type:"AdCompanionError",error:a})}}else t.html(i)},openNdnWindow:function(e){var t=this.model.getParentWidget().get("settings").settings.launcher;if("studio"==t.behavior)window.open(e,"_blank");else{if("modal"==t.behavior&&!l.isMobile())return new s(this.model,r.getConfigFromLandingPageUrl(e)),!1;window.open(e,"ndnPlayer","scrollbars,resizable,width=768,height=825",!1)}}})}),Ndn_Require.define("views/Ndn/Widget/VideoPlayer/AbstractView",["jquery","underscore","mustache","views/Ndn/AbstractView","models/Ndn/Utils/UserAgent","text!templates/ndn/video-player/pause-overlay/overlay.html"],function(e,t,i,n,o,a){return n.extend({events:{"click .ndn_selectableVideo":"onVideoSelect","click .ndn_playlistSelectorMenu a":"onPlaylistSelect"},showingPlaylistPause:!1,initialize:function(){n.prototype.initialize.apply(this,arguments),this.model.on("videoPlayerInitialized",e.proxy(function(){this.model.get("videoPlayer").on({videoPlaylistLoad:e.proxy(function(){this.updateSelectableVideos()},this),videoLoad:e.proxy(function(){this.updateSelectedVideo()},this),videoPause:e.proxy(function(){this.$el.find(".ndn_infoOverlayContainer").css("visibility","hidden")},this),videoStartRequest:e.proxy(function(){this.$el.find(".ndn_infoOverlayContainer").css("visibility","visible")},this),adStart:e.proxy(function(){this.$el.find(".ndn_infoOverlayContainer").css("visibility","hidden")},this),adEnd:e.proxy(function(){this.$el.find(".ndn_infoOverlayContainer").css("visibility","visible")},this)})},this))},hidePlayerOverlays:function(){this.$el.find(".ndn_playerOverlay").hide()},onVideoSelect:t.debounce(function(t){this.model.trigger("videoSelect"),this.hidePlayerOverlays();var i=e(t.currentTarget).data("video-index"),n=this.$el.find(".ndn_selectableVideos .ndn_selectableVideo");return n.removeClass("ndn_activeVideo"),n.filter(":eq("+i+")").addClass("ndn_activeVideo"),this.model.get("videoPlayer").resetContinuousPlayCounter(),this.model.get("videoPlayer").play(i),!1},1e3,!0),onPlaylistSelect:function(t){return this.hidePlayerOverlays(),this.model.get("videoPlayer").resetContinuousPlayCounter(),this.model.get("videoPlayer").load(0,e(t.target).data("playlist-id"),this.model.get("config").autoPlay),!1},updateSelectableVideos:function(){var e=this.model.getTemplate("selectableVideos");e&&this.render(e,{playlistItems:this.model.get("videoPlayer").getActivePlaylistData()?this.model.get("videoPlayer").getActivePlaylistData().items:[],videoIndex:function(){var e=0;return function(){return e++}}()},".ndn_selectableVideos")},updateSelectedVideo:function(){var e=this.model.get("videoPlayer"),t=e.getCurrentVideoData(),i=this.$el.find(".ndn_selectableVideo,.ndn_pauseOverlay_selectableVideo"),n=this.model.get("config").adsEnabled;if(i.removeClass("ndn_activeVideo ndn_activeVideoNotPlaying"),null!==t){var o=t.videoId,a=i.filter('[data-video-id="'+o+'"]'),r=function(){var t=e.getCurrentVideoData();
return null!==t&&t.videoId==o};e.isShowingRmm()?a.addClass("ndn_activeVideoNotPlaying"):n?(a.addClass("ndn_activeVideoNotPlaying"),e.once("adEnd",function(){r()&&a.removeClass("ndn_activeVideoNotPlaying").addClass("ndn_activeVideo")})):a.addClass("ndn_activeVideo")}}})}),Ndn_Require.define("views/Ndn/Widget/VideoPlayer/SingleView",["jquery","views/Ndn/Widget/VideoPlayer/AbstractView"],function(e,t){return t.extend({initialize:function(){t.prototype.initialize.apply(this,arguments)}})}),Ndn_Require.define("lib/jquery_plugins/jquery.drags",["jquery"],function(e){e.fn.drags=function(t){t=e.extend({handle:"",cursor:"move",placementHook:""},t);var i=e(this),n=t.handle?i.find(t.handle):i;n.css("cursor",t.cursor),n.on("mousedown",function(n){function o(e){var n=e.pageY,o=e.pageX,a={top:r-(l-n),left:s-(d-o)};t.placementHook&&(a=t.placementHook(a)),a&&i.offset(a)}function a(e){t.onMouseUpHook&&t.onMouseUpHook(),c.off("mousemove",o),c.off("mouseup",a)}var r=i.offset().top,s=i.offset().left,l=n.pageY,d=n.pageX,c=(i.css("z-index"),e(window));c.on("mousemove",o),c.on("mouseup",a)})}}),Ndn_Require.define("models/Ndn/FloatContainer",["jquery","underscore","backbone","mustache","models/Ndn/App","models/Ndn/Widget","models/Ndn/Utils/DomElement","models/Ndn/Debugger","jquery_autoellipsis","lib/jquery_plugins/jquery.drags"],function(e,t,i,n,o,a,r,s){var l={width:410,height:255},d=null,c=(s.inMode("float"),i.Model.extend({defaults:{product:null,container:null,isFloating:!1,enabled:!0,placeholderTop:null,placeholderBottom:null},initialize:function(e,t){this.set({product:e}),this.initializeDom(t.initialPosition)},initializeDom:function(t){if(this.set("container",this.get("product").getContainerElement().find("> .ndn_floatContainer")),r.onceHasWidthAndHeight(this.getContainer()).done(e.proxy(function(){this.setPlaceholderCoordinates()},this)),this.snap(t),this.initializeEventListeners(),s.inMode("floatFillpage")){for(var i=e("<p></p>"),n=0;300>n;n++)i.append("Test<br/>");i.appendTo("body")}},initializeEventListeners:function(){var t=this.getContainer(),i=this.get("product"),n=i.get("videoPlayer");t.drags({handle:".ndn_floatContainer_header > .ndn_videoTitle",placementHook:e.proxy(function(i){if(this.isFloating()){var n=e(window).innerWidth(),o=e(window).innerHeight(),a=e(window).scrollTop(),r=e(window).scrollLeft(),s={top:i.top-a,left:i.left-r},l=t.outerWidth(),d=t.outerHeight(),c=25,u=s.top<=0+c,p=o<=s.top+d+c,h=s.left<=0+c,g=n<=s.left+l+c;return u?this.snap("top"):p?this.snap("bottom"):t.css({top:s.top,bottom:"auto"}),h?this.snap("left"):g?this.snap("right"):t.css({left:s.left,right:"auto"}),this.deselectText(),!1}},this)}),i.on("hook:videoLoad",function(e){t.find("> .ndn_floatContainer_header .ndn_videoTitle").html(e.videoData.videoTitle)}),t.on("click",".ndn_floatContainer_close",e.proxy(function(){this.isFloating()&&(n.pause(),this.unfloat())},this)),n.once("videoStart",e.proxy(function(){setTimeout(function(){t.find(".ndn_floatContainer_close").fadeIn("slow")},3e3)},this));var o=e.proxy(function(){this.isEnabled()&&this.isPlaceholderInitialized()&&(this.isFloating()&&this.isPlaceholderInViewVertically()?this.unfloat():this.isFloating()||this.isPlaceholderInViewVertically()||!i.get("videoPlayer").isPlaying()||this["float"]())},this);e(window).on("resize scroll",o),i.get("videoPlayer").on("videoStart videoResume adStart adResume",o)},isEnabled:function(){return this.get("enabled")},disable:function(e){"undefined"==typeof e&&(e=!0),this.set("enabled",!1),this.unfloat(),e&&this.get("product").get("videoPlayer").setDefaultPlayOnLoadValue(!1).load()},isPlaceholderInitialized:function(){return null!==this.get("placeholderTop")},isPlaceholderInViewVertically:function(){var t=this.get("placeholderTop"),i=this.get("placeholderBottom"),n=i-t,a=e(window).scrollTop(),r=a+e(window).height(),s=parseFloat("undefined"==typeof o.getSetting("floatPercent")?40:o.getSetting("floatPercent")),l=Math.floor(n*(1-s/100)),d=Math.max(t,a),c=Math.min(i,r),u=c-d;return u>=l},getContainer:function(){return this.get("container")},isFloating:function(){return this.get("isFloating")},setPlaceholderCoordinates:function(){var e=this.getContainer();this.set({placeholderTop:e.offset().top,placeholderBottom:e.offset().top+e.outerHeight()})},"float":function(){!this.isFloating()&&this.isEnabled()&&(this.getContainer().removeClass("ndn_floatContainer_disabled").addClass("ndn_floatContainer_enabled"),c.registerFloat(this),this.set("isFloating",!0))},unfloat:function(){this.isFloating()&&(this.getContainer().addClass("ndn_floatContainer_disabled").removeClass("ndn_floatContainer_enabled"),c.unregisterFloat(this),this.set("isFloating",!1))},deselectText:function(){var e=window.getSelection?window.getSelection():document.selection;e&&(e.removeAllRanges?e.removeAllRanges():e.empty&&e.empty())},snap:function(t){var i=this.getContainer(),n=e(window).width(),o=e(window).height(),a={top:{top:0,bottom:"auto"},right:{left:"auto",right:0},bottom:{top:"auto",bottom:0},middle:{top:o/2-l.height/2+"px",bottom:"auto"},center:{left:n/2-l.width/2+"px",right:"auto"},left:{left:0,right:"auto"}},r=t.split(" ");e.each(r,function(){var e=this;if("undefined"!=typeof a[e]){var t=a[e];i.css(t)}})}},{registerFloat:function(e){d&&d.disable(),d=e},unregisterFloat:function(e){d==e&&(d=null)}}));return c}),Ndn_Require.define("text!templates/ndn/widget/video-player/single/default.html",[],function(){return'<div class="ndn_floatContainer ndn_floatContainer_disabled">\n    <div class="ndn_floatContainer_header">\n    	<div class="ndn_floatContainer_close ndn_icon ndn_icon_cancel" style="display: none;"></div>\n        <div class="ndn_videoTitle"></div>\n    </div>\n    <div class="ndn_playerContainer ndn_floatContainer_contents" id="{{playerContainerElementId}}"></div>\n</div>'}),Ndn_Require.define("models/Ndn/Widget/VideoPlayer/SingleModel",["jquery","models/Ndn/Widget","models/Ndn/Widget/VideoPlayer/AbstractModel","views/Ndn/Widget/VideoPlayer/SingleView","models/Ndn/FloatContainer","models/Ndn/Widget/PlayerOptions","text!templates/ndn/widget/video-player/single/default.html"],function(e,t,i,n,o,a,r){return i.extend({defaults:{widgetView:n,templates:{"default":r},floatContainer:null,playlistItemsLimit:40},initialize:function(e){i.prototype.initialize.apply(this,arguments),this.on("containerInitialized",function(){var e=this.getCachedSettings().settings.behavior,t=e["float"];t.enabled&&this.set("floatContainer",new o(this,{initialPosition:t.initialPosition})),e.playOnInViewToggle.enabled&&new a(this)})},handleApiInstruction:function(e){if(t.prototype.handleApiInstruction.apply(this,arguments),"unfloat"==e){var i=this.get("videoPlayer"),n=this.get("floatContainer");i&&i.pause(),n&&n.disable(!1)}},initializeVideoPlayer:function(){i.prototype.initializeVideoPlayer.apply(this,arguments);var t=this.get("videoPlayer"),n=this.getParentWidget();t.on("embed",function(){t.setDefaultPlayOnLoadValue(n.get("config").autoPlay).load()}),t.on("videoUnavailable",e.proxy(function(){n.get("config").hideWhenUnavailable&&n.hideContainer()},this))},isAutoplayEnabled:function(){return this.get("videoPlayer").get("widget").get("config").autoPlay}})}),Ndn_Require.define("views/Ndn/Widget/VideoPlayer/StudioView",["jquery","underscore","views/Ndn/Widget/VideoPlayer/AbstractView"],function(e,t,i){return i.extend({initialize:function(){i.prototype.initialize.apply(this,arguments),this.model.on("videoPlayerInitialized",e.proxy(function(){this.model.get("videoPlayer").on("adCompanion",e.proxy(function(e){this.model.trigger("hook:adCompanion",{content:e.content})},this))},this))},syncSidePanel:function(){var e=this.$el.find(".ndn_sidePanel").hasClass("ndn_hasCompanionAd");this.$el.find(".ndn_selectableVideos").css("height",this.getSelectableVideosContainerHeight(e)),this.$el.find(".ndn_sidePanel").toggleClass("ndn_hasCompanionAd",e)},getSelectableVideosContainerHeight:function(e){var t=this.$el.find(".ndn_playerEngagement").height();return t-=34,e&&(t-=260),t},showCompanionAd:function(e){this.model.set("isShowingCompanionAd",!0),this.syncSidePanel();var t=this.$el.find(".ndn_adCompanion");this.displayCompanionAd(t,e),t.addClass("ndn_active")},hideCompanionAd:function(){this.model.set("isShowingCompanionAd",!1),this.$el.find(".ndn_adCompanion").removeClass("ndn_active").html(""),this.syncSidePanel()},onVideoSelect:t.debounce(function(t){this.model.trigger("videoSelect"),this.hidePlayerOverlays();var i=e(t.currentTarget).data("video-id"),n=this.$el.find(".ndn_selectableVideos .ndn_selectableVideo");return n.removeClass("ndn_activeVideo"),this.model.get("videoPlayer").resetContinuousPlayCounter(),this.model.get("videoPlayer").loadVideoById(i,!0),!1},1e3,!0)})}),Ndn_Require.define("text!templates/ndn/widget/video-player/studio/default.html",[],function(){return'<div id="{{playerContainerElementId}}" class="ndn_playerContainer"></div>'}),Ndn_Require.define("models/Ndn/Widget/VideoPlayer/StudioModel",["jquery","models/Ndn/Widget","models/Ndn/Widget/VideoPlayer/AbstractModel","views/Ndn/Widget/VideoPlayer/StudioView","text!templates/ndn/widget/video-player/studio/default.html"],function(e,t,i,n,o){return i.extend({defaults:{widgetView:n,templates:{"default":o},usesAdStudies:!0,playlistItemsLimit:40,isShowingCompanionAd:!1,topTrendingVideosData:null},initialize:function(e){i.prototype.initialize.apply(this,arguments)},initializeVideoPlayer:function(){i.prototype.initializeVideoPlayer.apply(this,arguments);var e=this.get("videoPlayer"),t=this.getParentWidget();e.on("embed",function(){e.setDefaultPlayOnLoadValue(t.get("config").autoPlay).load()})}})});var googletag=googletag||{};googletag.cmd=googletag.cmd||[],Ndn_Require.define("models/Ndn/Ads/AdStudies",["jquery","models/Ndn/Utils/UrlParser"],function(e,t){var i=function(){return"1"==t.getParam("ndn_debugAdStudies","query")?function(){console.log(arguments)}:function(){}}(),n="ndn-div-gpt-ad-123456789-",o=0,a=!1,r=function(){return n+o++},s={},l={};return{initialize:function(){a||(!function(){var e=document.createElement("script");e.async=!0,e.type="text/javascript";var t="https:"==document.location.protocol;e.src=(t?"https:":"http:")+"//www.googletagservices.com/tag/js/gpt.js";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(e,i)}(),a=!0)},displayAdStudy:function(t,n,o){i("displayAdStudy(",arguments,");");try{o||(o=[300,250]),this.initialize();var a=e(t);return a.hide(),i("Just hid the slot's container element, slotContainer ==",a),e.Deferred(e.proxy(function(e){var t="undefined"!=typeof s[a.attr("id")],d=t?a.attr("id"):r();t||a.attr("id",d),l[d]=l[d]||e,a.css({width:o[0],height:o[1]}),googletag.cmd.push(function(){t?(i("Refreshing slot... slotId ==",d,"; _slots[slotId] ==",s[d]),googletag.pubads().refresh([s[d]]),i("googletag.pubads().refresh() was just called...")):(i("Slot does not exist yet, so it is being created..."),a.html(""),s[d]=googletag.defineSlot(n,o,d).addService(googletag.pubads()).setCollapseEmptyDiv(!0),googletag.pubads().addEventListener("slotRenderEnded",function(e){i("[slotRenderEnded], event ==",e);var t=l[d];e.isEmpty===!1?(a.show(),t&&t.resolve()):(a.hide(),t&&t.reject()),delete l[d]}),googletag.pubads().enableAsyncRendering(),googletag.pubads().enableSingleRequest(),googletag.enableServices(),i('document.getElementById("'+d+'") ==',document.getElementById(d)),googletag.display(d),i("googletag.display("+d+"); was just called..."))})},this)).promise()}catch(d){i("PROBLEM DETECTED, e ==",d)}}}}),Ndn_Require.define("lib/jquery_plugins/jquery.simplePagination",["jquery"],function(e){var t={init:function(i){var n=e.extend({items:1,itemsOnPage:1,pages:0,displayedPages:5,edges:2,currentPage:1,hrefTextPrefix:"#page-",hrefTextSuffix:"",prevText:"Prev",nextText:"Next",ellipseText:"&hellip;",cssStyle:"light-theme",selectOnClick:!0,onPageClick:function(e,t){},onInit:function(){}},i||{}),o=this;return o.data("paginationOptions",i),n.pages=n.pages?n.pages:Math.ceil(n.items/n.itemsOnPage)?Math.ceil(n.items/n.itemsOnPage):1,n.currentPage=n.currentPage-1,n.halfDisplayed=n.displayedPages/2,this.each(function(){o.addClass(n.cssStyle+" simple-pagination").data("pagination",n),t._draw.call(o)}),n.onInit(),this},selectPage:function(e){return t._selectPage.call(this,e-1),this},prevPage:function(){var e=this.data("pagination");return e.currentPage>0&&t._selectPage.call(this,e.currentPage-1),this},nextPage:function(){var e=this.data("pagination");return e.currentPage<e.pages-1&&t._selectPage.call(this,e.currentPage+1),this},getPagesCount:function(){return this.data("pagination").pages},getCurrentPage:function(){return this.data("pagination").currentPage+1},destroy:function(){return this.empty(),this},redraw:function(){return t._draw.call(this),this},disable:function(){var e=this.data("pagination");return e.disabled=!0,this.data("pagination",e),t._draw.call(this),this},enable:function(){var e=this.data("pagination");return e.disabled=!1,this.data("pagination",e),t._draw.call(this),this},_draw:function(){var i,n=this.data("pagination"),o=t._getInterval(n);t.destroy.call(this);var a="UL"===this.prop("tagName")?this:e("<ul></ul>").appendTo(this);if(n.prevText&&t._appendItem.call(this,n.currentPage-1,{text:n.prevText,classes:"prev"}),o.start>0&&n.edges>0){var r=Math.min(n.edges,o.start);for(i=0;r>i;i++)t._appendItem.call(this,i);n.edges<o.start&&o.start-n.edges!=1?a.append('<li class="disabled"><span class="ellipse">'+n.ellipseText+"</span></li>"):o.start-n.edges==1&&t._appendItem.call(this,n.edges)}for(i=o.start;i<o.end;i++)t._appendItem.call(this,i);if(o.end<n.pages&&n.edges>0){n.pages-n.edges>o.end&&n.pages-n.edges-o.end!=1?a.append('<li class="disabled"><span class="ellipse">'+n.ellipseText+"</span></li>"):n.pages-n.edges-o.end==1&&t._appendItem.call(this,o.end++);var s=Math.max(n.pages-n.edges,o.end);for(i=s;i<n.pages;i++)t._appendItem.call(this,i)}n.nextText&&t._appendItem.call(this,n.currentPage+1,{text:n.nextText,classes:"next"})},_getInterval:function(e){return{start:Math.ceil(e.currentPage>e.halfDisplayed?Math.max(Math.min(e.currentPage-e.halfDisplayed,e.pages-e.displayedPages),0):0),end:Math.ceil(e.currentPage>e.halfDisplayed?Math.min(e.currentPage+e.halfDisplayed,e.pages):Math.min(e.displayedPages,e.pages))}},_appendItem:function(i,n){var o,a,r=this,s=r.data("pagination"),l=e("<li></li>"),d=r.find("ul");i=0>i?0:i<s.pages?i:s.pages-1,o=e.extend({text:i+1,classes:""},n||{}),i==s.currentPage||s.disabled?(s.disabled?l.addClass("disabled"):l.addClass("active"),a=e('<span class="current">'+o.text+"</span>")):(a=e('<a href="'+s.hrefTextPrefix+(i+1)+s.hrefTextSuffix+'" class="page-link">'+o.text+"</a>"),a.click(function(e){return t._selectPage.call(r,i,e)})),o.classes&&a.addClass(o.classes),l.append(a),d.length?d.append(l):r.append(l)},_selectPage:function(e,i){var n=this.data("pagination");return n.currentPage=e,n.selectOnClick&&t._draw.call(this),n.onPageClick(e+1,i)}};e.fn.pagination=function(i){return t[i]&&"_"!=i.charAt(0)?t[i].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof i&&i?void e.error("Method "+i+" does not exist on jQuery.pagination"):t.init.apply(this,arguments)}}),Ndn_Require.define("lib/jquery_plugins/jquery.bootpag",["jquery"],function(e){!function(e,t){e.fn.bootpag=function(t){function i(t,i){var r,s=0==a.maxVisible?1:a.maxVisible,l=1==a.maxVisible?0:1,d=Math.floor((i-1)/s)*s,c=t.find("li");if(a.page=i=0>i?0:i>a.total?a.total:i,c.removeClass("disabled"),r=1>i-1?1:a.leaps&&i-1>=a.maxVisible?Math.floor((i-1)/s)*s:i-1,c.first().toggleClass("disabled",1===i).attr("data-lp",r).find("a").attr("href",n(r)),l=1==a.maxVisible?0:1,r=i+1>a.total?a.total:a.leaps&&i+1<a.total-a.maxVisible?d+a.maxVisible+l:i+1,c.last().toggleClass("disabled",i===a.total).attr("data-lp",r).find("a").attr("href",n(r)),s=c.filter("[data-lp="+i+"]"),!s.not(".next,.prev").length){var u=d>=i?-a.maxVisible:0;c.not(".next,.prev").each(function(t){r=t+1+d+u,e(this).attr("data-lp",r).toggle(r<=a.total).find("a").html(r).attr("href",n(r))}),s=c.filter("[data-lp="+i+"]")}s.addClass("disabled"),o.trigger("page",i),o.data("settings",a)}function n(e){return a.href.replace(a.hrefVariable,e)}var o=this,a=e.extend({total:0,page:1,maxVisible:null,leaps:!0,href:"javascript:void(0);",hrefVariable:"{{number}}",next:"&raquo;",prev:"&laquo;"},o.data("settings")||{},t||{});return 0>=a.total?this:(!e.isNumeric(a.maxVisible)&&!a.maxVisible&&(a.maxVisible=a.total),o.data("settings",a),this.each(function(){var t,o,r=e(this),s=['<ul class="bootpag">'];for(a.prev&&s.push('<li data-lp="1" class="prev"><a href="'+n(1)+'">'+a.prev+"</a></li>"),o=1;o<=Math.min(a.total,a.maxVisible);o++)s.push('<li data-lp="'+o+'"><a href="'+n(o)+'">'+o+"</a></li>");a.next&&(o=a.leaps&&a.total>a.maxVisible?Math.min(a.maxVisible+1,a.total):2,s.push('<li data-lp="'+o+'" class="next"><a href="'+n(o)+'">'+a.next+"</a></li>")),s.push("</ul>"),r.find("ul.bootpag").remove(),r.append(s.join("")).addClass("pagination"),t=r.find("ul.bootpag"),r.find("li").click(function(){var n=e(this);n.hasClass("disabled")||i(t,parseInt(n.attr("data-lp"),10))}),i(t,a.page)}))}}(e,window)}),Ndn_Require.define("views/Ndn/Widget/VideoPlayer/16x9View",["jquery","underscore","views/Ndn/Widget/VideoPlayer/AbstractView","models/Ndn/PlayerServices","models/Ndn/PlayerServices/Cache","models/Ndn/Widget","models/Ndn/Ads/AdStudies","models/Ndn/Utils/UserAgent","jquery_autoellipsis","lib/jquery_plugins/jquery.simplePagination","lib/jquery_plugins/jquery.bootpag"],function(e,t,i,n,o,a,r,s){return i.extend({events:{"click .ndn_selectableVideo":"onVideoSelect","click .ndn_playlistTabs li a":"onPlaylistSelect","click a.ndn_accordion-toggle":"onMobileAccordionClick"},initialize:function(){i.prototype.initialize.apply(this,arguments),this.model.on({playlistsUpdate:e.proxy(function(){this.updatePlaylistTabs()},this),playlistSelect:e.proxy(function(){this.updateSelectableVideos()},this)}),this.model.on("videoPlayerInitialized",e.proxy(function(){var e=this,t=this.model.get("videoPlayer");adsEnabled=t.get("widget").get("config").adsEnabled,t.on({embed:function(){e.model.get("playlists").length&&e.updatePlaylistTabs()},videoUnavailable:function(){e.model.set("playlists",[])}}),adsEnabled&&(t.on({adCompanion:function(t){e.showCompanion(t.content)},adEnd:function(){e.hideCompanion()}}),t.on({videoStart:function(){e.showAdStudy()},videoEnd:function(){e.hideAdStudy()}}))},this))},updatePlaylistTabs:function(){this.render(this.model.getTemplate("playlistTabs"),{playlists:this.model.get("playlists")},".ndn_playlistTabs"),this.updatePlaylistSelectedTab(this.model.get("videoPlayer").get("playlistId"))},onMobileAccordionClick:function(e){return this.$el.find(".ndn_accordion .ndn_collapse").slideToggle(),!1},onPlaylistSelect:function(t){var i=e(t.currentTarget).data("playlistId");return this.model.selectPlaylist(i),!1},onVideoSelect:t.debounce(function(t){this.model.trigger("videoSelect");var n=this.$el.find(".ndn_playlistTabs li.ndn_active a").data("playlistId")||this.model.get("videoPlayer").get("playlistId"),o=arguments;this.model.get("videoPlayer").loadPlaylist(n).done(e.proxy(function(){i.prototype.onVideoSelect.apply(this,o)},this))},500,!0),showCompanion:function(t){return e.Deferred(e.proxy(function(e){if(this.model.get("isShowingAdStudy"))e.resolve();else{var i=this.getDomElements(),n=i.companion,o=i.thumbnailPages;o.addClass("ndn_withCompanion"),this.displayCompanionAd(n,t),n.show(),this.model.set("isShowingCompanionAd",!0),this.updateSelectableVideos().done(function(){e.resolve()})}},this)).promise()},hideCompanion:function(){return e.Deferred(e.proxy(function(e){if(this.model.get("isShowingCompanionAd")){var t=this.getDomElements(),i=t.thumbnailPages,n=t.companion;i.removeClass("ndn_withCompanion"),n.html("").hide(),this.model.set("isShowingCompanionAd",!1),this.updateSelectableVideos().done(function(){e.resolve()})}else e.resolve()},this)).promise()},showAdStudy:function(){return e.Deferred(e.proxy(function(t){var i=this.getDomElements(),n=i.adStudy,o=i.thumbnailPages;this.hideAdStudy(),r.displayAdStudy(n.get(0),this.model.get("videoPlayer").getParams().dfpIuValue).done(e.proxy(function(){o.addClass("ndn_withAdStudy"),this.model.set("isShowingAdStudy",!0),this.hideCompanion().done(e.proxy(function(){this.updateSelectableVideos().done(function(){t.resolve()})},this))},this)).fail(function(){})},this)).promise()},hideAdStudy:function(){return e.Deferred(e.proxy(function(e){if(this.model.get("isShowingAdStudy")){var t=this.getDomElements(),i=t.thumbnailPages,n=t.adStudy;i.removeClass("ndn_withAdStudy"),n.html("").hide(),this.model.set("isShowingAdStudy",!1),this.updateSelectableVideos().done(function(){e.resolve()})}else e.resolve()},this)).promise()},getDomElements:function(){return{thumbnailPages:this.$el.find(".ndn_playlistThumbnailsPages"),paginator:this.$el.find(".ndn_playlistThumbnailsPagination"),companion:this.$el.find(".ndn_companion"),adStudy:this.$el.find(".ndn_adStudy")}},updateSelectableVideos:function(){return e.Deferred(e.proxy(function(t){this.model.getSelectedPlaylistData().done(e.proxy(function(i){var n=this.getDomElements(),o=(n.thumbnailPages,n.paginator,i?i.playlistId:null),a=this.model.getThumbnailsPerPage(),r=this.model.getThumbnailPagesHtmlData(o,a);n.thumbnailPages.html(r.html),n.paginator.pagination("destroy").pagination({items:r.thumbnailCount,itemsOnPage:a,cssStyle:"pagination-centered",onPageClick:e.proxy(function(e,t){this.model.storeSelectedPage(e);var i=this.getDomElements().thumbnailPages;return i.find("> .ndn_playlistThumbnailsPage").hide(),i.find('> .ndn_playlistThumbnailsPage[data-page-number="'+e+'"]').show(),i.find(".ndn_videoTitle:visible, .ndn_videoMeta:visible").ellipsis({updateOnWindowResize:!0}),!1},this),prevText:"&laquo;",nextText:"&raquo;"}),this.updatePlaylistSelectedTab(o),n.paginator.pagination("selectPage",this.model.getCurrentThumbnailPage()),this.updateSelectedVideo(),n.paginator.toggle(n.paginator.pagination("getPagesCount")>1),t.resolve()},this))},this)).promise()},updatePlaylistSelectedTab:function(e){var t=this.$el.find(".ndn_playlistTabs"),i=t.find("li.ndn_active");i.children("a").data("playlistId")!==e&&(i.removeClass("ndn_active"),t.find("a[data-playlist-id="+e+"]").parents("li").addClass("ndn_active"))}})}),Ndn_Require.define("text!templates/ndn/widget/video-player/16x9/default.html",[],function(){return'<div class="ndn_16-9-wrapper">\n    <div id="{{playerContainerElementId}}" class="ndn_playerContainer"></div>\n</div>\n<!--LARGE DISPLAY CATEGORIES TABS START-->\n<ul class="ndn_nav ndn_nav-tabs ndn_lite ndn_playlistTabs ndn_playlistSelectorMenu">\n</ul>\n<!--LARGE DISPLAY CATEGORIES TABS END--> \n<!--SMALL DISPLAY CATEGORIES TABS START-->\n<div class="ndn_accordion" id="accordion2">\n    <div class="ndn_accordion-group">\n        <div class="ndn_accordion-heading"></div>\n        <div class="ndn_openNav">\n        	<a class="ndn_accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne"></a>\n        </div>\n        <div id="collapseOne" class="ndn_accordion-body ndn_in ndn_collapse">\n            <div class="ndn_accordion-inner">\n                <ul class="ndn_nav ndn_nav-tabs ndn_lite ndn_nav-phone ndn_playlistTabs"></ul>\n            </div>\n        </div>\n    </div>\n</div>\n<!--SMALL DISPLAY CATEGORIES TABS END--> \n<!--COMPANION CONTAINER START-->\n<div class="ndn_companion" style="display:none;"></div>\n<div class="ndn_adStudy" style="display:none;"></div>\n<!--COMPANION CONTAINER END-->\n<!--THUMBNAILS START-->\n<div class="ndn_playlistThumbnailsPages ndn_selectableVideos">\n</div>\n<!--THUMBNAILS END--> \n<!--PAGINATION START-->\n<div class="ndn_playlistThumbnailsPagination ndn_js_pagination ndn_pagination ndn_pagination-centered"></div>\n<!--PAGINATION START-->'}),Ndn_Require.define("text!templates/ndn/widget/video-player/16x9/playlistTabs.html",[],function(){return'{{#playlists}}\n	<li><a href="#" data-playlist-id="{{id}}">{{label}}</a></li>\n{{/playlists}}'}),Ndn_Require.define("text!templates/ndn/widget/video-player/16x9/playlistThumbnailsPage.html",[],function(){return'{{#thumbnailPagesData}}\n	<ul class="ndn_playlistThumbnailsPage" data-page-number="{{pageNumber}}">\n		{{#playlistItems}}\n			<li class="ndn_selectableVideo ndn_thumb ndn_js_playlistLi" data-video-id="{{videoId}}" data-video-index="{{videoIndex}}">\n		    	<div class="ndn_selectableVideoInner">\n		    		<div class="ndn_thumbContainer">\n		    			<img class="ndn_thbImage" src="{{thumbnailUrl}}" title="{{videoTitle}}" />\n		    			<div class="ndn_nowPlaying">Now Playing</div>\n		    			<div class="ndn_upcomingVideo">Up Next</div>\n		    		</div>\n		    		<p class="ndn_videoTitle">{{videoTitle}}</p>\n		    		<p class="ndn_videoMeta">{{displayDuration}} / {{provider.name}}</p>\n		    	</div>\n			</li>\n		{{/playlistItems}}\n	</ul>\n{{/thumbnailPagesData}}'}),Ndn_Require.define("models/Ndn/Widget/VideoPlayer/16x9Model",["jquery","mustache","models/Ndn/PlayerServices","models/Ndn/PlayerServices/Cache","models/Ndn/Widget/VideoPlayer/AbstractModel","views/Ndn/Widget/VideoPlayer/16x9View","text!templates/ndn/widget/video-player/16x9/default.html","text!templates/ndn/widget/video-player/16x9/playlistTabs.html","text!templates/ndn/widget/video-player/16x9/playlistThumbnailsPage.html"],function(e,t,i,n,o,a,r,s,l){return o.extend({defaults:{widgetView:a,templates:{"default":r,playlistTabs:s,playlistThumbnailsPage:l},playlists:[],selectedPlaylistId:null,selectedPageData:0,cachedThumbpagePagesHtml:null,isShowingCompanionAd:!1,isShowingAdStudy:!1,usesAdStudies:!0,playlistItemsLimit:36},initialize:function(){o.prototype.initialize.apply(this,arguments),this.set("selectedPageData",{}),this.on({"change:playlists":e.proxy(function(){this.trigger("playlistsUpdate")},this)}),this.getSettings().done(e.proxy(function(e){this.set("playlists",e.associatedPlaylists),this.trigger("playlistsUpdate"),this.selectPlaylist(this.get("playlists")[0].id)},this))},getThumbnailPageNumber:function(e){for(var t=this.getThumbnailsPerPage(),i=t-1,n=1;e>=i;i+=t)n++;return n},storeSelectedPage:function(e){var t=this.get("selectedPageData");t[this.get("selectedPlaylistId")]=(e-1)*this.getThumbnailsPerPage()},getCurrentThumbnailPage:function(){return this.getThumbnailPageNumber(this.get("selectedPageData")[this.get("selectedPlaylistId")])},getSelectedPlaylistId:function(){return this.get("selectedPlaylistId")},getSelectedPlaylistData:function(){return e.Deferred(e.proxy(function(e){i.getPlaylistData(this.getSelectedPlaylistId(),this).done(function(t){e.resolve(t)})},this)).promise()},selectPlaylist:function(e){this.set("selectedPlaylistId",e),this.trigger("playlistSelect")},setCachedThumbnailPagesHtmlData:function(e,t,i){this.get("cachedThumbnailPagesHtmlData")||this.set("cachedThumbnailPagesHtmlData",{});var n=this.get("cachedThumbnailPagesHtmlData");n[t]=n[t]||{},n[t][i]=e},getCachedThumbnailPagesHtmlData:function(e,t){this.get("cachedThumbnailPagesHtmlData")||this.set("cachedThumbnailPagesHtmlData",{});var i=this.get("cachedThumbnailPagesHtmlData");return i[e]=i[e]||{},i[e][t]},getThumbnailsPerPage:function(){return this.isShowingCompanionAdOrAdStudy()?8:12},getThumbnailPagesHtmlData:function(e,i){var o=this.getCachedThumbnailPagesHtmlData(e,i);if(o)return o;for(var a=e?n.getPlaylistData(e,this.get("playlistItemsLimit")):this.get("videoPlayer").getActivePlaylistData(),r=a?a.items:[],s=[],d=function(){var e=0;return function(){return e++}}(),c=0,u=1;c<r.length;c+=i){var p=c+i<=r.length?i:Math.min(r.length%i,i);s.push({pageNumber:u++,playlistItems:r.slice(c,c+p),videoIndex:d})}var h={thumbnailCount:r.length,html:t.to_html(l,{thumbnailPagesData:s})};return this.setCachedThumbnailPagesHtmlData(h,e,i),h},isShowingCompanionAdOrAdStudy:function(){return this.get("isShowingCompanionAd")||this.get("isShowingAdStudy")},initializeVideoPlayer:function(){o.prototype.initializeVideoPlayer.apply(this,arguments);var e=this.get("videoPlayer"),t=this.getParentWidget();e.on("embed",function(){e.setDefaultPlayOnLoadValue(t.get("config").autoPlay).load()})}})}),Ndn_Require.define("models/Ndn/Widget/VideoLauncher/AbstractModel",["jquery","underscore","models/Ndn/Widget","models/Ndn/VideoPlayer","models/Ndn/Utils/UserAgent"],function(e,t,i,n,o){return i.extend({defaults:{videoPlayer:null},initialize:function(){i.prototype.initialize.apply(this,arguments)},initializeVideoPlayer:function(){var i=new n(this.getParentWidget());this.set("videoPlayer",i),i.setPlaylistItemsLimit(this.get("playlistItemsLimit")),i.on({rmmContinuousPlayEnd:e.proxy(function(){this.get("view").onTeaserFinished()},this),embed:e.proxy(function(){i.loadPlaylist(this.getParentWidget().get("config").playlistId).done(function(){i.playRmm()})},this),click:e.proxy(function(){i.isShowingRmm()&&i.isShowingVideo()&&(this.get("view").openNdnWindow(this.getLandingPageUrl({videoId:t.first(this.get("videoPlayer").getActivePlaylistData().items).videoId})),i.play())},this)}),this.trigger("videoPlayerInitialized")},embed:function(){return e.Deferred(e.proxy(function(e){this.get("view").render(this.getTemplate("default"),{playerContainerElementId:this.getPlayerContainerElementId()}),this.get("videoPlayer").embed(this.getPlayerContainerElementId())},this)).promise()}})}),Ndn_Require.define("views/Ndn/Widget/VideoLauncher/AbstractView",["jquery","views/Ndn/AbstractView"],function(e,t){return t.extend({})}),Ndn_Require.define("models/Ndn/Utils/AspectRatio",["jquery","backbone","jquery_resize"],function($,Backbone){return{maintain:function(element,aspectRatio,toggleClosure,inputDimension){if("undefined"==typeof toggleClosure&&(toggleClosure=function(){return!0}),"undefined"==typeof inputDimension&&(inputDimension="width"),"width"==inputDimension||"height"==inputDimension){var outputDimension="width"==inputDimension?"height":"width",inputDimensionVariable=inputDimension.substr(0,1);if(element=$(element),!(element.data(outputDimension)||"").match(/[w|h]/gi)&&aspectRatio.match(/:/g)){var ratioTokens=aspectRatio.split(":"),ratio={width:ratioTokens[0],height:ratioTokens[1]},outputDimensionAlgorithm=ratio[outputDimension]+"/"+ratio[inputDimension]+"*"+inputDimensionVariable,model=new Backbone.Model;model.on("elementResize",function(){if(toggleClosure(element)){var inputDimensionValue=element[inputDimension](),outputDimensionCalculation=outputDimensionAlgorithm.replace(new RegExp(inputDimensionVariable,"gi"),inputDimensionValue).replace(/[^-()\d\/*+.]/g,""),result=eval(outputDimensionCalculation);try{element.css(outputDimension,eval(outputDimensionCalculation)+"px")}catch(e){}}}),element.resize(function(){model.trigger("elementResize")});var timerIntervals=[.5,1,2,4,8,16];return $.each(timerIntervals,function(){setTimeout(function(){model.trigger("elementResize")},1e3*this)}),model.trigger("elementResize"),model}}}}}),Ndn_Require.define("views/Ndn/Widget/VideoLauncher/AbstractSliderView",["jquery","underscore","models/Ndn/App","models/Ndn/Utils/UserAgent","models/Ndn/Utils/UrlParser","models/Ndn/Widget","views/Ndn/Widget/VideoLauncher/AbstractView","models/Ndn/Utils/AspectRatio","jquery_bxslider"],function(e,t,i,n,o,a,r,s){return r.extend({initializeOptimalVideoPlayerWidthBehavior:function(){this.model.on("videoPlayerInitialized",e.proxy(function(){if(!this.containedWithinOverflowXHiddenContainer()&&!i.isEmbeddedByIframe()&&!n.isMobile()){var e=this.model,t=e.get("videoPlayer"),o=e.get("view");t.on({loadAttempt:function(){o.ensureOptimalVideoPlayerWidth()},adStart:function(){o.ensureOptimalVideoPlayerWrapperWidth()},"videoStart videoUnload":function(){o.restoreOriginalVideoPlayerWidth(),o.restoreOriginalVideoPlayerWrapperWidth()}})}},this))},initializeAspectRatioOfTopContainer:function(){var e=this,t=this.model;t.on("containerInitialized",function(){s.maintain(e.$el.find(".ndn_sliderTopContainer"),"6:5",function(e){return t.isAspectRatioOfTopContainerEnabled()||!e.css("height")})})},hideVideoPlayerWhileLoading:function(){n.isMobile()||this.model.on("videoPlayerInitialized",e.proxy(function(){
var e=this.model,t=e.get("videoPlayer"),i=e.get("view");t.hasBehaviorModule()||t.on({videoLoad:function(){i.setVideoPlayerOnScreen(!1)},"adStart videoUnload":function(){i.setVideoPlayerOnScreen(!0)},videoStart:function(){i.setVideoPlayerOnScreen(!0)}})},this))},containedWithinOverflowXHiddenContainer:function(){var i=this.model.getContainerElement(),n=!1;this.model;return e(e.merge(e.merge([],i),i.parents())).each(function(){return t.contains(["html","body"],e(this).prop("tagName").toLowerCase())?!1:void(t.contains([e(this).css("overflow"),e(this).css("overflow-x")],"hidden")&&(n=!0))}),n},renderThumbnailPlaceholders:function(){var e=[{},{},{}],t=0;this.render(this.model.getTemplate("thumbnails"),{playlistVideos:e,videoIndex:function(){return t++}},".ndn_playlistThumbnails"),this.$el.find(".ndn_playlistThumbnails img").hide(),this.$el.find(".ndn_playlistThumbnails h4").css("text-indent","-9999px")},renderThumbnails:function(){this.model.getVideos().done(e.proxy(function(e){var t=0;this.render(this.model.getTemplate("thumbnails"),{playlistVideos:e,videoIndex:function(){return t++}},".ndn_playlistThumbnails"),this.model.set("thumbnailCarousel",this.$el.find(".ndn_playlistThumbnailsList").bxSlider({pager:!1,controls:!1,maxSlides:3,minSlides:3,slideWidth:114,slideMargin:4,auto:!1,onSliderLoad:function(){this.loadImagesForSlide(0),this.centerThumbnails()}.bind(this),onSlideBefore:function(e,t,i){this.loadImagesForSlide(i)}.bind(this)})),this.$el.find(".ndn_playlistThumbnails .ndn_titleOverlay p").ellipsis({live:!0})},this))},centerThumbnails:function(){this.$el.find(".ndn_playlistThumbnailsList li, .ndn_sliderItems li").each(function(){var t=e(this).find("img:not(.ndn_providerLogo)"),i=t.width()-t.closest("li").width();i=(0-Math.max(i,0))/2,t.css("margin-left",i+"px")})},initializeShowcaseCarousel:function(t){return"undefined"==typeof t&&(t=!1),e.Deferred(e.proxy(function(i){var o=n.isFirefox()&&navigator.userAgent.match(/\bMacintosh\b/i);!o||t?this.model.isShowcaseCarouselEnabled()?(this.model.get("carousel").reloadSlider(),this.loadImagesForSlide(0),i.resolve()):this.model.set("carousel",this.$el.find(".ndn_selectableVideos").bxSlider({pager:!1,controls:!1,slideWidth:350,auto:!0,autoHover:!0,pause:7e3,onSliderLoad:e.proxy(function(){this.loadImagesForSlide(0),this.centerThumbnails(),this.$el.find(".ndn_sliderItems .ndn_sliderVideoTitle").ellipsis(),this.$el.find(".ndn_sliderContainer").addClass("ndn_showcaseCarouselEnabled"),i.resolve()},this),onSlideBefore:e.proxy(function(e,t,i){this.loadImagesForSlide(i),this.centerThumbnails(),this.model.get("hasConcludedVideoPlayer")&&this.model.getThumbnailsEnabled()&&(this.clearCurrentVideoThumbnail(),this.setCurrentVideoThumbnail(e.data("videoId")),i%3==0?(i>t||0==i&&t==this.model.get("thumbnailCarousel").getSlideCount()-1)&&this.model.get("thumbnailCarousel").goToNextSlide():(i+1)%3==0&&(t>i||0==t&&i==this.model.get("thumbnailCarousel").getSlideCount()-1)&&this.model.get("thumbnailCarousel").goToPrevSlide())},this)})):i.resolve()},this)).promise()},updateSelectableVideos:function(){return e.Deferred(e.proxy(function(t){this.model.getParentWidget().getSettings().done(e.proxy(function(){this.model.getVideos().done(e.proxy(function(i){this.render(this.model.getTemplate("selectableVideos"),{appUrl:a.getAppUrl(),urlSuffix:a.getAppUrlSuffix(),playlistItems:i,videoIndex:function(){var e=0;return function(){return e++}}()},".ndn_selectableVideos"),this.initializeShowcaseCarousel().done(e.proxy(function(){this.$el.find(".ndn_selectableVideos > li").css("width",this.model.getContainerElement().width()+"px"),this.loadImagesForSlide(0),t.resolve()},this))},this))},this))},this)).promise().done(e.proxy(function(){this.model.trigger("updatedSelectabledVideos")},this))},setVideoPlayerOnScreen:function(e){this.$el.find(".ndn_videoPlayerWrapper").toggleClass("ndn_videoPlayerWrapper_loading",!e)},ensureOptimalVideoPlayerWrapperWidth:function(){var t=this.model.get("optimalWidth");return e.Deferred(e.proxy(function(e){var i=this.$el.find(".ndn_responsiveContainer");if(i.width()<t){var n=t-i.width();this.model.set("addedVideoPlayerWidth",n),i.animate({width:t+"px",left:"-="+n},200,function(){e.resolve()})}else e.resolve()},this)).promise()},restoreOriginalVideoPlayerWrapperWidth:function(t){return"undefined"==typeof t&&(t=!0),e.Deferred(e.proxy(function(e){this.restoreOriginalVideoPlayerWidth();var i=this.model,n=i.get("addedVideoPlayerWidth"),o=this.$el.find(".ndn_responsiveContainer"),a={width:"-="+n,left:0};i.set("addedVideoPlayerWidth",0),t?o.animate(a,500,function(){e.resolve()}):(o.css(a),e.resolve())},this)).promise()},ensureOptimalVideoPlayerWidth:function(){this.model.toggleAspectRatioOfTopContainer(!1);var e=this.model.get("videoPlayer").getContainerElement(),t=this.model.get("optimalWidth");e.width()<t&&e.css("width",t+"px")},restoreOriginalVideoPlayerWidth:function(){this.model.get("videoPlayer").getContainerElement().css("width","")}})}),Ndn_Require.define("views/Ndn/Widget/VideoLauncher/SliderView",["jquery","underscore","views/Ndn/Widget/VideoLauncher/AbstractSliderView","models/Ndn/Utils/UserAgent","models/Ndn/Widget","jquery_imagesloaded","jquery_bxslider","jquery_autoellipsis"],function(e,t,i,n,o){return i.extend({events:{mouseenter:"onUserInteractionStart",touchstart:"onUserInteractionStart",mouseleave:"onUserInteractionEnd",touchend:"onUserInteractionEnd","click .ndn_sliderContainer li a":"onThumbnailClick","click .ndn_sliderContainer .ndn_sliderControls":"onThumbnailClick","click .ndn_sliderNext":"onNextClick","click .ndn_sliderPrev":"onPrevClick","click .ndn_playlistThumbnails li a":"onThumbnailClick"},initialize:function(e){i.prototype.initialize.apply(this,arguments),this.hideVideoPlayerWhileLoading(),this.initializeAspectRatioOfTopContainer();var t=this;this.once("render",function(e){this.model.get("videoPlayer").on({videoPlaylistLoad:function(){t.synchronizeInterface()}})})},synchronizeInterface:function(){this.renderThumbnailPlaceholders(),this.model.getThumbnailsEnabled()?this.renderThumbnails():this.$el.find(".ndn_playlistThumbnails").hide(),this.updateSelectableVideos(),this.showCarousel()},onTeaserFinished:function(i){i=t.isUndefined(i)?!0:i,i?this.$el.find(".ndn_videoPlayer").fadeTo(1e3,.01).fadeOut(1e3,e.proxy(function(){this.transitionToSlider()},this)):this.transitionToSlider(),this.model.set("hasConcludedVideoPlayer",!0)},showCarousel:function(){this.model.isShowcaseCarouselEnabled()&&(this.$el.find(".ndn_sliderControls").toggle(this.model.getCurrentPlaylistLength()>1),this.$el.find(".ndn_selectableVideos > li").css("width",this.model.getContainerElement().width()+"px"),this.model.get("carousel").stopAuto(),this.model.get("carousel").goToSlide(0),this.model.get("carousel").startAuto(),this.$el.find(".ndn_sliderThumbnailOverlay p").ellipsis(),this.$el.find(".ndn_sliderVideoTitle").ellipsis())},transitionToSlider:function(){i.prototype.initializeShowcaseCarousel.apply(this,[!0]).done(e.proxy(function(){this.$el.find(".ndn_videoPlayerWrapper").hide();try{this.$el.find(".ndn_videoPlayerWrapper").detach()}catch(e){}this.showCarousel()},this))},onPrevClick:function(){return this.model.get("carousel").stopAuto(),this.model.get("carousel").goToPrevSlide(),this.model.get("carousel").startAuto(),!1},onNextClick:function(){return this.model.get("carousel").stopAuto(),this.model.get("carousel").goToNextSlide(),this.model.get("carousel").startAuto(),!1},onUserInteractionStart:function(){this.model.set({userHasInteracted:!0})},setCurrentVideoThumbnail:function(e){this.$el.find('.ndn_playlistThumbnails [data-video-id="'+e+'"] .ndn_currentVideoThumbnail').fadeIn(400)},clearCurrentVideoThumbnail:function(){this.$el.find(".ndn_currentVideoThumbnail").fadeOut(400)},goToThumbnailSlide:function(e){var t=this.$el.find('.ndn_playlistThumbnails [data-video-id="'+e+'"]').data("videoIndex");this.model.get("thumbnailCarousel").goToSlide(Math.floor(t/3))},onThumbnailClick:function(i){var n="";if(void 0!==e(i.currentTarget).attr("href"))n=e(i.currentTarget).attr("href");else{var o=e(t.first(this.$el.find('[data-video-index="'+this.model.get("carousel").getCurrentSlide()+'"]')));n=o.find("a").attr("href")}return this.openNdnWindow(n),i.preventDefault(),!1}})}),Ndn_Require.define("text!templates/ndn/widget/video-launcher/slider/default.html",[],function(){return'<div class="ndn_responsiveContainer ndn_sliderTopContainer">\n	<div class="ndn_sliderContainer">\n		<div class="ndn_videoPlayerWrapper">\n			<div id="{{playerContainerElementId}}" class="ndn_playerContainer"></div>\n		</div>\n		<ul class="ndn_sliderItems ndn_selectableVideos"></ul>\n		<div class="ndn_sliderControls">\n			<div class="ndn_sliderPrev ndn_sliderNavButton">\n				<div class="ndn_arrow"></div>\n			</div>\n			<div class="ndn_sliderNext ndn_sliderNavButton">\n				<div class="ndn_arrow"></div>\n			</div>\n		</div>\n	</div>\n</div>\n<div class="ndn_playlistThumbnails">\n</div>'}),Ndn_Require.define("text!templates/ndn/widget/video-launcher/slider/selectableVideos.html",[],function(){return'{{#playlistItems}}\n    <li data-video-id="{{videoId}}" title="{{videoTitle}}" data-video-index="{{videoIndex}}" class="ndn_selectableVideo">\n        <a href="{{landingPageUrl}}">\n            <div class="ndn_sliderThumbnailOverlay">\n                <p class="ndn_sliderVideoTitle">{{videoTitle}}</p>\n                <p class="ndn_producerName">{{provider.name}}</p>\n                <div class="ndn_imagePlaceholder" data-src="{{provider.logoUrl}}" data-class="ndn_providerLogo"></div>\n            </div>\n            <div class="ndn_imagePlaceholder" data-src="{{stillImageUrl}}"></div>\n            <div class="ndn_playButton"></div>\n        </a>\n    </li>\n{{/playlistItems}}\n'}),Ndn_Require.define("text!templates/ndn/widget/video-launcher/slider/thumbnails.html",[],function(){return'<h4>More videos:</h4>\n<ul class="ndn_playlistThumbnailsList">\n	{{#playlistVideos}}\n	<li class="ndn_playlistVideoThumbnail ndn_thumbnail" data-video-index="{{videoIndex}}" data-video-id="{{videoId}}" title="{{videoTitle}}">\n			<div class="ndn_thumbnailContainer">\n				<a href="{{landingPageUrl}}">\n					<img src="{{stillImageUrl}}"/>\n					<div class="ndn_titleOverlay">\n						<div class="ndn_thumbTitle">{{videoTitle}}</div>\n					</div>\n				</a>\n			</div>\n			<div class="ndn_currentVideoThumbnail"></div>\n		</li>\n	{{/playlistVideos}}\n</ul>\n'}),Ndn_Require.define("models/Ndn/Widget/VideoLauncher/SliderModel",["jquery","underscore","models/Ndn/App","models/Ndn/Widget","models/Ndn/Widget/VideoLauncher/AbstractModel","models/Ndn/PlayerServices","models/Ndn/VideoPlayer","models/Ndn/Utils/UserAgent","views/Ndn/Widget/VideoLauncher/SliderView","text!templates/ndn/widget/video-launcher/slider/default.html","text!templates/ndn/widget/video-launcher/slider/selectableVideos.html","text!templates/ndn/widget/video-launcher/slider/thumbnails.html","jquery_responsive_containers"],function(e,t,i,n,o,a,r,s,l,d,c,u){return o.extend({defaults:{widgetView:l,templates:{"default":d,selectableVideos:c,thumbnails:u},playlistItemsLimit:3,hasConcludedVideoPlayer:!1,userHasInteracted:!1,addedVideoPlayerWidth:0,optimalWidth:315,aspectRatioEnabled:!0,carousel:null,thumbnailCarousel:null},initialize:function(e){o.prototype.initialize.apply(this,arguments)},embed:function(){return this.initializeVideoPlayer(),e.Deferred(e.proxy(function(e){this.get("view").render(this.getTemplate("default"),{playerContainerElementId:this.getPlayerContainerElementId(),width:this.get("config").width,height:this.get("config").height,siteSection:this.get("config").siteSection}),this.trigger("containerInitialized"),this.get("videoPlayer").embed(this.getPlayerContainerElementId(),this.get("config")),e.resolve()},this)).promise()},getVideos:function(){return e.Deferred(e.proxy(function(i){this.getParentWidget().getSettings().done(e.proxy(function(e){var n=(this.get("config"),e.playlists[t.first(t.keys(e.playlists))]||[]),o=t.first(n.items,6);o=this.getVideoDataForLaunchers(o),i.resolve(o)},this))},this)).promise()},unmutePlayer:function(){this.get("videoPlayer").setMuted(!1)},isAspectRatioOfTopContainerEnabled:function(){return this.get("aspectRatioEnabled")},toggleAspectRatioOfTopContainer:function(e){this.set("aspectRatioEnabled",e)},getPlayerContainerElementId:function(){return this.get("widgetUid")+"-player"},getCurrentPlaylistLength:function(){return this.get("videoPlayer").get("playlistData").items.length},getThumbnailsEnabled:function(){var e=this.getContainerElement().parent(),t=e.height(),i=e.width();return!(300==i&&250==t)},isShowcaseCarouselEnabled:function(){return!!this.get("carousel")}})}),Ndn_Require.define("views/Ndn/Widget/VideoPlayer/PTRView",["jquery","underscore","views/Ndn/Widget/VideoPlayer/AbstractView","views/Ndn/Widget/VideoLauncher/AbstractSliderView","models/Ndn/Utils/UserAgent","models/Ndn/Widget","models/Ndn/Debugger","jquery_imagesloaded","jquery_bxslider","jquery_autoellipsis"],function(e,t,i,n,o,a,r){return i.extend({events:{"mouseenter .ndn_videoPlayerWrapper":"onUserInteractionStart","touchstart .ndn_videoPlayerWrapper":"onUserInteractionStart","mouseleave .ndn_videoPlayerWrapper":"onUserInteractionEnd","touchend .ndn_videoPlayerWrapper":"onUserInteractionEnd","click .ndn_sliderContainer .ndn_selectableVideo a":"onThumbnailClick","click .ndn_sliderNext":"onNextClick","click .ndn_sliderPrev":"onPrevClick","click .ndn_playlistThumbnails li a":"onThumbnailClick"},initialize:function(t){i.prototype.initialize.apply(this,arguments),this.hideVideoPlayerWhileLoading(),this.initializeAspectRatioOfTopContainer(),this.$el.addClass("ndn_widget_VideoLauncher-Slider"),this.model.on("change:userHasInteracted",e.proxy(function(){this.model.isPtr()&&this.model.get("userHasInteracted")&&!this.model.get("hasConcludedVideoPlayer")&&(this.model.unmutePlayer(),this.disablePreviewMode())},this)),this.once("render",function(e){this.renderThumbnailPlaceholders(),this.model.getThumbnailsEnabled()||this.$el.find(".ndn_playlistThumbnails").hide()}),this.model.on("videoPlayerInitialized",e.proxy(function(){var t=this.model.getCachedSettings();this.model.set("videoLengthToPlay",t.settings.behavior.ptr.previewLength),r.inMode("ptr")&&console.log("[Ndn_Widget_VideoPlayer_PTRView] previewLength ==",this.model.get("videoLengthToPlay")),this.model.get("videoPlayer").on({adStart:e.proxy(function(){this.clearCurrentVideoThumbnail(),this.setCurrentVideoThumbnail(this.model.get("videoPlayer").getCurrentVideoId()),this.goToThumbnailSlide(this.model.get("videoPlayer").getCurrentVideoId())},this),adEnd:e.proxy(function(){this.model.get("userHasInteracted")&&this.disablePreviewMode()},this),videoTimeUpdate:e.proxy(function(e){this.isPreviewModeEnabled()&&e.data.currentTime>this.model.get("videoLengthToPlay")&&this.concludePreviewMode()},this),videoUnload:e.proxy(function(){r.inMode("ptr")&&console.log("!!this.model.get('videoPlayer').isMuted(true) ==",!!this.model.get("videoPlayer").isMuted(!0)),this.model.set("previousVideoMuted",!!this.model.get("videoPlayer").isMuted(!0))},this),videoEnd:e.proxy(function(){this.clearCurrentVideoThumbnail(),r.inMode("ptr")&&console.log("[Ndn_Widget_VideoPlayer_PTRView] shouldPlaybackEndUponVideoEnd ==",this.model.shouldPlaybackEndUponVideoEnd()),this.model.shouldPlaybackEndUponVideoEnd()&&this.concludePreviewMode()},this),rmmContinuousPlayEnd:e.proxy(function(){this.concludePreviewMode()},this),videoStart:e.proxy(function(){this.setCurrentVideoThumbnail(this.model.get("videoPlayer").getCurrentVideoId()),this.goToThumbnailSlide(this.model.get("videoPlayer").getCurrentVideoId())},this)}).once({videoLoad:e.proxy(function(){this.model.getThumbnailsEnabled()&&this.renderThumbnails()},this)})},this))},isPreviewModeEnabled:function(){return this.model.get("videoLengthToPlay")>0},disablePreviewMode:function(){this.model.set("videoLengthToPlay",0)},concludePreviewMode:function(i){i=t.isUndefined(i)?!0:i,this.model.set("hasConcludedVideoPlayer",!0),this.updateSelectableVideos().done(e.proxy(function(){this.setCurrentVideoThumbnail(this.$el.find('[data-video-index="0"]').data("videoId"));var e=this.$el.find(".ndn_sliderContainer"),t=this;i?e.find(".ndn_videoPlayer").fadeTo(1e3,.01).fadeOut(1e3,function(){t.transitionToSlider()}):t.transitionToSlider(),this.model.destroyPlayer()},this))},transitionToSlider:function(){n.prototype.initializeShowcaseCarousel.apply(this,[!0]).done(e.proxy(function(){var e=this.model.get("carousel"),t=this.$el.find(".ndn_sliderContainer"),i=t.find(".ndn_videoPlayerWrapper");e.stopAuto(),e.goToSlide(0),e.startAuto(),i.hide(),i.detach()},this))},onUserInteractionStart:function(){this.model.setUserInteractionTimer()},onUserInteractionEnd:function(){this.model.unsetUserInteractionTimer()},onPrevClick:function(){return this.model.get("carousel").stopAuto(),this.model.get("carousel").goToPrevSlide(),this.model.get("carousel").startAuto(),!1},onNextClick:function(){return this.model.get("carousel").stopAuto(),this.model.get("carousel").goToNextSlide(),this.model.get("carousel").startAuto(),!1},setCurrentVideoThumbnail:function(e){this.$el.find('.ndn_playlistThumbnails [data-video-id="'+e+'"] .ndn_currentVideoThumbnail').fadeIn(400)},clearCurrentVideoThumbnail:function(){this.$el.find(".ndn_currentVideoThumbnail").fadeOut(400)},goToThumbnailSlide:function(e){if(this.model.getThumbnailsEnabled()){var t=this.$el.find('.ndn_playlistThumbnails [data-video-id="'+e+'"]').data("videoIndex");this.model.get("thumbnailCarousel").goToSlide(Math.floor(t/3))}},onThumbnailClick:function(t){return this.openNdnWindow(e(t.currentTarget).attr("href")),this.model.onThumbnailClick(),t.preventDefault(),t.stopPropagation(),!1},hideVideoPlayerWhileLoading:function(){n.prototype.hideVideoPlayerWhileLoading.apply(this,arguments)},containedWithinOverflowXHiddenContainer:function(){return n.prototype.containedWithinOverflowXHiddenContainer.apply(this,arguments)},initializeOptimalVideoPlayerWidthBehavior:function(){n.prototype.initializeOptimalVideoPlayerWidthBehavior.apply(this,arguments)},renderThumbnailPlaceholders:function(){n.prototype.renderThumbnailPlaceholders.apply(this,arguments)},renderThumbnails:function(){n.prototype.renderThumbnails.apply(this,arguments)},centerThumbnails:function(){n.prototype.centerThumbnails.apply(this,arguments)},updateSelectableVideos:function(){return n.prototype.updateSelectableVideos.apply(this,arguments)},setVideoPlayerOnScreen:function(){return n.prototype.setVideoPlayerOnScreen.apply(this,arguments)},ensureOptimalVideoPlayerWrapperWidth:function(){return n.prototype.ensureOptimalVideoPlayerWrapperWidth.apply(this,arguments)},ensureOptimalVideoPlayerWidth:function(){return n.prototype.ensureOptimalVideoPlayerWidth.apply(this,arguments)},restoreOriginalVideoPlayerWidth:function(){return n.prototype.restoreOriginalVideoPlayerWidth.apply(this,arguments)},restoreOriginalVideoPlayerWrapperWidth:function(){return n.prototype.restoreOriginalVideoPlayerWrapperWidth.apply(this,arguments)},initializeAspectRatioOfTopContainer:function(){return n.prototype.initializeAspectRatioOfTopContainer.apply(this,arguments)},initializeShowcaseCarousel:function(){return n.prototype.initializeShowcaseCarousel.apply(this,arguments)}})}),Ndn_Require.define("models/Ndn/Widget/VideoPlayer/PTRModel",["jquery","underscore","models/Ndn/Widget","models/Ndn/Debugger","models/Ndn/Utils/UserAgent","models/Ndn/Widget/VideoPlayer/AbstractModel","models/Ndn/Widget/VideoLauncher/SliderModel","views/Ndn/Widget/VideoPlayer/PTRView","text!templates/ndn/widget/video-launcher/slider/default.html","text!templates/ndn/widget/video-launcher/slider/selectableVideos.html","text!templates/ndn/widget/video-launcher/slider/thumbnails.html"],function(e,t,i,n,o,a,r,s,l,d,c){return a.extend({defaults:{widgetView:s,templates:{"default":l,selectableVideos:d,thumbnails:c},playlistItemsLimit:15,videoLengthToPlay:30,userHasInteracted:!1,hasConcludedVideoPlayer:!1,userInteractionTimer:null,addedVideoPlayerWidth:0,optimalWidth:315,aspectRatioEnabled:!0,previousVideoMuted:!1,carousel:null,thumbnailCarousel:null},initialize:function(e,t){a.prototype.initialize.apply(this,arguments)},shouldPlayPtrExperience:function(){return this.isInView(this.get("view").$el)||i.isEmbeddedByIframe()&&this.getCachedSettings().settings.behavior.ptr.playsInIframe},initializeVideoPlayer:function(){this.setIsPtr(this.shouldPlayPtrExperience()),a.prototype.initializeVideoPlayer.apply(this,arguments);var t=this.get("videoPlayer");t.setPlaylistItemsLimit(this.get("playlistItemsLimit")),t.toggleInfoPanel(!1),t.on("embed",e.proxy(function(){n.inMode("ptr")&&console.log("Embed event heard... this.shouldPlayPtrExperience() ==",this.shouldPlayPtrExperience()),this.isPtr()?(n.inMode("ptr")&&console.log("this.isPtr() ==",this.isPtr()),t.setDefaultPlayOnLoadValue(!0).load()):this.initializeVideoPlayerForRmm(!0)},this))},shouldBeMuted:function(){return this.get("userHasInteracted")?!1:!0},getThumbnailsEnabled:function(){return r.prototype.getThumbnailsEnabled.apply(this,arguments)},isShowcaseCarouselEnabled:function(){return r.prototype.isShowcaseCarouselEnabled.apply(this,arguments)},getVideos:function(){return e.Deferred(e.proxy(function(e){var i=(this.get("config"),t.first(this.get("videoPlayer").getActivePlaylistData().items,6));i=this.getVideoDataForLaunchers(i),e.resolve(i)},this)).promise()},getCurrentPlaylistLength:function(){return this.get("videoPlayer").get("playlistData").items.length},shouldPlaybackEndUponVideoEnd:function(){return!this.get("userHasInteracted")||!this.shouldPlayPtrExperience()||this.get("previousVideoMuted")},mutePlayer:function(){this.get("videoPlayer").setMuted(!0)},unmutePlayer:function(){this.get("videoPlayer").setMuted(!1)},isAspectRatioOfTopContainerEnabled:function(){return r.prototype.isAspectRatioOfTopContainerEnabled.apply(this,arguments)},toggleAspectRatioOfTopContainer:function(e){return r.prototype.toggleAspectRatioOfTopContainer.apply(this,arguments)},onThumbnailClick:function(){this.get("hasConcludedVideoPlayer")||(this.get("videoPlayer").isShowingAd()?this.get("videoPlayer").setMuted(!0):this.get("videoPlayer").pause())},setUserInteractionTimer:function(){this.get("userInteractionTimer")&&this.unsetUserInteractionTimer(),this.set("userInteractionTimer",setTimeout(e.proxy(function(){this.set("userHasInteracted",!0),this.unsetUserInteractionTimer()},this),2e3))},unsetUserInteractionTimer:function(){clearTimeout(this.get("userInteractionTimer")),this.set("userInteractionTimer",null)},destroyPlayer:function(){var e=this.get("videoPlayer").get("player").getCurrentTime();this.get("videoPlayer").get("player").destroy();var t={getCurrentTime:function(){return e},isPlaying:function(){return!1},pause:function(){}};this.get("videoPlayer").set("player",t)}})}),Ndn_Require.define("views/Ndn/Widget/InViewView",["jquery","views/Ndn/AbstractView"],function(e,t){return t.extend({initialize:function(){t.prototype.initialize.apply(this,arguments)},hide:function(){this.$el.hide()},expand:function(){this.$el.slideDown()},collapse:function(){return this.$el.slideUp().promise()}})}),Ndn_Require.define("text!templates/ndn/widget/in-view/default.html",[],function(){return'<div class="ndn_playerContainer" id="{{playerContainerElementId}}" style="width:100%;height:100%;"></div>'}),Ndn_Require.define("models/Ndn/Widget/InViewModel",["jquery","models/Ndn/App","models/Ndn/Widget","models/Ndn/Ads/EasiInformPlayer","views/Ndn/Widget/InViewView","models/Ndn/Utils/DomElement","models/Ndn/Utils/AspectRatio","models/Ndn/Utils/UserAgent","models/Ndn/AdBlockDetection/AdBlockDetector","text!templates/ndn/widget/in-view/default.html"],function(e,t,i,n,o,a,r,s,l,d){return i.extend({defaults:{videoPlayer:null,widgetView:o,templates:{"default":d},playlistItemsLimit:1},initialize:function(){i.prototype.initialize.apply(this,arguments);var e=this;this.on({videoPlayerEmbedded:function(){var t=this.get("videoPlayer"),i=this.get("view");t.on({adStart:function(){},"adEnd adError adTimeout adUnavailable":function(){i.collapse().done(function(){e.destruct()})}}),t.start()}})},getChannelId:function(e){return e?94802:77940},embed:function(){return e.Deferred(e.proxy(function(i){var o=this.getPlayerContainerElementId();this.get("view").render(this.getTemplate("default"),{playerContainerElementId:o}),this.trigger("containerInitialized");var d=e("#"+o);r.maintain(d,"16:9"),a.onceHasWidthAndHeight(d).done(e.proxy(function(){l.hasAdBlocker().done(e.proxy(function(){n.load(d,{adTrackingGroupNumber:this.getCachedSettings().settings.dfp.adTrackingGroupNumber,embedIndex:this.getEmbedIndex(),adBlockDetectionId:l.getCachedScenarioId(),widgetId:this.get("config").widgetId,pageViewSessionId:t.getPageViewSessionId(),channelId:this.getChannelId(s.isDesktop())}).done(e.proxy(function(e){this.set("videoPlayer",e),this.trigger("videoPlayerInitialized"),this.trigger("videoPlayerEmbedded"),i.resolve()},this))},this))},this))},this)).promise()},destruct:function(){i.prototype.destruct.apply(this,arguments)}})}),Ndn_Require.define("models/Ndn/Widget",function(){});