define(["jquery","managers/device","version!fly/managers/debug"],function(i,t,e){e=e.init("inlineProductCarousel"),i.widget("cnet.inlineProductCarousel",i.fly.base,{options:{transitionTime:500,slidePause:6e3},currentSlideIndex:1,numSlides:3,slideWidth:"770px",isInteractedWith:!1,isSliding:!1,_create:function(){this._setup(),i(".slidesDiv",this.$element).length>0&&(this.numSlides=i(".slidesDiv > div",this.$element).length,this._updateSlideWidth(),i(".slide1",this.$element).css("left","0px"),i(".slide2",this.$element).css("left",this.slideWidth),i(".slide3",this.$element).css("left","-"+this.slideWidth),i(".firstPagination",this.$element).text(this.currentSlideIndex),this._setupEvents(),this.numSlides>1?this._autoScrollSlides():(i(".rightSlide",this.$element).addClass("disable"),i(".leftSlide",this.$element).addClass("disable")))},_setupEvents:function(){var e=this;i(window).resize(function(){e._updateSlideWidth()}),i(".slide_header, .slide_img, .slide_check",this.$element).on("hover",function(){i(".slide_img",e.$element).toggleClass("slide_img_hover"),i(".slideImageHolder",e.$element).toggleClass("slideImageHolder_hover"),i(".slide_header, .slide_check",e.$element).toggleClass("active")}),this.numSlides>1&&(i(".rightSlide",this.$element).on("click",function(){e.isInteractedWith=!0,e._handleNextSlide()}),i(".leftSlide",this.$element).on("click",function(){e.isInteractedWith=!0,e._handlePrevSlide()}),t.isMobile()&&i(".slide_window",this.$element).on({swipeleft:function(){e.isInteractedWith=!0,e._handleNextSlide()},swiperight:function(){e.isInteractedWith=!0,e._handlePrevSlide()}}))},_handleNextSlide:function(){var e=this;if(!this.isSliding){this.isSliding=!0;var s=i(".slide1",this.$element),n=i(".slide2",this.$element),l=i(".slide3",this.$element);3==this.numSlides?1==this.currentSlideIndex?(s.animate({left:"-"+this.slideWidth},this.options.transitionTime),n.animate({left:"0"},this.options.transitionTime),l.css("left",this.slideWidth),this.currentSlideIndex=2):2==this.currentSlideIndex?(s.css("left",this.slideWidth),n.animate({left:"-"+this.slideWidth},this.options.transitionTime),l.animate({left:"0"},this.options.transitionTime),this.currentSlideIndex=3):(s.animate({left:"0"},this.options.transitionTime),n.css("left",this.slideWidth),l.animate({left:"-"+this.slideWidth},this.options.transitionTime),this.currentSlideIndex=1):2==this.numSlides&&(1==this.currentSlideIndex?(n.css("left",this.slideWidth),s.animate({left:"-"+this.slideWidth},this.options.transitionTime),n.animate({left:"0"},this.options.transitionTime),this.currentSlideIndex=2):2==this.currentSlideIndex&&(s.css("left",this.slideWidth),s.animate({left:"0"},this.options.transitionTime),n.animate({left:"-"+this.slideWidth},this.options.transitionTime),this.currentSlideIndex=1)),setTimeout(function(){e.isSliding=!1},this.options.transitionTime),t.isMobile()&&this._updateSlideIndicator(),i(".firstPagination",this.$element).text(this.currentSlideIndex)}},_handlePrevSlide:function(){var e=this;if(!this.isSliding){this.isSliding=!0;var s=i(".slide1",this.$element),n=i(".slide2",this.$element),l=i(".slide3",this.$element);3==this.numSlides?1==this.currentSlideIndex?((l.css("left","1540px")||l.css("left","1240px"))&&l.css("left","-"+this.slideWidth),s.animate({left:this.slideWidth},this.options.transitionTime),n.css("left","-"+this.slideWidth),l.animate({left:"0"},this.options.transitionTime),this.currentSlideIndex=3):2==this.currentSlideIndex?(s.animate({left:"0"},this.options.transitionTime),n.animate({left:this.slideWidth},this.options.transitionTime),l.css("left","-"+this.slideWidth),this.currentSlideIndex=1):(s.css("left","-"+this.slideWidth),n.animate({left:"0"},this.options.transitionTime),l.animate({left:this.slideWidth},this.options.transitionTime),this.currentSlideIndex=2):2==this.numSlides&&(1==this.currentSlideIndex?(n.css("left","-"+this.slideWidth),s.animate({left:this.slideWidth},this.options.transitionTime),n.animate({left:"0"},this.options.transitionTime),this.currentSlideIndex=2):2==this.currentSlideIndex&&(s.css("left","-"+this.slideWidth),s.animate({left:"0"},this.options.transitionTime),n.animate({left:this.slideWidth},this.options.transitionTime),this.currentSlideIndex=1)),setTimeout(function(){e.isSliding=!1},this.options.transitionTime),t.isMobile()&&this._updateSlideIndicator(),i(".firstPagination",this.$element).text(this.currentSlideIndex)}},_updateSlideWidth:function(){var t=this.slideWidth;this.slideWidth=this.$element.css("width"),i(".slidesDiv > div",this.$element).first().css("width")!=t&&(i(".slidesDiv > div",this.$element).css("width",this.slideWidth),this._updateSlidePosition())},_updateSlidePosition:function(){for(var t=this,e=1;e<=this.numSlides;e++){var s=i(".slide"+e,this.$element);s.css("left").replace("px","")>0?s.css("left",t.slideWidth):s.css("left").replace("px","")<0&&s.css("left","-"+t.slideWidth)}},_updateSlideIndicator:function(){var t=i(".jumps .jump",this.$element);t.removeClass("selected"),t.eq(this.currentSlideIndex-1).addClass("selected")},_autoScrollSlides:function(){var i=this;if(!this.isInteractedWith)var t=setInterval(function(){i.isInteractedWith?clearInterval(t):i._handleNextSlide()},i.options.slidePause)}})});