/*!
 * jQuery UI Position 1.9.2
 * http://jqueryui.com
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/position/
 */

define(["jquery","version!libs/jquery/ui/jquery.ui.core"],function(t,e){function i(t,e,i){return[parseInt(t[0],10)*(a.test(t[0])?e/100:1),parseInt(t[1],10)*(a.test(t[1])?i/100:1)]}function o(e,i){return parseInt(t.css(e,i),10)||0}t.ui=t.ui||{};var n,l=Math.max,s=Math.abs,f=Math.round,r=/left|center|right/,h=/top|center|bottom/,p=/[\+\-]\d+%?/,c=/^\w+/,a=/%$/,d=t.fn.position;t.position={scrollbarWidth:function(){if(n!==e)return n;var i,o,l=t("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),s=l.children()[0];return t("body").append(l),i=s.offsetWidth,l.css("overflow","scroll"),o=s.offsetWidth,i===o&&(o=l[0].clientWidth),l.remove(),n=i-o},getScrollInfo:function(e){var i=e.isWindow?"":e.element.css("overflow-x"),o=e.isWindow?"":e.element.css("overflow-y"),n="scroll"===i||"auto"===i&&e.width<e.element[0].scrollWidth,l="scroll"===o||"auto"===o&&e.height<e.element[0].scrollHeight;return{width:n?t.position.scrollbarWidth():0,height:l?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var i=t(e||window),o=t.isWindow(i[0]);return{element:i,isWindow:o,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:o?i.width():i.outerWidth(),height:o?i.height():i.outerHeight()}}},t.fn.position=function(e){if(!e||!e.of)return d.apply(this,arguments);e=t.extend({},e);var n,a,g,u,m,w=t(e.of),W=t.position.getWithinInfo(e.within),v=t.position.getScrollInfo(W),y=w[0],b=(e.collision||"flip").split(" "),x={};return 9===y.nodeType?(a=w.width(),g=w.height(),u={top:0,left:0}):t.isWindow(y)?(a=w.width(),g=w.height(),u={top:w.scrollTop(),left:w.scrollLeft()}):y.preventDefault?(e.at="left top",a=g=0,u={top:y.pageY,left:y.pageX}):(a=w.outerWidth(),g=w.outerHeight(),u=w.offset()),m=t.extend({},u),t.each(["my","at"],function(){var t,i,o=(e[this]||"").split(" ");1===o.length&&(o=r.test(o[0])?o.concat(["center"]):h.test(o[0])?["center"].concat(o):["center","center"]),o[0]=r.test(o[0])?o[0]:"center",o[1]=h.test(o[1])?o[1]:"center",t=p.exec(o[0]),i=p.exec(o[1]),x[this]=[t?t[0]:0,i?i[0]:0],e[this]=[c.exec(o[0])[0],c.exec(o[1])[0]]}),1===b.length&&(b[1]=b[0]),"right"===e.at[0]?m.left+=a:"center"===e.at[0]&&(m.left+=a/2),"bottom"===e.at[1]?m.top+=g:"center"===e.at[1]&&(m.top+=g/2),n=i(x.at,a,g),m.left+=n[0],m.top+=n[1],this.each(function(){var r,h,p=t(this),c=p.outerWidth(),d=p.outerHeight(),y=o(this,"marginLeft"),H=o(this,"marginTop"),T=c+y+o(this,"marginRight")+v.width,L=d+H+o(this,"marginBottom")+v.height,I=t.extend({},m),P=i(x.my,p.outerWidth(),p.outerHeight());"right"===e.my[0]?I.left-=c:"center"===e.my[0]&&(I.left-=c/2),"bottom"===e.my[1]?I.top-=d:"center"===e.my[1]&&(I.top-=d/2),I.left+=P[0],I.top+=P[1],t.support.offsetFractions||(I.left=f(I.left),I.top=f(I.top)),r={marginLeft:y,marginTop:H},t.each(["left","top"],function(i,o){t.ui.position[b[i]]&&t.ui.position[b[i]][o](I,{targetWidth:a,targetHeight:g,elemWidth:c,elemHeight:d,collisionPosition:r,collisionWidth:T,collisionHeight:L,offset:[n[0]+P[0],n[1]+P[1]],my:e.my,at:e.at,within:W,elem:p})}),t.fn.bgiframe&&p.bgiframe(),e.using&&(h=function(t){var i=u.left-I.left,o=i+a-c,n=u.top-I.top,f=n+g-d,r={target:{element:w,left:u.left,top:u.top,width:a,height:g},element:{element:p,left:I.left,top:I.top,width:c,height:d},horizontal:0>o?"left":i>0?"right":"center",vertical:0>f?"top":n>0?"bottom":"middle"};c>a&&s(i+o)<a&&(r.horizontal="center"),d>g&&s(n+f)<g&&(r.vertical="middle"),l(s(i),s(o))>l(s(n),s(f))?r.important="horizontal":r.important="vertical",e.using.call(this,t,r)}),p.offset(t.extend(I,{using:h}))})},t.ui.position={fit:{left:function(t,e){var i,o=e.within,n=o.isWindow?o.scrollLeft:o.offset.left,s=o.width,f=t.left-e.collisionPosition.marginLeft,r=n-f,h=f+e.collisionWidth-s-n;e.collisionWidth>s?r>0&&0>=h?(i=t.left+r+e.collisionWidth-s-n,t.left+=r-i):h>0&&0>=r?t.left=n:r>h?t.left=n+s-e.collisionWidth:t.left=n:r>0?t.left+=r:h>0?t.left-=h:t.left=l(t.left-f,t.left)},top:function(t,e){var i,o=e.within,n=o.isWindow?o.scrollTop:o.offset.top,s=e.within.height,f=t.top-e.collisionPosition.marginTop,r=n-f,h=f+e.collisionHeight-s-n;e.collisionHeight>s?r>0&&0>=h?(i=t.top+r+e.collisionHeight-s-n,t.top+=r-i):h>0&&0>=r?t.top=n:r>h?t.top=n+s-e.collisionHeight:t.top=n:r>0?t.top+=r:h>0?t.top-=h:t.top=l(t.top-f,t.top)}},flip:{left:function(t,e){var i,o,n=e.within,l=n.offset.left+n.scrollLeft,f=n.width,r=n.isWindow?n.scrollLeft:n.offset.left,h=t.left-e.collisionPosition.marginLeft,p=h-r,c=h+e.collisionWidth-f-r,a="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,d="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,g=-2*e.offset[0];0>p?(i=t.left+a+d+g+e.collisionWidth-f-l,(0>i||i<s(p))&&(t.left+=a+d+g)):c>0&&(o=t.left-e.collisionPosition.marginLeft+a+d+g-r,(o>0||s(o)<c)&&(t.left+=a+d+g))},top:function(t,e){var i,o,n=e.within,l=n.offset.top+n.scrollTop,f=n.height,r=n.isWindow?n.scrollTop:n.offset.top,h=t.top-e.collisionPosition.marginTop,p=h-r,c=h+e.collisionHeight-f-r,a="top"===e.my[1],d=a?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,g="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,u=-2*e.offset[1];0>p?(o=t.top+d+g+u+e.collisionHeight-f-l,t.top+d+g+u>p&&(0>o||o<s(p))&&(t.top+=d+g+u)):c>0&&(i=t.top-e.collisionPosition.marginTop+d+g+u-r,t.top+d+g+u>c&&(i>0||s(i)<c)&&(t.top+=d+g+u))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},function(){var e,i,o,n,l,s=document.getElementsByTagName("body")[0],f=document.createElement("div");e=document.createElement(s?"div":"body"),o={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},s&&t.extend(o,{position:"absolute",left:"-1000px",top:"-1000px"});for(l in o)e.style[l]=o[l];e.appendChild(f),i=s||document.documentElement,i.insertBefore(e,i.firstChild),f.style.cssText="position: absolute; left: 10.7432222px;",n=t(f).offset().left,t.support.offsetFractions=n>10&&11>n,e.innerHTML="",i.removeChild(e)}(),t.uiBackCompat!==!1&&!function(t){var i=t.fn.position;t.fn.position=function(o){if(!o||!o.offset)return i.call(this,o);var n=o.offset.split(" "),l=o.at.split(" ");return 1===n.length&&(n[1]=n[0]),/^\d/.test(n[0])&&(n[0]="+"+n[0]),/^\d/.test(n[1])&&(n[1]="+"+n[1]),1===l.length&&(/left|center|right/.test(l[0])?l[1]="center":(l[1]=l[0],l[0]="center")),i.call(this,t.extend(o,{at:l[0]+n[0]+" "+l[1]+n[1],offset:e}))}}(jQuery)});