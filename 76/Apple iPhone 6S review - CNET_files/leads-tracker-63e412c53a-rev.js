define(["jquery","version!fly/managers/debug","managers/tealium","managers/page-vars","version!fly/components/base"],function(e,t,i,n){t=t.init("leadsTracker"),e.widget("cnet.leadsTracker",e.fly.base,{options:{},viewguid:null,_create:function(){this._setup(),this.viewguid=n.guid,this.viewguid&&this.$element.attr("href",this.$element.attr("href")+"&viewguid="+this.viewguid),this._setupEvents()},_setupEvents:function(){this.$element.on("click",function(n){try{var s=this.href.split("?")[1].split("&"),a={};e.each(s,function(e,t){var i=t.split("=");a[i[0]]=i[1]});for(var r="",c=e(n.target).closest("[section],[id]"),l=0;3>l;l++)c.attr("section")?r=c.attr("section")+"|"+r:c.attr("id")&&(r=c.attr("id")+"|"+r),c=c.parent().closest("[section],[id]");r=r.slice(0,r.length-1),window.dwTag=r,a._dwLinkTag=r,i.trackLead(a),delete window.dwTag}catch(o){t.log("Unable to parse tracking url",o)}})}})});