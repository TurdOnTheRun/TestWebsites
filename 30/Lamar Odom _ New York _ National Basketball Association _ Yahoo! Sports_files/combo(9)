
/* myteams-nav.js ce80730 */ YUI.add("media-myteams-nav",function(a){a.namespace("Media").MyTeamsNav=a.Base.create("MyTeamsNav",a.Base,[],{timers:{hide:500,hover:350},overlays:[],overlayConfig:{fantasyOverlay:{srcNode:".fantasy-teams",constrain:"body",moreLink:".fantasy-teams-more",arrow:".fantasy-teams .arrow"},extraTeamsOverlay:{srcNode:".extra-teams",constrain:"body",moreLink:".extra-teams-more",arrow:".extra-teams .arrow"}},initializer:function(){var e=this,f=false,i=e.get("dailyFantasyPromo"),b=e.get("dailyFantasyTestOnly"),h=e.get("isQAproduction"),g,d,c=this.overlayConfig;for(d in c){g=this.setupOverlay(d);f=g||f}if(f){e._initEventHandlers()}if(i==="1"||(h==="1"&&b==="1")){e._initDailyFantasyInterstitial()}},showOverlay:function(b){var c=this.overlays[b];this.hideOverlays();if(c.get("destroyed")){this.setupOverlay(b);c=this.overlays[b]}var d=a.one(".yog-np");if(d){d.addClass("CoversStage")}if(c.get("visible")!==true){c.show();this._addBackgroundClickTarget()}},hideOverlays:function(){for(var b in this.overlays){if(this.overlays.hasOwnProperty(b)&&a.Lang.isObject(this.overlays[b])){this.overlays[b].hide()}}var c=a.one(".yog-np");if(c){c.removeClass("CoversStage")}},resetTimers:function(){if(this.timer){this.timer.cancel();this.timer=null}},_initDailyFantasyInterstitial:function(){var j=this,E=window.localStorage,P=j.get("dailyFantasyTitle").split("|"),k=j.get("dailyFantasySubtitle").split("|"),L=j.get("dailyFantasyTestOnly"),q=j.get("isQAproduction"),u=j.get("dailyFantasyUrl").split("|"),Q=j.get("dailyFantasyStarttime").split("|"),z=j.get("dailyFantasyLogo"),J=j.get("dailyFantasyLogoFootball"),m=j.get("dailyFantasyCustomEnterbuttonText").split("|")||["Enter Contest"],W=j.get("dailyFantasyCustomClosebuttonText").split("|")||["No Thanks"],M=j.get("dailyFantasyEnableCountdown").split("|"),h=j.get("isDailyFantasy").split("|"),w=j.get("fantasyHockeyLogoStacked"),V=j.get("fantasyLogoStacked"),H=j.get("fantasyLeague").split("|"),I=j.get("fantasyTargetPages").split("|"),c=j.get("fantasyExcludeUrl").split("|"),b=j.get("fantasyEnabled").split("|"),l=j.get("dailyFantasyStarttimeFormatted").split("|")||[""],v=j.get("specialVersion").split("|"),d=j.get("specialCloseButton").split("|"),s=j.get("specialBackground").split("|"),G=j.get("useSpecialBackground").split("|"),K=j.get("specialSignUpPosition").split("|"),p=j.get("closeLinkColor").split("|"),N=j.get("customCountdownText").split("|"),e=j.get("customCountdownColor").split("|"),r=j.get("specialBackgroundDefault"),A="",g="",Y=new Date().getTime(),n=24*60*60*1000,D=j.get("pageLeagueId"),t=j.get("siteHierarchy").split("/"),B=-1,f,F,U,O,o;for(var S=0;S<b.length;S++){if(b[S]==="1"&&I[S]==="all"&&B===-1){B=S}if(b[S]==="1"&&(I[S]===D||I[S]===t[0])){B=S;break}}if(B===-1){return}if((","+c[B]+",").indexOf(","+window.location.pathname+",")!==-1){return}M=M[B]||"";m=m[B]||"";W=W[B]||"";P=P[B]||"";k=k[B]||"";l=l[B]||"";u=u[B]||"";Q=Q[B]||"";h=h[B]||"";b=b[B]||"";H=H[B]||"";I=I[B]||"";v=v[B]||"";d=d[B]||"";s=s[B]||"";G=G[B]||"";K=K[B]||"215px";p=p[B]||"";N=N[B]||"";e=e[B]||"";if(typeof(E)!=="undefined"){var y=E.YDCSportsLastVisit;if(!y||Y-y>n||(y&&((new Date()).getDay()===0)&&((new Date(parseInt(y))).getDay()!==0))){E.YDCSportsLastVisit=Y}else{return}}else{return}if(h==="1"){F=z}else{if(H==="nhl"){F=w}else{F=V}}var T=new Date();T.setTime(Q);var X=T.toString(),x=X.split(" ");if(l.length===0&&x.length===7){l="Starts "+x[0]+", "+x[4]+" "+x[6]}var R=function(af){if(af){var Z=new Date().getTime();if(af-Z>0){var aa=Math.floor((af-Z)/1000),ae=aa%60,ab=Math.floor(aa/60)%60,ad=Math.floor(aa/3600)%24,ag=Math.floor(aa/3600/24);ae=ae>=10?ae:"0"+ae;ab=ab>=10?ab:"0"+ab;ad=ad>=10?ad:"0"+ad;var ac=ad+":"+ab+":"+ae;if(ag>0){var i=(ag>1)?" days ":" day ";return ag+i+ac}else{return ac}}else{return"00:00:00"}}};if(M==="1"){A=R(Q);g='<span class="dfpromo-startin" style="color:'+e+'">'+A+"</span>"}f=a.Node.create('<div class="dfpromo-interstitial Pos-f T-0 Start-0 W-100 H-100 Z-10 Overlay DarkOverlay M-0"></div>');if(v==="1"){var C='<p class="hide-overlay Td-u Cur-p">'+W+"</p>";if(d==="1"){C='<div class="Pos-a Fw-b Cur-p hide-overlay" style="top:-25px;right:0;"><i class="Icon" style="font-size:18px">&#xe009;</i></div>'}O=a.Node.create('<div class="dfpromo-popup M-a Ta-c Pos-a"><div class="dfpromo-popup-enter Pt-16 Pb-16 Mstart-16 Mend-16"><p style="margin-top: '+K+'"><span>'+N+"</span> "+g+'<br /><a href="'+u+'" target=_blank class="dfpromo-link"><button class="Btn Primary dfpromo-start hide-overlay" style="background: #2592fb;border:none!important;padding-top:.9em;padding-bottom:.9em;font-weight:bold;">'+m+'</button></a></p><p><a href="https://sports.yahoo.com/dailyfantasy/" target=_blank style="display: none" class="dfpromo-backup-link"><button class="Btn Primary dfpromo-start hide-overlay" style="background: #2592fb;border:none!important;padding-top:.9em;padding-bottom:.9em;font-weight:bold;">'+m+"</button></a></p>"+C+"</div></div>");if(p!==""){O.all(".hide-overlay").setStyle("color",p)}O.setStyle("width","350px");O.setStyle("height","350px")}else{O=a.Node.create('<div class="dfpromo-popup M-a Ta-c Ov-h Pos-a"><div class="dfpromo-popup-logo P-16"><img class="W-80" src="'+F+'" /></div><div class="dfpromo-popup-desc dfpromo-popup-desc Pt-16 Pb-16 Mstart-16 Mend-16"><p><span class="dfpromo-icon Fz-3xl Pend-10 ys-icon-'+H+' Lh-0"></span><span class="Fz-4xl Fw-200">'+P+"</span></p><p>"+k+'</p></div><div class="dfpromo-popup-enter dfpromo-popup-desc Pt-16 Pb-16 Mstart-16 Mend-16"><p><span class="dfpromo-starts">'+l+"</span>"+g+'</p><p><a href="'+u+'" target=_blank class="dfpromo-link"><button class="Btn Primary W-100 dfpromo-start hide-overlay">'+m+'</button></a></p><p><a href="https://sports.yahoo.com/dailyfantasy/" target=_blank style="display: none" class="dfpromo-backup-link"><button class="Btn Primary W-100 dfpromo-start hide-overlay">'+m+'</button></a></p><p><button class="Btn Primary W-100 dfpromo-close hide-overlay">'+W+"</button></p></div></div>")}if(G==="1"){if(s!==""){O.setStyle("backgroundImage","url("+s+")");O.setStyle("backgroundSize","cover")}else{if(r!==""){O.setStyle("backgroundImage","url("+r+")");O.setStyle("backgroundSize","cover")}}}O.all(".hide-overlay").on("click",function(){f.hide();U.removeClass("Ov-h");if(o){clearInterval(o);o=null}});U=a.one("body");f.append(O);U.append(f);U.addClass("Ov-h");O.setStyle("top",((f.get("offsetHeight")-O.get("offsetHeight"))/2)+"px");O.setStyle("left",((f.get("offsetWidth")-O.get("offsetWidth"))/2)+"px");if(M==="1"){o=setInterval(function(){var i=O.one(".dfpromo-startin");if(i){i.setContent(R(Q))}},1000)}setTimeout(function(){var Z=a.one(".dfpromo-popup .dfpromo-popup-enter .dfpromo-link");if(Z&&Z.getStyle("display")=="none"){var i=a.one(".dfpromo-popup .dfpromo-popup-enter .dfpromo-backup-link");if(i){i.setStyle("display","block")}}},50)},_handleOverlayShow:function(d,c){var b=this;b.resetTimers();if(d.type==="mouseover"){b.timer=a.later(b.timers.hover,b,function(){b.showOverlay(c)})}else{d.halt();b.showOverlay(c)}},_initEventHandlers:function(){var b=this,c=b.get("modId");if(!c){return}a.delegate(["click","mouseover"],function(d){b._handleOverlayShow(d,"fantasyOverlay")},c,"a.fantasy-teams-more",b);a.delegate(["click","mouseover"],function(d){b._handleOverlayShow(d,"extraTeamsOverlay")},c,"a.extra-teams-more",b);a.delegate("mouseout",function(d){if(d.relatedTarget&&!d.relatedTarget.ancestor(".flyout-teams",true)){b.resetTimers();b.timer=a.later(b.timers.hide,b,function(){this.hideOverlays()})}},c,".bd",this);a.delegate("mouseover",function(){if(b.timer){b.resetTimers()}},c,".bd .flyout-teams",this);a.Global.on("media-favorite-icon:remove",function(d){b.removeTeam(d)});a.Global.on("media-favorite-icon:add",function(d){b.addTeam(d)});a.Global.on("request-manager:cleanup",function(){for(var d in b.overlays){if(b.overlays.hasOwnProperty(d)&&a.Lang.isObject(b.overlays[d])){b.overlays[d].destroy()}}})},_addBackgroundClickTarget:function(){this.bodyEventListener=a.one("body").on("click",function(c){var b=c.target;if(a.one(b).ancestor(".yog-nav")){return}else{this.bodyEventListener.detach();this.hideOverlays()}},this)},removeTeam:function(f){var b=this,g=b.get("modId"),c=f.id,d;d=a.one(g+' [data-tid="'+c+'"]');if(d){d.remove()}},addTeam:function(k){var l=this,d=l.get("modId"),i=k.id,b=k.name,g=k.logo,c=k.logo,f,h,j=a.one(d+" .yom-myteams-nav ul");h='<li data-tid="'+i+'"><a href="'+c+'" data-action-outcome="navigate"><span><img class="logo" src="'+g+'"></span><em>'+b+"</em></a></li>";f=a.Node.create(h);if(j.hasClass("recommended")){j.removeClass("recommended");j.all("li").each(function(e){if(e.hasAttribute("data-tid")&&i!==e.getAttribute("data-tid")){e.remove()}})}if(!a.one(d+' [data-tid="'+i+'"]')){j.prepend(f)}},setupOverlay:function(c){var e=this.overlayConfig,h,d,b,g,i,f;if(!e[c]){return false}e=e[c];h=a.one(e.srcNode);if(!h){return false}d=new a.Overlay({srcNode:e.srcNode,zIndex:1002,visible:false});d.constrain(e.constrain);d.render(h.ancestor("li"));d.set("align",{node:e.moreLink,points:[a.WidgetPositionAlign.TL,a.WidgetPositionAlign.TR]});b=a.one(e.moreLink).getY();g=d.get("y");i=d.get("height");f=b-g-(i/2);a.one(e.arrow).setStyle("top",f+"px");this.overlays[c]=d;return d}},{ATTRS:{modId:{value:null},specialVersion:{value:""},closeLinkColor:{value:""},customCountdownColor:{value:""},customCountdownText:{value:""},specialSignUpPosition:{value:""},specialCloseButton:{value:""},specialBackground:{value:""},useSpecialBackground:{value:""},specialBackgroundDefault:{value:""},dailyFantasyPromo:{value:""},dailyFantasyTestOnly:{value:""},isQAproduction:{value:""},dailyFantasyCustomEnterbuttonText:{value:""},dailyFantasyCustomClosebuttonText:{value:""},dailyFantasyEnableCountdown:{value:""},isDailyFantasy:{value:""},pageLeagueId:{value:""},siteHierarchy:{value:""},fantasyLeague:{value:""},fantasyEnabled:{value:""},fantasyTargetPages:{value:""},fantasyExcludeUrl:{value:""},fantasyHockeyLogoStacked:{value:""},fantasyLogoStacked:{value:""},dailyFantasyTitle:{value:""},dailyFantasySubtitle:{value:""},dailyFantasyUrl:{value:""},dailyFantasyStarttime:{value:""},dailyFantasyStarttimeFormatted:{value:""},dailyFantasyLogo:{value:""},dailyFantasyLogoFootball:{value:""}}})},"3.0",{requires:["node-base","node-event-delegate","event-hover","overlay"]});