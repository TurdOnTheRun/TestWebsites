YUI.add("stencil-sticker",function(e,t){"use strict";function F(t){this.constructor.superclass.constructor.call(this,t);var n=this._node,r=P(n,t),s,o={},u,f={},l;s=e.Node.create('<div class="StickyPholder"></div>'),s.setStyle(h,n.getStyle(h)),o.marginTop=0,n.insert(s,"before"),l=s.getY(),E&&E.csstransforms3d&&(!e.UA.gecko||e.UA.gecko>=27)&&(o.transform=m),n.setStyles(o),u=n.get(c),f.pHolder=s,f.top=r,f.y=l,f.currentY=l,f.forcePosition=n.getData("sticker-forceposition"),f.parentClass=n.getData("sticker-parentclass"),f.vpTaller=e.DOM.viewportRegion().height>u,f.nodeHeight=u,f.offset=0,f.lastPos=a,n._sticker=f,w.push(n),M(n,i)}if(e.UA.ios&&e.UA.ios<5||e.UA.android&&e.UA.android<3||e.UA.silk||e.UA.userAgent.match(/Silk/)||e.UA.ie&&e.UA.ie<7)return;var n="px",r=null,i=!0,s=!1,o="top",u="bottom",a="none",f="scroll",l="resize",c="offsetHeight",h="marginTop",p="Sticky",d="Sticky-on",v="Sticky-off",m="translate3d(0,0,0)",g=0,y=0,b=s,w=[],E=Modernizr,S=e.config.doc,x=e.config.win,T=e.one("html"),N=parseInt(e.one("body").getComputedStyle("minWidth"),10)||1150,C=50,k=0,L=r,A,O,M,_,D,P,H,B,j;O=function(){b=s;if(!w.length)return;var e;k=+(new Date);for(e=w.length-1;e>=0;e-=1)w[e].getDOMNode()?M(w[e]):w.splice(e,1);y=g},M=function(t,n){var i,s,f,l,c,h;if(y===g)return;L===r&&(L=e.DOM.viewportRegion()),i=L,D(t,i),l=Math.round(t._sticker.y+t._sticker.nodeHeight+t._sticker.offset),h=t._sticker.forcePosition,c=Math.round(t._sticker.y+t._sticker.nodeHeight);if(h||c<t._sticker.scrollHeight)s=t._sticker.lastPos,h?h==="top"&&i.top+t._sticker.top>t._sticker.y?s=o:h==="bottom"&&i.bottom>=l?s=u:s=a:t._sticker.nodeHeight>i.height-t._sticker.top?(f=g>y,(f||n)&&i.bottom>=l?s=u:!f&&!n&&i.top+t._sticker.top<=t._sticker.currentY&&i.top+t._sticker.top>t._sticker.y?s=o:s=a):t._sticker.nodeHeight<i.height-t._sticker.top&&g+t._sticker.top>t._sticker.y?s=o:s=a,(t._sticker.lastPos!==s||t._sticker.y>=i.top+t._sticker.top)&&_(t,s)},D=function(e,t){var n=e.getY();n<0&&e.hasClass(p)?n=t.top+n:e._sticker.lastPos===o&&(n=t.top+e._sticker.top),e._sticker.currentY=n,e._sticker.y=e._sticker.pHolder.getY(),e._sticker.nodeHeight=e.get(c),e._sticker.offset=Math.max(n-e._sticker.y,0),e._sticker.vpTaller=t.height>e._sticker.nodeHeight,e._sticker.scrollHeight=Math.max(S.body.scrollHeight,S.documentElement.scrollHeight)},_=function(t,r){var f={},l,c;r===o?(f={position:"",bottom:"",top:t._sticker.top+n,transform:m},t._sticker.translated=s):r===u?(f={position:"",bottom:0,top:"",transform:m},t._sticker.translated=s):(t._sticker.y<L.top+t._sticker.top?(l="translate3d(0,"+t._sticker.offset+n+",0)",c=t._sticker.offset+n):(l="",c=""),E&&E.csstransforms3d&&!e.UA.gecko?f={position:"",bottom:"",top:"",transform:l}:f={position:"relative",bottom:"",top:c},t._sticker.translated=i),e.UA.gecko&&e.UA.gecko<27&&(f.transform=undefined),r!==a?(t.addClass(p),t._sticker.parentClass&&t.get("parentNode").addClass(t._sticker.parentClass),t._sticker.sticky=i,Stencil&&Stencil.utils&&Stencil.utils.dispatch(t.getDOMNode(),"sticker:sticky",{where:r})):(t.removeClass(p),t._sticker.parentClass&&t.get("parentNode").removeClass(t._sticker.parentClass),t._sticker.sticky=s),t._sticker.lastPos=r,t.setStyles(f)},P=function(t,n){var r=0,i=e.merge(t.getData(),n),s;return i["sticker-top"]?r=parseInt(i["sticker-top"],10):i["sticker-toptarget"]?r=parseInt(e.one(i["sticker-toptarget"]).get(c),10):(s=e.one("body"),r=parseInt(s.getComputedStyle(h),10)||parseInt(s.getComputedStyle("paddingTop"),10)||0),r},H=function(t){t.type===f&&(g=e.DOM.docScrollY()),L=r,B(t.type)},B=function(e){var t,n;e===f?n=O:n=j,x.requestAnimationFrame?b||(requestAnimationFrame(n),b=i):(t=+(new Date),k&&t<k+C?(x.clearTimeout(A),A=x.setTimeout(n,C)):(k=t,n()))},j=function(){b=s,k=+(new Date),S.documentElement.clientWidth>N?T.replaceClass(v,d):T.replaceClass(d,v),O()},e.extend(F,e.Stencil.BasePlugin,{},{NS:"StencilSticker",requiresInit:i,defaultTriggerEvents:[]}),e.Stencil.registerPlugin(F,"Sticker"),x.addEventListener?(x.addEventListener(f,H,s),x.addEventListener(l,H,s)):(x.attachEvent("on"+f,H),x.attachEvent("on"+l,H)),g=e.DOM.docScrollY(),j()},"@VERSION@",{requires:["node-base","node-style","node-screen"]});
