(function(f,d,t){f.execute(function(){f.when("A","RWDynamicModalFactory","ready").execute("RWDynamicModalBootstrapper",function(a,q){var l=a.state("rw-dynamic-modal"),b=a.state("rw-dynamic-modal-bootstrap"),c=a.$("#rwol-display-called"),k,g,h=function(){if(d.sessionStorage)try{sessionStorage.setItem("rwolLastPage",d.location.href),sessionStorage.setItem("rwolLastPageSet",Date.now())}catch(a){}},m=function(){var e=!1;return function(){e||(e=!0,a.ajax("/gp/overlay/update.html",{method:"post",params:{placementId:k,
priority:g}}))}}(),n=function(e){e.pageContent&&a.$("body").append(e.pageContent);e.data&&e.data.tracker?f.when(e.data.tracker).register("RWDynamicModal",function(a){return q(e,a)}):f.register("RWDynamicModal",function(){return q(e)})},p=function(e){if(e&&/\S/.test(e))if(k=e.placementId,g=e.priority,a.$.isPlainObject(e.content))n(e);else if(e.content)try{a.$("body").append(e.content),a.state.parse(),(e.displayLogic||"").match("client")||m()}catch(b){d.ueLogError&&d.ueLogError(b,{logLevel:"FATAL",
attribution:"RetaiWebsiteOverlay",message:"[RWOL][Placement "+e.placementId+"] Failed appending content for placement with error: "})}};a.on("rw:overlay:displayed",function(a){m()});if(l)return h(),n(l);if(b){d.sessionStorage&&!document.referrer&&(l=sessionStorage.getItem("rwolLastPageSet"))&&parseInt(l,10)>Date.now()-3E4&&(b.referrer=sessionStorage.getItem("rwolLastPage"));b.referrer=b.referrer||document.referrer;if(b.referrer&&b.referrer.match(/^https?:\/\/([^\/]+\.)?amazon\.com(\/|$)/i))return h();
if(!d.$Nav||!d.$Nav.getNow("rwOverlaySuppress")){if(0<c.length){if("0"!==c.val())return h();c.val(1)}h();if(c=(b.queryString=d.location.search)&&d.location.search.split("?").pop())for(c=c.split("&"),h=0;h<c.length;h++){var l=c[h].split("="),r=d.decodeURIComponent(l[0]);b.hasOwnProperty(r)||(b[r]=d.decodeURIComponent(l[1]))}return a.ajax("/gp/overlay/display.html",{method:"post",params:b,success:p})}}});f.when("A","jQuery","a-modal-factory").register("RWDynamicModalFactory",function(a,d,f){var b,c,
k;return function(g,h){if(g&&!b){var m=d('<span style="display:none;"></span>');d("body").append(m);b=f.create(m,g);c=g.data||{};if(h){if(c.countRef)a.on("a:popover:show:"+g.name,function(a){h.track(c.countRef,c)});if(c.disButtonRef)a.on("a:popover:dismiss:"+g.name,function(b){h.track(c.disButtonRef,c);k=!0;a.off("a:popover:dismiss:"+g.name)});if(c.disRef)a.on("a:popover:afterHide:"+g.name,function(a){k||h.track(c.disRef,c)});a.declarative("rw-popover-log-close","click",function(a){h.track(a.data.disRef,
c);k=!0;b.hide()})}a.on("a:popover:afterShow:"+g.name,function(b){a.ajax("/gp/overlay/update.html")});g.autoShow&&b.show();b.attrs("data",c);return b}}})})})(function(){var f=window.AmazonUIPageJS||window.P,d=f._namespace||f.attributeErrors;return d?d("RetailWebsiteOverlayAUIAssets"):f}(),window);