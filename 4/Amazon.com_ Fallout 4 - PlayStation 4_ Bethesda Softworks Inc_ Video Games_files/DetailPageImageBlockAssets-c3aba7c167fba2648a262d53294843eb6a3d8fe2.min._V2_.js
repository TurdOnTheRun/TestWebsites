(function(m){m.execute(function(){m.register("postMetric",function(){return{postCountMetric:function(h){if(typeof h!=="undefined"){var c=window.ue;if(c){var f=c.count(h)||0;c.count(h,f+1)}}}}});m.when("jQuery","ImageBlockController","ImageBlockATF","ImageBlockBTF").execute(function(h,c,f,e){h=h.extend(!0,{},f,e);new c(h)});m.when("A","jQuery","ImageBlockBTF").register("ImageBlockAiryLoader",function(h,c,f){h=f.airyConfig;m.load.js(h.jsUrl);h.cssUrl&&m.load.css(h.cssUrl)});m.when("A","jQuery","ImageBlockModel",
"ImageBlockView","imageBlockUtils").register("ImageBlockController",function(h,c,f,e,M){var o={};return function(h){var k=this;k.dispatch=function(f,e){var h=o[f];M.isDefined(h)&&c.each(h,function(c,f){f.call(window,e)})};k.register=function(f,c){M.isDefined(o[f])||(o[f]=[]);typeof c==="function"&&o[f].push(c)};k.model=new f(h,k);k.view=new e(h,k,k.model);k.init=function(){k.model.init();k.view.init()};k.init()}});m.when("A","jQuery","imageBlockUtils").register("ImageBlockModel",function(h,c,f){function e(c,
e,i,a,d){if(f.isDefined(c))p.type=c;if(f.isDefined(e))p.index=e;if(f.isDefined(i))p.thumbnailIndex=i;if(f.isDefined(a))p.variant=a;if(f.isDefined(d))p.color=d}function M(c){c=c.data;e(c.type,c.index,c.thumbnailIndex,c.variant,c.color)}function o(c){M(c);c.data=p;k.dispatch(r,c)}var n,k,p={},r="updateView";return function(c,f){k=f;n=c;k.register("updateSelection",o);k.register("updateModel",M);this.init=function(){e("image",0,0,"MAIN",n.landingAsinColor||n.defaultColor)};this.getCurrentItem=function(){return h.copy(p)}}});
m.when("ImageBlockBTF").execute(function(h){function c(c,e,h,o,n){function k(a){b.dispatch(D,a)}function p(a){b.dispatch(E,a)}function r(a){b.dispatch(s,a)}function m(b){h.isDefined(b)&&(b.type===z||b.type===y)?a.render(b.data.color,!1,b.onload):(a.update(b),b.type!==j&&o.postCountMetric(b.data.type+"ThumbnailSelected"),c.trigger("image-block-thumbnail-selected",b.data))}function t(a){b.dispatch(I,a)}function i(a){var b=v.find("img");h.isDefined(b[a])&&e(b[a]).click()}var a,d,b,l,v,D="updateSelection",
y="updatedData",z="swatchClick",E="imageClick",s="imageHover",I="resize",j="swatchHover";return function(h,j,q){a=this;d=h;b=j;l=q;v=e("#imageBlock #altImages ul");var A=e("#imageBlock .canvas"),w=e("#main-image-container");a.subViews=[];for(j=0;j<n.length;j++)a.subViews.push(new n[j](h,q,a,b));a.render=function(b,c,d){var g=0;v.find(".item").remove();b=b||l.getCurrentItem().color;e.each(a.subViews,function(a,q){g=q.render(b,g,A,v,w,c,d)||g})};a.init=function(){v=e("#imageBlock #altImages ul");var q=
v.find(".a-button-selected").closest(".a-declarative"),l=q.data("action"),q=q.data(l)||{};q.color=d.landingAsinColor||d.defaultColor;b.dispatch("updateModel",{data:q});a.render(q.color,!0);d.isDebug&&window.console&&console.log(d);b.register("updateView",m);b.register("selectThumbnail",i);c.declarative("thumb-action",["click","mouseenter"],k);c.declarative("main-image-click",["click"],p);c.declarative("main-image-click",["mouseenter","mouseleave"],r);e(window).resize(t)};a.update=function(b){e.each(a.subViews,
function(a,c){c.update(b)})}}}h=["A","jQuery","imageBlockUtils","postMetric"].concat(h.views);m.when.apply(m,h).register("ImageBlockView",function(){for(var f=arguments[0],e=arguments[1],h=arguments[2],o=arguments[3],n=[],k=4,p=arguments.length;k<p;k++)n.push(arguments[k]);return c(f,e,h,o,n)})});m.when("A","jQuery","imageBlockUtils","postMetric").register("ImageBlockAltImageView",function(h,c,f,e){function M(a,b,d,e){if(!f.isjQueryObjDefined(a.find(".a-button-selected"))){var h=v.getCurrentItem();
if(!e||!(h.type===R&&l.autoplayVideo)){e=0;h.type===s&&(e=p(h.color,h.variant),e=e!==-1?e:0);var x=b+e;x>=d&&(e=0,x=b);b=r(h.color,e);b!==-1&&(D.dispatch(j,{data:{index:e,thumbnailIndex:x,variant:b.variant,type:s}}),b=a.find(".item").get(x),f.selectGivenThumbnail(c(b),a))}}}function o(b,a,d){var a=l.colorImages&&l.colorImages[a],e=b;f.isDefined(a)&&(c.each(a,function(a,c){b<l.maxAlts&&(f.createThumbnail({type:s,index:a,thumbnailIndex:b,variant:c.variant},c.thumb,y),b++)}),M(y,e,b,d));return b}function n(b,
a){var d=c(I),e,f=l.staticStrings,x=l.colorImages,g=b.color,h=b.index;a&&l.useIV?e=f.clickToExpand:x[g]&&x[g][h].hiRes&&l.useHoverZoom?(e=l.useHoverZoomIpad?f.touchToZoom:l.useClickZoom?f.clickToZoom:f.rollOverToZoom,l.hoverZoomIndicator&&(e="<img src='"+l.staticImages.hoverZoomIcon+"'/>&nbsp;"+e)):l.useIV&&(e=f.clickToExpand);d.html(e)}function k(){z.find("li").removeClass("selected");c(I).empty();f.hideUnavailable()}function p(b,a){var d=l.colorImages;if(d.length<1)return-1;if(!f.isDefined(d[b]))return-1;
if(!f.isDefined(a))return-1;var e=-1;c.each(d[b],function(b,d){d.variant===a&&(e=b)});return e}function r(b,a){var d=l.colorImages;return!f.isDefined(d)?-1:!f.isDefined(d[b])?-1:!f.isDefined(d[b][a])?-1:!f.isDefined(d[b][a].main)?-1:c.map(d[b][a].main,function(b,a){return a}).length<1?-1:d[b][a]}function m(b,a){var d;c.each(b.main,function(b,a){f.isDefined(d)||(d=parseFloat(a[1]/a[0])<=parseFloat(l.holderRatio)?"a-stretch-vertical":"a-stretch-horizontal")});var e="a-dynamic-image "+d,h=f.getMaxHeightOfMainImage(b.main,
E),x=f.getMaxWidthOfMainImage(b.main,E),g=c("<div></div>");g.addClass(e).css({"max-height":h,"max-width":x}).attr({"data-old-hires":b.hiRes,"data-a-manual-replacement":"true",onload:a}).data("a-dynamic-image",b.main);return g}function t(b){var a=E.css("height");a!==null&&b.find(".imgTagWrapper").css("height",a);b.addClass("selected")}function i(b,a){if(b.type===s){var d=r(b.color,b.index);if(d===-1)return f.showUnavailable(),-1;var c=z.find(".item.itemNo"+b.thumbnailIndex);if(!f.isjQueryObjDefined(c)){var c=
b.thumbnailIndex,c=z.find(".mainImageTemplate").clone().removeClass("template mainImageTemplate").addClass("image item itemNo"+c+" maintain-height"),i=m(d,a);c.find(".placeHolder").replaceWith(i);z.find(".list").append(c);h.loadImageManually(i)}t(c);D.dispatch(Q);n(b);l.useIV&&c.css("cursor","pointer");c=b.variant;f.isDefined(c)&&(e.postCountMetric("ImageThumbnailSelectedVariant:"+c),c.indexOf("IG")===0&&(e.postCountMetric("IGImageSelectedVariant:"+c),e.postCountMetric("IGImageSelectedEvent:"+b.interaction)));
h.trigger("dp:image-block:update",d)}}function a(){var b=z.find(".item .imgTagWrapper"),a=f.getContainerHeight(E,l.holderRatio,l.holderMaxHeight);a>0&&(E.height(a),b.height(a));z.find("img.a-dynamic-image").each(function(){var b=c(this);b.data("a-manual-replacement")&&h.loadDynamicImage(this);var a=b.data("a-dynamic-image"),d=f.getMaxHeightOfMainImage(a,E),a=f.getMaxWidthOfMainImage(a,E);b.css({"max-height":d+"px","max-width":a+"px"})})}function d(b){n(v.getCurrentItem(),b.type==="mouseenter")}var b,
l,v,D,y,z,E,s="image",I="#image-canvas-caption #canvasCaption",j="updateModel",Q="loadMagnifier",R="chromeless-video";return function(c,e,j,n){b=this;l=c;v=e;D=n;l.colorImages[l.landingAsinColor]=l.colorImages[l.defaultColor];b.render=function(b,a,d,c,e,f,l){z=d;y=c;E=e;b=o(a,b,f);k();f||z.find(".list .item").remove();i(v.getCurrentItem(),l);return b};b.update=function(b){k();var a=b.data;if(b.type==="swatchHover")if(a.color===v.getCurrentItem().color)i(v.getCurrentItem());else{if(!b.captured){var d;
var c=p(a.color,v.getCurrentItem().variant),a=r(a.color,c!==-1?c:0);if(a===-1)f.showUnavailable(),d=-1;else{var c=z.find(".swatchHoverExp"),e=m(a);c.find(".imgTagWrapper").html(e);h.loadImageManually(e);t(c);h.trigger("dp:image-block:update",a)}if(d!==-1)b.captured=!0}}else if(a.type===s)a.interaction=b.type,i(a),f.selectGivenThumbnail(b.$declarativeParent,y)};D.register("imageHover",d);D.register("resize",a)}});m.when("A","jQuery","imageBlockUtils","postMetric").register("ImageBlockMagnifierView",
function(h,c,f,e){function M(a){var b=a.match(/\._((\w|,|\.)+)_\.(gif|jpg|png)$/i),a={};if(f.isDefined(b))for(var b=b[1].split("_"),c=0;c<b.length;c++){var e=b[c].match(/^([A-Z]+)(\d+(\.\d+)?)$/);f.isDefined(e)&&(a[e[1]]=parseInt(e[2],10))}return a}function o(d,b){function h(){var a;b.useClickZoom?(a=b.offsetInClickZoom,a=[Math.min(1,Math.max(0,t[0]-(A[0]+a))/(A[2]-2*a)),Math.min(1,Math.max(0,t[1]-(A[1]+a))/(A[3]-2*a))]):a=o&&o.updatePosition();if(a&&j.detailSize){var c=[j.detailSize[0]-j.rect.width,
j.detailSize[1]-j.rect.height];j.detailImage.get(0).style.left=-(a[0]*c[0])+"px";j.detailImage.get(0).style.top=-(a[1]*c[1])+"px"}}function i(a){var b=g?a.originalEvent.touches[0]||a.originalEvent.changedTouches[0]:"";t=g?[b.pageX,b.pageY]:[a.pageX,a.pageY]}function k(a){g&&a.preventDefault();i(a);b.useClickZoom?a=[A[0],A[1],A[0]+A[2],A[1]+A[3]]:(a=o?o.offset:d.offsetParent().offset(),a=[q[0]+a.left,q[1]+a.top,q[0]+q[2]+a.left,q[1]+q[3]+a.top]);t[0]<a[0]||t[1]<a[1]||t[0]>=a[2]||t[1]>=a[3]?(b.useClickZoom||
n(),u&&(u=!1,clearTimeout(B))):(u||(u=!0,B=setTimeout(function(){e.postCountMetric("dppc_hoverZoomOpened")},1E3)),h())}function n(a){a&&s.suppressMagnifier(!0);if(F&&(j&&j.hide(),o&&(o.destroy(),o=null),F=!1,g?(d.unbind("touchmove.magnifier touchstart.magnifier touchend.magnifier"),c(document).trigger("disengaged.magnifier")):c(document).unbind("mousemove.magnifier").trigger("disengaged.magnifier"),r(),a))d.one("click.magnifier touchstart.magnifier",function(a){p(a,!0)})}function p(a,f){f&&s.suppressMagnifier(!1);
if(!F&&!G&&(C===0&&(e.postCountMetric("dppc_hoverTime",new Date-window.ue.t0),C=1),L[x]||(e.postCountMetric("dppc_hoverMain"),L[x]=1),q=[d.position().left,d.position().top,d.width(),d.height()],x&&(i(a),j?j.refit().show():j=new N,b.useClickZoom||(o=o||new H),A=j.getWindowSize(),h()),F=!0,g?(d.unbind("touchstart.magnifier touchmove.magnifier").bind("touchmove.magnifier",k).bind("touchend.magnifier",n),c(document).trigger("engaged.magnifier")):(d.unbind("mousemove.magnifier"),c(document).trigger("engaged.magnifier").bind("mousemove.magnifier",
k)),f)){var T=c("#zoomWindow");if(T.length>0)T.one("click.magnifier touchend.magnifier",function(){n(!0)})}}function r(){b.useHoverZoom&&(g?d.bind("touchstart.magnifier touchmove.magnifier",p):d.bind("mousemove.magnifier",p))}var s=this,m={detailImageUrl:d.attr("data-old-hires"),location:"over",locationElement:d,prelaod:"ready",zIndex:50,offsetInClickZoom:50},b=c.extend(m,b);b.adjustment=[10,0,-10,0];var j=null,o=null,t=null,q=null,A=null,w={"null":1,"":1,undefined:1},F=!1,G=!1,x=b.detailImageUrl,
g=b.useHoverZoomIpad||0,C=0,L={},H=function(){function a(b){var c=Math.round(Math.min(d.width(),j.rect.width/b)),b=Math.round(Math.min(d.height(),j.rect.height/b));l.css({width:c,height:b});g=[c,b]}var e=this,g=[0,0],f=(j.detailSize&&j.detailSize[0]||5E8)/q[2],h=(j.detailSize&&j.detailSize[1]||5E8)/q[3],f=h>f?h:f;c("#magnifierLens").remove();var l=c("<div id='magnifierLens' />").css({backgroundImage:"url("+b.generalImageUrls.zoomLensBackground+")",position:"absolute",cursor:"pointer"});e.updatePosition=
function(){var a=[q[2]-g[0],q[3]-g[1]],b=a[0]<=0?0.5:Math.max(0,Math.min(1,(t[0]-g[0]/2-q[0]-e.offset.left)/a[0])),c=a[1]<=0?0.5:Math.max(0,Math.min(1,(t[1]-g[1]/2-q[1]-e.offset.top)/a[1])),d=q[0]+Math.round(b*a[0]),a=q[1]+Math.round(c*a[1]);l.get(0).style.left=d+"px";l.get(0).style.top=a+"px";return[b,c]};e.destroy=function(){l.remove()};e.offset=d.offsetParent().offset();a(f);e.updatePosition();l.appendTo(d.parent());j.detailImage[0].complete||j.detailImage.load(function(){var b=j.detailImage.width()/
q[2];a(b);e.updatePosition()})};H.preload=function(){s.preload(b.generalImageUrls.lensBackgroundUrl)};var N=function(){function e(){var a={};if(b.location==="over"){var a=b.useClickZoom,g={},h=c("#leftCol"),l=c("#centerCol"),x=c("#rightCol"),k=c("#hover-zoom-end"),ea=f.isjQueryObjDefined(h)?h.outerHeight():l.outerHeight();g.top=f.isjQueryObjDefined(h)?h.offset().top:l.offset().top;g.bottom=ea+g.top;g.right=x.offset().left;g.left=a?0:h.offset().left+h.outerWidth();if(f.isjQueryObjDefined(k)&&k.offset().top>
g.bottom)g.bottom=k.offset().top;a=g}else b.location==="right"&&(a=d.offset(),a={left:a.left+d.outerWidth(),top:a.top,right:a.left+d.outerWidth()+400,bottom:a.top+400});if(b.minHeightElement)a.bottom=Math.max(a.bottom,a.top+c(b.minHeightElement).outerHeight());a.bottom=Math.min(a.bottom,c(window).scrollTop()+c(window).height());a.left+=C[0];a.top+=C[1];a.right+=C[2];a.bottom+=C[3];a.width=a.right-a.left;a.height=a.bottom-a.top;if(b.enhancedHoverOverlay&&f.isDefined(window.pageXOffset))g=c(window).width(),
a.width=g-a.left+window.pageXOffset-18,a.height-=14;j.css({left:a.left,top:a.top,width:a.width,height:a.height});i.rect=a;return i}function g(a){var c=new Image;i.detailSize=[0,0];c.onload=function(){i.detailSize=[c.width,c.height];h()};c.src=a.attr("src");if(c.width>0&&c.height>0)i.detailSize=[c.width,c.height];else if(b.detailImageSize)i.detailSize=b.detailImageSize;else{var a=M(c.src),d=q[2]/q[3];if(a.SS||a.AA)a=a.SS||a.AA,i.detailSize=[a,a];else if(a.SX)i.detailSize=[a.SX,Math.round(a.SX/d)];
else if(a.SY)i.detailSize=[Math.round(a.SY*d),a.SY];else if(a.SL)i.detailSize=d>=1?[a.SL,Math.round(a.SL/d)]:[Math.round(a.SL*d),a.SL]}}var i=this,C=b.adjustment;c("#zoomWindow").remove();var k={overflow:"hidden",position:"absolute",backgroundColor:"white",zIndex:b.zIndex};if(b.enhancedHoverOverlay)k.boxShadow="0 6px 8px 2px rgba(0,0,0,.25)",k.border="1px solid #949494",k.borderColor="rgb(148,148,148)";var j=c("<div id='zoomWindow' />").css(k);b.fadeMagnifier&&j.fadeIn(200);b.useClickZoom&&(a?j.css("cursor",
'url("'+b.zoomOutIcon+'"), auto'):(j.css("cursor","-webkit-zoom-out"),j.css("cursor","-moz-zoom-out"),j.css("cursor","zoom-out")));i.updateImage=function(a){a=c("<img id='detailImg' src='"+a+"'/>").css("position","absolute");i.detailImage&&i.detailImage.remove();j.append(a);c(document).trigger("updated.magnifier");i.detailImage=a;g(i.detailImage)};i.refit=function(){e();g(i.detailImage);return i};b.fadeMagnifier?(i.show=function(){j.fadeIn(200);return i},i.hide=function(){j.fadeOut(200);return i}):
(i.show=function(){j.show();return i},i.hide=function(){j.hide();return i});i.destroy=function(){j.remove();return i};i.getWindowSize=function(){return[i.rect.left,i.rect.top,i.rect.width,i.rect.height]};i.updateImage(x);e();j.appendTo(document.body)},u=!1,B;s.preload=function(a){for(var a=c.makeArray(a),b=a.length,d=0;d<b;d++)if(a[d]instanceof Array)s.preload(a[d]);else if(typeof a[d]==="string"&&a[d]&&!w[a[d]])w[a[d]]=new Image,w[a[d]].src=a[d]};s.changeImage=function(a,g){F&&n();x=g;d.attr("src",
a);s.preload(a);q=[d.position().left,d.position().top,d.width(),d.height()];g&&(b.preload==="immediately"?s.preload(g,!0):c(window).ready(function(){s.preload(g)}),j?j.updateImage(g):d.attr("data-old-hires",g))};s.destroy=function(){d.unbind("touchstart touchstart.magnifier touchmove.magnifier mousemove.magnifier");c(document).unbind("mousemove.magnifier");o&&o.destroy();o=null;j&&j.destroy();j=null};s.detailImage=function(){return j.detailImage};s.suppressMagnifier=function(a){G=a};s.isEngaged=function(){return F};
s.engageMagnifier=p;s.disengageMagnifier=n;d[0].complete?r():d.one("load",r);s.preload(d.attr("src"));if(b.preload){var O=b.detailImageUrl,m=function(){s.preload(O,!0);b.useClickZoom||H.preload()},J=b.preload;J.constructor!==Array&&(J=[J]);for(var K=0;K<J.length;K++)if(J[K]==="immediately")m();else if(c(window)[J[K]])c(window)[J[K]](m);else c(window).bind(J[K],m)}return s}function n(){t&&(t.destroy(),t=void 0)}function k(){if(r.useHoverZoom){var c={adjustment:[0,0,1,1],generalImageUrls:r.staticImages,
location:"over",minHeightElement:"#imageBlock",preload:"ready",zIndex:190,useHoverZoomIpad:r.useHoverZoomIpad,useHoverZoom:r.useHoverZoom,useClickZoom:r.useClickZoom,zoomOutIcon:r.staticImages.zoomOutCur,enhancedHoverOverlay:r.enhancedHoverOverlay};n();var b=i.find(".image.item.selected img[data-old-hires]").not("[data-old-hires='']");f.isjQueryObjDefined(b)&&(r.useClickZoom?(b.one("click.loadmagnifier touchstart.loadmagnifier",function(a){t=new o(b,c);t.engageMagnifier(a,!0)}),a?b.css("cursor",'url("'+
r.staticImages.zoomInCur+'"), auto'):(b.css("cursor","-webkit-zoom-in"),b.css("cursor","-moz-zoom-in"),b.css("cursor","zoom-in"))):t=new o(b,c))}}var p,r,m,t,i,a=c.browser.msie;return function(a,b,c,e){p=this;r=a;m=e;p.render=function(a,b,c){i=c;n()};p.update=function(){};m.register("loadMagnifier",k);m.register("resize",k)}});m.when("A","jQuery","imageBlockUtils").register("ImageBlockTwisterView",function(h,c,f){function e(a,c,b){a=(a=b?b:f.getColorFromState(c.getState().hovered_variations,n))&&
a!==""?a:n.defaultColor;p.dispatch(i,{type:t,data:{color:a}})}function m(a,c,b,e){a=(a=e?e:f.getColorFromState(c.getState().selected_variations,n))&&a!==""?a:n.defaultColor;a===k.getCurrentItem().color?typeof b==="function"&&b():p.dispatch(r,{type:G,data:{color:a},onload:b})}var o,n,k,p,r="updateSelection",G="swatchClick",t="swatchHover",i="updateView";return function(a,c,b,i){o=this;n=a;k=c;p=i;h.on("image-block-twister-swatch-hover",e);h.on("image-block-twister-swatch-click",m);o.render=function(){};
o.update=function(){}}});m.when("A","jQuery","Airy","imageBlockUtils","ImageBlockLoader","postMetric").register("ImageBlockVideoView",function(h,c,f,e,m,o){function n(i,g){if(!e.isjQueryObjDefined(i.find(".a-button-selected"))){var f=d.getCurrentItem(),f=r(f.color,0);if(f!==-1){var h=g+0;b.dispatch(Q,{data:{index:0,thumbnailIndex:h,variant:f.variant,type:a.useChromelessVideoPlayer?I:s}});f=i.find(".item").get(h);e.selectGivenThumbnail(c(f),i)}}}function k(c){if(!a.useChildVideos)return a.videos;if(a.colorToVideo[c])return a.colorToVideo[c];
var g=a.colorToAsin[c];if(g&&g.asin){var e={};e.params={asin:g.asin,productGroupID:a.productGroupID,useAiryVideoPlayer:!0,useChromelessVideoPlayer:a.useChromelessVideoPlayer,isUDP:a.isUDP};e.success=function(g){g&&(a.colorToVideo[c]=g,g={type:j,data:d.getCurrentItem()},b.dispatch(R,g))};m.load(A,e);return a.colorToVideo&&a.colorToVideo[c]}}function p(a,d,i){return f.embed({isShowFirstFrameWhenReadyEnabled:!0,parentElement:a[0],streamingUrls:d.url,swfUrl:i.swfUrl,foresterMetadataParams:i.foresterMetadataParams,
backgroundColor:"transparent",flashParams:{wmode:"transparent"},experiments:{supportChromelessPlayback:!0},bindings:{canplay:function(){var b=e.isjQueryObjDefined(a.find("video"))?"HTML5":"FLASH";o.postCountMetric("dppc_chromelessVideo:"+b)},playing:function(){a.parent().css("z-index",8)},videounsupported:function(){b.dispatch(q,0);o.postCountMetric("dppc_chromelessVideo:VIDEO_UNSUPPORTED")},error:function(){b.dispatch(q,0);o.postCountMetric("dppc_chromelessVideo:ERROR")},ended:function(){y.seek(0)}},
cuePoints:[{values:d.durationSeconds-1,type:"position",callback:function(d,g,e){d=e.durationSeconds-e.playheadTimeSeconds;a.parent().css("background-color","white").find(".airy-renderer-container").fadeTo(d*1E3,0.1,function(){a.parent().css({"background-color":"transparent","z-index":-1});b.dispatch(q,0);c(this).show().css("opacity",1)})}}]})}function r(b,c){var d;if(a.useChildVideos){if(!e.isDefined(a.colorToVideo))return-1;d=a.colorToVideo[b]}else d=a.videos;return!e.isDefined(d)?-1:!e.isDefined(d[c])?
-1:!e.isDefined(d[c].url)?-1:d[c]}function G(b){if(!(b.type!==s&&b.type!==I)){var c=r(b.color,b.index);if(c===-1)return-1;if(b.type===s){var b=a.holderRatio,d=parseInt(c.videoWidth,10),i=parseInt(c.videoHeight,10);v.parent().css("z-index",2);i!==0&&d!==0&&(d/=i,b>d?v.css("width",d/b*100+"%"):v.css("height",b/d*100+"%"));y?(y.show(),e.loadMediaIntoAiry(y,c,z),D.show()):(y=e.createAiryInstanceForChromeful(v,c,z),D.find(E).text(a.staticStrings.playVideo))}else y?(y.show(),e.loadMediaIntoAiry(y,c,z),
y.play()):(y=p(v,c,z))&&y.play()}}function t(b,d){var i=k(d),f=b;e.isDefined(i)&&i.length>0&&a.alwaysIncludeVideo&&b===a.maxAlts&&(l.find(".item:last").remove(),b--);e.isDefined(i)&&(c.each(i,function(c,d){if(b<a.maxAlts){var g=a.useChromelessVideoPlayer?I:s;e.createThumbnail({type:g,index:c,thumbnailIndex:b,variant:d.variant},d.thumb,l);S||(g=g===I?F:w,S=!0,o.postCountMetric(g));b++}}),n(l,f,b));return b}var i,a,d,b,l,v,D,y,z,E="#videoCaption",s="chromeful-video",I="chromeless-video",j="updatedData",
Q="updateModel",R="updateView",q="selectThumbnail",A="/gp/product/features/apparel-main-image/videos.html",w="dppc_chromefulVideoAvailable",F="dppc_chromelessVideoAvailable",S=!1;return function(c,g,f,h){i=this;a=c;d=g;b=h;z=a.airyConfig;a.colorToVideo={};a.colorToVideo[a.landingAsinColor]=a.colorToVideo[a.defaultColor]=a.videos;i.render=function(a,b,c,e,g){l=e;v=g.find("#main-video-container");D=v.parent().find("#video-canvas-caption");a=t(b,a);G(d.getCurrentItem());return a};i.update=function(a){y&&
(y.hide(),v.parent().css("z-index",-1),D.hide());var b=a.data;if(a.type==="swatchHover")b.color===d.getCurrentItem().color&&G(d.getCurrentItem());else if(b.type===s||b.type===I)G(b),e.selectGivenThumbnail(a.$declarativeParent,l)}}});m.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils","postMetric").register("ImageBlockImmersiveView",function(h,c,f,e,m,o){var n,k,p,r;function G(a,b){var c=h.copy(a);if(a.length>b){try{for(var d=-1,e=0;e<a.length;e++){var g=a.charAt(e);if(g===" "||g==="."||g===
"?"||g===";"||g===","||g===":")d=e;if(e===b-4){c=a.substring(0,d===-1?e:d);break}}}catch(i){c=a.substring(0,b-3)}c+="..."}return c}function t(a){var a=a.replace(/\._(AA|SS)\d+_/,"").replace(/\._SX\d+_SY\d+_CR,0,0,\d+,\d+_/,""),a=a.replace(/\._(US)\d+_/,"").replace(/\._SR\d+,\d+_/,""),b=a.lastIndexOf(".");return a=a.substring(0,b)+"._AA50_"+a.substring(b)}function i(){var a=g.find("#ivTitle");a.attr("title",w.title);a.text(G(w.title,45));a.click(function(){x.hide()})}function a(a,b){var c=parseInt(a.css(b),
10);return!isNaN(c)?c:0}function d(){var b=g.find("#ivStage"),c=x.$container.find(".a-popover-wrapper"),d=c.find(".a-popover-inner"),c=c.height()-a(d,"padding-top")-a(d,"padding-bottom");g.css("height",c);var d=g.find("#ivTitle").outerHeight(!0),e=g.find("#ivVariationSelection").outerHeight(!0),i=g.find("#ivMediaSelection").outerHeight(!0),f=g.find("#ivThumbs"),h=a(f,"margin-top")+a(f,"margin-bottom");f.css("height",c-d-e-i-h);g.find("#ivLargeImage").css("height",c);b.css("width",g.width()-a(g,"padding-left")-
a(g,"padding-right")-g.find("#ivThumbColumn").width()-a(b,"margin-left")-a(b,"margin-right"))}function b(){g.find("#ivMediaSelect").change(function(){var a=e(this).val();a==="all"?(g.find("#ivVideoList").hide(),g.find("#ivThumbs").show(),g.find(".ivThumbVideo").show(),u.type===K&&g.find("#ivVideo_"+u.index).click()):a==="images"?(g.find("#ivVideoList").hide(),g.find("#ivThumbs").show(),g.find(".ivThumbVideo").hide(),u.type===K&&g.find("#ivImage_0").click()):a==="videos"&&(g.find("#ivVideoList").show(),
g.find("#ivThumbs").hide(),u.type===J?g.find("#ivVideoList_0").click():g.find("#ivVideoList_"+u.index).click())})}function l(){var a=g.find("#ivStage").find("#ivLargeImage"),b=a.width(),c=a.height(),d=a.find(".fullscreen");d.removeAttr("style");var e=d.width(),i=d.height();if(d.length>0){if(d[0].naturalWidth)e=d[0].naturalWidth;if(d[0].naturalHeight)i=d[0].naturalHeight}a.css("cursor","auto");var e=e===0?1:e,i=i===0?1:i,f=Math.min(b/e,c/i),h=i*f,l=e*f;f<1?(Z?a.css("cursor","url('"+w.staticImages.zoomIn+
"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in")),V=!0):V=!1;e=Math.min(l,e);i=Math.min(h-20,i);d.css({"margin-top":(c-i)/2,"margin-left":(b-e)/2,height:i,width:e});a.css("visibility","visible");U=!1}function v(a){var b=g.find("#ivLargeImage");b.css("visibility","hidden");b.empty();b.animate({opacity:1},200);b.append(a);l()}function D(){B&&B.hide();g.find("#ivLargeVideo").css("display","none");g.find("#ivLargeImage").css("display","block");var a;
m.isDefined(C)&&(a=C[u.index].hiRes||C[u.index].large||C[u.index].main[C[u.index].main.length-1]);if(m.isDefined(a)){g.find(".fullscreen").remove();var b=e("<img>").attr("src",a).addClass("fullscreen"),c=g.find("#ivLargeImage");c.animate({opacity:0.4},200,function(){b.load(function(){v(b)});if(b[0].complete)v(b);else{c.empty();var a=(c.height()-ba)/2,d=(c.width()-ca)/2;c.append("<img src='"+w.staticImages.spinner+"' style='position:relative;top:"+a+"px;left:"+d+"px;' />")}})}}function y(){var a=parseInt(u.index,
10)+1;a>=L.length||g.find("#ivVideo_"+a).click()}function z(){var a;m.isDefined(L)&&(a=L[u.index]);if(m.isDefined(a)){g.find("#ivLargeImage").css("display","none").empty();var b=g.find("#ivLargeVideo").css("display","block");B?(B.isDetached()&&B.attach(b[0]),m.loadMediaIntoAiry(B,a,O),B.show()):(B=m.createAiryInstanceForChromeful(b,a,O,"ImmersiveView"),O.enableContinuousPlay&&B.bind("ended",y));B.play({isAsync:!0})}}function E(){u=F.getCurrentItem();var a;if(u.type===J)a=g.find("#ivImage_"+u.index);
else if(u.type===K||u.type===$)a=g.find("#ivVideo_"+u.index);m.isjQueryObjDefined(a)||(a=g.find("#ivImage_0"));s(a)}function s(a){g.find(".ivThumb").removeClass("selected");a.addClass("selected");a.hasClass("ivThumbVideo")?(u.type=K,u.index=a.attr("id").split("_")[1],z()):(u.type=J,u.index=a.attr("id").split("_")[1],D())}function I(){g.delegate(".ivThumb","click",function(){var a=e(this);s(a)});g.delegate(".ivThumbVideoListOuter","click",function(){g.find(".ivThumbVideoListOuter").removeClass("selected");
var a=e(this);a.addClass("selected");u.type=K;u.index=a.attr("id").split("_")[1];z()})}function j(){if(B&&!B.isDetached())O.volume=B.getVolume(),B.detach(),document.all&&!window.atob&&!document.addEventListener&&(B=null);g.find("#ivLargeImage").empty()}function Q(a){var b=p-(a.pageY-Y[1])*X,a=n>0?n/2:Math.min(0,Math.max(n,r-(a.pageX-Y[0])*X)),b=k>0?k/2:Math.min(0,Math.max(k,b));g.find(".fullscreen").css({left:a,top:b})}function R(){g.delegate("#ivLargeImage","click",function(a){if(U)l();else if(V){g.find(".fullscreen").removeAttr("style");
if(V){var b=g.find("#ivLargeImage"),c=b.find(".fullscreen");Z?b.css("cursor","url('"+w.staticImages.zoomOut+"'), auto"):(b.css("cursor","-webkit-zoom-out"),b.css("cursor","-moz-zoom-out"),b.css("cursor","zoom-out"));U=!0;var d=g.find("#ivLargeImage");n=d.width()-c.width();k=d.height()-c.height();var d=b.height()/2,e=b.width()/2;Y=[b.offset().left+e,b.offset().top+d];p=d-c.height()/2;r=e-c.width()/2;c.css({position:"relative",left:r,top:p});X=Math.max(c.height()/b.height(),c.width()/b.width())}Q(a)}});
g.delegate("#ivLargeImage","mousemove",function(a){U&&Q(a)})}function q(){var a;if(!(a=!w.useIV))a=F.getCurrentItem().color,a=!(w.colorImages&&w.colorImages[a]&&w.colorImages[a].length>0);if(!a){o.postCountMetric("dppc_immersiveViewOpened");if(m.isDefined(x))x.show();else{a=e("#auiImmersiveViewDiv");var b=e(window).height()-T,d=e(window).width()-aa;x=c.create(a,{name:"immersiveView",activate:"onclick",width:d,height:b,popoverLabel:"ImmersiveView",hideHeader:!0});a.click()}if(W){g=e("#ivMain");a=F.getCurrentItem().color;
C=w.colorImages[a];L=w.colorToVideo[a];u=F.getCurrentItem();H=0;N=0;if(m.isDefined(C))H=C.length;if(m.isDefined(L))N=L.length;i();if(m.isDefined(window.DetailPage)&&m.isDefined(window.DetailPage.StateController)){a=g.find("#ivVariationSelection");a.empty();var b=window.DetailPage.StateController.getState(),d=b.variation_label_order,f;for(f in d)if(d.hasOwnProperty(f)){var l=d[f],j=b.selected_variations[l],l=b.variation_display_labels[l];j&&e("<div/>").addClass("ivVariations").text(l+":"+j).appendTo(a)}}f=
g.find("#ivMediaSelect");H===0||N===0?(f.parent().hide(),g.find("#ivThumbs").addClass("noMediaSelection")):(f.empty(),e("<option/>").attr("value","all").prop("selected",!0).text(w.staticStrings.allMedia+" ("+(H+N)+")").appendTo(f),e("<option/>").attr("value","images").text(w.staticStrings.images+" ("+H+")").appendTo(f),e("<option/>").attr("value","videos").text(w.staticStrings.videos+" ("+N+")").appendTo(f),f.parent().show(),f.val("all"));f=g.find("#ivThumbs");f.find(".ivRow").not(".placeholder").remove();
f.find(".ivThumb").not(".placeholder").remove();a=H+N;for(d=b=0;b<a;){j=f.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(f);for(l=0;l<3&&b<a;l++,b++,d++)if(d<H){var k=C[b].thumb,n=f.find(".ivThumb.placeholder").clone().removeClass("placeholder").attr("id","ivImage_"+b).appendTo(j);n.find(".ivThumbImage").css("background",'url("'+t(k)+'") center no-repeat')}else if(k=L[b-H],n=f.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivThumbVideo").attr("id",
"ivVideo_"+(b-H)).appendTo(j),n.find(".ivThumbImage").css("background",'url("'+k.thumbUrl+'") center no-repeat'),m.isDefined(k)){var q={position:"triggerTop"},p=g.find("#ivThumbs").find(".ivThumbVideoPopover.placeholder").clone().removeClass("placeholder");p.find(".ivVideoPopoverTitle").text(k.title);p.find(".ivVideoPopoverDuration").text(k.durationTimestamp);q.inlineContent=p[0];h.declarative.create(n,"a-tooltip",q)}}f=g.find("#ivVideoList");f.find(".ivThumbVideoListOuter").not(".placeholder").remove();
a=f.find(".placeholder");for(b=0;b<N;b++)d=L[b],j=a.clone().removeClass("placeholder").appendTo(f),j.attr("id","ivVideoList_"+b),j.find(".ivThumbImage").css("background",'url("'+d.thumbUrl+'") center no-repeat'),j.find(".ivThumbTitle").text(d.title),j.find(".ivThumbDuration").text(d.durationTimestamp);O=w.airyConfig;W=!1;da()}}}var A,w,F,S,x,g,C,L,H,N,u,B,O,J="image",K="chromeful-video",$="chromeless-video",aa=75,T=150,ba=104,ca=80,Z=e.browser.msie,W=!0,U=!1,V=!1;n=void 0;k=void 0;p=void 0;r=void 0;
var X,Y,da=h.once(function(){b();I();R();h.on("a:popover:afterUpdatePosition:immersiveView",d);h.on("a:popover:afterShow:immersiveView",E);h.on("a:popover:afterHide:immersiveView",j)});return function(a,b,c,d){A=this;w=a;F=b;S=d;A.render=function(){W=!0};A.update=function(){};S.register("imageClick",q)}});m.when("A","jQuery","imageBlockUtils").register("ImageBlockLoader",function(h){return{load:function(c,f){f=f||{};f.timeout=f.timeout||4E3;h.ajax(c,f)}}});m.when("A","jQuery","Airy","postMetric",
"ImageBlockATF","ImageBlockBTF").register("imageBlockUtils",function(h,c,f,e,m,o){function n(c){return typeof c!=="undefined"}function k(e){var a=0;c.each(e,function(c,b){var e=parseInt(b[1],10);e>a&&(a=e)});return a}function p(e){var a=0;c.each(e,function(c,b){var e=parseInt(b[0],10);e>a&&(a=e)});return a}var r,G,t=c.extend(!0,{},m,o);return{isDefined:n,isjQueryObjDefined:function(c){return c.length!==0},getMaxHeightOfMainImage:function(c,a){var d=a.height(),b=p(c);b>0&&(d=Math.min(d,b));return d},
getMaxWidthOfMainImage:function(c,a){var d=a.width(),b=k(c);b>0&&(d=Math.min(d,b));return d},getContainerHeight:function(c,a,d){var c=c.get(0),b=0;n(c)&&(b=c.offsetWidth/a,b=Math.min(b,d));return b},getColorFromState:function(e,a){if(e){var a=a||t,d="";c.each(a.visualDimensions,function(a,c){e[c]&&(d+=" "+e[c])});return d&&d.substring(1)}},createThumbnail:function(c,a,d){var b=d.find(".template").clone().removeClass("template").addClass("item"),e=document.createElement("img");e.src=a;b.find(".placeHolder").replaceWith(e);
h.declarative.create(b,"thumb-action",c);d.append(b)},selectGivenThumbnail:function(c,a){var d=c.find(".a-button");a.find(".a-button").removeClass("a-button-selected").removeClass("a-button-focus");d.addClass("a-button-selected").addClass("a-button-focus")},createAiryInstanceForChromeful:function(i,a,d,b){var h=c.extend({},d.foresterMetadataParams);b!==null&&(h.method+="."+b);return f.embed({parentElement:i[0],streamingUrls:a.url,contentId:a.mediaObjectId,contentMinAge:Number(a.minimumAge||"")||0,
contentTitle:a.title,swfUrl:d.swfUrl,foresterMetadataParams:h,backgroundColor:"transparent",flashParams:{wmode:"transparent"},slateImages:{preloadSlate:a.slateUrl,postMediaSlate:a.slateUrl},videoAds:d.videoAds,bindings:{play:function(){b==="ImmersiveView"?r||(r=!0,e.postCountMetric("dppc_chromefulVideoPlayedIV")):G||(G=!0,e.postCountMetric("dppc_chromefulVideoPlayedPV"))}}})},loadMediaIntoAiry:function(c,a){c&&c.getMediaSourceInfo()!==a.url&&c.loadMedia({mediaSourceInfo:a.url,contentId:a.mediaObjectId,
contentMinAge:Number(a.minimumAge||"")||0,contentTitle:a.title,slateImages:{preloadSlate:a.slateUrl,postMediaSlate:a.slateUrl}})},showUnavailable:function(e){e&&(c("#imageBlock .unvailableVariation").html(e),c("#imageBlock .variationUnavailable").show())},hideUnavailable:function(){c("#imageBlock .variationUnavailable").hide()}}})})})(function(){var m=window.AmazonUIPageJS||P,h=m.attributeErrors;return h?h("DetailPageImageBlockAssets"):m}());