function handle_dropdown_selection(a,b){var c=a.closest(".tabbed-article-list"),d=c.parent(),e=c.find(".lb-tabs>li"),f=c.find(".lb-tabs>li.selected-tab"),g=$.inArray(f[0],e);d.load(a.data("url"),function(){var a=d.find(".lb-panes").children(),b=d.find(".lb-tabs>li");select_tab(g,b,a)})}function handle_tabbed_pane_selection(a,b){var c=a.closest(".lb-tabbed-pane"),d=a.parent().children(),e=$.inArray(a[0],d),f=c.find(".lb-panes").children();select_tab(e,d,f)}function select_tab(a,b,c){b.removeClass("selected-tab"),$(b[a]).addClass("selected-tab"),c.removeClass("selected-pane"),$(c[a]).addClass("selected-pane")}function handle_tab_selection(a){attr_list=a.attr("data-href").match(/^cc-([0-9]+)-tab-([0-9]+)-country-(GB|US)/),$("#slot-for-"+attr_list[1]).load(url_prefix+"update/tabbed-list?id="+attr_list[1]+"&tab="+attr_list[2]+"&country_code="+attr_list[3])}function handle_legacy_dropdown_selection(a){selectedTab=a.closest(".slot").find("li.selected-tab"),attr_list=selectedTab.attr("data-href").match(/^cc-([0-9]+)-tab-([0-9]+)-country-(GB|US)/),$("#slot-for-"+attr_list[1]).load(url_prefix+"update/tabbed-list-channel?id="+attr_list[1]+"&tab="+attr_list[2]+"&country_code="+attr_list[3]+"&channel="+a.val())}function handle_page_rotation(a){attr_list=a.attr("data-href").match(/^cc-([0-9]+)-page-([0-9]+)-country-(GB|US)/),$("#slot-for-"+attr_list[1]).load(url_prefix+"update/paginated-list?id="+attr_list[1]+"&page="+attr_list[2]+"&country_code="+attr_list[3])}function initializeConsole(){window.console||(window.console={}),window.console.log||(window.console.log=function(){})}function getId(a){return a+Math.random().toString().substring(7).slice(0,5)}function Swipe(a,b){"use strict";function c(){q=u.children,t=q.length,q.length<2&&(b.continuous=!1),p.transitions&&b.continuous&&q.length<3&&(u.appendChild(q[0].cloneNode(!0)),u.appendChild(u.children[1].cloneNode(!0)),q=u.children),r=new Array(q.length),s=a.getBoundingClientRect().width||a.offsetWidth,u.style.width=q.length*s+"px";for(var c=q.length;c--;){var d=q[c];d.style.width=s+"px",d.setAttribute("data-index",c),p.transitions&&(d.style.left=c*-s+"px",h(c,v>c?-s:c>v?s:0,0))}b.continuous&&p.transitions&&(h(f(v-1),-s,0),h(f(v+1),s,0)),p.transitions||(u.style.left=v*-s+"px"),a.style.visibility="visible"}function d(){b.continuous?g(v-1):v&&g(v-1)}function e(){b.continuous?g(v+1):v<q.length-1&&g(v+1)}function f(a){return(q.length+a%q.length)%q.length}function g(a,c){if(v!=a){if(p.transitions){var d=Math.abs(v-a)/(v-a);if(b.continuous){var e=d;d=-r[f(a)]/s,d!==e&&(a=-d*q.length+a)}for(var g=Math.abs(v-a)-1;g--;)h(f((a>v?a:v)-g-1),s*d,0);a=f(a),h(v,s*d,c||w),h(a,0,c||w),b.continuous&&h(f(a-d),-(s*d),0)}else a=f(a),j(v*-s,a*-s,c||w);v=a,o(b.callback&&b.callback(v,q[v]))}}function h(a,b,c){i(a,b,c),r[a]=b}function i(a,b,c){var d=q[a],e=d&&d.style;e&&(e.webkitTransitionDuration=e.MozTransitionDuration=e.msTransitionDuration=e.OTransitionDuration=e.transitionDuration=c+"ms",e.webkitTransform="translate("+b+"px,0)translateZ(0)",e.msTransform=e.MozTransform=e.OTransform="translateX("+b+"px)")}function j(a,c,d){if(!d)return void(u.style.left=c+"px");var e=+new Date,f=setInterval(function(){var g=+new Date-e;return g>d?(u.style.left=c+"px",A&&k(),b.transitionEnd&&b.transitionEnd.call(event,v,q[v]),void clearInterval(f)):void(u.style.left=(c-a)*(Math.floor(g/d*100)/100)+a+"px")},4)}function k(){x=setTimeout(e,A)}function l(){A=0,clearTimeout(x)}var m=!0,n=function(){},o=function(a){setTimeout(a||n,0)},p={addEventListener:!!window.addEventListener,touch:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,pointer:window.navigator.msPointerEnabled,transitions:function(a){var b=["transitionProperty","WebkitTransition","MozTransition","OTransition","msTransition"];for(var c in b)if(void 0!==a.style[b[c]])return!0;return!1}(document.createElement("swipe"))};if(a){var q,r,s,t,u=a.children[0];b=b||{};var v=parseInt(b.startSlide,10)||0,w=b.speed||300;b.continuous=void 0!==b.continuous?b.continuous:!0,p.pointer&&(a.style.msTouchAction="none");var x,y,z,A=b.auto||0,B={preventDefault:function(a){a.preventDefault()},toggleOffPreventClick:function(){for(var a=u.getElementsByTagName("a"),b=0;b<a.length;b++)a[b].removeEventListener("click",this.preventDefault,!1)},toggleOnPreventClick:function(){for(var a=u.getElementsByTagName("a"),b=0;b<a.length;b++)a[b].addEventListener("click",this.preventDefault,!1)}},C={},D={},E={handleEvent:function(a){switch(a.type){case"touchstart":this.start(a);break;case"touchmove":this.move(a);break;case"touchend":o(this.end(a));break;case"MSPointerDown":this.start(a);break;case"MSPointerMove":this.move(a),D.x&&B.toggleOnPreventClick();break;case"MSPointerUp":o(this.end(a));break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":o(this.transitionEnd(a)),B.toggleOffPreventClick();break;case"resize":z=!0,o(c.call());break;case"orientationchange":z=!1,setTimeout(function(){z||c.call()},1e3)}b.stopPropagation&&a.stopPropagation()},start:function(a){if(m){if(!p.pointer)var b=a.touches[0];C={x:p.pointer?a.pageX||a.clientX:b.pageX,y:p.pointer?a.pageY||a.clientY:b.pageY,time:+new Date},y=void 0,D={},p.pointer?(u.addEventListener("MSPointerMove",this,!1),u.addEventListener("MSPointerUp",this,!1)):(u.addEventListener("touchmove",this,!1),u.addEventListener("touchend",this,!1))}},move:function(a){if(m&&!(!p.pointer&&a.touches.length>1||a.scale&&1!==a.scale)){if(b.disableScroll&&a.preventDefault(),!p.pointer)var c=a.touches[0];var d=p.pointer?a.pageX||a.clientX:c.pageX,e=p.pointer?a.pageY||a.clientY:c.pageY;D={x:d-C.x,y:e-C.y},"undefined"==typeof y&&(y=!!(y||Math.abs(D.x)<Math.abs(D.y))),y||(a.preventDefault(),l(),b.continuous?(i(f(v-1),D.x+r[f(v-1)],0),i(v,D.x+r[v],0),i(f(v+1),D.x+r[f(v+1)],0)):(D.x=D.x/(!v&&D.x>0||v==q.length-1&&D.x<0?Math.abs(D.x)/s+1:1),i(v-1,D.x+r[v-1],0),i(v,D.x+r[v],0),i(v+1,D.x+r[v+1],0)))}},end:function(a){if(m){var c=+new Date-C.time,d=Number(c)<250&&Math.abs(D.x)>20||Math.abs(D.x)>s/2,e=!v&&D.x>0||v==q.length-1&&D.x<0;b.continuous&&(e=!1);var g=D.x<0;y||(d&&!e?(a.stopPropagation(),g?(b.continuous?(h(f(v-1),-s,0),h(f(v+2),s,0)):h(v-1,-s,0),h(v,r[v]-s,w),h(f(v+1),r[f(v+1)]-s,w),v=f(v+1)):(b.continuous?(h(f(v+1),s,0),h(f(v-2),-s,0)):h(v+1,s,0),h(v,r[v]+s,w),h(f(v-1),r[f(v-1)]+s,w),v=f(v-1)),b.callback&&b.callback(v,q[v])):b.continuous?(h(f(v-1),-s,w),h(v,0,w),h(f(v+1),s,w)):(h(v-1,-s,w),h(v,0,w),h(v+1,s,w))),p.pointer?(u.removeEventListener("MSPointerMove",E,!1),u.removeEventListener("MSPointerUp",E,!1)):(u.removeEventListener("touchmove",E,!1),u.removeEventListener("touchend",E,!1))}},transitionEnd:function(a){parseInt(a.target.getAttribute("data-index"),10)==v&&(A&&k(),b.transitionEnd&&b.transitionEnd.call(a,v,q[v]))}};return c(),A&&k(),p.addEventListener?(p.touch&&u.addEventListener("touchstart",E,!1),p.pointer&&u.addEventListener("MSPointerDown",E,!1),p.transitions&&(u.addEventListener("webkitTransitionEnd",E,!1),u.addEventListener("msTransitionEnd",E,!1),u.addEventListener("oTransitionEnd",E,!1),u.addEventListener("otransitionend",E,!1),u.addEventListener("transitionend",E,!1)),window.addEventListener("resize",E,!1),window.addEventListener("orientationchange",E,!1)):window.onresize=function(){c()},{setup:function(){c()},slide:function(a,b){l(),g(a,b)},prev:function(){l(),d()},next:function(){l(),e()},getPos:function(){return v},getNumSlides:function(){return t},disableTouch:function(){m=!1},enableTouch:function(){m=!0},kill:function(){l(),u.style.width="auto",u.style.left=0;for(var a=q.length;a--;){var b=q[a];b.style.width="100%",b.style.left=0,p.transitions&&i(a,0,0)}p.addEventListener?(u.removeEventListener("touchstart",E,!1),u.removeEventListener("MSPointerDown",E,!1),u.removeEventListener("webkitTransitionEnd",E,!1),u.removeEventListener("msTransitionEnd",E,!1),u.removeEventListener("oTransitionEnd",E,!1),u.removeEventListener("otransitionend",E,!1),u.removeEventListener("transitionend",E,!1),window.removeEventListener("resize",E,!1),window.removeEventListener("orientationchange",E,!1)):window.onresize=null}}}}window.undefined=window.undefined,Ext={version:"3.1.0-MOL"},Ext.apply=function(a,b,c){if(c&&Ext.apply(a,c),a&&b&&"object"==typeof b)for(var d in b)a[d]=b[d];return a},function(){var a=0,b=Object.prototype.toString,c=navigator.userAgent.toLowerCase(),d=function(a){return a.test(c)},e=document,f="CSS1Compat"==e.compatMode,g=d(/opera/),h=d(/chrome/),i=d(/webkit/),j=!h&&d(/safari/),k=j&&d(/applewebkit\/4/),l=j&&d(/version\/3/),m=j&&d(/version\/4/),n=!g&&d(/msie/),o=n&&d(/msie 7/),p=n&&d(/msie 8/),q=n&&!o&&!p,r=!i&&d(/gecko/),s=r&&d(/rv:1\.8/),t=r&&d(/rv:1\.9/),u=n&&!f,v=d(/windows|win32/),w=d(/macintosh|mac os x/),x=d(/adobeair/),y=d(/linux/),z=/^https/i.test(window.location.protocol);if(q)try{e.execCommand("BackgroundImageCache",!1,!0)}catch(A){}Ext.apply(Ext,{SSL_SECURE_URL:z&&n?'javascript:""':"about:blank",isStrict:f,isSecure:z,isReady:!1,enableGarbageCollector:!0,enableListenerCollection:!1,enableNestedListenerRemoval:!1,USE_NATIVE_JSON:!1,applyIf:function(a,b){if(a)for(var c in b)Ext.isDefined(a[c])||(a[c]=b[c]);return a},id:function(b,c){return(b=Ext.getDom(b)||{}).id=b.id||(c||"ext-gen")+ ++a},extend:function(){var a=function(a){for(var b in a)this[b]=a[b]},b=Object.prototype.constructor;return function(c,d,e){Ext.isObject(d)&&(e=d,d=c,c=e.constructor!=b?e.constructor:function(){d.apply(this,arguments)});var f,g=function(){},h=d.prototype;return g.prototype=h,f=c.prototype=new g,f.constructor=c,c.superclass=h,h.constructor==b&&(h.constructor=d),c.override=function(a){Ext.override(c,a)},f.superclass=f.supr=function(){return h},f.override=a,Ext.override(c,e),c.extend=function(a){return Ext.extend(c,a)},c}}(),override:function(a,b){if(b){var c=a.prototype;Ext.apply(c,b),Ext.isIE&&b.hasOwnProperty("toString")&&(c.toString=b.toString)}},namespace:function(){var a,b;return Ext.each(arguments,function(c){b=c.split("."),a=window[b[0]]=window[b[0]]||{},Ext.each(b.slice(1),function(b){a=a[b]=a[b]||{}})}),a},urlEncode:function(a,b){var c,d=[],e=encodeURIComponent;return Ext.iterate(a,function(a,b){c=Ext.isEmpty(b),Ext.each(c?a:b,function(b){d.push("&",e(a),"=",Ext.isEmpty(b)||b==a&&c?"":Ext.isDate(b)?Ext.encode(b).replace(/"/g,""):e(b))})}),b||(d.shift(),b=""),b+d.join("")},urlDecode:function(a,b){if(Ext.isEmpty(a))return{};var c,d,e={},f=a.split("&"),g=decodeURIComponent;return Ext.each(f,function(a){a=a.split("="),c=g(a[0]),d=g(a[1]),e[c]=b||!e[c]?d:[].concat(e[c]).concat(d)}),e},urlAppend:function(a,b){return Ext.isEmpty(b)?a:a+(-1===a.indexOf("?")?"?":"&")+b},toArray:function(){return n?function(a,b,c,d){d=[];for(var e=0,f=a.length;f>e;e++)d.push(a[e]);return d.slice(b||0,c||d.length)}:function(a,b,c){return Array.prototype.slice.call(a,b||0,c||a.length)}}(),isIterable:function(a){return Ext.isArray(a)||a.callee?!0:/NodeList|HTMLCollection/.test(b.call(a))?!0:("undefined"!=typeof a.nextNode||a.item)&&Ext.isNumber(a.length)},each:function(a,b,c){if(!Ext.isEmpty(a,!0)){(!Ext.isIterable(a)||Ext.isPrimitive(a))&&(a=[a]);for(var d=0,e=a.length;e>d;d++)if(b.call(c||a[d],a[d],d,a)===!1)return d}},iterate:function(a,b,c){if(!Ext.isEmpty(a)){if(Ext.isIterable(a))return void Ext.each(a,b,c);if(Ext.isObject(a))for(var d in a)if(a.hasOwnProperty(d)&&b.call(c||a,d,a[d],a)===!1)return}},getDom:function(a){return a&&e?a.dom?a.dom:Ext.isString(a)?e.getElementById(a):a:null},getBody:function(){return Ext.get(e.body||e.documentElement)},removeNode:n&&!p?function(){var a;return function(b){b&&"BODY"!=b.tagName&&(Ext.enableNestedListenerRemoval?Ext.EventManager.purgeElement(b,!0):Ext.EventManager.removeAll(b),a=a||e.createElement("div"),a.appendChild(b),a.innerHTML="",delete Ext.elCache[b.id])}}():function(a){a&&a.parentNode&&"BODY"!=a.tagName&&(Ext.enableNestedListenerRemoval?Ext.EventManager.purgeElement(a,!0):Ext.EventManager.removeAll(a),a.parentNode.removeChild(a),delete Ext.elCache[a.id])},isEmpty:function(a,b){return null===a||void 0===a||Ext.isArray(a)&&!a.length||(b?!1:""===a)},isArray:function(a){return"[object Array]"===b.apply(a)},isDate:function(a){return"[object Date]"===b.apply(a)},isObject:function(a){return!!a&&"[object Object]"===Object.prototype.toString.call(a)},isPrimitive:function(a){return Ext.isString(a)||Ext.isNumber(a)||Ext.isBoolean(a)},isFunction:function(a){return"[object Function]"===b.apply(a)},isNumber:function(a){return"number"==typeof a&&isFinite(a)},isString:function(a){return"string"==typeof a},isBoolean:function(a){return"boolean"==typeof a},isElement:function(a){return!!a&&a.tagName},isDefined:function(a){return"undefined"!=typeof a},isOpera:g,isWebKit:i,isChrome:h,isSafari:j,isSafari3:l,isSafari4:m,isSafari2:k,isIE:n,isIE6:q,isIE7:o,isIE8:p,isGecko:r,isGecko2:s,isGecko3:t,isBorderBox:u,isLinux:y,isWindows:v,isMac:w,isAir:x}),Ext.ns=Ext.namespace}(),Ext.ns("Ext.util","Ext.lib","Ext.data"),Ext.elCache={},Ext.apply(Function.prototype,{createInterceptor:function(a,b){var c=this;return Ext.isFunction(a)?function(){var d=this,e=arguments;return a.target=d,a.method=c,a.apply(b||d||window,e)!==!1?c.apply(d||window,e):null}:this},createCallback:function(){var a=arguments,b=this;return function(){return b.apply(window,a)}},createDelegate:function(a,b,c){var d=this;return function(){var e=b||arguments;if(c===!0)e=Array.prototype.slice.call(arguments,0),e=e.concat(b);else if(Ext.isNumber(c)){e=Array.prototype.slice.call(arguments,0);var f=[c,0].concat(b);Array.prototype.splice.apply(e,f)}return d.apply(a||window,e)}},defer:function(a,b,c,d){var e=this.createDelegate(b,c,d);return a>0?setTimeout(e,a):(e(),0)}}),Ext.applyIf(String,{format:function(a){var b=Ext.toArray(arguments,1);return a.replace(/\{(\d+)\}/g,function(a,c){return b[c]})}}),Ext.applyIf(Array.prototype,{indexOf:function(a,b){var c=this.length;for(b=b||0,b+=0>b?c:0;c>b;++b)if(this[b]===a)return b;return-1},remove:function(a){var b=this.indexOf(a);return-1!=b&&this.splice(b,1),this}}),Ext.util.TaskRunner=function(a){a=a||10;var b=[],c=[],d=0,e=!1,f=function(){e=!1,clearInterval(d),d=0},g=function(){e||(e=!0,d=setInterval(i,a))},h=function(a){c.push(a),a.onStop&&a.onStop.apply(a.scope||a)},i=function(){var a=c.length,d=(new Date).getTime();if(a>0){for(var e=0;a>e;e++)b.remove(c[e]);if(c=[],b.length<1)return void f()}for(var g,i,j,e=0,k=b.length;k>e;++e){if(g=b[e],i=d-g.taskRunTime,g.interval<=i&&(j=g.run.apply(g.scope||g,g.args||[++g.taskRunCount]),g.taskRunTime=d,j===!1||g.taskRunCount===g.repeat))return void h(g);g.duration&&g.duration<=d-g.taskStartTime&&h(g)}};this.start=function(a){return b.push(a),a.taskStartTime=(new Date).getTime(),a.taskRunTime=0,a.taskRunCount=0,g(),a},this.stop=function(a){return h(a),a},this.stopAll=function(){f();for(var a=0,d=b.length;d>a;a++)b[a].onStop&&b[a].onStop();b=[],c=[]}},Ext.TaskMgr=new Ext.util.TaskRunner,Ext.util.DelayedTask=function(a,b,c){var d,e=this,f=function(){clearInterval(d),d=null,a.apply(b,c||[])};e.delay=function(g,h,i,j){e.cancel(),a=h||a,b=i||b,c=j||c,d=setInterval(f,g)},e.cancel=function(){d&&(clearInterval(d),d=null)}},function(){function a(a){return c||(c=new Ext.Element.Flyweight),c.dom=a,c}function b(){var a=Function.prototype;delete a.createSequence,delete a.defer,delete a.createDelegate,delete a.createCallback,delete a.createInterceptor,window.detachEvent("onunload",b)}var c;!function(){var b=document,c="CSS1Compat"==b.compatMode,d=Math.max,e=Math.round,f=parseInt;Ext.lib.Dom={isAncestor:function(a,b){var c=!1;if(a=Ext.getDom(a),b=Ext.getDom(b),a&&b){if(a.contains)return a.contains(b);if(a.compareDocumentPosition)return!!(16&a.compareDocumentPosition(b));for(;b=b.parentNode;)c=b==a||c}return c},getViewWidth:function(a){return a?this.getDocumentWidth():this.getViewportWidth()},getViewHeight:function(a){return a?this.getDocumentHeight():this.getViewportHeight()},getDocumentHeight:function(){return d(c?b.documentElement.scrollHeight:b.body.scrollHeight,this.getViewportHeight())},getDocumentWidth:function(){return d(c?b.documentElement.scrollWidth:b.body.scrollWidth,this.getViewportWidth())},getViewportHeight:function(){return Ext.isIE?Ext.isStrict?b.documentElement.clientHeight:b.body.clientHeight:self.innerHeight},getViewportWidth:function(){return Ext.isStrict||Ext.isOpera?Ext.isIE?b.documentElement.clientWidth:self.innerWidth:b.body.clientWidth},getY:function(a){return this.getXY(a)[1]},getX:function(a){return this.getXY(a)[0]},getXY:function(c){var d,g,h,i,j,k,l,m,n=0,o=0,p=b.body||b.documentElement,q=[0,0];if(c=Ext.getDom(c),c!=p)if(c.getBoundingClientRect)h=c.getBoundingClientRect(),l=a(document).getScroll(),q=[e(h.left+l.left),e(h.top+l.top)];else{for(d=c,m=a(c).isStyle("position","absolute");d;)g=a(d),n+=d.offsetLeft,o+=d.offsetTop,m=m||g.isStyle("position","absolute"),Ext.isGecko&&(o+=i=f(g.getStyle("borderTopWidth"),10)||0,n+=j=f(g.getStyle("borderLeftWidth"),10)||0,d==c||g.isStyle("overflow","visible")||(n+=j,o+=i)),d=d.offsetParent;for(Ext.isSafari&&m&&(n-=p.offsetLeft,o-=p.offsetTop),Ext.isGecko&&!m&&(k=a(p),n+=f(k.getStyle("borderLeftWidth"),10)||0,o+=f(k.getStyle("borderTopWidth"),10)||0),d=c.parentNode;d&&d!=p;)(!Ext.isOpera||"TR"!=d.tagName&&!a(d).isStyle("display","inline"))&&(n-=d.scrollLeft,o-=d.scrollTop),d=d.parentNode;q=[n,o]}return q},setXY:function(a,b){(a=Ext.fly(a,"_setXY")).position();var c,d=a.translatePoints(b),e=a.dom.style;for(c in d)isNaN(d[c])||(e[c]=d[c]+"px")},setX:function(a,b){this.setXY(a,[b,!1])},setY:function(a,b){this.setXY(a,[!1,b])}}}(),Ext.lib.Event=function(){function a(a){return!b(a.currentTarget,B.getRelatedTarget(a))}function b(a,b){if(a&&a.firstChild)for(;b;){if(b===a)return!0;b=b.parentNode,b&&1!=b.nodeType&&(b=null)}return!1}function c(){var a,b,c,e,f=!1,i=[],m=!h||j>0;if(!l){for(l=!0,b=0,c=k.length;c>b;b++)e=k[b],e&&(a=n.getElementById(e.id))&&(!e.checkReady||h||a.nextSibling||n&&n.body?(a=e.override?e.override===!0?e.obj:e.override:a,e.fn.call(a,e.obj),k.remove(e)):i.push(e));j=0===i.length?0:j-1,m?d():(clearInterval(g),g=null),f=!(l=!1)}return f}function d(){if(!g){var a=function(){c()};g=setInterval(a,p)}}function e(){var a=n.documentElement,b=n.body;return a&&(a[v]||a[u])?[a[u],a[v]]:b?[b[u],b[v]]:[0,0]}function f(a,b){a=a.browserEvent||a;var c=a["page"+b];return c||0===c||(c=a["client"+b]||0,Ext.isIE&&(c+=e()["X"==b?0:1])),c}var g,h=!1,i={},j=0,k=[],l=!1,m=window,n=document,o=200,p=20,q=0,r=1,s=2,t=3,u="scrollLeft",v="scrollTop",w="unload",x="mouseover",y="mouseout",z=function(){var b;return b=m.addEventListener?function(b,c,d,e){return"mouseenter"==c?(d=d.createInterceptor(a),b.addEventListener(x,d,e)):"mouseleave"==c?(d=d.createInterceptor(a),b.addEventListener(y,d,e)):b.addEventListener(c,d,e),d}:m.attachEvent?function(a,b,c,d){return a.attachEvent("on"+b,c),c}:function(){}}(),A=function(){var a;return a=m.removeEventListener?function(a,b,c,d){"mouseenter"==b?b=x:"mouseleave"==b&&(b=y),a.removeEventListener(b,c,d)}:m.detachEvent?function(a,b,c){a.detachEvent("on"+b,c)}:function(){}}(),B={extAdapter:!0,onAvailable:function(a,b,c,e){k.push({id:a,fn:b,obj:c,override:e,checkReady:!1}),j=o,d()},addListener:function(a,b,c){return a=Ext.getDom(a),a&&c?b==w?(void 0===i[a.id]&&(i[a.id]=[]),i[a.id].push([b,c]),c):z(a,b,c,!1):!1},removeListener:function(a,b,c){a=Ext.getDom(a);var d,e,f,g;if(a&&c){if(b==w){if(void 0!==(g=i[a.id]))for(d=0,e=g.length;e>d;d++)(f=g[d])&&f[q]==b&&f[r]==c&&i[id].splice(d,1);return}A(a,b,c,!1)}},getTarget:function(a){return a=a.browserEvent||a,this.resolveTextNode(a.target||a.srcElement)},resolveTextNode:Ext.isGecko?function(a){if(a){var b=HTMLElement.prototype.toString.call(a);if("[xpconnect wrapped native prototype]"!=b&&"[object XULElement]"!=b)return 3==a.nodeType?a.parentNode:a}}:function(a){return a&&3==a.nodeType?a.parentNode:a},getRelatedTarget:function(a){return a=a.browserEvent||a,this.resolveTextNode(a.relatedTarget||(a.type==y?a.toElement:a.type==x?a.fromElement:null))},getPageX:function(a){return f(a,"X")},getPageY:function(a){return f(a,"Y")},getXY:function(a){return[this.getPageX(a),this.getPageY(a)]},stopEvent:function(a){this.stopPropagation(a),this.preventDefault(a)},stopPropagation:function(a){a=a.browserEvent||a,a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},preventDefault:function(a){a=a.browserEvent||a,a.preventDefault?a.preventDefault():a.returnValue=!1},getEvent:function(a){if(a=a||m.event,!a)for(var b=this.getEvent.caller;b&&(a=b.arguments[0],!a||Event!=a.constructor);)b=b.caller;return a},getCharCode:function(a){return a=a.browserEvent||a,a.charCode||a.keyCode||0},getListeners:function(a,b){Ext.EventManager.getListeners(a,b)},purgeElement:function(a,b,c){Ext.EventManager.purgeElement(a,b,c)},_load:function(a){h=!0;Ext.lib.Event;Ext.isIE&&a!==!0&&A(m,"load",arguments.callee)},_unload:function(a){var b,c,d,e,f,g,h=Ext.lib.Event;for(e in i)for(d=i[e],b=0,f=d.length;f>b;b++)if(c=d[b])try{g=c[t]?c[t]===!0?c[s]:c[t]:m,c[r].call(g,h.getEvent(a),c[s])}catch(j){}i=null,Ext.EventManager._unload(),A(m,w,h._unload)}};return B.on=B.addListener,B.un=B.removeListener,n&&n.body?B._load(!0):z(m,"load",B._load),z(m,w,B._unload),c(),B}(),Ext.lib.Ajax=function(){function a(a){function b(a,b){for(c in b)b.hasOwnProperty(c)&&a.setRequestHeader(c,b[c])}var c,d=a.conn;m.defaultHeaders&&b(d,m.defaultHeaders),m.headers&&(b(d,m.headers),delete m.headers)}function b(a,b,c,d){return{tId:a,status:c?-1:0,statusText:c?"transaction aborted":"communication failure",isAbort:c,isTimeout:d,argument:b}}function c(a,b){(m.headers=m.headers||{})[a]=b}function d(a,b){var c,d,e,f={},g=a.conn;try{c=a.conn.getAllResponseHeaders(),Ext.each(c.replace(/\r\n/g,"\n").split("\n"),function(a){d=a.indexOf(":"),d>=0&&(e=a.substr(0,d).toLowerCase()," "==a.charAt(d+1)&&++d,f[e]=a.substr(d+1))})}catch(h){}return{tId:a.tId,status:g.status,statusText:g.statusText,getResponseHeader:function(a){return f[a.toLowerCase()]},getAllResponseHeaders:function(){return c},responseText:g.responseText,responseXML:g.responseXML,argument:b}}function e(a){a.conn=null,a=null}function f(a,c,f,g){if(!c)return void e(a);var h,i;try{h=void 0!==a.conn.status&&0!=a.conn.status?a.conn.status:13030}catch(j){h=13030}if(h>=200&&300>h||Ext.isIE&&1223==h)i=d(a,c.argument),c.success&&(c.scope?c.success.apply(c.scope,[i]):c.success(i));else switch(h){case 12002:case 12029:case 12030:case 12031:case 12152:case 13030:i=b(a.tId,c.argument,f?f:!1,g),c.failure&&(c.scope?c.failure.apply(c.scope,[i]):c.failure(i));break;default:i=d(a,c.argument),c.failure&&(c.scope?c.failure.apply(c.scope,[i]):c.failure(i))}e(a),i=null}function g(a,b){b=b||{};var c=a.conn,d=a.tId,e=m.poll,g=b.timeout||null;g&&(m.timeout[d]=setTimeout(function(){m.abort(a,b,!0)},g)),e[d]=setInterval(function(){c&&4==c.readyState&&(clearInterval(e[d]),e[d]=null,g&&(clearTimeout(m.timeout[d]),m.timeout[d]=null),f(a,b))},m.pollInterval)}function h(b,d,e,f){var h=i()||null;return h&&(h.conn.open(b,d,!0),m.useDefaultXhrHeader&&c("X-Requested-With",m.defaultXhrHeader),!f||!m.useDefaultHeader||m.headers&&m.headers[l]||c(l,m.defaultPostHeader),(m.defaultHeaders||m.headers)&&a(h),g(h,e),h.conn.send(f||null)),h}function i(){var a;try{(a=j(m.transactionId))&&m.transactionId++}catch(b){}finally{return a}}function j(a){var b;try{b=new XMLHttpRequest}catch(c){for(var d=0;d<k.length;++d)try{b=new ActiveXObject(k[d]);break}catch(c){}}finally{return{conn:b,tId:a}}}var k=["MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],l="Content-Type",m={request:function(a,b,d,e,f){if(f){var g,i=this,j=f.xmlData,k=f.jsonData;Ext.applyIf(i,f),(j||k)&&(g=i.headers,g&&g[l]||c(l,j?"text/xml":"application/json"),e=j||(Ext.isPrimitive(k)?k:Ext.encode(k)))}return h(a||f.method||"POST",b,d,e)},serializeForm:function(a){var b,c,d=a.elements||(document.forms[a]||Ext.getDom(a)).elements,e=!1,f=encodeURIComponent,g="";return Ext.each(d,function(a){b=a.name,c=a.type,!a.disabled&&b&&(/select-(one|multiple)/i.test(c)?Ext.each(a.options,function(a){a.selected&&(g+=String.format("{0}={1}&",f(b),f((a.hasAttribute?a.hasAttribute("value"):null!==a.getAttribute("value"))?a.value:a.text)))}):/file|undefined|reset|button/i.test(c)||/radio|checkbox/i.test(c)&&!a.checked||"submit"==c&&e||(g+=f(b)+"="+f(a.value)+"&",e=/submit/i.test(c)))}),g.substr(0,g.length-1)},useDefaultHeader:!0,defaultPostHeader:"application/x-www-form-urlencoded; charset=UTF-8",useDefaultXhrHeader:!0,defaultXhrHeader:"XMLHttpRequest",poll:{},timeout:{},pollInterval:50,transactionId:0,abort:function(a,b,c){var d=this,e=a.tId,g=!1;return d.isCallInProgress(a)&&(a.conn.abort(),clearInterval(d.poll[e]),d.poll[e]=null,clearTimeout(m.timeout[e]),d.timeout[e]=null,f(a,b,g=!0,c)),g},isCallInProgress:function(a){return a.conn&&!{0:!0,4:!0}[a.conn.readyState]}};return m}(),function(){var a=Ext.lib,b=/width|height|opacity|padding/i,c=/^((width|height)|(top|left))$/,d=/width|height|top$|bottom$|left$|right$/i,e=/\d+(em|%|en|ex|pt|in|cm|mm|pc)$/i,f=function(a){return"undefined"!=typeof a},g=function(){return new Date};a.Anim={motion:function(a,b,c,d,e,f){return this.run(a,b,c,d,e,f,Ext.lib.Motion)},run:function(a,b,c,d,e,f,g){g=g||Ext.lib.AnimBase,"string"==typeof d&&(d=Ext.lib.Easing[d]);var h=new g(a,b,c,d);return h.animateX(function(){Ext.isFunction(e)&&e.call(f)}),h}},a.AnimBase=function(a,b,c,d){a&&this.init(a,b,c,d)},a.AnimBase.prototype={doMethod:function(a,b,c){var d=this;return d.method(d.curFrame,b,c-b,d.totalFrames)},setAttr:function(a,c,d){b.test(a)&&0>c&&(c=0),Ext.fly(this.el,"_anim").setStyle(a,c+d)},getAttr:function(a){var b=Ext.fly(this.el),d=b.getStyle(a),f=c.exec(a)||[];return"auto"===d||e.test(d)?f[2]||"absolute"==b.getStyle("position")&&f[3]?b.dom["offset"+f[0].charAt(0).toUpperCase()+f[0].substr(1)]:0:parseFloat(d)},getDefaultUnit:function(a){return d.test(a)?"px":""},animateX:function(a,b){var c=this,d=function(){c.onComplete.removeListener(d),Ext.isFunction(a)&&a.call(b||c,c)};c.onComplete.addListener(d,c),c.animate()},setRunAttr:function(a){var b,c=this,d=this.attributes[a],e=d.to,g=d.by,h=d.from,i=d.unit,j=this.runAttrs[a]={};if(!f(e)&&!f(g))return!1;var k=f(h)?h:c.getAttr(a);if(f(e))b=e;else if(f(g))if(Ext.isArray(k)){b=[];for(var l=0,m=k.length;m>l;l++)b[l]=k[l]+g[l]}else b=k+g;Ext.apply(j,{start:k,end:b,unit:f(i)?i:c.getDefaultUnit(a)})},init:function(b,c,d,e){var f=this,h=0,i=a.AnimMgr;Ext.apply(f,{isAnimated:!1,startTime:null,el:Ext.getDom(b),attributes:c||{},duration:d||1,method:e||a.Easing.easeNone,useSec:!0,curFrame:0,totalFrames:i.fps,runAttrs:{},animate:function(){var a=this,b=a.duration;return a.isAnimated?!1:(a.curFrame=0,a.totalFrames=a.useSec?Math.ceil(i.fps*b):b,void i.registerElement(a))},stop:function(a){var b=this;a&&(b.curFrame=b.totalFrames,b._onTween.fire()),i.stop(b)}});var j=function(){var a,b=this;b.onStart.fire(),b.runAttrs={};for(a in this.attributes)this.setRunAttr(a);b.isAnimated=!0,b.startTime=g(),h=0},k=function(){var a=this;a.onTween.fire({duration:g()-a.startTime,curFrame:a.curFrame});var b=a.runAttrs;for(var c in b)this.setAttr(c,a.doMethod(c,b[c].start,b[c].end),b[c].unit);++h},l=function(){var a=this,b=(g()-a.startTime)/1e3,c={duration:b,frames:h,fps:h/b};a.isAnimated=!1,h=0,a.onComplete.fire(c)};f.onStart=new Ext.util.Event(f),f.onTween=new Ext.util.Event(f),f.onComplete=new Ext.util.Event(f),(f._onStart=new Ext.util.Event(f)).addListener(j),(f._onTween=new Ext.util.Event(f)).addListener(k),(f._onComplete=new Ext.util.Event(f)).addListener(l)}},Ext.lib.AnimMgr=new function(){var a=this,b=null,c=[],d=0;Ext.apply(a,{fps:1e3,delay:1,registerElement:function(b){c.push(b),++d,b._onStart.fire(),a.start()},unRegister:function(b,f){b._onComplete.fire(),f=f||e(b),-1!=f&&c.splice(f,1),--d<=0&&a.stop()},start:function(){null===b&&(b=setInterval(a.run,a.delay))},stop:function(e){if(e)a.unRegister(e);else{clearInterval(b);for(var f=0,g=c.length;g>f;++f)c[0].isAnimated&&a.unRegister(c[0],0);c=[],b=null,d=0}},run:function(){var b,d,e,g;for(d=0,e=c.length;e>d;d++)g=c[d],g&&g.isAnimated&&(b=g.totalFrames,g.curFrame<b||null===b?(++g.curFrame,g.useSec&&f(g),g._onTween.fire()):a.stop(g))}});var e=function(a){var b,d;for(b=0,d=c.length;d>b;b++)if(c[b]===a)return b;return-1},f=function(a){var b=a.totalFrames,c=a.curFrame,d=a.duration,e=c*d*1e3/b,f=g()-a.startTime,h=0;h=1e3*d>f?Math.round((f/e-1)*c):b-(c+1),h>0&&isFinite(h)&&(a.curFrame+h>=b&&(h=b-(c+1)),a.curFrame+=h)}},a.Bezier=new function(){this.getPosition=function(a,b){var c,d,e=a.length,f=[],g=1-b;for(c=0;e>c;++c)f[c]=[a[c][0],a[c][1]];for(d=1;e>d;++d)for(c=0;e-d>c;++c)f[c][0]=g*f[c][0]+b*f[parseInt(c+1,10)][0],f[c][1]=g*f[c][1]+b*f[parseInt(c+1,10)][1];return[f[0][0],f[0][1]]}},a.Easing={easeNone:function(a,b,c,d){return c*a/d+b},easeIn:function(a,b,c,d){return c*(a/=d)*a+b},easeOut:function(a,b,c,d){return-c*(a/=d)*(a-2)+b}},function(){a.Motion=function(b,c,d,e){b&&a.Motion.superclass.constructor.call(this,b,c,d,e)},Ext.extend(a.Motion,Ext.lib.AnimBase);var b=a.Motion.superclass,c=(a.Motion.prototype,/^points$/i);Ext.apply(a.Motion.prototype,{setAttr:function(a,d,e){var f=this,g=b.setAttr;c.test(a)?(e=e||"px",g.call(f,"left",d[0],e),g.call(f,"top",d[1],e)):g.call(f,a,d,e)},getAttr:function(a){var d=this,e=b.getAttr;return c.test(a)?[e.call(d,"left"),e.call(d,"top")]:e.call(d,a)},doMethod:function(d,e,f){var g=this;return c.test(d)?a.Bezier.getPosition(g.runAttrs[d],g.method(g.curFrame,0,100,g.totalFrames)/100):b.doMethod.call(g,d,e,f)},setRunAttr:function(e){if(c.test(e)){var g,h,i,j,k,l=this,m=this.el,n=this.attributes.points,o=n.control||[],p=n.from,q=n.to,r=n.by,s=a.Dom;if(o.length>0&&!Ext.isArray(o[0])&&(o=[o]),Ext.fly(m,"_anim").position(),s.setXY(m,f(p)?p:s.getXY(m)),g=l.getAttr("points"),f(q))for(i=d.call(l,q,g),h=0,j=o.length;j>h;++h)o[h]=d.call(l,o[h],g);else if(f(r))for(i=[g[0]+r[0],g[1]+r[1]],h=0,j=o.length;j>h;++h)o[h]=[g[0]+o[h][0],g[1]+o[h][1]];k=this.runAttrs[e]=[g],o.length>0&&(k=k.concat(o)),k[k.length]=i}else b.setRunAttr.call(this,e)}});var d=function(b,c){var d=a.Dom.getXY(this.el);return[b[0]-d[0]+c[0],b[1]-d[1]+c[1]]}}()}(),function(){var a=Math.abs,b=Math.PI,c=Math.asin,d=Math.pow,e=Math.sin,f=Ext.lib;Ext.apply(f.Easing,{easeBoth:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b},easeInStrong:function(a,b,c,d){return c*(a/=d)*a*a*a+b},easeOutStrong:function(a,b,c,d){return-c*((a=a/d-1)*a*a*a-1)+b},easeBothStrong:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a*a+b:-c/2*((a-=2)*a*a*a-2)+b},elasticIn:function(f,g,h,i,j,k){if(0==f||1==(f/=i))return 0==f?g:g+h;k=k||.3*i;var l;return j>=a(h)?l=k/(2*b)*c(h/j):(j=h,l=k/4),-(j*d(2,10*(f-=1))*e(2*(f*i-l)*b/k))+g},elasticOut:function(f,g,h,i,j,k){if(0==f||1==(f/=i))return 0==f?g:g+h;k=k||.3*i;var l;return j>=a(h)?l=k/(2*b)*c(h/j):(j=h,l=k/4),j*d(2,-10*f)*e(2*(f*i-l)*b/k)+h+g},elasticBoth:function(f,g,h,i,j,k){if(0==f||2==(f/=i/2))return 0==f?g:g+h;k=k||.3*i*1.5;var l;return j>=a(h)?l=k/(2*b)*c(h/j):(j=h,l=k/4),1>f?-.5*j*d(2,10*(f-=1))*e(2*(f*i-l)*b/k)+g:j*d(2,-10*(f-=1))*e(2*(f*i-l)*b/k)*.5+h+g},backIn:function(a,b,c,d,e){return e=e||1.70158,c*(a/=d)*a*((e+1)*a-e)+b},backOut:function(a,b,c,d,e){return e||(e=1.70158),c*((a=a/d-1)*a*((e+1)*a+e)+1)+b},backBoth:function(a,b,c,d,e){return e=e||1.70158,(a/=d/2)<1?c/2*a*a*(((e*=1.525)+1)*a-e)+b:c/2*((a-=2)*a*(((e*=1.525)+1)*a+e)+2)+b},bounceIn:function(a,b,c,d){return c-f.Easing.bounceOut(d-a,0,c,d)+b},bounceOut:function(a,b,c,d){return(a/=d)<1/2.75?7.5625*c*a*a+b:2/2.75>a?c*(7.5625*(a-=1.5/2.75)*a+.75)+b:2.5/2.75>a?c*(7.5625*(a-=2.25/2.75)*a+.9375)+b:c*(7.5625*(a-=2.625/2.75)*a+.984375)+b},bounceBoth:function(a,b,c,d){return d/2>a?.5*f.Easing.bounceIn(2*a,0,c,d)+b:.5*f.Easing.bounceOut(2*a-d,0,c,d)+.5*c+b}})}(),function(){function a(a){var b,c,d=parseInt,e=null;return 3==a.length?a:(Ext.each([g,f,h],function(f,g){return b=g%2==0?16:10,c=f.exec(a),c&&4==c.length?(e=[d(c[1],b),d(c[2],b),d(c[3],b)],!1):void 0}),e)}var b=Ext.lib;b.Anim.color=function(a,c,d,e,f,g){return b.Anim.run(a,c,d,e,f,g,b.ColorAnim)},b.ColorAnim=function(a,c,d,e){b.ColorAnim.superclass.constructor.call(this,a,c,d,e)},Ext.extend(b.ColorAnim,b.AnimBase);
var c=b.ColorAnim.superclass,d=/color$/i,e=/^transparent|rgba\(0, 0, 0, 0\)$/,f=/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,g=/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,h=/^#?([0-9A-F]{1})([0-9A-F]{1})([0-9A-F]{1})$/i,i=function(a){return"undefined"!=typeof a};Ext.apply(b.ColorAnim.prototype,{getAttr:function(a){var b,f=this,g=f.el;if(d.test(a))for(;g&&e.test(b=Ext.fly(g).getStyle(a));)g=g.parentNode,b="fff";else b=c.getAttr.call(f,a);return b},doMethod:function(a,b,e){var f,g,h,i,j=this,k=Math.floor;if(d.test(a)){for(f=[],g=0,h=b.length;h>g;g++)i=b[g],f[g]=c.doMethod.call(j,a,i,e[g]);f="rgb("+k(f[0])+","+k(f[1])+","+k(f[2])+")"}else f=c.doMethod.call(j,a,b,e);return f},setRunAttr:function(b){var e,f=this,g=f.attributes[b],h=g.to,j=g.by;if(c.setRunAttr.call(f,b),e=f.runAttrs[b],d.test(b)){var k=a(e.start),l=a(e.end);if(!i(h)&&i(j)){l=a(j);for(var m=0,n=k.length;n>m;m++)l[m]=k[m]+l[m]}e.start=k,e.end=l}}})}(),function(){var a=Ext.lib;a.Anim.scroll=function(b,c,d,e,f,g){return a.Anim.run(b,c,d,e,f,g,a.Scroll)},a.Scroll=function(b,c,d,e){b&&a.Scroll.superclass.constructor.call(this,b,c,d,e)},Ext.extend(a.Scroll,a.ColorAnim);var b=a.Scroll.superclass,c="scroll";Ext.apply(a.Scroll.prototype,{doMethod:function(a,d,e){var f,g=this,h=g.curFrame,i=g.totalFrames;return f=a==c?[g.method(h,d[0],e[0]-d[0],i),g.method(h,d[1],e[1]-d[1],i)]:b.doMethod.call(g,a,d,e)},getAttr:function(a){var d=this;return a==c?[d.el.scrollLeft,d.el.scrollTop]:b.getAttr.call(d,a)},setAttr:function(a,d,e){var f=this;a==c?(f.el.scrollLeft=d[0],f.el.scrollTop=d[1]):b.setAttr.call(f,a,d,e)}})}(),Ext.isIE&&window.attachEvent("onunload",b)}(),function(){function a(a,b,c){return function(){b.target==arguments[0]&&a.apply(c,f(arguments))}}function b(a,b,c,d){return c.task=new e.DelayedTask,function(){c.task.delay(b.buffer,a,d,f(arguments))}}function c(a,b,c,d){return function(){return b.removeListener(c,d),a.apply(d,arguments)}}function d(a,b,c,d){return function(){var g=new e.DelayedTask;c.tasks||(c.tasks=[]),c.tasks.push(g),g.delay(b.delay||10,a,d,f(arguments))}}var e=Ext.util,f=Ext.toArray,g=Ext.each,h=Ext.isObject,i=!0,j=!1;e.Observable=function(){var a=this,b=a.events;a.listeners&&(a.on(a.listeners),delete a.listeners),a.events=b||{}},e.Observable.prototype={filterOptRe:/^(?:scope|delay|buffer|single)$/,fireEvent:function(){var a,b,c=f(arguments),d=c[0].toLowerCase(),e=this,g=i,k=e.events[d];if(e.eventsSuspended===i)(a=e.eventQueue)&&a.push(c);else if(h(k)&&k.bubble){if(k.fire.apply(k,c.slice(1))===j)return j;if(b=e.getBubbleTarget&&e.getBubbleTarget(),b&&b.enableBubble)return b.events[d]&&Ext.isObject(b.events[d])&&b.events[d].bubble||b.enableBubble(d),b.fireEvent.apply(b,c)}else h(k)&&(c.shift(),g=k.fire.apply(k,c));return g},addListener:function(a,b,c,d){var f,g,j,k=this;if(h(a)){d=a;for(f in d)g=d[f],k.filterOptRe.test(f)||k.addListener(f,g.fn||g,g.scope||d.scope,g.fn?g:d)}else a=a.toLowerCase(),j=k.events[a]||i,Ext.isBoolean(j)&&(k.events[a]=j=new e.Event(k,a)),j.addListener(b,c,h(d)?d:{})},removeListener:function(a,b,c){var d=this.events[a.toLowerCase()];h(d)&&d.removeListener(b,c)},purgeListeners:function(){var a,b,c=this.events;for(b in c)a=c[b],h(a)&&a.clearListeners()},addEvents:function(a){var b=this;if(b.events=b.events||{},Ext.isString(a))for(var c=arguments,d=c.length;d--;)b.events[c[d]]=b.events[c[d]]||i;else Ext.applyIf(b.events,a)},hasListener:function(a){var b=this.events[a];return h(b)&&b.listeners.length>0},suspendEvents:function(a){this.eventsSuspended=i,a&&!this.eventQueue&&(this.eventQueue=[])},resumeEvents:function(){var a=this,b=a.eventQueue||[];a.eventsSuspended=j,delete a.eventQueue,g(b,function(b){a.fireEvent.apply(a,b)})}};var k=e.Observable.prototype;k.on=k.addListener,k.un=k.removeListener,e.Observable.releaseCapture=function(a){a.fireEvent=k.fireEvent},e.Event=function(a,b){this.name=b,this.obj=a,this.listeners=[]},e.Event.prototype={addListener:function(a,b,c){var d,e=this;b=b||e.obj,e.isListening(a,b)||(d=e.createListener(a,b,c),e.firing&&(e.listeners=e.listeners.slice(0)),e.listeners.push(d))},createListener:function(e,f,g){g=g||{},f=f||this.obj;var h={fn:e,scope:f,options:g},i=e;return g.target&&(i=a(i,g,f)),g.delay&&(i=d(i,g,h,f)),g.single&&(i=c(i,this,e,f)),g.buffer&&(i=b(i,g,h,f)),h.fireFn=i,h},findListener:function(a,b){for(var c,d,e=this.listeners,f=e.length;f--;)if(c=e[f],c&&(d=c.scope,c.fn==a&&(d==b||d==this.obj)))return f;return-1},isListening:function(a,b){return-1!=this.findListener(a,b)},removeListener:function(a,b){var c,d,e,f=this,g=j;if(-1!=(c=f.findListener(a,b))){if(f.firing&&(f.listeners=f.listeners.slice(0)),d=f.listeners[c],d.task&&(d.task.cancel(),delete d.task),e=d.tasks&&d.tasks.length){for(;e--;)d.tasks[e].cancel();delete d.tasks}f.listeners.splice(c,1),g=i}return g},clearListeners:function(){for(var a=this,b=a.listeners,c=b.length;c--;)a.removeListener(b[c].fn,b[c].scope)},fire:function(){var a,b=this,c=f(arguments),d=b.listeners,e=d.length,g=0;if(e>0)for(b.firing=i;e>g;g++)if(a=d[g],a&&a.fireFn.apply(a.scope||b.obj||window,c)===j)return b.firing=j;return b.firing=j,i}}}(),Ext.DomHelper=function(){function a(a,c,d,f,g,h){var i=e.insertHtml(f,Ext.getDom(a),b(c));return d?Ext.get(i,!0):i}function b(a){var c,d="";if(Ext.isString(a))d=a;else if(Ext.isArray(a))for(var e=0;e<a.length;e++)a[e]&&(d+=b(a[e]));else d+="<"+(a.tag=a.tag||"div"),Ext.iterate(a,function(a,b){/tag|children|cn|html$/i.test(a)||(Ext.isObject(b)?(d+=" "+a+'="',Ext.iterate(b,function(a,b){d+=a+":"+b+";"}),d+='"'):d+=" "+({cls:"class",htmlFor:"for"}[a]||a)+'="'+b+'"')}),g.test(a.tag)?d+="/>":(d+=">",(c=a.children||a.cn)?d+=b(c):a.html&&(d+=a.html),d+="</"+a.tag+">");return d}function c(a,b,c,d){f.innerHTML=[b,c,d].join("");for(var e,g=-1,h=f;++g<a;)h=h.firstChild;if(e=h.nextSibling){for(var i=document.createDocumentFragment();h;)e=h.nextSibling,i.appendChild(h),h=e;h=i}return h}function d(a,b,d,e){var g,h;return f=f||document.createElement("div"),("td"!=a||b!=i&&b!=l)&&(/td|tr|tbody/i.test(a)||b!=k&&b!=j)?(h=b==k?d:b==j?d.nextSibling:b==i?d.firstChild:null,(b==k||b==j)&&(d=d.parentNode),g="td"==a||"tr"==a&&(b==l||b==i)?c(4,q,e,r):"tbody"==a&&(b==l||b==i)||"tr"==a&&(b==k||b==j)?c(3,o,e,p):c(2,m,e,n),d.insertBefore(g,h),g):void 0}var e,f=null,g=/^(?:br|frame|hr|img|input|link|meta|range|spacer|wbr|area|param|col)$/i,h=/^table|tbody|tr|td$/i,i="afterbegin",j="afterend",k="beforebegin",l="beforeend",m="<table>",n="</table>",o=m+"<tbody>",p="</tbody>"+n,q=o+"<tr>",r="</tr>"+p;return e={markup:function(a){return b(a)},applyStyles:function(a,b){if(b){var c,d=0;if(a=Ext.fly(a),Ext.isFunction(b)&&(b=b.call()),Ext.isString(b))for(b=b.trim().split(/\s*(?::|;)\s*/),c=b.length;c>d;)a.setStyle(b[d++],b[d++]);else Ext.isObject(b)&&a.setStyle(b)}},insertHtml:function(a,b,c){var e,f,g,m,n,o,p={};if(a=a.toLowerCase(),p[k]=["BeforeBegin","previousSibling"],p[j]=["AfterEnd","nextSibling"],!b.insertAdjacentHTML)return g=b.ownerDocument.createRange(),f="setStart"+(/end/i.test(a)?"After":"Before"),p[a]?(g[f](b),m=g.createContextualFragment(c),b.parentNode.insertBefore(m,a==k?b:b.nextSibling),b[(a==k?"previous":"next")+"Sibling"]):(n=(a==i?"first":"last")+"Child",b.firstChild?(g[f](b[n]),m=g.createContextualFragment(c),a==i?b.insertBefore(m,b.firstChild):b.appendChild(m)):b.innerHTML=c,b[n]);if(h.test(b.tagName)&&(o=d(b.tagName.toLowerCase(),a,b,c)))return o;if(p[i]=["AfterBegin","firstChild"],p[l]=["BeforeEnd","lastChild"],e=p[a])return b.insertAdjacentHTML(e[0],c),b[e[1]];throw'Illegal insertion point -> "'+a+'"'},insertBefore:function(b,c,d){return a(b,c,d,k)},insertAfter:function(b,c,d){return a(b,c,d,j,"nextSibling")},insertFirst:function(b,c,d){return a(b,c,d,i,"firstChild")},append:function(b,c,d){return a(b,c,d,l,"",!0)},overwrite:function(a,c,d){return a=Ext.getDom(a),a.innerHTML=b(c),d?Ext.get(a.firstChild):a.firstChild},createHtml:b}}(),Ext.Template=function(a){var b=this,c=arguments,d=[];Ext.isArray(a)?a=a.join(""):c.length>1&&(Ext.each(c,function(a){Ext.isObject(a)?Ext.apply(b,a):d.push(a)}),a=d.join("")),b.html=a,b.compiled&&b.compile()},Ext.Template.prototype={re:/\{([\w-]+)\}/g,applyTemplate:function(a){var b=this;return b.compiled?b.compiled(a):b.html.replace(b.re,function(b,c){return void 0!==a[c]?a[c]:""})},set:function(a,b){var c=this;return c.html=a,c.compiled=null,b?c.compile():c},compile:function(){function fn(a,b){return b="values['"+b+"']","'"+sep+"("+b+" == undefined ? '' : "+b+")"+sep+"'"}var me=this,sep=Ext.isGecko?"+":",";return eval("this.compiled = function(values){ return "+(Ext.isGecko?"'":"['")+me.html.replace(/\\/g,"\\\\").replace(/(\r\n|\n)/g,"\\n").replace(/'/g,"\\'").replace(this.re,fn)+(Ext.isGecko?"';};":"'].join('');};")),me},insertFirst:function(a,b,c){return this.doInsert("afterBegin",a,b,c)},insertBefore:function(a,b,c){return this.doInsert("beforeBegin",a,b,c)},insertAfter:function(a,b,c){return this.doInsert("afterEnd",a,b,c)},append:function(a,b,c){return this.doInsert("beforeEnd",a,b,c)},doInsert:function(a,b,c,d){b=Ext.getDom(b);var e=Ext.DomHelper.insertHtml(a,b,this.applyTemplate(c));return d?Ext.get(e,!0):e},overwrite:function(a,b,c){return a=Ext.getDom(a),a.innerHTML=this.applyTemplate(b),c?Ext.get(a.firstChild,!0):a.firstChild}},Ext.Template.prototype.apply=Ext.Template.prototype.applyTemplate,Ext.Template.from=function(a,b){return a=Ext.getDom(a),new Ext.Template(a.value||a.innerHTML,b||"")},Ext.DomQuery=function(){function child(a,b){for(var c=0,d=a.firstChild;d;){if(1==d.nodeType&&++c==b)return d;d=d.nextSibling}return null}function next(a){for(;(a=a.nextSibling)&&1!=a.nodeType;);return a}function prev(a){for(;(a=a.previousSibling)&&1!=a.nodeType;);return a}function children(a){for(var b,c=a.firstChild,d=-1;c;)b=c.nextSibling,3!=c.nodeType||nonSpace.test(c.nodeValue)?c.nodeIndex=++d:a.removeChild(c),c=b;return this}function byClassName(a,b,c){if(!c)return a;for(var d,e=[],f=-1,g=0;d=a[g];g++)-1!=(" "+d.className+" ").indexOf(c)&&(e[++f]=d);return e}function attrValue(a,b){return a.tagName||"undefined"==typeof a.length||(a=a[0]),a?"for"==b?a.htmlFor:"class"==b||"className"==b?a.className:a.getAttribute(b)||a[b]:null}function getNodes(a,b,c){var d,e=[],f=-1;if(!a)return e;if(c=c||"*","undefined"!=typeof a.getElementsByTagName&&(a=[a]),b){if("/"==b||">"==b)for(var g,h,i=c.toUpperCase(),j=0;g=a[j];j++){h=g.childNodes;for(var k,l=0;k=h[l];l++)(k.nodeName==i||k.nodeName==c||"*"==c)&&(e[++f]=k)}else if("+"==b)for(var m,i=c.toUpperCase(),j=0;m=a[j];j++){for(;(m=m.nextSibling)&&1!=m.nodeType;);!m||m.nodeName!=i&&m.nodeName!=c&&"*"!=c||(e[++f]=m)}else if("~"==b)for(var m,i=c.toUpperCase(),j=0;m=a[j];j++)for(;m=m.nextSibling;)(m.nodeName==i||m.nodeName==c||"*"==c)&&(e[++f]=m)}else for(var g,j=0;g=a[j];j++){d=g.getElementsByTagName(c);for(var n,l=0;n=d[l];l++)e[++f]=n}return e}function concat(a,b){if(b.slice)return a.concat(b);for(var c=0,d=b.length;d>c;c++)a[a.length]=b[c];return a}function byTag(a,b){if((a.tagName||a==document)&&(a=[a]),!b)return a;var c=[],d=-1;b=b.toLowerCase();for(var e,f=0;e=a[f];f++)1==e.nodeType&&e.tagName.toLowerCase()==b&&(c[++d]=e);return c}function byId(a,b,c){if((a.tagName||a==document)&&(a=[a]),!c)return a;for(var d,e=[],f=-1,g=0;d=a[g];g++)if(d&&d.id==c)return e[++f]=d,e;return e}function byAttribute(a,b,c,d,e){for(var f,g,h,i=[],j=-1,k="{"==e,l=Ext.DomQuery.operators[d],m=0;h=a[m];m++)1==h.nodeType&&(g=h.innerHTML,f=null!==g&&void 0!==g?k?Ext.DomQuery.getStyle(h,b):"class"==b||"className"==b?h.className:"for"==b?h.htmlFor:"href"==b?h.getAttribute("href",2):h.getAttribute(b):h.getAttribute(b),(l&&l(f,c)||!l&&f)&&(i[++j]=h));return i}function byPseudo(a,b,c){return Ext.DomQuery.pseudos[b](a,c)}function nodupIEXml(a){var b,c=++key;a[0].setAttribute("_nodup",c),b=[a[0]];for(var d=1,e=a.length;e>d;d++){var f=a[d];!f.getAttribute("_nodup")!=c&&(f.setAttribute("_nodup",c),b[b.length]=f)}for(var d=0,e=a.length;e>d;d++)a[d].removeAttribute("_nodup");return b}function nodup(a){if(!a)return[];var b,c,d,e=a.length,f=a,g=-1;if(!e||"undefined"!=typeof a.nodeType||1==e)return a;if(isIE&&"undefined"!=typeof a[0].selectSingleNode)return nodupIEXml(a);var h=++key;for(a[0]._nodup=h,c=1;b=a[c];c++){if(b._nodup==h){f=[];for(var i=0;c>i;i++)f[++g]=a[i];for(i=c+1;d=a[i];i++)d._nodup!=h&&(d._nodup=h,f[++g]=d);return f}b._nodup=h}return f}function quickDiffIEXml(a,b){for(var c=++key,d=[],e=0,f=a.length;f>e;e++)a[e].setAttribute("_qdiff",c);for(var e=0,f=b.length;f>e;e++)b[e].getAttribute("_qdiff")!=c&&(d[d.length]=b[e]);for(var e=0,f=a.length;f>e;e++)a[e].removeAttribute("_qdiff");return d}function quickDiff(a,b){var c=a.length,d=++key,e=[];if(!c)return b;if(isIE&&"undefined"!=typeof a[0].selectSingleNode)return quickDiffIEXml(a,b);for(var f=0;c>f;f++)a[f]._qdiff=d;for(var f=0,g=b.length;g>f;f++)b[f]._qdiff!=d&&(e[e.length]=b[f]);return e}function quickId(a,b,c,d){if(a==c){var e=c.ownerDocument||c;return e.getElementById(d)}return a=getNodes(a,b,"*"),byId(a,null,d)}var cache={},simpleCache={},valueCache={},nonSpace=/\S/,trimRe=/^\s+|\s+$/g,tplRe=/\{(\d+)\}/g,modeRe=/^(\s?[\/>+~]\s?|\s|$)/,tagTokenRe=/^(#)?([\w-\*]+)/,nthRe=/(\d*)n\+?(\d*)/,nthRe2=/\D/,isIE=window.ActiveXObject?!0:!1,key=30803;return eval("var batch = 30803;"),{getStyle:function(a,b){return Ext.fly(a).getStyle(b)},compile:function(path,type){type=type||"select";var fn=["var f = function(root){\n var mode; ++batch; var n = root || document;\n"],q=path,mode,lq,tk=Ext.DomQuery.matchers,tklen=tk.length,mm,lmode=q.match(modeRe);for(lmode&&lmode[1]&&(fn[fn.length]='mode="'+lmode[1].replace(trimRe,"")+'";',q=q.replace(lmode[1],""));"/"==path.substr(0,1);)path=path.substr(1);for(;q&&lq!=q;){lq=q;var tm=q.match(tagTokenRe);for("select"==type?tm?("#"==tm[1]?fn[fn.length]='n = quickId(n, mode, root, "'+tm[2]+'");':fn[fn.length]='n = getNodes(n, mode, "'+tm[2]+'");',q=q.replace(tm[0],"")):"@"!=q.substr(0,1)&&(fn[fn.length]='n = getNodes(n, mode, "*");'):tm&&("#"==tm[1]?fn[fn.length]='n = byId(n, null, "'+tm[2]+'");':fn[fn.length]='n = byTag(n, "'+tm[2]+'");',q=q.replace(tm[0],""));!(mm=q.match(modeRe));){for(var matched=!1,j=0;tklen>j;j++){var t=tk[j],m=q.match(t.re);if(m){fn[fn.length]=t.select.replace(tplRe,function(a,b){return m[b]}),q=q.replace(m[0],""),matched=!0;break}}if(!matched)throw'Error parsing selector, parsing failed at "'+q+'"'}mm[1]&&(fn[fn.length]='mode="'+mm[1].replace(trimRe,"")+'";',q=q.replace(mm[1],""))}return fn[fn.length]="return nodup(n);\n}",eval(fn.join("")),f},select:function(a,b,c){b&&b!=document||(b=document),"string"==typeof b&&(b=document.getElementById(b));for(var d=a.split(","),e=[],f=0,g=d.length;g>f;f++){var h=d[f].replace(trimRe,"");if(!cache[h]&&(cache[h]=Ext.DomQuery.compile(h),!cache[h]))throw h+" is not a valid selector";var i=cache[h](b);i&&i!=document&&(e=e.concat(i))}return d.length>1?nodup(e):e},selectNode:function(a,b){return Ext.DomQuery.select(a,b)[0]},selectValue:function(a,b,c){a=a.replace(trimRe,""),valueCache[a]||(valueCache[a]=Ext.DomQuery.compile(a,"select"));var d,e=valueCache[a](b);return e=e[0]?e[0]:e,"function"==typeof e.normalize&&e.normalize(),d=e&&e.firstChild?e.firstChild.nodeValue:null,null===d||void 0===d||""===d?c:d},selectNumber:function(a,b,c){var d=Ext.DomQuery.selectValue(a,b,c||0);return parseFloat(d)},is:function(a,b){"string"==typeof a&&(a=document.getElementById(a));var c=Ext.isArray(a),d=Ext.DomQuery.filter(c?a:[a],b);return c?d.length==a.length:d.length>0},filter:function(a,b,c){b=b.replace(trimRe,""),simpleCache[b]||(simpleCache[b]=Ext.DomQuery.compile(b,"simple"));var d=simpleCache[b](a);return c?quickDiff(d,a):d},matchers:[{re:/^\.([\w-]+)/,select:'n = byClassName(n, null, " {1} ");'},{re:/^\:([\w-]+)(?:\(((?:[^\s>\/]*|.*?))\))?/,select:'n = byPseudo(n, "{1}", "{2}");'},{re:/^(?:([\[\{])(?:@)?([\w-]+)\s?(?:(=|.=)\s?['"]?(.*?)["']?)?[\]\}])/,select:'n = byAttribute(n, "{2}", "{4}", "{3}", "{1}");'},{re:/^#([\w-]+)/,select:'n = byId(n, null, "{1}");'},{re:/^@([\w-]+)/,select:'return {firstChild:{nodeValue:attrValue(n, "{1}")}};'}],operators:{"=":function(a,b){return a==b},"!=":function(a,b){return a!=b},"^=":function(a,b){return a&&a.substr(0,b.length)==b},"$=":function(a,b){return a&&a.substr(a.length-b.length)==b},"*=":function(a,b){return a&&-1!==a.indexOf(b)},"%=":function(a,b){return a%b==0},"|=":function(a,b){return a&&(a==b||a.substr(0,b.length+1)==b+"-")},"~=":function(a,b){return a&&-1!=(" "+a+" ").indexOf(" "+b+" ")}},pseudos:{"first-child":function(a){for(var b,c,d=[],e=-1,f=0;c=b=a[f];f++){for(;(b=b.previousSibling)&&1!=b.nodeType;);b||(d[++e]=c)}return d},"last-child":function(a){for(var b,c,d=[],e=-1,f=0;c=b=a[f];f++){for(;(b=b.nextSibling)&&1!=b.nodeType;);b||(d[++e]=c)}return d},"nth-child":function(a,b){for(var c,d=[],e=-1,f=nthRe.exec("even"==b&&"2n"||"odd"==b&&"2n+1"||!nthRe2.test(b)&&"n+"+b||b),g=(f[1]||1)-0,h=f[2]-0,i=0;c=a[i];i++){var j=c.parentNode;if(batch!=j._batch){for(var k=0,l=j.firstChild;l;l=l.nextSibling)1==l.nodeType&&(l.nodeIndex=++k);j._batch=batch}1==g?(0==h||c.nodeIndex==h)&&(d[++e]=c):(c.nodeIndex+h)%g==0&&(d[++e]=c)}return d},"only-child":function(a){for(var b,c=[],d=-1,e=0;b=a[e];e++)prev(b)||next(b)||(c[++d]=b);return c},empty:function(a){for(var b,c=[],d=-1,e=0;b=a[e];e++){for(var f,g=b.childNodes,h=0,i=!0;f=g[h];)if(++h,1==f.nodeType||3==f.nodeType){i=!1;break}i&&(c[++d]=b)}return c},contains:function(a,b){for(var c,d=[],e=-1,f=0;c=a[f];f++)-1!=(c.textContent||c.innerText||"").indexOf(b)&&(d[++e]=c);return d},nodeValue:function(a,b){for(var c,d=[],e=-1,f=0;c=a[f];f++)c.firstChild&&c.firstChild.nodeValue==b&&(d[++e]=c);return d},checked:function(a){for(var b,c=[],d=-1,e=0;b=a[e];e++)1==b.checked&&(c[++d]=b);return c},not:function(a,b){return Ext.DomQuery.filter(a,b,!0)},any:function(a,b){for(var c,d,e=b.split("|"),f=[],g=-1,h=0;d=a[h];h++)for(var i=0;c=e[i];i++)if(Ext.DomQuery.is(d,c)){f[++g]=d;break}return f},odd:function(a){return this["nth-child"](a,"odd")},even:function(a){return this["nth-child"](a,"even")},nth:function(a,b){return a[b-1]||[]},first:function(a){return a[0]||[]},last:function(a){return a[a.length-1]||[]},has:function(a,b){for(var c,d=Ext.DomQuery.select,e=[],f=-1,g=0;c=a[g];g++)d(b,c).length>0&&(e[++f]=c);return e},next:function(a,b){for(var c,d=Ext.DomQuery.is,e=[],f=-1,g=0;c=a[g];g++){var h=next(c);h&&d(h,b)&&(e[++f]=c)}return e},prev:function(a,b){for(var c,d=Ext.DomQuery.is,e=[],f=-1,g=0;c=a[g];g++){var h=prev(c);h&&d(h,b)&&(e[++f]=c)}return e}}}}(),Ext.query=Ext.DomQuery.select,Ext.EventManager=function(){function a(a){var b,c=!1,d=0,e=s.length,c=!1,f=!1;if(a){if(a.getElementById||a.navigator){for(;e>d;++d)if(b=s[d],b.el===a){c=b.id;break}c||(c=Ext.id(a),s.push({id:c,el:a}),f=!0)}else c=Ext.id(a);Ext.elCache[c]||(Ext.Element.addToCache(new Ext.Element(a),c),f&&(Ext.elCache[c].skipGC=!0))}return c}function b(b,c,d,e,f,g){b=Ext.getDom(b);var h,i=a(b),j=Ext.elCache[i].events;if(h=m.on(b,c,f),j[c]=j[c]||[],j[c].push([d,f,g,h,e]),"mousewheel"==c&&b.addEventListener){var k=["DOMMouseScroll",f,!1];b.addEventListener.apply(b,k),Ext.EventManager.addListener(o,"unload",function(){b.removeEventListener.apply(b,k)})}"mousedown"==c&&b==document&&Ext.EventManager.stoppedMouseDownEvent.addListener(f)}function c(){if(!l){if(Ext.isReady=l=!0,k&&clearInterval(k),(Ext.isGecko||Ext.isOpera)&&n.removeEventListener(q,c,!1),Ext.isIE){var a=n.getElementById(p);a&&(a.onreadystatechange=null,a.parentNode.removeChild(a))}j&&(j.fire(),j.listeners=[])}}function d(){var a="complete";if(j=new Ext.util.Event,Ext.isGecko||Ext.isOpera)n.addEventListener(q,c,!1);else if(Ext.isIE){var b=n.createElement("script");b.setAttribute("defer","defer"),b.setAttribute("src","//:"),n.getElementsByTagName("head")[0].appendChild(b),b.onreadystatechange=function(){this.readyState==a&&c()}}else Ext.isWebKit&&(k=setInterval(function(){n.readyState==a&&c()},10));m.on(o,"load",c)}function e(a,b){return function(){var c=Ext.toArray(arguments);b.target==Ext.EventObject.setEvent(c[0]).target&&a.apply(this,c)}}function f(a,b,c){return function(d){c.delay(b.buffer,a,null,[new Ext.EventObjectImpl(d)])}}function g(a,b,c,d,e){return function(f){Ext.EventManager.removeListener(b,c,d,e),a(f)}}function h(a,b,c){return function(d){var e=new Ext.util.DelayedTask(a);c.tasks||(c.tasks=[]),c.tasks.push(e),e.delay(b.delay||10,a,null,[new Ext.EventObjectImpl(d)])}}function i(a,c,d,i,j){function k(a){if(Ext){a=Ext.EventObject.setEvent(a);var b;if(m.delegate){if(!(b=a.getTarget(m.delegate,n)))return}else b=a.target;m.stopEvent&&a.stopEvent(),m.preventDefault&&a.preventDefault(),m.stopPropagation&&a.stopPropagation(),m.normalized&&(a=a.browserEvent),i.call(j||n,a,b,m)}}var l,m=Ext.isObject(d)?d:{},n=Ext.getDom(a);if(i=i||m.fn,j=j||m.scope,!n)throw'Error listening for "'+c+'". Element "'+a+"\" doesn't exist.";return m.target&&(k=e(k,m)),m.delay&&(k=h(k,m,i)),m.single&&(k=g(k,n,c,i,j)),m.buffer&&(l=new Ext.util.DelayedTask(k),k=f(k,m,l)),b(n,c,i,l,k,j),k}var j,k,l=!1,m=Ext.lib.Event,n=(Ext.lib.Dom,document),o=window,p="ie-deferred-loader",q="DOMContentLoaded",r=/^(?:scope|delay|buffer|single|stopEvent|preventDefault|stopPropagation|normalized|args|delegate)$/,s=[],t={addListener:function(a,b,c,d,e){if(Ext.isObject(b)){var f,g,h=b;for(f in h)g=h[f],r.test(f)||(Ext.isFunction(g)?i(a,f,h,g,h.scope):i(a,f,g))}else i(a,b,e,c,d)},removeListener:function(b,c,d,e){b=Ext.getDom(b);var f,g,h,i,j,k,l=a(b),o=b&&Ext.elCache[l].events[c]||[];for(g=0,j=o.length;j>g;g++)if(Ext.isArray(k=o[g])&&k[0]==d&&(!e||k[2]==e)){if(k[4]&&k[4].cancel(),h=d.tasks&&d.tasks.length){for(;h--;)d.tasks[h].cancel();delete d.tasks}i=f=k[1],m.extAdapter&&(i=k[3]),m.un(b,c,i),o.splice(g,1),0===o.length&&delete Ext.elCache[l].events[c];for(h in Ext.elCache[l].events)return!1;return Ext.elCache[l].events={},!1}"mousewheel"==c&&b.addEventListener&&f&&b.removeEventListener("DOMMouseScroll",f,!1),"mousedown"==c&&b==n&&f&&Ext.EventManager.stoppedMouseDownEvent.removeListener(f)},removeAll:function(b){b=Ext.getDom(b);var c,d,e,f,g,h,i=a(b),j=Ext.elCache[i]||{},k=j.events||{};for(f in k)if(k.hasOwnProperty(f))for(c=k[f],d=0,e=c.length;e>d;d++){if(g=c[d],g[4]&&g[4].cancel(),g[0].tasks&&(h=g[0].tasks.length)){for(;h--;)g[0].tasks[h].cancel();delete g.tasks}m.un(b,f,m.extAdapter?g[3]:g[1])}Ext.elCache[i]&&(Ext.elCache[i].events={})},getListeners:function(b,c){b=Ext.getDom(b);var d=a(b),e=Ext.elCache[d]||{},f=e.events||{};return f&&f[c]?f[c]:null},purgeElement:function(b,c,d){b=Ext.getDom(b);var e,f,g,h=a(b),i=Ext.elCache[h]||{},j=i.events||{};if(d){if(j&&j.hasOwnProperty(d))for(f=j[d],e=0,g=f.length;g>e;e++)Ext.EventManager.removeListener(b,d,f[e][0])}else Ext.EventManager.removeAll(b);if(c&&b&&b.childNodes)for(e=0,g=b.childNodes.length;g>e;e++)Ext.EventManager.purgeElement(b.childNodes[e],c,d)},_unload:function(){var a;for(a in Ext.elCache)Ext.EventManager.removeAll(a)},onDocumentReady:function(a,b,c){l?(j.addListener(a,b,c),j.fire(),j.listeners=[]):(j||d(),c=c||{},c.delay=c.delay||1,j.addListener(a,b,c))}};return t.on=t.addListener,t.un=t.removeListener,t.stoppedMouseDownEvent=new Ext.util.Event,t}(),Ext.onReady=Ext.EventManager.onDocumentReady,function(){var a=function(){var a=document.body||document.getElementsByTagName("body")[0];if(!a)return!1;var b=[" ",Ext.isIE?"ext-ie "+(Ext.isIE6?"ext-ie6":Ext.isIE7?"ext-ie7":"ext-ie8"):Ext.isGecko?"ext-gecko "+(Ext.isGecko2?"ext-gecko2":"ext-gecko3"):Ext.isOpera?"ext-opera":Ext.isWebKit?"ext-webkit":""];if(Ext.isSafari?b.push("ext-safari "+(Ext.isSafari2?"ext-safari2":Ext.isSafari3?"ext-safari3":"ext-safari4")):Ext.isChrome&&b.push("ext-chrome"),Ext.isMac&&b.push("ext-mac"),Ext.isLinux&&b.push("ext-linux"),Ext.isStrict||Ext.isBorderBox){var c=a.parentNode;c&&(c.className+=Ext.isStrict?" ext-strict":" ext-border-box")}return a.className+=b.join(" "),!0};a()||Ext.onReady(a)}(),Ext.EventObject=function(){var a=Ext.lib.Event,b={3:13,63234:37,63235:39,63232:38,63233:40,63276:33,63277:34,63272:46,63273:36,63275:35},c=Ext.isIE?{1:0,4:1,2:2}:Ext.isWebKit?{1:0,2:1,3:2}:{0:0,1:1,2:2};return Ext.EventObjectImpl=function(a){a&&this.setEvent(a.browserEvent||a)},Ext.EventObjectImpl.prototype={setEvent:function(b){var d=this;return b==d||b&&b.browserEvent?b:(d.browserEvent=b,b?(d.button=b.button?c[b.button]:b.which?b.which-1:-1,"click"==b.type&&-1==d.button&&(d.button=0),d.type=b.type,d.shiftKey=b.shiftKey,d.ctrlKey=b.ctrlKey||b.metaKey||!1,d.altKey=b.altKey,d.keyCode=b.keyCode,d.charCode=b.charCode,d.target=a.getTarget(b),d.xy=a.getXY(b)):(d.button=-1,d.shiftKey=!1,d.ctrlKey=!1,d.altKey=!1,d.keyCode=0,d.charCode=0,d.target=null,d.xy=[0,0]),d)},stopEvent:function(){var b=this;b.browserEvent&&("mousedown"==b.browserEvent.type&&Ext.EventManager.stoppedMouseDownEvent.fire(b),a.stopEvent(b.browserEvent))},preventDefault:function(){this.browserEvent&&a.preventDefault(this.browserEvent)},stopPropagation:function(){var b=this;b.browserEvent&&("mousedown"==b.browserEvent.type&&Ext.EventManager.stoppedMouseDownEvent.fire(b),a.stopPropagation(b.browserEvent))},getCharCode:function(){return this.charCode||this.keyCode},getKey:function(){return this.normalizeKey(this.keyCode||this.charCode)},normalizeKey:function(a){return Ext.isSafari?b[a]||a:a},getPageX:function(){return this.xy[0]},getPageY:function(){return this.xy[1]},getXY:function(){return this.xy},getTarget:function(a,b,c){return a?Ext.fly(this.target).findParent(a,b,c):c?Ext.get(this.target):this.target},getRelatedTarget:function(){return this.browserEvent?a.getRelatedTarget(this.browserEvent):null},getWheelDelta:function(){var a=this.browserEvent,b=0;return a.wheelDelta?b=a.wheelDelta/120:a.detail&&(b=-a.detail/3),b},within:function(a,b,c){if(a){var d=this[b?"getRelatedTarget":"getTarget"]();return d&&((c?d==Ext.getDom(a):!1)||Ext.fly(a).contains(d))}return!1}},new Ext.EventObjectImpl}(),function(){function a(){if(Ext.enableGarbageCollector){var a,c,f,g;for(a in e)g=e[a],g.skipGC||(c=g.el,f=c.dom,f&&f.parentNode&&(f.offsetParent||b.getElementById(a))||(Ext.enableListenerCollection&&Ext.EventManager.removeAll(f),delete e[a]));if(Ext.isIE){var h={};for(a in e)h[a]=e[a];e=Ext.elCache=h}}else clearInterval(d.collectorThreadId)}var b=document;Ext.Element=function(a,c){var d,e="string"==typeof a?b.getElementById(a):a;return e?(d=e.id,!c&&d&&Ext.elCache[d]?Ext.elCache[d].el:(this.dom=e,void(this.id=d||Ext.id(e)))):null};var c=(Ext.lib.Dom,Ext.DomHelper),d=(Ext.lib.Event,Ext.lib.Anim,Ext.Element),e=Ext.elCache;d.prototype={set:function(a,b){var d,e,f=this.dom,b=b!==!1&&!!f.setAttribute;for(d in a)a.hasOwnProperty(d)&&(e=a[d],"style"==d?c.applyStyles(f,e):"cls"==d?f.className=e:b?f.setAttribute(d,e):f[d]=e);return this},defaultUnit:"px",is:function(a){return Ext.DomQuery.is(this.dom,a)},focus:function(a,b){var c=this,b=b||c.dom;try{Number(a)?c.focus.defer(a,null,[null,b]):b.focus()}catch(d){}return c},blur:function(){try{this.dom.blur()}catch(a){}return this},getValue:function(a){var b=this.dom.value;return a?parseInt(b,10):b},addListener:function(a,b,c,d){return Ext.EventManager.on(this.dom,a,b,c||this,d),this},removeListener:function(a,b,c){return Ext.EventManager.removeListener(this.dom,a,b,c||this),this},removeAllListeners:function(){return Ext.EventManager.removeAll(this.dom),this},purgeAllListeners:function(){return Ext.EventManager.purgeElement(this,!0),this},addUnits:function(a){return""===a||"auto"==a||void 0===a?a=a||"":isNaN(a)&&h.test(a)||(a+=this.defaultUnit||"px"),a},load:function(a,b,c){return Ext.Ajax.request(Ext.apply({params:b,url:a.url||a,callback:c,el:this.dom,indicatorText:a.indicatorText||""},Ext.isObject(a)?a:{})),this},isBorderBox:function(){return j[(this.dom.tagName||"").toLowerCase()]||Ext.isBorderBox},remove:function(){var a=this,b=a.dom;b&&(delete a.dom,Ext.removeNode(b))},hover:function(a,b,c,d){var e=this;return e.on("mouseenter",a,c||e.dom,d),e.on("mouseleave",b,c||e.dom,d),e},contains:function(a){return a?Ext.lib.Dom.isAncestor(this.dom,a.dom?a.dom:a):!1},getAttributeNS:function(a,b){return this.getAttribute(b,a)},getAttribute:Ext.isIE?function(a,b){var c=this.dom,d=typeof c[b+":"+a];return-1==["undefined","unknown"].indexOf(d)?c[b+":"+a]:c[a]}:function(a,b){var c=this.dom;return c.getAttributeNS(b,a)||c.getAttribute(b+":"+a)||c.getAttribute(a)||c[a]},update:function(a){return this.dom&&(this.dom.innerHTML=a),this}};var f=d.prototype;d.addMethods=function(a){Ext.apply(f,a)},f.on=f.addListener,f.un=f.removeListener,f.autoBoxAdjust=!0;var g,h=/\d+(px|em|%|en|ex|pt|in|cm|mm|pc)$/i;d.get=function(a){var c,f,h;if(!a)return null;if("string"==typeof a)return(f=b.getElementById(a))?(e[a]&&e[a].el?(c=e[a].el,c.dom=f):c=d.addToCache(new d(f)),c):null;if(a.tagName)return(h=a.id)||(h=Ext.id(a)),e[h]&&e[h].el?(c=e[h].el,c.dom=a):c=d.addToCache(new d(a)),c;if(a instanceof d)return a!=g&&(a.dom=b.getElementById(a.id)||a.dom),a;if(a.isComposite)return a;if(Ext.isArray(a))return d.select(a);if(a==b){if(!g){var i=function(){};i.prototype=d.prototype,g=new i,g.dom=b}return g}return null},d.addToCache=function(a,b){return b=b||a.id,e[b]={el:a,data:{},events:{}},a},d.data=function(a,b,c){if(a=d.get(a),!a)return null;var f=e[a.id].data;return 2==arguments.length?f[b]:f[b]=c},d.collectorThreadId=setInterval(a,3e4);var i=function(){};i.prototype=d.prototype,d.Flyweight=function(a){this.dom=a},d.Flyweight.prototype=new i,d.Flyweight.prototype.isFlyweight=!0,d._flyweights={},d.fly=function(a,b){var c=null;return b=b||"_global",(a=Ext.getDom(a))&&((d._flyweights[b]=d._flyweights[b]||new d.Flyweight).dom=a,c=d._flyweights[b]),c},Ext.get=d.get,Ext.fly=d.fly;var j=Ext.isStrict?{select:1}:{input:1,select:1,textarea:1};(Ext.isIE||Ext.isGecko)&&(j.button=1),Ext.EventManager.on(window,"unload",function(){delete e,delete d._flyweights})}(),Ext.Element.addMethods(function(){var a="parentNode",b="nextSibling",c="previousSibling",d=Ext.DomQuery,e=Ext.get;return{findParent:function(a,b,c){var f,g=this.dom,h=document.body,i=0;if(Ext.isGecko&&"[object XULElement]"==Object.prototype.toString.call(g))return null;for(b=b||50,isNaN(b)&&(f=Ext.getDom(b),b=Number.MAX_VALUE);g&&1==g.nodeType&&b>i&&g!=h&&g!=f;){if(d.is(g,a))return c?e(g):g;i++,g=g.parentNode}return null},findParentNode:function(a,b,c){var d=Ext.fly(this.dom.parentNode,"_internal");return d?d.findParent(a,b,c):null},up:function(a,b){return this.findParentNode(a,b,!0)},select:function(a){return Ext.Element.select(a,this.dom)},query:function(a){return d.select(a,this.dom)},child:function(a,b){var c=d.selectNode(a,this.dom);return b?c:e(c)},down:function(a,b){var c=d.selectNode(" > "+a,this.dom);return b?c:e(c)},parent:function(b,c){return this.matchNode(a,a,b,c)},next:function(a,c){return this.matchNode(b,b,a,c)},prev:function(a,b){return this.matchNode(c,c,a,b)},first:function(a,c){return this.matchNode(b,"firstChild",a,c)},last:function(a,b){return this.matchNode(c,"lastChild",a,b)},matchNode:function(a,b,c,f){for(var g=this.dom[b];g;){if(1==g.nodeType&&(!c||d.is(g,c)))return f?g:e(g);g=g[a]}return null}}}()),Ext.Element.addMethods(function(){var a=Ext.getDom,b=Ext.get,c=Ext.DomHelper;return{appendChild:function(a){return b(a).appendTo(this)},appendTo:function(b){return a(b).appendChild(this.dom),this},insertBefore:function(b){return(b=a(b)).parentNode.insertBefore(this.dom,b),this},insertAfter:function(b){return(b=a(b)).parentNode.insertBefore(this.dom,b.nextSibling),this},insertFirst:function(c,d){return c=c||{},c.nodeType||c.dom||"string"==typeof c?(c=a(c),this.dom.insertBefore(c,this.dom.firstChild),d?c:b(c)):this.createChild(c,this.dom.firstChild,d)},replace:function(a){return a=b(a),this.insertBefore(a),a.remove(),this},replaceWith:function(b){var d=this;return b.nodeType||b.dom||"string"==typeof b?(b=a(b),d.dom.parentNode.insertBefore(b,d.dom)):b=c.insertBefore(d.dom,b),delete Ext.elCache[d.id],Ext.removeNode(d.dom),d.id=Ext.id(d.dom=b),Ext.Element.addToCache(d.isFlyweight?new Ext.Element(d.dom):d),d},createChild:function(a,b,d){return a=a||{tag:"div"},b?c.insertBefore(b,a,d!==!0):c[this.dom.firstChild?"append":"overwrite"](this.dom,a,d!==!0)},wrap:function(a,b){
var d=c.insertBefore(this.dom,a||{tag:"div"},!b);return d.dom?d.dom.appendChild(this.dom):d.appendChild(this.dom),d},insertHtml:function(a,b,d){var e=c.insertHtml(a,this.dom,b);return d?Ext.get(e):e}}}()),Ext.Element.addMethods(function(){function a(a,b){return b.charAt(1).toUpperCase()}function b(b){return c[b]||(c[b]="float"==b?g:b.replace(d,a))}var c={},d=/(-[a-z])/gi,e={},f=document.defaultView,g=Ext.isIE?"styleFloat":"cssFloat",h=/alpha\(opacity=(.*)\)/i,i=/^\s+|\s+$/g,j=(Ext.Element,"padding"),k="margin",l="border",m="-left",n="-right",o="-top",p="-bottom",q="-width",r=Math,s="hidden",t="isClipped",u="overflow",v="overflow-x",w="overflow-y",x="originalClip",y={l:l+m+q,r:l+n+q,t:l+o+q,b:l+p+q},z={l:j+m,r:j+n,t:j+o,b:j+p},A={l:k+m,r:k+n,t:k+o,b:k+p},B=Ext.Element.data;return{adjustWidth:function(a){var b=this,c=Ext.isNumber(a);return c&&b.autoBoxAdjust&&!b.isBorderBox()&&(a-=b.getBorderWidth("lr")+b.getPadding("lr")),c&&0>a?0:a},adjustHeight:function(a){var b=this,c=Ext.isNumber(a);return c&&b.autoBoxAdjust&&!b.isBorderBox()&&(a-=b.getBorderWidth("tb")+b.getPadding("tb")),c&&0>a?0:a},addClass:function(a){var b,c,d,e=this;for(a=Ext.isArray(a)?a:[a],b=0,c=a.length;c>b;b++)d=a[b],d&&(e.dom.className+=!e.hasClass(d)&&d?" "+d:"");return e},radioClass:function(a){var b,c=this.dom.parentNode.childNodes;a=Ext.isArray(a)?a:[a];for(var d=0,e=c.length;e>d;d++)b=c[d],b&&1==b.nodeType&&Ext.fly(b,"_internal").removeClass(a);return this.addClass(a)},removeClass:function(a){var b,c=this;if(a=Ext.isArray(a)?a:[a],c.dom&&c.dom.className)for(var d=0,f=a.length;f>d;d++)b=a[d],b&&(c.dom.className=c.dom.className.replace(e[b]=e[b]||new RegExp("(?:^|\\s+)"+b+"(?:\\s+|$)","g")," "));return c},toggleClass:function(a){return this.hasClass(a)?this.removeClass(a):this.addClass(a)},hasClass:function(a){return a&&-1!=(" "+this.dom.className+" ").indexOf(" "+a+" ")},replaceClass:function(a,b){return this.removeClass(a).addClass(b)},isStyle:function(a,b){return this.getStyle(a)==b},getStyle:function(){return f&&f.getComputedStyle?function(a){var c,d,e,g,g,h=this.dom,i=Ext.isWebKit;return h==document?null:(a=b(a),i&&/marginRight/.test(a)&&(g=this.getStyle("display"),h.style.display="inline-block"),e=(c=h.style[a])?c:(d=f.getComputedStyle(h,""))?d[a]:null,i&&("rgba(0, 0, 0, 0)"==e?e="transparent":g&&(h.style.display=g)),e)}:function(a){var c,d,e=this.dom;if(e==document)return null;if("opacity"==a){if(e.style.filter.match&&(c=e.style.filter.match(h))){var f=parseFloat(c[1]);if(!isNaN(f))return f?f/100:0}return 1}return a=b(a),e.style[a]||((d=e.currentStyle)?d[a]:null)}}(),getColor:function(a,b,c){var d,e=this.getStyle(a),f=Ext.isDefined(c)?c:"#";return!e||/transparent|inherit/.test(e)?b:(/^r/.test(e)?Ext.each(e.slice(4,e.length-1).split(","),function(a){d=parseInt(a,10),f+=(16>d?"0":"")+d.toString(16)}):(e=e.replace("#",""),f+=3==e.length?e.replace(/^(\w)(\w)(\w)$/,"$1$1$2$2$3$3"):e),f.length>5?f.toLowerCase():b)},setStyle:function(a,c){var d,e;Ext.isObject(a)||(d={},d[a]=c,a=d);for(e in a)c=a[e],"opacity"==e?this.setOpacity(c):this.dom.style[b(e)]=c;return this},setOpacity:function(a,b){var c=this,d=c.dom.style;if(b&&c.anim)c.anim({opacity:{to:a}},c.preanim(arguments,1),null,.35,"easeIn");else if(Ext.isIE){var e=1>a?"alpha(opacity="+100*a+")":"",f=d.filter.replace(h,"").replace(i,"");d.zoom=1,d.filter=f+(f.length>0?" ":"")+e}else d.opacity=a;return c},clearOpacity:function(){var a=this.dom.style;return Ext.isIE?Ext.isEmpty(a.filter)||(a.filter=a.filter.replace(h,"").replace(i,"")):a.opacity=a["-moz-opacity"]=a["-khtml-opacity"]="",this},getHeight:function(a){var b=this,c=b.dom,d=Ext.isIE&&b.isStyle("display","none"),e=r.max(c.offsetHeight,d?0:c.clientHeight)||0;return e=a?e-b.getBorderWidth("tb")-b.getPadding("tb"):e,0>e?0:e},getWidth:function(a){var b=this,c=b.dom,d=Ext.isIE&&b.isStyle("display","none"),e=r.max(c.offsetWidth,d?0:c.clientWidth)||0;return e=a?e-b.getBorderWidth("lr")-b.getPadding("lr"):e,0>e?0:e},setWidth:function(a,b){var c=this;return a=c.adjustWidth(a),b&&c.anim?c.anim({width:{to:a}},c.preanim(arguments,1)):c.dom.style.width=c.addUnits(a),c},setHeight:function(a,b){var c=this;return a=c.adjustHeight(a),b&&c.anim?c.anim({height:{to:a}},c.preanim(arguments,1)):c.dom.style.height=c.addUnits(a),c},getBorderWidth:function(a){return this.addStyles(a,y)},getPadding:function(a){return this.addStyles(a,z)},clip:function(){var a=this,b=a.dom;return B(b,t)||(B(b,t,!0),B(b,x,{o:a.getStyle(u),x:a.getStyle(v),y:a.getStyle(w)}),a.setStyle(u,s),a.setStyle(v,s),a.setStyle(w,s)),a},unclip:function(){var a=this,b=a.dom;if(B(b,t)){B(b,t,!1);var c=B(b,x);c.o&&a.setStyle(u,c.o),c.x&&a.setStyle(v,c.x),c.y&&a.setStyle(w,c.y)}return a},addStyles:function(a,b){for(var c,d=0,e=a.match(/\w/g),f=0,g=e.length;g>f;f++)c=e[f]&&parseInt(this.getStyle(b[e[f]]),10),c&&(d+=r.abs(c));return d},margins:A}}()),function(){var a=Ext.lib.Dom,b="left",c="right",d="top",e="bottom",f="position",g="static",h="relative",i="auto",j="z-index";Ext.Element.addMethods({getX:function(){return a.getX(this.dom)},getY:function(){return a.getY(this.dom)},getXY:function(){return a.getXY(this.dom)},getOffsetsTo:function(a){var b=this.getXY(),c=Ext.fly(a,"_internal").getXY();return[b[0]-c[0],b[1]-c[1]]},setX:function(a,b){return this.setXY([a,this.getY()],this.animTest(arguments,b,1))},setY:function(a,b){return this.setXY([this.getX(),a],this.animTest(arguments,b,1))},setLeft:function(a){return this.setStyle(b,this.addUnits(a)),this},setTop:function(a){return this.setStyle(d,this.addUnits(a)),this},setRight:function(a){return this.setStyle(c,this.addUnits(a)),this},setBottom:function(a){return this.setStyle(e,this.addUnits(a)),this},setXY:function(b,c){var d=this;return c&&d.anim?d.anim({points:{to:b}},d.preanim(arguments,1),"motion"):a.setXY(d.dom,b),d},setLocation:function(a,b,c){return this.setXY([a,b],this.animTest(arguments,c,2))},moveTo:function(a,b,c){return this.setXY([a,b],this.animTest(arguments,c,2))},getLeft:function(a){return a?parseInt(this.getStyle(b),10)||0:this.getX()},getRight:function(a){var b=this;return a?b.getLeft(!0)+b.getWidth()||0:b.getX()+b.getWidth()},getTop:function(a){return a?parseInt(this.getStyle(d),10)||0:this.getY()},getBottom:function(a){var b=this;return a?b.getTop(!0)+b.getHeight()||0:b.getY()+b.getHeight()},position:function(a,b,c,d){var e=this;!a&&e.isStyle(f,g)?e.setStyle(f,h):a&&e.setStyle(f,a),b&&e.setStyle(j,b),(c||d)&&e.setXY([c||!1,d||!1])},clearPositioning:function(a){return a=a||"",this.setStyle({left:a,right:a,top:a,bottom:a,"z-index":"",position:g}),this},getPositioning:function(){var a=this.getStyle(b),g=this.getStyle(d);return{position:this.getStyle(f),left:a,right:a?"":this.getStyle(c),top:g,bottom:g?"":this.getStyle(e),"z-index":this.getStyle(j)}},setPositioning:function(a){var b=this,c=b.dom.style;return b.setStyle(a),a.right==i&&(c.right=""),a.bottom==i&&(c.bottom=""),b},translatePoints:function(a,c){c=isNaN(a[1])?c:a[1],a=isNaN(a[0])?a:a[0];var e=this,g=e.isStyle(f,h),i=e.getXY(),j=parseInt(e.getStyle(b),10),k=parseInt(e.getStyle(d),10);return j=isNaN(j)?g?0:e.dom.offsetLeft:j,k=isNaN(k)?g?0:e.dom.offsetTop:k,{left:a-i[0]+j,top:c-i[1]+k}},animTest:function(a,b,c){return b&&this.preanim?this.preanim(a,c):!1}})}(),Ext.Element.addMethods({isScrollable:function(){var a=this.dom;return a.scrollHeight>a.clientHeight||a.scrollWidth>a.clientWidth},scrollTo:function(a,b){return this.dom["scroll"+(/top/i.test(a)?"Top":"Left")]=b,this},getScroll:function(){var a,b,c,d=this.dom,e=document,f=e.body,g=e.documentElement;return d==e||d==f?(Ext.isIE&&Ext.isStrict?(a=g.scrollLeft,b=g.scrollTop):(a=window.pageXOffset,b=window.pageYOffset),c={left:a||(f?f.scrollLeft:0),top:b||(f?f.scrollTop:0)}):c={left:d.scrollLeft,top:d.scrollTop},c}}),Ext.Element.VISIBILITY=1,Ext.Element.DISPLAY=2,Ext.Element.addMethods(function(){var a="visibility",b="display",c="hidden",d="none",e="originalDisplay",f="visibilityMode",g=Ext.Element.DISPLAY,h=Ext.Element.data,i=function(a){var b=h(a,e);return void 0===b&&h(a,e,b=""),b},j=function(a){var b=h(a,f);return void 0===b&&h(a,f,b=1),b};return{originalDisplay:"",visibilityMode:1,setVisibilityMode:function(a){return h(this.dom,f,a),this},animate:function(a,b,c,d,e){return this.anim(a,{duration:b,callback:c,easing:d},e),this},anim:function(a,b,c,d,e,f){c=c||"run",b=b||{};var g=this,h=Ext.lib.Anim[c](g.dom,a,b.duration||d||.35,b.easing||e||"easeOut",function(){f&&f.call(g),b.callback&&b.callback.call(b.scope||g,g,b)},g);return b.anim=h,h},preanim:function(a,b){return a[b]?Ext.isObject(a[b])?a[b]:{duration:a[b+1],callback:a[b+2],easing:a[b+3]}:!1},isVisible:function(){return!this.isStyle(a,c)&&!this.isStyle(b,d)},setVisible:function(e,f){var h=this,i=h.dom,k=j(this.dom)==g;return f&&h.anim?(e&&(h.setOpacity(.01),h.setVisible(!0)),h.anim({opacity:{to:e?1:0}},h.preanim(arguments,1),null,.35,"easeIn",function(){e||(i.style[k?b:a]=k?d:c,Ext.fly(i).setOpacity(1))})):k?h.setDisplayed(e):(h.fixDisplay(),i.style.visibility=e?"visible":c),h},toggle:function(a){var b=this;return b.setVisible(!b.isVisible(),b.preanim(arguments,0)),b},setDisplayed:function(a){return"boolean"==typeof a&&(a=a?i(this.dom):d),this.setStyle(b,a),this},fixDisplay:function(){var e=this;e.isStyle(b,d)&&(e.setStyle(a,c),e.setStyle(b,i(this.dom)),e.isStyle(b,d)&&e.setStyle(b,"block"))},hide:function(a){return this.setVisible(!1,this.preanim(arguments,0)),this},show:function(a){return this.setVisible(!0,this.preanim(arguments,0)),this}}}()),function(){var a=null,b=void 0,c=!0,d=!1,e="setX",f="setY",g="setXY",h="left",i="bottom",j="top",k="right",l="height",m="width",n="points",o="hidden",p="absolute",q="visible",r="motion",s="position",t="easeOut",u=new Ext.Element.Flyweight,v={},w=function(a){return a||{}},x=function(a){return u.dom=a,u.id=Ext.id(a),u},y=function(a){return v[a]||(v[a]=[]),v[a]},z=function(a,b){v[a]=b};Ext.enableFx=c,Ext.Fx={switchStatements:function(a,b,c){return b.apply(this,c[a])},slideIn:function(b,c){c=w(c);var d,l,m,n,s,u,v,y,z,A=this,B=A.dom,s=B.style;return b=b||"t",A.queueFx(c,function(){function w(){x(B).fxUnwrap(n,l.pos,c),s.width=l.width,s.height=l.height,x(B).afterFx(c)}function A(a,b,c,d,e,f,g,h,i,j,k){var l={};return x(a).setWidth(c).setHeight(d),x(a)[e]&&x(a)[e](f),b[g]=b[h]="0",i&&(l.width=i),j&&(l.height=j),k&&(l.points=k),l}d=x(B).getXY(),x(B).fixDisplay(),l=x(B).getFxRestore(),m={x:d[0],y:d[1],0:d[0],1:d[1],width:B.offsetWidth,height:B.offsetHeight},m.right=m.x+m.width,m.bottom=m.y+m.height,x(B).setWidth(m.width).setHeight(m.height),n=x(B).fxWrap(l.pos,c,o),s.visibility=q,s.position=p,v={to:[m.x,m.y]},y={to:m.width},z={to:m.height},u=x(B).switchStatements(b.toLowerCase(),A,{t:[n,s,m.width,0,a,a,h,i,a,z,a],l:[n,s,0,m.height,a,a,k,j,y,a,a],r:[n,s,m.width,m.height,e,m.right,h,j,a,a,v],b:[n,s,m.width,m.height,f,m.bottom,h,j,a,z,v],tl:[n,s,0,0,a,a,k,i,y,z,v],bl:[n,s,0,0,f,m.y+m.height,k,j,y,z,v],br:[n,s,0,0,g,[m.right,m.bottom],h,j,y,z,v],tr:[n,s,0,0,e,m.x+m.width,h,i,y,z,v]}),s.visibility=q,x(n).show(),arguments.callee.anim=x(n).fxanim(u,c,r,.5,t,w)}),A},slideOut:function(a,b){b=w(b);var c,e,f,g,o=this,s=o.dom,u=s.style,v=o.getXY(),y={to:0};return a=a||"t",o.queueFx(b,function(){function o(){b.useDisplay?x(s).setDisplayed(d):x(s).hide(),x(s).fxUnwrap(c,e.pos,b),u.width=e.width,u.height=e.height,x(s).afterFx(b)}function w(a,b,c,d,e,f,g,h,i){var j={};return a[b]=a[c]="0",j[d]=e,f&&(j[f]=g),h&&(j[h]=i),j}e=x(s).getFxRestore(),f={x:v[0],y:v[1],0:v[0],1:v[1],width:s.offsetWidth,height:s.offsetHeight},f.right=f.x+f.width,f.bottom=f.y+f.height,x(s).setWidth(f.width).setHeight(f.height),c=x(s).fxWrap(e.pos,b,q),u.visibility=q,u.position=p,x(c).setWidth(f.width).setHeight(f.height),g=x(s).switchStatements(a.toLowerCase(),w,{t:[u,h,i,l,y],l:[u,k,j,m,y],r:[u,h,j,m,y,n,{to:[f.right,f.y]}],b:[u,h,j,l,y,n,{to:[f.x,f.bottom]}],tl:[u,k,i,m,y,l,y],bl:[u,k,j,m,y,l,y,n,{to:[f.x,f.bottom]}],br:[u,h,j,m,y,l,y,n,{to:[f.x+f.width,f.bottom]}],tr:[u,h,i,m,y,l,y,n,{to:[f.right,f.y]}]}),arguments.callee.anim=x(c).fxanim(g,b,r,.5,t,o)}),o},puff:function(a){a=w(a);var b,c,e,f=this,g=f.dom,h=g.style;return f.queueFx(a,function(){function f(){a.useDisplay?x(g).setDisplayed(d):x(g).hide(),x(g).clearOpacity(),x(g).setPositioning(e.pos),h.width=e.width,h.height=e.height,h.fontSize="",x(g).afterFx(a)}b=x(g).getWidth(),c=x(g).getHeight(),x(g).clearOpacity(),x(g).show(),e=x(g).getFxRestore(),arguments.callee.anim=x(g).fxanim({width:{to:x(g).adjustWidth(2*b)},height:{to:x(g).adjustHeight(2*c)},points:{by:[.5*-b,.5*-c]},opacity:{to:0},fontSize:{to:200,unit:"%"}},a,r,.5,t,f)}),f},switchOff:function(b){b=w(b);var c,e=this,f=e.dom,g=f.style;return e.queueFx(b,function(){function e(){b.useDisplay?x(f).setDisplayed(d):x(f).hide(),x(f).clearOpacity(),x(f).setPositioning(c.pos),g.width=c.width,g.height=c.height,x(f).afterFx(b)}x(f).clearOpacity(),x(f).clip(),c=x(f).getFxRestore(),x(f).fxanim({opacity:{to:.3}},a,a,.1,a,function(){x(f).clearOpacity(),function(){x(f).fxanim({height:{to:1},points:{by:[0,.5*x(f).getHeight()]}},b,r,.3,"easeIn",e)}.defer(100)})}),e},highlight:function(a,b){b=w(b);var c,d=this,e=d.dom,f=b.attr||"backgroundColor",g={};return d.queueFx(b,function(){function d(){e.style[f]=c,x(e).afterFx(b)}x(e).clearOpacity(),x(e).show(),c=e.style[f],g[f]={from:a||"ffff9c",to:b.endColor||x(e).getColor(f)||"ffffff"},arguments.callee.anim=x(e).fxanim(g,b,"color",1,"easeIn",d)}),d},frame:function(a,b,c){c=w(c);var d,e,f=this,g=f.dom;return f.queueFx(c,function(){function f(){var a=Ext.isBorderBox?2:1;e=d.anim({top:{from:i.y,to:i.y-20},left:{from:i.x,to:i.x-20},borderWidth:{from:0,to:10},opacity:{from:1,to:0},height:{from:i.height,to:i.height+20*a},width:{from:i.width,to:i.width+20*a}},{duration:c.duration||1,callback:function(){d.remove(),--b>0?j():x(g).afterFx(c)}}),arguments.callee.anim={isAnimated:!0,stop:function(){e.stop()}}}a=a||"#C3DAF9",6==a.length&&(a="#"+a),b=b||1,x(g).show();var h=x(g).getXY(),i={x:h[0],y:h[1],0:h[0],1:h[1],width:g.offsetWidth,height:g.offsetHeight},j=function(){return d=x(document.body||document.documentElement).createChild({style:{position:p,"z-index":35e3,border:"0px solid "+a}}),d.queueFx({},f)};arguments.callee.anim={isAnimated:!0,stop:function(){b=0,d.stopFx()}},j()}),f},pause:function(a){var b,c=this.dom;return this.queueFx({},function(){b=setTimeout(function(){x(c).afterFx({})},1e3*a),arguments.callee.anim={isAnimated:!0,stop:function(){clearTimeout(b),x(c).afterFx({})}}}),this},fadeIn:function(b){b=w(b);var c=this,d=c.dom,e=b.endOpacity||1;return c.queueFx(b,function(){x(d).setOpacity(0),x(d).fixDisplay(),d.style.visibility=q,arguments.callee.anim=x(d).fxanim({opacity:{to:e}},b,a,.5,t,function(){1==e&&x(d).clearOpacity(),x(d).afterFx(b)})}),c},fadeOut:function(b){b=w(b);var c=this,d=c.dom,e=d.style,f=b.endOpacity||0;return c.queueFx(b,function(){arguments.callee.anim=x(d).fxanim({opacity:{to:f}},b,a,.5,t,function(){0==f&&(Ext.Element.data(d,"visibilityMode")==Ext.Element.DISPLAY||b.useDisplay?e.display="none":e.visibility=o,x(d).clearOpacity()),x(d).afterFx(b)})}),c},scale:function(a,b,c){return this.shift(Ext.apply({},c,{width:a,height:b})),this},shift:function(a){a=w(a);var c=this.dom,d={};return this.queueFx(a,function(){for(var e in a)a[e]!=b&&(d[e]={to:a[e]});d.width?d.width.to=x(c).adjustWidth(a.width):d,d.height?d.height.to=x(c).adjustWidth(a.height):d,(d.x||d.y||d.xy)&&(d.points=d.xy||{to:[d.x?d.x.to:x(c).getX(),d.y?d.y.to:x(c).getY()]}),arguments.callee.anim=x(c).fxanim(d,a,r,.35,t,function(){x(c).afterFx(a)})}),this},ghost:function(a,b){b=w(b);var c,e,f,g=this,h=g.dom,i=h.style,j={opacity:{to:0},points:{}},k=j.points;return a=a||"b",g.queueFx(b,function(){function g(){b.useDisplay?x(h).setDisplayed(d):x(h).hide(),x(h).clearOpacity(),x(h).setPositioning(c.pos),i.width=c.width,i.height=c.height,x(h).afterFx(b)}c=x(h).getFxRestore(),e=x(h).getWidth(),f=x(h).getHeight(),k.by=x(h).switchStatements(a.toLowerCase(),function(a,b){return[a,b]},{t:[0,-f],l:[-e,0],r:[e,0],b:[0,f],tl:[-e,-f],bl:[-e,f],br:[e,f],tr:[e,-f]}),arguments.callee.anim=x(h).fxanim(j,b,r,.5,t,g)}),g},syncFx:function(){var a=this;return a.fxDefaults=Ext.apply(a.fxDefaults||{},{block:d,concurrent:c,stopFx:d}),a},sequenceFx:function(){var a=this;return a.fxDefaults=Ext.apply(a.fxDefaults||{},{block:d,concurrent:d,stopFx:d}),a},nextFx:function(){var a=y(this.dom.id)[0];a&&a.call(this)},hasActiveFx:function(){return y(this.dom.id)[0]},stopFx:function(a){var b=this,d=b.dom.id;if(b.hasActiveFx()){var e=y(d)[0];e&&e.anim&&(e.anim.isAnimated?(z(d,[e]),e.anim.stop(void 0!==a?a:c)):z(d,[]))}return b},beforeFx:function(a){return this.hasActiveFx()&&!a.concurrent?a.stopFx?(this.stopFx(),c):d:c},hasFxBlock:function(){var a=y(this.dom.id);return a&&a[0]&&a[0].block},queueFx:function(a,b){var c=x(this.dom);if(!c.hasFxBlock())if(Ext.applyIf(a,c.fxDefaults),a.concurrent)b.call(c);else{var d=c.beforeFx(a);b.block=a.block,y(c.dom.id).push(b),d&&c.nextFx()}return c},fxWrap:function(a,b,c){var d,e,f=this.dom;if(!b.wrap||!(d=Ext.getDom(b.wrap))){b.fixPosition&&(e=x(f).getXY());var g=document.createElement("div");g.style.visibility=c,d=f.parentNode.insertBefore(g,f),x(d).setPositioning(a),x(d).isStyle(s,"static")&&x(d).position("relative"),x(f).clearPositioning("auto"),x(d).clip(),d.appendChild(f),e&&x(d).setXY(e)}return d},fxUnwrap:function(a,b,c){var d=this.dom;if(x(d).clearPositioning(),x(d).setPositioning(b),!c.wrap){var e=x(a).dom.parentNode;e.insertBefore(d,a),x(a).remove()}},getFxRestore:function(){var a=this.dom.style;return{pos:this.getPositioning(),width:a.width,height:a.height}},afterFx:function(a){var b=this.dom,d=b.id;a.afterStyle&&x(b).setStyle(a.afterStyle),a.afterCls&&x(b).addClass(a.afterCls),a.remove==c&&x(b).remove(),a.callback&&a.callback.call(a.scope,x(b)),a.concurrent||(y(d).shift(),x(b).nextFx())},fxanim:function(a,b,c,d,e,f){c=c||"run",b=b||{};var g=Ext.lib.Anim[c](this.dom,a,b.duration||d||.35,b.easing||e||t,f,this);return b.anim=g,g}},Ext.Fx.resize=Ext.Fx.scale,Ext.Element.addMethods(Ext.Fx)}(),Ext.CompositeElementLite=function(a,b){this.elements=[],this.add(a,b),this.el=new Ext.Element.Flyweight},Ext.CompositeElementLite.prototype={isComposite:!0,getElement:function(a){var b=this.el;return b.dom=a,b.id=a.id,b},transformElement:function(a){return Ext.getDom(a)},getCount:function(){return this.elements.length},add:function(a,b){var c=this,d=c.elements;if(!a)return this;Ext.isString(a)?a=Ext.Element.selectorFunction(a,b):a.isComposite?a=a.elements:Ext.isIterable(a)||(a=[a]);for(var e=0,f=a.length;f>e;++e)d.push(c.transformElement(a[e]));return c},invoke:function(a,b){var c,d,e=this,f=e.elements,g=f.length;for(d=0;g>d;d++)c=f[d],c&&Ext.Element.prototype[a].apply(e.getElement(c),b);return e},item:function(a){var b=this,c=b.elements[a],d=null;return c&&(d=b.getElement(c)),d},addListener:function(a,b,c,d){var e,f,g=this.elements,h=g.length;for(e=0;h>e;e++)f=g[e],f&&Ext.EventManager.on(f,a,b,c||f,d);return this},each:function(a,b){var c,d,e=this,f=e.elements,g=f.length;for(c=0;g>c&&(d=f[c],!d||(d=this.getElement(d),!a.call(b||d,d,e,c)));c++);return e},fill:function(a){var b=this;return b.elements=[],b.add(a),b},filter:function(a){var b=[],c=this,d=(c.elements,Ext.isFunction(a)?a:function(b){return b.is(a)});return c.each(function(a,e,f){d(a,f)!==!1&&(b[b.length]=c.transformElement(a))}),c.elements=b,c},indexOf:function(a){return this.elements.indexOf(this.transformElement(a))},replaceElement:function(a,b,c){var d,e=isNaN(a)?this.indexOf(a):a;return e>-1&&(b=Ext.getDom(b),c&&(d=this.elements[e],d.parentNode.insertBefore(b,d),Ext.removeNode(d)),this.elements.splice(e,1,b)),this},clear:function(){this.elements=[]}},Ext.CompositeElementLite.prototype.on=Ext.CompositeElementLite.prototype.addListener,function(){var a,b=Ext.Element.prototype,c=Ext.CompositeElementLite.prototype;for(a in b)Ext.isFunction(b[a])&&function(a){c[a]=c[a]||function(){return this.invoke(a,arguments)}}.call(c,a)}(),Ext.DomQuery&&(Ext.Element.selectorFunction=Ext.DomQuery.select),Ext.Element.select=function(a,b){var c;if("string"==typeof a)c=Ext.Element.selectorFunction(a,b);else{if(void 0===a.length)throw"Invalid selector";c=a}return new Ext.CompositeElementLite(c)},Ext.select=Ext.Element.select,function(){var a="beforerequest",b="requestcomplete",c="requestexception",d=void 0,e="load",f="POST",g="GET",h=window;Ext.data.Connection=function(d){Ext.apply(this,d),this.addEvents(a,b,c),Ext.data.Connection.superclass.constructor.call(this)},Ext.extend(Ext.data.Connection,Ext.util.Observable,{timeout:3e4,autoAbort:!1,disableCaching:!0,disableCachingParam:"_dc",request:function(b){var c=this;if(c.fireEvent(a,c,b)){b.el&&(Ext.isEmpty(b.indicatorText)||(c.indicatorText='<div class="loading-indicator">'+b.indicatorText+"</div>"),c.indicatorText&&(Ext.getDom(b.el).innerHTML=c.indicatorText),b.success=(Ext.isFunction(b.success)?b.success:function(){}).createInterceptor(function(a){Ext.getDom(b.el).innerHTML=a.responseText}));var e,i,j,k=b.params,l=b.url||c.url,m={success:c.handleResponse,failure:c.handleFailure,scope:c,argument:{options:b},timeout:b.timeout||c.timeout};if(Ext.isFunction(k)&&(k=k.call(b.scope||h,b)),k=Ext.urlEncode(c.extraParams,Ext.isObject(k)?Ext.urlEncode(k):k),Ext.isFunction(l)&&(l=l.call(b.scope||h,b)),i=Ext.getDom(b.form)){if(l=l||i.action,b.isUpload||/multipart\/form-data/i.test(i.getAttribute("enctype")))return c.doFormUpload.call(c,b,k,l);j=Ext.lib.Ajax.serializeForm(i),k=k?k+"&"+j:j}if(e=b.method||c.method||(k||b.xmlData||b.jsonData?f:g),e===g&&c.disableCaching&&b.disableCaching!==!1||b.disableCaching===!0){var n=b.disableCachingParam||c.disableCachingParam;l=Ext.urlAppend(l,n+"="+(new Date).getTime())}return b.headers=Ext.apply(b.headers||{},c.defaultHeaders||{}),(b.autoAbort===!0||c.autoAbort)&&c.abort(),(e==g||b.xmlData||b.jsonData)&&k&&(l=Ext.urlAppend(l,k),k=""),c.transId=Ext.lib.Ajax.request(e,l,m,k,b)}return b.callback?b.callback.apply(b.scope,[b,d,d]):null},isLoading:function(a){return a?Ext.lib.Ajax.isCallInProgress(a):!!this.transId},abort:function(a){(a||this.isLoading())&&Ext.lib.Ajax.abort(a||this.transId)},handleResponse:function(a){this.transId=!1;var c=a.argument.options;a.argument=c?c.argument:null,this.fireEvent(b,this,a,c),c.success&&c.success.call(c.scope,a,c),c.callback&&c.callback.call(c.scope,c,!0,a)},handleFailure:function(a,b){this.transId=!1;var d=a.argument.options;a.argument=d?d.argument:null,this.fireEvent(c,this,a,d,b),d.failure&&d.failure.call(d.scope,a,d),d.callback&&d.callback.call(d.scope,d,!1,a)},doFormUpload:function(a,c,d){function g(){function c(a,b,c){Ext.isFunction(a)&&a.apply(b,c)}var d,f,i=this,k={responseText:"",responseXML:null,argument:a.argument};try{d=l.contentWindow.document||l.contentDocument||h.frames[j].document,d&&(d.body&&(/textarea/i.test((f=d.body.firstChild||{}).tagName)?k.responseText=f.value:k.responseText=d.body.innerHTML),k.responseXML=d.XMLDocument||d)}catch(m){}Ext.EventManager.removeListener(l,e,g,i),i.fireEvent(b,i,k,a),c(a.success,a.scope,[k,a]),c(a.callback,a.scope,[a,!0,k]),i.debugUploads||setTimeout(function(){Ext.removeNode(l)},100)}var i,j=Ext.id(),k=document,l=k.createElement("iframe"),m=Ext.getDom(a.form),n=[],o="multipart/form-data",p={target:m.target,method:m.method,encoding:m.encoding,enctype:m.enctype,action:m.action};Ext.fly(l).set({id:j,name:j,cls:"x-hidden"}),k.body.appendChild(l),Ext.fly(l).set({src:Ext.SSL_SECURE_URL}),Ext.isIE&&(document.frames[j].name=j),Ext.fly(m).set({target:j,method:f,enctype:o,encoding:o,action:d||p.action}),Ext.iterate(Ext.urlDecode(c,!1),function(a,b){i=k.createElement("input"),Ext.fly(i).set({type:"hidden",value:b,name:a}),m.appendChild(i),n.push(i)}),Ext.EventManager.on(l,e,g,this),m.submit(),Ext.fly(m).set(p),Ext.each(n,function(a){Ext.removeNode(a)})}})}(),Ext.Ajax=new Ext.data.Connection({autoAbort:!1,serializeForm:function(a){return Ext.lib.Ajax.serializeForm(a)}}),Ext.util.JSON=new function(){var useHasOwn=!!{}.hasOwnProperty,isNative=function(){var a=null;return function(){return null===a&&(a=Ext.USE_NATIVE_JSON&&window.JSON&&"[object JSON]"==JSON.toString()),a}}(),pad=function(a){return 10>a?"0"+a:a},doDecode=function(json){return eval("("+json+")")},doEncode=function(a){if(Ext.isDefined(a)&&null!==a){if(Ext.isArray(a))return encodeArray(a);if(Ext.isDate(a))return Ext.util.JSON.encodeDate(a);if(Ext.isString(a))return encodeString(a);if("number"==typeof a)return isFinite(a)?String(a):"null";if(Ext.isBoolean(a))return String(a);var b,c,d,e=["{"];for(c in a)if(!a.getElementsByTagName&&(!useHasOwn||a.hasOwnProperty(c)))switch(d=a[c],typeof d){case"undefined":case"function":case"unknown":break;default:b&&e.push(","),e.push(doEncode(c),":",null===d?"null":doEncode(d)),b=!0}return e.push("}"),e.join("")}return"null"},m={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},encodeString=function(a){return/["\\\x00-\x1f]/.test(a)?'"'+a.replace(/([\x00-\x1f\\"])/g,function(a,b){var c=m[b];return c?c:(c=b.charCodeAt(),"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16))})+'"':'"'+a+'"'},encodeArray=function(a){var b,c,d,e=["["],f=a.length;for(c=0;f>c;c+=1)switch(d=a[c],typeof d){case"undefined":case"function":case"unknown":break;default:b&&e.push(","),e.push(null===d?"null":Ext.util.JSON.encode(d)),b=!0}return e.push("]"),e.join("")};this.encodeDate=function(a){return'"'+a.getFullYear()+"-"+pad(a.getMonth()+1)+"-"+pad(a.getDate())+"T"+pad(a.getHours())+":"+pad(a.getMinutes())+":"+pad(a.getSeconds())+'"'},this.encode=function(){var a;return function(b){return a||(a=isNative()?JSON.stringify:doEncode),a(b)}}(),this.decode=function(){var a;return function(b){return a||(a=isNative()?JSON.parse:doDecode),a(b)}}()},Ext.encode=Ext.util.JSON.encode,Ext.decode=Ext.util.JSON.decode,function(a,b){function c(a){var b=a.length,c=ka.type(a);return ka.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||"function"!==c&&(0===b||"number"==typeof b&&b>0&&b-1 in a)}function d(a){var b=za[a]={};return ka.each(a.match(ma)||[],function(a,c){b[c]=!0}),b}function e(a,c,d,e){if(ka.acceptData(a)){var f,g,h=ka.expando,i=a.nodeType,j=i?ka.cache:a,k=i?a[h]:a[h]&&h;if(k&&j[k]&&(e||j[k].data)||d!==b||"string"!=typeof c)return k||(k=i?a[h]=ba.pop()||ka.guid++:h),j[k]||(j[k]=i?{}:{toJSON:ka.noop}),("object"==typeof c||"function"==typeof c)&&(e?j[k]=ka.extend(j[k],c):j[k].data=ka.extend(j[k].data,c)),g=j[k],e||(g.data||(g.data={}),g=g.data),d!==b&&(g[ka.camelCase(c)]=d),"string"==typeof c?(f=g[c],null==f&&(f=g[ka.camelCase(c)])):f=g,f}}function f(a,b,c){if(ka.acceptData(a)){var d,e,f=a.nodeType,g=f?ka.cache:a,i=f?a[ka.expando]:ka.expando;if(g[i]){if(b&&(d=c?g[i]:g[i].data)){ka.isArray(b)?b=b.concat(ka.map(b,ka.camelCase)):b in d?b=[b]:(b=ka.camelCase(b),b=b in d?[b]:b.split(" ")),e=b.length;for(;e--;)delete d[b[e]];if(c?!h(d):!ka.isEmptyObject(d))return}(c||(delete g[i].data,h(g[i])))&&(f?ka.cleanData([a],!0):ka.support.deleteExpando||g!=g.window?delete g[i]:g[i]=null)}}}function g(a,c,d){if(d===b&&1===a.nodeType){var e="data-"+c.replace(Ba,"-$1").toLowerCase();if(d=a.getAttribute(e),"string"==typeof d){try{d="true"===d?!0:"false"===d?!1:"null"===d?null:+d+""===d?+d:Aa.test(d)?ka.parseJSON(d):d}catch(f){}ka.data(a,c,d)}else d=b}return d}function h(a){var b;for(b in a)if(("data"!==b||!ka.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function i(){return!0}function j(){return!1}function k(){try{return Y.activeElement}catch(a){}}function l(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}function m(a,b,c){if(ka.isFunction(b))return ka.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return ka.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(Qa.test(b))return ka.filter(b,a,c);b=ka.filter(b,a)}return ka.grep(a,function(a){return ka.inArray(a,b)>=0!==c})}function n(a){var b=Ua.split("|"),c=a.createDocumentFragment();if(c.createElement)for(;b.length;)c.createElement(b.pop());return c}function o(a,b){return ka.nodeName(a,"table")&&ka.nodeName(1===b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function p(a){return a.type=(null!==ka.find.attr(a,"type"))+"/"+a.type,a}function q(a){var b=eb.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function r(a,b){for(var c,d=0;null!=(c=a[d]);d++)ka._data(c,"globalEval",!b||ka._data(b[d],"globalEval"))}function s(a,b){if(1===b.nodeType&&ka.hasData(a)){var c,d,e,f=ka._data(a),g=ka._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;e>d;d++)ka.event.add(b,c,h[c][d])}g.data&&(g.data=ka.extend({},g.data))}}function t(a,b){var c,d,e;if(1===b.nodeType){if(c=b.nodeName.toLowerCase(),!ka.support.noCloneEvent&&b[ka.expando]){e=ka._data(b);for(d in e.events)ka.removeEvent(b,d,e.handle);b.removeAttribute(ka.expando)}"script"===c&&b.text!==a.text?(p(b).text=a.text,q(b)):"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),ka.support.html5Clone&&a.innerHTML&&!ka.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&bb.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.defaultSelected=b.selected=a.defaultSelected:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}}function u(a,c){var d,e,f=0,g=typeof a.getElementsByTagName!==W?a.getElementsByTagName(c||"*"):typeof a.querySelectorAll!==W?a.querySelectorAll(c||"*"):b;if(!g)for(g=[],d=a.childNodes||a;null!=(e=d[f]);f++)!c||ka.nodeName(e,c)?g.push(e):ka.merge(g,u(e,c));return c===b||c&&ka.nodeName(a,c)?ka.merge([a],g):g}function v(a){bb.test(a.type)&&(a.defaultChecked=a.checked)}function w(a,b){if(b in a)return b;for(var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=yb.length;e--;)if(b=yb[e]+c,b in a)return b;return d}function x(a,b){return a=b||a,"none"===ka.css(a,"display")||!ka.contains(a.ownerDocument,a)}function y(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=ka._data(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&x(d)&&(f[g]=ka._data(d,"olddisplay",C(d.nodeName)))):f[g]||(e=x(d),(c&&"none"!==c||!e)&&ka._data(d,"olddisplay",e?c:ka.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function z(a,b,c){var d=rb.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function A(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=ka.css(a,c+xb[f],!0,e)),d?("content"===c&&(g-=ka.css(a,"padding"+xb[f],!0,e)),"margin"!==c&&(g-=ka.css(a,"border"+xb[f]+"Width",!0,e))):(g+=ka.css(a,"padding"+xb[f],!0,e),"padding"!==c&&(g+=ka.css(a,"border"+xb[f]+"Width",!0,e)));return g}function B(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=kb(a),g=ka.support.boxSizing&&"border-box"===ka.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=lb(a,b,f),(0>e||null==e)&&(e=a.style[b]),sb.test(e))return e;d=g&&(ka.support.boxSizingReliable||e===a.style[b]),e=parseFloat(e)||0}return e+A(a,b,c||(g?"border":"content"),d,f)+"px"}function C(a){var b=Y,c=ub[a];return c||(c=D(a,b),"none"!==c&&c||(jb=(jb||ka("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(b.documentElement),b=(jb[0].contentWindow||jb[0].contentDocument).document,b.write("<!doctype html><html><body>"),b.close(),c=D(a,b),jb.detach()),ub[a]=c),c}function D(a,b){var c=ka(b.createElement(a)).appendTo(b.body),d=ka.css(c[0],"display");return c.remove(),d}function E(a,b,c,d){var e;if(ka.isArray(b))ka.each(b,function(b,e){c||Ab.test(a)?d(a,e):E(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==ka.type(b))d(a,b);else for(e in b)E(a+"["+e+"]",b[e],c,d)}function F(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(ma)||[];if(ka.isFunction(c))for(;d=f[e++];)"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function G(a,b,c,d){function e(h){var i;return f[h]=!0,ka.each(a[h]||[],function(a,h){
var j=h(b,c,d);return"string"!=typeof j||g||f[j]?g?!(i=j):void 0:(b.dataTypes.unshift(j),e(j),!1)}),i}var f={},g=a===Rb;return e(b.dataTypes[0])||!f["*"]&&e("*")}function H(a,c){var d,e,f=ka.ajaxSettings.flatOptions||{};for(e in c)c[e]!==b&&((f[e]?a:d||(d={}))[e]=c[e]);return d&&ka.extend(!0,a,d),a}function I(a,c,d){for(var e,f,g,h,i=a.contents,j=a.dataTypes;"*"===j[0];)j.shift(),f===b&&(f=a.mimeType||c.getResponseHeader("Content-Type"));if(f)for(h in i)if(i[h]&&i[h].test(f)){j.unshift(h);break}if(j[0]in d)g=j[0];else{for(h in d){if(!j[0]||a.converters[h+" "+j[0]]){g=h;break}e||(e=h)}g=g||e}return g?(g!==j[0]&&j.unshift(g),d[g]):void 0}function J(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];for(f=k.shift();f;)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}function K(){try{return new a.XMLHttpRequest}catch(b){}}function L(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function M(){return setTimeout(function(){$b=b}),$b=ka.now()}function N(a,b,c){for(var d,e=(ec[b]||[]).concat(ec["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function O(a,b,c){var d,e,f=0,g=dc.length,h=ka.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=$b||M(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:ka.extend({},b),opts:ka.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:$b||M(),duration:c.duration,tweens:[],createTween:function(b,c){var d=ka.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(P(k,j.opts.specialEasing);g>f;f++)if(d=dc[f].call(j,a,k,j.opts))return d;return ka.map(k,N,j),ka.isFunction(j.opts.start)&&j.opts.start.call(a,j),ka.fx.timer(ka.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function P(a,b){var c,d,e,f,g;for(c in a)if(d=ka.camelCase(c),e=b[d],f=a[c],ka.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=ka.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function Q(a,b,c){var d,e,f,g,h,i,j=this,k={},l=a.style,m=a.nodeType&&x(a),n=ka._data(a,"fxshow");c.queue||(h=ka._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,j.always(function(){j.always(function(){h.unqueued--,ka.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[l.overflow,l.overflowX,l.overflowY],"inline"===ka.css(a,"display")&&"none"===ka.css(a,"float")&&(ka.support.inlineBlockNeedsLayout&&"inline"!==C(a.nodeName)?l.zoom=1:l.display="inline-block")),c.overflow&&(l.overflow="hidden",ka.support.shrinkWrapBlocks||j.always(function(){l.overflow=c.overflow[0],l.overflowX=c.overflow[1],l.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],ac.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(m?"hide":"show"))continue;k[d]=n&&n[d]||ka.style(a,d)}if(!ka.isEmptyObject(k)){n?"hidden"in n&&(m=n.hidden):n=ka._data(a,"fxshow",{}),f&&(n.hidden=!m),m?ka(a).show():j.done(function(){ka(a).hide()}),j.done(function(){var b;ka._removeData(a,"fxshow");for(b in k)ka.style(a,b,k[b])});for(d in k)g=N(m?n[d]:0,d,j),d in n||(n[d]=g.start,m&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function R(a,b,c,d,e){return new R.prototype.init(a,b,c,d,e)}function S(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b)c=xb[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function T(a){return ka.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var U,V,W=typeof b,X=a.location,Y=a.document,Z=Y.documentElement,$=a.jQuery,_=a.$,aa={},ba=[],ca="1.10.2",da=ba.concat,ea=ba.push,fa=ba.slice,ga=ba.indexOf,ha=aa.toString,ia=aa.hasOwnProperty,ja=ca.trim,ka=function(a,b){return new ka.fn.init(a,b,V)},la=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ma=/\S+/g,na=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,oa=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,pa=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,qa=/^[\],:{}\s]*$/,ra=/(?:^|:|,)(?:\s*\[)+/g,sa=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,ta=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,ua=/^-ms-/,va=/-([\da-z])/gi,wa=function(a,b){return b.toUpperCase()},xa=function(a){(Y.addEventListener||"load"===a.type||"complete"===Y.readyState)&&(ya(),ka.ready())},ya=function(){Y.addEventListener?(Y.removeEventListener("DOMContentLoaded",xa,!1),a.removeEventListener("load",xa,!1)):(Y.detachEvent("onreadystatechange",xa),a.detachEvent("onload",xa))};ka.fn=ka.prototype={jquery:ca,constructor:ka,init:function(a,c,d){var e,f;if(!a)return this;if("string"==typeof a){if(e="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:oa.exec(a),!e||!e[1]&&c)return!c||c.jquery?(c||d).find(a):this.constructor(c).find(a);if(e[1]){if(c=c instanceof ka?c[0]:c,ka.merge(this,ka.parseHTML(e[1],c&&c.nodeType?c.ownerDocument||c:Y,!0)),pa.test(e[1])&&ka.isPlainObject(c))for(e in c)ka.isFunction(this[e])?this[e](c[e]):this.attr(e,c[e]);return this}if(f=Y.getElementById(e[2]),f&&f.parentNode){if(f.id!==e[2])return d.find(a);this.length=1,this[0]=f}return this.context=Y,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):ka.isFunction(a)?d.ready(a):(a.selector!==b&&(this.selector=a.selector,this.context=a.context),ka.makeArray(a,this))},selector:"",length:0,toArray:function(){return fa.call(this)},get:function(a){return null==a?this.toArray():0>a?this[this.length+a]:this[a]},pushStack:function(a){var b=ka.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return ka.each(this,a,b)},ready:function(a){return ka.ready.promise().done(a),this},slice:function(){return this.pushStack(fa.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},map:function(a){return this.pushStack(ka.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:ea,sort:[].sort,splice:[].splice},ka.fn.init.prototype=ka.fn,ka.extend=ka.fn.extend=function(){var a,c,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;for("boolean"==typeof h&&(k=h,h=arguments[1]||{},i=2),"object"==typeof h||ka.isFunction(h)||(h={}),j===i&&(h=this,--i);j>i;i++)if(null!=(f=arguments[i]))for(e in f)a=h[e],d=f[e],h!==d&&(k&&d&&(ka.isPlainObject(d)||(c=ka.isArray(d)))?(c?(c=!1,g=a&&ka.isArray(a)?a:[]):g=a&&ka.isPlainObject(a)?a:{},h[e]=ka.extend(k,g,d)):d!==b&&(h[e]=d));return h},ka.extend({expando:"jQuery"+(ca+Math.random()).replace(/\D/g,""),noConflict:function(b){return a.$===ka&&(a.$=_),b&&a.jQuery===ka&&(a.jQuery=$),ka},isReady:!1,readyWait:1,holdReady:function(a){a?ka.readyWait++:ka.ready(!0)},ready:function(a){if(a===!0?!--ka.readyWait:!ka.isReady){if(!Y.body)return setTimeout(ka.ready);ka.isReady=!0,a!==!0&&--ka.readyWait>0||(U.resolveWith(Y,[ka]),ka.fn.trigger&&ka(Y).trigger("ready").off("ready"))}},isFunction:function(a){return"function"===ka.type(a)},isArray:Array.isArray||function(a){return"array"===ka.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==a?String(a):"object"==typeof a||"function"==typeof a?aa[ha.call(a)]||"object":typeof a},isPlainObject:function(a){var c;if(!a||"object"!==ka.type(a)||a.nodeType||ka.isWindow(a))return!1;try{if(a.constructor&&!ia.call(a,"constructor")&&!ia.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(d){return!1}if(ka.support.ownLast)for(c in a)return ia.call(a,c);for(c in a);return c===b||ia.call(a,c)},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},error:function(a){throw new Error(a)},parseHTML:function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||Y;var d=pa.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=ka.buildFragment([a],b,e),e&&ka(e).remove(),ka.merge([],d.childNodes))},parseJSON:function(b){return a.JSON&&a.JSON.parse?a.JSON.parse(b):null===b?b:"string"==typeof b&&(b=ka.trim(b),b&&qa.test(b.replace(sa,"@").replace(ta,"]").replace(ra,"")))?new Function("return "+b)():void ka.error("Invalid JSON: "+b)},parseXML:function(c){var d,e;if(!c||"string"!=typeof c)return null;try{a.DOMParser?(e=new DOMParser,d=e.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(f){d=b}return d&&d.documentElement&&!d.getElementsByTagName("parsererror").length||ka.error("Invalid XML: "+c),d},noop:function(){},globalEval:function(b){b&&ka.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(ua,"ms-").replace(va,wa)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,d){var e,f=0,g=a.length,h=c(a);if(d){if(h)for(;g>f&&(e=b.apply(a[f],d),e!==!1);f++);else for(f in a)if(e=b.apply(a[f],d),e===!1)break}else if(h)for(;g>f&&(e=b.call(a[f],f,a[f]),e!==!1);f++);else for(f in a)if(e=b.call(a[f],f,a[f]),e===!1)break;return a},trim:ja&&!ja.call("\ufeff\xa0")?function(a){return null==a?"":ja.call(a)}:function(a){return null==a?"":(a+"").replace(na,"")},makeArray:function(a,b){var d=b||[];return null!=a&&(c(Object(a))?ka.merge(d,"string"==typeof a?[a]:a):ea.call(d,a)),d},inArray:function(a,b,c){var d;if(b){if(ga)return ga.call(b,a,c);for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=c.length,e=a.length,f=0;if("number"==typeof d)for(;d>f;f++)a[e++]=c[f];else for(;c[f]!==b;)a[e++]=c[f++];return a.length=e,a},grep:function(a,b,c){var d,e=[],f=0,g=a.length;for(c=!!c;g>f;f++)d=!!b(a[f],f),c!==d&&e.push(a[f]);return e},map:function(a,b,d){var e,f=0,g=a.length,h=c(a),i=[];if(h)for(;g>f;f++)e=b(a[f],f,d),null!=e&&(i[i.length]=e);else for(f in a)e=b(a[f],f,d),null!=e&&(i[i.length]=e);return da.apply([],i)},guid:1,proxy:function(a,c){var d,e,f;return"string"==typeof c&&(f=a[c],c=a,a=f),ka.isFunction(a)?(d=fa.call(arguments,2),e=function(){return a.apply(c||this,d.concat(fa.call(arguments)))},e.guid=a.guid=a.guid||ka.guid++,e):b},access:function(a,c,d,e,f,g,h){var i=0,j=a.length,k=null==d;if("object"===ka.type(d)){f=!0;for(i in d)ka.access(a,c,i,d[i],!0,g,h)}else if(e!==b&&(f=!0,ka.isFunction(e)||(h=!0),k&&(h?(c.call(a,e),c=null):(k=c,c=function(a,b,c){return k.call(ka(a),c)})),c))for(;j>i;i++)c(a[i],d,h?e:e.call(a[i],i,c(a[i],d)));return f?a:k?c.call(a):j?c(a[0],d):g},now:function(){return(new Date).getTime()},swap:function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e}}),ka.ready.promise=function(b){if(!U)if(U=ka.Deferred(),"complete"===Y.readyState)setTimeout(ka.ready);else if(Y.addEventListener)Y.addEventListener("DOMContentLoaded",xa,!1),a.addEventListener("load",xa,!1);else{Y.attachEvent("onreadystatechange",xa),a.attachEvent("onload",xa);var c=!1;try{c=null==a.frameElement&&Y.documentElement}catch(d){}c&&c.doScroll&&!function e(){if(!ka.isReady){try{c.doScroll("left")}catch(a){return setTimeout(e,50)}ya(),ka.ready()}}()}return U.promise(b)},ka.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){aa["[object "+b+"]"]=b.toLowerCase()}),V=ka(Y),function(a,b){function c(a,b,c,d){var e,f,g,h,i,j,k,l,o,p;if((b?b.ownerDocument||b:O)!==G&&F(b),b=b||G,c=c||[],!a||"string"!=typeof a)return c;if(1!==(h=b.nodeType)&&9!==h)return[];if(I&&!d){if(e=ta.exec(a))if(g=e[1]){if(9===h){if(f=b.getElementById(g),!f||!f.parentNode)return c;if(f.id===g)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(g))&&M(b,f)&&f.id===g)return c.push(f),c}else{if(e[2])return aa.apply(c,b.getElementsByTagName(a)),c;if((g=e[3])&&x.getElementsByClassName&&b.getElementsByClassName)return aa.apply(c,b.getElementsByClassName(g)),c}if(x.qsa&&(!J||!J.test(a))){if(l=k=N,o=b,p=9===h&&a,1===h&&"object"!==b.nodeName.toLowerCase()){for(j=m(a),(k=b.getAttribute("id"))?l=k.replace(wa,"\\$&"):b.setAttribute("id",l),l="[id='"+l+"'] ",i=j.length;i--;)j[i]=l+n(j[i]);o=na.test(a)&&b.parentNode||b,p=j.join(",")}if(p)try{return aa.apply(c,o.querySelectorAll(p)),c}catch(q){}finally{k||b.removeAttribute("id")}}}return v(a.replace(ja,"$1"),b,c,d)}function d(){function a(c,d){return b.push(c+=" ")>z.cacheLength&&delete a[b.shift()],a[c]=d}var b=[];return a}function e(a){return a[N]=!0,a}function f(a){var b=G.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function g(a,b){for(var c=a.split("|"),d=a.length;d--;)z.attrHandle[c[d]]=b}function h(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||X)-(~a.sourceIndex||X);if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function i(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function j(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function k(a){return e(function(b){return b=+b,e(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function l(){}function m(a,b){var d,e,f,g,h,i,j,k=S[a+" "];if(k)return b?0:k.slice(0);for(h=a,i=[],j=z.preFilter;h;){(!d||(e=la.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),d=!1,(e=ma.exec(h))&&(d=e.shift(),f.push({value:d,type:e[0].replace(ja," ")}),h=h.slice(d.length));for(g in z.filter)!(e=ra[g].exec(h))||j[g]&&!(e=j[g](e))||(d=e.shift(),f.push({value:d,type:g,matches:e}),h=h.slice(d.length));if(!d)break}return b?h.length:h?c.error(a):S(a,i).slice(0)}function n(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function o(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=Q++;return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j,k=P+" "+f;if(g){for(;b=b[d];)if((1===b.nodeType||e)&&a(b,c,g))return!0}else for(;b=b[d];)if(1===b.nodeType||e)if(j=b[N]||(b[N]={}),(i=j[d])&&i[0]===k){if((h=i[1])===!0||h===y)return h===!0}else if(i=j[d]=[k],i[1]=a(b,c,g)||y,i[1]===!0)return!0}}function p(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function q(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function r(a,b,c,d,f,g){return d&&!d[N]&&(d=r(d)),f&&!f[N]&&(f=r(f,g)),e(function(e,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=e||u(b||"*",h.nodeType?[h]:h,[]),r=!a||!e&&b?p:q(p,m,a,h,i),s=c?f||(e?a:o||d)?[]:g:r;if(c&&c(r,s,h,i),d)for(j=q(s,n),d(j,[],h,i),k=j.length;k--;)(l=j[k])&&(s[n[k]]=!(r[n[k]]=l));if(e){if(f||a){if(f){for(j=[],k=s.length;k--;)(l=s[k])&&j.push(r[k]=l);f(null,s=[],j,i)}for(k=s.length;k--;)(l=s[k])&&(j=f?ca.call(e,l):m[k])>-1&&(e[j]=!(g[j]=l))}}else s=q(s===g?s.splice(o,s.length):s),f?f(null,g,s,i):aa.apply(g,s)})}function s(a){for(var b,c,d,e=a.length,f=z.relative[a[0].type],g=f||z.relative[" "],h=f?1:0,i=o(function(a){return a===b},g,!0),j=o(function(a){return ca.call(b,a)>-1},g,!0),k=[function(a,c,d){return!f&&(d||c!==D)||((b=c).nodeType?i(a,c,d):j(a,c,d))}];e>h;h++)if(c=z.relative[a[h].type])k=[o(p(k),c)];else{if(c=z.filter[a[h].type].apply(null,a[h].matches),c[N]){for(d=++h;e>d&&!z.relative[a[d].type];d++);return r(h>1&&p(k),h>1&&n(a.slice(0,h-1).concat({value:" "===a[h-2].type?"*":""})).replace(ja,"$1"),c,d>h&&s(a.slice(h,d)),e>d&&s(a=a.slice(d)),e>d&&n(a))}k.push(c)}return p(k)}function t(a,b){var d=0,f=b.length>0,g=a.length>0,h=function(e,h,i,j,k){var l,m,n,o=[],p=0,r="0",s=e&&[],t=null!=k,u=D,v=e||g&&z.find.TAG("*",k&&h.parentNode||h),w=P+=null==u?1:Math.random()||.1;for(t&&(D=h!==G&&h,y=d);null!=(l=v[r]);r++){if(g&&l){for(m=0;n=a[m++];)if(n(l,h,i)){j.push(l);break}t&&(P=w,y=++d)}f&&((l=!n&&l)&&p--,e&&s.push(l))}if(p+=r,f&&r!==p){for(m=0;n=b[m++];)n(s,o,h,i);if(e){if(p>0)for(;r--;)s[r]||o[r]||(o[r]=$.call(j));o=q(o)}aa.apply(j,o),t&&!e&&o.length>0&&p+b.length>1&&c.uniqueSort(j)}return t&&(P=w,D=u),s};return f?e(h):h}function u(a,b,d){for(var e=0,f=b.length;f>e;e++)c(a,b[e],d);return d}function v(a,b,c,d){var e,f,g,h,i,j=m(a);if(!d&&1===j.length){if(f=j[0]=j[0].slice(0),f.length>2&&"ID"===(g=f[0]).type&&x.getById&&9===b.nodeType&&I&&z.relative[f[1].type]){if(b=(z.find.ID(g.matches[0].replace(xa,ya),b)||[])[0],!b)return c;a=a.slice(f.shift().value.length)}for(e=ra.needsContext.test(a)?0:f.length;e--&&(g=f[e],!z.relative[h=g.type]);)if((i=z.find[h])&&(d=i(g.matches[0].replace(xa,ya),na.test(f[0].type)&&b.parentNode||b))){if(f.splice(e,1),a=d.length&&n(f),!a)return aa.apply(c,d),c;break}}return C(a,j)(d,b,!I,c,na.test(a)),c}var w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N="sizzle"+-new Date,O=a.document,P=0,Q=0,R=d(),S=d(),T=d(),U=!1,V=function(a,b){return a===b?(U=!0,0):0},W=typeof b,X=1<<31,Y={}.hasOwnProperty,Z=[],$=Z.pop,_=Z.push,aa=Z.push,ba=Z.slice,ca=Z.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},da="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ea="[\\x20\\t\\r\\n\\f]",fa="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ga=fa.replace("w","w#"),ha="\\["+ea+"*("+fa+")"+ea+"*(?:([*^$|!~]?=)"+ea+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+ga+")|)|)"+ea+"*\\]",ia=":("+fa+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+ha.replace(3,8)+")*)|.*)\\)|)",ja=new RegExp("^"+ea+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ea+"+$","g"),la=new RegExp("^"+ea+"*,"+ea+"*"),ma=new RegExp("^"+ea+"*([>+~]|"+ea+")"+ea+"*"),na=new RegExp(ea+"*[+~]"),oa=new RegExp("="+ea+"*([^\\]'\"]*)"+ea+"*\\]","g"),pa=new RegExp(ia),qa=new RegExp("^"+ga+"$"),ra={ID:new RegExp("^#("+fa+")"),CLASS:new RegExp("^\\.("+fa+")"),TAG:new RegExp("^("+fa.replace("w","w*")+")"),ATTR:new RegExp("^"+ha),PSEUDO:new RegExp("^"+ia),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ea+"*(even|odd|(([+-]|)(\\d*)n|)"+ea+"*(?:([+-]|)"+ea+"*(\\d+)|))"+ea+"*\\)|)","i"),bool:new RegExp("^(?:"+da+")$","i"),needsContext:new RegExp("^"+ea+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ea+"*((?:-\\d)?\\d*)"+ea+"*\\)|)(?=[^-]|$)","i")},sa=/^[^{]+\{\s*\[native \w/,ta=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ua=/^(?:input|select|textarea|button)$/i,va=/^h\d$/i,wa=/'|\\/g,xa=new RegExp("\\\\([\\da-f]{1,6}"+ea+"?|("+ea+")|.)","ig"),ya=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)};try{aa.apply(Z=ba.call(O.childNodes),O.childNodes),Z[O.childNodes.length].nodeType}catch(za){aa={apply:Z.length?function(a,b){_.apply(a,ba.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}B=c.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},x=c.support={},F=c.setDocument=function(a){var b=a?a.ownerDocument||a:O,c=b.defaultView;return b!==G&&9===b.nodeType&&b.documentElement?(G=b,H=b.documentElement,I=!B(b),c&&c.attachEvent&&c!==c.top&&c.attachEvent("onbeforeunload",function(){F()}),x.attributes=f(function(a){return a.className="i",!a.getAttribute("className")}),x.getElementsByTagName=f(function(a){return a.appendChild(b.createComment("")),!a.getElementsByTagName("*").length}),x.getElementsByClassName=f(function(a){return a.innerHTML="<div class='a'></div><div class='a i'></div>",a.firstChild.className="i",2===a.getElementsByClassName("i").length}),x.getById=f(function(a){return H.appendChild(a).id=N,!b.getElementsByName||!b.getElementsByName(N).length}),x.getById?(z.find.ID=function(a,b){if(typeof b.getElementById!==W&&I){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},z.filter.ID=function(a){var b=a.replace(xa,ya);return function(a){return a.getAttribute("id")===b}}):(delete z.find.ID,z.filter.ID=function(a){var b=a.replace(xa,ya);return function(a){var c=typeof a.getAttributeNode!==W&&a.getAttributeNode("id");return c&&c.value===b}}),z.find.TAG=x.getElementsByTagName?function(a,b){return typeof b.getElementsByTagName!==W?b.getElementsByTagName(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},z.find.CLASS=x.getElementsByClassName&&function(a,b){return typeof b.getElementsByClassName!==W&&I?b.getElementsByClassName(a):void 0},K=[],J=[],(x.qsa=sa.test(b.querySelectorAll))&&(f(function(a){a.innerHTML="<select><option selected=''></option></select>",a.querySelectorAll("[selected]").length||J.push("\\["+ea+"*(?:value|"+da+")"),a.querySelectorAll(":checked").length||J.push(":checked")}),f(function(a){var c=b.createElement("input");c.setAttribute("type","hidden"),a.appendChild(c).setAttribute("t",""),a.querySelectorAll("[t^='']").length&&J.push("[*^$]="+ea+"*(?:''|\"\")"),a.querySelectorAll(":enabled").length||J.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),J.push(",.*:")})),(x.matchesSelector=sa.test(L=H.webkitMatchesSelector||H.mozMatchesSelector||H.oMatchesSelector||H.msMatchesSelector))&&f(function(a){x.disconnectedMatch=L.call(a,"div"),L.call(a,"[s!='']:x"),K.push("!=",ia)}),J=J.length&&new RegExp(J.join("|")),K=K.length&&new RegExp(K.join("|")),M=sa.test(H.contains)||H.compareDocumentPosition?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},V=H.compareDocumentPosition?function(a,c){if(a===c)return U=!0,0;var d=c.compareDocumentPosition&&a.compareDocumentPosition&&a.compareDocumentPosition(c);return d?1&d||!x.sortDetached&&c.compareDocumentPosition(a)===d?a===b||M(O,a)?-1:c===b||M(O,c)?1:E?ca.call(E,a)-ca.call(E,c):0:4&d?-1:1:a.compareDocumentPosition?-1:1}:function(a,c){var d,e=0,f=a.parentNode,g=c.parentNode,i=[a],j=[c];if(a===c)return U=!0,0;if(!f||!g)return a===b?-1:c===b?1:f?-1:g?1:E?ca.call(E,a)-ca.call(E,c):0;if(f===g)return h(a,c);for(d=a;d=d.parentNode;)i.unshift(d);for(d=c;d=d.parentNode;)j.unshift(d);for(;i[e]===j[e];)e++;return e?h(i[e],j[e]):i[e]===O?-1:j[e]===O?1:0},b):G},c.matches=function(a,b){return c(a,null,null,b)},c.matchesSelector=function(a,b){if((a.ownerDocument||a)!==G&&F(a),b=b.replace(oa,"='$1']"),!(!x.matchesSelector||!I||K&&K.test(b)||J&&J.test(b)))try{var d=L.call(a,b);if(d||x.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return c(b,G,null,[a]).length>0},c.contains=function(a,b){return(a.ownerDocument||a)!==G&&F(a),M(a,b)},c.attr=function(a,c){(a.ownerDocument||a)!==G&&F(a);var d=z.attrHandle[c.toLowerCase()],e=d&&Y.call(z.attrHandle,c.toLowerCase())?d(a,c,!I):b;return e===b?x.attributes||!I?a.getAttribute(c):(e=a.getAttributeNode(c))&&e.specified?e.value:null:e},c.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},c.uniqueSort=function(a){var b,c=[],d=0,e=0;if(U=!x.detectDuplicates,E=!x.sortStable&&a.slice(0),a.sort(V),U){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)a.splice(c[d],1)}return a},A=c.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=A(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d];d++)c+=A(b);return c},z=c.selectors={cacheLength:50,createPseudo:e,match:ra,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(xa,ya),a[3]=(a[4]||a[5]||"").replace(xa,ya),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||c.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&c.error(a[0]),a},PSEUDO:function(a){var c,d=!a[5]&&a[2];return ra.CHILD.test(a[0])?null:(a[3]&&a[4]!==b?a[2]=a[4]:d&&pa.test(d)&&(c=m(d,!0))&&(c=d.indexOf(")",d.length-c)-d.length)&&(a[0]=a[0].slice(0,c),a[2]=d.slice(0,c)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(xa,ya).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=R[a+" "];return b||(b=new RegExp("(^|"+ea+")"+a+"("+ea+"|$)"))&&R(a,function(a){return b.test("string"==typeof a.className&&a.className||typeof a.getAttribute!==W&&a.getAttribute("class")||"")})},ATTR:function(a,b,d){return function(e){var f=c.attr(e,a);return null==f?"!="===b:b?(f+="","="===b?f===d:"!="===b?f!==d:"^="===b?d&&0===f.indexOf(d):"*="===b?d&&f.indexOf(d)>-1:"$="===b?d&&f.slice(-d.length)===d:"~="===b?(" "+f+" ").indexOf(d)>-1:"|="===b?f===d||f.slice(0,d.length+1)===d+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){for(;p;){for(l=b;l=l[p];)if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(k=q[N]||(q[N]={}),j=k[a]||[],n=j[0]===P&&j[1],m=j[0]===P&&j[2],l=n&&q.childNodes[n];l=++n&&l&&l[p]||(m=n=0)||o.pop();)if(1===l.nodeType&&++m&&l===b){k[a]=[P,n,m];break}}else if(s&&(j=(b[N]||(b[N]={}))[a])&&j[0]===P)m=j[1];else for(;(l=++n&&l&&l[p]||(m=n=0)||o.pop())&&((h?l.nodeName.toLowerCase()!==r:1!==l.nodeType)||!++m||(s&&((l[N]||(l[N]={}))[a]=[P,m]),l!==b)););return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var d,f=z.pseudos[a]||z.setFilters[a.toLowerCase()]||c.error("unsupported pseudo: "+a);return f[N]?f(b):f.length>1?(d=[a,a,"",b],z.setFilters.hasOwnProperty(a.toLowerCase())?e(function(a,c){for(var d,e=f(a,b),g=e.length;g--;)d=ca.call(a,e[g]),a[d]=!(c[d]=e[g])}):function(a){return f(a,0,d)}):f}},pseudos:{not:e(function(a){var b=[],c=[],d=C(a.replace(ja,"$1"));return d[N]?e(function(a,b,c,e){for(var f,g=d(a,null,e,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:e(function(a){return function(b){return c(a,b).length>0}}),contains:e(function(a){return function(b){return(b.textContent||b.innerText||A(b)).indexOf(a)>-1}}),lang:e(function(a){return qa.test(a||"")||c.error("unsupported lang: "+a),a=a.replace(xa,ya).toLowerCase(),function(b){var c;do if(c=I?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===H},focus:function(a){return a===G.activeElement&&(!G.hasFocus||G.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeName>"@"||3===a.nodeType||4===a.nodeType)return!1;return!0},parent:function(a){return!z.pseudos.empty(a)},header:function(a){return va.test(a.nodeName)},input:function(a){return ua.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||b.toLowerCase()===a.type)},first:k(function(){return[0]}),last:k(function(a,b){return[b-1]}),eq:k(function(a,b,c){return[0>c?c+b:c]}),even:k(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:k(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:k(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:k(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},z.pseudos.nth=z.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})z.pseudos[w]=i(w);for(w in{submit:!0,reset:!0})z.pseudos[w]=j(w);l.prototype=z.filters=z.pseudos,z.setFilters=new l,C=c.compile=function(a,b){var c,d=[],e=[],f=T[a+" "];if(!f){for(b||(b=m(a)),c=b.length;c--;)f=s(b[c]),f[N]?d.push(f):e.push(f);f=T(a,t(e,d))}return f},x.sortStable=N.split("").sort(V).join("")===N,x.detectDuplicates=U,F(),x.sortDetached=f(function(a){return 1&a.compareDocumentPosition(G.createElement("div"))}),f(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||g("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),x.attributes&&f(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||g("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),f(function(a){return null==a.getAttribute("disabled")})||g(da,function(a,b,c){var d;return c?void 0:(d=a.getAttributeNode(b))&&d.specified?d.value:a[b]===!0?b.toLowerCase():null}),ka.find=c,ka.expr=c.selectors,ka.expr[":"]=ka.expr.pseudos,ka.unique=c.uniqueSort,ka.text=c.getText,ka.isXMLDoc=c.isXML,ka.contains=c.contains}(a);var za={};ka.Callbacks=function(a){a="string"==typeof a?za[a]||d(a):ka.extend({},a);var c,e,f,g,h,i,j=[],k=!a.once&&[],l=function(b){for(e=a.memory&&b,f=!0,h=i||0,i=0,g=j.length,c=!0;j&&g>h;h++)if(j[h].apply(b[0],b[1])===!1&&a.stopOnFalse){e=!1;break}c=!1,j&&(k?k.length&&l(k.shift()):e?j=[]:m.disable())},m={add:function(){if(j){var b=j.length;!function d(b){ka.each(b,function(b,c){var e=ka.type(c);"function"===e?a.unique&&m.has(c)||j.push(c):c&&c.length&&"string"!==e&&d(c)})}(arguments),c?g=j.length:e&&(i=b,l(e))}return this},remove:function(){return j&&ka.each(arguments,function(a,b){for(var d;(d=ka.inArray(b,j,d))>-1;)j.splice(d,1),c&&(g>=d&&g--,h>=d&&h--)}),this},has:function(a){return a?ka.inArray(a,j)>-1:!(!j||!j.length)},empty:function(){return j=[],g=0,this},disable:function(){return j=k=e=b,this},disabled:function(){return!j},lock:function(){return k=b,e||m.disable(),this},locked:function(){return!k},fireWith:function(a,b){return!j||f&&!k||(b=b||[],b=[a,b.slice?b.slice():b],c?k.push(b):l(b)),this},fire:function(){return m.fireWith(this,arguments),this},fired:function(){return!!f}};return m},ka.extend({Deferred:function(a){var b=[["resolve","done",ka.Callbacks("once memory"),"resolved"],["reject","fail",ka.Callbacks("once memory"),"rejected"],["notify","progress",ka.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return ka.Deferred(function(c){ka.each(b,function(b,f){var g=f[0],h=ka.isFunction(a[b])&&a[b];e[f[1]](function(){var a=h&&h.apply(this,arguments);a&&ka.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[g+"With"](this===d?c.promise():this,h?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?ka.extend(a,d):d}},e={};
return d.pipe=d.then,ka.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b,c,d,e=0,f=fa.call(arguments),g=f.length,h=1!==g||a&&ka.isFunction(a.promise)?g:0,i=1===h?a:ka.Deferred(),j=function(a,c,d){return function(e){c[a]=this,d[a]=arguments.length>1?fa.call(arguments):e,d===b?i.notifyWith(c,d):--h||i.resolveWith(c,d)}};if(g>1)for(b=new Array(g),c=new Array(g),d=new Array(g);g>e;e++)f[e]&&ka.isFunction(f[e].promise)?f[e].promise().done(j(e,d,f)).fail(i.reject).progress(j(e,c,b)):--h;return h||i.resolveWith(d,f),i.promise()}}),ka.support=function(b){var c,d,e,f,g,h,i,j,k,l=Y.createElement("div");if(l.setAttribute("className","t"),l.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",c=l.getElementsByTagName("*")||[],d=l.getElementsByTagName("a")[0],!d||!d.style||!c.length)return b;f=Y.createElement("select"),h=f.appendChild(Y.createElement("option")),e=l.getElementsByTagName("input")[0],d.style.cssText="top:1px;float:left;opacity:.5",b.getSetAttribute="t"!==l.className,b.leadingWhitespace=3===l.firstChild.nodeType,b.tbody=!l.getElementsByTagName("tbody").length,b.htmlSerialize=!!l.getElementsByTagName("link").length,b.style=/top/.test(d.getAttribute("style")),b.hrefNormalized="/a"===d.getAttribute("href"),b.opacity=/^0.5/.test(d.style.opacity),b.cssFloat=!!d.style.cssFloat,b.checkOn=!!e.value,b.optSelected=h.selected,b.enctype=!!Y.createElement("form").enctype,b.html5Clone="<:nav></:nav>"!==Y.createElement("nav").cloneNode(!0).outerHTML,b.inlineBlockNeedsLayout=!1,b.shrinkWrapBlocks=!1,b.pixelPosition=!1,b.deleteExpando=!0,b.noCloneEvent=!0,b.reliableMarginRight=!0,b.boxSizingReliable=!0,e.checked=!0,b.noCloneChecked=e.cloneNode(!0).checked,f.disabled=!0,b.optDisabled=!h.disabled;try{delete l.test}catch(m){b.deleteExpando=!1}e=Y.createElement("input"),e.setAttribute("value",""),b.input=""===e.getAttribute("value"),e.value="t",e.setAttribute("type","radio"),b.radioValue="t"===e.value,e.setAttribute("checked","t"),e.setAttribute("name","t"),g=Y.createDocumentFragment(),g.appendChild(e),b.appendChecked=e.checked,b.checkClone=g.cloneNode(!0).cloneNode(!0).lastChild.checked,l.attachEvent&&(l.attachEvent("onclick",function(){b.noCloneEvent=!1}),l.cloneNode(!0).click());for(k in{submit:!0,change:!0,focusin:!0})l.setAttribute(i="on"+k,"t"),b[k+"Bubbles"]=i in a||l.attributes[i].expando===!1;l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",b.clearCloneStyle="content-box"===l.style.backgroundClip;for(k in ka(b))break;return b.ownLast="0"!==k,ka(function(){var c,d,e,f="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",g=Y.getElementsByTagName("body")[0];g&&(c=Y.createElement("div"),c.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",g.appendChild(c).appendChild(l),l.innerHTML="<table><tr><td></td><td>t</td></tr></table>",e=l.getElementsByTagName("td"),e[0].style.cssText="padding:0;margin:0;border:0;display:none",j=0===e[0].offsetHeight,e[0].style.display="",e[1].style.display="none",b.reliableHiddenOffsets=j&&0===e[0].offsetHeight,l.innerHTML="",l.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",ka.swap(g,null!=g.style.zoom?{zoom:1}:{},function(){b.boxSizing=4===l.offsetWidth}),a.getComputedStyle&&(b.pixelPosition="1%"!==(a.getComputedStyle(l,null)||{}).top,b.boxSizingReliable="4px"===(a.getComputedStyle(l,null)||{width:"4px"}).width,d=l.appendChild(Y.createElement("div")),d.style.cssText=l.style.cssText=f,d.style.marginRight=d.style.width="0",l.style.width="1px",b.reliableMarginRight=!parseFloat((a.getComputedStyle(d,null)||{}).marginRight)),typeof l.style.zoom!==W&&(l.innerHTML="",l.style.cssText=f+"width:1px;padding:1px;display:inline;zoom:1",b.inlineBlockNeedsLayout=3===l.offsetWidth,l.style.display="block",l.innerHTML="<div></div>",l.firstChild.style.width="5px",b.shrinkWrapBlocks=3!==l.offsetWidth,b.inlineBlockNeedsLayout&&(g.style.zoom=1)),g.removeChild(c),c=l=e=d=null)}),c=f=g=h=d=e=null,b}({});var Aa=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,Ba=/([A-Z])/g;ka.extend({cache:{},noData:{applet:!0,embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){return a=a.nodeType?ka.cache[a[ka.expando]]:a[ka.expando],!!a&&!h(a)},data:function(a,b,c){return e(a,b,c)},removeData:function(a,b){return f(a,b)},_data:function(a,b,c){return e(a,b,c,!0)},_removeData:function(a,b){return f(a,b,!0)},acceptData:function(a){if(a.nodeType&&1!==a.nodeType&&9!==a.nodeType)return!1;var b=a.nodeName&&ka.noData[a.nodeName.toLowerCase()];return!b||b!==!0&&a.getAttribute("classid")===b}}),ka.fn.extend({data:function(a,c){var d,e,f=null,h=0,i=this[0];if(a===b){if(this.length&&(f=ka.data(i),1===i.nodeType&&!ka._data(i,"parsedAttrs"))){for(d=i.attributes;h<d.length;h++)e=d[h].name,0===e.indexOf("data-")&&(e=ka.camelCase(e.slice(5)),g(i,e,f[e]));ka._data(i,"parsedAttrs",!0)}return f}return"object"==typeof a?this.each(function(){ka.data(this,a)}):arguments.length>1?this.each(function(){ka.data(this,a,c)}):i?g(i,a,ka.data(i,a)):null},removeData:function(a){return this.each(function(){ka.removeData(this,a)})}}),ka.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=ka._data(a,b),c&&(!d||ka.isArray(c)?d=ka._data(a,b,ka.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=ka.queue(a,b),d=c.length,e=c.shift(),f=ka._queueHooks(a,b),g=function(){ka.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return ka._data(a,c)||ka._data(a,c,{empty:ka.Callbacks("once memory").add(function(){ka._removeData(a,b+"queue"),ka._removeData(a,c)})})}}),ka.fn.extend({queue:function(a,c){var d=2;return"string"!=typeof a&&(c=a,a="fx",d--),arguments.length<d?ka.queue(this[0],a):c===b?this:this.each(function(){var b=ka.queue(this,a,c);ka._queueHooks(this,a),"fx"===a&&"inprogress"!==b[0]&&ka.dequeue(this,a)})},dequeue:function(a){return this.each(function(){ka.dequeue(this,a)})},delay:function(a,b){return a=ka.fx?ka.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){var d,e=1,f=ka.Deferred(),g=this,h=this.length,i=function(){--e||f.resolveWith(g,[g])};for("string"!=typeof a&&(c=a,a=b),a=a||"fx";h--;)d=ka._data(g[h],a+"queueHooks"),d&&d.empty&&(e++,d.empty.add(i));return i(),f.promise(c)}});var Ca,Da,Ea=/[\t\r\n\f]/g,Fa=/\r/g,Ga=/^(?:input|select|textarea|button|object)$/i,Ha=/^(?:a|area)$/i,Ia=/^(?:checked|selected)$/i,Ja=ka.support.getSetAttribute,Ka=ka.support.input;ka.fn.extend({attr:function(a,b){return ka.access(this,ka.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){ka.removeAttr(this,a)})},prop:function(a,b){return ka.access(this,ka.prop,a,b,arguments.length>1)},removeProp:function(a){return a=ka.propFix[a]||a,this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,f,g=0,h=this.length,i="string"==typeof a&&a;if(ka.isFunction(a))return this.each(function(b){ka(this).addClass(a.call(this,b,this.className))});if(i)for(b=(a||"").match(ma)||[];h>g;g++)if(c=this[g],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Ea," "):" ")){for(f=0;e=b[f++];)d.indexOf(" "+e+" ")<0&&(d+=e+" ");c.className=ka.trim(d)}return this},removeClass:function(a){var b,c,d,e,f,g=0,h=this.length,i=0===arguments.length||"string"==typeof a&&a;if(ka.isFunction(a))return this.each(function(b){ka(this).removeClass(a.call(this,b,this.className))});if(i)for(b=(a||"").match(ma)||[];h>g;g++)if(c=this[g],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Ea," "):"")){for(f=0;e=b[f++];)for(;d.indexOf(" "+e+" ")>=0;)d=d.replace(" "+e+" "," ");c.className=a?ka.trim(d):""}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):ka.isFunction(a)?this.each(function(c){ka(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===c)for(var b,d=0,e=ka(this),f=a.match(ma)||[];b=f[d++];)e.hasClass(b)?e.removeClass(b):e.addClass(b);else(c===W||"boolean"===c)&&(this.className&&ka._data(this,"__className__",this.className),this.className=this.className||a===!1?"":ka._data(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(Ea," ").indexOf(b)>=0)return!0;return!1},val:function(a){var c,d,e,f=this[0];{if(arguments.length)return e=ka.isFunction(a),this.each(function(c){var f;1===this.nodeType&&(f=e?a.call(this,c,ka(this).val()):a,null==f?f="":"number"==typeof f?f+="":ka.isArray(f)&&(f=ka.map(f,function(a){return null==a?"":a+""})),d=ka.valHooks[this.type]||ka.valHooks[this.nodeName.toLowerCase()],d&&"set"in d&&d.set(this,f,"value")!==b||(this.value=f))});if(f)return d=ka.valHooks[f.type]||ka.valHooks[f.nodeName.toLowerCase()],d&&"get"in d&&(c=d.get(f,"value"))!==b?c:(c=f.value,"string"==typeof c?c.replace(Fa,""):null==c?"":c)}}}),ka.extend({valHooks:{option:{get:function(a){var b=ka.find.attr(a,"value");return null!=b?b:a.text}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(ka.support.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&ka.nodeName(c.parentNode,"optgroup"))){if(b=ka(c).val(),f)return b;g.push(b)}return g},set:function(a,b){for(var c,d,e=a.options,f=ka.makeArray(b),g=e.length;g--;)d=e[g],(d.selected=ka.inArray(ka(d).val(),f)>=0)&&(c=!0);return c||(a.selectedIndex=-1),f}}},attr:function(a,c,d){var e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return typeof a.getAttribute===W?ka.prop(a,c,d):(1===g&&ka.isXMLDoc(a)||(c=c.toLowerCase(),e=ka.attrHooks[c]||(ka.expr.match.bool.test(c)?Da:Ca)),d===b?e&&"get"in e&&null!==(f=e.get(a,c))?f:(f=ka.find.attr(a,c),null==f?b:f):null!==d?e&&"set"in e&&(f=e.set(a,d,c))!==b?f:(a.setAttribute(c,d+""),d):void ka.removeAttr(a,c))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(ma);if(f&&1===a.nodeType)for(;c=f[e++];)d=ka.propFix[c]||c,ka.expr.match.bool.test(c)?Ka&&Ja||!Ia.test(c)?a[d]=!1:a[ka.camelCase("default-"+c)]=a[d]=!1:ka.attr(a,c,""),a.removeAttribute(Ja?c:d)},attrHooks:{type:{set:function(a,b){if(!ka.support.radioValue&&"radio"===b&&ka.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(a,c,d){var e,f,g,h=a.nodeType;if(a&&3!==h&&8!==h&&2!==h)return g=1!==h||!ka.isXMLDoc(a),g&&(c=ka.propFix[c]||c,f=ka.propHooks[c]),d!==b?f&&"set"in f&&(e=f.set(a,d,c))!==b?e:a[c]=d:f&&"get"in f&&null!==(e=f.get(a,c))?e:a[c]},propHooks:{tabIndex:{get:function(a){var b=ka.find.attr(a,"tabindex");return b?parseInt(b,10):Ga.test(a.nodeName)||Ha.test(a.nodeName)&&a.href?0:-1}}}}),Da={set:function(a,b,c){return b===!1?ka.removeAttr(a,c):Ka&&Ja||!Ia.test(c)?a.setAttribute(!Ja&&ka.propFix[c]||c,c):a[ka.camelCase("default-"+c)]=a[c]=!0,c}},ka.each(ka.expr.match.bool.source.match(/\w+/g),function(a,c){var d=ka.expr.attrHandle[c]||ka.find.attr;ka.expr.attrHandle[c]=Ka&&Ja||!Ia.test(c)?function(a,c,e){var f=ka.expr.attrHandle[c],g=e?b:(ka.expr.attrHandle[c]=b)!=d(a,c,e)?c.toLowerCase():null;return ka.expr.attrHandle[c]=f,g}:function(a,c,d){return d?b:a[ka.camelCase("default-"+c)]?c.toLowerCase():null}}),Ka&&Ja||(ka.attrHooks.value={set:function(a,b,c){return ka.nodeName(a,"input")?void(a.defaultValue=b):Ca&&Ca.set(a,b,c)}}),Ja||(Ca={set:function(a,c,d){var e=a.getAttributeNode(d);return e||a.setAttributeNode(e=a.ownerDocument.createAttribute(d)),e.value=c+="","value"===d||c===a.getAttribute(d)?c:b}},ka.expr.attrHandle.id=ka.expr.attrHandle.name=ka.expr.attrHandle.coords=function(a,c,d){var e;return d?b:(e=a.getAttributeNode(c))&&""!==e.value?e.value:null},ka.valHooks.button={get:function(a,c){var d=a.getAttributeNode(c);return d&&d.specified?d.value:b},set:Ca.set},ka.attrHooks.contenteditable={set:function(a,b,c){Ca.set(a,""===b?!1:b,c)}},ka.each(["width","height"],function(a,b){ka.attrHooks[b]={set:function(a,c){return""===c?(a.setAttribute(b,"auto"),c):void 0}}})),ka.support.hrefNormalized||ka.each(["href","src"],function(a,b){ka.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}}),ka.support.style||(ka.attrHooks.style={get:function(a){return a.style.cssText||b},set:function(a,b){return a.style.cssText=b+""}}),ka.support.optSelected||(ka.propHooks.selected={get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}}),ka.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ka.propFix[this.toLowerCase()]=this}),ka.support.enctype||(ka.propFix.enctype="encoding"),ka.each(["radio","checkbox"],function(){ka.valHooks[this]={set:function(a,b){return ka.isArray(b)?a.checked=ka.inArray(ka(a).val(),b)>=0:void 0}},ka.support.checkOn||(ka.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var La=/^(?:input|select|textarea)$/i,Ma=/^key/,Na=/^(?:mouse|contextmenu)|click/,Oa=/^(?:focusinfocus|focusoutblur)$/,Pa=/^([^.]*)(?:\.(.+)|)$/;ka.event={global:{},add:function(a,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r=ka._data(a);if(r){for(d.handler&&(j=d,d=j.handler,f=j.selector),d.guid||(d.guid=ka.guid++),(h=r.events)||(h=r.events={}),(l=r.handle)||(l=r.handle=function(a){return typeof ka===W||a&&ka.event.triggered===a.type?b:ka.event.dispatch.apply(l.elem,arguments)},l.elem=a),c=(c||"").match(ma)||[""],i=c.length;i--;)g=Pa.exec(c[i])||[],o=q=g[1],p=(g[2]||"").split(".").sort(),o&&(k=ka.event.special[o]||{},o=(f?k.delegateType:k.bindType)||o,k=ka.event.special[o]||{},m=ka.extend({type:o,origType:q,data:e,handler:d,guid:d.guid,selector:f,needsContext:f&&ka.expr.match.needsContext.test(f),namespace:p.join(".")},j),(n=h[o])||(n=h[o]=[],n.delegateCount=0,k.setup&&k.setup.call(a,e,p,l)!==!1||(a.addEventListener?a.addEventListener(o,l,!1):a.attachEvent&&a.attachEvent("on"+o,l))),k.add&&(k.add.call(a,m),m.handler.guid||(m.handler.guid=d.guid)),f?n.splice(n.delegateCount++,0,m):n.push(m),ka.event.global[o]=!0);a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=ka.hasData(a)&&ka._data(a);if(q&&(k=q.events)){for(b=(b||"").match(ma)||[""],j=b.length;j--;)if(h=Pa.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){for(l=ka.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=k[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=f=m.length;f--;)g=m[f],!e&&p!==g.origType||c&&c.guid!==g.guid||h&&!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(m.splice(f,1),g.selector&&m.delegateCount--,l.remove&&l.remove.call(a,g));i&&!m.length&&(l.teardown&&l.teardown.call(a,o,q.handle)!==!1||ka.removeEvent(a,n,q.handle),delete k[n])}else for(n in k)ka.event.remove(a,n+b[j],c,d,!0);ka.isEmptyObject(k)&&(delete q.handle,ka._removeData(a,"events"))}},trigger:function(c,d,e,f){var g,h,i,j,k,l,m,n=[e||Y],o=ia.call(c,"type")?c.type:c,p=ia.call(c,"namespace")?c.namespace.split("."):[];if(i=l=e=e||Y,3!==e.nodeType&&8!==e.nodeType&&!Oa.test(o+ka.event.triggered)&&(o.indexOf(".")>=0&&(p=o.split("."),o=p.shift(),p.sort()),h=o.indexOf(":")<0&&"on"+o,c=c[ka.expando]?c:new ka.Event(o,"object"==typeof c&&c),c.isTrigger=f?2:3,c.namespace=p.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,c.result=b,c.target||(c.target=e),d=null==d?[c]:ka.makeArray(d,[c]),k=ka.event.special[o]||{},f||!k.trigger||k.trigger.apply(e,d)!==!1)){if(!f&&!k.noBubble&&!ka.isWindow(e)){for(j=k.delegateType||o,Oa.test(j+o)||(i=i.parentNode);i;i=i.parentNode)n.push(i),l=i;l===(e.ownerDocument||Y)&&n.push(l.defaultView||l.parentWindow||a)}for(m=0;(i=n[m++])&&!c.isPropagationStopped();)c.type=m>1?j:k.bindType||o,g=(ka._data(i,"events")||{})[c.type]&&ka._data(i,"handle"),g&&g.apply(i,d),g=h&&i[h],g&&ka.acceptData(i)&&g.apply&&g.apply(i,d)===!1&&c.preventDefault();if(c.type=o,!f&&!c.isDefaultPrevented()&&(!k._default||k._default.apply(n.pop(),d)===!1)&&ka.acceptData(e)&&h&&e[o]&&!ka.isWindow(e)){l=e[h],l&&(e[h]=null),ka.event.triggered=o;try{e[o]()}catch(q){}ka.event.triggered=b,l&&(e[h]=l)}return c.result}},dispatch:function(a){a=ka.event.fix(a);var c,d,e,f,g,h=[],i=fa.call(arguments),j=(ka._data(this,"events")||{})[a.type]||[],k=ka.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){for(h=ka.event.handlers.call(this,a,j),c=0;(f=h[c++])&&!a.isPropagationStopped();)for(a.currentTarget=f.elem,g=0;(e=f.handlers[g++])&&!a.isImmediatePropagationStopped();)(!a.namespace_re||a.namespace_re.test(e.namespace))&&(a.handleObj=e,a.data=e.data,d=((ka.event.special[e.origType]||{}).handle||e.handler).apply(f.elem,i),d!==b&&(a.result=d)===!1&&(a.preventDefault(),a.stopPropagation()));return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,c){var d,e,f,g,h=[],i=c.delegateCount,j=a.target;if(i&&j.nodeType&&(!a.button||"click"!==a.type))for(;j!=this;j=j.parentNode||this)if(1===j.nodeType&&(j.disabled!==!0||"click"!==a.type)){for(f=[],g=0;i>g;g++)e=c[g],d=e.selector+" ",f[d]===b&&(f[d]=e.needsContext?ka(d,this).index(j)>=0:ka.find(d,this,null,[j]).length),f[d]&&f.push(e);f.length&&h.push({elem:j,handlers:f})}return i<c.length&&h.push({elem:this,handlers:c.slice(i)}),h},fix:function(a){if(a[ka.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];for(g||(this.fixHooks[e]=g=Na.test(e)?this.mouseHooks:Ma.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new ka.Event(f),b=d.length;b--;)c=d[b],a[c]=f[c];return a.target||(a.target=f.srcElement||Y),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,g.filter?g.filter(a,f):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,c){var d,e,f,g=c.button,h=c.fromElement;return null==a.pageX&&null!=c.clientX&&(e=a.target.ownerDocument||Y,f=e.documentElement,d=e.body,a.pageX=c.clientX+(f&&f.scrollLeft||d&&d.scrollLeft||0)-(f&&f.clientLeft||d&&d.clientLeft||0),a.pageY=c.clientY+(f&&f.scrollTop||d&&d.scrollTop||0)-(f&&f.clientTop||d&&d.clientTop||0)),!a.relatedTarget&&h&&(a.relatedTarget=h===a.target?c.toElement:h),a.which||g===b||(a.which=1&g?1:2&g?3:4&g?2:0),a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==k()&&this.focus)try{return this.focus(),!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){return this===k()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return ka.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(a){return ka.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){a.result!==b&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=ka.extend(new ka.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?ka.event.trigger(e,null,b):ka.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},ka.removeEvent=Y.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&(typeof a[d]===W&&(a[d]=null),a.detachEvent(d,c))},ka.Event=function(a,b){return this instanceof ka.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?i:j):this.type=a,b&&ka.extend(this,b),this.timeStamp=a&&a.timeStamp||ka.now(),void(this[ka.expando]=!0)):new ka.Event(a,b)},ka.Event.prototype={isDefaultPrevented:j,isPropagationStopped:j,isImmediatePropagationStopped:j,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=i,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=i,a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=i,this.stopPropagation()}},ka.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){ka.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!ka.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),ka.support.submitBubbles||(ka.event.special.submit={setup:function(){return ka.nodeName(this,"form")?!1:void ka.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=ka.nodeName(c,"input")||ka.nodeName(c,"button")?c.form:b;d&&!ka._data(d,"submitBubbles")&&(ka.event.add(d,"submit._submit",function(a){a._submit_bubble=!0}),ka._data(d,"submitBubbles",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&ka.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return ka.nodeName(this,"form")?!1:void ka.event.remove(this,"._submit")}}),ka.support.changeBubbles||(ka.event.special.change={setup:function(){return La.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(ka.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),ka.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),ka.event.simulate("change",this,a,!0)})),!1):void ka.event.add(this,"beforeactivate._change",function(a){var b=a.target;La.test(b.nodeName)&&!ka._data(b,"changeBubbles")&&(ka.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||ka.event.simulate("change",this.parentNode,a,!0)}),ka._data(b,"changeBubbles",!0))})},handle:function(a){var b=a.target;return this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return ka.event.remove(this,"._change"),!La.test(this.nodeName)}}),ka.support.focusinBubbles||ka.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){ka.event.simulate(b,a.target,ka.event.fix(a),!0)};ka.event.special[b]={setup:function(){0===c++&&Y.addEventListener(a,d,!0)},teardown:function(){0===--c&&Y.removeEventListener(a,d,!0)}}}),ka.fn.extend({on:function(a,c,d,e,f){var g,h;if("object"==typeof a){"string"!=typeof c&&(d=d||c,c=b);for(g in a)this.on(g,c,d,a[g],f);return this}if(null==d&&null==e?(e=c,d=c=b):null==e&&("string"==typeof c?(e=d,d=b):(e=d,d=c,c=b)),e===!1)e=j;else if(!e)return this;return 1===f&&(h=e,e=function(a){return ka().off(a),h.apply(this,arguments)},e.guid=h.guid||(h.guid=ka.guid++)),this.each(function(){ka.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){var e,f;if(a&&a.preventDefault&&a.handleObj)return e=a.handleObj,ka(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),this;if("object"==typeof a){for(f in a)this.off(f,c,a[f]);return this}return(c===!1||"function"==typeof c)&&(d=c,c=b),d===!1&&(d=j),this.each(function(){ka.event.remove(this,a,d,c)})},trigger:function(a,b){return this.each(function(){ka.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?ka.event.trigger(a,b,c,!0):void 0}});var Qa=/^.[^:#\[\.,]*$/,Ra=/^(?:parents|prev(?:Until|All))/,Sa=ka.expr.match.needsContext,Ta={children:!0,contents:!0,next:!0,prev:!0};ka.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;if("string"!=typeof a)return this.pushStack(ka(a).filter(function(){for(b=0;e>b;b++)if(ka.contains(d[b],this))return!0}));for(b=0;e>b;b++)ka.find(a,d[b],c);return c=this.pushStack(e>1?ka.unique(c):c),c.selector=this.selector?this.selector+" "+a:a,c},has:function(a){var b,c=ka(a,this),d=c.length;return this.filter(function(){for(b=0;d>b;b++)if(ka.contains(this,c[b]))return!0})},not:function(a){return this.pushStack(m(this,a||[],!0))},filter:function(a){return this.pushStack(m(this,a||[],!1))},is:function(a){return!!m(this,"string"==typeof a&&Sa.test(a)?ka(a):a||[],!1).length},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=Sa.test(a)||"string"!=typeof a?ka(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&ka.find.matchesSelector(c,a))){c=f.push(c);break}return this.pushStack(f.length>1?ka.unique(f):f)},index:function(a){return a?"string"==typeof a?ka.inArray(this[0],ka(a)):ka.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){var c="string"==typeof a?ka(a,b):ka.makeArray(a&&a.nodeType?[a]:a),d=ka.merge(this.get(),c);return this.pushStack(ka.unique(d))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),ka.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return ka.dir(a,"parentNode")},parentsUntil:function(a,b,c){return ka.dir(a,"parentNode",c)},next:function(a){return l(a,"nextSibling")},prev:function(a){return l(a,"previousSibling")},nextAll:function(a){return ka.dir(a,"nextSibling")},prevAll:function(a){return ka.dir(a,"previousSibling")},nextUntil:function(a,b,c){return ka.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return ka.dir(a,"previousSibling",c)},siblings:function(a){return ka.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return ka.sibling(a.firstChild)},contents:function(a){return ka.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:ka.merge([],a.childNodes)}},function(a,b){ka.fn[a]=function(c,d){var e=ka.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=ka.filter(d,e)),this.length>1&&(Ta[a]||(e=ka.unique(e)),Ra.test(a)&&(e=e.reverse())),this.pushStack(e)}}),ka.extend({filter:function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?ka.find.matchesSelector(d,a)?[d]:[]:ka.find.matches(a,ka.grep(b,function(a){return 1===a.nodeType}))},dir:function(a,c,d){for(var e=[],f=a[c];f&&9!==f.nodeType&&(d===b||1!==f.nodeType||!ka(f).is(d));)1===f.nodeType&&e.push(f),f=f[c];return e},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});var Ua="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Va=/ jQuery\d+="(?:null|\d+)"/g,Wa=new RegExp("<(?:"+Ua+")[\\s/>]","i"),Xa=/^\s+/,Ya=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Za=/<([\w:]+)/,$a=/<tbody/i,_a=/<|&#?\w+;/,ab=/<(?:script|style|link)/i,bb=/^(?:checkbox|radio)$/i,cb=/checked\s*(?:[^=]|=\s*.checked.)/i,db=/^$|\/(?:java|ecma)script/i,eb=/^true\/(.*)/,fb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,gb={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ka.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},hb=n(Y),ib=hb.appendChild(Y.createElement("div"));gb.optgroup=gb.option,gb.tbody=gb.tfoot=gb.colgroup=gb.caption=gb.thead,gb.th=gb.td,ka.fn.extend({text:function(a){return ka.access(this,function(a){return a===b?ka.text(this):this.empty().append((this[0]&&this[0].ownerDocument||Y).createTextNode(a))},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=o(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=o(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?ka.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||ka.cleanData(u(c)),c.parentNode&&(b&&ka.contains(c.ownerDocument,c)&&r(u(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){for(1===a.nodeType&&ka.cleanData(u(a,!1));a.firstChild;)a.removeChild(a.firstChild);a.options&&ka.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return ka.clone(this,a,b)})},html:function(a){return ka.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b)return 1===c.nodeType?c.innerHTML.replace(Va,""):b;if(!("string"!=typeof a||ab.test(a)||!ka.support.htmlSerialize&&Wa.test(a)||!ka.support.leadingWhitespace&&Xa.test(a)||gb[(Za.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(Ya,"<$1></$2>");try{for(;e>d;d++)c=this[d]||{},1===c.nodeType&&(ka.cleanData(u(c,!1)),c.innerHTML=a);c=0}catch(f){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=ka.map(this,function(a){return[a.nextSibling,a.parentNode]}),b=0;return this.domManip(arguments,function(c){var d=a[b++],e=a[b++];e&&(d&&d.parentNode!==e&&(d=this.nextSibling),ka(this).remove(),e.insertBefore(c,d))},!0),b?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b,c){a=da.apply([],a);var d,e,f,g,h,i,j=0,k=this.length,l=this,m=k-1,n=a[0],o=ka.isFunction(n);if(o||!(1>=k||"string"!=typeof n||ka.support.checkClone)&&cb.test(n))return this.each(function(d){var e=l.eq(d);o&&(a[0]=n.call(this,d,e.html())),e.domManip(a,b,c)});if(k&&(i=ka.buildFragment(a,this[0].ownerDocument,!1,!c&&this),d=i.firstChild,1===i.childNodes.length&&(i=d),d)){for(g=ka.map(u(i,"script"),p),f=g.length;k>j;j++)e=i,j!==m&&(e=ka.clone(e,!0,!0),f&&ka.merge(g,u(e,"script"))),b.call(this[j],e,j);if(f)for(h=g[g.length-1].ownerDocument,ka.map(g,q),j=0;f>j;j++)e=g[j],db.test(e.type||"")&&!ka._data(e,"globalEval")&&ka.contains(h,e)&&(e.src?ka._evalUrl(e.src):ka.globalEval((e.text||e.textContent||e.innerHTML||"").replace(fb,"")));i=d=null}return this}}),ka.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){ka.fn[a]=function(a){for(var c,d=0,e=[],f=ka(a),g=f.length-1;g>=d;d++)c=d===g?this:this.clone(!0),ka(f[d])[b](c),ea.apply(e,c.get());return this.pushStack(e)}}),ka.extend({clone:function(a,b,c){var d,e,f,g,h,i=ka.contains(a.ownerDocument,a);if(ka.support.html5Clone||ka.isXMLDoc(a)||!Wa.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(ib.innerHTML=a.outerHTML,ib.removeChild(f=ib.firstChild)),!(ka.support.noCloneEvent&&ka.support.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||ka.isXMLDoc(a)))for(d=u(f),h=u(a),g=0;null!=(e=h[g]);++g)d[g]&&t(e,d[g]);if(b)if(c)for(h=h||u(a),d=d||u(f),g=0;null!=(e=h[g]);g++)s(e,d[g]);else s(a,f);return d=u(f,"script"),d.length>0&&r(d,!i&&u(a,"script")),d=h=e=null,f},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k,l=a.length,m=n(b),o=[],p=0;l>p;p++)if(f=a[p],
f||0===f)if("object"===ka.type(f))ka.merge(o,f.nodeType?[f]:f);else if(_a.test(f)){for(h=h||m.appendChild(b.createElement("div")),i=(Za.exec(f)||["",""])[1].toLowerCase(),k=gb[i]||gb._default,h.innerHTML=k[1]+f.replace(Ya,"<$1></$2>")+k[2],e=k[0];e--;)h=h.lastChild;if(!ka.support.leadingWhitespace&&Xa.test(f)&&o.push(b.createTextNode(Xa.exec(f)[0])),!ka.support.tbody)for(f="table"!==i||$a.test(f)?"<table>"!==k[1]||$a.test(f)?0:h:h.firstChild,e=f&&f.childNodes.length;e--;)ka.nodeName(j=f.childNodes[e],"tbody")&&!j.childNodes.length&&f.removeChild(j);for(ka.merge(o,h.childNodes),h.textContent="";h.firstChild;)h.removeChild(h.firstChild);h=m.lastChild}else o.push(b.createTextNode(f));for(h&&m.removeChild(h),ka.support.appendChecked||ka.grep(u(o,"input"),v),p=0;f=o[p++];)if((!d||-1===ka.inArray(f,d))&&(g=ka.contains(f.ownerDocument,f),h=u(m.appendChild(f),"script"),g&&r(h),c))for(e=0;f=h[e++];)db.test(f.type||"")&&c.push(f);return h=null,m},cleanData:function(a,b){for(var c,d,e,f,g=0,h=ka.expando,i=ka.cache,j=ka.support.deleteExpando,k=ka.event.special;null!=(c=a[g]);g++)if((b||ka.acceptData(c))&&(e=c[h],f=e&&i[e])){if(f.events)for(d in f.events)k[d]?ka.event.remove(c,d):ka.removeEvent(c,d,f.handle);i[e]&&(delete i[e],j?delete c[h]:typeof c.removeAttribute!==W?c.removeAttribute(h):c[h]=null,ba.push(e))}},_evalUrl:function(a){return ka.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}}),ka.fn.extend({wrapAll:function(a){if(ka.isFunction(a))return this.each(function(b){ka(this).wrapAll(a.call(this,b))});if(this[0]){var b=ka(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return ka.isFunction(a)?this.each(function(b){ka(this).wrapInner(a.call(this,b))}):this.each(function(){var b=ka(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=ka.isFunction(a);return this.each(function(c){ka(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){ka.nodeName(this,"body")||ka(this).replaceWith(this.childNodes)}).end()}});var jb,kb,lb,mb=/alpha\([^)]*\)/i,nb=/opacity\s*=\s*([^)]*)/,ob=/^(top|right|bottom|left)$/,pb=/^(none|table(?!-c[ea]).+)/,qb=/^margin/,rb=new RegExp("^("+la+")(.*)$","i"),sb=new RegExp("^("+la+")(?!px)[a-z%]+$","i"),tb=new RegExp("^([+-])=("+la+")","i"),ub={BODY:"block"},vb={position:"absolute",visibility:"hidden",display:"block"},wb={letterSpacing:0,fontWeight:400},xb=["Top","Right","Bottom","Left"],yb=["Webkit","O","Moz","ms"];ka.fn.extend({css:function(a,c){return ka.access(this,function(a,c,d){var e,f,g={},h=0;if(ka.isArray(c)){for(f=kb(a),e=c.length;e>h;h++)g[c[h]]=ka.css(a,c[h],!1,f);return g}return d!==b?ka.style(a,c,d):ka.css(a,c)},a,c,arguments.length>1)},show:function(){return y(this,!0)},hide:function(){return y(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){x(this)?ka(this).show():ka(this).hide()})}}),ka.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=lb(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ka.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var f,g,h,i=ka.camelCase(c),j=a.style;if(c=ka.cssProps[i]||(ka.cssProps[i]=w(j,i)),h=ka.cssHooks[c]||ka.cssHooks[i],d===b)return h&&"get"in h&&(f=h.get(a,!1,e))!==b?f:j[c];if(g=typeof d,"string"===g&&(f=tb.exec(d))&&(d=(f[1]+1)*f[2]+parseFloat(ka.css(a,c)),g="number"),!(null==d||"number"===g&&isNaN(d)||("number"!==g||ka.cssNumber[i]||(d+="px"),ka.support.clearCloneStyle||""!==d||0!==c.indexOf("background")||(j[c]="inherit"),h&&"set"in h&&(d=h.set(a,d,e))===b)))try{j[c]=d}catch(k){}}},css:function(a,c,d,e){var f,g,h,i=ka.camelCase(c);return c=ka.cssProps[i]||(ka.cssProps[i]=w(a.style,i)),h=ka.cssHooks[c]||ka.cssHooks[i],h&&"get"in h&&(g=h.get(a,!0,d)),g===b&&(g=lb(a,c,e)),"normal"===g&&c in wb&&(g=wb[c]),""===d||d?(f=parseFloat(g),d===!0||ka.isNumeric(f)?f||0:g):g}}),a.getComputedStyle?(kb=function(b){return a.getComputedStyle(b,null)},lb=function(a,c,d){var e,f,g,h=d||kb(a),i=h?h.getPropertyValue(c)||h[c]:b,j=a.style;return h&&(""!==i||ka.contains(a.ownerDocument,a)||(i=ka.style(a,c)),sb.test(i)&&qb.test(c)&&(e=j.width,f=j.minWidth,g=j.maxWidth,j.minWidth=j.maxWidth=j.width=i,i=h.width,j.width=e,j.minWidth=f,j.maxWidth=g)),i}):Y.documentElement.currentStyle&&(kb=function(a){return a.currentStyle},lb=function(a,c,d){var e,f,g,h=d||kb(a),i=h?h[c]:b,j=a.style;return null==i&&j&&j[c]&&(i=j[c]),sb.test(i)&&!ob.test(c)&&(e=j.left,f=a.runtimeStyle,g=f&&f.left,g&&(f.left=a.currentStyle.left),j.left="fontSize"===c?"1em":i,i=j.pixelLeft+"px",j.left=e,g&&(f.left=g)),""===i?"auto":i}),ka.each(["height","width"],function(a,b){ka.cssHooks[b]={get:function(a,c,d){return c?0===a.offsetWidth&&pb.test(ka.css(a,"display"))?ka.swap(a,vb,function(){return B(a,b,d)}):B(a,b,d):void 0},set:function(a,c,d){var e=d&&kb(a);return z(a,c,d?A(a,b,d,ka.support.boxSizing&&"border-box"===ka.css(a,"boxSizing",!1,e),e):0)}}}),ka.support.opacity||(ka.cssHooks.opacity={get:function(a,b){return nb.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=ka.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,(b>=1||""===b)&&""===ka.trim(f.replace(mb,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=mb.test(f)?f.replace(mb,e):f+" "+e)}}),ka(function(){ka.support.reliableMarginRight||(ka.cssHooks.marginRight={get:function(a,b){return b?ka.swap(a,{display:"inline-block"},lb,[a,"marginRight"]):void 0}}),!ka.support.pixelPosition&&ka.fn.position&&ka.each(["top","left"],function(a,b){ka.cssHooks[b]={get:function(a,c){return c?(c=lb(a,b),sb.test(c)?ka(a).position()[b]+"px":c):void 0}}})}),ka.expr&&ka.expr.filters&&(ka.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0||!ka.support.reliableHiddenOffsets&&"none"===(a.style&&a.style.display||ka.css(a,"display"))},ka.expr.filters.visible=function(a){return!ka.expr.filters.hidden(a)}),ka.each({margin:"",padding:"",border:"Width"},function(a,b){ka.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+xb[d]+b]=f[d]||f[d-2]||f[0];return e}},qb.test(a)||(ka.cssHooks[a+b].set=z)});var zb=/%20/g,Ab=/\[\]$/,Bb=/\r?\n/g,Cb=/^(?:submit|button|image|reset|file)$/i,Db=/^(?:input|select|textarea|keygen)/i;ka.fn.extend({serialize:function(){return ka.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=ka.prop(this,"elements");return a?ka.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!ka(this).is(":disabled")&&Db.test(this.nodeName)&&!Cb.test(a)&&(this.checked||!bb.test(a))}).map(function(a,b){var c=ka(this).val();return null==c?null:ka.isArray(c)?ka.map(c,function(a){return{name:b.name,value:a.replace(Bb,"\r\n")}}):{name:b.name,value:c.replace(Bb,"\r\n")}}).get()}}),ka.param=function(a,c){var d,e=[],f=function(a,b){b=ka.isFunction(b)?b():null==b?"":b,e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(c===b&&(c=ka.ajaxSettings&&ka.ajaxSettings.traditional),ka.isArray(a)||a.jquery&&!ka.isPlainObject(a))ka.each(a,function(){f(this.name,this.value)});else for(d in a)E(d,a[d],c,f);return e.join("&").replace(zb,"+")},ka.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){ka.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),ka.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var Eb,Fb,Gb=ka.now(),Hb=/\?/,Ib=/#.*$/,Jb=/([?&])_=[^&]*/,Kb=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Lb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Mb=/^(?:GET|HEAD)$/,Nb=/^\/\//,Ob=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Pb=ka.fn.load,Qb={},Rb={},Sb="*/".concat("*");try{Fb=X.href}catch(Tb){Fb=Y.createElement("a"),Fb.href="",Fb=Fb.href}Eb=Ob.exec(Fb.toLowerCase())||[],ka.fn.load=function(a,c,d){if("string"!=typeof a&&Pb)return Pb.apply(this,arguments);var e,f,g,h=this,i=a.indexOf(" ");return i>=0&&(e=a.slice(i,a.length),a=a.slice(0,i)),ka.isFunction(c)?(d=c,c=b):c&&"object"==typeof c&&(g="POST"),h.length>0&&ka.ajax({url:a,type:g,dataType:"html",data:c}).done(function(a){f=arguments,h.html(e?ka("<div>").append(ka.parseHTML(a)).find(e):a)}).complete(d&&function(a,b){h.each(d,f||[a.responseText,b,a])}),this},ka.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){ka.fn[b]=function(a){return this.on(b,a)}}),ka.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Fb,type:"GET",isLocal:Lb.test(Eb[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Sb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ka.parseJSON,"text xml":ka.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?H(H(a,ka.ajaxSettings),b):H(ka.ajaxSettings,a)},ajaxPrefilter:F(Qb),ajaxTransport:F(Rb),ajax:function(a,c){function d(a,c,d,e){var f,l,s,t,v,x=c;2!==u&&(u=2,i&&clearTimeout(i),k=b,h=e||"",w.readyState=a>0?4:0,f=a>=200&&300>a||304===a,d&&(t=I(m,w,d)),t=J(m,t,w,f),f?(m.ifModified&&(v=w.getResponseHeader("Last-Modified"),v&&(ka.lastModified[g]=v),v=w.getResponseHeader("etag"),v&&(ka.etag[g]=v)),204===a||"HEAD"===m.type?x="nocontent":304===a?x="notmodified":(x=t.state,l=t.data,s=t.error,f=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),w.status=a,w.statusText=(c||x)+"",f?p.resolveWith(n,[l,x,w]):p.rejectWith(n,[w,x,s]),w.statusCode(r),r=b,j&&o.trigger(f?"ajaxSuccess":"ajaxError",[w,m,f?l:s]),q.fireWith(n,[w,x]),j&&(o.trigger("ajaxComplete",[w,m]),--ka.active||ka.event.trigger("ajaxStop")))}"object"==typeof a&&(c=a,a=b),c=c||{};var e,f,g,h,i,j,k,l,m=ka.ajaxSetup({},c),n=m.context||m,o=m.context&&(n.nodeType||n.jquery)?ka(n):ka.event,p=ka.Deferred(),q=ka.Callbacks("once memory"),r=m.statusCode||{},s={},t={},u=0,v="canceled",w={readyState:0,getResponseHeader:function(a){var b;if(2===u){if(!l)for(l={};b=Kb.exec(h);)l[b[1].toLowerCase()]=b[2];b=l[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===u?h:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return u||(a=t[c]=t[c]||a,s[a]=b),this},overrideMimeType:function(a){return u||(m.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>u)for(b in a)r[b]=[r[b],a[b]];else w.always(a[w.status]);return this},abort:function(a){var b=a||v;return k&&k.abort(b),d(0,b),this}};if(p.promise(w).complete=q.add,w.success=w.done,w.error=w.fail,m.url=((a||m.url||Fb)+"").replace(Ib,"").replace(Nb,Eb[1]+"//"),m.type=c.method||c.type||m.method||m.type,m.dataTypes=ka.trim(m.dataType||"*").toLowerCase().match(ma)||[""],null==m.crossDomain&&(e=Ob.exec(m.url.toLowerCase()),m.crossDomain=!(!e||e[1]===Eb[1]&&e[2]===Eb[2]&&(e[3]||("http:"===e[1]?"80":"443"))===(Eb[3]||("http:"===Eb[1]?"80":"443")))),m.data&&m.processData&&"string"!=typeof m.data&&(m.data=ka.param(m.data,m.traditional)),G(Qb,m,c,w),2===u)return w;j=m.global,j&&0===ka.active++&&ka.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!Mb.test(m.type),g=m.url,m.hasContent||(m.data&&(g=m.url+=(Hb.test(g)?"&":"?")+m.data,delete m.data),m.cache===!1&&(m.url=Jb.test(g)?g.replace(Jb,"$1_="+Gb++):g+(Hb.test(g)?"&":"?")+"_="+Gb++)),m.ifModified&&(ka.lastModified[g]&&w.setRequestHeader("If-Modified-Since",ka.lastModified[g]),ka.etag[g]&&w.setRequestHeader("If-None-Match",ka.etag[g])),(m.data&&m.hasContent&&m.contentType!==!1||c.contentType)&&w.setRequestHeader("Content-Type",m.contentType),w.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+Sb+"; q=0.01":""):m.accepts["*"]);for(f in m.headers)w.setRequestHeader(f,m.headers[f]);if(m.beforeSend&&(m.beforeSend.call(n,w,m)===!1||2===u))return w.abort();v="abort";for(f in{success:1,error:1,complete:1})w[f](m[f]);if(k=G(Rb,m,c,w)){w.readyState=1,j&&o.trigger("ajaxSend",[w,m]),m.async&&m.timeout>0&&(i=setTimeout(function(){w.abort("timeout")},m.timeout));try{u=1,k.send(s,d)}catch(x){if(!(2>u))throw x;d(-1,x)}}else d(-1,"No Transport");return w},getJSON:function(a,b,c){return ka.get(a,b,c,"json")},getScript:function(a,c){return ka.get(a,b,c,"script")}}),ka.each(["get","post"],function(a,c){ka[c]=function(a,d,e,f){return ka.isFunction(d)&&(f=f||e,e=d,d=b),ka.ajax({url:a,type:c,dataType:f,data:d,success:e})}}),ka.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return ka.globalEval(a),a}}}),ka.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),ka.ajaxTransport("script",function(a){if(a.crossDomain){var c,d=Y.head||ka("head")[0]||Y.documentElement;return{send:function(b,e){c=Y.createElement("script"),c.async=!0,a.scriptCharset&&(c.charset=a.scriptCharset),c.src=a.url,c.onload=c.onreadystatechange=function(a,b){(b||!c.readyState||/loaded|complete/.test(c.readyState))&&(c.onload=c.onreadystatechange=null,c.parentNode&&c.parentNode.removeChild(c),c=null,b||e(200,"success"))},d.insertBefore(c,d.firstChild)},abort:function(){c&&c.onload(b,!0)}}}});var Ub=[],Vb=/(=)\?(?=&|$)|\?\?/;ka.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Ub.pop()||ka.expando+"_"+Gb++;return this[a]=!0,a}}),ka.ajaxPrefilter("json jsonp",function(c,d,e){var f,g,h,i=c.jsonp!==!1&&(Vb.test(c.url)?"url":"string"==typeof c.data&&!(c.contentType||"").indexOf("application/x-www-form-urlencoded")&&Vb.test(c.data)&&"data");return i||"jsonp"===c.dataTypes[0]?(f=c.jsonpCallback=ka.isFunction(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback,i?c[i]=c[i].replace(Vb,"$1"+f):c.jsonp!==!1&&(c.url+=(Hb.test(c.url)?"&":"?")+c.jsonp+"="+f),c.converters["script json"]=function(){return h||ka.error(f+" was not called"),h[0]},c.dataTypes[0]="json",g=a[f],a[f]=function(){h=arguments},e.always(function(){a[f]=g,c[f]&&(c.jsonpCallback=d.jsonpCallback,Ub.push(f)),h&&ka.isFunction(g)&&g(h[0]),h=g=b}),"script"):void 0});var Wb,Xb,Yb=0,Zb=a.ActiveXObject&&function(){var a;for(a in Wb)Wb[a](b,!0)};ka.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&K()||L()}:K,Xb=ka.ajaxSettings.xhr(),ka.support.cors=!!Xb&&"withCredentials"in Xb,Xb=ka.support.ajax=!!Xb,Xb&&ka.ajaxTransport(function(c){if(!c.crossDomain||ka.support.cors){var d;return{send:function(e,f){var g,h,i=c.xhr();if(c.username?i.open(c.type,c.url,c.async,c.username,c.password):i.open(c.type,c.url,c.async),c.xhrFields)for(h in c.xhrFields)i[h]=c.xhrFields[h];c.mimeType&&i.overrideMimeType&&i.overrideMimeType(c.mimeType),c.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");try{for(h in e)i.setRequestHeader(h,e[h])}catch(j){}i.send(c.hasContent&&c.data||null),d=function(a,e){var h,j,k,l;try{if(d&&(e||4===i.readyState))if(d=b,g&&(i.onreadystatechange=ka.noop,Zb&&delete Wb[g]),e)4!==i.readyState&&i.abort();else{l={},h=i.status,j=i.getAllResponseHeaders(),"string"==typeof i.responseText&&(l.text=i.responseText);try{k=i.statusText}catch(m){k=""}h||!c.isLocal||c.crossDomain?1223===h&&(h=204):h=l.text?200:404}}catch(n){e||f(-1,n)}l&&f(h,k,l,j)},c.async?4===i.readyState?setTimeout(d):(g=++Yb,Zb&&(Wb||(Wb={},ka(a).unload(Zb)),Wb[g]=d),i.onreadystatechange=d):d()},abort:function(){d&&d(b,!0)}}}});var $b,_b,ac=/^(?:toggle|show|hide)$/,bc=new RegExp("^(?:([+-])=|)("+la+")([a-z%]*)$","i"),cc=/queueHooks$/,dc=[Q],ec={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=bc.exec(b),f=e&&e[3]||(ka.cssNumber[a]?"":"px"),g=(ka.cssNumber[a]||"px"!==f&&+d)&&bc.exec(ka.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,ka.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};ka.Animation=ka.extend(O,{tweener:function(a,b){ka.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],ec[c]=ec[c]||[],ec[c].unshift(b)},prefilter:function(a,b){b?dc.unshift(a):dc.push(a)}}),ka.Tween=R,R.prototype={constructor:R,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(ka.cssNumber[c]?"":"px")},cur:function(){var a=R.propHooks[this.prop];return a&&a.get?a.get(this):R.propHooks._default.get(this)},run:function(a){var b,c=R.propHooks[this.prop];return this.options.duration?this.pos=b=ka.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):R.propHooks._default.set(this),this}},R.prototype.init.prototype=R.prototype,R.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=ka.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){ka.fx.step[a.prop]?ka.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[ka.cssProps[a.prop]]||ka.cssHooks[a.prop])?ka.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},R.propHooks.scrollTop=R.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},ka.each(["toggle","show","hide"],function(a,b){var c=ka.fn[b];ka.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(S(b,!0),a,d,e)}}),ka.fn.extend({fadeTo:function(a,b,c,d){return this.filter(x).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=ka.isEmptyObject(a),f=ka.speed(b,c,d),g=function(){var b=O(this,ka.extend({},a),f);(e||ka._data(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,c,d){var e=function(a){var b=a.stop;delete a.stop,b(d)};return"string"!=typeof a&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,c=null!=a&&a+"queueHooks",f=ka.timers,g=ka._data(this);if(c)g[c]&&g[c].stop&&e(g[c]);else for(c in g)g[c]&&g[c].stop&&cc.test(c)&&e(g[c]);for(c=f.length;c--;)f[c].elem!==this||null!=a&&f[c].queue!==a||(f[c].anim.stop(d),b=!1,f.splice(c,1));(b||!d)&&ka.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=ka._data(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=ka.timers,g=d?d.length:0;for(c.finish=!0,ka.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),ka.each({slideDown:S("show"),slideUp:S("hide"),slideToggle:S("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){ka.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),ka.speed=function(a,b,c){var d=a&&"object"==typeof a?ka.extend({},a):{complete:c||!c&&b||ka.isFunction(a)&&a,duration:a,easing:c&&b||b&&!ka.isFunction(b)&&b};return d.duration=ka.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in ka.fx.speeds?ka.fx.speeds[d.duration]:ka.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){ka.isFunction(d.old)&&d.old.call(this),d.queue&&ka.dequeue(this,d.queue)},d},ka.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},ka.timers=[],ka.fx=R.prototype.init,ka.fx.tick=function(){var a,c=ka.timers,d=0;for($b=ka.now();d<c.length;d++)a=c[d],a()||c[d]!==a||c.splice(d--,1);c.length||ka.fx.stop(),$b=b},ka.fx.timer=function(a){a()&&ka.timers.push(a)&&ka.fx.start()},ka.fx.interval=13,ka.fx.start=function(){_b||(_b=setInterval(ka.fx.tick,ka.fx.interval))},ka.fx.stop=function(){clearInterval(_b),_b=null},ka.fx.speeds={slow:600,fast:200,_default:400},ka.fx.step={},ka.expr&&ka.expr.filters&&(ka.expr.filters.animated=function(a){return ka.grep(ka.timers,function(b){return a===b.elem}).length}),ka.fn.offset=function(a){if(arguments.length)return a===b?this:this.each(function(b){ka.offset.setOffset(this,a,b)});var c,d,e={top:0,left:0},f=this[0],g=f&&f.ownerDocument;if(g)return c=g.documentElement,ka.contains(c,f)?(typeof f.getBoundingClientRect!==W&&(e=f.getBoundingClientRect()),d=T(g),{top:e.top+(d.pageYOffset||c.scrollTop)-(c.clientTop||0),left:e.left+(d.pageXOffset||c.scrollLeft)-(c.clientLeft||0)}):e},ka.offset={setOffset:function(a,b,c){var d=ka.css(a,"position");"static"===d&&(a.style.position="relative");var e,f,g=ka(a),h=g.offset(),i=ka.css(a,"top"),j=ka.css(a,"left"),k=("absolute"===d||"fixed"===d)&&ka.inArray("auto",[i,j])>-1,l={},m={};k?(m=g.position(),e=m.top,f=m.left):(e=parseFloat(i)||0,f=parseFloat(j)||0),ka.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(l.top=b.top-h.top+e),null!=b.left&&(l.left=b.left-h.left+f),"using"in b?b.using.call(a,l):g.css(l)}},ka.fn.extend({position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===ka.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),ka.nodeName(a[0],"html")||(c=a.offset()),c.top+=ka.css(a[0],"borderTopWidth",!0),c.left+=ka.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-ka.css(d,"marginTop",!0),left:b.left-c.left-ka.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||Z;a&&!ka.nodeName(a,"html")&&"static"===ka.css(a,"position");)a=a.offsetParent;return a||Z})}}),ka.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d=/Y/.test(c);ka.fn[a]=function(e){return ka.access(this,function(a,e,f){var g=T(a);return f===b?g?c in g?g[c]:g.document.documentElement[e]:a[e]:void(g?g.scrollTo(d?ka(g).scrollLeft():f,d?f:ka(g).scrollTop()):a[e]=f)},a,e,arguments.length,null)}}),ka.each({Height:"height",Width:"width"},function(a,c){ka.each({padding:"inner"+a,content:c,"":"outer"+a},function(d,e){ka.fn[e]=function(e,f){var g=arguments.length&&(d||"boolean"!=typeof e),h=d||(e===!0||f===!0?"margin":"border");return ka.access(this,function(c,d,e){var f;return ka.isWindow(c)?c.document.documentElement["client"+a]:9===c.nodeType?(f=c.documentElement,Math.max(c.body["scroll"+a],f["scroll"+a],c.body["offset"+a],f["offset"+a],f["client"+a])):e===b?ka.css(c,d,h):ka.style(c,d,e,h)},c,g?e:b,g,null)}})}),ka.fn.size=function(){return this.length},ka.fn.andSelf=ka.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=ka:(a.jQuery=a.$=ka,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ka}))}(window),function(a,b){"function"==typeof define&&define.amd?define(["jquery","mol-page-events/page-events"],b):b(a.jQuery,a.DM.pageEvents)}(this,function(a,b){function c(b,c){var e=["font-size","font-weight"];if(!d){var f=b.jquery?b:c?a(b,c.jquery?c:a(c)):a(b);f.each(function(){var b=a(this),c=b.attr("placeholder");if(c){if(b.next().is("span.placeholder"))return void b.trigger("change");var d=a('<span class="placeholder">'+c+"</span>");d.css(b.css(e)),d.css({"line-height":b.outerHeight()+"px","margin-left":b.css("padding-left")});var f=b.parent(),g=f.css("position");"absolute"!==g&&"relative"!==g&&f.css("position","relative"),b.after(d),d.css({position:"absolute",top:b.position().top+"px",left:b.position().left+"px"}),b.on("change keyup",function(){d[b.val()?"hide":"show"]()}),b.trigger("change"),d.on("click",function(){b.focus()})}})}}var d=function(){return"placeholder"in document.createElement("input")}(),e=function(){return"autofocus"in document.createElement("input")}();b.listen(b.FRAGMENT_LOADED,function(b,d,f){e||a("input[autofocus]",f).eq(0).focus(),c("input[placeholder]",f)}),a(document).ready(function(){b.fireEvent(b.FRAGMENT_LOADED,this)})}),DM.m={},DM.has=function(a,b,c){b=b||a,this.m[b]||(this.m[b]=[]),this.m[b].push({id:a,params:c})},DM.setCookie=function(a,b,c,d,e,f){var g=escape(a)+"="+escape(b);g+=c?";expires="+c.toGMTString():"",g+=d?";path="+d:"",g+=e?";domain="+e:"",g+=f?";secure":"",document.cookie=g},DM.getCookie=function(a){var b=null;if(document.cookie){var c=document.cookie.split(escape(a)+"=");2<=c.length&&(b=unescape(c[1].split(";")[0]),b.length>1&&'"'===b.charAt(0)&&'"'===b.charAt(b.length-1)&&(b=b.substring(1,b.length-1)))}return b},DM.deleteCookie=function(a){var b=DM.getCookie(a);b&&DM.setCookie(a,b,new Date(1))},DM.popup=function(a,b,c){var d="menubar=false,location=false,statusbar=false,toolbar=false,resizable=false",e="resizable=1,scrollbars=1",f=window.open(a,"_blank","width="+b+",height="+c+","+d+","+e);return f.focus(),f},function(a){var b=function(){return{postMessage:function(a,b,c){b=b||"*",c=c||window.parent,window.postMessage&&c.postMessage(a,b.replace(/([^:]+:\/\/[^\/]+).*/,"$1"))},receiveMessage:function(a){window.postMessage&&(window.addEventListener?window[a?"addEventListener":"removeEventListener"]("message",a,!1):window[a?"attachEvent":"detachEvent"]("onmessage",a))}}}();a.iframely=a.iframely||{},a.iframely.iframes=a.iframely.iframes||{},b.receiveMessage(function(b){var c;try{var d=JSON.parse(b.data)}catch(b){var d={}}d&&d.windowId&&(c=a.iframely.iframes[d.windowId])&&a.iframely.setIframeHeight&&"resize"==d.method&&d.height&&a.iframely.setIframeHeight(c,d.height)}),a.iframely.setIframeHeight=function(a,b){var c=a.parents(".iframely-widget-container");c.length>0?c.css("padding-bottom","").css("height",b):a.css("height",b)},a.iframely.registerIframesIn=function(c){c.find("iframe.iframely-iframe").each(function(){var c=a(this);if(!c.attr("iframely-registered")){c.attr("iframely-registered",!0);var d=a.iframely.iframesCounter=(a.iframely.iframesCounter||0)+1;a.iframely.iframes[d]=c,b.postMessage(JSON.stringify({method:"register",windowId:d}),"*",this.contentWindow)}})},a(function(){var b=a("#content");a.iframely.registerIframesIn(b)})}(jQuery),DM.Tabs=Ext.extend(Ext.util.Observable,{linkHk:".js-links",activeHk:".js-active",tabIdPrefix:"t-",tabsQuery:".dm-tab",panesQuery:".dm-tab-pane",tabOffClass:null,tabOnClass:null,paneOffClass:"dm-tab-pane-hidden",_onLoadCallBack:null,constructor:function(a,b){DM.Tabs.superclass.constructor.call(this),b&&Ext.apply(this,b),this.el=Ext.get(a),this.tabCnt=Ext.get(this.el.query(this.linkHk)[0]),this.tabCnt&&(this.tabCnt.on("click",this._clickHandler,this),this._tabs=this.el.query(this.tabsQuery),this._panes=this.el.query(this.panesQuery),this._onLoadCallBack&&this._onLoadCallBack(),this.currentTab=Ext.get(Ext.query(this.activeHk,this.el.dom)[0]),this.addEvents(["b4change","change"]))},_clickHandler:function(a){var b=Ext.get(a.getTarget(this.tabsQuery,3));if(b&&(a.preventDefault(),!b.hasClass(this.activeHk))){var c=b.dom.id.split(this.tabIdPrefix)[1];this._selectTab(c),this.fireEvent("change",this.currentTab)}},_selectTab:function(a){this.fireEvent("b4change",this.currentTab),this.reset(),this.tab(a)},reset:function(){for(var a,b,c=this._panes.length;c>0;)--c,a=Ext.get(this._tabs[c]),b=Ext.get(this._panes[c]),a.addClass(this.tabOffClass).removeClass(this.tabOnClass),b.addClass(this.paneOffClass)},tab:function(a){this.currentTab=Ext.get(this.tabIdPrefix+a),this.currentTab.removeClass(this.tabOffClass).addClass(this.tabOnClass),Ext.fly(a).removeClass(this.paneOffClass)}}),function(a,b){"function"==typeof define&&define.amd?define(["jquery"],function(c){b(c,a.DM,a.MobileUtils,a.PageCriteria)}):b($,a.DM,a.MobileUtils,a.PageCriteria)}(this,function(a,b,c,d){if(b&&c&&d&&("channel"===d.pageType||"article"===d.pageType)&&"number"==typeof d.timestamp){var e=d.timestamp,f=d.refreshDesktop,g="article"===d.pageType,h=function(){var a=new RegExp(/(\?|&)msgRefresh=(\d+)/i),b=window.location.search;return parseInt(a.exec(b)&&a.exec(b)[2])},i=function(b){var c,d=new RegExp(/(\?|&)msgRefresh(=|&|$)/i);d.test(window.location.search)&&(c=a("#msgRefresh"),c.length<=0&&(c=a('<div id="msgRefresh" style="position: fixed; top: 200px; left: 0; color:red; background:#fff; width:100px; padding:5px; border: 1px solid red;" />'),a("body").append(c)),c.html(b))},j=function(a){var b=new Date(1e3*a);return b.getHours()+":"+b.getMinutes()+":"+b.getSeconds()},k=function(){document.cookie="autorefresh="+d.pageType+"; path=/",document.cookie="cs_autorefresh="+d.pageType+"; path=/",g?window.location.replace("/"):window.location.reload(!0)};if(c.isMobile()&&"number"==typeof d.refresh&&d.refresh>0){var l,m,n,o,p=!1,q=navigator.userAgent.match(/crios/i);"undefined"!=typeof document.hidden?(l="hidden",m="visibilitychange"):"undefined"!=typeof document.mozHidden?(l="mozHidden",m="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(l="msHidden",m="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(l="webkitHidden",m="webkitvisibilitychange");var r=function(){return f-Math.floor((new Date).getTime()/1e3)+e},s=function(){p=!0,q?a.ajax({url:g?"/":window.location.href,headers:{Pragma:"no-cache",Expires:new Date(0),"Cache-Control":"no-cache"}}).done(function(){k()}).fail(function(){i("crios reloading fail"),p=!1}):k()},t=function(a){var b=r();i(a.type+"<br/> loaded > "+j(e)+"<br/> reload in > "+b),!p&&!document[l]&&0>=b&&(i("reloading on > "+a.type),s())};f=h()||d.refresh,r()<=0&&window.setTimeout(t,200,{type:"timer"}),a(document).on(m,t),a(window).on("pageshow",t),q&&(o=(new Date).getTime(),n=setInterval(function(){var a=(new Date).getTime();a-o>1e4&&t({type:"heartbeat"}),o=a},500))}!c.isMobile()&&"number"==typeof d.refreshDesktop&&d.refreshDesktop>0&&(f=h()||d.refreshDesktop,a(function(){window.setTimeout(k,1e3*f)}))}});var DMS=function(){function a(a,b){var c="";return $.each(a,function(a,b){b&&(c+=a+"="+encodeURIComponent(b)+"&")}),(b||"")+c.slice(0,-1)}function b(a,b){return["resizable=1,scrollbars=1,status=1",",width=",a,",height=",b,",top=",(window.outerHeight-b)/2,",left=",(window.outerWidth-a)/2].join("")}function c(a,b,c){DM.pageEvents.fireEvent(DM.pageEvents.SOCIAL_SHARE_CLICKED,$.extend(c,{pageMetadata:DM.getPageMetadata(),site:a,placement:b}))}var d=window.location.protocol+"//"+window.location.host.replace("dailymail.com","dailymail.co.uk");return{buildUrlParameters:a,getWindowDimensions:b,socialClick:c,domain:d}}();DMS.Facebook=function(a,b){function c(c){if(!c)return"http://www.facebook.com/sharer/sharer.php?u="+(a('meta[property="og:url"]').attr("content")||b.url||b.location.href);try{var d=a.extend({},h,a.isPlainObject(c)?c:a.parseJSON(c));return DMS.buildUrlParameters(d,"https://www.facebook.com/dialog/feed?")}catch(e){console.log("Unable to parse JSON",e)}}function d(a){!function(b,c,d){var e,f=b.getElementsByTagName(c)[0];b.getElementById(d)||(e=b.createElement(c),e.id=d,e.src="//connect.facebook.net/en_GB/all.js#xfbml=1&appId="+a.facebookAppId+"&channelUrl="+a.facebookChannelUrl+"&status=1&cookie=1&oauth=1",f.parentNode.insertBefore(e,f))}(document,"script","facebook-jssdk")}function e(a){b.fbAsyncInit=function(){FB.Event.subscribe("edge.create",function(b){DM.pageEvents.fireEvent(DM.pageEvents.SOCIAL_SHARE_CLICKED,{pageMetadata:DM.getPageMetadata(),type:"facebook-like",placement:"header",site:"facebook",channel:a})})}}var f=1050,g=650,h={app_id:a('meta[property="fb:app_id"]').attr("content"),
caption:DMS.domain,link:b.url,redirect_uri:"http://i.dailymail.co.uk/i/pix/facebook/close.html",picture:"http://f.dailymail.co.uk/i/furniture/comments/articles/m_logo.png"};return{postToFB:function(d,e,h){DMS.socialClick("facebook",d,a.extend({},h)),b.open(c(e),"",DMS.getWindowDimensions(f,g))},loadAsyncScript:d,attachFbAsyncInitToWindow:e}}(jQuery,window),DMS.Google=function(a){function b(){var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src="https://apis.google.com/js/plusone.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)}function c(b){a.plusone_vote=function(a){DM.later("bundle",function(){DM.pageEvents.fireEvent(DM.pageEvents.SOCIAL_BUTTON_CLICKED,{pageMetadata:DM.getPageMetadata(),type:"plusone-vote",channel:b,link:a.href})})}}function d(a,b){var c=b&&b.url;c&&DMS.postToURL("https://plus.google.com/share?",{url:c}),DMS.socialClick("plusone",a)}function e(b,c,d,e){b&&d&&d.url&&a.gapi&&a.gapi.interactivepost.render(b,{contenturl:d.url,contentdeeplinkid:"/pages",clientid:a.feGoogleClientId,cookiepolicy:"single_host_origin",prefilltext:d.title||"",calltoactionlabel:"VIEW",calltoactionurl:d.url,calltoactiondeeplinkid:"/pages/create",onshare:function(a){DMS.socialClick("plusone",c,e)}})}return a.___gcfg={lang:"en-GB"},{loadAsyncScript:b,attachPlusoneVoteToWindow:c,postToGPlus:d,renderInteractivePost:e}}(window),DMS.Pinterest=function(){function a(a){return a?a.type||"article":"article"}function b(a){return $('meta[property="og:url"]').attr("content")||a&&a.url||window.url||window.location.href}function c(c){var d={article:b,comment:function(a){return $.trim(a.commentData.shortUrl)||b()},fff:function(a){return a.url},image:b,text:b,email:b,poll:function(a){return a.url}};return"url="+encodeURIComponent(d[a(c)](c))}function d(){return $("meta[property=og\\:image]").first().attr("content")||$(".image-wrap img").first().attr("src")}function e(a){return a.media||""}function f(b){var c={article:d,comment:function(){return"http://f.dailymail.co.uk/i/furniture/comments/articles/m_logo.png"},fff:e,image:e,text:d,email:e,poll:e};return"media="+encodeURIComponent(c[a(b)](b))}function g(a){return a.description}function h(b){var c={comment:function(a){var b=a.commentData.commentBody?$.trim(a.commentData.commentBody):"",c=$.trim(a.commentData.commenterName)||"";return b+(c?" by "+(","===c.substring(c.length-1,c.length)?c.substring(0,c.length-1):c):"")},article:function(){return $("meta[property=og\\:title]").first().attr("content")},fff:g,image:g,text:function(a){return a.caption+" "+a.description},email:g,poll:g};return"description="+encodeURIComponent(c[a(b)](b))}function i(b,d,e){var g={article:j,comment:function(a){a.commentData.pinterestWindow.location=o+"?"+c(a)+"&"+h(a)+"&"+f(a)},fff:j,image:j,text:j,email:j,poll:j};g[a(d)](d),"fff"!=a(d)&&DMS.socialClick("pinterest",b,$.extend({},e))}function j(a){window.open(o+"?"+c(a)+"&"+h(a)+"&"+f(a),"",DMS.getWindowDimensions(800,320))}function k(){/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||l(window,document,["//assets.pinterest.com/js/pinit.js"])}function l(a,b,c){var d,e=b.getElementsByTagName("SCRIPT")[0],f=c.length,g=0,h=function(){for(g=0;f>g;g+=1)d=b.createElement("SCRIPT"),d.type="text/javascript",d.async=!0,d.src=c[g],e.parentNode.insertBefore(d,e)};a.attachEvent?a.attachEvent("onload",h):a.addEventListener("load",h,!1)}function m(){$("html").on("click",".pinterest-follow-button a",n)}function n(){DM.pageEvents.fireEvent(DM.pageEvents.SOCIAL_SHARE_CLICKED,{pageMetadata:DM.getPageMetadata(),site:"pinterest",placement:"header"})}var o="http://www.pinterest.com/pin/create/button/";return{postToPinterest:i,loadAsyncScript:k,bindNavigationClick:m}}(),DMS.Twitter=function(){function a(a,c){c=$.extend({},c),k=p[c.type]||"";var d=a.text,e=a.url,f=a.via,g=f&&c.via!==!1,h=q-(g?" via @"+f:"").length-(e.length>o?o:e.length)-2*k.length;return h=d.length>h?h-4:h,d=b(d.length>h?d.substring(0,d.substring(0,h-9).lastIndexOf(" "))+" ...":d),d+" "+e+(g?" via @"+f:"")}function b(a){return k+a+k}function c(b,c){return encodeURIComponent(a(b,c))}function d(b){var c=$.isPlainObject(b)?b:JSON.parse(b);return DMS.buildUrlParameters({text:a({text:c.text,url:c.url,via:c.via},{type:c.type}),related:c.related,hashtags:c.hashtags},l)}function e(){return DMS.buildUrlParameters({text:a({url:window.articleShortUrl,via:j,text:$('meta[property="twitter:title"]').attr("content")||""}),related:j+",MailOnline"},l)}function f(a){return a?d(a):e()}function g(a,b,c){DMS.socialClick("twitter",a,$.extend({},c)),window.open(f(b),"",DMS.getWindowDimensions(m,n))}function h(){window.twttr=function(a,b,c){var d,e,f=a.getElementsByTagName(b)[0];if(!a.getElementById(c))return e=a.createElement(b),e.id=c,e.src="//platform.twitter.com/widgets.js",f.parentNode.insertBefore(e,f),window.twttr||(d={_e:[],ready:function(a){d._e.push(a)}})}(document,"script","twitter-wjs")}function i(a){function b(b){DM.later("bundle",function(){var c,d=$(b.target);d.is(".twitter-follow-author")?c="author":d.is(".twitter-follow-header")&&(c="header"),"header"===c?DM.pageEvents.fireEvent(DM.pageEvents.SOCIAL_SHARE_CLICKED,{pageMetadata:DM.getPageMetadata(),type:"twitter-follow",site:"twitter",placement:c}):"author"===c&&DM.pageEvents.fireEvent(DM.pageEvents.SOCIAL_SHARE_CLICKED,{pageMetadata:DM.getPageMetadata(),type:"twitter-follow",channel:a,link:b.target.baseURI,site:"twitter-follow",placement:"author"})})}window.twttr.ready(function(a){a.events.bind("click",b)})}var j,k,l="https://twitter.com/intent/tweet?",m=575,n=400,o=15,p={text:'"'},q=142;return $(function(){j=window.twitterVia||"MailOnline"}),{truncateText:a,truncateTextAndEscape:c,postToTWTTR:g,loadAsyncScript:h,bindClickToFollowButton:i}}(),DMS.Navigation=function(a){function b(){DMS.Google.loadAsyncScript(),DMS.Google.attachPlusoneVoteToWindow(g.channel)}function c(){DMS.Facebook.loadAsyncScript(g),DMS.Facebook.attachFbAsyncInitToWindow(g.channel)}function d(){DMS.Pinterest.loadAsyncScript(),DMS.Pinterest.bindNavigationClick()}function e(){DMS.Twitter.loadAsyncScript(),DMS.Twitter.bindClickToFollowButton(g.channel)}function f(b){g=a.extend({},b)}var g;return{init:function(a){f(a),c(),d(),e(),b()}}}(jQuery),DMS.Puff=function(){function a(a,b){function c(c){return j(t,a+"."+c+"."+b)}return c(p)||c(m)||c(o)||c(l)||c("home")}function b(b){return a(b,"account")}function c(b){return a(b,"text")}function d(b){return a(b,"bold")}function e(c){function d(a){var c=b(a),d={facebook:"https://www.facebook.com/"+c,twitter:"http://twitter.com/intent/user?screen_name="+c+"&related="+f(),pinterest:"https://pinterest.com/"+c,gplus:"https://plus.google.com/+DailyMail/posts"};return d[a]}return a(c,"link")||d(c)}function f(){return twitterVia||"MailOnline"}function g(){function a(a){k.find("."+a).unbind("click").bind("click",function(b){b.preventDefault(),i(a),window.open(e(a),"",DMS.getWindowDimensions(s[a].width,s[a].height))})}for(var b=0,c=q.length;c>b;b++)a(q[b])}function h(){for(var a,b=0,e=q.length;e>b;b++)k.find("."+q[b]+" span").text(c(q[b])),a=d(q[b]),a&&k.find("."+q[b]+" b").text(a)}function i(a){DM.pageEvents.fireEvent(DM.pageEvents.SOCIAL_SHARE_CLICKED,{pageMetadata:DM.getPageMetadata({articleId:"non-article"}),site:r[a]||a,placement:"non-native"})}function j(a){var b=arguments,c=b.callee;return b[1]&&~b[1].indexOf(".")?c.apply(this,[a].concat(b[1].split("."))):1==b.length?b[0]:a[b[1]]&&c.apply(this,[a[b[1]]].concat([].slice.call(b,2)))}var k,l=PageCriteria.channel||"home",m=PageCriteria.subchannel||"home",n="GB"!=(PageCriteria.geo||"GB")?PageCriteria.geo:"",o=l+n,p=m+n,q=["facebook","twitter","pinterest","gplus"],r={gplus:"plusone"},s={facebook:{width:1100,height:600},twitter:{width:760,height:500},gplus:{width:1100,height:600},pinterest:{width:1100,height:600}},t={facebook:{home:{text:"Daily Mail",account:"DailyMail"},extratime:{text:"Extra Time",bold:"Share",link:["https://www.facebook.com/dialog/feed?app_id=146202712090395","&name=",encodeURIComponent("Enjoy all the latest and exclusive celebrity sports news from MailOnline"),"&caption= ","&link=",encodeURIComponent("http://www.dailymail.co.uk/sport/extratime/index.html"),"&redirect_uri=",encodeURIComponent("http://www.dailymail.co.uk/sport/extratime/index.html"),"&description=",encodeURIComponent("Find out what celebrity sports stars get up to away from the action with the latest news, photos and videos in MailOnline\u2019s dedicated sports showbiz page."),"&picture=",encodeURIComponent("http://i.mol.im/i/sport/154x154_extra_time.png")].join("")},transfernews:{text:"Transfer News",bold:"Share",link:["https://www.facebook.com/dialog/feed?app_id=146202712090395","&name=",encodeURIComponent("Read all the latest and exclusive transfer news from MailOnline"),"&caption= ","&link=",encodeURIComponent("http://www.dailymail.co.uk/sport/transfernews/index.html"),"&redirect_uri=",encodeURIComponent("http://www.dailymail.co.uk/sport/extratime/index.html"),"&description=",encodeURIComponent("Be the first to find out who\u2019s moving where and for how much with MailOnline\u2019s dedicated transfer news page."),"&picture=",encodeURIComponent("http://i.mol.im/i/sport/154x154_transfer_news.png")].join("")},tvshowbiz:{text:"Daily Mail Celeb",account:"DailyMailCeleb"},sport:{text:"Daily Mail Sport",account:"DailyMailSport"},money:{text:"This is Money",link:"https://www.facebook.com/pages/This-is-Money/310555847252"}},twitter:{home:{text:"@MailOnline",account:"MailOnline"},news:{text:"@dailymailuk",account:"dailymailuk"},newsUS:{text:"@dailymailus",account:"dailymailus"},sport:{text:"@MailSport",account:"MailSport"},tvshowbiz:{text:"@DailyMailCeleb",account:"DailyMailCeleb"},femail:{text:"@Femail",account:"Femail"},money:{text:"@thisismoney",account:"thisismoney"},travel:{text:"@travelmail",account:"travelmail"},newspictures:{text:"@dailymailpics",account:"dailymailpics"},sciencetech:{text:"@dailymailtech",account:"dailymailtech"},extratime:{text:"Extra Time",bold:"Share",link:"https://twitter.com/intent/tweet?related=MailSport,MailOnline&text="+function(){return encodeURIComponent("Find out what celebrity sports stars get up to away from the action with MailOnline\u2019s dedicated sports showbiz page. http://dailym.ai/1krSwk2")}()},transfernews:{text:"Transfer News",bold:"Share",link:"https://twitter.com/intent/tweet?related=MailSport,MailOnline&text="+function(){return encodeURIComponent("Be the first to find out which players are on the move with MailOnline\u2019s dedicated transfer news page. http://dailym.ai/1krSwk2")}()}},gplus:{home:{text:"Daily Mail",account:"DailyMail"},tvshowbiz:{text:"Daily Mail Celeb",account:"DailyMailCeleb",link:"https://plus.google.com/112881868727711378095/posts"},sport:{text:"Daily Mail Sport",account:"DailyMailSport",link:"https://plus.google.com/+MailOnlineSport/posts"}},pinterest:{home:{text:"Daily Mail",account:"DailyMail"},tvshowbiz:{text:"Daily Mail Celeb",account:"dailymailceleb"}}};return{init:function(a){t=$.extend(!0,t,a),k=$("ul.dms-puff"),g(),h()}}}(),function(a,b){function c(b){return a.postToFB=a.postToFB||b.postToFB,a.postToTWTTR=a.postToTWTTR||b.postToTWTTR,a.postToGPlus=a.postToGPlus||b.postToGPlus,a.postToPinterest=a.postToPinterest||b.postToPinterest,a.postToReddit=a.postToReddit||b.postToReddit,a.postToStumbleUpon=a.postToStumbleUpon||b.postToStumbleUpon,a.postToFark=a.postToFark||b.postToFark,a.postToDiggit=a.postToDiggit||b.postToDiggit,a.postToLinkedIn=a.postToLinkedIn||b.postToLinkedIn,a.emailArticle=a.emailArticle||b.emailArticle,b}"function"==typeof define&&define.amd?define(["mol-dm/DM","mol-page-events/page-events"],function(d,e){return c(b(a,d,e))}):c(b(a,a.DM,a.pageEvents))}(this,function(a,b,c){function d(a,b){window.open(DMS.buildUrlParameters(b,a),"",DMS.getWindowDimensions(k,l))}function e(a,b,c){var e=b&&b.url,f=b&&b.title;e&&f&&d("http://reddit.com/submit?",{url:e,title:f}),DMS.socialClick("reddit",a,c)}function f(a,b,c){var e=b&&b.url,f=b&&b.title;e&&f&&d("http://www.stumbleupon.com/badge/?",{url:e,title:f}),DMS.socialClick("stumbleupon",a,c)}function g(a,b,c){var e=b&&b.u,f=b&&b.h;e&&f&&d("http://cgi.fark.com/cgi/fark/farkit.pl?",{u:e,h:f}),DMS.socialClick("fark",a,c)}function h(a,b,c){var e=b&&b.url,f=b&&b.title;e&&f&&d("http://digg.com/submit?phase=2&",{url:e,title:f}),DMS.socialClick("diggit",a,c)}function i(a,b,c){var e=b&&b.url,f=b&&b.title;e&&f&&d("http://www.linkedin.com/shareArticle?mini=true&",{url:e,title:f}),DMS.socialClick("linkedin",a,c)}function j(a){DMS.socialClick("email",a)}var k=1050,l=650;return $.extend(DMS,{Reddit:{postToReddit:e},StumbleUpon:{postToStumbleUpon:f},Fark:{postToFark:g},Diggit:{postToDiggit:h},LinkedIn:{postToLinkedIn:i},Email:{emailArticle:j},postToURL:d}),{postToFB:DMS.Facebook.postToFB,postToGPlus:DMS.Google.postToGPlus,postToTWTTR:DMS.Twitter.postToTWTTR,postToPinterest:DMS.Pinterest.postToPinterest,postToReddit:DMS.Reddit.postToReddit,postToStumbleUpon:DMS.StumbleUpon.postToStumbleUpon,postToFark:DMS.Fark.postToFark,postToDiggit:DMS.Diggit.postToDiggit,postToLinkedIn:DMS.LinkedIn.postToLinkedIn,emailArticle:DMS.Email.emailArticle}}),DMS.PollShare=function(){function a(a,b){var c=$("#poll-"+a).find("[for='answer-"+a+"-"+b+"']");return c?$.trim(c.text()):""}function b(a,b,c){var d=$("."+a).find("li.results-"+b+"-"+c+" span.results-score span.results-pct");return d?$.trim(d.text()):""}function c(c,d){var e=$("#poll-"+d).find("input:radio[name='answer']:checked").val();return" I said "+a(d,e)+". "+b(c,d,e)+" of others agreed with me. What do you think?"}function d(a,b){var d=$(".poll-"+b.pollId+".poll-results .dms-poll ul"),e="POLL: "+b.question,i="sponsored-poll"==b.pollStyle?"sponsored-poll":"post_poll";$.each({facebook:function(d){f("poll-share-"+b.pollId,b.fbAppId,e,b.pollImage||b.articleImage||b.defaultImage,c(a,b.pollId),i)},twitter:function(){g("poll-share-"+b.pollId,b.question,b.twitterVia,window.articleShortUrl||DMS.domain+window.location.pathname,"",i)},pinterest:function(){h("poll-share-"+b.pollId,b.pollImage||b.articleImage||b.defaultImage,e+c(a,b.pollId),i)}},function(a,b){d.find("li."+a).bind("click",b)})}function e(a,b,c,d,e){var f={contenturl:DMS.domain+window.location.pathname+"#poll-share-"+c,contentdeeplinkid:"/pages",clientid:b,cookiepolicy:"single_host_origin",prefilltext:d,calltoactionlabel:"VIEW",calltoactionurl:DMS.domain+window.location.pathname+"#poll-share-"+c,onshare:function(a){DMS.socialClick("google",e)}};window.gapi&&window.gapi.interactivepost.render(a,f)}function f(a,b,c,d,e,f){var g=["https://www.facebook.com/dialog/feed?app_id=",b,"&link=",DMS.domain,window.location.pathname,"%23",a,"&redirect_uri=http://i.dailymail.co.uk/i/pix/facebook/close.html","&name=",c,"&description=",e,"&picture=",d,"&u=",$('meta[property="og:url"]').attr("content")||window.url||window.location.href].join("");DMS.socialClick("facebook",f),window.open(g,"",DMS.getWindowDimensions(1e3,500))}function g(a,b,c,d,e,f){var g=JSON.stringify({text:(b.length>105?b.substring(0,101)+"...?":b)+e,via:c,url:decodeURIComponent(d)+"#"+a});DMS.Twitter.postToTWTTR(f,g)}function h(a,b,c,d){var e={description:c,media:b,type:"poll",url:DMS.domain+window.location.pathname+"#"+a};DMS.Pinterest.postToPinterest(d,e)}return{init:function(a,b){d(a,b)},renderPollsGoogleInteractive:e,getShareDescription:c}}(),DMS.Article=function(){function a(){var a=$("#articleIconLinksContainer"),b="top";a.find(".share-facebook").on("click",function(){DMS.Facebook.postToFB(b)}).end().find(".share-twitter").on("click",function(){DMS.Twitter.postToTWTTR(b)}).end().find(".share-pinterest").on("click",function(){DMS.Pinterest.postToPinterest(b)}).end().find(".share-gplus a").on("click",function(){DMS.Google.postToGPlus(b)})}function b(){var a=$("#socialLinks"),b="bottom";a.find(".facebook a").on("click",function(){DMS.Facebook.postToFB(b)}).end().find(".twitter a").on("click",function(){DMS.Twitter.postToTWTTR(b)}).end().find(".pinterest a").on("click",function(){DMS.Pinterest.postToPinterest(b)}).end().find(".googleplus a").on("click",function(){DMS.Google.postToGPlus(b)})}var c={top:a,bottom:b};return{init:function(a){c[a]&&c[a]()}}}(),$(function(){function a(){Ext.onReady(function(){l="floatingMenu",m=Ext.get(l),m&&(d(),Ext.EventManager.on(window,"resize",f))}),Ext.EventManager.on(window,"scroll",e)}function b(){return"number"==typeof window.pageYOffset?window.pageYOffset:document.documentElement.scrollTop}function c(){var a=b(),c=document.location.href;return null!==Ext.get("sky-left")||"none"!=Ext.getBody().getStyle("background-image")?!1:!(Ext.getBody().getWidth()<o||window.retina||window.devicePixelRatio>1||c.indexOf("email-article.html")>-1||c.indexOf("Privacy-Policy-Cookies.html")>-1||c.indexOf("reportAbuseInComment.html")>-1||a>h.getY()-15-Ext.get("floatingMenu").getHeight()||j>a)}function d(){k=Ext.get("articleIconLinksContainer"),null!==k&&(h=Ext.get("socialLinks"),i=Ext.get("content").getX(),j=k.getY()+k.getHeight()-(k.getPadding("b")||0)-(parseInt(k.getStyle("margin-bottom"))||0),m&&c()&&m.setStyle("visibility","visible"),n=c(),e())}function e(){if(m){if(!Ext.isReady)return void Ext.onReady(e,null,{single:!0});if(m.setLeft(Ext.get("content").getX()-50),h){if(p=c(),p!=n){var a={duration:.1};p?m.fadeIn(a):m.fadeOut(a)}n=p}}}function f(){i=Ext.get("content").getX(),m&&("fixed"==m.getStyle("position")&&m.setLeft(i-50),c()?m.isVisible()||m.show():m.isVisible()&&m.hide())}function g(a,b){PageCriteria&&!PageCriteria.mailtoEmailLinks&&$("#floatingShare").find("."+a+" a").on("click",b)}if(!MobileUtils.isMobile()){a();var h,i,j,k,l,m,n,o=1350,p=!1;g("facebook",function(a){DMS.Facebook.postToFB("body")}),g("twitter",function(a){DMS.Twitter.postToTWTTR("body")}),g("gplus",function(a){DMS.Google.postToGPlus("body")}),g("pinterest",function(a){postToPinterest("body")}),g("mail",function(a){DM.ted.tedEvent("social-event",{"social-event":"email-article"}),emailArticle("body")})}}),function(a,b){"function"==typeof define&&define.amd?define("mol-gallery/ImageShare",["jquery"],function(c){return b(a,c)}):a.ImageShare=b(a,a.jQuery)}(this,function(a,b){function c(a){return b(a).closest(".image-wrap").find("img")[0]}function d(a){return(b('meta[property="og:url"]').attr("content")||window.location.href)+"#"+a}function e(a){return window.articleShortUrl+"#"+a}function f(){return window.currentChannelTwitterFollow?window.currentChannelTwitterFollow:""}function g(a,b){return{id:a.id,nthPosition:b.attr("id").split("-")[2]}}function h(a,e){var f=c(a.target),h=f.src,i=f.alt,j=JSON.stringify({picture:h,redirect_uri:"http://i.dailymail.co.uk/i/pix/facebook/close.html",description:i,link:d(f.id)});DMS.Facebook.postToFB("image-share",j,g(f,b(e)))}function i(a,d){var h=c(a.target),i={text:h.alt,via:f(),url:e(h.id)};DMS.Twitter.postToTWTTR("image-share",i,g(h,b(d)))}function j(a,d){var h=c(a.target),i=h.alt.substring(0,90)+"...",j={description:i,via:f(),media:h.src,type:"image",url:e(h.id)};postToPinterest("image-share",j,g(h,b(d)))}function k(a){var b="google-share"+Math.random();a.find(".google-share").attr("id",b);var e=c(a),f=d(e.id);l(b,f,f,e.alt,g(e,a))}function l(b,c,d,e,f){var g={contenturl:c,contentdeeplinkid:"/pages",clientid:a.feGoogleClientId,cookiepolicy:"single_host_origin",prefilltext:e,calltoactionlabel:"VIEW",calltoactionurl:d,calltoactiondeeplinkid:"/pages/create",onshare:function(a){DMS.socialClick("google","image-share",f)}};window.gapi&&window.gapi.interactivepost.render(b,g)}function m(a,d){var e,f,h,i=b(a.currentTarget.parentNode.parentNode),j=i.find(".image-share-url-lightbox"),k=!j.is(":visible");if(j.toggle(),a.stopPropagation(),k){f=(b('meta[property="og:url"]').attr("content")||window.location.href).split("#")[0],e=c(a.target),h=f+"#"+e.id,DMS.socialClick("email","image-share",g(e,d));var l=i.find("#share-url-input");if(l.val(h),navigator.userAgent.toLowerCase().indexOf("firefox")>-1){var m=!0;l.on("contextmenu mouseleave",function(a){m=!0,a.stopPropagation()}),b(".image-wrap").on("mouseenter",function(a){m=!1}),b("body").on("mouseenter",function(a){b(".image-share-url-lightbox").hide(),m&&b(".share-pictures-links").hide()})}setTimeout(function(){l.select().focus()},100)}}function n(){b(".image-share-url-lightbox").hide()}function o(a){a.find(".share-pictures-icon.email").click(function(b){ImageShare.showUrlLightbox(b,a)}),a.find(".share-pictures-icon.facebook").click(function(b){ImageShare.postImageToFb(b,a),n()}),a.find(".share-pictures-icon.twitter").click(function(b){ImageShare.postImageToTwitter(b,a),n()}),a.find(".share-pictures-icon.google").click(function(a){n()}),a.find(".share-pictures-icon.pinterest").click(function(b){ImageShare.postImageToPinterest(b,a),n()}),b(a).click(function(c){if(c.stopPropagation(),c.preventDefault(),"image-share-url-lightbox"!=c.target.parentNode.parentNode.className){var d=b("#"+a[0].id+" .share-pictures-links");d.is(":visible")||b("#"+a[0].id+" .image-share-url-lightbox").hide()}})}function p(a){b(document).mousedown(function(c){var d=b(a);d.is(b(c.target))||0!==d.has(b(c.target)).length||b("#"+d[0].id+" .image-share-url-lightbox").hide()})}function q(a){var c=_.throttle(function(a){a.find(".share-pictures-links:not(.image-share-hide)").fadeIn({duration:200})},400),d=_.throttle(function(a){a.find(".share-pictures-links:not(.image-share-hide)").fadeOut({duration:200})},400);a.on("mouseenter",function(a){c(b(this))}),a.on("mouseleave",function(a){d(b(this))})}function r(a,c){o(a),p(a),q(b(c)),k(a)}var s={postImageToFb:h,bindGoogleData:k,postImageToTwitter:i,postImageToPinterest:j,showUrlLightbox:m,bindShareEvents:o,bindUnclickEvent:p,showHideOnHover:q,initOnImage:r};return DMS.ImageShare=s,s}),$(function(){$.fn.shareSelectedText=function(a){function b(){$("body").prepend('<div id="'+m+'"><ul><li class="share">SHARE SELECTION</li><li class="facebook"></li><li class="twitter"></li><li class="mail"></li></ul></div>'),o=$("#"+m),c()}function c(){o.find("li").on("click",function(){var a=n,b=a.length>1e3?a.substring(0,996)+'..."':a,c=$("meta[property=twitter\\:title]").first().attr("content"),d={name:c,headline:$(".article-text h1").first().text()||c,message:" ",caption:b,description:"www.dailymail.co.uk",title:" ",redirect_uri:"http://i.dailymail.co.uk/i/pix/facebook/close.html",picture:$("meta[property=og\\:image]").first().attr("content"),link:$('meta[property="og:url"]').attr("content")||window.location.href||"",url:window.articleShortUrl||$('meta[property="og:url"]').attr("content")||window.location.href||"",text:n,via:(window.twitterVia&&"MailOnline"!==window.twitterVia?window.twitterVia:currentChannelTwitterFollow)||"MailOnline",type:"text"},e={facebook:function(a){DMS.Facebook.postToFB("text",JSON.stringify(a))},twitter:function(a){DMS.Twitter.postToTWTTR("text",JSON.stringify(a))},mail:function(b){DMS.socialClick("email","text"),PageCriteria.mailtoEmailLinks?window.location.href="mailto:?subject=Read this: "+encodeURIComponent(b.headline)+"&body="+encodeURIComponent(a+"\n"+b.link+"?ito=email_share_article-text"):window.location.href="mailto:?subject=DailyMail%20article&body="+encodeURIComponent(a+" "+b.link)}},f=$(this).attr("class");e[f]&&e[f](d),o.hide()}),j.on("mouseup",f(function(a){n=$.trim(g()),p=p&&d(a),n&&p&&(o.css("top",a.pageY>h?a.pageY:h),o.css("left",a.pageY>h?a.pageX:i),o.css("display","inline"))},500)),j.on("mousedown",function(a){h=a.pageY,i=a.pageX,p=d(a),o.hide()}),o.on("mousedown",function(a){a.stopPropagation()})}function d(a){for(var b=$(a.target),c=0,d=k.length;d>c;c++)if(b.is(k[c])||b.is(k[c]+" *")&&e(b))return!0;return!1}function e(a){for(var b=0,c=l.length;c>b;b++)if(a.is(l[b])||a.is(l[b]+" *"))return!1;return!0}function f(a,b){var c=null;return function(){var d=this,e=arguments;clearTimeout(c),c=setTimeout(function(){a.apply(d,e)},b)}}function g(){return window.getSelection?window.getSelection().toString():document.getSelection?document.getSelection():document.selection?document.selection.createRange().text:void 0}var h,i,j=$(this),k=a.selectors||["p"],l=a.notSelectors||[],m="dms-txt",n="",o=null,p=!1;b()},"article"!==PageCriteria.pageType||MobileUtils.isMobile()||DM.getPageMetadata().textBased||$(".article-text").shareSelectedText({selectors:["p","ul","h1","h2",".mol-article-quote"],notSelectors:[".share-pictures-links","#most-read-news-wrapper","a","input"]})}),$(function(){$.fn.mailtoShares=function(a){function b(){c()}function c(){d.on("click",function(a){var b=$(a.target).data("email-share-style"),c=b.replace(/email_share_article-/,"");DMS.socialClick("email",c),setTimeout(function(){window.location.href="mailto:?subject=Read%20this%3A%20"+encodeURIComponent(d.data("headline"))+"&body="+encodeURIComponent($(a.target).data("url")+"?ito="+b)},100)})}var d=$(this);b()},"article"!==PageCriteria.pageType||MobileUtils.isMobile()||DM.getPageMetadata().textBased||$("a.mailto.js-email").mailtoShares({})}),DMS.RC=DMS.RC||{},function(){function a(a,b){return a.length>140-b.length}function b(a,b){var c=Math.max(b.lastIndexOf(" ",140-a.length-3-1),b.lastIndexOf("\n",140-a.length-3-1));return b.substring(0,c)+"..."}function c(a,b,c){function d(a,d){var e=Ext.decode(a.responseText,!0);return c(e&&"200"==e.code&&e.payload?e.payload:b)}function e(a,d){return c(b)}Ext.Ajax.request({disableCaching:!1,url:"/reader-comments/p/comment/shorturl/"+a,success:d,failure:e})}function d(a){if(a){var b=Ext.get(a);b.child(".shareComment").show(),b.child(".reportAbuseLink").show()}}var e,f=-1!=window.location.host.indexOf("thisismoney")?"This is Money":"MailOnline.co.uk";DMS.RC.SOCIAL_ELEMENTS_HTML='<a class="fShareComment"></a><a class="tShareComment"></a><span class="pShareComment"></span><span class="gShareComment"></span>',DMS.RC.SHARE_ELEMENTS_HTML='<div class="shareComment">'+DMS.RC.SOCIAL_ELEMENTS_HTML+'<span class="copyCommentLink"></span><span class="shareExpansionAnchor"></span></div>',DMS.RC.fShareComment=function(a,b,c){var d=DMS.buildUrlParameters({app_id:0x84f878b8271b,link:a,redirect_uri:"http://i.dailymail.co.uk/i/pix/facebook/close.html",name:"Comment by "+b+" on "+f+".",caption:DMS.domain,description:c,picture:"http://f.dailymail.co.uk/i/furniture/comments/articles/m_logo.png"},"https://www.facebook.com/dialog/feed?");window.open(d,"",DMS.getWindowDimensions(1e3,500))},DMS.RC.tShareComment=function(c,d,e){var f=d+"\n";a(e,f)&&(e=b(f,e)),c.location="http://twitter.com/intent/tweet?text="+encodeURIComponent(e+"\n"+d)},DMS.RC.pShareComment=function(c,d,e){var f=e.commentBody,g=d+"\n";a(f,g)&&(e.commentBody=b(g,f)),e.pinterestWindow=c,DMS.Pinterest.postToPinterest("comment",{type:"comment",commentData:e})},DMS.RC.gPlusEnhance=function(a,b){function c(){function b(){return e.commenterName+" commented on "+f+": "+e.commentBody}gapi.interactivepost.render(a.child(".gShareComment").dom,{contenturl:e.commentLink,contentdeeplinkid:"/pages",clientid:DMS.RC.gplusClientId,cookiepolicy:"single_host_origin",prefilltext:b(),calltoactionlabel:"COMMENT",calltoactionurl:e.commentLink})}function d(){var b=a.child(".gShareComment");b&&b.remove()}var e=b?b:DM.RC.getCommentData(a);e&&(gapi.interactivepost?c():d())},DMS.RC.shareComment=function(a,b,d){function e(a,b){"function"==typeof DMS.socialClick&&DMS.socialClick(a,b)}var f=d&&d.commentId?d:DM.RC.getCommentData(b);if(Ext.fly(b).hasClass("gShareComment"))e("plusone","comment"),DM.ted.tedEvent("social-event",{"social-event":"plusone-share-comment"});else if(Ext.fly(b).hasClass("fShareComment"))e("facebook","comment"),DM.ted.tedEvent("social-event",{"social-event":"facebook-share-comment"}),DMS.RC.fShareComment(f.commentLink,f.commenterName,f.commentBody);else if(Ext.fly(b).hasClass("tShareComment")){e("twitter","comment"),DM.ted.tedEvent("social-event",{"social-event":"twitter-tweet-comment"});var g=window.open("about:blank","",DMS.getWindowDimensions(575,400));c(f.commentId,f.commentLink,function(a){DMS.RC.tShareComment(g,a,f.commentBody)})}else if(Ext.fly(b).hasClass("pShareComment")){var h=window.open("about:blank","",DMS.getWindowDimensions(800,320,!0));DM.ted.tedEvent("social-event",{"social-event":"pinterest-share-comment"}),c(f.commentId,f.commentLink,function(a){f.shortUrl=a,DMS.RC.pShareComment(h,a,f)})}},DMS.RC.updateHoverElements=function(){e&&clearTimeout(e),e=setTimeout(function(){var a=Ext.query(".reply.hovered",Ext.getDom("js-comment"))[0];if(a)return d(a),void(e=void 0);var b=Ext.query(".comment.hovered",Ext.getDom("js-comment"))[0];b&&(d(b),e=void 0)},10)}}(),function(a){var b,c,d,e="dms-drawer",f="dms-drawer-arrow",g="http://i.dailymail.co.uk";DM.ShareLinks={init:function(b){var c=a.get(b.id);c&&c.on("click",this.onClick,this,{stopEvent:!0,delegate:"a.js-sl",params:b.params})},tpl:null,onClose:function(c){(!c.getTarget("#"+e)||a.get(c.getTarget()).hasClass("close"))&&(a.getBody().un("click",DM.ShareLinks.onClose,this),a.EventManager.removeListener(window,"resize",DM.ShareLinks.onClose,this),b=a.get(f),b&&b.hide(),this.dom.innerHTML="",this.setStyle("display","none"))},onClick:function(b,h,i){function j(a,b,c){if(a)return{width:288,height:129};var d=332,e=60,f=50;return b&&(d+=f),c&&(d-=f),{width:d,height:e}}function k(a){var b=$('meta[property="og:url"]').attr("content"),c=b.match(/^http:\/\/[^/]+/);return a.replace(/^http:\/\/[^/]+/,c)}function l(a){return a?((-1===a.indexOf("http://")||a.indexOf("http://")>0)&&(a=g+a),a):void 0}function m(a){return a.replace(/^http:\/\/[^/]+/,"http://"+window.location.host)}function n(a,b){$("#"+e+" li").unbind("click"),$("#"+e+" li").on("click",function(){var c=$(this).attr("class");$.inArray(c,["print"])>-1||DM.pageEvents.fireEvent(DM.pageEvents.SOCIAL_SHARE_CLICKED,{site:c,placement:"drawer",pageMetadata:{articleId:a,articleTitle:b,contentType:"social-share",pageName:DM.getPageMetadata().pageName}})})}var o,p,q,r,s,t,u,v,w,x=a.get(h),y=i.params,z=x.getOffsetsTo(a.getBody()),A=y&&y.isChannel?y.isChannel:!1,B=y&&y.showGoogle?y.showGoogle:!1,C=y&&y.hideEmail?y.hideEmail:!1,D=j(A,B,C),E=0,F=0,G=0,H="",I="",J=y&&y.emailShareStyle||x.getAttribute("data-email-share-style"),K=y&&y.headline||x.getAttribute("data-headline");if(y&&y.title)q=y.url,t=y.articleChannelFollowButton,r=y.id,s=y.title,v=y.eTwitterStatus;else{if(o=b.getTarget(".article",7,!0)||b.getTarget(".js-article",7,!0),o&&(p=o.child("h2 a")||o.child(".title"),I=o.getAttribute("data-original-title")),!o||!p)return;var L="http://f.dailymail.co.uk/i/furniture/comments/articles/m_logo.png";H=o.child(".share-link")?l(o.child(".share-link").getAttribute("data-article-image"))||L:L,q=p.dom.href.replace(/\?.*$/,""),q=k(q),r=/article-(\d+)/.exec(q)[1];var M=o.child(".social-headline");s=M&&M.dom.childNodes[0]?M.dom.childNodes[0].nodeValue:p.dom.childNodes[0].nodeValue,u=AND.getParams(x.dom)[0]||q,t=$.trim(o.select(".article-icon-links-container",7,!0).elements[0].getAttribute("data-followbutton")),t||(t=$.trim(o.getAttribute("data-followbutton"))||"MailOnline"),v=DMS.Twitter.truncateTextAndEscape({text:s,url:u,via:t})}c=a.get(e),w=a.get(f),c?c.removeClass("open"):(c=a.getBody().insertHtml("beforeEnd",'<div id="'+e+'"></div>',!0),w=a.getBody().insertHtml("beforeEnd",'<div id="'+f+'">&nbsp</div>',!0)),y.inside?(E=B?-390:-340,F=-112,G=-30,w.setStyle({backgroundPosition:"-600px 48px"})):(E=0,F=0,G=0,w.setStyle({backgroundPosition:"-600px 0px"})),c.setStyle({display:"block",width:""+D.width+"px",height:""+D.height+"px",left:z[0]-15+E+"px",top:z[1]+30+F+"px"}),w.setStyle({display:"block",position:"absolute",left:z[0]+"px",top:z[1]+20+G+"px"}),this.tpl=new a.Template('<div class="wrapper"><ul>'+(B?'<li class="googleplus"><a target="_new" title="Share this story on Google +" href="https://plus.google.com/share?url={eUrl}" class="js-tl"><span>Google+</span></a></li>':"")+(A?'<li class="facebook"><a target="_new" title="Share this story on Facebook" href="http://www.facebook.com/sharer.php?u={eUrl}" class="js-tl"><span>Facebook</span></a></li><li class="twitter"><a target="_new" title="Share this story on Twitter" href="http://twitter.com/intent/tweet?related={articleChannelFollowButton},'+twitterVia+'&text={eTwitterStatus}" class="js-tl"><span>Twitter</span></a></li><li class="pinterest"><a target="_new" title="Share this story on Pinterest" href="http://www.pinterest.com/pin/create/button/?url={eUrl}&description={eTitle}%20%23DailyMail&media={eArticleImage}" class="js-tl"><span>Pinterest</span></a></li><li class="googleplus"><a target="_new" title="Share this story on Google +" href="https://plus.google.com/share?url={eUrl}" class="js-tl"><span>Google+</span></a></li>':"")+'<li class="reddit"><a target="_new" title="Share this story on Reddit" href="http://reddit.com/submit?url={eUrl}&title={eTitle}" '+(A?"":"onclick=\"postToReddit('{placement}');\"")+'class="js-tl"><span>Reddit</span></a></li><li class="stumbleupon"><a target="_new" title="Share this story on Stumble Upon" href="http://www.stumbleupon.com/badge/?url={eUrl}&title={eTitle}" '+(A?"":"onclick=\"postToStumbleUpon('{placement}');\"")+'class="js-tl"><span>Stumble Upon</span></a></li><li class="digg"><a target="_new" title="Share this story on Digg" href="http://digg.com/submit?phase=2&url={eUrl}&title={eTitle}" '+(A?"":"onclick=\"postToDiggit('{placement}');\"")+'class="js-tl"><span>Digg it</span></a></li><li class="linkedin"><a target="_new" title="Share this story on LinkedIn" href="http://www.linkedin.com/shareArticle?mini=true&url={eUrl}&title={eTitle}" '+(A?"":"onclick=\"postToLinkedIn('{placement}');\"")+'class="js-tl"><span>LinkedIn</span></a></li><li class="print"><a href="{printUrl}" title="Print this article" onclick="DM.popup(\'{printUrl}\', 600, 600); return false;"><span>Print</span></a></li>'+(C?"":J?'<li class="email"><a href="mailto:?subject={mailtoSubject}&body={mailtoBody}" data-on-mobile="mailto:?subject={eTitle}&body={mobileEmailBody}" title="Email to a friend"><span>Email</span></a></li>':'<li class="email"><a href="{newEmailUrl}" data-target="/email-article.html?id={eId}" data-modal-id="email-modal-overlay" data-modal-type="email-overlay" data-ajax-refresh-everytime="true" data-toggle="modal"'+(A?"":' data-placement="{placement}"')+' data-on-mobile="mailto:?subject={eTitle}&body={mobileEmailBody}" title="Email to a friend"><span>Email</span></a></li>')+'</ul></div><div class="close">&nbsp;</div>').compile(),
c.dom.innerHTML=this.tpl.apply({eTitle:encodeURIComponent(s),eUrl:encodeURIComponent(q),mailtoSubject:encodeURIComponent("Read this: "+K),mailtoBody:encodeURIComponent(q+"?ito="+J),newEmailUrl:q+"#email",mobileEmailBody:q+"%0D%0A%0D%0AGet the MailOnline App: %0D%0A"+/^https?\:\/\/([^\/?#]+)(?:[\/?#]|$)/i.exec(q)[0]+"mobile",eId:r,printUrl:m(q)+"?printingPage=true",eTwitterStatus:v,articleChannelFollowButton:encodeURIComponent(t),placement:y.placement,eArticleImage:encodeURIComponent(H)}),A&&n(r,I||s),c.dom.getAttribute("data-ready")||c.dom.setAttribute("data-ready","true"),w=a.get(f),y.inside||w&&w.show(),y.zIndex&&(w.setStyle("z-index",y.zIndex),c.setStyle("z-index",y.zIndex)),c.slideIn(y.anchor,{scope:c,duration:.3,callback:function(){var a=this.child(".wrapper");this.addClass("open"),y.inside&&w&&w.show(),a&&a.fadeIn({duration:.4})}}),a.getBody().on("click",this.onClose,c),d=c.child(".close"),d.on("click",this.onClose,c,{single:!0}),a.EventManager.addListener(window,"resize",this.onClose,c,{single:!0})}}}(Ext),AND={log:function(a){"undefined"!=typeof console?console.log(a):alert(a)},BLANK_IMAGE_URL:"/1x1.gif",getParams:function(a){return AND.gt(a.className,"|")},getHrefParams:function(a){return AND.gt(a.href,"#")[1]},gt:function(a,b){if(a){if(-1!=a.indexOf(b)){var c=a.split(b);return c}return""}return""},fixImage:function(a){a&&("IMG"!==a.tagName&&(a=a.getElementsByTagName("IMG")[0]),a&&a&&-1!=a.src.indexOf(this.BLANK_IMAGE_URL)&&(a.src=AND.getParams(a)[0]))},fixImages:function(a){for(var b=Ext.query("img",a),c=0,d=b.length;d>c;c++)-1!=b[c].src.indexOf(this.BLANK_IMAGE_URL)&&(b[c].src=AND.getParams(b[c])[0])},clickToURL:function(a,b){var c=Ext.get(a);c&&c.on("click",function(a,d){d==c.dom&&(document.location.href=b)},this)},trackClickInline:function(a,b){var c=Ext.get(a);c&&c.on("click",function(){Ext.DomHelper.append(Ext.getBody().dom,'<img src="'+b+'" width="0" height="0" alt="trackClick" />')},this)},repaintDOM:function(a){Ext.isIE&&("string"==typeof a&&(a=Ext.fly(a).dom),a.className=a.className)},randNum:function(){return Math.floor(1e3*Math.random()+1)},extendObject:function(a,b){for(var c in b)a[c]=b[c];return a},getUrlParameter:function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b=new RegExp("[\\?&]"+a+"=([^&#]*)"),c=b.exec(window.location.href);return null==c?"":c[1]},getPageSize:function(){var a,b;window.innerHeight&&window.scrollMaxY?(a=document.body.scrollWidth,b=window.innerHeight+window.scrollMaxY):document.body.scrollHeight>document.body.offsetHeight?(a=document.body.scrollWidth,b=document.body.scrollHeight):(a=document.body.offsetWidth,b=document.body.offsetHeight);var c,d;return self.innerHeight?(c=self.innerWidth,d=self.innerHeight):document.documentElement&&document.documentElement.clientHeight?(c=document.documentElement.clientWidth,d=document.documentElement.clientHeight):document.body&&(c=document.body.clientWidth,d=document.body.clientHeight),[a,b,c,d]},competitions:{getRegUrl:function(a){return"/registration"},dologon:function(a,b){a.action=AND.competitions.getRegUrl(b)+"/login",a.redirectPath.value=document.URL,a.submit()},doregister:function(a,b){a.action=AND.competitions.getRegUrl(b)+"/login",a.redirectPath.value=document.URL,a.submit()},dologout:function(a){DM.deleteCookie("userid","/",".dailymail.co.uk"),DM.deleteCookie("authid","/",".dailymail.co.uk"),DM.deleteCookie("subuserid","/",".dailymail.co.uk"),DM.deleteCookie("email","/",".dailymail.co.uk"),DM.deleteCookie("userid","/",".mailonsunday.co.uk"),DM.deleteCookie("subuserid","/",".mailonsunday.co.uk"),DM.deleteCookie("email","/",".mailonsunday.co.uk"),DM.deleteCookie("userid","/",".anl.dmgt.net"),DM.deleteCookie("authid","/",".anl.dmgt.net"),DM.deleteCookie("userid","/",".thisismoney.co.uk"),DM.deleteCookie("subuserid","/",".thisismoney.co.uk"),DM.deleteCookie("email","/",".thisismoney.co.uk"),window.location=a},docomplogon:function(a,b,c){a.action=AND.competitions.getRegUrl(c)+"/loginCompetition",a.EntryPath.value="https://register.anm.co.uk/register/comp.htm",""==a.CompId.value&&(a.CompId.value=b),a.submit()},doedit:function(a,b){a.action=AND.competitions.getRegUrl(b)+"/login",a.Email.value=DM.getCookie("email"),a.redirectPath.value=document.URL,a.Update.value="Y",a.submit()}},getScrollXY:function(){var a=0,b=0;return"number"==typeof window.pageYOffset?(b=window.pageYOffset,a=window.pageXOffset):document.body&&(document.body.scrollLeft||document.body.scrollTop)?(b=document.body.scrollTop,a=document.body.scrollLeft):document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)&&(b=document.documentElement.scrollTop,a=document.documentElement.scrollLeft),[a,b]},setCookie:function(a,b,c,d,e,f){var g=escape(a)+"="+escape(b);g+=c?";expires="+c.toGMTString():"",g+=d?";path="+d:"",g+=e?";domain="+e:"",g+=f?";secure":"",document.cookie=g},getCookie:function(a){var b=null;if(document.cookie){var c=document.cookie.split(escape(a)+"=");if(2<=c.length){var b=unescape(c[1].split(";")[0]);b.length>1&&'"'==b.charAt(0)&&'"'==b.charAt(b.length-1)&&(b=b.substring(1,b.length-1))}}return b},deleteCookie:function(a){var b=AND.getCookie(a);b&&AND.setCookie(a,b,new Date(1))},loggedIn:function(){this.getCookie("authid")&&Ext.getBody().addClass("logged-in")},midas:{refresh:function(){var a=document.URL.toString();a.indexOf("mpp=")>0?window.location=a.substring(0,a.indexOf("mpp=")):window.location=window.location},logon:function(){var a=document.URL.toString();a.indexOf("mpp=")>0&&(a=a.substring(0,a.indexOf("mpp="))),window.location=AND.competitions.getRegUrl(a)+"/login.html?targetUrl="+escape(a)},checkLogon:function(){DM.getCookie("authid")?AND.midas.refresh():AND.midas.logon()},subscribe:function(){var a="/money/subscribe.html",b=document.URL;b.indexOf("mpp=")>0&&(b=b.substring(0,b.indexOf("mpp="))),b=escape(b),window.location=a+"?redirect="+b}},addScript:function(a){function b(b,f){var f=f||{},g="function"==typeof f?f:f.success;if(d[b])return g&&g();if(!c(b,g)){var h=!1,i=e[b],j=a.createElement("script"),k=f.cId&&a.getElementById(f.cId)||a.head||a.getElementsByTagName("head")[0];j.type="text/javascript",j.src=b,j.onload=j.onreadystatechange=function(){if(!(h||this.readyState&&"complete"!==this.readyState&&"loaded"!==this.readyState)){h=!0,d[b]=!0;for(var a=0;a<i.length;a++)i[a]()}},k.appendChild(j)}}function c(a,b){var c=e[a],d=void 0!==c;return d||(c=e[a]=[]),b&&c.push(b),d}var d={},e={};return b}(document)},function(a){a.LazyLoad=function(a,b){var c=new Image,d=a.getAttribute("data-src");c.onload=function(){a.parent?a.parent.replaceChild(c,a):a.src=d},c.src=d,b?b():null}}(DM),DM.Rotator=Ext.extend(Ext.util.Observable,{animDuration:1.2,animEasing:"easeOut",pageSize:3,pageCount:4,activePage:1,activeClass:"link-wocc",rotate:!0,imagesRequested:!1,constructor:function(a,b){var c=Ext.get(a);if(!c)return null;b=b||{},Ext.apply(this,b),DM.Rotator.superclass.constructor.call(this,b),this.container=c,b.video?(this.panels=this.container.child(b.video.panels),this.pages=this.container.child(b.video.pages)):(this.panels=this.container.child(".rotator-panels"),this.pages=this.container.child(".rotator-pages")),this._setActivePageClass(1);var d=this.panels.child("li"),e=d.getWidth();e||this.container.isVisible()||(this.container.dom.style.display="block",e=d.getWidth(),this.container.dom.style.display=""),this.itemWidth=e+Number(/(\d+)/.exec(d.getStyle("margin-right"))[0]),this._initEvents()},_setActivePageClass:function(a){this.pages.select("li,div").each(function(b,c){var d=b.child("a").dom.getAttribute("data-page");d==a?b.addClass(this.activeClass):b.removeClass(this.activeClass),!this.rotate&&("prev"==d&&1==a||"next"==d&&a==this.pageCount)||1==this.pageCount?b.addClass("disabled"):b.removeClass("disabled")},this)},_initEvents:function(){this.pages.on("click",function(a){a.preventDefault();var b=a.target.getAttribute("data-page");"prev"==b?this.previous():"next"==b?this.next():b>0&&this.scrollTo(1*b)},this)},_requestImages:function(){DM.LazyLoad&&!this.imagesRequested&&(this.panels.select("[data-src]").each(function(a){DM.LazyLoad(a.dom)}),this.imagesRequested=!0)},scrollTo:function(a){this._requestImages(),this.activePage=a,this._setActivePageClass(a);var b=this.itemWidth*this.pageSize*(a-1)*-1;this.panels.stopFx(!1),this.panels.anim({left:{to:b}},{duration:this.animDuration,easing:this.animEasing})},next:function(){var a=this.activePage>=this.pageCount?this.rotate?1:this.activePage:this.activePage+1;this.scrollTo(a)},previous:function(){var a=this.activePage<=1?this.rotate?this.pageCount:this.activePage:this.activePage-1;this.scrollTo(a)}}),DM.Rotator.initMiniCarousel=function(){DM.later("bundle",function(){var a="mini-carousel-wrapper",b={pageSize:6,pageCount:4,rotate:!1};new DM.Rotator(a,b)})},DM.Rotator.initMiniCarouselExt=function(a,b,c){DM.later("bundle",function(){var d={pageSize:b,pageCount:c,rotate:!1};new DM.Rotator(a,d)})},jQuery(function(a){a.fn.simplemarquee=function(b){function c(a,b){var f=0,h=e.speed;if("ltr"==e.direction?(b&&a.css("left","-"+2*g+"px"),f=g-2):(f=g+2,b&&a.css("left","0px")),!b){var i=parseInt(a.css("left"),10),j=Math.abs(i)/g*100;h=Math.round(e.speed/100*(100-j))}d=a.animate({left:"-"+f+"px"},h,"linear",function(){c(a,!0)})}var d,e=a.extend({speed:5e3,direction:"rtl",pause:!0,wrapclass:"sections"},b),f="",g=0;return this.each(function(){if(a(this).length){f='<div class="section">'+a(this).html()+"</div>",a(this).html('<div class="'+e.wrapclass+'">'+f+"</div>"),g=a("."+e.wrapclass,this).width(),"0px"==a(this).css("height")&&a(this).height(a(".section:eq(0)",this).height());var b=0;for(i=0;i<30&&(a("."+e.wrapclass,this).append(f),a("."+e.wrapclass,this).width()>a(this).width()&&b++,!(b>1));i++);a("."+e.wrapclass,this).width("9999px"),c(a("."+e.wrapclass,this),!0)}e.pause&&(a("."+e.wrapclass,this).mouseover(function(){d.stop()}),a("."+e.wrapclass,this).mouseout(function(){c(a(this),!1)}))})}}),$(document).ready(function(){-1!=navigator.userAgent.indexOf("MSIE")&&initializeConsole(),$("#js-ticker-rotator").simplemarquee({speed:4e4,direction:"rtl",pause:!0}),$(document).on("click",".lb-tabs > li",function(){var a=$(this);a.attr("data-href")&&handle_tab_selection(a)}),$(document).on("click",".lb-tabbed-pane .lb-tabs > li",function(a){var b=$(this);b.attr("data-href")||handle_tabbed_pane_selection(b,a)}),$(document).on("change",".tabbed-article-list .dropdown",function(a){var b=$(this),c=$(this[this.selectedIndex]);c.data("url")?handle_dropdown_selection(c,a):handle_legacy_dropdown_selection(b)}),$(document).on("click",".rotator-pages a",function(a){var b=$(this);a.preventDefault(),b.attr("data-href")&&handle_page_rotation(b)})}),function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]}}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one(a.support.transition.end,function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a.support.transition=b();var c="ez-modal",d=0,e={init:function(b){var e={container:"body",closeOnBackgroundClick:!0,triggerOnClick:!1,toggleButtons:!1,autoOpen:!1,closeKeyCodes:"27",center:!1,ajaxUrl:!1,ajaxRefreshEverytime:!0,ajaxLoadOnInit:!1,ajaxErrorMessage:"Sorry, but something went wrong. Please come back later and try again."};return b=a.extend(e,b),this.each(function(){var e,f,g,h,i,j=b,k={},l="."+c+"-"+d++,m=!1,n=j.center,o=a.map(j.closeKeyCodes.split(" "),function(a){return a&&a.length?parseInt(a,10):void 0});k.container=a(j.container),k.backdrop=k.container.children("."+c+"-backdrop"),k.backdrop.length||(k.backdrop=a("<div class="+c+"-backdrop></div>").appendTo(k.container)),k.modal=a(this).addClass(c),k.modal.data("modal","active"),g=function(){k.backdrop.show(),setTimeout(function(){k.backdrop.addClass(c+"-backdrop-on")},30)},e=function(){k.modal.show(),i(),setTimeout(function(){k.container.addClass(c+"-container-on"),k.modal.addClass(c+"-on"),k.modal.attr("aria-hidden","false"),k.modal.focus(),k.modal.trigger({type:c+"-after-open",ui:k,opt:j})},30)},f=function(){k.container.removeClass(c+"-container-on"),k.backdrop.removeClass(c+"-backdrop-on"),k.modal.removeClass(c+"-on"),k.modal.attr("aria-hidden","true"),a.support.transition?(k.container.addClass(c+"-container-off").one(a.support.transition.end,function(){k.container.removeClass(c+"-container-off")}).emulateTransitionEnd(600),k.backdrop.addClass(c+"-backdrop-off").one(a.support.transition.end,function(){k.backdrop.removeClass(c+"-backdrop-off").hide()}).emulateTransitionEnd(600),k.modal.addClass(c+"-off").one(a.support.transition.end,function(){k.modal.removeClass(c+"-off").hide(),k.modal.trigger({type:c+"-after-close",ui:k,opt:j})}).emulateTransitionEnd(600)):(k.backdrop.hide(),k.modal.hide(),k.modal.trigger({type:c+"-after-close",ui:k,opt:j}))},i=function(){n&&(k.modal.css("margin-left",0),k.modal.css("margin-left","-"+k.modal.outerWidth(!0)/2+"px"),k.modal.css("margin-top",0),k.modal.css("margin-top","-"+k.modal.outerHeight(!0)/2+"px")),n=!1},h=j.ajaxUrl&&function(b){!m||j.ajaxRefreshEverytime?(k.modal.trigger({type:c+"-before-load",ui:k,opt:j}),k.modal.load(a.isFunction(j.ajaxUrl)&&j.ajaxUrl()||j.ajaxUrl,function(a,d,e){"error"===d?k.modal.html('<div class="'+c+"-error "+c+'-close" >'+j.ajaxErrorMessage+"</div>"):(m=!0,n=j.center),k.modal.trigger({type:c+"-after-load",ui:k,opt:j}),b()})):b()}||function(a){a()},j.ajaxLoadOnInit&&h(function(){}),k.modal.on(c+"-open"+l,function(){g(),k.modal.trigger({type:c+"-before-open",ui:k,opt:j}),h(function(){e()})}),k.modal.on(c+"-close"+l,function(){k.modal.trigger({type:c+"-before-close",ui:k,opt:j}),f()}),j.autoOpen&&k.modal.trigger(c+"-open"),o&&a(document).on("keydown"+l,function(b){return k.modal.is("."+c+"-on")&&-1!==a.inArray(b.keyCode,o)?(k.modal.trigger(c+"-close"),!1):void 0}),j.triggerOnClick&&a(document).on("click"+l,j.triggerOnClick,function(a){return k.modal.trigger(c+"-open"),!1}),j.toggleButtons&&a(j.toggleButtons).each(function(){a(this).data("modal",k.modal)}),k.modal.on("click"+l,"."+c+"-close",function(a){return k.modal.trigger(c+"-close"),!1}),j.closeOnBackgroundClick&&k.backdrop.on("click"+l,function(){return k.modal.trigger(c+"-close"),!1}),k.modal.bind(c+"-destroy"+l,function(){k.backdrop.off(l),k.modal.off(l),a(document).off(l),f(),k.modal.removeData("modal")})})},open:function(){this.trigger(c+"-open")},close:function(){this.trigger(c+"-close")},destroy:function(){this.trigger(c+"-destroy")}};a.fn.ezmodal=function(b){return e[b]?e[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?void a.error("Method "+b+" does not exist on jQuery.ezmodal"):e.init.apply(this,arguments)},a(document).on("click."+c,'[data-toggle="modal"]',function(b){var d=a(this);if(d.attr("data-on-mobile")&&(MobileUtils.isMobile()||MobileUtils.isKindleSilk()))return void a(this).attr("href",d.attr("data-on-mobile"));var e,f=d.attr("href"),g=d.attr("data-target")||f&&f.replace(/.*(?=#[^\s]+$)/,""),h=d.data("modal-id");0===g.indexOf("#")?(e=a(g),e.data("modal")||e.ezmodal(a.extend(e.data(),d.data()))):(e=h?a("#"+h):d.data("modal"),e&&0!=e.length||(e=a('<div class="'+c+'" aria-hidden="true" role="dialog"></div>'),h&&e.attr("id",h),e.ezmodal(a.extend({ajaxUrl:g,toggleButtons:d},d.data())).appendTo("body"))),e.ezmodal("open"),b.preventDefault()})}(jQuery);var G_IMG_SRV="http://i.mol.im";DM.Fn=function(){var a=function(a,b){var c,d,e,f=b.length;if("undefined"!=typeof DM[a]||(a=a.charAt(0).toUpperCase()+a.slice(1),"undefined"!=typeof DM[a]))if(c=DM[a],"function"==typeof c)for(;f>0;)--f,new c(b[f].id,b[f].params);else if("object"==typeof c)for("function"==typeof c.getInstance?(d=c.getInstance().init,e=c.getInstance()):(d=c.init,e=c);f>0;)--f,d.call(e,b[f])};return{init:function(){var b;self!=top&&AND.FixIFrame();for(b in DM.m)a(b,DM.m[b])}}}();var swfobject=function(){function a(){if(!R){try{var a=K.getElementsByTagName("body")[0].appendChild(q("span"));a.parentNode.removeChild(a)}catch(b){return}R=!0;for(var c=N.length,d=0;c>d;d++)N[d]()}}function b(a){R?a():N[N.length]=a}function c(a){if(typeof J.addEventListener!=C)J.addEventListener("load",a,!1);else if(typeof K.addEventListener!=C)K.addEventListener("load",a,!1);else if(typeof J.attachEvent!=C)r(J,"onload",a);else if("function"==typeof J.onload){var b=J.onload;J.onload=function(){b(),a()}}else J.onload=a}function d(){M?e():f()}function e(){var a=K.getElementsByTagName("body")[0],b=q(D);b.setAttribute("type",G);var c=a.appendChild(b);if(c){var d=0;!function(){if(typeof c.GetVariable!=C){var e=c.GetVariable("$version");e&&(e=e.split(" ")[1].split(","),U.pv=[parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10)])}else if(10>d)return d++,void setTimeout(arguments.callee,10);a.removeChild(b),c=null,f()}()}else f()}function f(){var a=O.length;if(a>0)for(var b=0;a>b;b++){var c=O[b].id,d=O[b].callbackFn,e={success:!1,id:c};if(U.pv[0]>0){var f=p(c);if(f)if(!s(O[b].swfVersion)||U.wk&&U.wk<312)if(O[b].expressInstall&&h()){var k={};k.data=O[b].expressInstall,k.width=f.getAttribute("width")||"0",k.height=f.getAttribute("height")||"0",f.getAttribute("class")&&(k.styleclass=f.getAttribute("class")),f.getAttribute("align")&&(k.align=f.getAttribute("align"));for(var l={},m=f.getElementsByTagName("param"),n=m.length,o=0;n>o;o++)"movie"!=m[o].getAttribute("name").toLowerCase()&&(l[m[o].getAttribute("name")]=m[o].getAttribute("value"));i(k,l,c,d)}else j(f),d&&d(e);else u(c,!0),d&&(e.success=!0,e.ref=g(c),d(e))}else if(u(c,!0),d){var q=g(c);q&&typeof q.SetVariable!=C&&(e.success=!0,e.ref=q),d(e)}}}function g(a){var b=null,c=p(a);if(c&&"OBJECT"==c.nodeName)if(typeof c.SetVariable!=C)b=c;else{var d=c.getElementsByTagName(D)[0];d&&(b=d)}return b}function h(){return!S&&s("6.0.65")&&(U.win||U.mac)&&!(U.wk&&U.wk<312)}function i(a,b,c,d){S=!0,y=d||null,z={success:!1,id:c};var e=p(c);if(e){"OBJECT"==e.nodeName?(w=k(e),x=null):(w=e,x=c),a.id=H,(typeof a.width==C||!/%$/.test(a.width)&&parseInt(a.width,10)<310)&&(a.width="310"),(typeof a.height==C||!/%$/.test(a.height)&&parseInt(a.height,10)<137)&&(a.height="137"),K.title=K.title.slice(0,47)+" - Flash Player Installation";var f=U.ie&&U.win?"ActiveX":"PlugIn",g="MMredirectURL="+J.location.toString().replace(/&/g,"%26")+"&MMplayerType="+f+"&MMdoctitle="+K.title;if(typeof b.flashvars!=C?b.flashvars+="&"+g:b.flashvars=g,U.ie&&U.win&&4!=e.readyState){var h=q("div");c+="SWFObjectNew",h.setAttribute("id",c),e.parentNode.insertBefore(h,e),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}l(a,b,c)}}function j(a){if(U.ie&&U.win&&4!=a.readyState){var b=q("div");a.parentNode.insertBefore(b,a),b.parentNode.replaceChild(k(a),b),a.style.display="none",function(){4==a.readyState?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)}()}else a.parentNode.replaceChild(k(a),a)}function k(a){var b=q("div");if(U.win&&U.ie)b.innerHTML=a.innerHTML;else{var c=a.getElementsByTagName(D)[0];if(c){var d=c.childNodes;if(d)for(var e=d.length,f=0;e>f;f++)1==d[f].nodeType&&"PARAM"==d[f].nodeName||8==d[f].nodeType||b.appendChild(d[f].cloneNode(!0))}}return b}function l(a,b,c){var d,e=p(c);if(U.wk&&U.wk<312)return d;if(e)if(typeof a.id==C&&(a.id=c),U.ie&&U.win){var f="";for(var g in a)a[g]!=Object.prototype[g]&&("data"==g.toLowerCase()?b.movie=a[g]:"styleclass"==g.toLowerCase()?f+=' class="'+a[g]+'"':"classid"!=g.toLowerCase()&&(f+=" "+g+'="'+a[g]+'"'));var h="";for(var i in b)b[i]!=Object.prototype[i]&&(h+='<param name="'+i+'" value="'+b[i]+'" />');e.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+f+">"+h+"</object>",P[P.length]=a.id,d=p(a.id)}else{var j=q(D);j.setAttribute("type",G);for(var k in a)a[k]!=Object.prototype[k]&&("styleclass"==k.toLowerCase()?j.setAttribute("class",a[k]):"classid"!=k.toLowerCase()&&j.setAttribute(k,a[k]));for(var l in b)b[l]!=Object.prototype[l]&&"movie"!=l.toLowerCase()&&m(j,l,b[l]);e.parentNode.replaceChild(j,e),d=j}return d}function m(a,b,c){var d=q("param");d.setAttribute("name",b),d.setAttribute("value",c),a.appendChild(d)}function n(a){var b=p(a);b&&"OBJECT"==b.nodeName&&(U.ie&&U.win?(b.style.display="none",function(){4==b.readyState?o(a):setTimeout(arguments.callee,10)}()):b.parentNode.removeChild(b))}function o(a){var b=p(a);if(b){for(var c in b)"function"==typeof b[c]&&(b[c]=null);b.parentNode.removeChild(b)}}function p(a){var b=null;try{b=K.getElementById(a)}catch(c){}return b}function q(a){return K.createElement(a)}function r(a,b,c){a.attachEvent(b,c),Q[Q.length]=[a,b,c]}function s(a){var b=U.pv,c=a.split(".");return c[0]=parseInt(c[0],10),c[1]=parseInt(c[1],10)||0,c[2]=parseInt(c[2],10)||0,b[0]>c[0]||b[0]==c[0]&&b[1]>c[1]||b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]?!0:!1}function t(a,b,c,d){if(!U.ie||!U.mac){var e=K.getElementsByTagName("head")[0];if(e){var f=c&&"string"==typeof c?c:"screen";if(d&&(A=null,B=null),!A||B!=f){var g=q("style");g.setAttribute("type","text/css"),g.setAttribute("media",f),A=e.appendChild(g),U.ie&&U.win&&typeof K.styleSheets!=C&&K.styleSheets.length>0&&(A=K.styleSheets[K.styleSheets.length-1]),B=f}U.ie&&U.win?A&&typeof A.addRule==D&&A.addRule(a,b):A&&typeof K.createTextNode!=C&&A.appendChild(K.createTextNode(a+" {"+b+"}"))}}}function u(a,b){if(T){var c=b?"visible":"hidden";R&&p(a)?p(a).style.visibility=c:t("#"+a,"visibility:"+c)}}function v(a){var b=/[\\\"<>\.;]/,c=null!=b.exec(a);return c&&typeof encodeURIComponent!=C?encodeURIComponent(a):a}var w,x,y,z,A,B,C="undefined",D="object",E="Shockwave Flash",F="ShockwaveFlash.ShockwaveFlash",G="application/x-shockwave-flash",H="SWFObjectExprInst",I="onreadystatechange",J=window,K=document,L=navigator,M=!1,N=[d],O=[],P=[],Q=[],R=!1,S=!1,T=!0,U=function(){var a=typeof K.getElementById!=C&&typeof K.getElementsByTagName!=C&&typeof K.createElement!=C,b=L.userAgent.toLowerCase(),c=L.platform.toLowerCase(),d=c?/win/.test(c):/win/.test(b),e=c?/mac/.test(c):/mac/.test(b),f=/webkit/.test(b)?parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,g=!1,h=[0,0,0],i=null;if(typeof L.plugins!=C&&typeof L.plugins[E]==D)i=L.plugins[E].description,!i||typeof L.mimeTypes!=C&&L.mimeTypes[G]&&!L.mimeTypes[G].enabledPlugin||(M=!0,g=!1,i=i.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),h[0]=parseInt(i.replace(/^(.*)\..*$/,"$1"),10),h[1]=parseInt(i.replace(/^.*\.(.*)\s.*$/,"$1"),10),h[2]=/[a-zA-Z]/.test(i)?parseInt(i.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof J.ActiveXObject!=C)try{var j=new ActiveXObject(F);j&&(i=j.GetVariable("$version"),i&&(g=!0,i=i.split(" ")[1].split(","),h=[parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10)]))}catch(k){}return{w3:a,pv:h,wk:f,ie:g,win:d,mac:e}}();(function(){U.w3&&((typeof K.readyState!=C&&"complete"==K.readyState||typeof K.readyState==C&&(K.getElementsByTagName("body")[0]||K.body))&&a(),R||(typeof K.addEventListener!=C&&K.addEventListener("DOMContentLoaded",a,!1),U.ie&&U.win&&(K.attachEvent(I,function(){"complete"==K.readyState&&(K.detachEvent(I,arguments.callee),a())}),J==top&&!function(){if(!R){try{K.documentElement.doScroll("left")}catch(b){return void setTimeout(arguments.callee,0)}a()}}()),U.wk&&!function(){return R?void 0:/loaded|complete/.test(K.readyState)?void a():void setTimeout(arguments.callee,0)}(),c(a)))})(),function(){U.ie&&U.win&&window.attachEvent("onunload",function(){for(var a=Q.length,b=0;a>b;b++)Q[b][0].detachEvent(Q[b][1],Q[b][2]);for(var c=P.length,d=0;c>d;d++)n(P[d]);for(var e in U)U[e]=null;U=null;for(var f in swfobject)swfobject[f]=null;swfobject=null})}();return{registerObject:function(a,b,c,d){if(U.w3&&a&&b){var e={};e.id=a,e.swfVersion=b,e.expressInstall=c,e.callbackFn=d,O[O.length]=e,u(a,!1)}else d&&d({success:!1,id:a})},getObjectById:function(a){return U.w3?g(a):void 0},embedSWF:function(a,c,d,e,f,g,j,k,m,n){var o={success:!1,id:c};U.w3&&!(U.wk&&U.wk<312)&&a&&c&&d&&e&&f?(u(c,!1),b(function(){d+="",e+="";var b={};if(m&&typeof m===D)for(var p in m)b[p]=m[p];b.data=a,b.width=d,b.height=e;var q={};if(k&&typeof k===D)for(var r in k)q[r]=k[r];if(j&&typeof j===D)for(var t in j)typeof q.flashvars!=C?q.flashvars+="&"+t+"="+j[t]:q.flashvars=t+"="+j[t];if(s(f)){var v=l(b,q,c);b.id==c&&u(c,!0),o.success=!0,o.ref=v}else{if(g&&h())return b.data=g,void i(b,q,c,n);u(c,!0)}n&&n(o)})):n&&n(o)},switchOffAutoHideShow:function(){T=!1},ua:U,getFlashPlayerVersion:function(){return{major:U.pv[0],minor:U.pv[1],release:U.pv[2]}},hasFlashPlayerVersion:s,createSWF:function(a,b,c){return U.w3?l(a,b,c):void 0},showExpressInstall:function(a,b,c,d){U.w3&&h()&&i(a,b,c,d)},removeSWF:function(a){U.w3&&n(a)},createCSS:function(a,b,c,d){U.w3&&t(a,b,c,d)},addDomLoadEvent:b,addLoadEvent:c,getQueryParamValue:function(a){var b=K.location.search||K.location.hash;if(b){if(/\?/.test(b)&&(b=b.split("?")[1]),null==a)return v(b);for(var c=b.split("&"),d=0;d<c.length;d++)if(c[d].substring(0,c[d].indexOf("="))==a)return v(c[d].substring(c[d].indexOf("=")+1))}return""},expressInstallCallback:function(){if(S){var a=p(H);a&&w&&(a.parentNode.replaceChild(w,a),x&&(u(x,!0),U.ie&&U.win&&(w.style.display="block")),y&&y(z)),S=!1}}}}();AND.FixIFrame=function(){var a=function(a){var b=a.getTarget("A");!b||window.location.pathname.indexOf("/embed/video")>=0||""==b.target&&top.location.replace(b.href)};Ext.getBody().on("click",a,this);for(var b=document.getElementsByTagName("form"),c=b.length;c>0;)--c,b[c].setAttribute("target","_top");setTimeout(function(){for(var a=window.location.search.substring(1).split("&"),b=0,c=a.length;c>b;b++){var d=a[b].split("=");if("dmproxy"==d[0]){var e="";if(-1!=window.location.search.indexOf("betaonly")?e="dmbeta":-1!=window.location.search.indexOf("headeronly")?e="dmheader":-1!=window.location.search.indexOf("footeronly")&&(e="dmfooter"),""!=e){var f=document.createElement("iframe");f.style.border="0px",f.style.width="0px",f.style.height="0px";var g=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight);f.src=d[1]+"?command=updateIFrame&id="+e+"&attribute=height&value="+g,document.body.appendChild(f)}}}},1e3)},AND.JSONscriptRequestManager=function(){var a=document.getElementsByTagName("head").item(0),b=null,c={},d=[],e=!1,f=function(){this.scope=this};f.prototype={scriptUrl:"",callback:null,useCache:!0,id:null,params:null,callbackParam:"callback"};var g=function(){if(d.length>0){e=!0;var c="jsonCallback"+(new Date).getTime();window[c]=h,c=d[0].callbackParam+"="+c,-1==d[0].scriptUrl.indexOf("?")?c="?"+c:"?"!=d[0].scriptUrl[d[0].scriptUrl.length-1]&&(c="&"+c),b=document.createElement("script"),b.setAttribute("type","text/javascript"),b.setAttribute("src",d[0].scriptUrl+c),a.appendChild(b)}},h=function(f){f?(d[0].useCache&&(c[d[0].id]=f),d[0].callback.call(d[0].scope,f,d[0].params)):d[0].callback.call(d[0].scope,c[d[0].id],d[0].params),d[0]=null,d.shift(),a.removeChild(b),e=!1,g()};return{getScript:function(a){if(!a.scriptUrl&&"string"!=typeof a.scriptUrl&&!a.callback&&"object"!=typeof a.callback)return!1;var b=AND.extendObject(new f,a);b.id=b.scriptUrl.replace(/[^a-z]/gi,""),b.useCache&&c[b.id]?h(null):(d.push(b),e||g())}}}(),DM.FormValidator=function(a,b){Ext.apply(this,b),this.init({id:a})},DM.FormValidator.prototype={form:null,rules:{mandatory:{"if":{value1:"value",method:"empty",value2:""},then:'error("Please provide a value for this field.")'},email:{"if":{value1:"value",method:"matches",value2:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i},"else":'error("Please provide a valid email address.")'}},types:{text:"blur focus",password:"blur",textarea:"blur focus keyup",radio:"click",checkbox:"click","select-one":"change",form:"submit reset mouseover mouseout"},init:function(a){if(this.form=Ext.get(a.id),this.form){var b=this;this.rules=Ext.apply(this.rules,this.custom_rules||{}),this.form.dom.rules=[];for(var c=Ext.query(".js-validate",this.form.dom),d=0,e=c.length;e>d;d++){var f=c[d],g=Ext.get(f);f.rules=[];for(var h=f.className.split("|"),i=0,j=h.length-1;j>i;i++)if(this.rules[h[i]]){var k=Ext.apply({field:c[d],"if":"",then:"","else":"",onstart:!1},this.rules[h[i]]);f.rules.push(k),this.form.dom.rules.push(k),k.onstart&&this.runRule(k)}if(g.hasClass("js-defaultvalue")&&f.title&&""!=f.title&&(f.defaultvalue=!0,""==f.value&&(f.value=f.title)),g.hasClass("js-countdown")){var l=Ext.get([this.form.id,f.name,"countdown"].join("-"));l&&NaN!=parseInt(l.dom.innerHTML)&&(f.counter=parseInt(l.dom.innerHTML))}g.hasClass("js-expand")&&f.rows&&(f.expand=!0),g.hasClass("js-submit")&&(f.submit=!0);for(var m=this.types[f.type].split(" "),i=0,j=m.length;j>i;i++)g.on(m[i],this.eHandler,b)}for(var m=this.types.form.split(" "),d=0,e=m.length;e>d;d++)b.form.on(m[d],this.eHandler,b)}},eHandler:function(a,b){var c=Ext.get(a.target),d=this;switch(a.type){case"mouseover":c.hasClass("js-tooltip")&&Ext.fly(c.dom.parentNode).addClass("tooltip-on");break;case"mouseout":c.hasClass("js-tooltip")&&Ext.fly(c.dom.parentNode).removeClass("tooltip-on");break;case"reset":setTimeout(function(){d.runRules(c.dom,!0)},10);break;case"submit":d.runRules(c.dom)?d.form.dom.submitextras&&d.form.dom.submitextras(d.form):a.stopEvent();break;case"focus":c.dom.defaultvalue&&c.dom.value==c.dom.title&&(c.dom.value=""),c.dom.expand&&(c.dom.rows=2*c.dom.rows,c.dom.expand=!1);case"keyup":if(c.dom.counter){var e=Ext.get([this.form.id,c.dom.name,"countdown"].join("-"));c.dom.counter<c.dom.value.length&&(c.dom.value=c.dom.value.substring(0,c.dom.counter)),e.dom.innerHTML=c.dom.counter-c.dom.value.length}break;case"change":c.dom.submit?this.form.dom.submit():c.dom.suspendrules||this.runRules(c.dom);break;case"blur":c.dom.defaultvalue&&""==c.dom.value&&(c.dom.value=c.dom.title);default:c.dom.suspendrules||this.runRules(c.dom)}"focus"!=a.type&&c.suspendrules&&(c.suspendrules=null)},runRules:function(a,b){for(var c=!0,d="FORM"===a.tagName?a:this.field(a),e=Ext.query(".errors",d),f=0,g=e.length;g>f;f++)e[f].innerHTML="",e[f].style.display="none";for(var h=Ext.query(".failed",d),f=0,g=h.length;g>f;f++)Ext.fly(h[f]).removeClass("failed");for(var i=a.rules,f=0,g=i.length;g>f;f++)(!b||b&&i[f].onstart)&&(c=this.runRule(i[f])&&c);return c},runRule:function(rule){var el=rule.field,err=Ext.query(".errors",this.field(el))[0],result,value1=this[rule["if"].value1](el),value2=rule["if"].value2;"number"==typeof value2&&Number(value1);var method=rule["if"].method;switch(method){case"matches":result=new RegExp(value2).test(value1);break;case"empty":result=""==value1||el.defaultvalue&&value1==el.title;break;default:eval("result =  value1"+method+"value2")}var error=function(a){if(!Ext.fly(el).hasClass("failed")){var b=document.createElement("span");b.innerHTML=a,err.appendChild(b),err.style.display="",Ext.fly(el).addClass("failed")}return!1},show=function(a){return Ext.fly(a).dom.style.display="",!0},hide=function(a){return Ext.fly(a).dom.style.display="none",!0};return result&&""!=rule.then?eval(rule.then):result||""==rule["else"]?!0:eval(rule["else"])},field:function(a){return Ext.get([this.form.id,a.name,"field"].join("-")).dom},value:function(a){if("checkbox"==a.type||"radio"==a.type){for(var b=[],c=this.field(a).getElementsByTagName("input"),d=0,e=c.length;e>d;d++)c[d].checked&&b.push(c[d].value);return b.join(",")}return a.value},length:function(a){return this.value(a).length}},DM.Headlines=Ext.extend(DM.Tabs,{tabOffClass:["ow-igr2-bx","link-ccogr2","js-unactive"],tabOnClass:["link-wocc","js-active"],constructor:function(a){DM.Headlines.superclass.constructor.call(this,a)},_onLoadCallBack:function(){var a=Ext.fly(this._panes[0]).getHeight(),b=Ext.get(this._panes[1]),c=Ext.isIE6||Ext.isIE7?0:10;b.query("li").length>1&&(c=0),b.setHeight(a-c)}}),DM.PictureSwap=Ext.extend(Ext.util.Observable,{constructor:function(a){if(this.el=Ext.get(a),this.el){this.el.on("mouseover",this._mouseOverHandler,this);var b=Ext.get(a+"-img");
this._img=b?b.dom:null,this.addEvents(["change"])}},_swap:function(a){this._img&&(this._img.src=a,this.fireEvent("change"))},_mouseOverHandler:function(a){var b,c=a.getTarget("a",3);c&&(b=AND.getParams(c)[0],b&&this._swap(b))}}),DM.Showcase=Ext.extend(Ext.util.Observable,{constructor:function(a){this.el=Ext.get(a),this._showables=this.el.select(".mainImages li"),this.el.on("click",this._clickHandler,this),this._prodElX=Ext.fly(this.el.query(".products")[0]).getX(),this._prodElY=Ext.fly(this.el.query(".products")[0]).getY(),this.addEvents(["startAnim","endAnim"])},_resetShowable:function(a){a.setStyle("visibility","hidden"),a.select(".js-product-container").setStyle("opacity",0)},_showShowable:function(a,b){var c,d=a.getStyle("height");c="0px"===d||"auto"===d?a.dom.offsetHeight-6:d.substring(0,d.length-2),a.setStyle({top:b.top-this._prodElY-11+"px",left:b.left+"px",width:"0px",height:"0px",visibility:"visible"}),this.fireEvent("startAnim");var e=this.fireEvent.createDelegate(this,["endAnim"]);a.animate({width:{to:251},height:{to:c}},.3,function(){a.select(".js-product-container").item(0).animate({opacity:{to:1}},.3,function(){e()})})},_clickHandler:function(a){var b=trg=Ext.get(a.getTarget());!trg.hasClass("buy-link")&&!trg.hasClass("promo")&&a.preventDefault();var c,d=trg.parent("li"),e=AND.getParams(d.dom)[1];c=e%2===0?148:10,trg.is("a")&&trg.hasClass("revealProductMain")||(b=trg.parent("a.revealProductMain"))?(this._showables.each(function(a){this._resetShowable(a)},this),this._showShowable(Ext.get(AND.getHrefParams(b.dom)),{top:b.getY()+10,left:c})):trg.is("img.close")&&this._resetShowable(trg.parent("li"))}}),DM.MirrorMirror=Ext.extend(Ext.util.Observable,{_blockAction:!1,constructor:function(a,b){this.el=Ext.get(a),this._galleryId=b.galleryId,this._showables=this.el.select(".js-mm-overlay"),this.el.on("click",this._clickHandler,this,{preventDefault:!0}),this.addEvents(["startAnim","endAnim"]),this.on("endAnim",this._showShowable)},_getTwin:function(a){var b=a.dom.id,c=b.match(/[0-9]{1,2}$/gi)[0];return c%2?++c:--c,Ext.get("MM_overlay_thumb_overlay_"+this._galleryId+"_"+c)},_resetShowable:function(a,b){a.setStyle("visibility","hidden"),a.select("div").setStyle("opacity",0),b&&arguments.callee(this._getTwin(a))},_showShowable:function(a,b){var c=a.getHeight()-26;a.setStyle({width:"0px",height:"0px",visibility:"visible"}),this.fireEvent("startAnim");var d=b?this.fireEvent.createDelegate(this,["endAnim",this._getTwin(a)]):!1,e=function(){this._blockAction=!1}.createDelegate(this);a.animate({width:{to:180},height:{to:c}},.3,function(){a.select("div").animate({opacity:{to:1,from:0}},.3,function(){d&&d()||e()})})},_clickHandler:function(a){var b=trg=Ext.get(a.getTarget());trg.is("a")&&trg.hasClass("js-mm-image-link")||(b=trg.parent("a.js-mm-image-link"))?this._blockAction||(this._blockAction=!0,this._showables.each(function(a){this._resetShowable(a)},this),this._showShowable(b.next(),!0)):trg.is("img.closebutton")&&this._resetShowable(trg.parent("div.js-mm-overlay"),!0)}}),DM.Poll=Ext.extend(Ext.util.Observable,{_classes:{pollDiv:"js-poll",pollQuestion:"js-poll-question",pollResults:"js-poll-results",pollResultsData:"js-poll-content",voteButton:"js-vote-button",radio:"js-radio",selectedRadio:"selected",closeButton:"js-close",showYesterdays:"js-show-yesterdays",showAll:"js-show-all",pollWide:"poll-wide"},constructor:function(a,b){this.el=Ext.get(a),this.el&&(this.el.on("click",this._clickHandler,this),this._spanRadios=this.el.select("."+this._classes.radio),this._checkedRadio=null,this._pollId=b.pollId,this._questionId=b.questionId,this._channelId=b.channelId,this._pollResults=this.el.select("."+this._classes.pollResults).item(0),this._pollQuestion=this.el.select("."+this._classes.pollQuestion).item(0),this._pollResultsData=this._pollResults.select("."+this._classes.pollResultsData).item(0),this._showAll=this.el.select("."+this._classes.showAll).item(0),this._showYesterdays=this.el.select("."+this._classes.showYesterdays).item(0),this.addEvents(["onVote"]))},_toggleRelatedRadio:function(a,b){var c=a.next().dom;b?(c.checked="checked",this._checkedRadio=c):c.checked=""},_resultsTemplate:function(){return new Ext.Template('<li class="cleared">','<span class="results-text">{answer}</span>','<span class="results-bar" style="width: {barLength}px;"></span>','<span class="results-score">{percentage}%</span>',"</li>").compile()}(),_endTemplate:new Ext.Template("</ul><span>{message}</span></div>").compile(),_callBack:function(a,b){var c;if(c=this.el.hasClass("poll-wide")?new Ext.Template('<div class="poll-results-graph box cleared">','<a class="js-close close" href="#">','<span class="close-btn">&nbsp;</span>Close',"</a><p>POLL RESULTS</p><ul>").compile():new Ext.Template("<p>{question}</p><ul>").compile(),a){for(var d=c.applyTemplate({question:a.poll.pollQuestions[0].question}),e=0;e<a.poll.pollQuestions[0].answers.length;e++)d+=this._resultsTemplate.applyTemplate({answer:a.poll.pollQuestions[0].answers[e].answer,barLength:a.poll.pollQuestions[0].answers[e].barLength,percentage:a.poll.pollQuestions[0].answers[e].percentage});var f={};a.pollAnswered||b?a.pollAnswered?f.message="Oops! You have already voted on this topic":f.message="":f.message="Thank you for voting",d+=this._endTemplate.applyTemplate({message:f.message}),this._pollResultsData.dom.innerHTML=d,this._pollQuestion.addClass("hidden"),this._pollResults.removeClass("hidden"),this._switchFootLink(b)}this.fireEvent("onVote")},_vote:function(){this._checkedRadio&&AjaxPoll.vote(this._pollId,this._checkedRadio.value,this._questionId,this._callBack.createDelegate(this,[!1],!0))},_close:function(){this._pollQuestion.removeClass("hidden"),this._pollResults.addClass("hidden"),this._switchFootLink(!0)},_switchFootLink:function(a){this._showAll&&(a?(this._showAll.removeClass("hidden"),this._showYesterdays.addClass("hidden")):(this._showAll.addClass("hidden"),this._showYesterdays.removeClass("hidden")))},_toggleTicked:function(a){this._spanRadios.each(function(b){b!==a&&(b.removeClass(this._classes.selectedRadio),this._toggleRelatedRadio(b,!1))},this),a.addClass(this._classes.selectedRadio),this._toggleRelatedRadio(a,!0)},_clickHandler:function(a,b){var c=Ext.get(a.getTarget());!c.hasClass(this._classes.showAll)&&a.preventDefault(),c.hasClass(this._classes.radio)?this._toggleTicked(c):c.hasClass(this._classes.voteButton)||c.parent("button")?this._spanRadios.elements.length>0?this._vote():window.location.href="/columnists/polls/poll.html?pollId="+this._pollId:c.hasClass(this._classes.closeButton)||c.parent("."+this._classes.closeButton)?this._close():c.hasClass(this._classes.showYesterdays)&&AjaxPoll.getYesterdaysPoll(this._channelId,this._pollId,this._callBack.createDelegate(this,[!0],!0))}});var Polls=function(){function a(a,b){return b>0?Math.round(a/b*100):0}function b(a,b,c){var d=Math.round(.65*$(".poll-"+a+".poll-results").innerWidth());return c>0?Math.round(b/c*d):0}function c(a,b){var c=b?0:1;return a.filter(function(a){c+=parseInt($(this).find("input[name*='votes']").val())}),c}function d(a){var b=a.toString().split(".");return b[0]=b[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),b.join(".")}function e(a,b,c){var d=0;return a.filter(function(a){var e=parseInt($(this).find("input[name*='votes']").val());e=c||parseInt($(this).find("input[name*='answer']").val())!=b?e:e+1,d=e>d?e:d}),d}function f(a){var b=new RegExp("(?:^|;)\\s?"+a+"=(.*?)(?:;|$)","i"),c=document.cookie.match(b);return c&&unescape(c[1])}function g(a){var b=f("poll");if(b)for(var c=b.split("_"),d=0;d<c.length;d++)if(-1!=c[d].indexOf(a))return c[d].split("-")[1]}function h(a,b){var c=f("poll");c?g(a)||(document.cookie="poll="+c+"_"+a+"-"+b+"; path=/"):document.cookie="poll="+a+"-"+b+"; path=/"}function i(a,b,c){var d=$("#poll-"+a.params.pollId).find("div.poll-answer"),e=$("."+a.id).find(".poll-results .poll-answers li"),f="sponsored-poll"==a.params.pollStyle?"sponsored-poll":"post_poll";k(a.params.pollId,b,d,e,c),$("#poll-"+a.params.pollId).css("display","none"),$("."+a.id).find("div.poll-results").css("display","block"),DMS.PollShare.renderPollsGoogleInteractive("gSharePoll-"+a.params.pollId,a.params.gplusClientId,a.params.pollId,"POLL: "+a.params.question+DMS.PollShare.getShareDescription(a.id,a.params.pollId),f)}function j(a,b,c){var d=(c.id,c.params.pollId),e=c.params.questionId;c.params.channelId;$("#poll-"+d+" #"+b.prop("for")).attr("checked",!0);var f=$("#poll-"+d).find("input:radio[name='answer']:checked").val();if(f){var g={"question-id":e,"poll-id":d,"answer-id":f};$.ajax({type:"POST",url:"/polls/answer",data:JSON.stringify(g),contentType:"application/json",success:function(a){h(c.params.pollId,f),i(c,f,!1),c.params.isMobile&&o(c.params.pollId,f,!1)}})}}function k(f,g,h,i,j){var k=e(h,g,j),l=c(h,j),m=[];h.filter(function(c){var d={},e=parseInt($(this).find("input[name*='votes']").val()),h=parseInt($(this).find("input[name*='answer']").val());h!=g||j?d.votes=e:d.votes=e+1,d.percentage=a(d.votes,l)+"%",d.barLength=b(f,d.votes,k),m.push(d)}),i.filter(function(a){$(this).find("span.results-score span:first-of-type").html(m[a].percentage),$(this).find("span.vote-results-bar").css("width",m[a].barLength+"px"),1==m[a].votes?$(this).find("span.results-votes").html(Math.floor(m[a].votes)+" vote"):$(this).find("span.results-votes").html(d(Math.floor(m[a].votes))+" votes")})}function l(a){a.params.isMobile&&m(a),$("#poll-"+a.params.pollId+" .answer-label").on("click",function(b){j(b,$(this),a)}),setTimeout(function(){n(a)},100)}function m(a){$(".poll .poll-mini-"+a.params.pollId+" li.question").width($(".poll ul").width()-135+"px"),$(".poll .poll-mini-"+a.params.pollId).on("click",function(b){var c,d,e,f,g,h;$("#mobile-poll-"+a.params.pollId).addClass("show"),$("#poll-content").html($("#mobile-poll-"+a.params.pollId).html()),$("#poll-content").addClass("active"),$("#mobile-poll-"+a.params.pollId).empty(),$("#poll-"+a.params.pollId+" .answer-label").on("click",function(b){j(b,$(this),a)}),DMS.PollShare.init(a.id,a.params.mobilePollShare),$("#poll-content .poll-single .close").on("click",function(b){$("#mobile-poll-"+a.params.pollId).html($("#poll-content").html()),$("#mobile-poll-"+a.params.pollId).removeClass("show"),$("#poll-content").empty(),$("#poll-content").removeClass("active"),$("#poll-"+a.params.pollId+" .answer-label, #poll-content .poll-single .close").unbind("click"),$("#poll-content .facebook, #poll-content .twitter").unbind("click")}),document.getElementById("sponsored-poll-mobile")&&(c=$("#sponsored-poll-mobile video").clone(),$("#sponsored-poll-mobile").remove(),d=document.createElement("div"),d.className="vjs-video-container vjs-responsive news",e=document.createElement("video"),e.className="video-js vjs-default-skin",e.setAttribute("id",c.attr("id")),e.setAttribute("controls",""),e.setAttribute("width","640"),e.setAttribute("height","264"),e.setAttribute("preload","none"),e.setAttribute("data-opts",JSON.stringify(c.data("opts"))),f=document.createElement("source"),$(f).attr("type",c.children().attr("type")),$(f).attr("src",c.data("opts").src),g=document.createElement("div"),h=document.createElement("p"),g.className="video-fake-title",h.innerText=c.data("opts").title,setTimeout(function(){$(d).append(e),$(e).append(f),$(g).append(h),$("#poll-content .poll-single .poll-sponsored-mobile").append(g),$("#poll-content .poll-single .poll-sponsored-mobile").append(d),DM.setupMolVideoJsPlayers(e)},1))})}function n(a){var b=g(a.params.pollId);b&&($("#poll-"+a.params.pollId+" #answer-"+a.params.pollId+"-"+b).attr("checked",!0),i(a,b,!0),o(a.params.pollId,b,!0))}function o(b,d,e){if($(".poll").length>0&&0==$(".poll-mini-"+b+" ul li .poll-question .answer").length){var f=$('label[for="answer-'+b+"-"+d+'"]'),g=$("#poll-"+b).find("div.poll-answer"),h=c(g,e),i=$("input#answer-"+b+"-"+d+"-votes").val(),j=a(e?parseInt(i):parseInt(i)+1,h);$("ul.poll-mini-"+b+" li .poll-question").append('<br/><span class="answer">You said <b>'+f.text()+'</b>. <span class="ccox"><b>'+j+"%</b></span> of others agreed with you.</span>"),$("ul.poll-mini-"+b).css("height",$("ul.poll-mini-"+b+" li.question").height()+"px")}}return{init:function(a){l(a)}}}();DM=window.DM||{},DM.Polls=Polls,DM.ExpansionArticlePage=Ext.extend(Ext.util.Observable,{constructor:function(a){var b,c=Ext.get(a);c&&(this._panels=c.select(".js-headers"),b=this._panels.item(0),b&&(c.on("click",this._clickHandler,this),this._current=null,this._expand(b)))},_clickHandler:function(a,b){var c=Ext.get(a.getTarget("a.js-more-link",2));if(c){a.preventDefault();var d=c.parent(".js-headers");this._current===c||null===this._current&&Ext.fly(b).hasClass("js-firstLink")?d.hasClass("collapsed")?this._collapse(d):this._expand(d):(this._current=c,this._resetAll(),this._expand(d));var d=c.parent("div.js-headers");d.hasClass("collapsed")?this._expand(d):this._collapse(d)}},_expand:function(a){a.addClass("collapsed")},_collapse:function(a){a.removeClass("collapsed")},_resetAll:function(){this._panels.each(function(a){this._collapse(a)},this)}}),DM.ExpansionMyStoriesPage=Ext.extend(Ext.util.Observable,{constructor:function(a){this.el=Ext.get(a).on("click",this._clickHandler,this)},_clickHandler:function(a,b){var c=Ext.get(a.getTarget(".columnist-archive-heading",3))||Ext.get(a.getTarget("a.js-more-link",3));if(c){a.preventDefault();var d=c.hasClass("js-columnist-archive-group")?c:c.parent(".js-my-stories-group")||c.parent(".js-columnist-archive-group");d.hasClass("collapsed")?this._expand(d):this._collapse(d)}},_collapse:function(a){a.addClass("collapsed")},_expand:function(a){a.removeClass("collapsed")}}),function(a){var b=!1;a(document).one("bottom-page ready",function(){b||(b=!0,a("img.blkBorder").parent().not(".image-wrap").find("img.blkBorder").wrap('<div class="image-wrap">'))})}(jQuery),DM.Carousel=Ext.extend(Ext.util.Observable,{_cssProp:"left",step:138,speed:.7,ulCls:".js-itemList",direction:"horizontal",imagesRequested:!1,constructor:function(a,b){if(this.el=Ext.get(a),this.el){b&&Ext.apply(this,b),"vertical"===this.direction&&(this._cssProp="top"),this._slider=Ext.get(this.el.query(this.ulCls)[0]);var c=this.el.query(".js-move-next")[0];c&&(Ext.fly(c).on("click",this._move,this,{preventDefault:!0}),Ext.fly(this.el.query(".js-move-prev")[0]).on("click",this._move,this,{preventDefault:!0}),this._slider.on("click",this._clickHandler,this),this._slider.on("mouseover",this._mouseOverHandler,this),this.addEvents(["changeBegin","changeEnd"]))}},_mouseOverHandler:function(a,b){},_clickHandler:function(a,b){},_animInstance:null,_isRunning:!1,_onEndAnim:function(a){this._slider.setStyle(this._cssProp,"0"),this._isRunning=!1,this._shift(a)},_move:function(a){this._isRunning&&this._animInstance.stop(),this._isRunning=!0,a.getTarget(".js-move-prev")?this.anim("+"):this.anim("-")},anim:function(a){var b={};b[this._cssProp]={to:a+this.step},this._animInstance=this._slider.anim(b,{duration:this.speed,callback:this._onEndAnim.createDelegate(this,[a]),scope:this}),this.fireEvent("changeBegin",{direction:a})},_shift:function(a){if("+"===a){var b=this._slider.last(),c=b.prev().prev().dom.cloneNode(!0);this._slider.insertFirst(c),b.remove(),this.fireEvent("changeEnd",{cloned:c})}else{var d=this._slider.first(),e=Ext.get(d.next().next().dom.cloneNode(!0));e.insertAfter(this._slider.last()),d.remove(),this.fireEvent("changeEnd",{cloned:e.dom})}},_requestImages:function(){DM.LazyLoad&&!this.imagesRequested&&(this.panels.select("[data-src]").each(function(a){DM.LazyLoad(a.dom)}),this.imagesRequested=!0)}}),DM.RolloverCarousel=Ext.extend(DM.Carousel,{step:176,_getPanel:function(a){return a.getElementsByTagName("SPAN")[0]},constructor:function(a){var b=this;DM.RolloverCarousel.superclass.constructor.call(this,a);for(var c,d=this.el.query("li"),e=d.length;e>0;)--e,c=d[e],Ext.fly(c).addListener("mouseover",function(a){return function(c,d){Ext.fly(b._getPanel(a)).animate({top:{to:0}},.45)}}(c)),Ext.fly(c).addListener("mouseout",function(a){return function(c,d){Ext.fly(b._getPanel(a)).animate({top:{to:110}},.45)}}(c));this.on("changeEnd",function(a){var b=a.cloned,c=b.getElementsByTagName("SPAN")[0];Ext.fly(b).addListener("mouseover",function(a,b){Ext.fly(c).animate({top:{to:0}},.45)}),Ext.fly(b).addListener("mouseout",function(a,b){Ext.fly(c).animate({top:{to:110}},.45)})})}}),DM.ImageSwapCarousel=Ext.extend(DM.Carousel,{speed:1.3,step:90,constructor:function(a){DM.ImageSwapCarousel.superclass.constructor.call(this,a),this._bigLink=this.el.query(".js-link")[0],this._bigImg=this.el.query(".js-placeholder")[0],this._caption=this.el.query(".js-caption")[0],this._buyLink=this.el.query(".js-buy-link")[0],this.on("changeBegin",function(a){var b;b="-"===a.direction?this._slider.select("li").item(2).query("a")[0]:this._slider.first().query("a")[0],this._changeBigPic(b)})},_mouseOverHandler:function(a,b){var c=a.getTarget("a",2);c&&this._changeBigPic(c)},_changeBigPic:function(a){if(this._bigImg){var b=a.href,c=a.rel.split("|")[0];this._bigLink.href=b,this._bigImg.src=c;var d=a.getElementsByTagName("IMG")[0].alt;this._caption.innerHTML=d;var e=Ext.get(a).next(".js-buy-link");this._buyLink&&(this._buyLink.href=null===e?"#":e.dom.href),Ext.get(this._bigLink).on("click",this._clickHandler,this)}}}),DM.PopUpCarousel=Ext.extend(DM.Carousel,{step:149,_popUpDisplayed:!1,constructor:function(a){DM.PopUpCarousel.superclass.constructor.call(this,a),this._popUpWin=this.el.select(".popup-window").item(0),this._popUp=this.el.select(".popup-container").item(0),this._popUpWin.on("click",this._clickHandlerPopUp,this),this.on("changeBegin",function(a){if(this._popUpDisplayed){var b=a.direction;"+"===b?this._popUpDisplayed=Ext.fly(this._popUpDisplayed).prev().dom:this._popUpDisplayed=Ext.fly(this._popUpDisplayed).next().dom,this._popUp.setStyle("opacity",0),this._popUp.setStyle("height","auto"),this._populatePopUp(this._popUpDisplayed.id),this._fadeIn()}})},_resetPopUp:function(){this._popUp.setStyle("opacity",0),this._popUp.setStyle("width",0),this._popUp.setStyle("height","auto")},_clickHandler:function(a,b){a.preventDefault();var c=a.getTarget("li");if(c){this._popUpDisplayed=c,this._populatePopUp(c.id),this._resetPopUp();var d=this._popUp.getHeight();this._popUp.setStyle("height",0),this._popUpWin.setStyle("visibility","visible"),this._popUp.anim({width:{to:202},height:{to:d}},{duration:.4,callback:this._fadeIn,scope:this})}},_populatePopUp:function(a){this._popUp.dom.innerHTML=Ext.fly(a+"_container").dom.innerHTML;var b=this._popUp.dom.getElementsByTagName("img")[0];b.src=b.className.split("|")[0]},_fadeIn:function(){this._popUp.animate({opacity:{from:0,to:1}},.3)},_clickHandlerPopUp:function(a,b){var c=a.getTarget(".x-closebutton");c&&(this._popUpWin.setStyle("visibility","hidden"),this._popUpDisplayed=!1)}}),DM.LightBoxCarousel=Ext.extend(DM.ImageSwapCarousel,{speed:.8,step:104,constructor:function(a){DM.LightBoxCarousel.superclass.constructor.call(this,a),this._numCols=this.el.query("li.js-column").length,this._inPolePosition=2,this._nextButt=Ext.get(this.el.query(".js-move-next")[0]),this._prevButt=Ext.get(this.el.query(".js-move-prev")[0]),this._nextButt.setStyle("visibility","hidden"),this._prevButt.setStyle("visibility","hidden"),3===this._numCols&&(this._inPolePosition=1,this._slider.setStyle("left","104px")),this._handleController(),this._universe=this.el.parent(".lightbox-gallery"),this._overlay=null},_handleController:function(){return 3===this._numCols?(this._prevButt.setStyle("visibility","hidden"),void this._nextButt.setStyle("visibility","hidden")):void(1===this._inPolePosition?(this._prevButt.setStyle("visibility","hidden"),this._nextButt.setStyle("visibility","visible")):this._inPolePosition===this._numCols-2?(this._nextButt.setStyle("visibility","hidden"),this._prevButt.setStyle("visibility","visible")):(this._prevButt.setStyle("visibility","visible"),this._nextButt.setStyle("visibility","visible")))},_increment:function(a){return(a-2)*-this.step},_onEndAnim:function(a){},_getColFirstItem:function(){},anim:function(a){if((this._inPolePosition>1||"-"===a)&&(this._inPolePosition<this._numCols-2||"+"===a)){"+"===a?this._inPolePosition--:this._inPolePosition++,this._handleController();var b={};b[this._cssProp]={to:this._increment(this._inPolePosition)},this._animInstance=this._slider.anim(b,{duration:this.speed,callback:this._onEndAnim.createDelegate(this,[a]),scope:this})}this.fireEvent("changeBegin",{direction:a})}}),DM.LightBoxCarouselMain=Ext.extend(DM.LightBoxCarousel,{constructor:function(a){DM.LightBoxCarouselMain.superclass.constructor.call(this,a),this._changeBigPic(this.el.query("li.js-column a")[0]),this.on("changeBegin",function(a){var b=this._slider.query("li.js-column")[this._inPolePosition-1],c=Ext.fly(b).query("li")[0],d=Ext.fly(c).query("a")[0];this._changeBigPic(d)}),this.addEvents(["itemClick"])},_clickHandler:function(a,b){a.stopEvent();var c=a.getTarget("a",2),d=Ext.get(c).next(".js-buy-link");!this._docHeight&&(this._docHeight=Ext.fly(document.getElementsByTagName("BODY")[0]).getHeight()+"px"),null===this._overlay&&(this._overlay=Ext.get("overlay")),this._overlay.setStyle({display:"block",height:this._docHeight}),this.fireEvent("itemClick",{href:c.href,alt:b.alt,pos:this._inPolePosition,buyHref:null===d?"#":d.dom.href})}}),DM.LightBoxCarouselSub=Ext.extend(DM.LightBoxCarousel,{constructor:function(a){this._target=Ext.get("lightbox-target");var b=Ext.fly(a).parent("div.js-movable");b.appendTo(this._target),DM.LightBoxCarouselSub.superclass.constructor.call(this,a),this._gallery=this._universe.select(".wrap_"+a).item(0),this._bigPicHolder=this._gallery.select(".main-image-holder").item(0),this._bigPic=this._gallery.select(".main-overlayimage").item(0),this._picDescContainer=this._gallery.select(".messages").item(0),this._picDesc=this._gallery.select(".mainText").item(0),this._closeButt=this._gallery.select(".x-closebutton").item(0),this._closeButt.on("click",this._closeHandler,this),this._buyLink=this._gallery.query(".buy-link")[0]},showUp:function(a,b,c,d){var e=function(){var a=Ext.get("top").getWidth(),b=Ext.getBody().getWidth(),c=(b-a)/2+a;return c}();this._target.setStyle({display:"block",top:AND.getScrollXY()[1]+68+"px",left:e+"px"});var f=this._gallery.query(".more-link")[0];f.style.display="none",this._gallery.setStyle("display","block"),this._animBigPic(a,b,d),this._inPolePosition=c,this._slider.setStyle("left",this._increment(c)+"px"),this._handleController()},_clickHandler:function(a,b){a.stopEvent();var c=Ext.get(a.getTarget("a",2)),d=Ext.get(c).next(".js-buy-link");c&&this._animBigPic(c.dom.href,b.alt,null===d?"#":d.dom.href)},_mouseOverHandler:function(a,b){},_closeHandler:function(a,b){a.stopEvent(),null===this._overlay&&(this._overlay=Ext.get("overlay")),this._overlay.setStyle({display:"none",height:"0px"}),this._gallery.setStyle({display:"none"}),this._resetStage()},_getDimensions:function(a){var b=new RegExp("([0-9]+)x([0-9]+).(jpg|png)","gi").exec(a);return[b[1],b[2]]},_resetStage:function(){this._bigPic.setStyle({width:"0px",height:"0px"}),this._bigPicHolder.dom.style.opacity="0",this._picDescContainer.setStyle("width","0px"),this._picDesc.dom.innerHTML=""},_animBigPic:function(a,b,c){this._dilate&&this._dilate.stop();var d=this._getDimensions(a);this._fadeIn&&this._fadeIn.stop(),this._resetStage(),this._bigPic.dom.src=a,""===c||-1!==c.indexOf("#")?(this._buyLink.href="",this._buyLink.style.display="none"):(this._buyLink.href=c,this._buyLink.style.display="block"),this._dilate=this._bigPic.anim({width:{to:d[0]},height:{to:d[1]}},{duration:.6,callback:function(){this._picDescContainer.setStyle("width",d[0]+"px"),this._picDesc.dom.innerHTML=b,this._fadeIn=this._bigPicHolder.anim({opacity:{to:1}},{duration:.4})},scope:this})}}),DM.LightBoxCarouselWrapper=Ext.extend(Ext.util.Observable,{constructor:function(a,b){this.mainC=new DM.LightBoxCarouselMain(a),this.subC=new DM.LightBoxCarouselSub(b.idSubCarousel),this.mainC.on("itemClick",function(a){this.subC.showUp(a.href,a.alt,a.pos,a.buyHref)}.createDelegate(this)),this.subC.on("changeBegin",function(a){this.mainC.anim(a.direction)}.createDelegate(this))}}),DM.FootballFeeds=Ext.extend(DM.Tabs,{tabsQuery:".ff-tab",panesQuery:".ff-tab-content",tabOffClass:["wocc","link-wox","js-unactive"],tabOnClass:["link-ccox","selected","js-active"],paneOffClass:"hiddenPane",constructor:function(a){DM.FootballFeeds.superclass.constructor.call(this,a),this._nameMap=[],this._selectedTabId="t-football_1",this._currentPageIndex=0,this._currentCompId="4",this._currentTeamId=null,this._currentMonthId=null,this._hoverTrCl="ff-row-hover",PL=null,SPL=null,this._comboComp=Ext.get("competitionId"),this._comboComp.on("change",this._comboCompChangeHandler,this),this._comboTeam=Ext.get("teamId"),this._comboTeam.on("change",this._comboTeamChangeHandler,this),this._comboMonth=Ext.get("month"),this._comboMonth.on("change",this._comboMonthChangeHandler,this),this._btnGo=Ext.get("ff-submit"),this._btnGo.on("click",this._btnGoClickHandler,this),this._pagination=Ext.get("ff-pagination"),this._pagination.on("click",this._paginatorClickHandler,this),this._setCompSelectedIndex(0),this._setTeamSelectedIndex(0),this._setMonthSelectedIndex(0),Ext.fly("tabsContainer").on("mouseover",this._tableMOverHandler,this),Ext.fly("tabsContainer").on("mouseout",this._tableMOutHandler,this),this._table_1=Ext.get("football_1_table"),this._table_1.on("click",this._teamsTabClickHandler,this),this._table_2=Ext.get("football_2_table"),this._table_3=Ext.get("football_3_table"),this._loaderEl=Ext.get("ff-loader"),this._errorMsgEl=Ext.get("ff-error-msg"),this._instructionEl=Ext.get("ff-instruction"),this.on("change",this._onChangeTabCallBack,this)},_tamplates:{table:"<table style='width: 290px'><thead><tr><th colspan='2' style='width: 100px'>Teams</th><th class='align-r numeric'>P</th><th class='align-r numeric'>GD</th><th class='align-r numeric'>PTS</th></tr></thead><tbody>",fixtures:"<table style='width: 290px'><thead><tr><th class='align-c' style='width: 115px'>HOME</th><th class='align-c numeric'>&nbsp;</th><th class='align-c' style='width: 115px'>AWAY</th><th class='align-c numeric'>TIME</th></tr></thead><tbody id='football_2_table_body'>",results:"<table style='width: 290px'><thead><tr><th class='align-c' style='width: 110px'>HOME</th><th class='align-c numeric'>&nbsp;</th><th class='align-c' style='width: 110px'>AWAY</th></tr></thead><tbody id='football_3_table_body'>"},_showError:function(a){a?(this._errorMsgEl.dom.innerHTML="No Fixtures Found",this._errorMsgEl.setStyle("display","block")):(this._errorMsgEl.dom.innerHTML="",this._errorMsgEl.setStyle("display","none"))},_generatePaginator:function(a){var b=20,c=4,d=function(a,b){a||(a=[]),b||(b=function(a){return a});for(var c=a.length,d=new Array(c),e=0;c>e;e++)d[e]=b(a[e],e);return d},e={page:Math.round(a.index/b),pages:Math.ceil(a.total/b)};e.index=a.index,e.total=a.total;var f=[e.pages,' pages: page <strong class="ff-pg-current">',e.page,"</strong> "],g=e.page+c<e.pages?c:e.pages-e.page;return g>-1||(g=0),f.push(d(new Array(g),function(a,c){var d=e.page+c+1;return d>e.pages?"":[0==c?"| ":"",'<span class="ff-pg-page" data-index="',(d-1)*b,'">',d,"</span>"].join("")}).join(" | ")),f.unshift("["),f.push("]"),e.page>1&&(f=['<span class="ff-pg-left"><span class="ff-pg-first" data-index="0">&laquo;</span> '].concat(['<span class="ff-pg-prev" data-index="',(e.page-2)*b,'">&lt;</span></span> ']).concat(f)),e.page<e.pages&&(f=f.concat([' <span class="ff-pg-right"><span class="ff-pg-next" data-index="',e.page*b,'">&gt;</span>']).concat(['<span class="ff-pg-last" data-index="',(e.pages-1)*b,'">&raquo;</span></span>'])),f.join("")},_formatDate:function(){return dateMap={day:{0:"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday"},month:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}},function(a,b,c){var a=new Date(Date.parse([a," ",dateMap.month[b],", ",c," 12:00:00 GMT"].join("")));return dateMap.day[a.getUTCDay()]+", "+a.getUTCDate()+" "+dateMap.month[a.getUTCMonth()+1]+" "+a.getUTCFullYear()}}(),_comboCompChangeHandler:function(a){this._currentPageIndex=0,"t-football_1"===this._selectedTabId&&this._getTables(),this._getTeamList()},_comboTeamChangeHandler:function(a){this._currentTeamId=this._getTeamSelected().value},_paginatorClickHandler:function(a){var b=a.getTarget("span");if(b){var c=b.getAttribute("data-index");c&&(this._currentPageIndex=parseInt(c),"t-football_2"===this._selectedTabId?this._getFixtures():"t-football_3"===this._selectedTabId&&this._getResults())}},_teamsTabClickHandler:function(a){a.preventDefault();var b=a.getTarget("tr");if(b){var c=Ext.fly(b).query("a")[0];if("generated"===c.className){var d=parseInt(c.id.substring(3)),e=null;PL&&PL[d]?e=PL[d]:SPL&&SPL[d]&&(e=SPL[d]),e&&(window.location.href="/sport/teampages/"+e+".html")}else window.location.href=c.href}},_tableMOverHandler:function(a){var b=a.getTarget("tr");b&&Ext.fly(b).addClass(this._hoverTrCl)},_tableMOutHandler:function(a){var b=a.getTarget("tr");b&&Ext.fly(b).removeClass(this._hoverTrCl)},_btnGoClickHandler:function(a){a.preventDefault(),"t-football_2"===this._selectedTabId?this._getFixtures():"t-football_3"===this._selectedTabId&&this._getResults()},_comboMonthChangeHandler:function(a){this._currentMonthId=this._getMonthSelected().value},_onChangeTabCallBack:function(a){this._selectedTabId=a.dom.id,this._currentPageIndex=0,this._loaderEl.setStyle("display","block"),"t-football_1"!==a.dom.id?(this._comboTeam.setStyle("display","block"),this._comboMonth.setStyle("display","block"),this._btnGo.setStyle("display","block"),"t-football_2"===a.dom.id?this._getFixtures():"t-football_3"===a.dom.id&&this._getResults()):(this._comboTeam.setStyle("display","none"),this._comboMonth.setStyle("display","none"),this._btnGo.setStyle("display","none"),this._getTables(),this._showError(!1))},_setCompSelectedIndex:function(a){this._comboComp.dom.selectedIndex=a},_getCompSelected:function(){var a=this._comboComp.dom,b=a.options[a.selectedIndex];return b},_setTeamSelectedIndex:function(a){this._comboTeam.dom.selectedIndex=a},_getTeamSelected:function(){var a=this._comboTeam.dom,b=a.options[a.selectedIndex];return b},_setMonthSelectedIndex:function(a){this._comboMonth.dom.selectedIndex=a},_getMonthSelected:function(){var a=this._comboMonth.dom,b=a.options[a.selectedIndex];return b},_getTables:function(){if("t-football_1"===this._selectedTabId){this._loaderEl.setStyle("display","block"),this._table_1.setStyle("display","none");var a=this._getCompSelected();AjaxFeedsFacade.getTable({competitionId:a.value,compType:a.getAttribute("rel"),feedType:"table"},this._setTables.createDelegate(this))}},_setTables:function(a){this._pagination.setStyle("display","none");var b=this._createTable(a);this._loaderEl.setStyle("display","none"),this._table_1.dom.innerHTML=b,this._table_1.setStyle("display","block"),"t-football_1"!==this._selectedTabId||"4"!==this._currentCompId&&"17"!==this._currentCompId?(this._table_1.dom.className="noClick",this._instructionEl.setStyle("display","none")):(this._table_1.dom.className="",this._instructionEl.setStyle("display","block"))},_createTable:function(a){for(var b=a.teamList,c=(a.teamNamesMap,this._tamplates.table),d=0,e=b.length;e>d;d++){var f=b[d];c+=d%2===0?"<tr class='clickable-row bow'>":"<tr class='clickable-row'>",c+="<td class='ccox numeric bdr-l'>"+(d+1)+"</td>",c+="<td class='ff-team link-box linkro-wox'>",c+="<a id='ft-"+f.id+"' class='generated' href='#'>"+f.name+"</a>",c+="</td>",c+="<td class='align-r numeric'>"+f.totalPlayed+"</td>",c+="<td class='align-r numeric'>"+f.totalDifference+"</td>",c+="<td class='align-r numeric bdr-r'>"+f.totalPoints+"</td>",c+="</tr>"}return c+="</tbody>",c+="</table>"},_getFixtures:function(){this._instructionEl.setStyle("display","none"),this._table_2.setStyle("display","none"),this._loaderEl.setStyle("display","block"),this._pagination.setStyle("display","none"),
AjaxFeedsFacade.getFixtures({competitionId:this._currentCompId,feedType:"fixtures",month:this._currentMonthId,teamId:this._currentTeamId,startIndex:this._currentPageIndex},this._setFixtures.createDelegate(this))},_setFixtures:function(a){var b=a.fixtureList,c=this._tamplates.fixtures,d="",e=b.length;if(e>0){for(var f=0;e>f;f++){var g=b[f];(""===d||d!==g.gameDate.date)&&(d=g.gameDate.date,c+="<tr>",c+="<td class='align-c bdr-l bdr-r' colspan='4'>"+this._formatDate(g.gameDate.day,g.gameDate.month,g.gameDate.year)+"</td>",c+="</tr>"),c+="<tr class='bow'>",c+="<td class='align-r bdr-l'>"+g.firstTeam.name+"</td>",c+="<td class='align-c numeric'>v</td>",c+="<td class='align-l'>"+g.secondTeam.name+"</td>",c+="<td class='align-r bdr-r'>"+g.gameDate.time+"</td>",c+="</tr>"}if(c+="</tbody></table>",this._showError(!1),this._loaderEl.setStyle("display","none"),this._table_2.dom.innerHTML=c,this._table_2.setStyle("display","block"),a.totalSize>20){var h=this._generatePaginator({index:this._currentPageIndex+b.length,total:a.totalSize});this._pagination.dom.innerHTML=h,this._pagination.setStyle("display","block")}this._table_2.setStyle("display","block")}else this._showError(!0),this._loaderEl.setStyle("display","none"),this._table_2.setStyle("display","none")},_getResults:function(){this._instructionEl.setStyle("display","none"),this._table_3.setStyle("display","none"),this._loaderEl.setStyle("display","block"),this._pagination.setStyle("display","none"),AjaxFeedsFacade.getResults(this._getVO(this._currentPageIndex,"results"),this._setResults.createDelegate(this))},_setResults:function(a){var b=a.fixtureList,c=this._tamplates.results,d="",e=b.length;if(e>0){for(var f=0;e>f;f++){var g=b[f];(""===d||d!==g.gameDate.date)&&(d=g.gameDate.date,c+="<tr>",c+="<td class='align-c bdr-l bdr-r' colspan='3'>"+this._formatDate(g.gameDate.day,g.gameDate.month,g.gameDate.year)+"</td>",c+="</tr>"),c+="<tr class='bow'>",c+="<td class='align-r bdr-l'>"+g.firstTeam.name+"</td>",c+="<td class='align-c numeric'>"+g.firstTeam.score+"-"+g.secondTeam.score+"</td>",c+="<td class='align-l bdr-r'>"+g.secondTeam.name+"</td>",c+="</tr>"}if(c+="</tbody></table>",this._showError(!1),this._loaderEl.setStyle("display","none"),this._table_3.dom.innerHTML=c,this._table_3.setStyle("display","block"),a.totalSize>20){var h=this._generatePaginator({index:this._currentPageIndex+b.length,total:a.totalSize});this._pagination.dom.innerHTML=h,this._pagination.setStyle("display","block")}this._table_3.setStyle("display","block")}else this._showError(!0),this._loaderEl.setStyle("display","none"),this._table_3.setStyle("display","none")},_getTeamList:function(){var a=this._getTeamSelected();this._currentTeamId=a.value,AjaxFeedsFacade.getTeamsList(this._getVO(this._currentPageIndex,"table"),this._setTeamList.createDelegate(this))},_setTeamList:function(a){this._nameMap=a;var b="";b+="<select id='teamId' class='formSelect' name='teamId' style='display: none'>",b+="<option value=''>All</option>";for(var c=0,d=a.length;d>c;c++){var e=a[c];b+="<option value='"+e.id+"'>"+e.name+"</option>"}b+="</select>";var f=this.el.query(".js-teams")[0];f.innerHTML=b,this._comboTeam=Ext.get("teamId"),this._comboTeam.on("change",this._comboTeamChangeHandler,this),"t-football_1"!==this._selectedTabId&&this._comboTeam.setStyle("display","block"),this._currentTeamId=null,"4"!==this._currentCompId||PL?"17"!==this._currentCompId||SPL||(SPL=this._createNamesMap(a)):PL=this._createNamesMap(a)},_createNamesMap:function(a){for(var b={},c=0,d=a.length;d>c;c++){var e=a[c];b[e.id]=e.seoFriendlyName}return b},_getVO:function(a,b){var c=this._getCompSelected(),d=c.getAttribute("rel");return this._currentCompId!=c.value&&(this._currentCompId=c.value),0>d?!1:{competitionId:c.value,compType:d,feedType:b,month:this._getMonthSelected().value,startIndex:a||0,teamId:this._getTeamSelected().value}}}),DM=window.DM||{},DM.FloatingButtons=function(a,b){function c(a){return{GB:"home",US:"ushome",AU:"auhome"}[a]||"home"}function d(){return $("#next-story").length>0&&$("#next-story").hasClass("show")?$(window).height()>$("#next-story").outerHeight()+$(".floating-buttons").height():!0}function e(){return"channel"==PageCriteria.pageType||"article"==PageCriteria.pageType&&d()}function f(){c(PageCriteria.geo)===PageCriteria.channel&&s.indexOf(PageCriteria.subchannel)>=0&&$(document.body).addClass("no-article-count").addClass("floating-buttons-back-to-top-only")}function g(){w&&$(document.body).addClass("floating-buttons-oop-ads"),e()&&h()>$(window).height()/2&&$(window).width()>r?$(document.body).addClass("floating-buttons-show"):$(document.body).removeClass("floating-buttons-show")}function h(){return"number"==typeof $(window).scrollTop()?$(window).scrollTop():document.documentElement.scrollTop}function i(a){var b=new RegExp("(^|,)"+a+"(,|$)");return b.test(v.join(","))}function j(a){return a>=99?"+99":a.toString()}function k(a,b,c){a.hide(),b.removeClass("hidden"),c.addClass("hidden")}function l(a,b,c,d){a.show().text(b),c.addClass("hidden"),d.removeClass("hidden")}function m(a){a&&a.newArticleCount&&miniDom.cookieHelper.setItem(x,b.newArticleCount)}function n(a){a&&a.newArticleCount&&miniDom.cookieHelper.setItem(y,b.newArticleCount)}function o(){var a=$(".back-to-home"),c=$(".new-articles"),d=$(".new-article-count"),e=0;if(b&&"true"===b.showArticleCount&&0==miniDom.cookieHelper.getItem(z))if(e=miniDom.cookieHelper.getItem(y),e-miniDom.cookieHelper.getItem(x)>0&&!$(document.body).hasClass("floating-buttons-back-to-top-only")){var f=j(e-miniDom.cookieHelper.getItem(x));l(d,f,a,c)}else k(d,a,c);else k(d,a,c)}function p(){f(),(null==miniDom.cookieHelper.getItem(z)||isNaN(miniDom.cookieHelper.getItem(z)))&&(miniDom.cookieHelper.setItem(z,0),m(b)),c(PageCriteria.geo)===PageCriteria.channel&&"article"!=PageCriteria.pageType?(m(b),miniDom.cookieHelper.setItem(z,parseInt(miniDom.cookieHelper.getItem(z))+1)):n(b),window.onbeforeunload=function(a){c(PageCriteria.geo)===PageCriteria.channel&&"article"!=PageCriteria.pageType&&miniDom.cookieHelper.setItem(z,parseInt(miniDom.cookieHelper.getItem(z))-1)},b&&"true"===b.featureEnabled&&(q=setInterval(o,b&&b.newArticleRefresh||1e3)),t.length>0&&"other"==PageCriteria.device&&e()&&($(window).on("resize",g),$(window).on("scroll",g),u.on("click",function(a){return $("body,html").animate({scrollTop:0},400),!1}),adsRenderer&&adsRenderer.addLoadListener(function(a){var b=!a.isEmpty&&a.slot&&a.slot.molAd&&a.slot.molAd.parentId;w=w||b&&i(b)}),adsTrackers&&adsTrackers.getRequestedAds().forEach(function(a){var b=a.lid&&a.cid&&a.id;w=w||b&&i(b)}))}var q,r=975,s=["home","ushome","auhome","ukhome","indiahome"],t=$(".floating-buttons"),u=t.children(".back-to-top"),v=["billBoard-oop","sky-article-wide","textAd","h-sky-a","h-sky-b"],w=!1,x="baseline-article-count",y="latest-article-count",z="homepage";$(".gamma").length>0&&(r=1270),p()},DM.Horoscopes={init:function(){swfobject.embedSWF("/flash/horoscopes.swf","horoscope-flash","636","500","9.0.0",null,{xmlLocation:"/coffeebreak/horoscopes/horoscope.xml"},{allowscriptaccess:"always"},null,function(a){a.success?Ext.get("horoscope-text").replaceClass("js-hide","usability"):Ext.get("horoscope-text").removeClass("js-hide")})}},DM.Lightbox=function(){var a,b=function(){DM.LightboxObj=Ext.extend(Ext.util.Observable,{overlayDuration:.2,overlayOpacity:.85,resizeDuration:.7,constructor:function(){DM.LightboxObj.superclass.constructor.call(this),this.initialized||(this.addEvents(["b4open","open","afterOpen","close"]),this.initMarkup(),this.initialized=!0)},initMarkup:function(){this.shim=Ext.get("lightbox-shim"),this.overlay=Ext.get("overlay"),this.container=Ext.get("lightbox-container"),this.containerElement=Ext.get("lightbox"),this.defaultContainer=Ext.get("lightbox-default-container"),this.fader=Ext.get("lightbox-fader"),this.els=[this.shim,this.overlay,this.defaultContainer,this.container,this.containerElement,this.fader];for(var a=this.els.length;a>0;)--a,this.els[a].setVisibilityMode(Ext.Element.DISPLAY)},open:function(a){return this.setViewSize(),this.showBg(),this.fireEvent("b4open"),this},showBg:function(){this.overlay.fadeIn({duration:this.overlayDuration,endOpacity:this.overlayOpacity,scope:this})},show:function(a){var b=this.position(a);this.resetEls(),this.defaultContainer.shift({height:b.height,width:b.width,duration:this.resizeDuration,delay:50}),this.fader.shift({height:b.height,width:b.width,scope:this,callback:this.contentShow,duration:this.resizeDuration,delay:50})},position:function(a){this.containerElement.show();var b=this.containerElement.getWidth(),c=this.containerElement.getHeight(),d=Ext.fly(document).getScroll(),e=AND.getPageSize();if(a)this.containerElement.setStyle({top:a[1]+"px",left:a[0]+"px"}).show();else{var f=d.top+(e[3]-35-c)/2,g=(e[2]-b)/2;this.containerElement.setStyle({top:0>f?"0px":f+"px",left:0>g?"0px":g+"px"}).show()}return{width:b,height:c}},contentShow:function(){this.defaultContainer.setStyle({visibility:"visible",height:"auto"}),this.fireEvent("afterOpen"),this.fader.fadeOut({endOpacity:0,duration:this.resizeDuration,callback:function(){this.fader.hide()},scope:this})},resetEls:function(){this.defaultContainer.setStyle({visibility:"hidden",width:"0px",height:"0px"}),this.fader.setStyle({display:"block",width:"0px",height:"0px",opacity:"1"}),this.container.setStyle("left","0px")},close:function(){this.containerElement.hide(),this.overlay.hide(),this.shim.hide(),this.fireEvent("close"),this.defaultContainer.dom.innerHTML="",this.defaultContainer.setStyle({height:"auto",width:"auto"})},setViewSize:function(){var a=AND.getPageSize(),b=a[0],c=Math.max(a[1],a[3]);this.overlay.setStyle({left:0,top:0,width:b+"px",height:c+"px"}),this.shim.setStyle({left:0,top:0,width:b+"px",height:c+"px"}).show()}})};return{getInstance:function(){return a||(b(),a=new DM.LightboxObj),a}}}(),function(a){var b=a(document),c=function(a){return a.replace("targetUrl=","targetUrl="+window.location+" ")};b.on("click",".js-logout",function(b){return window.location=c(a(this).attr("href")),!1});var d=!1;b.on("ez-modal-before-load",function(a){var b=a.opt;b.modalType&&"login-overlay"===b.modalType&&!d&&(b.ajaxUrl=c(b.ajaxUrl),d=!0)}),b.on("ez-modal-after-open",function(a){var b=a.opt;b.modalType&&"login-overlay"===b.modalType&&DM.pageEvents.fireEvent(DM.pageEvents.PAGE_LOGIN_OPENED,DM.getPageMetadata({contentType:"login",loginType:"Default Login screen",registrationEntry:"Default Login screen"}))}),b.on("ez-modal-after-open",function(a){var b=a.opt;b.modalType&&"login-overlay"===b.modalType&&DM.pageEvents.fireEvent(DM.pageEvents.FRAGMENT_LOADED,a.ui.modal.get(0))});var e;b.on("click",".js-login",function(b){if("modal"!==a(this).data("toggle")){var d=a(this).data("target")||"/registration/p/lightbox_login.html?targetUrl= .login-lightbox";e||(e=a('<div class="ez-modal">').ezmodal({ajaxUrl:c(d),ajaxRefreshEverytime:!1}).appendTo("body"),e.on("ez-modal-after-open",function(a){DM.pageEvents.fireEvent(DM.pageEvents.PAGE_LOGIN_OPENED,DM.getPageMetadata({contentType:"login",loginType:"Default Login screen",registrationEntry:"Default Login screen"}))}),e.on("ez-modal-after-open",function(a){DM.pageEvents.fireEvent(DM.pageEvents.FRAGMENT_LOADED,a.ui.modal.get(0))})),e.ezmodal("open"),b.preventDefault()}}),a(document).on("click",".not_you",function(){a(".has-prov").removeClass("has-prov")}),a(document).on("click",".forgot-password",function(b){var c,d=a("#reg-lbx-email-lightbox"),e=a("#reg-lbx-email-page");c=d.length?d.val():e.val(),c&&(b.preventDefault(),window.location=a(this).attr("href")+"?email="+encodeURI(c))})}(jQuery),DM.Login={init:function(a){},open:function(a,b,c){$(".js-login").trigger("click")}},function(){var a,b,c,d=DM&&DM.features&&DM.features.loginWall;!DM.isLoggedIn&&PageCriteria&&"article"===PageCriteria.pageType&&d&&(b=new Date,c=new Date(b.getTime()+63072e6),a=parseInt(document.cookie.replace(/(?:(?:^|.*;\s*)mol-article-counter\s*\=\s*([^;]*).*$)|^.*$/,"$1")),isNaN(a)&&(a=1),a++,document.cookie="mol-article-counter="+a.toString()+"; expires="+c.toString()+"; path=/",a>6&&(lightbox=$('<div class="ez-modal login-wall-lightbox-container" aria-hidden="true" role="dialog"></div>').appendTo("body").ezmodal({ajaxUrl:"/registration/p/lightbox_login_wall.html?targetUrl="+window.location+" .login-lightbox",ajaxRefreshEverytime:!1}),lightbox.ezmodal("open"),lightbox.on("ez-modal-after-open",function(a){DM.pageEvents.fireEvent(DM.pageEvents.PAGE_LOGIN_OPENED,DM.getPageMetadata({contentType:"login-wall",loginType:"Login Wall",registrationEntry:"Login Wall"}))}),lightbox.on("ez-modal-after-open",function(a){DM.pageEvents.fireEvent(DM.pageEvents.FRAGMENT_LOADED,a.ui.modal.get(0))})))}(),function(a,b){return"function"==typeof define&&define.amd?void define(["jquery"],function(c){return b(a,c)}):b(a,$)}(this,function(a,b){var c=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}},d="text password search number email datetime datetime-local date month week time tel url color range".split(" "),e=d.length;b.expr[":"].textall=function(a){for(var b=a.getAttribute("type"),c=0;e>c;c++)if(b===d[c])return!0;return!1};var f="The value is not correct",g={regExp:function(a){var b=a.re,c=a.error;return function(a,d,e){b.test(a)?e():e(c||f)}},length:function(a){var b=a.min,c=a.max,d=a.error;return"undefined"==typeof b&&(b=-(1/0)),"undefined"==typeof c&&(c=1/0),function(a,e,g){var h=a.length;h>=b&&c>=h?g():g(d||f)}},rest:function(a){var c=a.success||function(a,b,c){"success"===b?c():c(a||f)},d=a.error||function(a,b,c,d){d()},e=a.notCached,g={};return function(f,h,i){var j=b.extend({url:a.url,type:"GET",data:a.getData&&a.getData(f)||f,success:function(a,b){e||(g[f]={msg:a,status:b}),c(a,b,i)},error:function(a,b,c){d(a,b,c,i)}},a.ajaxConfig);e||"undefined"==typeof g[f]?b.ajax(j):c(g[f].msg,g[f].status,i)}}};return b.fn.regformvalidator=function(a){var d=function(a,c){var d=b(a).closest(c);return d.length||(d=a),d};return this.each(function(){var e=b(this),f=b.extend({fieldContainer:void 0,errorContainer:".err",succeedClass:"succeed",errorClass:"fail",hintClass:"hint",serverSideErrorClass:void 0,errorsMap:{},hintsMap:{},rules:{},scroll:!0,changeStatus:function(a,b,c){var b,e=d(a,this.fieldContainer);e.removeClass(this.errorClass+" "+this.hintClass+" "+this.succeedClass),e.find(this.errorContainer).html(b),e.addClass(c)}},a);b.each(f.rules,function(a,c){b.isFunction(c)||(f.rules[a]=g[c.type](c.opts))});var h=function(a){return a.is(":textall,textarea,select")?a.val():a.is(":checkbox:checked,:radio:checked")?a.val():""},i=function(){k.call(this)},j=function(){k.call(this,!0)},k=function(a){var c=b(this),d=h(c),g=c.attr("name"),i=f.errorsMap[g]||f.errorsMap["*"],j=f.hintsMap[g]||f.hintsMap["*"],k=new b.Deferred;return i||j?(a&&j&&(i=j.concat(i)),function(a,b,c,d,e,f){!function g(h){var i,j=b[h];return j?(i=c.rules[j],void i(a,e,function(a){a?(c.changeStatus(d,a,f&&c.hintClass||c.errorClass),k.resolve({$field:d,error:a,hint:f&&c.hintClass||c.errorClass})):g(h+1)})):(c.changeStatus(d,"",c.succeedClass),void k.resolve({$field:d,error:"",hint:c.succeedClass}))}(0)}(d,i,f,c,e,a),k.promise()):k.resolve()},l=function(a){var c,d=new b.Deferred;return c=a.find(":textall,textarea,:radio,:checkbox,select").map(function(){return k.apply(this)}).get(),b.when.apply(b,c).done(function(){var a;a=b.map(arguments,function(a){return a&&a.error.length?a:void 0}),d.resolve(a)}),d.promise()},m=function(a,c){var e=b(this);return c?!0:e.hasClass("submitting")?!1:(e.addClass("submitting"),l(e).done(function(a){var c,g;a.length?(e.removeClass("submitting"),c=d(a[0].$field,f.fieldContainer).removeClass("focus"),g=c.offset().top-50,0>g&&(g=0),f.scroll&&b("html, body").animate({scrollTop:g},1e3),c.focus()):e.trigger("submit",!0)}),!1)},n=e.find(":input");f.serverSideErrorClass&&n.each(function(){var a,c=b(this),e=c.attr("name"),g=h(c),i=d(c,f.fieldContainer),j=i.find(f.errorContainer).html();i.length||(i=c),i.is(f.serverSideErrorClass)&&e&&(a="serverSideValidation_"+e,f.rules[a]=function(a,b,c){a===g?c(j||" "):c()},f.errorsMap[e]?f.errorsMap[e].push(a):f.errorsMap[e]=[a])}),n.each(function(){var a=b(this);a.is(".ignore-events")||(a.is(":textall,textarea")?(a.on("blur",i),a.on("focus",j),a.on("keydown",c(i,1e3)),a.on("validate-error",i),a.on("validate-hint",j)):a.is(":radio,:checkbox")?(a.on("click",i),a.on("validate-error",i),a.on("validate-hint",j)):a.is("select")&&(a.on("change focus",i),a.on("validate-error",i),a.on("validate-hint",j)),a.is(":textall,textarea,:radio,:checkbox,select")&&(a.focus(function(){d(n,f.fieldContainer).removeClass("focus"),d(this,f.fieldContainer).addClass("focus")}),a.blur(function(){d(this,f.fieldContainer).removeClass("focus")})))}),e.on("submit",m)})},b}),DM.EmailLightbox=function(a,b){var c={mandatoryRecipEmail:{type:"regExp",opts:{re:/^.+$/,error:"Please enter the recipient's email address here"}},mandatoryName:{type:"regExp",opts:{re:/^.+$/,error:"Please enter your name here"}},mandatoryFromEmail:{type:"regExp",opts:{re:/^.+$/,error:"Please enter your email address here"}},emailHelper:{type:"regExp",opts:{re:/^.+$/,error:"Please enter a valid email address"}},email:{type:"regExp",opts:{re:/^([A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4})?$/i,error:"Please provide a valid email address here"}},mandatoryRecaptcha:{type:"regExp",opts:{re:/^.+$/,error:"Please enter the captcha value here"}}};!function(a){function d(c){a("#sendArticleEmailForm").removeClass("submitting"),a("."+c.errorField).removeClass("succeed").addClass("fail"),a("."+c.errorField).find(".msg").html(c.error),Recaptcha.create(b.captchaKey,"recaptcha",{theme:"custom",custom_theme_widget:"recaptcha"})}var e=a(document);e.ready(function(b){"#email"==document.location.hash&&a(".js-email").first().click()}),e.on("ez-modal-before-open",function(a){var b=a.opt;b&&b.placement&&emailArticle(b.placement)}),e.on("ez-modal-after-open",function(d){var e=d.opt;e.modalType&&"email-overlay"===e.modalType&&(a.getScript("http://www.google.com/recaptcha/api/js/recaptcha_ajax.js",function(a){Recaptcha.create(b.captchaKey,"recaptcha",{theme:"custom",custom_theme_widget:"recaptcha"})}),a("#email-modal-overlay").css({"z-index":10000002}),function(a){a("#sendArticleEmailForm").regformvalidator({fieldContainer:".email-fld",errorContainer:".msg",rules:c,scroll:!1,errorsMap:{forename:["mandatoryName"],to:["mandatoryRecipEmail","email"],from:["mandatoryFromEmail","email"],recaptcha_response_field:["mandatoryRecaptcha"]}})}(jQuery))}),e.on("ez-modal-after-close",function(b){var c=b.opt;c.modalType&&"email-overlay"===c.modalType&&a("#"+c.modalId).remove()}),e.on("submit","#sendArticleEmailForm",function(b){return a.ajax({type:"POST",url:a(this).attr("action"),data:a("#sendArticleEmailForm").serialize(),beforeSend:function(b){a(".email-loading").addClass("show")},success:function(b){"SUCCESS"==b.error?a(".email-lightbox").addClass("sent"):d(b)},complete:function(b){a(".email-loading").removeClass("show")}}),!1})}(jQuery)},DM.MiniMoment=function(a){function b(){h.getMinutes()&&(h=new Date(+h+g))}function c(a){var b=a%10,c=a%100;return 1==b&&11!=c?a+"st":2==b&&12!=c?a+"nd":3==b&&13!=c?a+"rd":a+"th"}var d=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],f=6e4,g=60*f,h=a||new Date,i=-h.getTimezoneOffset();b();var j={minutes:function(){return h.getMinutes()},add:function(a,b){switch(b){case"hours":h=new Date(+h+a*g);break;case"minutes":h=new Date(+h+a*f)}return this},hours:function(){return h.getHours()},toString:function(){return h},valueOf:function(){return h},timeFormat:function(){var a=h.getHours();return(12>=a?0==a?12:a:a%12)+(12>a?"AM":"PM")},dateFormat:function(){return d[h.getDay()]+", "+e[h.getMonth()]+" "+c(h.getDate())+" "+h.getUTCFullYear()},dateFormatShort:function(){return[d[h.getDay()].substring(0,3),h.getDate(),e[h.getMonth()].substring(0,3),h.getUTCFullYear().toString().substring(2,4)].join(" ")},addOffset:function(){return this.add(i,"minutes"),this},setDate:function(a){return h=a,this},clone:function(){return DM.MiniMoment(new Date(+h))},tod:function(a){var b=DM.MiniMoment(new Date(+h+(a||0)*g)),c=b.hours()%3;return(c?b.add(3-c,"hours"):b).timeFormat()}};return j},DM.WeatherObj=function(a){this.el=Ext.get(a),this.init()},DM.WeatherObj.prototype={init:function(){this.form=Ext.get(this.el.dom.getElementsByTagName("form")[0]),this.form&&this.el.select(".js-submit").on("click",this.eHandler,this)},eHandler:function(){this.form.dom.submit()}},DM.WeatherTop=function(){var a=DM.MiniMoment();return function(b){function c(a){var b=a.hours()%3;return(b?a.add(3-b,"hours"):a).clone().addOffset().timeFormat()}function d(d){var f=$(b.sel||".page-header .weather"),i=f.find("a");if("GB"!=PageCriteria.geo&&i&&i.attr("href",i.attr("href")+"?mapId="+g+"&numDays=0&mapType=Weather&temp="+h),e)f.html(["<span>",a.clone().addOffset().dateFormatShort(),"</span>",d].join(""));else{f.append("<strong>"+a.clone().addOffset().dateFormat()+"</strong>"+d);var j=f.find("span");j[0].innerHTML=c(a)+"&nbsp;",j[2].innerHTML=c(a.clone().add(3,"hours"))+"&nbsp;",f.show()}i=f.children("a"),"AU"===PageCriteria.geo&&i.length&&i.attr("href","/weather/australia/index.html"),DM.pageEvents.fireEvent(DM.pageEvents.FRAGMENT_LOADED,f.get(0))}var e=b.newNavigation,f=b.weatherDate,g=b.mapId,h=b.tempScale;if(f){var i=new Date(f.substring(0,4),f.substring(4,6)-1,f.substring(6,8),f.substring(8,10));a=DM.MiniMoment(i)}$.get("/weather.html",{latitude:Math.round(PageCriteria.latitude),longitude:Math.round(PageCriteria.longitude),newNavigation:e,weatherDate:f},d)}}(),DM.TravelSearch=function(){var a,b=function(){var a,b,c,d,e,f=function(f){if(Ext.fly("js-submit-button").on("click",h,this),a=Ext.get("js-calendar-container")){b=Ext.get("depdate-day"),c=Ext.get("depdate-month"),d=Ext.get("depdate-year");var k=new Date;k.setTime(k.getTime()+2592e5),e=new Ext.ux.DatePicker("js-calendar-container",{handler:g,value:k,showToday:!1}),Ext.fly("js-dateFromLink").on("click",e.show,e);var l=Ext.get("js-children-1");l.on("change",j,this),l.on("keyup",j,this),i(),Ext.get("js-to").on("focus",function(a,b){b.value=""},this,{single:!0})}},g=function(a,f){e.el.hide(),b.dom.value=f.getDate(),c.dom.value=f.getMonth()+1,d.dom.value=f.getFullYear()},h=function(a){var b=!0,c=!0,d=Ext.get("js-error-departure"),e=Ext.get("js-from").dom,f=Ext.get("js-error-destination"),g=Ext.get("js-to").dom;"UNDEFINED"==e.value?(d.dom.innerHTML="Please select your departure airport",d.show()):(d.hide(),b=!1),g.value.length<1||"Please type your destination"==g.value?(f.dom.innerHTML="Please type in your destination or click 'More search options' to see the list of destinations available",f.show()):(f.hide(),c=!1),(b||c)&&a.preventDefault()},i=function(){var a=new Date;a.setTime(a.getTime()+2592e5),b.dom.value=a.getDate(),c.dom.value=a.getMonth()+1,d.dom.value=a.getFullYear()},j=function(a){var b,c=Ext.get("js-childages");if(a>0){c.show();for(var d=5;d>0;)--d,b=Ext.get("js-childage-"+d),d>a?b.hide():b.show()}else c.hide()};return{init:f}};return{getInstance:function(){return a||(a=b()),a}}}(),function(a,b){"function"==typeof define&&define.amd?define(["jquery","mol-page-events/page-events","mol-comscore/comscore","mol-fe-logging/logging","mol-freewheel/freewheel"],function(c,d,e,f,g){return b(a,c,d,e,f,g)}):a.DM.BC=b(a,$,DM.pageEvents,DM.ComScore,DM.Log,DM.FreeWheel)}(this,function(a,b,c,d,e,f){var g=function(){try{return!!b(DM.platformConfig.features.oneClickVideo).length&&!MobileUtils.isAndroidStock()}catch(a){return!1}},h=function(){return{init:function(a,d){function i(){if(e.log("videoplayer","> > play"),!window.brightcove)return void e.log("videoplayer","< < not ready");e.log("videoplayer","    play: firing events.VIDEO_CLICKED"),c.fireEvent(c.VIDEO_CLICKED,{pageMetadata:c.getPageMetadata(),videoId:k.videoPlayer}),d.find("a").remove();var a=h.createVideoPlayer({experienceId:k.objId+"video",playerId:k.playerId,playerKey:k.playerKey,mediaId:k.videoPlayer,linkBaseURL:k.linkBaseURL,width:k.width,height:k.height,muted:k.muted,title:k.title,source:k.source,trackingType:k.trackingType||"embedded",rsi:k.rsi,referrerUrl:k.referrerUrl,videoChannel:k.channel,freewheelId:k.freewheelIdent}),b=d.find(l);return b.append(a),j(function(){b.addClass("playing"),window.brightcove.createExperiences()}),e.log("videoplayer","< < play"),!0}if(a="undefined"==typeof a?{}:a,d=b(d||document.getElementById(a.id)),d.length){e.log("videoplayer","> init",a,d),b(d).attr("data-video-opts")&&(a=b.extend(JSON.parse(b(d).attr("data-video-opts")),a));var j=window.useFreewheel?f.loadPlugin:function(a){a()},k=a.params?a.params.renderConfig:a,l="."+(k.css||"js-video");e.log("videoplayer","  init: renderConfig = ",k),e.log("videoplayer","  init: playerSelector = ",l),e.log("videoplayer","  init: oneClickVideo = ",g()),g()||k.autoplay?!function m(){var a=i();a||setTimeout(m,400)}():(e.log("videoplayer","  init: trying to play - ",d.find(l+" a,"+l)),d.find(l+" a,"+l).first().one("click",i))}},isWindowsMobile:function(){return-1!==navigator.userAgent.search("IEMobile")},createVideoPlayer:function(a){return a=b.extend({muted:!1,width:636,height:358,isPlaylist:!1,continuePlayList:!1,freeWheel:f},a),e.log("videoplayer","> createVideoPlayer",a),f.selectAdIdentType(a.freewheelId),new h.EventAdaptor(a),e.log("videoplayer","< createVideoPlayer"),['<div><object id="'+a.experienceId+'" class="BrightcoveExperience">','<param name="bgcolor" value="#000000" />','<param name="width" value="'+a.width+'" />','<param name="height" value="'+a.height+'" />','<param name="playerId" value="'+a.playerId+'" />','<param name="playerKey" value="'+a.playerKey+'" />','<param name="includeAPI" value="true" />','<param name="publisherID" value="1418431299" />','<param name="isVid" value="true" />','<param name="isUI" value="true" />',this.isWindowsMobile()&&'<param name="forceHTML" value="true" />'||"",'<param name="optimizedContentLoad" value="true" />','<param name="wmode" value="transparent" />','<param name="templateReadyHandler" value="templateReady" />','<param name="@videoPlayer" value="'+a.mediaId+'" />','<param name="autoStart" value="false" />','<param name="showNoContentMessage" value="true" />',a.linkBaseURL?'<param name="linkBaseURL" value="'+a.linkBaseURL+'" />':"","</object></div>"].join("")}}}();return a.templateReady=function(a){h.adaptors[a.target.experience.id].onTemplateReady(a)},h.adaptors={},h.playerDestroyed=function(a){a in h.adaptors&&(h.adaptors[a].playerDestroyed(),delete h.adaptors[a])},h.EventAdaptor=function(d){function f(a){y=y||a,v=a}function g(){return y&&y.id===v.id}function i(a,b,c){if(b&&!b.isStreaming){var d=b.videoStillURL;return(d||x)&&(b.videoStillURL=c,a.updateMedia(b,function(){})),d}}function j(a,b,c){A||(A=!0,a.play(),i(b,c,x))}function k(a){var b=g();return{pageMetadata:c.getPageMetadata(),videoId:a.id,title:F,img:G,displayName:a.displayName,playerId:C,experienceId:B,adBlockerActive:window.adBlockerActive,sponsored:E,playerType:z,playlist:K&&b,continuePlayList:N&&b,trackingType:L,channelShortName:M,initialVideo:b,referrerUrl:O,referenceId:a.referenceId,videoChannel:Q,length:a.length}}function l(a){return b.extend({offset:a.position,duration:a.duration},k(a.media))}function m(a,c,d,e,f){return b.extend({segmentNum:d,segment:c,segmentLength:e,ratio:f},l(a))}function n(a,b,d,e){var f=!1;this.onPlay=function(g){var h=g.position/g.duration;!f&&h>=d&&(f=!0,c.fireEvent(c.VIDEO_PROGRESS,m(g,b,a,g.duration*e,d)))}}function o(){s=!1,A=!1,t=!1,u=!1,v=void 0,w=[new n(1,"M:0-25",0,.25),new n(2,"M:25-50",.25,.25),new n(3,"M:50-100",.5,.5)]}function p(b,c,d,e,f,g,i,k,l,m){var n=setTimeout(function(){j(c,d,e)},2e3);b.getAdPolicy(function(o){function p(a,b,c){var d=q(a);d===!1&&(o.playerAdKeys+=t,d=o.playerAdKeys.length);var e=o.playerAdKeys.indexOf(t,d);if(-1===e&&(e=o.playerAdKeys.length),c){var f=o.playerAdKeys.indexOf(u,d);-1!==f&&e-f>1&&(b=o.playerAdKeys.substring(f+1,e)+v+b)}o.playerAdKeys=o.playerAdKeys.substring(0,d)+a+u+b+o.playerAdKeys.substring(e)}function q(a){var b=a+u,c=a+t;if(o.playerAdKeys.length===a.length&&o.playerAdKeys===a)return 0;if(o.playerAdKeys.substring(b.length)===b)return 0;if(o.playerAdKeys.substring(c.length)===c)return 0;var d=o.playerAdKeys.indexOf(t+b),e=o.playerAdKeys.indexOf(t+c),f=-1===d||-1!==e&&d>e?e:d;return-1===f?!1:f+t.length}function r(){return navigator.userAgent.match(/iPhone|Android.+Mobile|Windows Phone/)?"316x177":g+"x"+i}function s(a,b){if(b.length){p(a,"");for(var c=0;c<b.length;c++)p(a,b[c],!0)}}var t=";",u="=",v=",";if(o){o.adServerURL=h.videoAdServerUrl||a.MOL.videoAdServerUrl;var w=e.length/1e3,x=w>120?120:30*Math.floor(w/30);if(p("length",x),g&&p("videoWidth",g),i&&p("videoHeight",i),f){var y=encodeURIComponent(f.replace(/\s/g,"_").replace(/[^_\w]/g,""));p("videoTitle",y)}p("play",l?"first":""),k&&p("video",k.replace(/ /g,"_")),m=adverts&&"function"==typeof adverts.getRsiValues?adverts.getRsiValues():m,m&&(Array.isArray(m)?s("rsi",m):Object.keys(m).forEach(function(a){s(a,m[a])})),o.adServerURL=o.adServerURL.replace(/\[size\]/g,r()),o.playerAdKeys=o.playerAdKeys.replace(/8x8/g,r()),b.setAdPolicy(o)}l&&(clearTimeout(n),j(c,d,e))})}function q(a){if("flash"==z&&D)try{a.setVolume(0)}catch(b){try{var c=document.getElementById(B);c.fapiMute()}catch(d){e.log("videoplayer","setVolume is not supported by the smart player. You can use this plugin https://github.com/mister-ben/Brightcove-Flash-API-Bridge")}}}function r(b,d,e){window.useFreewheel&&R.mangleEventModel(b,d),d.addEventListener(a.brightcove.api.events.AdEvent.START,function(a){R.isPostrollGuardActive()||b.getCurrentVideo(function(b){f(b);var d=k(v);a.media=v;var e=l(a);t=!0,c.fireEvent(c.VIDEO_STREAM_STARTED,d),c.fireEvent(c.VIDEO_ADVERT_STARTED,e)})}),d.addEventListener(a.brightcove.api.events.AdEvent.COMPLETE,function(a){R.isPostrollGuardActive()||(a.media=v,c.fireEvent(c.VIDEO_ADVERT_COMPLETED,l(a)))}),b.addEventListener(a.brightcove.api.events.MediaEvent.PLAY,function(a){if(!t){f(a.media),a.media=v;l(a);t=!0,c.fireEvent(c.VIDEO_STREAM_STARTED,l(a))}u?c.fireEvent(c.VIDEO_RESUMED,l(a)):(u=!0,c.fireEvent(c.VIDEO_CONTENT_STARTED,l(a)),p(d,b,e,a.media,F,H,I,J,!1,P))}),b.addEventListener(a.brightcove.api.events.MediaEvent.STOP,function(a){a.position>a.duration-.3?(c.fireEvent(c.VIDEO_CONTENT_COMPLETED,l(a)),o()):c.fireEvent(c.VIDEO_PAUSED,l(a))}),b.addEventListener(a.brightcove.api.events.MediaEvent.PROGRESS,function(a){for(var b=0,c=w.length;c>b;b++)w[b].onPlay(a)})}var s,t,u,v,w,x,y,z,A,B=d.experienceId,C=d.playerId,D=d.muted,E=d.sponsored,F=d.title,G=d.image,H=d.width,I=d.height,J=d.source,K=d.isPlaylist,L=d.trackingType,M=d.channelShortName,N=d.continuePlayList,O=d.referrerUrl,P=d.rsi,Q=d.videoChannel,R=d.freeWheel;o(),h.adaptors[B]=this,this.onTemplateReady=function(b){if(!s){s=!0;var d=b.target.experience.id,f=a.brightcove.api.getExperience(d);if("undefined"==typeof f&&(f=a.brightcove.getPlayer(d)),f){z=f.type,c.fireEvent(c.VIDEO_PLAYER_READY,{playerType:z,experienceId:d});var g=a.brightcove.api.modules.APIModules,h=f.getModule(g.VIDEO_PLAYER),l=f.getModule(g.EXPERIENCE),m=f.getModule(g.ADVERTISING),n=f.getModule(g.CONTENT);l&&h&&m&&(r(h,m,n),q(h),h.getCurrentVideo(function(a){try{x=i(n,a,null),c.fireEvent(c.VIDEO_DATA_READY,k(a)),p(m,h,n,a,F,H,I,J,!0,P)}catch(b){j(h,n,a),e.log("videoplayer","Could not configure ComScore and AdPolicy in Brightcove",b)}}))}}},this.playerDestroyed=function(){v&&(u?c.fireEvent(c.VIDEO_CONTENT_ABORTED,k(v)):c.fireEvent(c.VIDEO_ADVERT_ABORTED,k(v)))}},b.fn.video=function(a){return this.each(function(){h.init(a,this)})},h}),DM.TimSearch=function(a,b){Ext.apply(this,b),this.init({id:a})},DM.TimSearch.prototype={_el:null,init:function(a){this._el=Ext.get(a.id),this._el&&this._el.on("submit",this._onSubmit,this)},_onSubmit:function(a){var b,c=this._el.select("input[name=searchWhere]:checked").item(0);c&&"company"===c.dom.value&&c.dom.checked&&(a.preventDefault(),
b=this.link+this._el.select("input[name=searchPhrase]").item(0).dom.value,this._el.dom.target&&"_top"===this._el.dom.target?window.parent.location=b:window.location=b)}},DM.TimCalculator=Ext.extend(Ext.util.Observable,function(){var a={mandatory:/^.+$/,number:/^-?[\d,]*(\.\d*)?$/,integer:/^-?[\d,]*$/,pNumber:/^[\d,]*(\.\d*)?$/,pNumNoFormat:/^[\d,]*(\.\d*)?$/,pInteger:/^[\d,]*$/},b=".calc-inputs",c=b+" input[name], "+b+" select[name]",d="button[name=calculate]",e=".calc-results",f=e+" input[name]",g=".calc-msg";return{_formEl:null,_inputs:{},_inputEls:{},constructor:function(a,b){var e=this,f=Ext.get(a);f&&(this._formEl=f,Ext.apply(this,b),this._inputEls=f.select(c).each(function(a){a.dom.type&&"text"===a.dom.type&&a.on("keyup",e.runCalc,e),!a.dom.type||"radio"!==a.dom.type&&"checkbox"!==a.dom.type||a.on("click",e.runCalc,e),"select-one"===a.dom.type&&a.on("change",e.runCalc,e)}),f.on("submit",this.runCalc,this,{preventDefault:!0}),f.select(d).on("click",this.runCalc,this),this.addEvents("b4run","b4submitRun"))},_readInput:function(b,c){var d,e,f,g=b.dom.name;if(b){if(c=c||!1,("text"===b.dom.type||"select-one"===b.dom.type)&&(this._inputs[g]=b.dom.value),"radio"===b.dom.type&&b.dom.checked&&(this._inputs[g]=b.dom.value),"checkbox"===b.dom.type&&b.dom.checked&&(this._inputs[g]=b.dom.value),b.isNumeric=!1,"undefined"!=typeof this.rq[g]||"undefined"!=typeof this.rq["*"]){d=this.rq[g]||this.rq["*"];for(var h=0,i=d.length;i>h;h+=1){if("RegExp"===d[h].constructor.name)f=d[h];else{if(e=d[h],"undefined"==typeof a[e])continue;f=a[e],/^p?number|p?integer$/i.test(e)&&(b.isNumeric=!0)}if(!f.test(this._inputs[g]))return c&&b.addClass("failed"),!1}}return b.removeClass("failed"),b.isNumeric&&(this._inputs[g]=+this._inputs[g].replace(/,/g,"").replace(/\s/g,"")),!0}},runCalc:function(a){var b=this,c=this._formEl,d=this.fx,g={},h=!0,i=!1;if((!a||"keyup"!==a.type||9!==a.keyCode)&&!Ext.isEmpty(d)&&(this.fireEvent("b4run"),a&&"click"===a.type&&this.fireEvent("submitRun"),c.select(f).each(function(a){a.dom.value=""}),i=a&&"click"===a.type,this._inputEls.each(function(a){h?h=b._readInput(a,i):b._readInput(a,i)}),h))for(var j in d)if(d.hasOwnProperty(j)&&"function"==typeof d[j]){if(g[j]=d[j].call(this,this._inputs,g),Ext.isEmpty(g[j]))continue;c.select(e+" input[name="+j+"]").each(function(a){a.dom.value="number"==typeof g[j]?b.formatNum(g[j],2):g[j]})}},formatNum:function(a,b,c,d){var e=isFinite(+b)?Math.abs(b):0,f="undefined"==typeof thousandsSep?",":thousandsSep,g="undefined"==typeof d?".":d,h="",i=function(a,b){var c=Math.pow(10,b);return""+Math.round(a*c)/c};return isFinite(a)?(h=(e?i(a,e):""+Math.round(a)).split("."),h[0].length>3&&(h[0]=h[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,f)),(h[1]||"").length<e&&(h[1]=h[1]||"",h[1]+=new Array(e-h[1].length+1).join("0")),h.join(g)):null},printMsg:function(a,b){var c=this._formEl;a&&(b=b?"calc-msg "+b:"calc-msg",c.select(e).item(0).insertHtml("afterBegin",'<p class="'+b+'">'+a+"</p>"),this.on("b4run",function(){c.select(g).each(function(a){a.remove()})},this,{single:!0}))}}}()),DM.TimCalculatorJSON=Ext.extend(DM.TimCalculator,function(){var a=document.getElementsByTagName("head").item(0),b=[],c=[];return{constructor:function(a,b){var d,e=this;DM.TimCalculatorJSON.superclass.constructor.call(this,a,b),this.dataSource&&this.dataSource.url&&(d=function(){e.appendScript(e.dataSource.url),e._inputEls.each(function(a){Ext.EventManager.un(a,"focus",d)})},this._inputEls.on("focus",d),this.on("b4submitRun",function(){c[encodeURI(e.dataSource.url)]||e.appendScript(e.dataSource.url,!0,e.runCalc)}))},appendScript:function(d,e,f){function g(){h.parentNode.removeChild(h),c[encodeURI(d)]=!0,"function"==typeof f&&f.call(i)}var h,i=this;d&&(!b[encodeURI(d)]||e)&&(h=document.createElement("script"),h.setAttribute("type","text/javascript"),h.src=d,h.onload=function(){h.onloadDone=!0,g()},h.onreadystatechange=function(){"loaded"!==h.readyState&&"complete"!==h.readyState||h.onloadDone||g()},a.appendChild(h),b[encodeURI(d)]=!0)}}}()),function(a,b){"function"==typeof define&&define.amd?define(["jquery"],b):a.DM.TIMCalculator=b($)}(this,function(a){var b={pNumber:/^[\d,]*(\.\d*)?$/,pNumNoFormat:/^[\d,]*(\.\d*)?$/,pInteger:/^[\d,]*$/},c={loans:{payment:function(a,b){if(a.rate&&0==a.rate)return a.amount/(a.duration*a.period);var c=a.rate/1200;return c*Math.pow(1+c,a.duration*a.period)/(Math.pow(1+c,a.duration*a.period)-1)*a.amount},charge:function(a,b){return a.rate&&0==a.rate?"0":b.payment*a.duration*a.period-a.amount},repayment:function(a,b){return b.payment*a.duration*a.period}},savings:{worth:function(a,b){var c,d;return a.rate&&0==a.rate?Number(a.amount)+a.payment*a.years*12:(c=a.rate/100,d=Math.pow(1+c/12,12*a.years),a.payment*(d-1)*(12/c)+a.amount*d)}},mortgages:{monthly1:function(a,b){if(a.rate1&&a.amount1&&a.years1){var c=a.rate1/1200;return c*Math.pow(1+c,12*a.years1)/(Math.pow(1+c,12*a.years1)-1)*a.amount1}},repayment1:function(a,b){return b.monthly1?Number(a.fee1)+12*b.monthly1*a.years1:void 0},charge1:function(a,b){return b.repayment1&&a.amount1?b.repayment1-a.amount1:void 0},cost1:function(a,b){return b.monthly1?a.fee1?b.monthly1*(12*a.initialYears1+a.initialMonths1)+Number(a.fee1):"0":void 0},monthly2:function(a,b){if(a.rate2&&a.amount2&&a.years2){var c=a.rate2/1200;return c*Math.pow(1+c,12*a.years2)/(Math.pow(1+c,12*a.years2)-1)*a.amount2}},repayment2:function(a,b){return b.monthly2?Number(a.fee2)+12*b.monthly2*a.years2:void 0},charge2:function(a,b){return b.repayment2&&a.amount2?b.repayment2-a.amount2:void 0},cost2:function(a,b){return b.monthly2?a.fee2?b.monthly2*(12*a.initialYears2+a.initialMonths2)+Number(a.fee2):"0":void 0}},stamp_duty:{stampduty:function(a,b){return a.price?a.price<125001?"0":a.price>=125001&&a.price<250001?.02*(a.price-125e3):a.price>=250001&&a.price<925001?.05*(a.price-25e4)+2500:a.price>=925001&&a.price<1500001?.1*(a.price-925e3)+33750+2500:a.price>=1500001?.12*(a.price-15e5)+57500+33750+2500:void 0:void 0}}},d=".calc-inputs",e=d+" input[name], "+d+" select[name]",f=".calc-results",g=f+" input[name]",h="li.mortgage-tabs ul > li";return a.fn.timCalculator=function(d){var i=null,j={},k={},l=function(a){if("string"==typeof a)for(;a.search(",")>=0;)a=a.replace(",","");return a},m=function(){k.each(function(){a(this).removeClass("failed")})},n=function(){var b=a(this).attr("name");i.find(g+","+e).each(function(){var c=a(this);c.prop("id").startsWith(b)&&("select-one"===c.prop("type")?c.val(c.data("default")):(c.val(c.prop("defaultValue")),c.removeClass("failed")))})},o=function(){var b=a(this),c=b.data("tab");i.find(h+", "+e+", "+g).each(function(){var b=a(this);b.removeClass("select"),b.data("tab")==c&&b.addClass("select")})},p=function(a,b){var c=isFinite(+b)?Math.abs(b):0,d="";return a&&isFinite(a)?(d=a.split("."),d[0].length>3&&(d[0]=d[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,",")),(d[1]||"").length>c&&(d[1]=d[1].substring(0,2)),d.join(".")):null},q=function(a){var c,e,f,g=a.attr("name"),h=d.rq;if(a){if(j[g]=a.val(),"undefined"!=typeof h[g]||"undefined"!=typeof h["*"]){c=h[g]||this.rq["*"];for(var i=0,k=c.length;k>i;i+=1){if("RegExp"===c[i].constructor.name)f=c[i];else{if(e=c[i],"undefined"==typeof b[e])continue;f=b[e],"number"===a.prop("type")?""===a.val()&&a.val(a.val()):/^p?number|p?integer$/i.test(e)&&(j[g]=l(j[g]),isFinite(j[g])&&a.val(p(j[g])))}if(!f.test(j[g])||a.prop("max")&&a.prop("max").length<a.val().length)return a.addClass("failed"),!1}}return a.removeClass("failed"),!0}},r=function(b){var e=c[d.fx],h={},l=!0,m=null;if((!b||"keyup"!==b.type||37!==b.keyCode&&39!==b.keyCode)&&e&&(i.find(g).each(function(){a(this).val("-")}),k.each(function(){l=q(a(this))&&l}),l))for(var n in e)if(e.hasOwnProperty(n)&&"function"==typeof e[n]){if(h[n]=e[n].call(this,j,h),!h[n])continue;i.find(f+" input[name="+n+"]").each(function(b){m="number"==typeof h[n]?p(h[n].toString(),2):h[n],a(this).val(m?"\xa3"+m:"-")})}};return this.each(function(){var b=a("#"+this.id);b&&(i=b,k=i.find(e).each(function(){var b=a(this);"text"===b.prop("type")&&b.on("keyup",r),"number"===b.prop("type")&&b.on("keyup",r),"checkbox"===b.prop("type")&&b.on("click",r),"select-one"===b.prop("type")&&b.on("change",r),"button"===b.prop("type")&&b.on("click",n)}),i.on("click",h,o),i.on("reset",m))})},a}),DM.HousePriceCalculator=Ext.extend(DM.TimCalculatorJSON,{constructor:function(a,b){DM.HousePriceCalculator.superclass.constructor.call(this,a,b)},getPrice:function(a,b,c){var d,e,f=DM.HousePriceCalculator.dataSets;if(f&&this.dataSource&&this.dataSource.key&&(d=f[this.dataSource.key],d&&d[a]&&d[a][b]&&d[a][b][c])){if(e=d[a][b][c],"number"==typeof e&&isFinite(e))return e;if(Ext.isArray(e)){for(var g=0,h=e.length,i=0;h>g;g+=1){if("number"!=typeof e[g]||!isFinite(e[g]))return;i+=e[g]}return i/h}}}}),DM.HousePriceCalculator.dataSets={},DM.InflationCalculator=Ext.extend(DM.TimCalculatorJSON,{constructor:function(a,b){DM.InflationCalculator.superclass.constructor.call(this,a,b)},getInflationRate:function(a){var b,c=DM.InflationCalculator.dataSets||null;return c?(b=this.dataSource&&this.dataSource.key?c[this.dataSource.key]:null,b&&"undefined"!=typeof b[a]&&isFinite(b[a])?b[a]:null):null},getCompoundedRate:function(a,b){var c,d=DM.InflationCalculator.dataSets||null,e={};if(2014===a)return 1;if(!d)return null;if(c=this.dataSource&&this.dataSource.key?d[this.dataSource.key]:null,!c)return null;if("undefined"==typeof c[a]||!isFinite(c[a]))return null;b=b||2014,e[b+1]=1;for(var f=b;f>=1900;f-=1){if(!isFinite(c[f])||!isFinite(e[f+1]))return null;if(e[f]=e[f+1]*(c[f]+100)/100,e[f]=Math.round(1e6*e[f])/1e6,f===a+1)return e[f]}return null}}),DM.InflationCalculator.dataSets={},DM.TimAccordion=function(a,b){b&&Ext.apply(DM.TimAccordion.prototype,b),this.init(a)},DM.TimAccordion.prototype={cellWidth:152,maxWidth:496,interval:3e4,selCell:"h4",selCol:".col",selCellOpen:"h4.open",selPane:".pane",init:function(a){var b=this;this._el=Ext.get(a),this._el&&(this._cellCurrent=this._el.select(this.selCellOpen).item(0),this._colCurrent=this._cellCurrent.parent(this.selCol),this._paneCurrent=this._cellCurrent.next(this.selPane),this._el.select(this.selCell).on("click",b._handleClick,this,{stopEvent:!0}),this.interval&&(this._introTimer=setInterval(function(){b._openRandom.call(b)},this.interval)),this._el.select(".pane .radios").on("submit",function(a,b){a.preventDefault(),window.location=b.action}),this._el.select(".pane .radios").on("click",function(a,b){var c=a.getTarget("form",5);c&&b.value&&(c.action=b.value)},this,{delegate:"input[type=radio]"}))},_openRandom:function(){var a=Math.floor(8*Math.random()),b=this._el.select(this.selCell).item(a);b&&(b.is(".open")?this._openRandom():this._openCell(b))},_handleClick:function(a,b){clearInterval(this._introTimer),this._openCell(a.getTarget(this.selCell,0,!0))},_openCell:function(a){function b(){f._cellToOpen.addClass("open"),f._paneToOpen.addClass("open")}function c(a,b){a.setStyle({left:"auto",right:"0"}),b.setStyle({left:f.cellWidth+"px",right:"auto"})}var d,e,f=this;if(!this._wip&&(this._cellToOpen=a,this._cellToOpen&&!this._cellToOpen.hasClass("open"))){if(this._colToOpen=this._cellToOpen.parent(this.selCol),this._paneToOpen=this._cellToOpen.next(this.selPane),this._wip=!0,this._colToOpen.id===this._colCurrent.id)return f._paneToOpen.fadeIn(),void f._paneCurrent.fadeOut({callback:function(){b(),f._paneCurrent.show(),f._postAnim()}});b(),d=+/.*?col-(\d)$/.exec(this._colCurrent.id)[1],e=+/.*?col-(\d)$/.exec(this._colToOpen.id)[1],d>e?c(this._paneToOpen,this._paneCurrent):c(this._paneCurrent,this._paneToOpen),this._animate()}},_animate:function(){function a(){var a=c.cellWidth,i=c.maxWidth,j=(new Date).valueOf(),k=j>h+g?1:(j-h)/g,l=Math.floor(k*(i-a));return f+=1,f>300||1===k?(c._colCurrent.setStyle("width",a+"px"),c._colToOpen.setStyle("width",i+"px"),c._postAnim(),void clearInterval(b)):(d>a&&(d=i-l,c._colCurrent.setStyle("width",d+"px")),void(i>e&&(e=a+l,c._colToOpen.setStyle("width",e+"px"))))}var b,c=this,d=this._colCurrent.getWidth(),e=this._colToOpen.getWidth(),f=0,g=800,h=(new Date).valueOf();b=setInterval(a,8)},_postAnim:function(){this._wip=!1,this._cellCurrent.removeClass("open"),this._paneCurrent.removeClass("open"),this._colCurrent=this._colToOpen,this._cellCurrent=this._cellToOpen,this._paneCurrent=this._paneToOpen}},DM.BingSearchBox=function(a,b){Ext.apply(this,b,{market:"en-gb"}),this.init({id:a})},DM.BingSearchBox.prototype={init:function(a){function b(a){var b=d.query("input[name=sel]:checked")[0],e=d.query("input[name=searchPhrase]")[0],f=e&&e.value?e.value:"";a.preventDefault(),f&&(b&&"web"===b.value&&b.checked?window.open("http://www.bing.com/search?q="+f+"&mkt="+c.market+"&cp=1252&FORM=MOL635","_blank"):d.dom.submit())}var c=this,d=Ext.get(a.id);d&&(d.select(".bing-logo").on("click",b),d.on("submit",b))}},DM.TabbedTeamLinks=Ext.extend(DM.Tabs,{tabOffClass:["js-unactive"],tabOnClass:["js-active"],constructor:function(a){DM.Headlines.superclass.constructor.call(this,a)},_onLoadCallBack:function(){var a=Ext.fly(this._panes[0]).getHeight(),b=Ext.get(this._panes[1]),c=Ext.isIE6||Ext.isIE7?0:10;b.query("li").length>1&&(c=0),b.setHeight(a-c)}}),DM.BreakingBanner=function(a,b){Ext.apply(this,b,{market:"en-gb"}),this.init({id:a})},DM.BreakingBanner.prototype={timeout:6e3,init:function(a){function b(){for(;k.length>0;)clearTimeout(k[k.length-1]),k.pop();f()}function e(){c=j.child(".first"),d=c.child("div"),j.getWidth()-d.getWidth()<0?(l={duration:(d.getWidth()-j.getWidth())/20,callback:b},d.setXY([j.getX()+(j.getWidth()-d.getWidth()),d.getY()],l)):k.push(setTimeout(f,h.timeout))}function f(){current=j.child(".first"),current.sequenceFx(),l.anim&&l.anim.isAnimated&&l.anim.stop(),current.fadeOut({easing:"easeOut",duration:.5}),setTimeout(g,500)}function g(a){a=j.child(".first"),a.removeClass("first"),a.child("div").setLeft(0),a=null!==a.next("div.b-item")?a.next("div.b-item"):j.first("div.b-item"),a.addClass("first"),a.fadeIn({easing:"easeIn",duration:.5}),k.push(setTimeout(e,h.timeout/2))}var h=this,i=Ext.get(a.id),j=i.child(".itms").child("div"),k=[],l={};(i||j)&&k.push(setTimeout(e,h.timeout))}},DM.FancyHeadlines={init:function(b){Array.prototype.forEach||(Array.prototype.forEach=function(a,b){for(var c=0,d=this.length;d>c;++c)a.call(b||this,this[c],c,this)});for(var c=Ext.query(".fancy-hdln"),d=0;d<c.length;d++)c[d].style.display="block";var e=Ext.get(b.id),f=this;e&&(f.parent=b.id,Ext.Ajax.autoAbort=!0,f.headlineTemplate=new Ext.Template('<li class="dynArticle" data-aid="{artID}">','<div class="article hdln-cont" data-followbutton="{artChannelFollowButton} ">','<span class="social-headline" style="display:none">{socialHeadline}</span>','<a href="{artURL}"><img src="{imgURL}" width="154" height="115"></a>','<div class="hdln">','<h3 class="linkro-darkred"><a class="title" href="{artURL}">{headline}</a></h3>',"<p>{prevText}</p>","</div>",'<div class="comments">','<div class="article-icon-links-container">','<ul class="article-icon-links refresh cleared">',"</ul>"),f.headlineEndTemplate=new Ext.Template("</div>","</div>","</div>","</li>"),f.commentsTemplate=new Ext.Template("<li>",'<a class="comments-link" href="{artURL}#comments" rel="nofollow">','<span class="icon"></span><span class="linktext">','<span class="readerCommentNo bold" rel="{artID}">{comCount}</span> comment{plural}',"</span>","</a>","</li>"),f.videoTemplate=new Ext.Template("<li>",'<a class="videos-link" href="{artURL}#video" rel="nofollow">','<span class="icon"></span><span class="linktext">','<span class="bold">{videos}</span> video{plural}',"</span>","</a>","</li>"),f.shareTemplate=new Ext.Template('<li class="gr3ox">','<a class="{shortURL}| js-sl share-link" data-article-image="{articleImage}" href="#">','<span class="icon"></span> <span class="linktext">','<span class="bold">{shares}</span> share{plural}',"</span>","</a>","</li>"),f.loadingTemplate=new Ext.Template('<li class="loading"><div>Loading more articles...</div></li>'),f.newArticlesTemplate=new Ext.Template('<li class="newArticles">','<div>THERE {plural1} {count}NEWER ARTICLE{plural2} AVAILABLE - <a href="#{channel}">Reload</a></div>',"</li>"),Ext.onReady(function(){f.channel=window.location.hash?window.location.hash.slice(1):"home",selected=null==e.child("li."+f.channel)?e.child("div."+f.channel):e.child("li."+f.channel),f.selectChan(null,Ext.fly(selected).child("a").dom);var c=e.child(".menu-cont").child("ul").select("li"),d=e.child("div.inner-cont").child("div.dropmenu").select("div");c.each(function(c){a=c.child("a"),a.on("click",f.selectChan,f,{params:b})}),d.each(function(c){a=c.child("a"),a.on("click",f.selectChan,f,{params:b})}),e.child(".menu-cont").child("div").on("click",function(a){e.child(".inner-cont").child("div").setStyle("display","block"),a.stopPropagation()}),Ext.getBody().on("click",function(){e.child(".inner-cont").child("div").setStyle("display","none")});var g={run:f.checkScroll,interval:500,scope:f},h={run:f.checkNew,interval:18e4,scope:f};Ext.TaskMgr.start(g),Ext.TaskMgr.start(h)}))},checkScroll:function(){var a=Ext.get(this.parent).child("div.inner-cont").child("ul"),b=a.dom.children.length;b>1&&(Ext.get(a.dom.lastChild).hasClass("loading")||(window.pageYOffset?window.pageYOffset:document.documentElement.scrollTop)>Ext.get(a.dom.lastChild).getY()-1500&&(this.loadingTemplate.append(a,{}),this.fetchChan(this,this.channel,b,this.parent)))},checkNew:function(){var a=this;if(!Ext.Ajax.isLoading()){var b=Ext.get(this.parent).child("div.inner-cont").child("ul"),c=b.select("li.dynArticle");Ext.Ajax.request({url:"/api/latest_headlines/"+this.channel+"/0.json",timeout:2e5,success:function(d,e){var f=c.item(0).getAttribute("data-aid"),g=0,h=!1;t=Ext.decode(d.responseText),t.forEach(function(a){h||a.articleId==f?h=!0:g++}),g>0&&(n=b.select("li.newArticles"),0!=n.getCount()&&Ext.get(b.dom.firstChild).remove(),x=a.newArticlesTemplate.insertFirst(b,{count:30==g?"":g+" ",channel:a.channel,plural1:g>1?"ARE":"IS",plural2:g>1?"S":""},!0),x.child("a").on("click",a.reload))}})}},fetchChan:function(a,b,c,d,e){function f(a){return 1!=a.length?"s":""}(e||!Ext.Ajax.isLoading())&&Ext.Ajax.request({url:"/api/latest_headlines/"+b+"/"+c+".json",timeout:2e5,success:function(b,c){var e=Ext.get(d).child(".inner-cont").child("ul"),g=Ext.decode(b.responseText);e.dom.lastChild&&e.dom.removeChild(e.dom.lastChild),g.forEach(function(b){if(a.articleIds.indexOf(b.articleId)<0){a.articleIds.push(b.articleId);var c=b.headline;if(c.length>160){for(var d=159,g=!1;!g;)d++,(" "==c.charAt(d)||""==c.charAt(d))&&(g=!0);b.headline=c.substring(0,d)+"..."}var h=b.previewText;if(h.length>145){for(var d=144,g=!1;!g;)d++,(" "==h.charAt(d)||""==h.charAt(d))&&(g=!0);b.previewText=h.substring(0,d)+"..."}b.imageLinkListPuff&&(x=a.headlineTemplate.append(e,{artID:b.articleId,headline:b.headline,prevText:b.previewText,imgURL:b.imageLinkListPuff.url,artURL:b.articleURL,artChannelFollowButton:void 0!==b.followButton&&null!==b.followButton?b.followButton+" ":" ",socialHeadline:b.socialHeadline},!0),("W"==b.readerComments||"R"==b.readerComments)&&a.commentsTemplate.append(x.child(".article-icon-links"),{artURL:b.articleURL,comCount:b.readerCommentsCount,shortURL:b.shortURL,plural:f(b.readerCommentsCount)}),b.videoCount>0&&a.videoTemplate.append(x.child(".article-icon-links"),{artURL:b.articleURL,videos:b.videoCount,plural:f(b.videoInstances)}),a.shareTemplate.append(x.child(".article-icon-links"),{shortURL:b.shortURL,shares:b.shareCount,articleImage:b.articleImage.hostUrl,plural:f(b.shareCount)}),x=a.headlineEndTemplate.append(x,{},!0),Ext.isIE||Ext.get(x.child(".article-icon-links").dom.firstChild).addClass("first"))}}),Ext.isIE&&Ext.get(d).select(".article-icon-links").each(function(a){Ext.get(a.dom.firstChild).addClass("first")}),DM.has(e.id,"shareLinks")},failure:function(a,b){console.log(a),console.log(b)}})},selectChan:function(a,b){var c=Ext.get(b).parent(),d=Ext.get(this.parent).child("div.menu-cont").child("ul").select("span");if(this.channel=c.parent().dom.className,c.parent().hasClass("newArticles")||d.each(function(a){a.hasClass("link-wocc")?(a.removeClass("link-wocc").removeClass("linkro-wocc"),a.addClass("link-gr6ox").addClass("linkro-ccox"),a.next()&&a.next().addClass("divide")):a.hasClass("linkro-ccox")&&a.next()&&a.next().addClass("divide")}),Ext.get(b).hasClass("dropel")){var e=Ext.get(this.parent).child("div.menu-cont").child("ul"),f=Ext.isIE||Ext.isIE7?Ext.get(e.dom.lastChild):Ext.get(e.dom.lastElementChild),g=f.child("a"),h=Ext.get(b),i=g.dom.hash,j=h.dom.hash,k=Ext.isIE8||Ext.isIE7?g.dom.innerHTML:g.dom.text,l=Ext.isIE8||Ext.isIE7?h.dom.innerHTML:h.dom.text,m=f.dom.className,n=c.parent().dom.className;g.dom.hash=j,h.dom.hash=i,g.dom.innerHTML=l,h.dom.innerHTML=k,f.dom.className=n,c.parent().dom.className=m,Ext.get(Ext.isIE||Ext.isIE7?f.dom.lastChild:f.dom.lastElementChild).removeClass("link-gr6ox").removeClass("linkro-ccox"),Ext.get(Ext.isIE||Ext.isIE7?f.dom.lastChild:f.dom.lastElementChild).addClass("link-wocc").addClass("linkro-wocc"),f.prev().child(".divide").removeClass("divide")}else c.parent().hasClass("newArticles")||(c.removeClass("link-gr6ox").removeClass("linkro-ccox"),c.addClass("link-wocc").addClass("linkro-wocc"),c.next()&&c.next().removeClass("divide"),c.parent().prev()&&c.parent().prev().child(".divide")&&c.parent().prev().child(".divide").removeClass("divide"));for(var o=Ext.get(this.parent).child("div.inner-cont").child("ul");o.dom.hasChildNodes();)o.dom.removeChild(o.dom.lastChild);this.appendLoading(this),this.articleIds=[],this.fetchChan(this,this.channel,0,this.parent,!0)},appendLoading:function(a){var b=Ext.get(a.parent).child("div.inner-cont").child("ul");a.loadingTemplate.append(b,{})},reload:function(){location.reload()}},function(a){function b(a){return function(b,c,d){"html"===d.playerType&&a(b,c,d)}}function c(a,b,c){var d=Ext.get(c.experienceId).parent();Ext.DomHelper.append(d,e(c.experienceId))}function d(a,b,c){var d=Ext.get(f(c.experienceId));d&&d.remove()}function e(a){return{id:f(a),tag:"div",cls:"videoplayer-html5-ad-overlay",html:"Advertisement"}}function f(a){return a+"_adoverlay"}a.listen(a.VIDEO_ADVERT_STARTED,b(c)),a.listen(a.VIDEO_ADVERT_COMPLETED,b(d))}(DM.pageEvents),function(a,b){function c(a,c,d){function e(a,c){b.fly(a).animate({right:{to:c}},.45)}function f(a,c){b.fly(i).removeClass(a),b.fly(i).addClass(c)}function g(a,b,c){e(a,b),c&&f("wocc","womlcc")}function h(a,b,c){e(a,b),c&&f("womlcc","wocc")}var i=b.get(this).child("span");"mouseover"==a.type?g(i,d.onPos,d.updateStyleOnHover):h(i,-d.styleRight,d.updateStyleOnHover)}function d(a,d,e){var f=b.get(a).child("span");null!==f&&(this.styleRight=/(\d+)/.exec(f.getStyle("right"))[0],b.get(a).on({mouseover:{fn:c,onPos:this._params.params.onPos,styleRight:this.styleRight,updateStyleOnHover:this._params.params.updateStyleOnHover},mouseout:{fn:c,onPos:this._params.params.onPos,styleRight:this.styleRight,updateStyleOnHover:this._params.params.updateStyleOnHover}}))}function e(){var a=$(this.el.dom),c=a.is(".x-wide"),e=this.el.query("a.videoLink");c?this._params.params.updateStyleOnHover=!1:this._params.params.nested||a.vOverlay(),b.each(e,d,this),this.events&&this.on("changeEnd",f)}function f(a){var b=a.cloned;d(b)}a.ChannelCarouselModule=b.extend(a.Carousel,{activePage:1,styleRight:-90,constructor:function(c,d){if(this._params={params:d,id:c},a.ChannelCarouselModule.superclass.constructor.call(this,c),this.container=b.get(c),this.panels=this.container.child(".rotator-panels"),0!==this.panels.dom.children.length){this.pages=this.container.child(".rotator-pages"),this._setActivePageClass(1),b.onReady(e,this,{single:!0});var f=this.panels.child("li");this.itemWidth=f.getWidth()+1*/(\d+)/.exec(f.getStyle("margin-right"))[0],this._initEvents()}},_setActivePageClass:function(a){var b=this._params.params.activeClass||"selected";this.pages&&this.pages.select("li").each(function(c,d){c.child("a").dom.getAttribute("data-page")==a?c.child("a").addClass(b):c.child("a").removeClass(b)},this)},_initEvents:function(){this.pages&&this.pages.on("click",function(a){a.preventDefault();var b=a.target.getAttribute("data-page");b>0&&this.scrollTo(1*b)},this)},_move:function(a){var b=1,c=parseFloat(this._params.params.pageCount);b=a.getTarget(".js-move-next")?this.activePage>=c?1:this.activePage+1:this.activePage<=1?c:this.activePage-1,this.scrollTo(b)},scrollTo:function(a){this._requestImages&&this._requestImages(),this.activePage=a,this._setActivePageClass(a);var c=this.itemWidth*this._params.params.pageSize*(a-1)*-1;this.panels.stopFx(!1),b.fly(this.panels).animate({left:{to:c}},1.2)}})}(DM,Ext),function(a,b){function c(){var a=this._o;$("#"+a.id).vOverlay()}a.MostWatched={init:function(a){b.get(a.id)&&(this._o=a,b.onReady(c,this,{single:!0}))}}}(DM,Ext),$.fn.vOverlay=function(a){return this.each(function(){$(this).on("click",".videoLink",function(b){var c,d,e,f=$(this),g=f.data("modal"),h=PageCriteria.geo||"";b.preventDefault(),g||(c=f.data("target").split(" "),d=c[0]+"&geo="+h,c.shift(),e=c.join(" "),g=$('<div class="ez-modal video-lightbox-videojs-container" aria-hidden="true" role="dialog"></div>').appendTo("body").ezmodal({ajaxUrl:d+" "+e}),f.data("modal",g),g.on("ez-modal-after-open",function(b){var c=$.extend({},a,{nested:!0,pageCount:Math.floor(g.find(".videoLink").length/3).toString(),pageSize:3,updateStyleOnHover:!0,onPos:0}),d=g.find(".video_carousel_container");d.attr("id",getId("video_carousel_container"));new DM.ChannelCarouselModule(d.attr("id"),c)}),g.on("ez-modal-after-open",function(a){var b,c=$(window).outerHeight(!0),d=g.outerHeight(!0),e=(c-d)/2;14>e&&(e=14),b=$(window).scrollTop()+e,g.css("position","absolute"),g.css("top",b+"px")}),g.on("ez-modal-after-load",function(a){a.ui.modal.trigger({type:"ez-modal-article-load",lightbox:a.ui.modal})}),g.on("ez-modal-article-load",function(a){var b,c=a.lightbox.find(".article-box > .article");c.attr("id")||c.attr("id",getId("overlay_article")),$("#share-overlay .close").click(),b=c.attr("id"),DM.ShareLinks.init({id:b,params:{zIndex:10000002,isChannel:!0}})}),g.on("ez-modal-close",function(a){$("#share-overlay .close").click()})),g.ezmodal("open")})})},$(document).on("ez-modal-after-load",function(a){var b=a.ui.modal;b.length&&setTimeout(function(){DM.setupMolVideoJsPlayers.forEachPlayer(b.get(0),function(a){this.on("playlist-play",function(a){var c=a.index;b.find(".videoLink").eq(c).each(function(){var a=$(this).attr("data-target-article");a&&b.find(".article-box").load(a,function(a,c,d){b.trigger({type:"ez-modal-article-load",lightbox:b})})})})})},0)}),function(a,b){function c(){var a=this._params;a.params.channelShortName=b.get(a.id).dom.className.split(" ")[1],$("#"+a.id).vOverlay(a.params)}a.VideoPreview2=b.extend(b.util.Observable,{constructor:function(a,d){b.get(a)&&(this._params={params:d,id:a},b.onReady(c,this))}})}(DM,Ext),function(a,b){function c(a,c,d){var e="mouseover"==a.type?0:110;b.fly(this.getElementsByTagName("span")[0]).animate({top:{to:e}},.45)}function d(a,d,e){b.get(a).on({mouseover:c,mouseout:c})}function e(){var a=this.el.query("li"),c=this._params.params;b.each(a,d),$(this.el.dom).vOverlay(c),this.events&&this.on("changeEnd",f)}function f(a){var b=a.cloned;d(b)}a.VideoCarousel2=b.extend(a.Carousel,{step:176,constructor:function(c,d){this._params={params:d},a.RolloverCarousel.superclass.constructor.call(this,c),b.onReady(e,this,{single:!0})}})}(DM,Ext),function(a){function b(b){var c=a(b);return{videoId:b.getAttribute("data-videoid"),source:b.getAttribute("data-source"),title:c.children(".video-item-title").html()||c.children("span").text(),img:c.children("img").attr("src"),sponsored:b.getAttribute("data-sponsored"),url:b.getAttribute("data-target"),href:b.href,channel:b.getAttribute("data-channel"),freewheelId:b.getAttribute("data-freewheelid")}}function c(a){return a+Math.random().toString().substring(7).slice(0,5)}function d(b){var c=a(b);return{videoId:b.getAttribute("data-videoid"),source:b.getAttribute("data-source"),freewheelId:b.getAttribute("data-freewheelid"),title:c.find(".video-item-title").text(),img:c.find("img").attr("src"),href:b.href}}function e(){var a=this.defaultContainer;a.setWidth(620),a.setHeight(380),this.show()}function f(){setTimeout(function(){brightcove.createExperiences()},200)}function g(a){DM.BC.playerDestroyed(a)}a.fn.videoOverlayPlayer=function(d,e){return this.each(function(){function e(b,c){"flash"==b.playerType&&(!a("#"+b.experienceId+"_title").length&&i.title&&a('<div id="'+b.experienceId+'_title" class="videoplayer-title-overlay">'+i.title+"</div>").appendTo(c),!a("#"+b.experienceId+"_image").length&&i.img&&a('<img id= "'+b.experienceId+'_image" src="'+i.img+'" class="videoplayer-image-overlay" style="top: 0px" />').appendTo(c))}function f(a){return function(b,c,d){d.experienceId===h&&a(b,c,d)}}function g(a){return DM.BC.createVideoPlayer({experienceId:h,playerId:k,playerKey:l,mediaId:i.videoId,title:i.title,source:i.source,isPlaylist:n,trackingType:o,channelShortName:p,continuePlayList:a,rsi:r,linkBaseURL:i.href,sponsored:i.sponsored,videoChannel:i.channel,freewheelId:i.freewheelId,image:i.img})}var h,i,j,k,l,m=a(this),n=!0,o=d.trackingType,p=d.channelShortName,q=a(this),r=d.rsi;DM.pageEvents.listen(DM.pageEvents.VIDEO_CONTENT_COMPLETED,f(function(b,c,d){if(i=j.shift()){var f=a("#"+h).parent();m.find(".article-box").load(i.url+" .article-box > *",function(a,b,c){m.trigger({type:"ez-modal-article-load",lightbox:m})}),f.replaceWith(g(!0)),DM.FreeWheel.loadPlugin(function(){}),e(d,f),brightcove.createExperiences()}})),DM.pageEvents.listen(DM.pageEvents.VIDEO_PLAYER_READY,f(function(b,c,d){var f=a("#"+h).parent();e(d,f)})),DM.pageEvents.listen(DM.pageEvents.VIDEO_STREAM_STARTED,f(function(b,c,d){a("#"+h+"_title").remove(),a("#"+h+"_image").remove()})),DM.pageEvents.listen(DM.pageEvents.VIDEO_CONTENT_COMPLETED,f(function(b,c,d){if(d.sponsored){i=d;var f=a("#"+d.experienceId).parent();e(d,f)}})),a(this).on("click",".videoLink",function(e,f){var n=a(this);for(h&&DM.BC.playerDestroyed(h),h=c("video_channel_carousel_"),i=b(this),e.preventDefault(),d.videoPlayerConfigMap?"false"===d.videoPlayerConfigMap[i.videoId]?(k=d.player,l=d.playerKey):(k=d.nonEmbeddablePlayerIdent,l=d.nonEmbeddablePlayerKey):(k=d.player,l=d.playerKey),j=q.find(".videoLink").map(function(){return b(this)}).get();j.length>0&&j.shift().videoId!==i.videoId;);setTimeout(function(){brightcove.createExperiences()},200),m.find(".video-box").empty().append(g(!1)),DM.FreeWheel.loadPlugin(function(){}),f&&f.loaded?e.stopPropagation():m.find(".article-box").load(n.data("target")+" .article-box > *",function(a,b,c){m.trigger({type:"ez-modal-article-load",lightbox:m})})}),m.on("ez-modal-after-close",function(b){DM.BC.playerDestroyed(h),a(document.getElementById(h)).remove()})})},a.fn.videoOverlayCarousel=function(d){return this.each(function(){a(this).on("click",".videoLink",function(e){var f,g=a(this),h=!0,i=d.trackingType,j=d.channelShortName,k=b(this);e.preventDefault(),DM.pageEvents.fireEvent(DM.pageEvents.VIDEO_CAROUSEL_CLICKED,{pageMetadata:DM.getPageMetadata(),playlist:h,trackingType:i,channelShortName:j,videoId:k.videoId}),f=g.data("modal"),f||(f=a('<div class="ez-modal video-lightbox-container" aria-hidden="true" role="dialog"></div>').appendTo("body").ezmodal({ajaxUrl:g.data("target")}),g.data("modal",f),f.one("ez-modal-after-open",function(a){a.ui.modal.videoOverlayPlayer(d)}),f.on("ez-modal-after-open",function(b){var e=a.extend({},d,{nested:!0,pageCount:Math.floor(f.find(".videoLink").length/3).toString(),pageSize:3,trackingType:"carousel_triple",updateStyleOnHover:!0,onPos:0}),g=f.find(".video_carousel_container");g.attr("id",c("video_carousel_container"));var h=(new DM.VideoChannelCarouselModule(g.attr("id"),e),b.ui.modal.find("[data-videoid="+k.videoId+"]"));h.length?h.trigger("click",{loaded:!0}):b.ui.modal.find(".video-box").html('<div class="article">This video is not available anymore. Try clicking another video</div>')}),f.on("ez-modal-after-open",function(b){var c,d=a(window).outerHeight(!0),e=f.outerHeight(!0),g=(d-e)/2;
14>g&&(g=14),c=a(window).scrollTop()+g,f.css("position","absolute"),f.css("top",c+"px")}),f.on("ez-modal-after-load",function(a){a.ui.modal.trigger({type:"ez-modal-article-load",lightbox:a.ui.modal})}),f.on("ez-modal-article-load",function(b){var d,e=b.lightbox.find(".article-box > .article");e.attr("id")||e.attr("id",c("overlay_article")),a("#share-overlay .close").click(),d=e.attr("id"),DM.ShareLinks.init({id:d,params:{zIndex:10000002,isChannel:!0}})}),f.on("ez-modal-close",function(b){a("#share-overlay .close").click()})),f.ezmodal("open")})})},a.fn.videoExtraWide=function(b){return this.each(function(){function e(b,c){"flash"==b&&(a("#"+h+"_title").length||a('<div id="'+h+'_title" class="videoplayer-title-overlay">'+i.title+"</div>").appendTo(c),a("#"+h+"_image").length||a('<img id= "'+h+'_image" src="'+i.img+'" class="videoplayer-image-overlay" style="top: 15px" />').appendTo(c))}function f(a){return function(b,c,d){d.experienceId===h&&a(b,c,d)}}function g(a){return DM.BC.createVideoPlayer({experienceId:h,playerId:j,playerKey:k,mediaId:i.videoId,title:i.title,source:i.source,isPlaylist:l,trackingType:m,channelShortName:n,continuePlayList:a,rsi:o,linkBaseURL:i.href,videoChannel:i.channel,freewheelId:i.freewheelId})}var h,i,j,k,l=!1,m=b.trackingType,n=b.channelShortName,o=(a(this),b.rsi);DM.pageEvents.listen(DM.pageEvents.VIDEO_PLAYER_READY,f(function(b,c,d){var f=a("#"+h).parent();e(d.playerType,f)})),DM.pageEvents.listen(DM.pageEvents.VIDEO_STREAM_STARTED,f(function(b,c,d){a("#"+h+"_title").remove(),a("#"+h+"_image").remove()}));var p=a(this).find(".videoplayer-large");a(this).on("click",".videoLink",function(a){h&&DM.BC.playerDestroyed(h),a.preventDefault(),i=d(this),h=c("video_channel_carousel_"),"false"===b.videoPlayerConfigMap[i.videoId]?(j=b.player,k=b.playerKey):(j=b.nonEmbeddablePlayerIdent,k=b.nonEmbeddablePlayerKey),setTimeout(function(){brightcove.createExperiences()},200),p.html(g(!1)),DM.pageEvents.fireEvent(DM.pageEvents.VIDEO_CAROUSEL_CLICKED,{pageMetadata:DM.getPageMetadata(),playlist:!1,trackingType:m,channelShortName:n,videoId:i.videoId})})})},a.fn.videoOverlay=function(d){var h=this.find(".videoLink").map(function(){return b(this)}).get();return this.each(function(){function i(a,b){"flash"==a&&(n.title&&(Ext.get(l+"_title")||Ext.DomHelper.append(b,'<div id="'+l+'_title" class="videoplayer-title-overlay">'+n.title+"</div>")),Ext.get(l+"_image")||Ext.DomHelper.append(b,'<img id= "'+l+'_image" src="'+n.img+'" class="videoplayer-image-overlay" style="top: 15px" />'))}function j(a){return function(b,c,d){d.experienceId===l&&a(b,c,d)}}function k(a){return DM.BC.createVideoPlayer({experienceId:l,playerId:o,playerKey:p,mediaId:n.videoId,title:n.title,source:n.source,isPlaylist:q,trackingType:r,channelShortName:s,continuePlayList:a,rsi:t,videoChannel:n.channel,freewheelId:n.freewheelId})}var l,m,n,o,p,q=!0,r=d.trackingType,s=d.channelShortName,t=d.rsi;a(this).on("click",".videoLink",function(a){var i=DM.Lightbox.getInstance();for(a.preventDefault(),l=c("video_channel_carousel_"),n=b(this),d.videoPlayerConfigMap?"false"===d.videoPlayerConfigMap[n.videoId]?(o=d.player,p=d.playerKey):(o=d.nonEmbeddablePlayerIdent,p=d.nonEmbeddablePlayerKey):(o=d.player,p=d.playerKey),m=h.slice(0);m.length>0&&m.shift().videoId!==n.videoId;);DM.pageEvents.fireEvent(DM.pageEvents.VIDEO_CAROUSEL_CLICKED,{pageMetadata:DM.getPageMetadata(),playlist:q,trackingType:r,channelShortName:s,videoId:n.videoId}),i.overlay.on("click",i.close,i),i.on("open",e,i,{preventDefault:!0,single:!0}),i.on("afterOpen",f,i,{preventDefault:!0,single:!0}),i.on("close",function(){g(l)},i,{preventDefault:!0,single:!0});var j=['<div style="width:636px; height:380px;">','<a href="#" class="f-12 close" style="float:right; margin:0 0 5px 0; width:14px; background:url(\'http://f.dailymail.co.uk/i/furniture/misc/close.gif\') right center no-repeat;">&nbsp;</a>',k(!1),"</div>"].join("");i.defaultContainer.dom.innerHTML=j,Ext.get(i.defaultContainer.select("a.close").elements[0]).on("click",i.close,i,{preventDefault:!0}),i.open(),i.fireEvent("open")}),DM.pageEvents.listen(DM.pageEvents.VIDEO_CONTENT_COMPLETED,j(function(a,b,c){if(n=m.shift()){var d=Ext.get(l).parent();d.update(k(!0)),i(c.playerType,d),brightcove.createExperiences()}})),DM.pageEvents.listen(DM.pageEvents.VIDEO_PLAYER_READY,j(function(a,b,c){var d=Ext.get(l).parent();i(c.playerType,d)})),DM.pageEvents.listen(DM.pageEvents.VIDEO_STREAM_STARTED,j(function(a,b,c){var d=Ext.get(l+"_title");d&&d.remove();var e=Ext.get(l+"_image");e&&e.remove()}))})}}(jQuery),DM.SCExternalLinks=function(a,b){$(document.getElementById(a)).find("a.js-tl").on("click",function(){DM.pageEvents.fireEvent(DM.pageEvents.PAGE_EXTERNAL_LINK_CLICKED,{pageMetadata:DM.getPageMetadata(),target:this,value:b.value})})},function(a,b){function c(a,c,d){var e="mouseover"==a.type?0:110;b.fly(this.getElementsByTagName("span")[0]).animate({top:{to:e}},.45)}function d(a,d,e){b.get(a).on({mouseover:c,mouseout:c})}function e(){var a=this.el.query("li"),c=this._params.params;b.each(a,d),"carousel"===c.overlayType?$(this.el.dom).videoOverlayCarousel(c):$(this.el.dom).videoOverlay(c),this.events&&this.on("changeEnd",f)}function f(a){var b=a.cloned;d(b)}a.VideoCarousel=b.extend(a.Carousel,{step:176,constructor:function(c,d){this._params={params:d},a.RolloverCarousel.superclass.constructor.call(this,c),b.onReady(e,this,{single:!0})}})}(DM,Ext),function(a,b){function c(a,c,d){function e(a,c){b.fly(a).animate({right:{to:c}},.45)}function f(a,c){b.fly(i).removeClass(a),b.fly(i).addClass(c)}function g(a,b,c){e(a,b),c&&f("wocc","womlcc")}function h(a,b,c){e(a,b),c&&f("womlcc","wocc")}var i=b.get(this).child("span");"mouseover"==a.type?g(i,d.onPos,d.updateStyleOnHover):h(i,-d.styleRight,d.updateStyleOnHover)}function d(a,d,e){var f=b.get(a).child("span");null!==f&&(this.styleRight=/(\d+)/.exec(f.getStyle("right"))[0],b.get(a).on({mouseover:{fn:c,onPos:this._params.params.onPos,styleRight:this.styleRight,updateStyleOnHover:this._params.params.updateStyleOnHover},mouseout:{fn:c,onPos:this._params.params.onPos,styleRight:this.styleRight,updateStyleOnHover:this._params.params.updateStyleOnHover}}))}function e(){var a,c=$(this.el.dom),e=c.is(".x-wide"),g=this.el.query("a.videoLink");e&&(this._params.params.updateStyleOnHover=!1),b.each(g,d,this),a=this._params.params,e?c.videoExtraWide(a):"carousel"===a.overlayType?a.nested||c.videoOverlayCarousel(a):c.videoOverlay(a),this.events&&this.on("changeEnd",f)}function f(a){var b=a.cloned;d(b)}a.VideoChannelCarouselModule=b.extend(a.Carousel,{activePage:1,styleRight:-90,constructor:function(c,d){if(this._params={params:d,id:c},a.VideoChannelCarouselModule.superclass.constructor.call(this,c),this.container=b.get(c),this.panels=this.container.child(".rotator-panels"),0!==this.panels.dom.children.length){this.pages=this.container.child(".rotator-pages"),this._setActivePageClass(1),b.onReady(e,this,{single:!0});var f=this.panels.child("li");this.itemWidth=f.getWidth()+1*/(\d+)/.exec(f.getStyle("margin-right"))[0],this._initEvents()}},_setActivePageClass:function(a){var b=this._params.params.activeClass||"selected";this.pages&&this.pages.select("li").each(function(c,d){c.child("a").dom.getAttribute("data-page")==a?c.child("a").addClass(b):c.child("a").removeClass(b)},this)},_initEvents:function(){this.pages&&this.pages.on("click",function(a){a.preventDefault();var b=a.target.getAttribute("data-page");b>0&&this.scrollTo(1*b)},this)},_move:function(a){var b=1,c=parseFloat(this._params.params.pageCount);b=a.getTarget(".js-move-next")?this.activePage>=c?1:this.activePage+1:this.activePage<=1?c:this.activePage-1,this.scrollTo(b)},scrollTo:function(a){this._requestImages&&this._requestImages(),this.activePage=a,this._setActivePageClass(a);var c=this.itemWidth*this._params.params.pageSize*(a-1)*-1;this.panels.stopFx(!1),b.fly(this.panels).animate({left:{to:c}},1.2)}})}(DM,Ext),function(a,b){function c(){var a=this._o;b.get(b.get(a.id).select(a.params.selector?a.params.selector:".itemlist").elements[0]).select("li");a.params.channelShortName=b.get(a.id).dom.className.split(" ")[1],"carousel"===a.params.overlayType?$("#"+a.id).videoOverlayCarousel(a.params):$("#"+a.id).videoOverlay(a.params)}a.MostWatchedVideoLightbox={init:function(a){b.get(a.id)&&(this._o=a,b.onReady(c,this,{single:!0}))}}}(DM,Ext),function(a,b){function c(){var a=this._params;a.params.channelShortName=b.get(a.id).dom.className.split(" ")[1],$("#"+a.id).videoOverlayCarousel(a.params)}a.VideoPreview=b.extend(b.util.Observable,{constructor:function(a,d){b.get(a)&&(this._params={params:d,id:a},b.onReady(c,this))}})}(DM,Ext),function(a){function b(){function b(b,c,f){var g=a.get(this).child("span");"mouseover"==b.type?d(g,f.onPos):e(g,-f.styleRight)}function c(b,c){a.fly(b).animate({right:{to:c}},.45)}function d(a,b){c(a,b)}function e(a,b){c(a,b)}function f(a){var c=a.child("span");null!==c&&(this.styleRight=/(\d+)/.exec(c.getStyle("right"))[0],a.on({mouseover:{fn:b,onPos:0,styleRight:this.styleRight},mouseout:{fn:b,onPos:0,styleRight:this.styleRight}}))}a.select(".videoplayer-preview a").each(function(a){f(a)})}a.onReady(b,this,{single:!0})}(Ext),function(a,b){a.NextStory={init:function(a){var c=b.get(a.id);c||ruturn,this.el=c,b.EventManager.on(window,"scroll",this.toggle,this),b.EventManager.on(window,"resize",this.toggle,this)},toggle:function(){var a=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,c=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;this.showAt=this.showAt||b.get(b.query("div[class=shareArticles]")[0]),this.container=this.container||b.get("content"),b.getBody().getScroll().top+c>=this.showAt.getY()&&c>=this.el.getHeight()&&this.container.getX()>=this.el.getWidth()+15&&a>=this.el.getHeight()&&"none"==b.getBody().getStyle("background-image")?(this.el.addClass("show"),this.el.setLeft(this.container.getWidth()+this.container.getX()+15)):this.el.removeClass("show")}}}(DM,Ext),function(a,b){"function"==typeof define&&define.amd?define(["jquery"],b):a.DM.InfiniteList=b($)}(this,function(a){var b={init:function(b){var c=a("#"+b.id),d=this;if(this.$scrollableContent=a(".scrollable-content"),0===this.$scrollableContent.length&&(this.$scrollableContent=a(window)),c){d.params=b.params||{},d.page="undefined"==typeof b.params.from?1:b.params.from,d.loadAt=c.find("a[class=more]").eq(0),d.doDots=d.params.truncate&&"function"==typeof a.fn.dotdotdot,d.onAfterAppend=d.params.onAfterAppend;var e=function(){d.load()};d.$scrollableContent.on("scroll.infinite-scroll",e),d.ids=[],c.find("[data-id]").each(function(b,c){d.ids.push(a(c).attr("data-id"))}),d.doDots&&c.find(d.params.truncate).dotdotdot()}},load:function(){var b=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,c=this;!c.isLoading&&c.$scrollableContent.scrollTop()+b>=c.loadAt.offset().top&&(c.loadAt.addClass("show"),a.ajax({url:c.params.url+"&page="+c.page,cache:!1,beforeSend:function(){c.isLoading=!0},complete:function(){c.isLoading=!1},success:function(b,d){var e=a("<div></div>").addClass("just loaded").html(b).insertBefore(c.loadAt);e.find("[data-id]").each(function(b,d){var e=a(d).attr("data-id");c.ids.indexOf(e)>-1?a(d).remove():c.ids.push(e)}),c.onAfterAppend&&c.onAfterAppend(e.get(0)),c.doDots&&e.find(c.params.truncate).dotdotdot(),setTimeout(function(){e.removeClass("just")},100),c.loadAt.removeClass("show"),c.page+=1,c.page>=c.params.total&&c.$scrollableContent.off("scroll.infinite-scroll")},error:function(){}}))}};return a.fn.infiniteList=function(a){return this.each(function(){b.init({id:this.id,params:a})})},b}),function(a){var b=!1;a(document).one("bottom-page ready",function(){if(!b){b=!0;var c=a(".articles_by_day_wrapper");c.length&&c.find(".checkbox input").change(function(){"all"==a(this).attr("id")?c.find(".checkbox input").prop("checked",a(this).prop("checked")):a(this).prop("checked")||c.find("#all").prop("checked",!1),c.find(".checkbox input").each(function(){var b=a(this).attr("value"),d=""===b?"li":"li."+b;a(this).prop("checked")?c.find(d).show():c.find(d).hide()})})}})}(jQuery),(window.jQuery||window.Zepto)&&!function(a){a.fn.Swipe=function(b){return this.each(function(){a(this).data("Swipe",new Swipe(a(this)[0],b))})}}(window.jQuery||window.Zepto),function(a,b){"use strict";function c(){if(!d.READY){d.event.determineEventTypes();for(var a in d.gestures)d.gestures.hasOwnProperty(a)&&d.detection.register(d.gestures[a]);d.event.onTouch(d.DOCUMENT,d.EVENT_MOVE,d.detection.detect),d.event.onTouch(d.DOCUMENT,d.EVENT_END,d.detection.detect),d.READY=!0}}var d=function(a,b){return new d.Instance(a,b||{})};d.defaults={stop_browser_behavior:{userSelect:"none",touchAction:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},d.HAS_POINTEREVENTS=a.navigator.pointerEnabled||a.navigator.msPointerEnabled,d.HAS_TOUCHEVENTS="ontouchstart"in a,d.MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android|silk/i,d.NO_MOUSEEVENTS=d.HAS_TOUCHEVENTS&&a.navigator.userAgent.match(d.MOBILE_REGEX),d.EVENT_TYPES={},d.DIRECTION_DOWN="down",d.DIRECTION_LEFT="left",d.DIRECTION_UP="up",d.DIRECTION_RIGHT="right",d.POINTER_MOUSE="mouse",d.POINTER_TOUCH="touch",d.POINTER_PEN="pen",d.EVENT_START="start",d.EVENT_MOVE="move",d.EVENT_END="end",d.DOCUMENT=a.document,d.plugins=d.plugins||{},d.gestures=d.gestures||{},d.READY=!1,d.Instance=function(a,b){var e=this;return c(),this.element=a,this.enabled=!0,this.options=d.utils.extend(d.utils.extend({},d.defaults),b||{}),this.options.stop_browser_behavior&&d.utils.stopDefaultBrowserBehavior(this.element,this.options.stop_browser_behavior),d.event.onTouch(a,d.EVENT_START,function(a){e.enabled&&d.detection.startDetect(e,a)}),this},d.Instance.prototype={on:function(a,b){for(var c=a.split(" "),d=0;d<c.length;d++)this.element.addEventListener(c[d],b,!1);return this},off:function(a,b){for(var c=a.split(" "),d=0;d<c.length;d++)this.element.removeEventListener(c[d],b,!1);return this},trigger:function(a,b){b||(b={});var c=d.DOCUMENT.createEvent("Event");c.initEvent(a,!0,!0),c.gesture=b;var e=this.element;return d.utils.hasParent(b.target,e)&&(e=b.target),e.dispatchEvent(c),this},enable:function(a){return this.enabled=a,this}};var e=null,f=!1,g=!1;d.event={bindDom:function(a,b,c){for(var d=b.split(" "),e=0;e<d.length;e++)a.addEventListener(d[e],c,!1)},onTouch:function(a,b,c){var h=this;this.bindDom(a,d.EVENT_TYPES[b],function(i){var j=i.type.toLowerCase();if(!j.match(/mouse/)||!g){j.match(/touch/)||j.match(/pointerdown/)||j.match(/mouse/)&&1===i.which?f=!0:j.match(/mouse/)&&1!==i.which&&(f=!1),j.match(/touch|pointer/)&&(g=!0);var k=0;f&&(d.HAS_POINTEREVENTS&&b!=d.EVENT_END?k=d.PointerEvent.updatePointer(b,i):j.match(/touch/)?k=i.touches.length:g||(k=j.match(/up/)?0:1),k>0&&b==d.EVENT_END?b=d.EVENT_MOVE:k||(b=d.EVENT_END),(k||null===e)&&(e=i),c.call(d.detection,h.collectEventData(a,b,h.getTouchList(e,b),i)),d.HAS_POINTEREVENTS&&b==d.EVENT_END&&(k=d.PointerEvent.updatePointer(b,i))),k||(e=null,f=!1,g=!1,d.PointerEvent.reset())}})},determineEventTypes:function(){var a;a=d.HAS_POINTEREVENTS?d.PointerEvent.getEvents():d.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],d.EVENT_TYPES[d.EVENT_START]=a[0],d.EVENT_TYPES[d.EVENT_MOVE]=a[1],d.EVENT_TYPES[d.EVENT_END]=a[2]},getTouchList:function(a){return d.HAS_POINTEREVENTS?d.PointerEvent.getTouchList():a.touches?a.touches:(a.indentifier=1,[a])},collectEventData:function(a,b,c,e){var f=d.POINTER_TOUCH;return(e.type.match(/mouse/)||d.PointerEvent.matchType(d.POINTER_MOUSE,e))&&(f=d.POINTER_MOUSE),{center:d.utils.getCenter(c),timeStamp:(new Date).getTime(),target:e.target,touches:c,eventType:b,pointerType:f,srcEvent:e,preventDefault:function(){this.srcEvent.preventManipulation&&this.srcEvent.preventManipulation(),this.srcEvent.preventDefault&&this.srcEvent.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return d.detection.stopDetect()}}}},d.PointerEvent={pointers:{},getTouchList:function(){var a=this,b=[];return Object.keys(a.pointers).sort().forEach(function(c){b.push(a.pointers[c])}),b},updatePointer:function(a,b){return a==d.EVENT_END?this.pointers={}:(b.identifier=b.pointerId,this.pointers[b.pointerId]=b),Object.keys(this.pointers).length},matchType:function(a,b){if(!b.pointerType)return!1;var c={};return c[d.POINTER_MOUSE]=b.pointerType==b.MSPOINTER_TYPE_MOUSE||b.pointerType==d.POINTER_MOUSE,c[d.POINTER_TOUCH]=b.pointerType==b.MSPOINTER_TYPE_TOUCH||b.pointerType==d.POINTER_TOUCH,c[d.POINTER_PEN]=b.pointerType==b.MSPOINTER_TYPE_PEN||b.pointerType==d.POINTER_PEN,c[a]},getEvents:function(){return["pointerdown MSPointerDown","pointermove MSPointerMove","pointerup pointercancel MSPointerUp MSPointerCancel"]},reset:function(){this.pointers={}}},d.utils={extend:function(a,c,d){for(var e in c)a[e]!==b&&d||(a[e]=c[e]);return a},hasParent:function(a,b){for(;a;){if(a==b)return!0;a=a.parentNode}return!1},getCenter:function(a){for(var b,c=[],d=[],e=0,f=a.length;f>e;e++)b=a[e],c.push("undefined"!=typeof b.clientX?b.clientX:b.pageX),d.push("undefined"!=typeof b.clientY?b.clientY:b.pageY);return{pageX:(Math.min.apply(Math,c)+Math.max.apply(Math,c))/2,pageY:(Math.min.apply(Math,d)+Math.max.apply(Math,d))/2}},getVelocity:function(a,b,c){return{x:Math.abs(b/a)||0,y:Math.abs(c/a)||0}},getAngle:function(a,b){var c=b.pageY-a.pageY,d=b.pageX-a.pageX;return 180*Math.atan2(c,d)/Math.PI},getDirection:function(a,b){var c=Math.abs(a.pageX-b.pageX),e=Math.abs(a.pageY-b.pageY);return c>=e?a.pageX-b.pageX>0?d.DIRECTION_LEFT:d.DIRECTION_RIGHT:a.pageY-b.pageY>0?d.DIRECTION_UP:d.DIRECTION_DOWN},getDistance:function(a,b){var c=b.pageX-a.pageX,d=b.pageY-a.pageY;return Math.sqrt(c*c+d*d)},getScale:function(a,b){return a.length>=2&&b.length>=2?this.getDistance(b[0],b[1])/this.getDistance(a[0],a[1]):1},getRotation:function(a,b){return a.length>=2&&b.length>=2?this.getAngle(b[1],b[0])-this.getAngle(a[1],a[0]):0},isVertical:function(a){return a==d.DIRECTION_UP||a==d.DIRECTION_DOWN},stopDefaultBrowserBehavior:function(a,b){var c,d=["webkit","khtml","moz","Moz","ms","o",""];if(b&&a.style){for(var e=0;e<d.length;e++)for(var f in b)b.hasOwnProperty(f)&&(c=f,d[e]&&(c=d[e]+c.substring(0,1).toUpperCase()+c.substring(1)),a.style[c]=b[f]);"none"==b.userSelect&&(a.onselectstart=function(){return!1}),"none"==b.userDrag&&(a.ondragstart=function(){return!1})}}},d.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(a,b){this.stopped=!1,this.current={inst:a,startEvent:d.utils.extend({},b),lastEvent:!1,name:""},this.detect(b)},detect:function(a){if(this.current&&!this.stopped){a=this.extendEventData(a);for(var b=this.current.inst.options,c=0,e=this.gestures.length;e>c;c++){var f=this.gestures[c];if(!this.stopped&&b[f.name]!==!1&&f.handler.call(f,a,this.current.inst)===!1){this.stopDetect();break}}return this.current&&(this.current.lastEvent=a),a.eventType==d.EVENT_END&&!a.touches.length-1&&this.stopDetect(),a}},stopDetect:function(){this.previous=d.utils.extend({},this.current),this.current=null,this.stopped=!0},extendEventData:function(a){var b=this.current.startEvent;if(b&&(a.touches.length!=b.touches.length||a.touches===b.touches)){b.touches=[];for(var c=0,e=a.touches.length;e>c;c++)b.touches.push(d.utils.extend({},a.touches[c]))}var f,g,h=a.timeStamp-b.timeStamp,i=a.center.pageX-b.center.pageX,j=a.center.pageY-b.center.pageY,k=d.utils.getVelocity(h,i,j);return"end"===a.eventType?(f=this.current.lastEvent&&this.current.lastEvent.interimAngle,g=this.current.lastEvent&&this.current.lastEvent.interimDirection):(f=this.current.lastEvent&&d.utils.getAngle(this.current.lastEvent.center,a.center),g=this.current.lastEvent&&d.utils.getDirection(this.current.lastEvent.center,a.center)),d.utils.extend(a,{deltaTime:h,deltaX:i,deltaY:j,velocityX:k.x,velocityY:k.y,distance:d.utils.getDistance(b.center,a.center),angle:d.utils.getAngle(b.center,a.center),interimAngle:f,direction:d.utils.getDirection(b.center,a.center),interimDirection:g,scale:d.utils.getScale(b.touches,a.touches),rotation:d.utils.getRotation(b.touches,a.touches),startEvent:b}),a},register:function(a){var c=a.defaults||{};return c[a.name]===b&&(c[a.name]=!0),d.utils.extend(d.defaults,c,!0),a.index=a.index||1e3,this.gestures.push(a),this.gestures.sort(function(a,b){return a.index<b.index?-1:a.index>b.index?1:0}),this.gestures}},d.gestures.Drag={name:"drag",index:50,defaults:{drag_min_distance:10,correct_for_drag_min_distance:!0,drag_max_touches:1,drag_block_horizontal:!1,drag_block_vertical:!1,drag_lock_to_axis:!1,drag_lock_min_distance:25},triggered:!1,handler:function(a,b){if(d.detection.current.name!=this.name&&this.triggered)return b.trigger(this.name+"end",a),void(this.triggered=!1);if(!(b.options.drag_max_touches>0&&a.touches.length>b.options.drag_max_touches))switch(a.eventType){case d.EVENT_START:this.triggered=!1;break;case d.EVENT_MOVE:if(a.distance<b.options.drag_min_distance&&d.detection.current.name!=this.name)return;if(d.detection.current.name!=this.name&&(d.detection.current.name=this.name,b.options.correct_for_drag_min_distance&&a.distance>0)){var c=Math.abs(b.options.drag_min_distance/a.distance);d.detection.current.startEvent.center.pageX+=a.deltaX*c,d.detection.current.startEvent.center.pageY+=a.deltaY*c,a=d.detection.extendEventData(a)}(d.detection.current.lastEvent.drag_locked_to_axis||b.options.drag_lock_to_axis&&b.options.drag_lock_min_distance<=a.distance)&&(a.drag_locked_to_axis=!0);var e=d.detection.current.lastEvent.direction;a.drag_locked_to_axis&&e!==a.direction&&(d.utils.isVertical(e)?a.direction=a.deltaY<0?d.DIRECTION_UP:d.DIRECTION_DOWN:a.direction=a.deltaX<0?d.DIRECTION_LEFT:d.DIRECTION_RIGHT),this.triggered||(b.trigger(this.name+"start",a),this.triggered=!0),b.trigger(this.name,a),b.trigger(this.name+a.direction,a),(b.options.drag_block_vertical&&d.utils.isVertical(a.direction)||b.options.drag_block_horizontal&&!d.utils.isVertical(a.direction))&&a.preventDefault();break;case d.EVENT_END:this.triggered&&b.trigger(this.name+"end",a),this.triggered=!1}}},d.gestures.Hold={name:"hold",index:10,defaults:{hold_timeout:500,hold_threshold:1},timer:null,handler:function(a,b){switch(a.eventType){case d.EVENT_START:clearTimeout(this.timer),d.detection.current.name=this.name,this.timer=setTimeout(function(){"hold"==d.detection.current.name&&b.trigger("hold",a)},b.options.hold_timeout);break;case d.EVENT_MOVE:a.distance>b.options.hold_threshold&&clearTimeout(this.timer);break;case d.EVENT_END:clearTimeout(this.timer)}}},d.gestures.Release={name:"release",index:1/0,handler:function(a,b){a.eventType==d.EVENT_END&&b.trigger(this.name,a)}},d.gestures.Swipe={name:"swipe",index:40,defaults:{swipe_min_touches:1,swipe_max_touches:1,swipe_velocity:.7},handler:function(a,b){if(a.eventType==d.EVENT_END){if(b.options.swipe_max_touches>0&&a.touches.length<b.options.swipe_min_touches&&a.touches.length>b.options.swipe_max_touches)return;(a.velocityX>b.options.swipe_velocity||a.velocityY>b.options.swipe_velocity)&&(b.trigger(this.name,a),b.trigger(this.name+a.direction,a))}}},d.gestures.Tap={name:"tap",index:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,tap_always:!0,doubletap_distance:20,doubletap_interval:300},handler:function(a,b){if(a.eventType==d.EVENT_END&&"touchcancel"!=a.srcEvent.type){var c=d.detection.previous,e=!1;if(a.deltaTime>b.options.tap_max_touchtime||a.distance>b.options.tap_max_distance)return;c&&"tap"==c.name&&a.timeStamp-c.lastEvent.timeStamp<b.options.doubletap_interval&&a.distance<b.options.doubletap_distance&&(b.trigger("doubletap",a),e=!0),(!e||b.options.tap_always)&&(d.detection.current.name="tap",b.trigger(d.detection.current.name,a))}}},d.gestures.Touch={name:"touch",index:-(1/0),defaults:{prevent_default:!1,prevent_mouseevents:!1},handler:function(a,b){return b.options.prevent_mouseevents&&a.pointerType==d.POINTER_MOUSE?void a.stopDetect():(b.options.prevent_default&&a.preventDefault(),void(a.eventType==d.EVENT_START&&b.trigger(this.name,a)))}},d.gestures.Transform={name:"transform",index:45,defaults:{transform_min_scale:.01,transform_min_rotation:1,transform_always_block:!1},triggered:!1,handler:function(a,b){if(d.detection.current.name!=this.name&&this.triggered)return b.trigger(this.name+"end",a),void(this.triggered=!1);if(!(a.touches.length<2))switch(b.options.transform_always_block&&a.preventDefault(),a.eventType){case d.EVENT_START:this.triggered=!1;break;case d.EVENT_MOVE:var c=Math.abs(1-a.scale),e=Math.abs(a.rotation);if(c<b.options.transform_min_scale&&e<b.options.transform_min_rotation)return;d.detection.current.name=this.name,this.triggered||(b.trigger(this.name+"start",a),this.triggered=!0),b.trigger(this.name,a),e>b.options.transform_min_rotation&&b.trigger("rotate",a),c>b.options.transform_min_scale&&(b.trigger("pinch",a),b.trigger("pinch"+(a.scale<1?"in":"out"),a));break;case d.EVENT_END:this.triggered&&b.trigger(this.name+"end",a),this.triggered=!1}}},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return d}):"object"==typeof module&&"object"==typeof module.exports?module.exports=d:a.Hammer=d}(this),function(a,b){"use strict";function c(a,c){a.event.bindDom=function(a,d,e){c(a).on(d,function(a){var c=a.originalEvent||a;c.pageX===b&&(c.pageX=a.pageX,c.pageY=a.pageY),c.target||(c.target=a.target),c.which===b&&(c.which=c.button),c.preventDefault||(c.preventDefault=a.preventDefault),c.stopPropagation||(c.stopPropagation=a.stopPropagation),e.call(this,c)})},a.Instance.prototype.on=function(a,b){return c(this.element).on(a,b)},a.Instance.prototype.off=function(a,b){return c(this.element).off(a,b)},a.Instance.prototype.trigger=function(a,b){var d=c(this.element);return d.has(b.target).length&&(d=c(b.target)),d.trigger({type:a,gesture:b})},c.fn.hammer=function(b){return this.each(function(){var d=c(this),e=d.data("hammer");e?e&&b&&a.utils.extend(e.options,b):d.data("hammer",new a(this,b||{}))})}}"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(["hammer","jquery"],c):c(a.Hammer,a.jQuery||a.Zepto)}(this),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a:a(jQuery)}(function(a){function b(b){var g=b||window.event,h=i.call(arguments,1),j=0,l=0,m=0,n=0,o=0,p=0;if(b=a.event.fix(g),b.type="mousewheel","detail"in g&&(m=-1*g.detail),"wheelDelta"in g&&(m=g.wheelDelta),"wheelDeltaY"in g&&(m=g.wheelDeltaY),"wheelDeltaX"in g&&(l=-1*g.wheelDeltaX),"axis"in g&&g.axis===g.HORIZONTAL_AXIS&&(l=-1*m,m=0),j=0===m?l:m,"deltaY"in g&&(m=-1*g.deltaY,j=m),"deltaX"in g&&(l=g.deltaX,0===m&&(j=-1*l)),0!==m||0!==l){if(1===g.deltaMode){var q=a.data(this,"mousewheel-line-height");j*=q,m*=q,l*=q}else if(2===g.deltaMode){var r=a.data(this,"mousewheel-page-height");j*=r,m*=r,l*=r}if(n=Math.max(Math.abs(m),Math.abs(l)),(!f||f>n)&&(f=n,d(g,n)&&(f/=40)),d(g,n)&&(j/=40,l/=40,m/=40),j=Math[j>=1?"floor":"ceil"](j/f),l=Math[l>=1?"floor":"ceil"](l/f),m=Math[m>=1?"floor":"ceil"](m/f),k.settings.normalizeOffset&&this.getBoundingClientRect){var s=this.getBoundingClientRect();o=b.clientX-s.left,p=b.clientY-s.top}return b.deltaX=l,b.deltaY=m,b.deltaFactor=f,b.offsetX=o,b.offsetY=p,b.deltaMode=0,h.unshift(b,j,l,m),e&&clearTimeout(e),e=setTimeout(c,200),(a.event.dispatch||a.event.handle).apply(this,h)}}function c(){f=null}function d(a,b){return k.settings.adjustOldDeltas&&"mousewheel"===a.type&&b%120===0}var e,f,g=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],h="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],i=Array.prototype.slice;if(a.event.fixHooks)for(var j=g.length;j;)a.event.fixHooks[g[--j]]=a.event.mouseHooks;var k=a.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var c=h.length;c;)this.addEventListener(h[--c],b,!1);else this.onmousewheel=b;a.data(this,"mousewheel-line-height",k.getLineHeight(this)),a.data(this,"mousewheel-page-height",k.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var c=h.length;c;)this.removeEventListener(h[--c],b,!1);else this.onmousewheel=null;a.removeData(this,"mousewheel-line-height"),a.removeData(this,"mousewheel-page-height")},getLineHeight:function(b){var c=a(b),d=c["offsetParent"in a.fn?"offsetParent":"parent"]();return d.length||(d=a("body")),parseInt(d.css("fontSize"),10)||parseInt(c.css("fontSize"),10)||16},getPageHeight:function(b){return a(b).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})}),function(a){"use strict";function b(a){return a.length?[a.pop()]:[]}function c(a){var b=[],c=!1;a=a||function(a){return a};var d=function(){var d;for(b=a(b),c=!1;d=b.shift();)d()};return{empty:function(){b=[]},push:function(a){b.push(a),c||(c=!0,window.requestAnimationFrame(d))}}}function d(a){return a.charAt(0).toUpperCase()+a.slice(1)}function e(a,b){var c=a[b];if(c)return c;for(var e=0;e<p.length;e++)if(c=a[p[e]+d(b)])return c}function f(a,b,c){a[b]=c;for(var e=0;e<p.length;e++)a[p[e]+d(b)]=c}function g(a){var b=/matrix\(([^)]*)\)/,c=a.match(b);if(c){for(var d=c[1].split(","),e=[],f=0;6>f;f++)e.push(parseFloat(d[f]));return e}return[1,0,0,1,0,0]}function h(a){return"matrix("+a.join(", ")+")"}function i(){return[1,0,0,1,0,0]}function j(a){var b=window.getComputedStyle(a),c=e(b,"transform");return g(c)}function k(a,b){var c=h(b);f(a.style,"transform",c)}function l(a,b){return a*(1-b)}function m(a,b){var c=new Array(6);return c[0]=a[0]*b[0]+a[2]*b[1]+0*a[4],c[2]=a[0]*b[2]+a[2]*b[3]+0*a[4],c[4]=a[0]*b[4]+a[2]*b[5]+1*a[4],c[1]=a[1]*b[0]+a[3]*b[1]+0*a[5],c[3]=a[1]*b[2]+a[3]*b[3]+0*a[5],c[5]=a[1]*b[4]+a[3]*b[5]+1*a[5],c}function n(a,b){var c=new Array(2);return c[0]=b[q]*a[0]+b[r]*a[1]+b[u],c[1]=b[t]*a[1]+b[s]*a[0]+b[v],c}function o(a,b,c){function d(a,b,c){switch(a.toUpperCase()){case"N":return b[1]<=0&&c[1]<=f;case"S":return b[1]>=0&&c[1]>=f;case"W":return b[0]<=0&&c[0]<=g;case"E":return b[0]>=0&&c[0]>=g}}function e(a){var b=n([0,0],a),c=n([g,f],a);return d("W",b,c)&&(a[u]=g-(c[0]-b[0])),d("E",b,c)&&(a[u]=0),d("N",b,c)&&(a[v]=f-(c[1]-b[1])),d("S",b,c)&&(a[v]=0),a}var f=a.clientHeight,g=a.clientWidth,h=j(a),o=m(h,i());return b=(b||4)/h[q],c=(c||1)/h[q],{getZoom:function(){return o[q]},cannotPan:function(a){for(var b=n([0,0],o),c=n([g,f],o),e=a.split(""),h=[],i=0;i<e.length;i++)d(e[i],b,c)&&h.push(e[i]);return h.join("")},zoom:function(d,f,g){var j;c>=g?g=c:g>=b&&(g=b),j=i(),j[q]=g,j[t]=g,j[u]=l(d,g),j[v]=l(f,g),o=e(m(h,j)),k(a,o)},pan:function(b,c){var d=i();d[u]=b,d[v]=c,o=e(m(d,h)),k(a,o)},reset:function(){o=i(),k(a,o)}}}var p=["Moz","Webkit","O","ms"],q=0,r=1,s=2,t=3,u=4,v=5;!function(){for(var a=0,b=["webkit","moz"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b,c){var d=(new Date).getTime(),e=Math.max(0,16-(d-a)),f=window.setTimeout(function(){b(d+e)},e);return a=d+e,f}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}();var w="pinchzoom-container",x="pinchzoom-on",y="pinchzoom-item";a.fn.zoomable=function(d){if("string"==typeof d){var e=Array.prototype.slice.call(arguments,1);return this.triggerHandler("zoomable-"+d,e),this}return this.each(function(){var e=a(this);e.addClass(w+" "+x),e.children().wrapAll('<div class="'+y+'"></div>');var f,g=e.children().get(0),h=a.extend({maxscale:4,minscale:1},d),i=c(b),j={end:function(a){f=void 0},reset:function(){f=o(g,h.maxscale,h.minscale),f.reset(),e.trigger("zoomable-after-zoom",[f]),f=void 0},zoom:function(a,b,c){
var d;f||(f=o(g,h.maxscale,h.minscale)),c||(c=[e.width()/2,e.height()/2]),d=function(a,c,d,f){return function(){f.zoom(d[0],d[1],b),e.trigger("zoomable-after-zoom",[f])}}(this,a,c,f),i.push(d)},pan:function(a,b,c){var d;f||(f=o(g,h.maxscale,h.minscale)),d=function(a,d,f){return function(){f.pan(b,c),e.trigger("zoomable-after-pan",[f])}}(this,a,f),i.push(d)}};e.on("zoomable-reset",j.reset),e.on("zoomable-end",j.end),e.on("zoomable-zoom",j.zoom),e.on("zoomable-pan",j.pan)})},a.fn.pinchzoom=function(b){return this.each(function(c,d){var e,f,g=a(this),h=a.extend({disabled:!1},b),i=new Hammer(g.get(0)),j=function(b){var c=a(window).scrollTop(),d=a(window).scrollLeft(),e=g.offset(),f=b.gesture.center.pageX+d-e.left,h=b.gesture.center.pageY+c-e.top;return[f,h]},k={end:function(a){f=void 0,e=void 0,g.triggerHandler("zoomable-end")},reset:function(){g.triggerHandler("zoomable-reset")},zoom:function(a){"drag"!==f&&(f="pinch",e=j.call(this,a),g.triggerHandler("zoomable-zoom",[a.gesture.scale,e]))},pan:function(a){if("pinch"!==f){f="drag";var b=j.call(this,a);e||(e=j.call(this,a)),g.triggerHandler("zoomable-pan",[b[0]-e[0],b[1]-e[1]]),a.stopPropagation(),a.gesture.stopPropagation()}},enable:function(a){g.addClass(x),i.on("dragend",k.end),i.on("doubletap",k.reset),i.on("pinch",k.zoom),i.on("drag",k.pan)},disable:function(a){g.removeClass(x),i.off("dragend"),i.off("doubletap"),i.off("pinch"),i.off("drag")}};g.on("pinchzoom-reset",k.reset),g.on("pinchzoom-enable",k.enable),g.on("pinchzoom-disable",k.disable),h.disabled||k.enable()})},a.fn.mousezoom=function(b){var c=a.extend({disabled:!1,container:document},b);return this.each(function(){var b,d=a(this),e=function(a){var b=d.offset(),c=a.pageX-b.left,e=a.pageY-b.top;return[c,e]},f=!1,g={end:function(a){f=!1,b=void 0,d.triggerHandler("zoomable-end")},reset:function(){d.triggerHandler("zoomable-reset")},start:function(a){b=e.call(this,a),f=!0},zoom:function(a){b=e.call(this,a);var c;return a.deltaY>0?c=1.1:a.deltaY<0&&(c=.9),d.triggerHandler("zoomable-zoom",[c,b]),d.triggerHandler("zoomable-end"),!1},move:function(a){if(f){var c=e.call(this,a);d.triggerHandler("zoomable-pan",[c[0]-b[0],c[1]-b[1]])}},enable:function(b){d.addClass(x),d.on("dblclick",g.reset),d.on("mousedown",g.start),a(c.container).on("mouseup",g.end),d.on("mousemove",g.move),d.on("mousewheel",g.zoom)},disable:function(b){d.removeClass(x),d.off("dblclick",g.reset),d.off("mousedown",g.start),a(c.container).off("mouseup",g.end),d.off("mousemove",g.move),d.off("mousewheel",g.zoom)}};d.on("pinchzoom-reset",g.reset),d.on("pinchzoom-enable",g.enable),d.on("pinchzoom-disable",g.disable),c.disabled||g.enable()})}}(jQuery),function(a,b){"function"==typeof define&&define.amd?define("mol-gallery/GalleryTracking",["mol-page-events/page-events"],function(c){return b(a,c)}):a.GalleryTracking=b(a,DM.pageEvents)}(this,function(a,b){function c(a,b,c,d){setTimeout(function(){b.apply(a,c)},d)}function d(a){trac&&trac.slideEvent&&c(trac,trac.slideEvent,[a],l)}function e(){return"AU"===PageCriteria.geo}function f(a,f,h,i){n.track=g,c(b,b.fireEvent,[b.GALLERY_OPENED,b.getPageMetadata({contentType:f,galleryTitle:j(f,i,"gallery start"),galleryId:k(f,a),threadId:h})],l),e()&&d(f+"-"+h)}function g(a,f,g,h){c(b,b.fireEvent,[b.GALLERY_IMAGE_VIEWED,b.getPageMetadata({contentType:f,galleryTitle:j(f,h,"gallery view"),galleryId:k(f,a),threadId:g})],l),e()&&d(f+"-"+g)}function h(a,b,c){var f="advert_"+a;return m[f]?(c?m[f].bounces++:m[f].views++,void(e()&&d("advert-"+a))):void(m[f]={views:1,bounces:0})}function i(){b.fireEvent(b.GALLERY_ADVERT_STATS,{type:"gallery-advert",stats:JSON.stringify(m)}),m={},c(b,b.fireEvent,[b.PAGE_RENDER_STARTED,b.getPageMetadata()]),e()&&d("image-i-0")}function j(a,b,c){return[a,b,c].join(" ")}function k(a,b){return[a,b].join(" ")}var l=1e3,m={},n={init:function(){this.track=f},track:f,trackGalleryAdvert:h,trackGalleryEnd:i};return n}),function(a,b){"function"==typeof define&&define.amd?define("mol-gallery/ArticleGallery",["jquery","mol-mobileutils/mobileutils","mol-gallery/GalleryTracking","Swipe","mol-videoplayer/video"],function(c,d,e,f,g){return b(a,c,d,e,f,g)}):a.ArticleGallery=b(a,a.jQuery,a.MobileUtils,a.GalleryTracking,a.Swipe,a.BC)}(this,function(a,b,c,d,e,f){var g=function(a){function f(a){ya=new Date}function g(a){ya=void 0}function h(){sa=e(ra[0],{continuous:!0,startSlide:1,callback:function(a,c){var d=b(".slide",c).data("show-callback");Ha[d]&&Ha[d](a),b(c).trigger("pinchzoom-enable"),b(c).next().trigger("pinchzoom-reset").trigger("pinchzoom-disable"),b(c).prev().trigger("pinchzoom-reset").trigger("pinchzoom-disable"),setTimeout(function(){DM.setupMolVideoJsPlayers&&DM.setupMolVideoJsPlayers.forEachPlayer(ra[0],function(){this.pause()})},0)}}),ua=0;var a=b(".slide",ra)[1],c=b(a).data("show-callback");b(".slide-container",ra).not(".terminator").eq(0).trigger("pinchzoom-enable").next().trigger("pinchzoom-reset").trigger("pinchzoom-disable"),Ha[c]&&Ha[c](1)}function i(){ta.on("mousemove mouseup mousedown click",k),b(".video-obj",ra).on("mousemove mouseup mousedown click",k),b(".slide-container.image",ra).on("click",u).on("mousedown",f),b(window).on("keyup",m),b(".navigation-arrow.left",ra).on("touchend click",q),b(".navigation-arrow.right",ra).on("touchend click",o),b(".mobile-gallery-bar .close-button",ra).on("touchend click",w),b(".slide-container.advert",ra).on("click touchstart touchend touchmove",l),b(window).on("resize",s)}function j(){ta.off("mousemove mouseup mousedown click",k),b(".video-obj",ra).off("mousemove mouseup mousedown click",k),b(window).off("keyup",m),b(".slide-container.image",ra).off("click",u).off("mousedown",f),b(".navigation-arrow.left",ra).off("touchend click",q),b(".navigation-arrow.right",ra).off("touchend click",o),b(".slide-container.advert",ra).off("click touchstart touchend touchmove",l),b(".mobile-gallery-bar .close-button",ra).off("touchend click",w),b(".adLinkLabel a",ra).off(),b(window).off("resize",s)}function k(a){a.stopPropagation()}function l(a){T()&&(a.stopPropagation(),a.preventDefault())}function m(a){switch(a.keyCode){case Aa:w(a);break;case Ba:Ga||q(a);break;case Ca:Ga||o(a)}}function n(a){ua=a,Z()||b(window).trigger("slideshow-terminator")}function o(a){p()||(sa.enableTouch(),r(a),ra.hasClass("last")||sa.next())}function p(){return Ja?!0:(Ja=!0,setTimeout(function(){Ja=!1},400),!1)}function q(a){p()||(sa.enableTouch(),r(a),ra.hasClass("first")||sa.prev())}function r(a){a.preventDefault(),b(a.srcElement).hasClass("navigation-arrow")&&v()}function s(){ra.removeClass("resized"),sa.enableTouch(),na(),ea(),t()}function t(){c.isLandscape()?ra.removeClass("portrait").addClass("landscape"):ra.addClass("portrait").removeClass("landscape")}function u(){return ya&&new Date-ya>400?void g():(g(),void ra.toggleClass("no-furniture"))}function v(){ra.removeClass("no-furniture")}function w(a){p()||(a.preventDefault(),a.stopPropagation(),b(window).trigger("slideshow-terminator"))}function x(a){pa.html(a)}function y(a){qa.toggleClass("empty",!a),b(".text",qa).html(a)}function z(a){function c(a){var c=b('.slide-container.advert[data-position="'+a+'"]',ra);return oa(c)?xa||b(".slide-container.terminator",ra).first():b(c)}_.each(a,function(d,e){var f=b("<div>"),g=$(d,e,a.length);f.html(g).addClass("slide-container image").css("visibility","hidden"),c(e).after(f),xa=f}),ea(),fa()}function A(){b(".slide-container.image",ra).unbind().remove()}function B(a){b(a).closest(".interstitial").attr(Da,"true")}function C(a,b,c){ua=b,d.trackGalleryAdvert(c,a,ra.hasClass("locked")),U()&&V(),"true"!==a.attr(Da)&&(S(1.5),AdImpression.registerImpression(a[0],B)),ra.removeClass("image").addClass("interstitial"),x('<span class="advert">Advertisement</span>'),y(),ca(b)}function D(a){var c=document.getElementById(a.slot.molAd.parentId);if(c){var d=b(c).closest(".slide-container");if(d.length)if(a.isEmpty){var e=d.width(),f=d.parent();d.remove(),f.children().each(function(a,b){b.setAttribute("data-index",a),b.style.left=e*-a+"px"})}else F(Number(c.parentNode.getAttribute("data-advert-index")),c)}}function E(){var a=I();if(b(document.body).hasClass("molads_interstitial_off"))a.parent().remove();else if(window.useGpt){var c=window.adsRenderer;c&&(c.addLoadListener(D),a.each(function(a,b){c.requestDelayedAdvert(b.id)}))}else{var d=[];a.each(function(a,c){var e=b(c);M(e)||d.push(e)});for(var e=0;e<d.length;e++)d[e].parent().remove()}}function F(c,d){var e=b(d);window.useGpt&&(H({data:d}),b(window).bind("resize",d,H)),Ha["advert_"+c]=function(a){C(e,a,c)},P(e),e.attr("data-show-callback","advert_"+c),e.attr(Da,"false");var f=e.parent().attr(Ea);(void 0===f||""===f)&&e.parent().attr(Ea,a.images.length)}function G(a,b){return b.id&&"google_ads_iframe_"===b.id.slice(0,18)&&"0"!==b.width}function H(a){function c(){var a=b(d),c=a.closest(".advert"),f=a.find("iframe").filter(G).get(0);return f&&(f.width=c.width(),f.height=c.height()),Ia[e]=0}var d=a.data,e=d.id;Ia[e]&&clearTimeout(Ia[e]),Ia[e]=a.type?setTimeout(c,200):c()}function I(){return b(".slide-container.advert .slide")}function J(){var a=I();window.useGpt&&(a=a.filter("[data-show-callback]")),a.each(F)}function K(){I().css("visibility","visible")}function L(){I().css("visibility","hidden")}function M(a){if(oa(b("[data-impression-url]",AdIntegrator.getAdContainer(a[0]||a))))return!1;if("none"==a.css("display"))return!1;var c=a.children(),d=!1;return c.each(function(a,b){_.contains(Fa,b.tagName.toLowerCase())&&-1===(b.className||"").indexOf("adLinkLabel")&&(d=!0)}),d}function N(){ra.addClass("interacting"),Q(),W()}function O(){ra.removeClass("interacting"),R(),V();var a=new CustomEvent("adDeactivate",{bubbles:!0,cancelable:!0});ta.get(0).dispatchEvent(a)}function P(a){AdBehaviour.isClickThrough(a)||b(".adLinkLabel a",a).on("click",N);var c=b("[data-button-text]",a).data("button-text");oa(c)||b(".adLinkLabel a",a).text(c)}function Q(){var a=da();a.eq(ua-1).attr("data-bounce","next"),a.eq(ua+1).attr("data-bounce","prev"),ra.addClass("locked")}function R(){var a=da();a.eq(ua-1).removeAttr("data-bounce"),a.eq(ua+1).removeAttr("data-bounce"),ra.removeClass("locked")}function S(a){Q(),slideBlockTimeout=setTimeout(function(){T()||R()},1e3*a)}function T(){return b(mobileGallerySlider).hasClass("interacting")}function U(){var a=da();return!(b(a[ua-1]).attr("data-bounce")||b(a[ua+1]).attr("data-bounce"))}function V(){b(".ad-guard",ra).show(),b(".adLinkLabel",ra).show()}function W(){b(".ad-guard",ra).hide(),b(".adLinkLabel",ra).hide()}function X(){var a=da();a.each(function(a,c){var d=b(c),e=a>=ua-1&&ua+2>=a;d.filter(".image").css("visibility",e?"visible":"hidden"),e&&DM.loadDeferredImgs.load(c)})}function Y(a,b,c,e){ua=a;var f=b.attr("data-track-pos"),g=b.attr("id")||"i-preview";Z()||(ra.removeClass("interstitial").addClass("image"),x("<span>"+(c+1)+" of "+e+"</span>"),y(b.attr("data-caption")),ca(a),X(a),d.track(c,b.attr("data-content-type"),g,f))}function Z(){var a=b(da()[ua]).attr("data-bounce");return a?("next"===a?sa.next():sa.prev(),!0):!1}function $(a,b,c){var d=ba(a),e="image_"+b;return d.attr("data-show-callback",e),Ha[e]=function(a){Y(a,d,b,c)},d[0]}function aa(a){var b=document.createElement("div");return b.className=a[0].className,b.id=a[0].id+"-clone",DM.later("videoplayer-ready",function(){var c=a.children()[0],d=c&&DM.setupMolVideoJsPlayers.clone(c,{plugins:{tracking:{trackingType:"image_gallery"}}});d&&(d.id=c.id+"-clone",b.appendChild(d),DM.setupMolVideoJsPlayers(b))}),b}function ba(a){var c,d,e,f=b(a),g="undefined"!=typeof f.attr("data-video-opts"),h=f.hasClass("vjs-video-container");return g?(e="videoimage",c=f.clone(),c.attr("id",c.attr("id")+"-clone"),c.children().each(function(a,c){c=b(c),c.hasClass("js-video")?c.html("").removeClass("playing"):c.replaceWith("")}),c.video({objId:"#"+c.attr("id"),trackingType:"image_gallery"})):h?(c=b(aa(f)),e="videoimage"):(e="image",d=f.parent().siblings(".imageCaption").html(),d="undefined"==typeof d?f.attr("alt"):d,c=f.clone()),c.addClass("slide").attr("data-content-type",e).attr("data-caption",d)}function ca(){var a=da();0>=ua||ua>=a.size()||(ra.removeClass("first").removeClass("last"),a.eq(ua-1).hasClass("terminator")&&ra.addClass("first"),a.eq(ua+1).hasClass("terminator")&&ra.addClass("last"))}function da(){return b(".swipe-wrap",ra).children()}function ea(){sa&&sa.enableTouch();var a=b(".slide-container",ra).not(".advert").not(".terminator"),c=b(window).height(),d=b(window).width();a.each(function(a,e){ga(b(".slide",e)[0],c,d)}),ra.addClass("resized")}function fa(){b(".slide-container",ra).not(".advert").not(".terminator").filter(function(){return!b(this).find(".video-obj,.vjs-video-container").length}).zoomable({maxscale:4,minscale:1}).pinchzoom({disabled:!0}).on("zoomable-after-zoom",function(a,b){1===b.getZoom()?sa.enableTouch():sa.disableTouch()})}function ga(a,b,c){setTimeout(function(){ia(a),ha(a,b,c)},10)}function ha(a,c,d){var e=b(a);if("undefined"==typeof e.attr("data-video-opts")){var f=Math.min(c/a.offsetHeight,d/a.offsetWidth);e.is(".vjs-video-container")&&d>c&&(f*=.78),_.each(["-webkit-transform","-moz-transition","-o-transform","transform"],function(c){b(a).css(c,"scale("+f+")")})}}function ia(a){var c=-(a.offsetHeight/2)+"px",d=-(a.offsetWidth/2)+"px";b(a).css("marginTop",c),b(a).css("marginLeft",d)}function ja(){c.isAndroidStock()||document.querySelector("meta[name=viewport]")||(za=document.createElement("meta"),za.setAttribute("name","viewport"),za.setAttribute("content","user-scalable=0"),document.head.appendChild(za))}function ka(){!c.isAndroidStock()&&za&&(za.setAttribute("content","user-scalable=1"),setTimeout(function(){za.parentNode.removeChild(za)},0))}function la(){return DM.setupMolVideoJsPlayers&&DM.setupMolVideoJsPlayers.destroy(ra[0]),T()?O():(c.enableScroll(),j(),b(window).off("slideshow-terminator",ta.close),d.trackGalleryEnd(),L(),A(),v(),c.isIPhone()&&clearInterval(wa),b("body").removeClass("mobile-gallery-open"),window.scrollTo(0,va),ta.hide(),sa.kill(),ta.trigger("close"),ka(),void setTimeout(function(){DM.loadDeferredImgs.imagesCache.resetCache(),DM.loadDeferredImgs.resume()},0))}function ma(){E(),J(),z(a.images),K(),DM.loadDeferredImgs.imagesCache.resetCache(),DM.loadDeferredImgs.pause()}function na(){window.scrollTo(0,1)}function oa(a){return!a||0===a.length}var pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,Aa=27,Ba=37,Ca=39,Da="data-advert-already-viewed",Ea="data-position",Fa=["div","span","img","iframe"],Ga=!1,Ha={terminator:n},Ia={},Ja=!1;this.show=function(){ja(),va=b(window).scrollTop(),c.isIPhone()&&(wa=setInterval(na,500)),ta=a.target.show(),ra=b(".swipe",ta),pa=b(".top-bar .title",ra),qa=b(".caption-bar",ra),ma(),b(window).on("slideshow-terminator",la),c.disableScroll(),t(),d.init(),h(),i(),b("body").addClass("mobile-gallery-open"),ta.trigger("open")}};return g}),function(a,b){"function"==typeof define&&define.amd?define("mol-gallery/ArticlePage",["jquery","mol-mobileutils/mobileutils","mol-gallery/ArticleGallery","Swipe"],function(c,d,e,f){return b(a,c,!0,d,e,f)}):a.ArticlePage=b(a,a.jQuery,!1,a.MobileUtils,a.ArticleGallery,Swipe)}(this,function(a,b,c,d,e,f){function g(a){function e(){var a,c,e=this;l(e),a=b(e),c=a.parent(".image-wrap"),a.after('<div class="overlay-icon mobile-gallery"><div class="mobile-gallery-icon"></div><span>+'+g.length+"</span></div>");var j=a.next(".mobile-gallery").width()||0;if(!d.isMobile()){var k=document.getElementById("share-pictures");if(k&&e.id){var m=b(k).clone().insertAfter(e);if(m.attr("id","share-pictures-"+ ++i),a.height()<370){var n=b("#share-pictures-"+i+" .share-pictures-links");n.addClass("image-share-horizontal").css("right",j+20+"px"),a.width()<390&&n.addClass("image-share-hide")}DMS.ImageShare.initOnImage(m,c)}}c.on("click",function(){h(e,g)}).css("cursor","pointer"),f||c.css("cursor","pointer")}var f=a.mobile||c;q=f?200:300,r=f?150:300,p="undefined"==typeof a?{}:a,f&&p.allowVideos&&(s="img[id^=i-],div[id^=v-]"),k();var g=b(s).filter(m),i=0;g.filter(function(){return"IMG"==this.tagName?(0==b(this).parent("div.image-wrap").length&&b(this).wrap('<div class="image-wrap">'),!0):!1}).each(e)}function h(a,c){if(!(d.getZoom()>1)){var f=new e({target:b("#mobileGalleryModal"),images:i(a,c)});b(".mobile-gallery-instruction").hide(),f.show()}}function i(a,c){var d=[],e=j(a,c),f=c.length;c.each(function(a,c){b(c).attr("data-track-pos",a)});for(var g=e,h=e+f;h>g;g++)d.push(c[g%f]);return d}function j(a,b){for(var c=0;c<b.length;c++)if(a.src==b[c].src)return c}function k(){b("body").toggleClass("zoomed",d.getZoom()>1)}function l(a){var c=b(a).closest("a");c.length>0&&(c.removeClass("lightboxPopupLink"),c.parent().is("font")&&c.parent().css("font-size",""))}function m(){if("IMG"!==this.tagName)return!0;var a=this,b=a.height||parseInt(a.getAttribute("height"),10),c=a.width||parseInt(a.getAttribute("width"),10);return b>r+70||r+70>b&&b>=r&&c>q+90}function n(){return document.addEventListener?navigator.userAgent.match(/Opera Mini/)?!1:!0:!1}function o(){b(".image-share-url-lightbox").hide()}var p,q,r,s="img[id^=i-]",t=function(){n()&&this.bind()};return t.prototype.bind=function(){d.isIDevice()?a.addEventListener("DOMContentLoaded",g):b(document).ready(g),b(a).on("touchend",function(){d.onTouchEnd(k)})},b.fn.gallery=function(a){g(a)},b(function(){b(".image-wrap").on("mouseenter",o)}),t}),function(a,b){a.DM.SmartBanner={init:function(a){this.opts=a}},a.DM.onDocReady(function(){"function"==typeof define&&define.amd?define(["jquery","mol-dm/DM","mol-page-events/page-events"],function(c){b(c,DM,events,a.MobileUtils)}):a.DM.SmartBanner=b($,a.DM,a.DM.pageEvents,a.MobileUtils,a.s_adblock,a.DM.SmartBanner.opts)})}(this,function(a,b,c,d,e,f){function g(){var a=/(Windows *[a-zA-Z]*) ([^; )]+)/i,b=a.exec(navigator.userAgent);return b&&"windows nt"===b[1].toLowerCase()&&parseFloat(b[2])>=6.4}function h(a,b){l&&a.windowsPhone?b(a.windowsPhone):j&&a.ios?b(a.ios):k&&a.android?b(a.android):n&&a.windows10?b(a.windows10):m&&a.desktop&&b(a.desktop)}var i="http://i.mol.im/i/",j=d.isIDevice(),k=d.isAndroid(),l=d.isWindows(),m=!!b.guntherBase,n=g(),o=a(window),p=a("body"),q=function(){function b(b){b&&a(function(){h(b,function(a){k?c("andriod",a.storeUrl):j&&c("ios",a.storeUrl)})})}function c(b,c){var d=i+"mobileimages/"+function(){switch(b){case"andriod":return"b-play.png";case"ios":return"b-appstore.png"}}(),f=a('<div><a href="'+c+'"rel="noskim"><img style="width:100%"src="'+d+'"/></a></div>');e(f),p.append(f),p.addClass("smart-banner")}function d(b){var c=320,d=50,e=a(document).width(),f=e/c,g=Math.floor(d*f);b.height(g),a(".scrollable-content").css("margin-top",g+"px")}function e(a){a.css({position:"fixed",left:0,right:0,top:0,width:"auto",zIndex:1002,overflow:"hidden",boxSizing:"border-box"}),d(a)}return{init:b}},r=function(){function e(b){b&&d&&(d.isMobile()||n)&&!k()&&a(function(){h(b,f)})}function f(c){var e=a('<div id="smartBanner"><a class="close">x</a><div class="ico'+(c.isTIM?" ico-tim":"")+'"></div><div class="info"><div>'+c.trackCensoredName+"</div><div>"+i(c)+'</div><div class="price">'+c.formattedPrice+'</div></div><a href="'+c.storeUrl+'"rel="noskim"class="view js-tl">View</a></div>');p.append(e),s=a("#smartBanner"),w=(n?"windows10":d.isMobile()[0].toLowerCase())+"_banner",s.attr("data-track-module",w+"^smart-banner"),s.attr("data-track-pos","static"),s.attr("data-track-type","cl"),s.attr("data-track-selector","a.view"),b.externalLinkTracker(s.attr("id")),u=p.hasClass("mol-desktop"),s.find(".close").click(function(a){a.preventDefault(),l(y),u&&clearInterval(t),r()}),o.on("orientationchange",_.debounce(r,0)),u&&(t=setInterval(r,200)),r()}function g(){v||parseInt(s.css("top"))<0||(c.fireEvent(c.SMART_BANNER_VIEWED,{banner:w}),v=!0)}function i(b){var c="";return b.averageUserRating>=3&&a.each(j(b.averageUserRating),function(a,b){for(var d=0;b>d;d++)c+='<span class="'+a+'"></span>'}),c}function j(a){var b=parseInt(a),c=a%1>=.3?1:0;return{whole:b,half:c,empty:5-(b+c)}}function k(){return a.cookie?a.cookie(x):b&&b.getCookie?b.getCookie(x):void 0}function l(c){var d=new Date,e=new Date(d.getTime()+864e5*c);return a.cookie?a.cookie(x,"closed",{path:"/",expires:c}):void(b&&b.setCookie&&b.setCookie(x,"closed",e,"/"))}function m(){return!n&&d.isZoomed()&&!d.isWindows()}function q(){return d.isLandscape()}function r(){var b,c,d=a("#stickyBanner");(k()||m()||q())&&p.hasClass(z)&&(p.removeClass(z),p.css({"padding-top":"0"}),u?d.css({top:0}):o.trigger("resize")),k()||m()||q()||p.hasClass(z)||(p.addClass(z),u?(b=p.width()/window.screen.availWidth,c=s.height()*b+"px",s.css({zoom:b}),p.css({"padding-top":c}),d.css({top:c})):o.trigger("resize"),g())}b.log("Smart Banner");var s,t,u,v,w,x="smart-banner",y=7,z="smart-banner";return{init:e}},s=e?q():r();return f&&s.init(f),s}),function(a,b,c,d){function e(a){a&&c.ajax({url:g.wcserver,method:"POST",crossDomain:!0,xhrFields:{withCredentials:!0},headers:{"mola-method":"init"},dataType:"json"}).then(f)}function f(a){c.globalEval(a.js),g.init&&g.init(a.params)}c.support.cors=!0;var g=a.ABE={},h={};try{b.search.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(a,b,c){h[b]=c})}catch(i){console.log("Error while parsing query parameters",i)}/^localhost:\d+$/.test(h.wc)&&(g.wcserver="http://"+h.wc+"/gb/desktop"+b.pathname+b.search),d.push(e)}(window,window.location,jQuery,window.adBlockQueue||[]),function(){function a(a){this.message=a}var b="undefined"!=typeof exports?exports:this,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.prototype=new Error,a.prototype.name="InvalidCharacterError",b.btoa||(b.btoa=function(b){for(var d,e,f=String(b),g=0,h=c,i="";f.charAt(0|g)||(h="=",g%1);i+=h.charAt(63&d>>8-g%1*8)){if(e=f.charCodeAt(g+=.75),e>255)throw new a("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");d=d<<8|e}return i}),b.atob||(b.atob=function(b){var d=String(b).replace(/=+$/,"");if(d.length%4==1)throw new a("'atob' failed: The string to be decoded is not correctly encoded.");for(var e,f,g=0,h=0,i="";f=d.charAt(h++);~f&&(e=g%4?64*e+f:f,g++%4)?i+=String.fromCharCode(255&e>>(-2*g&6)):0)f=c.indexOf(f);return i})}(),function(a,b,c){"use strict";var d=DM.log,e=!!("ontouchstart"in a),f=a.top!==a.self,g=".mol-footer-back",h=function(c){function d(c){c.stopPropagation(),c.preventDefault();var d=a.location!=a.parent.location?b.referrer:b.location;d.replace(/#.*/,""),d+="#top",a.top.location.href=d}var e=$(c);e[0]&&a.self!==a.top&&e.find(g).on("click",d)},i=".mol-nav-primary",j=".mol-page-footer",k="mol-nav-on",l="mol-nav-user-active",m="mol-nav-no-touch",n=10,o=function(a){function b(){p||o||s>=n||!r.url||$.ajax({url:r.url,cache:!1,beforeSend:function(){o=!0},complete:function(){o=!1},success:function(a,b){d("nav","NAV > success > "),j.children().each(function(b,c){var d=$(c),e=d.children("a").attr("href"),f=$(a).filter(function(){return 1==this.nodeType&&this.getAttribute("data-nav-href")==e});$(f).appendTo(d)}),p=!0},error:function(){d("nav","NAV > error > ",s),s++}})}function c(a){!e&&q.removeClass(k),p&&t.addClass(l),setTimeout(function(){b()},1e3)}function f(a){q.addClass(k),t.removeClass(l)}var g,j,o,p,q,r={},s=0,t=$("body");if(g=$(a),g[0]&&(!e&&t.addClass(m),u(g),w(g),h(g),j=g.find(i),j[0])){try{r=JSON.parse(j.attr("data-nav-opts"))}catch(v){}d("nav","NAV > init > el:nav:opts >",g,j,r),q=j.children("."+k),j.children().on("mouseenter",c).on("mouseleave",f)}};DM.Nav=o,DM.later(["bundle","DOM_READY"],function(){o(j)});var p=15,q=".mol-nav-logged-in span",r=".mol-nav-login a",s="mol-user",t="mol-nav-user-menu",u=function(a){function b(a){return!a||a.length<=p?a:a.substring(0,p)+"&hellip;"}function c(){var a;if(DM.isLoggedIn&&DM.userData){try{a=JSON.parse(atob(DM.userData.replace(/"/g,"")).replace(/'/g,'"')).displayName}catch(c){}return b(a)}}var d=$(a),g=$("body");d[0]&&(DM.isLoggedIn?(g.addClass(s),d.find(q).html(c()).parent().on("click",function(){e&&g.toggleClass(t)})):f&&d.find(r).attr("data-toggle",""))},v=".mol-nav-weather",w=function(a){var b,c=$(a);if(c[0]){try{b=JSON.parse(c.find(v).attr("data-weather-opts"))}catch(d){}b&&DM.WeatherTop&&DM.WeatherTop(b)}}}(window,document),function(a,b){"function"==typeof define&&define.amd?define(["jquery"],b):b($)}(this,function(a){var b=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}};a.fn.zxcvbn=function(c,d){var e=a.extend({libUrl:"zxcvbn.js",minlength:5,waitInterval:400},c);return this.length&&!function(){var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=e.libUrl;var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)}(),this.each(function(){var c=a(this),f=c.val();c.on("keydown",function(){var c=a(this);b(function(){var a,b=c.val();f!==b&&(f=b,c.removeClass("password-score-0 password-score-1 password-score-2 password-score-3 password-score-4"),b.length>=e.minlength&&zxcvbn&&(a=zxcvbn(b),c.addClass("password-score-"+a.score)),d&&d(c,b,a))},e.waitInterval)()})})}}),function(){var a,b,c,d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=function(){function a(){this.options_index=0,this.parsed=[]}return a.prototype.add_node=function(a){return"OPTGROUP"===a.nodeName.toUpperCase()?this.add_group(a):this.add_option(a)},a.prototype.add_group=function(a){var b,c,d,e,f,g;for(b=this.parsed.length,this.parsed.push({array_index:b,group:!0,label:this.escapeExpression(a.label),children:0,disabled:a.disabled}),f=a.childNodes,g=[],d=0,e=f.length;e>d;d++)c=f[d],g.push(this.add_option(c,b,a.disabled));return g},a.prototype.add_option=function(a,b,c){return"OPTION"===a.nodeName.toUpperCase()?(""!==a.text?(null!=b&&(this.parsed[b].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:a.value,text:a.text,html:a.innerHTML,selected:a.selected,disabled:c===!0?c:a.disabled,group_array_index:b,classes:a.className,style:a.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1):void 0},a.prototype.escapeExpression=function(a){var b,c;return null==a||a===!1?"":/[\&\<\>\"\'\`]/.test(a)?(b={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},c=/&(?!\w+;)|[\<\>\"\'\`]/g,a.replace(c,function(a){return b[a]||"&amp;"})):a},a}(),d.select_to_array=function(a){var b,c,e,f,g;for(c=new d,g=a.childNodes,e=0,f=g.length;f>e;e++)b=g[e],c.add_node(b);return c.parsed},b=function(){function a(b,c){this.form_field=b,this.options=null!=c?c:{},a.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers())}return a.prototype.set_default_values=function(){var a=this;return this.click_test_action=function(b){return a.test_active_click(b)},this.activate_action=function(b){return a.activate_field(b)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.result_single_selected=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null!=this.options.enable_split_word_search?this.options.enable_split_word_search:!0,this.group_search=null!=this.options.group_search?this.options.group_search:!0,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=null!=this.options.single_backstroke_delete?this.options.single_backstroke_delete:!0,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=null!=this.options.display_selected_options?this.options.display_selected_options:!0,this.display_disabled_options=null!=this.options.display_disabled_options?this.options.display_disabled_options:!0},a.prototype.set_default_text=function(){return this.form_field.getAttribute("data-placeholder")?this.default_text=this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||a.default_multiple_text:this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||a.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||a.default_no_result_text},a.prototype.mouse_enter=function(){return this.mouse_on_container=!0},a.prototype.mouse_leave=function(){return this.mouse_on_container=!1},a.prototype.input_focus=function(a){var b=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return b.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},a.prototype.input_blur=function(a){var b=this;return this.mouse_on_container?void 0:(this.active_field=!1,setTimeout(function(){return b.blur_test()},100))},a.prototype.results_option_build=function(a){var b,c,d,e,f;for(b="",f=this.results_data,d=0,e=f.length;e>d;d++)c=f[d],b+=c.group?this.result_add_group(c):this.result_add_option(c),(null!=a?a.first:void 0)&&(c.selected&&this.is_multiple?this.choice_build(c):c.selected&&!this.is_multiple&&this.single_set_selected_text(c.text));return b},a.prototype.result_add_option=function(a){var b,c;return a.search_match&&this.include_option_in_results(a)?(b=[],a.disabled||a.selected&&this.is_multiple||b.push("active-result"),!a.disabled||a.selected&&this.is_multiple||b.push("disabled-result"),a.selected&&b.push("result-selected"),null!=a.group_array_index&&b.push("group-option"),""!==a.classes&&b.push(a.classes),c=""!==a.style.cssText?' style="'+a.style+'"':"",'<li class="'+b.join(" ")+'"'+c+' data-option-array-index="'+a.array_index+'">'+a.search_text+"</li>"):""},a.prototype.result_add_group=function(a){return(a.search_match||a.group_match)&&a.active_options>0?'<li class="group-result">'+a.search_text+"</li>":""},a.prototype.results_update_field=function(){return this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.result_single_selected=null,this.results_build(),this.results_showing?this.winnow_results():void 0},a.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},a.prototype.results_search=function(a){return this.results_showing?this.winnow_results():this.results_show()},a.prototype.winnow_results=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m;for(this.no_results_clear(),e=0,g=this.get_search_text(),a=g.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),d=this.search_contains?"":"^",c=new RegExp(d+a,"i"),j=new RegExp(a,"i"),m=this.results_data,k=0,l=m.length;l>k;k++)b=m[k],b.search_match=!1,f=null,this.include_option_in_results(b)&&(b.group&&(b.group_match=!1,b.active_options=0),null!=b.group_array_index&&this.results_data[b.group_array_index]&&(f=this.results_data[b.group_array_index],0===f.active_options&&f.search_match&&(e+=1),f.active_options+=1),(!b.group||this.group_search)&&(b.search_text=b.group?b.label:b.html,b.search_match=this.search_string_match(b.search_text,c),b.search_match&&!b.group&&(e+=1),b.search_match?(g.length&&(h=b.search_text.search(j),i=b.search_text.substr(0,h+g.length)+"</em>"+b.search_text.substr(h+g.length),b.search_text=i.substr(0,h)+"<em>"+i.substr(h)),null!=f&&(f.group_match=!0)):null!=b.group_array_index&&this.results_data[b.group_array_index].search_match&&(b.search_match=!0)));return this.result_clear_highlight(),1>e&&g.length?(this.update_results_content(""),this.no_results(g)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight())},a.prototype.search_string_match=function(a,b){var c,d,e,f;if(b.test(a))return!0;
if(this.enable_split_word_search&&(a.indexOf(" ")>=0||0===a.indexOf("["))&&(d=a.replace(/\[|\]/g,"").split(" "),d.length))for(e=0,f=d.length;f>e;e++)if(c=d[e],b.test(c))return!0},a.prototype.choices_count=function(){var a,b,c,d;if(null!=this.selected_option_count)return this.selected_option_count;for(this.selected_option_count=0,d=this.form_field.options,b=0,c=d.length;c>b;b++)a=d[b],a.selected&&(this.selected_option_count+=1);return this.selected_option_count},a.prototype.choices_click=function(a){return a.preventDefault(),this.results_showing||this.is_disabled?void 0:this.results_show()},a.prototype.keyup_checker=function(a){var b,c;switch(b=null!=(c=a.which)?c:a.keyCode,this.search_field_scale(),b){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(a.preventDefault(),this.results_showing)return this.result_select(a);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},a.prototype.container_width=function(){return null!=this.options.width?this.options.width:""+this.form_field.offsetWidth+"px"},a.prototype.include_option_in_results=function(a){return this.is_multiple&&!this.display_selected_options&&a.selected?!1:!this.display_disabled_options&&a.disabled?!1:a.empty?!1:!0},a.browser_is_supported=function(){return"Microsoft Internet Explorer"===window.navigator.appName?document.documentMode>=8:/iP(od|hone)/i.test(window.navigator.userAgent)?!1:/Android/i.test(window.navigator.userAgent)&&/Mobile/i.test(window.navigator.userAgent)?!1:!0},a.default_multiple_text="Select Some Options",a.default_single_text="Select an Option",a.default_no_result_text="No results match",a}(),a=jQuery,a.fn.extend({chosen:function(d){return b.browser_is_supported()?this.each(function(b){var e,f;e=a(this),f=e.data("chosen"),"destroy"===d&&f?f.destroy():f||e.data("chosen",new c(this,d))}):this}}),c=function(b){function c(){return e=c.__super__.constructor.apply(this,arguments)}return g(c,b),c.prototype.setup=function(){return this.form_field_jq=a(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")},c.prototype.set_up_html=function(){var b,c;return b=["chosen-container"],b.push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&b.push(this.form_field.className),this.is_rtl&&b.push("chosen-rtl"),c={"class":b.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(c.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=a("<div />",c),this.is_multiple?this.container.html('<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>'):this.container.html('<a class="chosen-single chosen-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>'),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior(),this.form_field_jq.trigger("chosen:ready",{chosen:this})},c.prototype.register_observers=function(){var a=this;return this.container.bind("mousedown.chosen",function(b){a.container_mousedown(b)}),this.container.bind("mouseup.chosen",function(b){a.container_mouseup(b)}),this.container.bind("mouseenter.chosen",function(b){a.mouse_enter(b)}),this.container.bind("mouseleave.chosen",function(b){a.mouse_leave(b)}),this.search_results.bind("mouseup.chosen",function(b){a.search_results_mouseup(b)}),this.search_results.bind("mouseover.chosen",function(b){a.search_results_mouseover(b)}),this.search_results.bind("mouseout.chosen",function(b){a.search_results_mouseout(b)}),this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",function(b){a.search_results_mousewheel(b)}),this.form_field_jq.bind("chosen:updated.chosen",function(b){a.results_update_field(b)}),this.form_field_jq.bind("chosen:activate.chosen",function(b){a.activate_field(b)}),this.form_field_jq.bind("chosen:open.chosen",function(b){a.container_mousedown(b)}),this.search_field.bind("blur.chosen",function(b){a.input_blur(b)}),this.search_field.bind("keyup.chosen",function(b){a.keyup_checker(b)}),this.search_field.bind("keydown.chosen",function(b){a.keydown_checker(b)}),this.search_field.bind("focus.chosen",function(b){a.input_focus(b)}),this.is_multiple?this.search_choices.bind("click.chosen",function(b){a.choices_click(b)}):this.container.bind("click.chosen",function(a){a.preventDefault()})},c.prototype.destroy=function(){return a(document).unbind("click.chosen",this.click_test_action),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},c.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chosen-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus.chosen",this.activate_action),this.close_field()):(this.container.removeClass("chosen-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus.chosen",this.activate_action))},c.prototype.container_mousedown=function(b){return this.is_disabled||(b&&"mousedown"===b.type&&!this.results_showing&&b.preventDefault(),null!=b&&a(b.target).hasClass("search-choice-close"))?void 0:(this.active_field?this.is_multiple||!b||a(b.target)[0]!==this.selected_item[0]&&!a(b.target).parents("a.chosen-single").length||(b.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),a(document).bind("click.chosen",this.click_test_action),this.results_show()),this.activate_field())},c.prototype.container_mouseup=function(a){return"ABBR"!==a.target.nodeName||this.is_disabled?void 0:this.results_reset(a)},c.prototype.search_results_mousewheel=function(a){var b,c,d;return b=-(null!=(c=a.originalEvent)?c.wheelDelta:void 0)||(null!=(d=a.originialEvent)?d.detail:void 0),null!=b?(a.preventDefault(),"DOMMouseScroll"===a.type&&(b=40*b),this.search_results.scrollTop(b+this.search_results.scrollTop())):void 0},c.prototype.blur_test=function(a){return!this.active_field&&this.container.hasClass("chosen-container-active")?this.close_field():void 0},c.prototype.close_field=function(){return a(document).unbind("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},c.prototype.activate_field=function(){return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},c.prototype.test_active_click=function(b){return this.container.is(a(b.target).closest(".chosen-container"))?this.active_field=!0:this.close_field()},c.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=d.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},c.prototype.result_do_highlight=function(a){var b,c,d,e,f;if(a.length){if(this.result_clear_highlight(),this.result_highlight=a,this.result_highlight.addClass("highlighted"),d=parseInt(this.search_results.css("maxHeight"),10),f=this.search_results.scrollTop(),e=d+f,c=this.result_highlight.position().top+this.search_results.scrollTop(),b=c+this.result_highlight.outerHeight(),b>=e)return this.search_results.scrollTop(b-d>0?b-d:0);if(f>c)return this.search_results.scrollTop(c)}},c.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},c.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results())},c.prototype.update_results_content=function(a){return this.search_results.html(a)},c.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},c.prototype.set_tab_index=function(a){var b;return this.form_field.tabIndex?(b=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=b):void 0},c.prototype.set_label_behavior=function(){var b=this;return this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=a("label[for='"+this.form_field.id+"']")),this.form_field_label.length>0?this.form_field_label.bind("click.chosen",function(a){return b.is_multiple?b.container_mousedown(a):b.activate_field()}):void 0},c.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},c.prototype.search_results_mouseup=function(b){var c;return c=a(b.target).hasClass("active-result")?a(b.target):a(b.target).parents(".active-result").first(),c.length?(this.result_highlight=c,this.result_select(b),this.search_field.focus()):void 0},c.prototype.search_results_mouseover=function(b){var c;return c=a(b.target).hasClass("active-result")?a(b.target):a(b.target).parents(".active-result").first(),c?this.result_do_highlight(c):void 0},c.prototype.search_results_mouseout=function(b){return a(b.target).hasClass("active-result")?this.result_clear_highlight():void 0},c.prototype.choice_build=function(b){var c,d,e=this;return c=a("<li />",{"class":"search-choice"}).html("<span>"+b.html+"</span>"),b.disabled?c.addClass("search-choice-disabled"):(d=a("<a />",{"class":"search-choice-close","data-option-array-index":b.array_index}),d.bind("click.chosen",function(a){return e.choice_destroy_link_click(a)}),c.append(d)),this.search_container.before(c)},c.prototype.choice_destroy_link_click=function(b){return b.preventDefault(),b.stopPropagation(),this.is_disabled?void 0:this.choice_destroy(a(b.target))},c.prototype.choice_destroy=function(a){return this.result_deselect(a[0].getAttribute("data-option-array-index"))?(this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1&&this.results_hide(),a.parents("li").first().remove(),this.search_field_scale()):void 0},c.prototype.results_reset=function(){return this.form_field.options[0].selected=!0,this.selected_option_count=null,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field?this.results_hide():void 0},c.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},c.prototype.result_select=function(a){var b,c,d;return this.result_highlight?(b=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?b.removeClass("active-result"):(this.result_single_selected&&(this.result_single_selected.removeClass("result-selected"),d=this.result_single_selected[0].getAttribute("data-option-array-index"),this.results_data[d].selected=!1),this.result_single_selected=b),b.addClass("result-selected"),c=this.results_data[b[0].getAttribute("data-option-array-index")],c.selected=!0,this.form_field.options[c.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(c):this.single_set_selected_text(c.text),(a.metaKey||a.ctrlKey)&&this.is_multiple||this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[c.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,this.search_field_scale())):void 0},c.prototype.single_set_selected_text=function(a){return null==a&&(a=this.default_text),a===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").text(a)},c.prototype.result_deselect=function(a){var b;return b=this.results_data[a],this.form_field.options[b.options_index].disabled?!1:(b.selected=!1,this.form_field.options[b.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[b.options_index].value}),this.search_field_scale(),!0)},c.prototype.single_deselect_control_build=function(){return this.allow_single_deselect?(this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")):void 0},c.prototype.get_search_text=function(){return this.search_field.val()===this.default_text?"":a("<div/>").text(a.trim(this.search_field.val())).html()},c.prototype.winnow_results_set_highlight=function(){var a,b;return b=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),a=b.length?b.first():this.search_results.find(".active-result").first(),null!=a?this.result_do_highlight(a):void 0},c.prototype.no_results=function(b){var c;return c=a('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),c.find("span").first().html(b),this.search_results.append(c)},c.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},c.prototype.keydown_arrow=function(){var a;return this.results_showing&&this.result_highlight?(a=this.result_highlight.nextAll("li.active-result").first())?this.result_do_highlight(a):void 0:this.results_show()},c.prototype.keyup_arrow=function(){var a;return this.results_showing||this.is_multiple?this.result_highlight?(a=this.result_highlight.prevAll("li.active-result"),a.length?this.result_do_highlight(a.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight())):void 0:this.results_show()},c.prototype.keydown_backstroke=function(){var a;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(a=this.search_container.siblings("li.search-choice").last(),a.length&&!a.hasClass("search-choice-disabled")?(this.pending_backstroke=a,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0)},c.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},c.prototype.keydown_checker=function(a){var b,c;switch(b=null!=(c=a.which)?c:a.keyCode,this.search_field_scale(),8!==b&&this.pending_backstroke&&this.clear_backstroke(),b){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(a),this.mouse_on_container=!1;break;case 13:a.preventDefault();break;case 38:a.preventDefault(),this.keyup_arrow();break;case 40:a.preventDefault(),this.keydown_arrow()}},c.prototype.search_field_scale=function(){var b,c,d,e,f,g,h,i,j;if(this.is_multiple){for(d=0,h=0,f="position:absolute; left: -1000px; top: -1000px; display:none;",g=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],i=0,j=g.length;j>i;i++)e=g[i],f+=e+":"+this.search_field.css(e)+";";return b=a("<div />",{style:f}),b.text(this.search_field.val()),a("body").append(b),h=b.width()+25,b.remove(),c=this.container.outerWidth(),h>c-10&&(h=c-10),this.search_field.css({width:h+"px"})}},c}(b)}.call(this),DM.CaptchaReload={init:function(a){var b,c=Ext.get(a.id);c&&(b=c.child(".js-link"),b&&b.on("click",function(a){var b=c.query(".js-img")[0],d=new Date;b.src=b.src.replace(/&cb=\d*/,"&cb="+d.getTime())},null,{preventDefault:!0}))}},DM.RegFormValidator=function(a,b){this.init(a,b)},DM.RegFormValidator.commonRules={mandatory:{tst:/^.+$/,msg:"Please provide a value for this field."},email:{tst:/^([A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4})?$/i,msg:"Please provide a valid email address."},displayNameLength:{tst:function(a){return a.length>=2&&a.length<=20},msg:"Username must be between 2 - 20 characters long."},displayNameValid:{tst:/^[A-Z\u00c0-\u024f]+[A-Z0-9\u00c0-\u024f\.\-\_\ ]*$/i,msg:"Username must consist of letters, numbers, hyphens or underscores, starting with a letter."},realNameLength:{tst:function(a){return 0===a.length?!0:a.length>=2&&a.length<=40},msg:"Name must be between 2 - 40 characters long."},realNameValid:{tst:function(a){return 0===a.length?!0:/^[A-Z\u00c0-\u024f]+[A-Z\u00c0-\u024f\-\ ]*$/i.test(a)},msg:"Name must consist of letters, spaces or hyphens, starting with a letter."},countryValid:{tst:/^.+$/,msg:"Please select a country."},cityLength:{tst:function(a){return a.length>=2&&a.length<=30},msg:"City must be between 2 - 30 characters long."},cityValid:{tst:/^[A-Z\u00c0-\u024f]+[A-Z\u00c0-\u024f\.\-\_\ ]*$/i,msg:"City must consist of letters, hyphens or underscores, starting with a letter."},pwdLength:{tst:function(a){return a.length>=5},msg:"Password must be at least 5 characters long."},termsY:{tst:/^Y$/,msg:"You must accept the terms and conditions."}},DM.RegFormValidator.prototype={SEL_INP:".js-val",SEL_FLD:"div",SEL_ERR:".err",CLS_FAIL:"fail",el:null,inputVals:[],inputEls:{},rules:{},init:function(a,b){this.el=Ext.get(a),this.el&&(Ext.apply(this,b),Ext.applyIf(this.rules,DM.RegFormValidator.commonRules),this.inputEls=this.el.select(this.SEL_INP),this.inputEls.each(function(a){switch(a.dom.type){case"text":case"password":case"textarea":a.on("blur",this.run,this);break;case"radio":case"checkbox":a.on("click",this.run,this);break;case"select-one":a.on("change",this.run,this)}},this),this.el.on("submit",this.run,this,{validateAll:!0}))},validate:function(a,b){var c,d,e,f,g,h,i=a.dom,j=i.name,k=this.rules;if(a){switch(b=b||!1,i.type){case"text":case"password":case"textarea":case"select-one":this.inputVals[j]=i.value;break;case"radio":i.checked&&(this.inputVals[j]=i.value);break;case"checkbox":i.checked?this.inputVals[j]=i.value:this.inputVals[j]=""}if(this.map[j]||this.map["*"])for(e=this.map[j]||this.map["*"],f=0,g=e.length;g>f;f+=1){if("string"!=typeof e[f])d=e[f];else if(c=e[f],d=k[c]&&k[c].tst,!d)continue;if("function"==typeof d?h=d(this.inputVals[j]):d instanceof RegExp&&(h=d.test(this.inputVals[j])),h===!1)return b&&this.showError(a,c&&k[c].msg),!1}return this.hideError(a),!0}},showError:function(a,b){var c=a.parent(this.SEL_FLD),d=c&&c.child(this.SEL_ERR);c&&c.addClass(this.CLS_FAIL),d&&(b=b||"",d.dom.innerHTML=b)},hideError:function(a){var b=a.parent(this.SEL_FLD),c=b&&b.child(this.SEL_ERR);b&&b.removeClass(this.CLS_FAIL),c&&(c.dom.innerHTML="")},run:function(a,b,c){var d=!0,e=Ext.get(b);return c.validateAll?(this.inputEls.each(function(a){d?d=this.validate(a,!0):this.validate(a,!0)},this),d||a.preventDefault(),d):this.validate(e,!0)}},DM.RegExpander=function(a,b){this.init(a,b)},DM.RegExpander.prototype={init:function(a,b){var c,d,e,f,g;this.el=Ext.get(a),this.el&&(Ext.apply(this,b),c=this.el.child(".js-out"),d=this.el.child(".js-in"),e=c.getHeight(),g=this.el.child(".js-more"),d.getHeight()>e&&(f=Ext.DomHelper.overwrite(g,'<a href="#"><b class="arrow-small-d"></b>more</a>',!0),f._state=null,f._toggle=function(){f.dom.innerHTML=f._state?'<b class="arrow-small-d"></b>more':'<b class="arrow-small-u"></b>hide',f._state=f._state?0:1},f.on("click",function(a){var b;null===f._state&&c.removeClass("prlf-about-max"),b=f._state?e:d.getHeight(),a.preventDefault(),c.scale(void 0,b,{callback:f._toggle,duration:1,easing:"easeOut"})})))}},DM.RegCharCounter=function(a,b){this.init(a,b)},DM.RegCharCounter.prototype={SEL_COUNTER:".js-counter",SEL_TEXTAREA:"textarea",tpl:"You have <span>{count}</span> characters left.",maxLength:500,forceMaxLength:!0,init:function(a,b){this.el=Ext.get(a),this.el&&(Ext.apply(this,b),this.launch())},launch:function(){var a,b=this.el.child(this.SEL_COUNTER),c=this.el.child(this.SEL_TEXTAREA),d=new Ext.Template(this.tpl).compile();d.overwrite(b,{count:this.maxLength-c.dom.value.length}),a=b.child("span"),this.forceMaxLength&&c.on("keydown",function(a,b){var c=b.value.length;return c>=this.maxLength&&(a.keyCode>47||32===a.keyCode)?(a.preventDefault(),!1):void 0},this),c.on("keyup",function(b,c){var d=this.maxLength-c.value.length;a.dom.innerHTML=d>=0?d:0},this)}},function(a){"use strict";a(document).ready(function(){if(window.REGWEB){var b={mandatory:{type:"regExp",opts:{re:/^.+$/,error:"Please provide a value for this field"}},usernameHelper:{type:"regExp",opts:{re:/^.+$/,error:"Your username is how you'll be known by others on MailOnline, so pick one which describes you well ..."}},cityHelper:{type:"regExp",opts:{re:/^.+$/,error:"Make sure the voice of your home town is heard when you add a comment to an article"}},emailHelper:{type:"regExp",opts:{re:/^.+$/,error:"Please enter a valid email address"}},passwordHelper:{type:"regExp",opts:{re:/^.+$/,error:"Your password should be hard for anyone to guess, so we'd suggest using a mix of capitals, lower case and numbers for the strongest security"}},confirmPasswordHelper:{type:"regExp",opts:{re:/^.+$/,error:"Please re-enter your password"}},email:{type:"regExp",opts:{re:/^([A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4})?$/i,error:"Please provide a valid email address"}},displayNameLength:{type:"length",opts:{min:2,max:20,error:"Username must be between 2 - 20 characters long"}},displayNameValid:{type:"regExp",opts:{re:/^[A-Z\u00c0-\u024f]+[A-Z0-9\u00c0-\u024f\.\-\_\ ]*$/i,error:"Username must consist of letters, numbers, hyphens or underscores, starting with a letter"}},uniqueDisplayName:{type:"rest",opts:{ajaxConfig:{type:"POST",dataType:"json",contentType:"application/json; charset=utf-8"},url:REGWEB.validationFeUri,getData:function(a){return'{"formName" : "newSocialRegistrationRequest" , "fieldName":"displayName" , "fieldValue":"'+a+'"}'},success:function(a,b,c){"success"===a.status&&"0"===a.payload.violations?c():c("This name already exists")}}},cityLength:{type:"length",opts:{min:2,max:30,error:"City must be between 2 - 30 characters long"}},cityValid:{type:"regExp",opts:{re:/^[A-Z\u00c0-\u024f]+[A-Z\u00c0-\u024f\.\-\_\ ]*$/i,error:"City must consist of letters, hyphens or underscores, starting with a letter"}},countryValid:{type:"regExp",opts:{re:/^.+$/,error:"We have readers from all over the world, please share where you're from with our readers"}},pwdLength:{type:"length",opts:{min:5,max:15,error:"Password must be at least 5 and maximum 15 characters long"}},pwdSpaces:{type:"regExp",opts:{re:/^[^\s]+.*[^\s]+$/,error:"Password cannot start or end with space."}},termsY:{type:"regExp",opts:{re:/^Y$/,error:"You must accept the terms and conditions"}},pwdMatch:function(a,b,c){a===b.find("#reg-password").val()?c():c("Passwords do not match.")},newPwdMatch:function(a,b,c){a===b.find("#reg-pwd-2").val()?c():(console.log("value: ",b.find("#reg-pwd-2").val()),c("Passwords do not match!!!"))},dob:function(a,b,c){var d,e,f,g,h=b.find("#reg-dob-day").val(),i=b.find("#reg-dob-month").val(),j=b.find("#reg-dob-year").val();h&&i&&j?(e=parseInt(i,10)-1,d=parseInt(h,10),f=parseInt(j,10),date=new Date(f,e,d),(date.getFullYear()!==f||date.getMonth()!==e||date.getDate()!==d)&&(g="Please enter a valid date")):g="Please enter a valid date",c(g)},checkConfirmation:function(a,b,c){var d=b.find("[name=confirmPassword]");d.val().length&&d.trigger("validate-error"),c()},checkNewPwConfirmation:function(a,b,c){var d=b.find("[name=newPasswordConfirm]");d.val().length&&d.trigger("validate-error"),c()},recaptchaHelper:{type:"length",opts:{min:1,error:"Don't forget the verification code"}},reportHelper:{type:"regExp",opts:{re:/^.+$/,error:"Please provide an explanation of your complaint"}}};a("#reg-details").regformvalidator({fieldContainer:".reg-fld",errorContainer:".err",serverSideErrorClass:".server-side-fail",rules:b,errorsMap:{displayName:["usernameHelper","displayNameLength","displayNameValid","uniqueDisplayName"],city:["cityHelper","cityLength","cityValid"],country:["countryValid"],email:["emailHelper","email"],password:["passwordHelper","pwdLength","checkConfirmation","pwdSpaces"],confirmPassword:["confirmPasswordHelper","pwdLength","pwdMatch","pwdSpaces"],dobDay:["dob"],dobMonth:["dob"],dobYear:["dob"]},hintsMap:{displayName:["usernameHelper"],city:["cityHelper"],email:["emailHelper"],password:["passwordHelper"],confirmPassword:["confirmPasswordHelper"]}}),a("#reg-new-pwd").regformvalidator({fieldContainer:".reg-fld",errorContainer:".err",serverSideErrorClass:".server-side-fail",rules:b,errorsMap:{password:["passwordHelper","pwdLength","checkConfirmation","pwdSpaces"],confirmPassword:["confirmPasswordHelper","pwdLength","pwdMatch","pwdSpaces"]},hintsMap:{password:["passwordHelper"],confirmPassword:["confirmPasswordHelper"]}}),a("#reg-change-pwd").regformvalidator({fieldContainer:".reg-fld",errorContainer:".err",serverSideErrorClass:".server-side-fail",rules:b,errorsMap:{newPassword:["passwordHelper","pwdLength","checkNewPwConfirmation","pwdSpaces"],newPasswordConfirm:["confirmPasswordHelper","pwdLength","newPwdMatch","pwdSpaces"]},hintsMap:{newPassword:["passwordHelper"],newPasswordConfirm:["confirmPasswordHelper"]}}),a("#reg-details-social").regformvalidator({fieldContainer:".reg-fld",errorContainer:".err",serverSideErrorClass:".server-side-fail",rules:b,errorsMap:{displayName:["usernameHelper","displayNameLength","displayNameValid","uniqueDisplayName"],city:["cityHelper","cityLength","cityValid"],country:["countryValid"],email:["emailHelper","email"]},hintsMap:{displayName:["usernameHelper"],city:["cityHelper"],email:["emailHelper"]}}),a("#reg-report-abuse").regformvalidator({fieldContainer:".reg-fld",errorContainer:".err",serverSideErrorClass:".server-side-fail",rules:b,errorsMap:{reporterEmail:["emailHelper","email"],reportText:["reportHelper"]},hintsMap:{reporterEmail:["emailHelper"],reportText:["reportHelper"]}}),a.fn.redirectWhenReady=function(b){var c,d,e;return this.length?(c=a.extend({url:window.location.toString(),maxWait:1e4,pollInterval:1e3,fail:function(){a("body").addClass("redirect-fail")},success:function(){REGWEB.targetUrl?window.location.replace(REGWEB.targetUrl):window.location.replace(this.url)},check:function(a){a(!0)}},b),d=setTimeout(function(){e&&(clearTimeout(e),d=void 0),c.fail()},c.maxWait),void function f(){c.check(function(a){d&&(a?(clearTimeout(d),c.success()):e=setTimeout(f,c.pollInterval))})}()):this},a("#user-not-found").redirectWhenReady({url:"/registration/profile.html",check:function(b){a.ajax({type:"POST",dataType:"json",contentType:"application/json; charset=utf-8",url:REGWEB.baseUrl+REGWEB.checkUserFeUri,data:'{"userId" : "'+REGWEB.userId+'" }',success:function(a,c){b("success"===a.status&&"found"===a.payload.user?!0:!1)}})},fail:function(){window.location.replace("/home/index.html")},maxWait:3e5}),a(".mol-registration select").chosen(),a(".mol-registration select").change(function(){a(this).closest(".reg-fld").addClass("focus")})}})}(jQuery),function(){"use strict";$(document).ready(function(){try{var a=DM.getPageMetadata().bundleLocation+"/"}catch(b){var a=""}$("#reg-password").zxcvbn({libUrl:a+"zxcvbn--.js"},function(a,b,c){var d=a.closest(".password-strength-wrapper");d.removeClass("password-weak password-medium password-strong"),c&&(0===c.score?d.addClass("password-weak"):1===c.score?d.addClass("password-medium"):2===c.score?d.addClass("password-medium"):3===c.score?d.addClass("password-strong"):4===c.score&&d.addClass("password-strong"))})})}(),!function(a){function b(a,b){return b=b||[],a.replace(/(%[s])/g,function(a,c,d){var e=b.shift();return e||0===e?e+"":""})}function c(){this.assemblyId=null,this.instance=null,this.documentTitle=null,this.timer=null,this._options={},this.uploads=[],this.results={},this.ended=null,this.pollStarted=null,this.pollRetries=0,this.started=!1,this.assembly=null,this.params=null,this.bytesReceivedBefore=0,this.lastPoll=0,this.$params=null,this.$form=null,this.$files=null,this.$fileClones=null,this.$iframe=null,this.$modal=null,this._lastMSecs=0,this._lastNSecs=0,this._clockseq=0,this._uploadFileIds=[],this._resultFileIds=[]}var d="https:"==document.location.protocol?"https://":"http://",e=d+"api2.transloadit.com/",f={service:e,assets:d+"assets.transloadit.com/",beforeStart:function(){return!0},onFileSelect:function(){},onStart:function(){},onProgress:function(){},onUpload:function(){},onResult:function(){},onCancel:function(){},onError:function(){},onSuccess:function(){},interval:2500,pollTimeout:8e3,poll404Retries:15,pollConnectionRetries:3,wait:!1,processZeroFiles:!0,triggerUploadOnFileSelection:!1,autoSubmit:!0,modal:!0,exclude:"",fields:!1,params:null,signature:null,region:"us-east-1",debug:!0,locale:"en"},g={en:{"errors.BORED_INSTANCE_ERROR":"Could not find a bored instance.","errors.CONNECTION_ERROR":"There was a problem connecting to the upload server","errors.unknown":"There was an internal error.","errors.tryAgain":"Please try your upload again.","errors.troubleshootDetails":"If you would like our help to troubleshoot this, please email us this information:",cancel:"Cancel",details:"Details",startingUpload:"Starting upload ...",processingFiles:"Processing files",uploadProgress:"%s MB / %s MB (%s kB / sec)"}},h=!1;a.fn.transloadit=function(){var b,d,e,f=Array.prototype.slice.call(arguments);if(0!==this.length){if(this.length>1)return void this.each(function(){a.fn.transloadit.apply(a(this),f)});if((1==f.length&&"object"==typeof f[0]||void 0===f[0])&&f.unshift("init"),b=f.shift(),"init"==b?(d=new c,f.unshift(this),this.data("transloadit.uploader",d)):d=this.data("transloadit.uploader"),!d)throw new Error("Element is not initialized for transloadit!");return e=d[b].apply(d,f),void 0===e?this:e}},a.fn.transloadit.i18n=g,
c.prototype.init=function(b,c){this.$form=b,this.options(a.extend({},f,c||{}));var d=this;b.bind("submit.transloadit",function(){return d.validate(),d.detectFileInputs(),d._options.processZeroFiles||0!==d.$files.length?d._options.beforeStart()&&d.getBoredInstance():d._options.beforeStart()&&d.submitForm(),!1}),this._options.triggerUploadOnFileSelection&&b.on("change",'input[type="file"]',function(){b.trigger("submit.transloadit")}),b.on("change",'input[type="file"]',function(){d._options.onFileSelect(a(this).val(),a(this))}),this.includeCss()},c.prototype.getBoredInstance=function(){function b(){a.jsonp({url:f,timeout:c._options.pollTimeout,callbackParameter:"callback",success:function(a){return a.error?(c.ended=!0,a.url=f,c.renderError(a),void c._options.onError(a)):(c.instance=a.api2_host,void c.start())},error:function(a,h){if(g&&c._options.service===e)return g=!1,void c._findBoredInstanceUrl(function(a,e){return a?(c.ended=!0,a={error:"BORED_INSTANCE_ERROR",message:c.i18n("errors.BORED_INSTANCE_ERROR")+" "+a.message},c.renderError(a),void c._options.onError(a)):(f=d+"api2."+e+"/instances/bored",void b())});c.ended=!0;var i={error:"CONNECTION_ERROR",message:c.i18n("errors.CONNECTION_ERROR"),reason:"JSONP request status: "+h,url:f};c.renderError(i),c._options.onError(i)}})}var c=this;this.instance=null;var f=this._options.service+"instances/bored",g=!0;b(),this._options.modal&&this.showModal()},c.prototype._findBoredInstanceUrl=function(b){var c=this,e=d+"s3.amazonaws.com/infra-"+this._options.region;e+=".transloadit.com/cached_instances.json",a.ajax({url:e,datatype:"json",timeout:5e3,success:function(a){var d=c._shuffle(a.uploaders);c._findResponsiveInstance(d,0,b)},error:function(a,c){var d=new Error("Could not query S3 for cached uploaders");b(d)}})},c.prototype._findResponsiveInstance=function(b,c,e){if(!b[c]){var f=new Error("No responsive uploaders");return e(f)}var g=this,h=b[c];a.jsonp({url:d+h,timeout:3e3,callbackParameter:"callback",success:function(a){e(null,h)},error:function(a,d){g._findResponsiveInstance(b,c+1,e)}})},c.prototype._shuffle=function(a){for(var b,c=[],d=0;d<a.length;d++)b=Math.floor(Math.random()*(d+1)),c[d]=c[b],c[b]=a[d];return c},c.prototype.start=function(){var b=this;this.started=!1,this.ended=!1,this.bytesReceivedBefore=0,this.pollRetries=0,this.uploads=[],this._uploadFileIds=[],this._resultFileIds=[],this.results={},this.assemblyId=this._genUuid(),this.$fileClones=a().not(document),this.$files.each(function(){var c=a(this).clone(!0);b.$fileClones=b.$fileClones.add(c),c.insertAfter(this)}),this.$iframe=a('<iframe id="transloadit-'+this.assemblyId+'" name="transloadit-'+this.assemblyId+'"/>').appendTo("body").hide();var c=d+this.instance+"/assemblies/"+this.assemblyId+"?redirect=false";if(this._options.formData){this._options.formData.append("params",this.$form.find("input[name=params]").val());var e=new XMLHttpRequest;e.open("POST",c),e.send(this._options.formData)}else{this.$uploadForm=a('<form enctype="multipart/form-data" />').attr("action",c).attr("target","transloadit-"+this.assemblyId).attr("method","POST").append(this.$files).appendTo("body").hide();var f="[name=params], [name=signature]";this._options.fields===!0?f="*":"string"==typeof this._options.fields&&(f+=", "+this._options.fields);var g=this.$form.find(":input[type!=file]").filter(f),h=g.filter("select");g=g.filter(function(){return!a(this).is("select")}),g=g.filter("[type!=submit]");var i=this.clone(g);if(this._options.params&&!this.$params&&(i=i.add('<input name="params" value=\''+JSON.stringify(this._options.params)+"'>")),this._options.signature&&(i=i.add('<input name="signature" value=\''+this._options.signature+"'>")),"object"==typeof this._options.fields)for(var j in this._options.fields){var k=this._options.fields[j];i=i.add('<input name="'+j+"\" value='"+k+"'>")}i.prependTo(this.$uploadForm),h.each(function(){a('<input type="hidden"/>').attr("name",a(this).attr("name")).attr("value",a(this).val()).prependTo(b.$uploadForm)}),this.$uploadForm.submit()}this.lastPoll=+new Date,setTimeout(function(){b._poll()},300)},c.prototype.clone=function(b){for(var c=b.clone(),d=b.filter("textarea"),e=c.filter("textarea"),f=0;f<d.length;++f)a(e[f]).val(a(d[f]).val());return c},c.prototype.detectFileInputs=function(){var a=this.$form.find("input[type=file]").not(this._options.exclude);this._options.processZeroFiles||(a=a.filter(function(){return""!==this.value})),this.$files=a},c.prototype.validate=function(){if(this._options.params)this.params=this._options.params;else{var a=this.$form.find("input[name=params]");if(!a.length)return void alert("Could not find input[name=params] in your form.");this.$params=a;try{this.params=JSON.parse(a.val())}catch(b){return void alert("Error: input[name=params] seems to contain invalid JSON.")}}if(this.params.redirect_url)this.$form.attr("action",this.params.redirect_url);else if(this._options.autoSubmit&&this.$form.attr("action")==this._options.service+"assemblies")return void alert("Error: input[name=params] does not include a redirect_url")},c.prototype._poll=function(b){var c=this;if(!this.ended){var e=/(mozilla)(?:.*? rv:([\w.]+))?/.exec(navigator.userAgent),f=e&&e[1];this.documentTitle=document.title,f&&!this.documentTitle&&(document.title="Loading..."),this.pollStarted=+new Date;var g=this.instance.replace(/\.transloadit\.com/,"")+"-status.transloadit.com",h=d+g+"/assemblies/"+this.assemblyId;b&&(h+=b),a.jsonp({url:h,timeout:c._options.pollTimeout,callbackParameter:"callback",success:function(a){if(!c.ended){if(c.assembly=a,"ASSEMBLY_NOT_FOUND"==a.error)return c.pollRetries++,c.pollRetries>c._options.poll404Retries?(document.title=c.documentTitle,c.ended=!0,c.renderError(a),void c._options.onError(a)):void setTimeout(function(){c._poll()},400);if(a.error)return c.ended=!0,c.renderError(a),document.title=c.documentTitle,void c._options.onError(a);c.started||(c.started=!0,c._options.onStart(a)),c.pollRetries=0;var b=("ASSEMBLY_UPLOADING"===a.ok,"ASSEMBLY_EXECUTING"===a.ok),d="ASSEMBLY_CANCELED"===a.ok,e="ASSEMBLY_COMPLETED"===a.ok;c._options.onProgress(a.bytes_received,a.bytes_expected,a);for(var f=0;f<a.uploads.length;f++){var g=a.uploads[f];-1===c._uploadFileIds.indexOf(g.id)&&(c._options.onUpload(g,a),c.uploads.push(g),c._uploadFileIds.push(g.id))}for(var h in a.results){c.results[h]=c.results[h]||[];for(var i=0;i<a.results[h].length;i++){var j=a.results[h][i],k=h+"_"+j.id;-1===c._resultFileIds.indexOf(k)&&(c._options.onResult(h,j,a),c.results[h].push(j),c._resultFileIds.push(k))}}if(d)return c.ended=!0,document.title=c.documentTitle,void c._options.onCancel(a);if(c.renderProgress(a),e||!c._options.wait&&b)return c.ended=!0,document.title=c.documentTitle,a.uploads=c.uploads,a.results=c.results,c._options.onSuccess(a),c._options.modal&&c.cancel(),void c.submitForm();var l=c.pollStarted-+new Date,m=l<c._options.interval?c._options.interval:l;c.timer=setTimeout(function(){c._poll()},m),c.lastPoll=+new Date}},error:function(a,b){if(!c.ended){if(c.pollRetries++,c.pollRetries>c._options.pollConnectionRetries){document.title=c.documentTitle,c.ended=!0;var d={error:"CONNECTION_ERROR",message:c.i18n("errors.CONNECTION_ERROR"),reason:"JSONP request status: "+b,url:h};return c.renderError(d),void c._options.onError(d)}setTimeout(function(){c._poll()},350)}}})}},c.prototype.stop=function(){document.title=this.documentTitle,this.ended=!0},c.prototype.cancel=function(){if(!this.ended){var b=this;this.$params&&this.$params.prependTo(this.$form),this.$fileClones.each(function(c){var d=a(b.$files[c]).clone(!0),e=a(this);d.insertAfter(e),e.remove()}),clearTimeout(b.timer),this._poll("?method=delete"),"Microsoft Internet Explorer"==navigator.appName&&this.$iframe[0].contentWindow.document.execCommand("Stop"),setTimeout(function(){b.$iframe.remove()},500)}this._options.modal&&this.hideModal()},c.prototype.submitForm=function(){"multipart/form-data"===this.$form.attr("enctype")&&this.$form.removeAttr("enctype"),null!==this.assembly&&a("<textarea/>").attr("name","transloadit").text(JSON.stringify(this.assembly)).prependTo(this.$form).hide(),this._options.autoSubmit&&this.$form.unbind("submit.transloadit").submit()},c.prototype.hideModal=function(){a.mask.close(),this.$modal.remove()},c.prototype.showModal=function(){this.$modal=a('<div id="transloadit"><div class="content"><a href="#close" class="close">'+this.i18n("cancel")+'</a><p class="status"></p><div class="progress progress-striped active"><div class="bar"><span class="percent"></span></div></div><label>'+this.i18n("startingUpload")+'</label><p class="error"></p><div class="error-details-toggle"><a href="#">'+this.i18n("details")+'</a></div><p class="error-details"></p></div></div>').appendTo("body"),a.extend(this.$modal,{$content:this.$modal.find(".content"),$close:this.$modal.find(".close"),$label:this.$modal.find("label"),$progress:this.$modal.find(".progress"),$percent:this.$modal.find(".progress .percent"),$progressBar:this.$modal.find(".progress .bar"),$error:this.$modal.find(".error"),$errorDetails:this.$modal.find(".error-details"),$errorDetailsToggle:this.$modal.find(".error-details-toggle")});var b=this;this.$modal.$close.click(function(){b.cancel()}),this.$modal.$error.hide(),this.$modal.$errorDetails.hide(),this.$modal.$errorDetailsToggle.hide();this.$modal.expose({api:!0,maskId:"transloadit_expose",opacity:.9,loadSpeed:250,closeOnEsc:!1,closeOnClick:!1});this.$modal.$close.click(function(){return b.cancel(),!1})},c.prototype.renderError=function(b){if(this._options.modal){if(!this._options.debug)return this.cancel();this.$modal.$content.addClass("content-error"),this.$modal.$progress.hide(),this.$modal.$label.hide();var c=b.error+": "+b.message+"<br /><br />";c+=b.reason||"";var e=["CONNECTION_ERROR","BORED_INSTANCE_ERROR","ASSEMBLY_NOT_FOUND"];if(-1===e.indexOf(b.error))return void this.$modal.$error.html(c).show();var f=this.i18n("errors.unknown")+"<br/>"+this.i18n("errors.tryAgain");this.$modal.$error.html(f).show();var g=b.assemblyId?b.assemblyId:this.assemblyId,h=this,i=null;a.getJSON(d+"jsonip.com/",function(a){i=a.ip}).always(function(){var e={endpoint:b.url,instance:h.instance,assembly_id:g,ip:i,time:h.getUTCDatetime(),agent:navigator.userAgent,poll_retries:h.pollRetries,error:c};a.post(d+"status.transloadit.com/client_error",e);var f=[];for(var j in e)f.push(j+": "+e[j]);var k=h.i18n("errors.troubleshootDetails")+"<br /><br />";h.$modal.$errorDetails.hide().html(k+f.join("<br />")),h.$modal.$errorDetailsToggle.show().find("a").off("click").on("click",function(a){a.preventDefault(),h.$modal.$errorDetails.toggle()})})}},c.prototype.renderProgress=function(a){if(this._options.modal){var b=a.bytes_received/a.bytes_expected*100;b>100&&(b=0);var c=a.bytes_received-this.bytesReceivedBefore,d=+new Date-this.lastPoll,e=100===b?1e3:2*this._options.interval,f=this.i18n("processingFiles");100!=b&&(f=this.i18n("uploadProgress",(a.bytes_received/1024/1024).toFixed(2),(a.bytes_expected/1024/1024).toFixed(2),(c/1024/(d/1e3)).toFixed(1))),this.$modal.$label.text(f);var g=parseInt(this.$modal.$progress.css("width"),10);if(this.bytesReceivedBefore=a.bytes_received,!(0>=c)){var h=this;this.$modal.$progressBar.stop().animate({width:b+"%"},{duration:e,easing:"linear",progress:function(a,b,c){var d=parseInt(h.$modal.$progressBar.css("width"),10),e=(100*d/g).toFixed(0);e>100&&(e=100),e>13&&h.$modal.$percent.text(e+"%")}})}}},c.prototype.includeCss=function(){!h&&this._options.modal&&(h=!0,a('<link rel="stylesheet" type="text/css" href="'+this._options.assets+'css/transloadit2-latest.css" />').appendTo("head"))},c.prototype.getUTCDatetime=function(){var a=new Date,b=new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds()),c=function(a){return 10>a?"0"+a:a},d=b.getTimezoneOffset(),e=(d>0?"-":"+")+c(parseInt(d/60,10));return d%60!==0&&(e+=c(d%60)),0===d&&(e="Z"),b.getFullYear()+"-"+c(b.getMonth()+1)+"-"+c(b.getDate())+"T"+c(b.getHours())+":"+c(b.getMinutes())+":"+c(b.getSeconds())+e},c.prototype._genUuid=function(a,b,c){function d(a,b){var c=b||0,d=l;return d[a[c++]]+d[a[c++]]+d[a[c++]]+d[a[c++]]+d[a[c++]]+d[a[c++]]+d[a[c++]]+d[a[c++]]+d[a[c++]]+d[a[c++]]+d[a[c++]]+d[a[c++]]+d[a[c++]]+d[a[c++]]+d[a[c++]]+d[a[c++]]}a=a||{};var e=b&&c||0,f=b||[],g=new Array(16),h=function(){for(var a,b=0;16>b;b++)0===(3&b)&&(a=4294967296*Math.random()),g[b]=a>>>((3&b)<<3)&255;return g},i=h(),j=[1|i[0],i[1],i[2],i[3],i[4],i[5]];this._clockseq=16383&(i[6]<<8|i[7]);for(var k=null!=a.clockseq?a.clockseq:this._clockseq,l=[],m={},n=0;256>n;n++)l[n]=(n+256).toString(16).substr(1),m[l[n]]=n;var o=null!=a.msecs?a.msecs:(new Date).getTime(),p=null!=a.nsecs?a.nsecs:this._lastNSecs+1,q=o-this._lastMSecs+(p-this._lastNSecs)/1e4;if(0>q&&null==a.clockseq&&(k=k+1&16383),(0>q||o>this._lastMSecs)&&null==a.nsecs&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");this._lastMSecs=o,this._lastNSecs=p,this._clockseq=k,o+=122192928e5;var r=(1e4*(268435455&o)+p)%4294967296;f[e++]=r>>>24&255,f[e++]=r>>>16&255,f[e++]=r>>>8&255,f[e++]=255&r;var s=o/4294967296*1e4&268435455;f[e++]=s>>>8&255,f[e++]=255&s,f[e++]=s>>>24&15|16,f[e++]=s>>>16&255,f[e++]=k>>>8|128,f[e++]=255&k;for(var t=a.node||j,u=0;6>u;u++)f[e+u]=t[u];return b?b:d(f)},c.prototype.options=function(b){return 0===arguments.length?this._options:void a.extend(this._options,b)},c.prototype.option=function(a,b){return 1==arguments.length?this._options[a]:void(this._options[a]=b)},c.prototype.i18n=function(){var a=Array.prototype.slice.call(arguments),c=a.shift(),d=this._options.locale,e=g[d]&&g[d][c]||g.en[c];if(!e)throw new Error("Unknown i18n key: "+c);return b(e,a)}}(window.jQuery),jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(a,b,c,d,e){return jQuery.easing[jQuery.easing.def](a,b,c,d,e)},easeInQuad:function(a,b,c,d,e){return d*(b/=e)*b+c},easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c},easeInOutQuad:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b+c:-d/2*(--b*(b-2)-1)+c},easeInCubic:function(a,b,c,d,e){return d*(b/=e)*b*b+c},easeOutCubic:function(a,b,c,d,e){return d*((b=b/e-1)*b*b+1)+c},easeInOutCubic:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b+c:d/2*((b-=2)*b*b+2)+c},easeInQuart:function(a,b,c,d,e){return d*(b/=e)*b*b*b+c},easeOutQuart:function(a,b,c,d,e){return-d*((b=b/e-1)*b*b*b-1)+c},easeInOutQuart:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b+c:-d/2*((b-=2)*b*b*b-2)+c},easeInQuint:function(a,b,c,d,e){return d*(b/=e)*b*b*b*b+c},easeOutQuint:function(a,b,c,d,e){return d*((b=b/e-1)*b*b*b*b+1)+c},easeInOutQuint:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b*b+c:d/2*((b-=2)*b*b*b*b+2)+c},easeInSine:function(a,b,c,d,e){return-d*Math.cos(b/e*(Math.PI/2))+d+c},easeOutSine:function(a,b,c,d,e){return d*Math.sin(b/e*(Math.PI/2))+c},easeInOutSine:function(a,b,c,d,e){return-d/2*(Math.cos(Math.PI*b/e)-1)+c},easeInExpo:function(a,b,c,d,e){return 0==b?c:d*Math.pow(2,10*(b/e-1))+c},easeOutExpo:function(a,b,c,d,e){return b==e?c+d:d*(-Math.pow(2,-10*b/e)+1)+c},easeInOutExpo:function(a,b,c,d,e){return 0==b?c:b==e?c+d:(b/=e/2)<1?d/2*Math.pow(2,10*(b-1))+c:d/2*(-Math.pow(2,-10*--b)+2)+c},easeInCirc:function(a,b,c,d,e){return-d*(Math.sqrt(1-(b/=e)*b)-1)+c},easeOutCirc:function(a,b,c,d,e){return d*Math.sqrt(1-(b=b/e-1)*b)+c},easeInOutCirc:function(a,b,c,d,e){return(b/=e/2)<1?-d/2*(Math.sqrt(1-b*b)-1)+c:d/2*(Math.sqrt(1-(b-=2)*b)+1)+c},easeInElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(0==b)return c;if(1==(b/=e))return c+d;if(g||(g=.3*e),h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return-(h*Math.pow(2,10*(b-=1))*Math.sin(2*(b*e-f)*Math.PI/g))+c},easeOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(0==b)return c;if(1==(b/=e))return c+d;if(g||(g=.3*e),h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return h*Math.pow(2,-10*b)*Math.sin(2*(b*e-f)*Math.PI/g)+d+c},easeInOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(0==b)return c;if(2==(b/=e/2))return c+d;if(g||(g=.3*e*1.5),h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return 1>b?-.5*h*Math.pow(2,10*(b-=1))*Math.sin(2*(b*e-f)*Math.PI/g)+c:h*Math.pow(2,-10*(b-=1))*Math.sin(2*(b*e-f)*Math.PI/g)*.5+d+c},easeInBack:function(a,b,c,d,e,f){return void 0==f&&(f=1.70158),d*(b/=e)*b*((f+1)*b-f)+c},easeOutBack:function(a,b,c,d,e,f){return void 0==f&&(f=1.70158),d*((b=b/e-1)*b*((f+1)*b+f)+1)+c},easeInOutBack:function(a,b,c,d,e,f){return void 0==f&&(f=1.70158),(b/=e/2)<1?d/2*b*b*(((f*=1.525)+1)*b-f)+c:d/2*((b-=2)*b*(((f*=1.525)+1)*b+f)+2)+c},easeInBounce:function(a,b,c,d,e){return d-jQuery.easing.easeOutBounce(a,e-b,0,d,e)+c},easeOutBounce:function(a,b,c,d,e){return(b/=e)<1/2.75?7.5625*d*b*b+c:2/2.75>b?d*(7.5625*(b-=1.5/2.75)*b+.75)+c:2.5/2.75>b?d*(7.5625*(b-=2.25/2.75)*b+.9375)+c:d*(7.5625*(b-=2.625/2.75)*b+.984375)+c},easeInOutBounce:function(a,b,c,d,e){return e/2>b?.5*jQuery.easing.easeInBounce(a,2*b,0,d,e)+c:.5*jQuery.easing.easeOutBounce(a,2*b-e,0,d,e)+.5*d+c}}),function(a){function b(){}function c(a){g=[a]}function d(a,b,c){return a&&a.apply(b.context||b,c)}function e(a){return/\?/.test(a)?"&":"?"}function f(f){function n(a){X++||(Y(),S&&(A[U]={s:[a]}),O&&(a=O.apply(f,[a])),d(L,f,[a,v,f]),d(N,f,[f,v]))}function F(a){X++||(Y(),S&&a!=w&&(A[U]=a),d(M,f,[f,a]),d(N,f,[f,a]))}f=a.extend({},C,f);var G,H,I,J,K,L=f.success,M=f.error,N=f.complete,O=f.dataFilter,P=f.callbackParameter,Q=f.callback,R=f.cache,S=f.pageCache,T=f.charset,U=f.url,V=f.data,W=f.timeout,X=0,Y=b;return y&&y(function(a){a.done(L).fail(M),L=a.resolve,M=a.reject}).promise(f),f.abort=function(){!X++&&Y()},d(f.beforeSend,f,[f])===!1||X?f:(U=U||j,V=V?"string"==typeof V?V:a.param(V,f.traditional):j,U+=V?e(U)+V:j,P&&(U+=e(U)+encodeURIComponent(P)+"=?"),!R&&!S&&(U+=e(U)+"_"+(new Date).getTime()+"="),U=U.replace(/=\?(&|$)/,"="+Q+"$1"),S&&(G=A[U])?G.s?n(G.s[0]):F(G):(x[Q]=c,I=a(u)[0],I.id=m+B++,T&&(I[i]=T),D&&D.version()<11.6?(J=a(u)[0]).text="document.getElementById('"+I.id+"')."+p+"()":I[h]=h,E&&(I.htmlFor=I.id,I.event=o),I[q]=I[p]=I[r]=function(a){if(!I[s]||!/i/.test(I[s])){try{I[o]&&I[o]()}catch(b){}a=g,g=0,a?n(a[0]):F(k)}},I.src=U,Y=function(a){K&&clearTimeout(K),I[r]=I[q]=I[p]=null,z[t](I),J&&z[t](J)},z[l](I,H=z.firstChild),J&&z[l](J,H),K=W>0&&setTimeout(function(){F(w)},W)),f)}var g,h="async",i="charset",j="",k="error",l="insertBefore",m="_jqjsp",n="on",o=n+"click",p=n+k,q=n+"load",r=n+"readystatechange",s="readyState",t="removeChild",u="<script>",v="success",w="timeout",x=window,y=a.Deferred,z=a("head")[0]||document.documentElement,A={},B=0,C={callback:m,url:location.href},D=x.opera,E=!!a("<div>").html("<!--[if IE]><i><![endif]-->").find("i").length;f.setup=function(b){a.extend(C,b)},a.jsonp=f}(jQuery),function(a){a.tools=a.tools||{version:"2013-02-15"};var b,c,d,e,f,g=a.tools.expose={conf:{maskId:"exposeMask",loadSpeed:"slow",closeSpeed:"fast",zIndex:9998,opacity:.8,startOpacity:0,color:"#fff"}};a.mask={load:function(h,i){return d?this:(h=h||e,e=h=a.extend(a.extend({},g.conf),h),b=a("#"+h.maskId),b.length||(b=a("<div/>").attr("id",h.maskId),a("body").append(b)),b.css({position:"fixed",top:0,left:0,width:"100%",height:"100%",display:"block",opacity:h.opacity,zIndex:h.zIndex,backgroundColor:h.color}),i&&i.length&&(f=i.eq(0).css("zIndex"),c=i.css({zIndex:Math.max(h.zIndex+1,"auto"==f?0:f)})),d=!0,this)},close:function(){return d&&(b.fadeOut(e.closeSpeed,function(){c&&c.css({zIndex:f})}),d=!1),this}},a.fn.mask=function(b){return a.mask.load(b),this},a.fn.expose=function(b){return a.mask.load(b,this),this}}(jQuery),function(a){a.Jcrop=function(b,c){function d(a){return Math.round(a)+"px"}function e(a){return J.baseClass+"-"+a}function f(){return a.fx.step.hasOwnProperty("backgroundColor")}function g(b){var c=a(b).offset();return[c.left,c.top]}function h(a){return[a.pageX-I[0],a.pageY-I[1]]}function i(b){"object"!=typeof b&&(b={}),J=a.extend(J,b),a.each(["onChange","onSelect","onRelease","onDblClick"],function(a,b){"function"!=typeof J[b]&&(J[b]=function(){})})}function j(a,b,c){if(I=g(R),oa.setCursor("move"===a?a:a+"-resize"),"move"===a)return oa.activateHandlers(l(b),q,c);var d=la.getFixed(),e=m(a),f=la.getCorner(m(e));la.setPressed(la.getCorner(e)),la.setCurrent(f),oa.activateHandlers(k(a,d),q,c)}function k(a,b){return function(c){if(J.aspectRatio)switch(a){case"e":c[1]=b.y+1;break;case"w":c[1]=b.y+1;break;case"n":c[0]=b.x+1;break;case"s":c[0]=b.x+1}else switch(a){case"e":c[1]=b.y2;break;case"w":c[1]=b.y2;break;case"n":c[0]=b.x2;break;case"s":c[0]=b.x2}la.setCurrent(c),na.update()}}function l(a){var b=a;return pa.watchKeys(),function(a){la.moveOffset([a[0]-b[0],a[1]-b[1]]),b=a,na.update()}}function m(a){switch(a){case"n":return"sw";case"s":return"nw";case"e":return"nw";case"w":return"ne";case"ne":return"sw";case"nw":return"se";case"se":return"nw";case"sw":return"ne"}}function n(a){return function(b){return J.disabled?!1:"move"!==a||J.allowMove?(I=g(R),da=!0,j(a,h(b)),b.stopPropagation(),b.preventDefault(),!1):!1}}function o(a,b,c){var d=a.width(),e=a.height();d>b&&b>0&&(d=b,e=b/a.width()*a.height()),e>c&&c>0&&(e=c,d=c/a.height()*a.width()),ba=a.width()/d,ca=a.height()/e,a.width(d).height(e)}function p(a){return{x:a.x*ba,y:a.y*ca,x2:a.x2*ba,y2:a.y2*ca,w:a.w*ba,h:a.h*ca}}function q(a){var b=la.getFixed();b.w>J.minSelect[0]&&b.h>J.minSelect[1]?(na.enableHandles(),na.done()):na.release(),oa.setCursor(J.allowSelect?"crosshair":"default")}function r(a){if(J.disabled)return!1;if(!J.allowSelect)return!1;da=!0,I=g(R),na.disableHandles(),oa.setCursor("crosshair");var b=h(a);return la.setPressed(b),na.update(),oa.activateHandlers(s,q,"touch"===a.type.substring(0,5)),pa.watchKeys(),a.stopPropagation(),a.preventDefault(),!1}function s(a){la.setCurrent(a),na.update()}function t(){var b=a("<div></div>").addClass(e("tracker"));return L&&b.css({opacity:0,backgroundColor:"white"}),b}function u(a){U.removeClass().addClass(e("holder")).addClass(a)}function v(a,b){function c(){window.setTimeout(s,l)}var d=a[0]/ba,e=a[1]/ca,f=a[2]/ba,g=a[3]/ca;if(!ea){var h=la.flipCoords(d,e,f,g),i=la.getFixed(),j=[i.x,i.y,i.x2,i.y2],k=j,l=J.animationDelay,m=h[0]-j[0],n=h[1]-j[1],o=h[2]-j[2],p=h[3]-j[3],q=0,r=J.swingSpeed;d=k[0],e=k[1],f=k[2],g=k[3],na.animMode(!0);var s=function(){return function(){q+=(100-q)/r,k[0]=Math.round(d+q/100*m),k[1]=Math.round(e+q/100*n),k[2]=Math.round(f+q/100*o),k[3]=Math.round(g+q/100*p),q>=99.8&&(q=100),100>q?(x(k),c()):(na.done(),na.animMode(!1),"function"==typeof b&&b.call(qa))}}();c()}}function w(a){x([a[0]/ba,a[1]/ca,a[2]/ba,a[3]/ca]),J.onSelect.call(qa,p(la.getFixed())),na.enableHandles()}function x(a){la.setPressed([a[0],a[1]]),la.setCurrent([a[2],a[3]]),na.update()}function y(){return p(la.getFixed())}function z(){return la.getFixed()}function A(a){i(a),H()}function B(){J.disabled=!0,na.disableHandles(),na.setCursor("default"),oa.setCursor("default")}function C(){J.disabled=!1,H()}function D(){na.done(),oa.activateHandlers(null,null)}function E(){U.remove(),O.show(),O.css("visibility","visible"),a(b).removeData("Jcrop")}function F(a,b){na.release(),B();var c=new Image;c.onload=function(){var d=c.width,e=c.height,f=J.boxWidth,g=J.boxHeight;R.width(d).height(e),R.attr("src",a),V.attr("src",a),o(R,f,g),S=R.width(),T=R.height(),V.width(S).height(T),ha.width(S+2*ga).height(T+2*ga),U.width(S).height(T),ma.resize(S,T),C(),"function"==typeof b&&b.call(qa)},c.src=a}function G(a,b,c){var d=b||J.bgColor;J.bgFade&&f()&&J.fadeTime&&!c?a.animate({backgroundColor:d},{queue:!1,duration:J.fadeTime}):a.css("backgroundColor",d)}function H(a){J.allowResize?a?na.enableOnly():na.enableHandles():na.disableHandles(),oa.setCursor(J.allowSelect?"crosshair":"default"),na.setCursor(J.allowMove?"move":"default"),J.hasOwnProperty("trueSize")&&(ba=J.trueSize[0]/S,ca=J.trueSize[1]/T),J.hasOwnProperty("setSelect")&&(w(J.setSelect),na.done(),delete J.setSelect),ma.refresh(),J.bgColor!=ia&&(G(J.shade?ma.getShades():U,J.shade?J.shadeColor||J.bgColor:J.bgColor),ia=J.bgColor),ja!=J.bgOpacity&&(ja=J.bgOpacity,J.shade?ma.refresh():na.setBgOpacity(ja)),Z=J.maxSize[0]||0,$=J.maxSize[1]||0,_=J.minSize[0]||0,aa=J.minSize[1]||0,J.hasOwnProperty("outerImage")&&(R.attr("src",J.outerImage),delete J.outerImage),na.refresh()}var I,J=a.extend({},a.Jcrop.defaults),K=navigator.userAgent.toLowerCase(),L=/msie/.test(K),M=/msie [1-6]\./.test(K);"object"!=typeof b&&(b=a(b)[0]),"object"!=typeof c&&(c={}),i(c);var N={border:"none",visibility:"visible",margin:0,padding:0,position:"absolute",top:0,left:0},O=a(b),P=!0;if("IMG"==b.tagName){if(0!=O[0].width&&0!=O[0].height)O.width(O[0].width),O.height(O[0].height);else{var Q=new Image;Q.src=O[0].src,O.width(Q.width),O.height(Q.height)}var R=O.clone().removeAttr("id").css(N).show();R.width(O.width()),R.height(O.height()),O.after(R).hide()}else R=O.css(N).show(),P=!1,null===J.shade&&(J.shade=!0);o(R,J.boxWidth,J.boxHeight);var S=R.width(),T=R.height(),U=a("<div />").width(S).height(T).addClass(e("holder")).css({position:"relative",backgroundColor:J.bgColor}).insertAfter(O).append(R);J.addClass&&U.addClass(J.addClass);var V=a("<div />"),W=a("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",overflow:"hidden"}),X=a("<div />").width("100%").height("100%").css("zIndex",320),Y=a("<div />").css({position:"absolute",zIndex:600}).dblclick(function(){var a=la.getFixed();J.onDblClick.call(qa,a)}).insertBefore(R).append(W,X);P&&(V=a("<img />").attr("src",R.attr("src")).css(N).width(S).height(T),W.append(V)),M&&Y.css({overflowY:"hidden"});var Z,$,_,aa,ba,ca,da,ea,fa,ga=J.boundary,ha=t().width(S+2*ga).height(T+2*ga).css({position:"absolute",top:d(-ga),left:d(-ga),zIndex:290}).mousedown(r),ia=J.bgColor,ja=J.bgOpacity;I=g(R);var ka=function(){function a(){var a,b={},c=["touchstart","touchmove","touchend"],d=document.createElement("div");try{for(a=0;a<c.length;a++){var e=c[a];e="on"+e;var f=e in d;f||(d.setAttribute(e,"return;"),f="function"==typeof d[e]),b[c[a]]=f}return b.touchstart&&b.touchend&&b.touchmove}catch(g){return!1}}function b(){return J.touchSupport===!0||J.touchSupport===!1?J.touchSupport:a()}return{createDragger:function(a){return function(b){return J.disabled?!1:"move"!==a||J.allowMove?(I=g(R),da=!0,j(a,h(ka.cfilter(b)),!0),b.stopPropagation(),b.preventDefault(),!1):!1}},newSelection:function(a){return r(ka.cfilter(a))},cfilter:function(a){return a.pageX=a.originalEvent.changedTouches[0].pageX,a.pageY=a.originalEvent.changedTouches[0].pageY,a},isSupported:a,support:b()}}(),la=function(){function a(a){a=g(a),o=m=a[0],p=n=a[1]}function b(a){a=g(a),k=a[0]-o,l=a[1]-p,o=a[0],p=a[1]}function c(){return[k,l]}function d(a){var b=a[0],c=a[1];0>m+b&&(b-=b+m),0>n+c&&(c-=c+n),p+c>T&&(c+=T-(p+c)),o+b>S&&(b+=S-(o+b)),m+=b,o+=b,n+=c,p+=c}function e(a){var b=f();switch(a){case"ne":return[b.x2,b.y];case"nw":return[b.x,b.y];case"se":return[b.x2,b.y2];case"sw":return[b.x,b.y2]}}function f(){if(!J.aspectRatio)return i();var a,b,c,d,e=J.aspectRatio,f=J.minSize[0]/ba,g=J.maxSize[0]/ba,k=J.maxSize[1]/ca,l=o-m,q=p-n,r=Math.abs(l),s=Math.abs(q),t=r/s;return 0===g&&(g=10*S),0===k&&(k=10*T),e>t?(b=p,c=s*e,a=0>l?m-c:c+m,0>a?(a=0,d=Math.abs((a-m)/e),b=0>q?n-d:d+n):a>S&&(a=S,d=Math.abs((a-m)/e),b=0>q?n-d:d+n)):(a=o,d=r/e,b=0>q?n-d:n+d,0>b?(b=0,c=Math.abs((b-n)*e),a=0>l?m-c:c+m):b>T&&(b=T,c=Math.abs(b-n)*e,a=0>l?m-c:c+m)),a>m?(f>a-m?a=m+f:a-m>g&&(a=m+g),b=b>n?n+(a-m)/e:n-(a-m)/e):m>a&&(f>m-a?a=m-f:m-a>g&&(a=m-g),b=b>n?n+(m-a)/e:n-(m-a)/e),0>a?(m-=a,a=0):a>S&&(m-=a-S,a=S),0>b?(n-=b,b=0):b>T&&(n-=b-T,b=T),j(h(m,n,a,b))}function g(a){return a[0]<0&&(a[0]=0),a[1]<0&&(a[1]=0),a[0]>S&&(a[0]=S),a[1]>T&&(a[1]=T),[Math.round(a[0]),Math.round(a[1])]}function h(a,b,c,d){var e=a,f=c,g=b,h=d;return a>c&&(e=c,f=a),b>d&&(g=d,h=b),[e,g,f,h]}function i(){var a,b=o-m,c=p-n;return Z&&Math.abs(b)>Z&&(o=b>0?m+Z:m-Z),$&&Math.abs(c)>$&&(p=c>0?n+$:n-$),aa/ca&&Math.abs(c)<aa/ca&&(p=c>0?n+aa/ca:n-aa/ca),_/ba&&Math.abs(b)<_/ba&&(o=b>0?m+_/ba:m-_/ba),0>m&&(o-=m,m-=m),0>n&&(p-=n,n-=n),0>o&&(m-=o,o-=o),0>p&&(n-=p,p-=p),o>S&&(a=o-S,m-=a,o-=a),p>T&&(a=p-T,n-=a,p-=a),m>S&&(a=m-T,p-=a,n-=a),n>T&&(a=n-T,p-=a,n-=a),j(h(m,n,o,p))}function j(a){return{x:a[0],y:a[1],x2:a[2],y2:a[3],w:a[2]-a[0],h:a[3]-a[1]}}var k,l,m=0,n=0,o=0,p=0;return{flipCoords:h,setPressed:a,setCurrent:b,getOffset:c,moveOffset:d,getCorner:e,getFixed:f}}(),ma=function(){function b(a,b){o.left.css({height:d(b)}),o.right.css({height:d(b)})}function c(){return e(la.getFixed())}function e(a){o.top.css({left:d(a.x),width:d(a.w),height:d(a.y)}),o.bottom.css({top:d(a.y2),left:d(a.x),width:d(a.w),height:d(T-a.y2)}),o.right.css({left:d(a.x2),width:d(S-a.x2)}),o.left.css({width:d(a.x)})}function f(){return a("<div />").css({position:"absolute",backgroundColor:J.shadeColor||J.bgColor}).appendTo(n)}function g(){m||(m=!0,n.insertBefore(R),c(),na.setBgOpacity(1,0,1),V.hide(),h(J.shadeColor||J.bgColor,1),na.isAwake()?j(J.bgOpacity,1):j(1,1))}function h(a,b){G(l(),a,b)}function i(){m&&(n.remove(),V.show(),m=!1,na.isAwake()?na.setBgOpacity(J.bgOpacity,1,1):(na.setBgOpacity(1,1,1),na.disableHandles()),G(U,0,1))}function j(a,b){m&&(J.bgFade&&!b?n.animate({opacity:1-a},{queue:!1,duration:J.fadeTime}):n.css({opacity:1-a}))}function k(){J.shade?g():i(),na.isAwake()&&j(J.bgOpacity)}function l(){return n.children()}var m=!1,n=a("<div />").css({position:"absolute",zIndex:240,opacity:0}),o={top:f(),left:f().height(T),right:f().height(T),bottom:f()};return{update:c,updateRaw:e,getShades:l,setBgColor:h,enable:g,disable:i,resize:b,refresh:k,opacity:j}}(),na=function(){function b(b){var c=a("<div />").css({position:"absolute",opacity:J.borderOpacity}).addClass(e(b));return W.append(c),c}function c(b,c){var d=a("<div />").mousedown(n(b)).css({cursor:b+"-resize",position:"absolute",zIndex:c}).addClass("ord-"+b);return ka.support&&d.bind("touchstart.jcrop",ka.createDragger(b)),X.append(d),d}function f(a){var b=J.handleSize,d=c(a,B++).css({opacity:J.handleOpacity}).addClass(e("handle"));return b&&d.width(b).height(b),d}function g(a){return c(a,B++).addClass("jcrop-dragbar")}function h(a){var b;for(b=0;b<a.length;b++)E[a[b]]=g(a[b])}function i(a){var c,d;for(d=0;d<a.length;d++){switch(a[d]){case"n":c="hline";break;case"s":c="hline bottom";break;case"e":c="vline right";break;case"w":c="vline"}C[a[d]]=b(c)}}function j(a){var b;for(b=0;b<a.length;b++)D[a[b]]=f(a[b])}function k(a,b){J.shade||V.css({top:d(-b),left:d(-a)}),Y.css({top:d(b),left:d(a)})}function l(a,b){Y.width(Math.round(a)).height(Math.round(b))}function m(){var a=la.getFixed();la.setPressed([a.x,a.y]),la.setCurrent([a.x2,a.y2]),o()}function o(a){return A?q(a):void 0}function q(a){var b=la.getFixed();l(b.w,b.h),k(b.x,b.y),J.shade&&ma.updateRaw(b),A||s(),a?J.onSelect.call(qa,p(b)):J.onChange.call(qa,p(b))}function r(a,b,c){(A||b)&&(J.bgFade&&!c?R.animate({opacity:a},{queue:!1,duration:J.fadeTime}):R.css("opacity",a))}function s(){Y.show(),J.shade?ma.opacity(ja):r(ja,!0),A=!0}function u(){x(),Y.hide(),J.shade?ma.opacity(1):r(1),A=!1,J.onRelease.call(qa)}function v(){F&&X.show()}function w(){return F=!0,J.allowResize?(X.show(),!0):void 0}function x(){F=!1,X.hide()}function y(a){a?(ea=!0,x()):(ea=!1,w())}function z(){y(!1),m()}var A,B=370,C={},D={},E={},F=!1;J.dragEdges&&a.isArray(J.createDragbars)&&h(J.createDragbars),a.isArray(J.createHandles)&&j(J.createHandles),J.drawBorders&&a.isArray(J.createBorders)&&i(J.createBorders),a(document).bind("touchstart.jcrop-ios",function(b){a(b.currentTarget).hasClass("jcrop-tracker")&&b.stopPropagation()});var G=t().mousedown(n("move")).css({cursor:"move",position:"absolute",zIndex:360});return ka.support&&G.bind("touchstart.jcrop",ka.createDragger("move")),W.append(G),x(),{updateVisible:o,update:q,release:u,refresh:m,isAwake:function(){return A},setCursor:function(a){G.css("cursor",a)},enableHandles:w,enableOnly:function(){F=!0},showHandles:v,disableHandles:x,animMode:y,setBgOpacity:r,done:z}}(),oa=function(){function b(b){ha.css({zIndex:450}),b?a(document).bind("touchmove.jcrop",g).bind("touchend.jcrop",i):m&&a(document).bind("mousemove.jcrop",d).bind("mouseup.jcrop",e);
}function c(){ha.css({zIndex:290}),a(document).unbind(".jcrop")}function d(a){return k(h(a)),!1}function e(a){return a.preventDefault(),a.stopPropagation(),da&&(da=!1,l(h(a)),na.isAwake()&&J.onSelect.call(qa,p(la.getFixed())),c(),k=function(){},l=function(){}),!1}function f(a,c,d){return da=!0,k=a,l=c,b(d),!1}function g(a){return k(h(ka.cfilter(a))),!1}function i(a){return e(ka.cfilter(a))}function j(a){ha.css("cursor",a)}var k=function(){},l=function(){},m=J.trackDocument;return m||ha.mousemove(d).mouseup(e).mouseout(e),R.before(ha),{activateHandlers:f,setCursor:j}}(),pa=function(){function b(){J.keySupport&&(f.show(),f.focus())}function c(a){f.hide()}function d(a,b,c){J.allowMove&&(la.moveOffset([b,c]),na.updateVisible(!0)),a.preventDefault(),a.stopPropagation()}function e(a){if(a.ctrlKey||a.metaKey)return!0;fa=a.shiftKey?!0:!1;var b=fa?10:1;switch(a.keyCode){case 37:d(a,-b,0);break;case 39:d(a,b,0);break;case 38:d(a,0,-b);break;case 40:d(a,0,b);break;case 27:J.allowSelect&&na.release();break;case 9:return!0}return!1}var f=a('<input type="radio" />').css({position:"fixed",left:"-120px",width:"12px"}).addClass("jcrop-keymgr"),g=a("<div />").css({position:"absolute",overflow:"hidden"}).append(f);return J.keySupport&&(f.keydown(e).blur(c),M||!J.fixedSupport?(f.css({position:"absolute",left:"-20px"}),g.append(f).insertBefore(R)):f.insertBefore(R)),{watchKeys:b}}();ka.support&&ha.bind("touchstart.jcrop",ka.newSelection),X.hide(),H(!0);var qa={setImage:F,animateTo:v,setSelect:w,setOptions:A,tellSelect:y,tellScaled:z,setClass:u,disable:B,enable:C,cancel:D,release:na.release,destroy:E,focus:pa.watchKeys,getBounds:function(){return[S*ba,T*ca]},getWidgetSize:function(){return[S,T]},getScaleFactor:function(){return[ba,ca]},getOptions:function(){return J},ui:{holder:U,selection:Y}};return L&&U.bind("selectstart",function(){return!1}),O.data("Jcrop",qa),qa},a.fn.Jcrop=function(b,c){var d;return this.each(function(){if(a(this).data("Jcrop")){if("api"===b)return a(this).data("Jcrop");a(this).data("Jcrop").setOptions(b)}else"IMG"==this.tagName?a.Jcrop.Loader(this,function(){a(this).css({display:"block",visibility:"hidden"}),d=a.Jcrop(this,b),a.isFunction(c)&&c.call(d)}):(a(this).css({display:"block",visibility:"hidden"}),d=a.Jcrop(this,b),a.isFunction(c)&&c.call(d))}),this},a.Jcrop.Loader=function(b,c,d){function e(){g.complete?(f.unbind(".jcloader"),a.isFunction(c)&&c.call(g)):window.setTimeout(e,50)}var f=a(b),g=f[0];f.bind("load.jcloader",e).bind("error.jcloader",function(b){f.unbind(".jcloader"),a.isFunction(d)&&d.call(g)}),g.complete&&a.isFunction(c)&&(f.unbind(".jcloader"),c.call(g))},a.Jcrop.defaults={allowSelect:!0,allowMove:!0,allowResize:!0,trackDocument:!0,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:.6,bgFade:!1,borderOpacity:.4,handleOpacity:.5,handleSize:null,aspectRatio:0,keySupport:!0,createHandles:["n","s","e","w","nw","ne","se","sw"],createDragbars:["n","s","e","w"],createBorders:["n","s","e","w"],drawBorders:!0,dragEdges:!0,fixedSupport:!0,touchSupport:null,shade:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onDblClick:function(){},onRelease:function(){}}}(jQuery),DM.ImageUpload={init:function(a,b){var c=this;this.conf=b,this.resizeRatio=1,$(document).ready(function(){var a=$("#file-upl");a.val("").removeAttr("disabled"),$("#js-img-area img").length>0&&c.preparePreLoadedImage($($("#js-img-area img")[0])),$("#select-prfl-img").transloadit({wait:!0,autoSubmit:!1,modal:!1,onStart:function(){$(".hldr-r .err").html(""),$("#js-img-area").hide(),$(".hldr-r .wrppr p").hide(),c.startLoading()},onError:c.errorLoading,onCancel:c.cancelLoading,onSuccess:function(a){var b=a.results.reformat?a.results.reformat[0]:a.results.image_check[0],d=b.meta.width,e=b.meta.height,f=$("#js-img-area"),g=f.width(),h=f.height();d>g&&(e=Math.round(e*(g/d)),d=g),e>h&&(d=Math.round(d*(h/e)),e=h),c.resizeRatio=b.meta.width/d,$("#js-img-area").html('<img alt="image for cropping" src="'+b.url+'" width="'+d+'" height="'+e+'" class="d-n" />'),$(".js-prvw-area").html('<img id="edit-prfl-img-prev" alt="image preview" src="'+b.url+'" width="'+b.meta.width+'" height="'+b.meta.height+'" class="d-n" />'),$("#edit-prfl-img .image-url").val(b.url),$("#edit-prfl-img .image-width").val(b.meta.width),$("#edit-prfl-img .image-height").val(b.meta.height),c.makeEditable(c.conf.width,c.conf.height,c.resizeRatio,b.meta.width,b.meta.height),c.finishLoading()}}),a.bind("change",function(a){a.target.value&&$($(a.target).parents("form")[0]).submit()}),$("#edit-prfl-img").transloadit({wait:!0,fields:!0,autoSubmit:!0,modal:!1}),$("#edit-prfl-img .js-submit").parent().prepend('<b class="loading" style="visibility: hidden;"></b>'),$(".wrppr").append($('<div class="loading f-12 gr4ox">The picture is being uploaded<br /></div>').append($('<a href="#">Cancel</a>').bind("click",function(a){$("#select-prfl-img").data("transloadit.uploader").cancel(),a.preventDefault()})).hide()),-1!==window.navigator.userAgent.indexOf("AppleWebKit")&&(a.addClass("js-file-chooser").wrap('<div class="reg-fld cleared"></div>'),a.attr("size","9").parent().append('<button id="fake-file-chooser-btn" type="button" class="reg-btn wocc"><b class="arrow-small-r"></b><span class="f-18">Select an image</span></button>'),$("#fake-file-chooser-btn").bind("click",function(a){$("#file-upl").click()}))})},preparePreLoadedImage:function(a){var b=a.width(),c=a.height(),d=$("#js-img-area"),e=d.width(),f=d.height();b>e&&(c=Math.round(c*(e/b)),b=e),c>f&&(b=Math.round(b*(f/c)),c=f),this.resizeRatio=a.width()/b,$("#js-img-area img").attr("width",b).attr("height",c),$(".js-prvw-area").html('<img id="edit-prfl-img-prev" alt="image preview" src="'+a.attr("src")+'" width="'+a.width()+'" height="'+a.height()+'" />'),$("#edit-prfl-img .image-url").val(a.attr("src")),$("#edit-prfl-img .image-width").val(a.width()),$("#edit-prfl-img .image-height").val(a.height()),$(".hldr-r .wrppr p").hide(),this.makeEditable(this.conf.width,this.conf.height,this.resizeRatio,a.width(),a.height()),this.finishLoading()},makeEditable:function(a,b,c,d,e){jQuery(function(d){d("#js-img-area img").Jcrop({onSelect:function(e){var f=Math.round(a/c)/e.w,g=Math.round(b/c)/e.h;d("#edit-prfl-img-prev").css({width:Math.round(f*boundx*c)+"px",height:Math.round(g*boundy*c)+"px",marginLeft:"-"+Math.round(f*e.x*c)+"px",marginTop:"-"+Math.round(g*e.y*c)+"px"}),d("#x1").val(Math.floor(Math.round(e.x)*c)),d("#x2").val(Math.ceil(Math.round(e.x2)*c)),d("#y1").val(Math.floor(Math.round(e.y)*c)),d("#y2").val(Math.ceil(Math.round(e.y2)*c))},aspectRatio:a/b,bgOpacity:.2,minSize:[Math.round(a/c),Math.round(b/c)]},function(){var a=this.getBounds();boundx=a[0],boundy=a[1];var b=this.getOptions().minSize[0],c=this.getOptions().minSize[1],d=Math.round(boundx/2)-Math.round(b/2),e=Math.round(boundy/2)-Math.round(c/2);this.ui.holder.css({left:Math.round((this.ui.holder.parent().width()-this.ui.holder.width())/2),top:Math.round((this.ui.holder.parent().height()-this.ui.holder.height())/2)}),this.setSelect([d,e,d+b,e+c])})}),$(".js-submit").removeAttr("disabled").removeClass("reg-btn-dis"),$("#edit-prfl-img .loading").css("visibility","hidden"),$("#edit-prfl-img").submit(function(){$(".js-submit").attr("disabled","disabled").addClass("reg-btn-dis"),$("#edit-prfl-img .loading").css("visibility","visible"),$("#file-upl").attr("disabled","disabled")})},startLoading:function(){$(".hldr-r .loading").show(),$(".hldr-r .wrppr p").hide(),$("#js-img-area").hide(),$(".js-prvw-area img").hide()},finishLoading:function(){$(".hldr-r .loading").hide(),$("#js-img-area").show(),$(".js-prvw-area img").show()},cancelLoading:function(){$(".hldr-r .loading").hide(),0===$("#js-img-area img").length?$(".hldr-r .wrppr p").show():($("#js-img-area").show(),$(".js-prvw-area img").show())},errorLoading:function(a){$(".hldr-r .loading").hide(),$(".hldr-r .err").html(a.message),$(".hldr-r .wrppr p").show()}},DM.later(["DOM_READY"],function(){window.cropWidth&&window.cropHeight&&DM.ImageUpload.init("prfl-edit-img",{width:window.cropWidth,height:window.cropHeight})}),DM.EditSocial=function(a,b){this.init(a,b)},DM.EditSocial.prototype=function(){function a(a){var b=a&&document.getElementById(a);b&&b.submit&&b.submit()}return{SEL_ANCHOR:".dms-profile-delete",SEL_BUBBLE:".dms-profile-confirm",SEL_CANCEL:".dms-profile-cancel",SEL_REMOVE:".dms-profile-remove",SEL_DELETE_DISABLED:".dms-profile-delete-disabled",bubbleTpl:"{content}",self:this,init:function(a,b){this.el=Ext.get(a),this.el&&(Ext.apply(this,b),this.el.on("click",this.showBubble,this,{delegate:this.SEL_ANCHOR,preventDefault:!0}),Ext.select(this.SEL_DELETE_DISABLED).on("click",function(a){a.preventDefault()}))},showBubble:function(b,c){var d,e,f=Ext.get(c);if(f.blur(),e=f.next(this.SEL_BUBBLE),e&&e.isVisible())return!1;if(this.activeBubble&&this.hideBubble(),!e){d=new Ext.Template(this.bubbleTpl).compile(),e=d.insertAfter(f,{content:this.content},!0);var g=this;e.child(this.SEL_CANCEL).on("click",function(a){a.preventDefault(),g.hideBubble.createDelegate(g,[e])()}),e.child(this.SEL_REMOVE).on("click",function(b){b.preventDefault(),a.createDelegate(g,[AND.getParams(f.dom)[0]])()})}e.setStyle("display","block"),this.activeBubble=e},hideBubble:function(a){a||(a=this.activeBubble),a.setStyle("display","none")}}}(),DM.SocialBtnPopup=function(a,b){this.init(a,b)},DM.SocialBtnPopup.prototype={init:function(a,b){var c=this;this.el=Ext.get(a),this.el&&(Ext.apply(this,b),this.el.select("a").each(function(a){a.on("click",c.openPopup,a,{preventDefault:!0})}))},openPopup:function(a,b){if("function"==typeof DM.popup){var c=[500,500];a.preventDefault(),b=Ext.get(b),b.is(".btn-fb")?c=[500,500]:b.is(".btn-twttr")?c=[800,790]:b.is(".btn-ggl")&&(c=[450,500]),DM.popup(b.dom.href,c[0],c[1])}}},DM.RC=DM.RC||{},function(){function a(){return window.location.toString().indexOf("/registration/profile.html")>-1}DM.RC.spinner=function(){a()||(DM.RC.spinner=function(a){var b=$(".rc-content"),c=$(".rc-spinner"),d=$("#js-comments"),e={show:{callback:function(){b.append('<div class="rc-spinner"><img src="http://f.mol.im/i/furniture/fff/preload-inline.gif" /><span>Loading...</span></div>'),d.addClass("rc-transparent-comments-list")}},hide:{callback:function(){c=$(".rc-spinner"),d.removeClass("rc-transparent-comments-list"),c.remove()}}};e[a].callback&&e[a].callback()})},DM.RC.initialize=function(){if(!a()){var b=$(".rc-content"),c=$("#js-comments");b.append('<div class="rc-spinner"><img src="http://f.mol.im/i/furniture/fff/preload-inline.gif" /><span>Loading...</span></div>'),c.addClass("rc-transparent-comments-list")}}}(),DM.RC.Templates=function(){var a="Enter your reply...",b=new Ext.Template('<button type="submit" class="btn anchor-comment js-newcomment newcomment-wide">New Comment</button><button type="submit" class="btn anchor-comment js-newcomment newcomment-small">New</button>').compile(),c=new Ext.Template('<div class="submission-message submission-{type}"><div class="submission-feedback-icon"></div><div class="submission-feedback-message">{message}</div></div>').compile(),d='<a class="reportAbuseLink" href="{abuseLink}" rel="nofollow"><div title="Report abuse" class="reportAbuseIcon"></div></a>',e=new Ext.Template('<div id="comment-{commentId}" class="{type} {type}-post bogr1 cleared">'+d+'<div class="avatar"><a href="{userProfileUrl}" class="rc-avatar-link"><img src="{userProfileImageUrl}?cb={formattedCurrentDate}"style="width: {avatarSide}px;clip: rect(0px {avatarSide}px {avatarSide}px 0px);"onerror="this.style.display=\'none\';"/></a></div><div class="container"><p class="user-info">{userInfo}</p><p class="{type}-body {type}-text">{body}</p><div class="rating {ratingClass}" rel="{commentId}"><div class="reply-buttons">{replyButtonHTML}{newCommentButtonHTML}</div>{shareHTML}<a class="js-rate js-rate-down" href="#"><div class="rating-button grey-rating-button rating-button-down"><div class="rate-down"></div><div class="rating-button-inline">{votesDownValue}</div></div></a><a class="js-rate js-rate-up" href="#"><div class="rating-button grey-rating-button rating-button-up"><div class="rate-up"></div><div class="rating-button-inline">{votesUpValue}</div></div></a><span style="float:right;" class="gr5ox">{voteButtonText}</span> </div><div class="comment-replies">{repliesHtml}</div></div></div>').compile(),f=new Ext.Template('<div id="comment-{commentId}" class="comment comment-post bogr1 cleared"><p class="comment-title f-b"><a href="/reader-comments/p/comment/link/{commentId}">{articleTitle}</a></p>'+d+'<div class="container"><a href="/reader-comments/p/comment/link/{commentId}"><p class="comment-body comment-text">{body}</p></a><div class="rating {ratingClass}" rel="{commentId}"><div class="shareComment"><a class="fShareComment"></a><a class="tShareComment"></a><span class="pShareComment"></span><span class="gShareComment"></span><span class="copyCommentLink"></span><span class="shareExpansionAnchor"></span></div><a class="js-rate js-rate-down" href="#"><div class="rating-button grey-rating-button rating-button-down"><div class="rate-down"></div><div class="rating-button-inline">{votesDownValue}</div></div></a><a class="js-rate js-rate-up" href="#"><div class="rating-button grey-rating-button rating-button-up"><div class="rate-up"></div><div class="rating-button-inline">{votesUpValue}</div></div></a><span style="float:right;" class="gr5ox">Click to rate</span></div><div class="comment-replies"></div></div></div>').compile(),g=new Ext.Template('<button type="submit" class="btn anchor-reply-{type} js-reply" rel="reply-form-{id}">Reply</button>').compile(),h=new Ext.Template('<div class="reply-form textarea-holder field"><a id="reply-form-{id}" name="reply-form-{id}"></a><textarea class="js-validate js-countdown js-defaultvalue js-expand textarea-input"cols="40"rows="2"title="'+a+'"></textarea><button type="submit" class="btn js-reply-submit">Post</button></div>').compile(),i=new Ext.Template('<div class="lightBoxContent"><input id="copyLinkInput" class="copyLinkInput" onfocus="this.select();" readonly="true" type="text" value="{commentLink}" /><p>Copy link to paste in your message</p></div>');return{newCommentButtonTemplate:b,inlineSubmissionResponse:c,articleCommentTemplate:e,userCommentTemplate:f,replyButtonTemplate:g,replyFormTemplate:h,copyCommentLinkTemplate:i}}(),DM.RC.Utils=function(){function a(a){return"message"!=a.id?Ext.get(a).next("button"):Ext.get(a).parent().next(".buttons-holder").down(".btn-submit")}function b(b){var c=a(b);c.addClass("btn-disabled"),c.dom.disabled="true"}function c(b){var c=a(b);c.removeClass("btn-disabled"),c.dom.disabled=void 0}return{getSubmitButton:a,disableButton:b,enableButton:c}}(),DM.ReaderComments=function(){var UI,RCTemplates=DM.RC.Templates,RCUtils=DM.RC.Utils,constructor=function(){function getUrlParam(a){url=window.location.href;var b=url.indexOf("?");if(b>-1)for(var c=url.substring(b+1),d=c.split("&"),e=0;e<d.length;e++){var f=d[e].split("=");if(decodeURIComponent(f[0])==a)return decodeURIComponent(f[1])}return null}function inlineSubmissionMessage(a,b,c){var d=b.up(".comment-replies")||b;switch(clearInlineSubmissionMessage(),a){case"success":c=moderated?"Thanks for sharing your comment. Comments on this article are moderated. Please be patient for your comment to appear.":"Thanks for sharing your comment!";break;case"pending":c="Sending...";break;case"invalid":c||(c="Invalid comment");break;case"error":c="Apologies - something went wrong. Please try later."}c&&Ext.DomHelper.insertAfter(d,RCTemplates.inlineSubmissionResponse.apply({message:c,type:a}))}function clearInlineSubmissionMessage(){Ext.each(Ext.get("reader-comments").query(".submission-message"),function(a){Ext.fly(a).remove()})}function calcVoteRatings(a){return{up:(a.voteCount+a.voteRating)/2,down:(a.voteCount-a.voteRating)/2}}function rejectedComment(){var a=Ext.fly("js-comments").getWidth(),b=a>=700?"":500>a?'style="margin-top: 2px !important; font-size: 12px !important;"':'style="margin-top: 4px !important;"',c='<a href="/home/house_rules.html">house rules</a>',d='<div id="comment-not-found" class="bogr2 bogr3 cleared comment-post"><div class="rejected-left"></div><div class="rejected-body"><p class="rejected-body-text" '+b+">Sorry. The content of this comment did not conform to our "+c+', and it has now been removed by our moderators.</p></div><div class="rejected-right"></div></div>';Ext.DomHelper.insertFirst("js-comments",d),Ext.fly("comment-not-found").child(".rejected-right").on({click:function(){Ext.fly("comment-not-found").remove()}})}function getComment(a){if(a){var b=Ext.get(a).up(".reply");return b?b:Ext.get(a).up(".comment")}}function getCommentData(a){var b=getComment(a);if(b){var c=b.hasClass("reply")?".reply-text":".comment-text",d=b.id.substring(8),e=DMS.domain+"/reader-comments/p/comment/link/"+d,f=b.child(c).dom.innerHTML,g=b.child(".js-usr"),h=g?g.dom.innerHTML:Ext.query(".commenter-name")[0].innerHTML.replace("'s Comments","");return{commentId:d,commentLink:e,commentBody:f,commenterName:h,commentUrl:e,abuseLink:"/home/reportAbuseInComment.html?articleId="+b.assetId+"&commentId="+b.id}}}function onCommentMouseOver(a,b,c){var d=Ext.get(a.getTarget(".comment"));d&&(d.addClass("hovered"),DMS.RC.updateHoverElements())}function onCommentMouseLeave(a,b,c){var d=Ext.get(a.getTarget(".comment"));d&&(disableCommentFeatures(d),d.removeClass("hovered"),DMS.RC.updateHoverElements())}function onReplyMouseOver(a,b,c){var d=Ext.get(a.getTarget(".reply"));d&&(disableCommentFeatures(Ext.get(Ext.query(".comment.hovered",Ext.getDom("js-comment"))[0])),d.addClass("hovered"),DMS.RC.updateHoverElements())}function onReplyMouseLeave(a,b,c){var d=Ext.get(a.getTarget(".reply"));d&&(disableCommentFeatures(d),d.removeClass("hovered"),DMS.RC.updateHoverElements())}function disableCommentFeatures(a){if(a){var b=Ext.get(a);b.child(".shareComment").hide(),b.child(".reportAbuseLink").hide()}}function initComments(){Ext.each(Ext.query(".comment",Ext.getDom("js-comments")),function(a){initComment(Ext.get(a))}),document.onkeydown=function(a){var b=a?a.which||a.keyCode:void 0;27==b&&DM.Lightbox.getInstance()&&closeCopyCommentLinkLightbox()},Ext.getBody().on("click",closeCopyCommentLinkLightbox)}function initFurniture(){var a=Ext.get("message"),b=Ext.get("addYourCommentButton");if(a)b.on("click",function(){a.focus()});else{var c=Ext.get("addYourCommentButton");c&&c.hide()}}function toggleCssClass(a,b,c){c?a.addClass(b):a.removeClass(b)}function initCommentStyle(a){if(!a.hasClass("reply")){var b=0==a.query(".reply").length,c=a.query("textarea").length>0;toggleCssClass(a,"no-replies",b),toggleCssClass(a,"contains-reply-textarea",c)}}function initComment(a){initCommentStyle(a);var b=a.child(".shareComment");b.on({click:DMS.RC.shareComment}),b.down(".copyCommentLink").on({click:function(a,b){copyCommentLinkClicked(a,b,!1)}}),b.down(".shareExpansionAnchor").on({click:function(a,b){copyCommentLinkClicked(a,b,!0)}});var c=numberOfAttempts=10,d=function(){c--;try{DMS.RC.gPlusEnhance(b),console.log("Called DMS.RC.gPlusEnhance ",numberOfAttempts-c," th attempt.")}catch(a){0!==c&&setTimeout(d,1e3)}};return d(),a.hasClass("reply")?a.hover(onReplyMouseOver,onReplyMouseLeave):(a.hover(onCommentMouseOver,onCommentMouseLeave),void Ext.each(Ext.query(".reply",Ext.getDom(a)),function(a){initComment(Ext.get(a))}))}function isCopyLinkLightbox(a){var b=Ext.get(a);return b&&("copyLinkLightboxArrow"==b.id||"copyLinkLightbox"==b.id||null!=Ext.get(a).up("#copyLinkLightbox"))}function closeCopyCommentLinkLightbox(a,b){isCopyLinkLightbox(b)||(Ext.get("copyLinkLightbox").hide(),Ext.get("copyLinkLightboxArrow").hide())}function copyCommentLinkClicked(a,b,c){var d=getCommentData(b);if(d){var e,f,g,h=Ext.get(b),i=Ext.get("copyLinkLightbox"),j=Ext.get("copyLinkLightboxArrow");Ext.get("copyLinkLightbox").show(),Ext.get("copyLinkLightboxArrow").show(),c?(i.dom.innerHTML='<div class="socialButtons">'+DMS.RC.SOCIAL_ELEMENTS_HTML+"</div>"+RCTemplates.copyCommentLinkTemplate.apply({commentLink:d.commentUrl}),i.removeAllListeners(),i.on({click:function(a,b){DMS.RC.shareComment(a,b,d)}}),DMS.RC.gPlusEnhance(i,d)):i.dom.innerHTML=RCTemplates.copyCommentLinkTemplate.apply({commentLink:d.commentUrl}),e=h.getLeft()-i.getWidth()/2+h.getWidth()/2,f=h.getTop()+h.getHeight(),g=h.getLeft(),j.setLocation(g,f),i.setLocation(e,f+10),Ext.get("copyLinkInput").focus(),a.stopPropagation()}}function replySubmitHandler(a){var b=Ext.get(a),c=Ext.get("formAssetId"),d=b.parent().select("a").elements[0].name.split("reply-form-")[1],e=Ext.get(b.parent().select(".textarea-input").elements[0]);b.on("click",function(){var a=e.dom.value;if(validateMessage(e.dom)){RCUtils.disableButton(e.dom),inlineSubmissionMessage("pending",e.parent());var b={assetId:c.dom.value,message:a,replyTo:d,source:"desktop"};Ext.Ajax.request({method:"POST",url:"/reader-comments/p/comment/postCommentInline",params:b,success:function(f){var g=JSON.parse(f.responseText);if("success"===g.status)inlineSubmissionMessage("success",e.parent()),e.up(".reply-form").remove();else if("error"===g.status&&"login"===g.reason){if(RCUtils.enableButton(e.dom),!DM.isLoggedIn&&DM.Login){var h=new Date;h.setHours(h.getHours()+1),commentAssetToSubmitCookie=c.dom.value,commentMessageToSubmitCookie=a,commentReplyToSubmitCookie=d,clearInlineSubmissionMessage(),DM.setCookie("commentAssetToSubmitCookie",commentAssetToSubmitCookie,h,"/"),DM.setCookie("commentMessageToSubmitCookie",commentMessageToSubmitCookie,h,"/"),DM.setCookie("commentReplyToSubmitCookie",commentReplyToSubmitCookie,h,"/"),DM.Login.open(null,null,{params:{url:"/registration/p/lightbox_login.html?targetUrl="+window.location}})}}else commentSubmissionError(b,g,e)},failure:function(a,c){commentSubmissionError(b,a,e)}})}})}function validateMessage(a){function b(){return"message"!=a.id?Ext.get(a).parent():RCUtils.getSubmitButton(a).up(".post-comment-form")}var c=b(a),d=a.value&&a.value.length>COMMENT_MAX_LENGTH,e=""==a.value||a.value==a.title||d;return d?inlineSubmissionMessage("invalid",c,"Sorry! Your comment is "+(a.value.length-COMMENT_MAX_LENGTH)+" characters too long."):clearInlineSubmissionMessage(c),e?RCUtils.disableButton(a):RCUtils.enableButton(a),!e}function initReplyInput(a){var b=a.child(".textarea-input");validateMessage(b.dom),b.on("blur",function(a,b){""==b.value&&Ext.get(b).up(".textarea-holder").remove()}),b.on("focus",function(b,c){validateMessage(c),clearInlineSubmissionMessage(a)}),b.on("keyup",function(a,b){validateMessage(b)})}function initCommentInput(a){var b=a.child(".textarea-input");validateMessage(b.dom),b.on("blur",function(a,b){""==b.value&&(b.value=b.title)}),b.on("focus",function(a,b){b.value==b.title&&(b.value=""),validateMessage(b),clearInlineSubmissionMessage()}),b.on("keyup",function(a,b){validateMessage(b,!0)})}function setFocus(a,b){window.scrollTo(0,a.getY()-100),setTimeout(function(){b.focus()},50)}function initCommentForm(){var a=Ext.get("readerCommentsCommand");a&&(initCommentInput(a.down(".comment-form")),a.child(".btn-clear").on("click",function(a,b){var c=Ext.get(b).parent().prev(".textarea-holder").down(".textarea-input");c.dom.value="",validateMessage(c),c.focus()}))}function openReplyInput(a,b){if(a.child(".textarea-input")){var c=Ext.get(a.child(".anchor-reply-comment").dom.getAttribute("rel"));b&&setFocus(c,c.next(".textarea-input"))}else{var d=a.child(".rating").dom.getAttribute("rel"),e=Ext.DomHelper.append(a.child(".comment-replies"),RCTemplates.replyFormTemplate.apply({id:d}),!0);initReplyInput(e),replySubmitHandler(e.child(".js-reply-submit")),b&&e.child(".textarea-input").focus(),initCommentStyle(Ext.get("comment-"+d))}}function initReplyForms(){var a=Ext.getDom("js-comments");Ext.each(Ext.query(".reply-form",a),function(a){initReplyInput(Ext.get(a))}),Ext.each(Ext.query(".js-reply-submit",a),function(a){replySubmitHandler(a)}),Ext.each(Ext.query(".js-newcomment",a),function(a){Ext.get(a).on("click",function(){clearInlineSubmissionMessage(),setFocus(Ext.get("newcomment"),Ext.get("message"))})}),Ext.each(Ext.query(".js-reply.anchor-reply-comment",a),function(a){var b=Ext.get(a);b.on("click",function(){openReplyInput(b.up(".comment"),!0)})}),Ext.each(Ext.query(".js-reply.anchor-reply-reply",a),function(a){Ext.get(a).on("click",function(){var b=Ext.get(a.getAttribute("rel"));setFocus(b,b.next(".textarea-input"))})})}DM.RC.initialize();var COMMENT_MAX_LENGTH=1e3,MAX_COMMENTS=10,MAX_COOKIE_RATINGS=50,REPLIES_INITIAL_NUMBER=2,REPLIES_PAGINATION_SIZE=25,defaultPaginationConfig,maxComments=MAX_COMMENTS,gplusClientId,totalComments=0,offset=0,viewAll=!1,allowNewComments,rc,tabs,tabCommands=["newest","oldest","bestRated","worstRated"],tabNames=["newest","oldest","best","worst"],tabIndex=0,buttonLabel,ratingsCookie,abuseCookie,commentAssetToSubmitCookie,commentMessageToSubmitCookie,commentReplyToSubmitCookie,articleId,userId,period,mode,moderated,loadComments=function(a){var b="?max="+a.maxResults,c=tabCommands[tabIndex];if(a.offset&&(b+="&offset="+a.offset),a.period&&(b+="&period="+a.period),"newest"==c?b+="&order=desc":"oldest"==c?b+="&order=asc":"bestRated"==c?b+="&sort=voteRating&order=desc":"worstRated"==c&&(b+="&sort=voteRating&order=asc"),setButtonLabel("Loading..."),DM.RC.spinner("show"),"article"===a.mode){try{var d=!DM.SHOUT.isOldArticle&&DM.SHOUT.shoutChannels&&!JSON.parse(DM.SHOUT.shoutChannels).disabledMolShout&&JSON.parse(DM.SHOUT.shoutChannels).disabledChannels;d&&-1==d.indexOf(PageCriteria.subchannel)&&(b+="&rcCache=shout")}catch(e){console.log("Unable to parse rc cache",e)}getUrlParam("rcnew")&&(b+="&rcnew=true"),Ext.Ajax.request({url:"/reader-comments/p/asset/readcomments/"+articleId+b,callback:loadCommentsCallback,method:"get"})}else"user"===a.mode&&Ext.Ajax.request({url:"/reader-comments/p/user/readcomments/"+userId+b,callback:loadCommentsCallback,method:"get"})},createCommentHtml=function(a,b){function c(a){for(var b="",c=0;c<a.length;c++)stopCreatingSubfolders=c>=a.length-1||c>=5,b+=a[c]+(stopCreatingSubfolders?"":"/");return b.toString()}function d(a){var b="http://i.dailymail.co.uk";return a.hasProfilePicture?b+"/i/user/"+c(a.userIdentifier)+"_p.jpg":b+"/i/furniture/reg-new/dummy_148x178.jpg"}var e=calcVoteRatings(a),f="",g=b?"reply":"comment";return"reply"!=g&&a.replies.comments.length>0&&(a.replies.totalCount>REPLIES_INITIAL_NUMBER&&(f+='<div class="more-replies-container"><p><span class="number-of-replies">'+REPLIES_INITIAL_NUMBER+" of "+a.replies.totalCount+' replies</span><a class="more-replies" rel="'+a.id+'">'+(a.replies.totalCount>REPLIES_INITIAL_NUMBER+REPLIES_PAGINATION_SIZE?"See next "+REPLIES_PAGINATION_SIZE+" replies":"See all replies")+'<span class="rc-down-arrow"></span></a></p></div>'),Ext.each(a.replies.comments,function(b){f+=createCommentHtml(formatUserInfo(b),a.id)})),RCTemplates.articleCommentTemplate.apply({commentId:a.id,type:g,body:a.message,votesUpValue:e.up,votesDownValue:e.down,ratingClass:getRatingClass(a.id),avatarSide:b?35:55,userProfileUrl:getUserProfileUrl(a),userInfo:'<a href="'+getUserProfileUrl(a)+'" class="js-usr">'+a.userAlias+"</a>, "+a.userLocation+a.formattedDateAndTime,repliesHtml:f,shareHTML:DMS.RC.SHARE_ELEMENTS_HTML,voteButtonText:""==getRatingClass(a.id)?"Click to rate":"Rated",newCommentButtonHTML:allowNewComments?b?"":RCTemplates.newCommentButtonTemplate.apply():"",replyButtonHTML:allowNewComments&&"reply"!=g?RCTemplates.replyButtonTemplate.apply({type:g,id:b?b:a.id}):"",abuseLink:"/home/reportAbuseInComment.html?articleId="+a.assetId+"&commentId="+a.id,userProfileImageUrl:d(a),formattedCurrentDate:formatCurrentDate()})},getUserProfileUrl=function(a){return"/registration/"+a.userIdentifier+"/"+a.userAliasUrl+"profile.html"},formatCurrentDate=function(){var a=new Date;return a.getFullYear().toString()+(a.getMonth()+1).toString()+a.getDate().toString()},createUserHtml=function(a){var b=calcVoteRatings(a);return RCTemplates.userCommentTemplate.apply({articleId:a.assetId,articleTitle:a.assetHeadline,commentId:a.id,body:a.message,ratingClass:getRatingClass(a.id),votesUpValue:b.up,votesDownValue:b.down,abuseLink:"/home/reportAbuseInComment.html?articleId="+a.assetId+"&commentId="+a.id})},formatUserInfo=function(a){return a.userAliasUrl="string"==typeof a.userAlias?a.userAlias.replace(/ /g,"-")+"/":"",a.userLocation="string"==typeof a.userLocation&&"default"!==a.userLocation?a.userLocation+", ":"",a},loadCommentsCallback=function(a,b,c){var d,e=Ext.util.JSON.decode(c.responseText),f=e&&e.payload&&e.payload.page?e.payload.page:[],g="";e.payload&&e.payload.parentCommentsCount&&(e.payload.total=e.payload.parentCommentsCount),totalComments=e.payload&&e.payload.total?e.payload.total:totalComments;for(var h=0,i=f.length;i>h;h++)d=formatUserInfo(f[h]),"article"===mode?g+=createCommentHtml(d):"user"===mode&&(g+=createUserHtml(d));var j=Ext.get("js-comments");j&&(j.dom.innerHTML=g),Ext.each(f,function(a){initComment(Ext.get("comment-"+a.id))}),viewAll?(setButtonLabel("View "+tabNames[tabIndex]+" "+maxComments),DM.Pagination.getInstance().doPagination(e.payload)):(setButtonLabel("View all"),DM.Pagination.getInstance().hide()),totalComments>maxComments&&Ext.select(".js-view-all-link").removeClass("hidden"),f.length>=0&&Ext.each(Ext.query("div.rc-content",rc),function(a){Ext.fly(a).removeClass("hidden")});var k=Ext.urlDecode(window.location.search).jumpTo,l=Ext.urlDecode(window.location.search).openReply,m=Ext.fly(k);m&&(m.replaceClass("bogr1","comment-selected"),l&&jQuery(document).ready(function(){var a=jQuery("#"+k+" button.js-reply");setTimeout(function(){a&&a[0]&&a[0].click()},5)}),window.location.hash="#"+k),initReplyForms(),DM.RC.spinner("hide")},toggleViewAll=function(a){viewAll=!viewAll,loadComments(viewAll?a:{maxResults:maxComments,page:1,mode:mode,period:period})},commentSubmissionError=function(a,b,c){c&&(RCUtils.enableButton(c.dom),inlineSubmissionMessage("error",c.parent()));var d="assetId:"+a.assetId+",message:"+a.message;a.replyTo&&(d+=",replyTo:"+a.replyTo),tedParams={status:b.status,params:d},b.status&&(tedParams.responseCode=b.code),DM.getCookie("authid")&&(tedParams.authidCookie=DM.getCookie("authid")),DM.ted.tedEvent("reader-comments",tedParams)},readerCommentsHandler=function(a,b){function c(c,d,e){!DM.isLoggedIn&&DM.Login&&(a.preventDefault(),DM.Login.open(a,b,{params:{url:"/registration/p/lightbox_login.html?usr=1&targetUrl="+encodeURIComponent(e.dom.href)}}))}var d,e=a.getTarget(".js-view-all-link",4,!0);if(e)return closeCopyCommentLinkLightbox(a,b),intellitrackerLog(),toggleViewAll(defaultPaginationConfig),void a.stopEvent();if(e=a.getTarget(".js-usr",3,!0))c(a,b,e);else if(Ext.get(b).parent().hasClass("rc-avatar-link"))c(a,b,Ext.get(b).parent());else if(e=a.getTarget("a.js-rate",3,!0)){var f=Ext.get(e.dom.parentNode);if(!f.hasClass("rated"))if(e.hasClass("js-rate-up")){var g=Ext.query("div.rating-button-up div.rating-button-inline",Ext.getDom(f))[0].innerHTML;d=f.dom.getAttribute("rel"),f.addClass("rated rated-up"),updateRatingsCookie(d,"+"),Ext.query("span.gr5ox",Ext.getDom(f))[0].innerHTML="Rated",Ext.query("div.rating-button-up div.rating-button-inline",Ext.getDom(f))[0].innerHTML=parseInt(g)+1,Ext.Ajax.request({method:"POST",url:"/reader-comments/p/comment/voteup/"+d,success:function(){}})}else if(e.hasClass("js-rate-down")){var g=Ext.query("div.rating-button-down div.rating-button-inline",Ext.getDom(f))[0].innerHTML;d=f.dom.getAttribute("rel"),f.addClass("rated rated-down"),updateRatingsCookie(d,"-"),Ext.query("span.gr5ox",Ext.getDom(f))[0].innerHTML="Rated",Ext.query("div.rating-button-down div.rating-button-inline",Ext.getDom(f))[0].innerHTML=parseInt(g)+1,Ext.Ajax.request({method:"POST",url:"/reader-comments/p/comment/votedown/"+d,success:function(){}})}a.stopEvent()}else if(e=a.getTarget(".js-more-link",3,!0)){var h=e.parent(".js-headers").child(".comments-user");if(!h)return;e.containerHeight=e.containerHeight||h.getHeight(),h.scale(void 0,e.hasClass("js-collapsed")?e.containerHeight:0,{
easing:"easeOut",duration:.65}),e.toggleClass("js-collapsed"),a.stopEvent()}else if(e=a.getTarget(".btn-submit",3,!0)){var i=Ext.get("message"),j=Ext.get("formAssetId"),k=i.dom.value;if(!validateMessage(i.dom))return;RCUtils.disableButton(i.dom),inlineSubmissionMessage("pending",i.parent());var l={assetId:j.dom.value,message:k,source:"desktop"},m="";getUrlParam("rcnew")&&(m+="?rcnew=true"),Ext.Ajax.request({method:"POST",url:"/reader-comments/p/comment/postCommentInline"+m,params:l,success:function(a){var b=JSON.parse(a.responseText);if("success"===b.status)i.dom.value=i.dom.title,validateMessage(i.dom),inlineSubmissionMessage("success",i.parent());else if("error"===b.status&&"login"===b.reason){if(RCUtils.enableButton(i.dom),!DM.isLoggedIn&&DM.Login){var c=new Date;c.setHours(c.getHours()+1),commentAssetToSubmitCookie=j.dom.value,commentMessageToSubmitCookie=k,clearInlineSubmissionMessage(),DM.setCookie("commentAssetToSubmitCookie",commentAssetToSubmitCookie,c,"/"),DM.setCookie("commentMessageToSubmitCookie",commentMessageToSubmitCookie,c,"/"),DM.Login.open(null,null,{params:{url:"/registration/p/lightbox_login.html?targetUrl="+window.location}})}}else commentSubmissionError(l,b,i)},failure:function(a,b){commentSubmissionError(l,a,i)}}),a.stopEvent()}else if(e=a.getTarget(".more-replies",3,!0)){var n=e.parent().parent().parent(),o=e.parent().parent(),p=e.dom.getAttribute("rel"),q=n.query(".reply-post").length,r="start="+q,s="/reader-comments/p/comment/morereplies/"+p+"?"+r;Ext.Ajax.request({url:s,callback:function(a,b,c){function d(a){var b=a.dom.innerHTML,c=b.indexOf("of "),d=b.indexOf(" replies");return 0>c||0>d?0:parseInt(b.substring(c+3,d))}var e=Ext.util.JSON.decode(c.responseText);if(!("200"!=e.code||e.payload.length<1)){var f=e.payload,g="";Ext.each(f,function(a){g+=createCommentHtml(formatUserInfo(a),p)}),Ext.DomHelper.insertAfter(o,g,!0),Ext.each(f,function(a){initComment(Ext.get("comment-"+a.id))});var h=Ext.get(o.query("span")[0]),d=d(h),i=n.query(".reply").length,j=d-i;j>0?(h.next("a").dom.innerHTML=(j>REPLIES_PAGINATION_SIZE?"See next "+REPLIES_PAGINATION_SIZE+" replies":"See all replies")+'<span class="rc-down-arrow"></span>',h.dom.innerHTML=i+" of "+d+" replies"):o.remove(),openReplyInput(Ext.get("comment-"+p),!1)}},method:"get"}),a.stopEvent()}},checkCookies=function(){var arrComments,currentComment,arrAbuseLink,currentAbuseLink;if(ratingsCookie){arrComments=Ext.query("div.comment-post",rc);for(var i=0,len=arrComments.length;len>i;i++)currentComment=arrComments[i],currentComment.ratings=Ext.get("reader-comments").query(".rating"),Ext.each(currentComment.ratings,function(el){currentComment.commentId=el.getAttribute("rel"),-1!=ratingsCookie.search(eval("/"+currentComment.commentId+"[+-]/"))&&(Ext.fly(el).addClass(getRatingClass(currentComment.commentId)),Ext.query("span.gr5ox",el)[0].innerHTML="Rated")})}if(abuseCookie){arrComments=Ext.query("div.comment-post",rc),arrAbuseLink=Ext.query("p.js-report-abuse",rc);for(var i=0,len=arrComments.length;len>i;i++)currentComment=arrComments[i],currentAbuseLink=arrAbuseLink[i],currentComment.rating=currentComment.getElementsByTagName("div")[0],currentComment.commentId=currentComment.rating.getAttribute("rel"),-1!=abuseCookie.search(eval(currentComment.commentId))&&(currentAbuseLink.innerHTML=currentAbuseLink.getElementsByTagName("a")[0].innerHTML,Ext.fly(currentAbuseLink).replaceClass("link-gr5ox",getAbuseClass(currentComment.commentId)))}if(commentAssetToSubmitCookie||commentMessageToSubmitCookie){var deleteDate=new Date;if(deleteDate.setDate(deleteDate.getDate()-1),commentAssetToSubmitCookie&&commentMessageToSubmitCookie){if(articleId!=commentAssetToSubmitCookie)return DM.setCookie("commentAssetToSubmitCookie","",deleteDate,"/"),DM.setCookie("commentMessageToSubmitCookie","",deleteDate,"/"),void DM.setCookie("commentReplyToSubmitCookie","",deleteDate,"/");var requestParams={assetId:commentAssetToSubmitCookie,message:commentMessageToSubmitCookie,source:"desktop"};commentReplyToSubmitCookie&&(requestParams.replyTo=commentReplyToSubmitCookie);var targetForm=Ext.get("readerCommentsCommand-message-field");Ext.Ajax.request({method:"POST",url:"/reader-comments/p/comment/postCommentInline",params:requestParams,success:function(a){DM.setCookie("commentAssetToSubmitCookie","",deleteDate,"/"),DM.setCookie("commentMessageToSubmitCookie","",deleteDate,"/"),DM.setCookie("commentReplyToSubmitCookie","",deleteDate,"/");var b=JSON.parse(a.responseText);"success"===b.status?inlineSubmissionMessage("success",targetForm):"error"===b.status&&"login"!=b.reason&&(commentSubmissionError(requestParams,b),inlineSubmissionMessage("error",targetForm)),window.location.hash="readerCommentsCommand-message-field"},failure:function(a,b){commentSubmissionError(requestParams,a),DM.setCookie("commentAssetToSubmitCookie","",deleteDate,"/"),DM.setCookie("commentMessageToSubmitCookie","",deleteDate,"/"),inlineSubmissionMessage("error",targetForm),window.location.hash="readerCommentsCommand-message-field"}})}else DM.setCookie("commentAssetToSubmitCookie","",deleteDate,"/"),DM.setCookie("commentMessageToSubmitCookie","",deleteDate,"/"),commentReplyToSubmitCookie&&DM.setCookie("commentReplyToSubmitCookie","",deleteDate,"/")}},updateRatingsCookie=function(a,b){var c=ratingsCookie?ratingsCookie.split(","):[];c.push(a+b)>MAX_COOKIE_RATINGS&&(c=c.slice(1));var d=new Date;d.setFullYear(2030),ratingsCookie=c.join(","),DM.setCookie("commentRatings",ratingsCookie,d,"/")},updateRatingCount=function(a,b){var c=Ext.query("span.js-vote-rating",a.dom)[0];0==b?(a.removeClass(["positive","negative"]),c.innerHTML="(0)"):(b>0?a.addClass("positive"):(b*=-1,a.addClass("negative")),c.innerHTML=b)},getRatingClass=function(a){if(ratingsCookie){var b=new RegExp(a+"([+-])").exec(ratingsCookie);if(b)switch(b[1]){case"+":return" rated rated-up";case"-":return" rated rated-down"}}return""},updateAbuseCookie=function(a){var b=abuseCookie?abuseCookie.split(","):[];b.push(a)>MAX_COOKIE_RATINGS&&(b=b.slice(1));var c=new Date;c.setFullYear(2030),abuseCookie=b.join(","),DM.setCookie("reportAbuse",abuseCookie,c,"/")},getAbuseClass=function(a){return abuseCookie&&-1!=abuseCookie.search(a+"")?"gr3ox":"link-gr5ox"},setFormValuesFromCookie=function(){var a=Ext.query("form.post-comment-form","reader-comments")[0];"undefined"!=typeof a&&(DM.getCookie("remember_me_cookie")&&"undefined"!=typeof a.rememberMe&&(a.rememberMe.checked=!0),DM.getCookie("reader_name_cookie")&&"undefined"!=typeof a.name&&(a.name.value=DM.getCookie("reader_name_cookie")),DM.getCookie("reader_town_cookie")&&"undefined"!=typeof a.townAndCountry&&(a.townAndCountry.value=DM.getCookie("reader_town_cookie")))},setButtonLabel=function(a){buttonLabel&&buttonLabel.each(function(b){b.dom.getElementsByTagName("span")[1].innerHTML=a})},tabHandler=function(a){for(var b=a.getTarget("li.dm-tab",5),c=tabs._tabs.length;c>0;)c--,b==tabs._tabs[c]&&(tabIndex=c);tabs._selectTab(b),viewAll=!0,intellitrackerLog(),toggleViewAll(defaultPaginationConfig)},intellitrackerLog=function(){DM.pageEvents.fireEvent(DM.pageEvents.PAGE_COMMENT_TAB_SWAPPED,DM.getPageMetadata({contentType:"comment-tab",tab:tabNames[tabIndex]}))};return DM.RC.getCommentData=getCommentData,{init:function(a){var b,c=a.params||{},d=null,e=null;Ext.apply(Ext.Fx,{fadeInS:function(a){var b=null,c="visible",d="easeOut";a=a||{};var e=this,f=e.dom,g=a.endOpacity||1;return Ext.isIE?(e.dom.style.opacity=1,e.dom.style.filter="alpha(opacity=100)"):e.queueFx(a,function(){Ext.fly(f).setOpacity(a.startOpacity||0),Ext.fly(f).fixDisplay(),f.style.visibility=c,arguments.callee.anim=Ext.fly(f).fxanim({opacity:{to:g}},a,b,.5,d,function(){Ext.fly(f).afterFx(a)})}),e}}),Ext.Element.addMethods(Ext.Fx),DMS.RC=DMS.RC||{},DMS.RC.gplusClientId=gplusClientId=c.gplusClientId,totalComments=c.total||0,mode=c.mode||"article",moderated=c.moderated,ratingsCookie=DM.getCookie("commentRatings"),abuseCookie=DM.getCookie("reportAbuse"),commentAssetToSubmitCookie=DM.getCookie("commentAssetToSubmitCookie"),commentMessageToSubmitCookie=DM.getCookie("commentMessageToSubmitCookie"),commentReplyToSubmitCookie=DM.getCookie("commentReplyToSubmitCookie"),allowNewComments=c.allowNewComments;var f=Ext.get(a.id);if(f&&(rc=f.dom),rc){"article"===mode?(d=new RegExp("article-id-([0-9]+)").exec(rc.className),articleId=d?d[1]:null):"user"===mode&&(e=new RegExp("user-id-([0-9]+)").exec(rc.className),userId=e?e[1]:null),defaultPaginationConfig={maxResults:Ext.urlDecode(window.location.search.substring(1)).max||100,page:1,offset:Ext.urlDecode(window.location.search.substring(1)).offset||0,reply:Ext.urlDecode(window.location.search.substring(1)).reply||null,articleId:articleId,userId:userId,greyStyle:!0,mode:mode,numberOfPageButtonsToShow:10},"user"===mode&&(period=c.period||"week",defaultPaginationConfig.period=period,defaultPaginationConfig.numberOfPageButtonsToShow=5),DM.Pagination.getInstance().init(loadComments,defaultPaginationConfig),Ext.get("reader-comments").on("click",readerCommentsHandler,this),checkCookies();var g=Ext.get("rc-tabs");if(g&&(tabs=new DM.RCTabs("reader-comments",{tabOnClass:["ow-igr5-bx wogr5","link-wox","dm-tab-on"],tabOffClass:["ow-igr2-bx","xogr2","link-gr5ox"],tabQuery:"li",_clickHandler:tabHandler})),buttonLabel=Ext.select(".view-more-container"),Ext.select(".pagination-container-bottom, .view-more-container-bottom a").on("click",function(){"#comments"!==window.location.hash?window.location.hash="#comments":window.location.hash="#reader-comments"},{delegate:"a"}),"article"===mode&&(b=window.location.hash.substring(1).match(/(comment\-\d+)/),b=b?b[1]:null)){viewAll=!0,setButtonLabel("View "+tabNames[tabIndex]+" "+maxComments),DM.Pagination.getInstance().doPagination({max:100,offset:c.offset||0,total:totalComments});var h=Ext.fly(b);h&&h.replaceClass("bogr1","comment-selected")}setFormValuesFromCookie(),"article"===mode&&initReplyForms()}window.location.hash.match(/#comment-not-found/)&&rejectedComment(),Ext.get("report-abuse-comfirm")&&updateAbuseCookie(Ext.get("report-abuse-comfirm").dom.className.split("|")[0]),initCommentForm(),initComments(),initFurniture(),window.RCdefferedTab?tabHandler(RCdefferedTab):(viewAll=Ext.urlDecode(window.location.search.substring(1)).offset&&Ext.urlDecode(window.location.search.substring(1)).max?!1:!0,toggleViewAll(defaultPaginationConfig))}}};return{getInstance:function(){return UI||(UI=constructor()),UI}}}(),DM.RCTabs=Ext.extend(Ext.util.Observable,{linkHk:".js-links",activeHk:"js-active",tabsQuery:".dm-tab",tabOffClass:null,tabOnClass:null,constructor:function(a,b){DM.RCTabs.superclass.constructor.call(this),b&&Ext.apply(this,b),this.el=Ext.get(a),Ext.fly(this.el.query(this.linkHk)[0]).on("click",this._clickHandler,this,{preventDefault:!0}),this._tabs=this.el.query(this.tabsQuery)},_clickHandler:function(a){},_selectTab:function(a){this.reset(),this.tab(a)},reset:function(){for(var a,b=this._tabs.length;b>0;)--b,a=Ext.get(this._tabs[b]),a.addClass(this.tabOffClass).removeClass(this.tabOnClass).removeClass(this.activeHk)},tab:function(a){Ext.fly(a).removeClass(this.tabOffClass).addClass(this.tabOnClass).addClass(this.activeHk)}}),DM.Pagination=function(){function a(){function a(a){a.stopEvent();var b=a.getTarget("A",5);b&&(d.page=parseInt(b.getAttribute("rel")),d.offset=parseInt(d.page-1)*d.maxResults,c(d))}var b,c,d={maxResults:100,offset:0,page:1,showPageNumber:!0,showPagingOptions:!1,greyStyle:!1,numberOfPageButtonsToShow:10};return{init:function(e,f){c=e,Ext.apply(d,f),b=Ext.query("div.pagination-container","content"),Ext.each(b,function(b){Ext.fly(b).on("click",a)})},doPagination:function(a){if("object"==typeof a){for(var c=parseInt(a.max),e=parseInt(a.offset),f=parseInt(a.total),g=d.numberOfPageButtonsToShow,h=Math.ceil(f/c),i=parseInt(e/c),j=1+i,k=[],l=[],m=1;g>m&&(j>1&&j-m>0&&k.push(j-m),!(k.length+l.length>=g-1))&&(h>=j+m&&l.push(j+m),!(k.length+l.length>=g-1));m++);if(h>1&&b.length>0){var n="",o=["","","","",""],p="link-ccox",q="<span>Page</span>";d.showPageNumber&&(n+='<div class="sch-pagesummary">Page '+j+" of "+h+"</div>"),j>1&&(o[0]='<a href="#" rel="'+(j-1)+'">Previous</a>');for(var m=k.length-1;m>=0;m--)o[1]+='<a class="page-number bdrgr3" href="#" rel="'+k[m]+'">'+k[m]+"</a>";o[2]='<span class="page-number bdrgr3 bogr2">'+j+"</span>";for(var m=0;m<l.length;m++)o[3]+='<a class="page-number bdrgr3" href="#" rel="'+l[m]+'">'+l[m]+"</a>";h>j&&(o[4]='<a href="#" rel="'+(j+1)+'">Next</a>'),d.greyStyle&&(p="link-gr5ox",q=""),n+='<div class="pagination bdrcc '+p+' linkro-box"><div class="float-r">'+q+o.join("")+"</div></div>";for(var m=0,r=b.length;r>m;m++)b[m].innerHTML=n,Ext.fly(b[m]).setStyle("display","block")}else this.hide()}},hide:function(){for(var a=0,c=b.length;c>a;a++)Ext.fly(b[a]).setStyle("display","none")}}}var b;return{getInstance:function(){return b||(b=a()),b}}}(),function(a){"use strict";a(document).ready(function(){var b=a("#abuse-details"),c=a(".thankyou"),d=a(".failed"),e={mandatory:{type:"regExp",opts:{re:/^.+$/,error:"Please provide a value for this field"}},emailHelper:{type:"regExp",opts:{re:/^.+$/,error:"Please enter a valid email address"}},email:{type:"regExp",opts:{re:/^([A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4})?$/i,error:"Please provide a valid email address"}},recaptchaHelper:{type:"length",opts:{min:1,error:"Don't forget the verification code"}},complaintHelper:{type:"regExp",opts:{re:/^.+$/,error:"Please provide an explanation of your complaint"}},complaint:{type:"regExp",opts:{re:/^.+$/,error:"Please provide an explanation of your complaint"}}};a("#abuse-details").regformvalidator({fieldContainer:".reg-fld",errorContainer:".err",serverSideErrorClass:".server-side-fail",rules:e,errorsMap:{email:["emailHelper","email"],recaptcha_response_field:["recaptchaHelper"],complaint:["complaintHelper","complaint"]},hintsMap:{email:["emailHelper"],complaint:["complaintHelper"]}}),a(".mol-registration select").chosen(),a(".mol-registration select").change(function(){a(this).closest(".reg-fld").addClass("focus")}),c.hide(),d.hide(),window.submitReportAbuseFunction=function(){console.log("submit Action"),b.hide(),d.hide(),DM.RC.spinner("show");var e=a("#email").val(),f=a("#complaint").val(),g=a("#recaptcha_challenge_field").val(),h=a("#recaptcha_response_field").val(),i=a("#commentId").val();a.ajax({type:"POST",url:"/reader-comments/p/postReportAbuseInComment.html",Accept:"application/json",contentType:"application/json",data:JSON.stringify({email:e,complaint:f,recaptcha_challenge_field:g,recaptcha_response_field:h,commentId:i}),success:function(a){"success"==a.status?(console.log("success: "+a.reportId+".."),document.querySelector(".reportId").innerHTML=a.reportId,b.hide(),c.show(),d.hide(),DM.RC.spinner("hide")):(console.log("failure: "+a.status+".."),DM.RC.spinner("hide"),b.show(),c.hide(),d.hide(),Recaptcha.reload(),b.removeClass("submitting"))},error:function(a,b,c){console.log("Error while accessing server: "+c),DM.RC.spinner("hide"),d.show()}}),a(function(){a("textarea[maxlength]").bind("input propertychange",function(){var b=a(this).attr("maxlength");a(this).val().length>b&&a(this).val(a(this).val().substring(0,b))})})}})}(jQuery),DM.ArrowFactor=Ext.extend(DM.Tabs,{tabOnClass:"dm-tab-on",tabOffClass:"dm-tab-off",userId:"",constructor:function(a){that=this,DM.ArrowFactor.superclass.constructor.call(this,a),this.container=Ext.get(a),this.container.getAttribute("className")?this.userId=this.container.getAttribute("className").match(/user-id-[0-9]*/)[0].replace("user-id-",""):this.userId=this.container.getAttribute("class").match(/user-id-[0-9]*/)[0].replace("user-id-",""),this.container.select(".dm-tab").each(function(){this.on("click",that._changeHandler,that)}),this.container.select("#arrow-factor-2 .rating-value",!0).each(function(){this.update("&nbsp;")}),this.container.select("#arrow-factor-2 .commentsTotal .value",!0).each(function(){this.update("&nbsp;")}),this.container.select("#arrow-factor-3 .rating-value",!0).each(function(){this.update("&nbsp;")}),this.container.select("#arrow-factor-3 .commentsTotal .value",!0).each(function(){this.update("&nbsp;")}),this.container.select("#arrow-factor-4 .rating-value",!0).each(function(){this.update("&nbsp;")}),this.container.select("#arrow-factor-4 .commentsTotal .value",!0).each(function(){this.update("&nbsp;")})},_changeHandler:function(a){var b,c=Ext.get(a.getTarget(this.tabsQuery,3));c&&(b=c.getAttribute("className")?c.getAttribute("className").match(/ratings-[a-z]*/)[0].replace("ratings-",""):c.getAttribute("class").match(/ratings-[a-z]*/)[0].replace("ratings-",""),""!==b&&Ext.Ajax.request({method:"GET",disableCaching:!1,url:"/reader-comments/p/user/arrowfactor/"+this.userId+"?period="+b,success:this._ratingsCallback}))},_ratingsCallback:function(a){var a=Ext.util.JSON.decode(a.responseText),b=Ext.get(that.currentTab.id.replace("t-",""));b.child(".rating-positive .rating-value",!0).innerHTML=that._numberWithCommas(a.payload.votesUp),b.child(".rating-negative .rating-value",!0).innerHTML=that._numberWithCommas(a.payload.votesDown),b.child(".commentsTotal .value",!0).innerHTML=that._numberWithCommas(a.payload.commentCount),a.payload.voteRating>=0?(b.child(".rating-overall").removeClass("rating-overall-negative").addClass("rating-overall-positive"),b.child(".rating-overall .rating-value",!0).innerHTML=that._numberWithCommas(a.payload.voteRating)):(b.child(".rating-overall").addClass("rating-overall-negative").removeClass("rating-overall-positive"),b.child(".rating-overall .rating-value",!0).innerHTML=that._numberWithCommas(-1*a.payload.voteRating))},_numberWithCommas:function(a){var b=a.toString().split(".");return b[0].replace(/\B(?=(\d{3})+(?!\d))/g,",")+(b[1]?"."+b[1]:"")}}),DM.later.go("bundle");
//# sourceMappingURL=async_bundle--.js.map