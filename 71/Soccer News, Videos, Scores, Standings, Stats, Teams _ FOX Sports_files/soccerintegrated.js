define(["jquery","underscore","backbone","handlebars","Event","foxbox","soccer/soccercommon","jqueryui"],function(a,b,c,d,e,f,g){"use strict";function h(){this.soccerIntegrated=this.soccerIntegrated||{},this.soccerIntegrated.league_competitionSelector=d.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return f+='\r\n			<a class="wisfb_soccerCompLink',d=c["if"].call(a,a&&a.Selected,{hash:{},inverse:l.noop,fn:l.program(2,g,b),data:b}),(d||0===d)&&(f+=d),f+='" href="',(e=c.Url)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Url,d=typeof e===m?e.call(a,{hash:{},data:b}):e),f+=n(d)+'" data-competitionid="',(e=c.Id)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Id,d=typeof e===m?e.call(a,{hash:{},data:b}):e),f+=n(d)+'" data-bypass="true">',(e=c.Display)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Display,d=typeof e===m?e.call(a,{hash:{},data:b}):e),f+=n(d)+"</a>\r\n		"}function g(a,b){return" wisfb_selected"}function h(a,b){return"wisfb_selected"}function i(a,b){var d,e,f="";return f+='\r\n			<option value="',(e=c.Value)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Value,d=typeof e===m?e.call(a,{hash:{},data:b}):e),f+=n(d)+'">',(e=c.Display)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Display,d=typeof e===m?e.call(a,{hash:{},data:b}):e),f+=n(d)+"</option>\r\n		"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var j,k="",l=this,m="function",n=this.escapeExpression;return k+='<section class="wisfb_soccerCompSelector">\r\n	<div class="wisfb_soccerCompLinks">\r\n		',j=c.each.call(b,b&&b.Links,{hash:{},inverse:l.noop,fn:l.program(1,f,e),data:e}),(j||0===j)&&(k+=j),k+='\r\n	</div>\r\n	<select id="wisfb_soccerCompList" name="wisfb_ddl wisfb_soccerCompList" class="wisfb_ddl wisfb_medium ',j=c["if"].call(b,b&&b.DropdownSelected,{hash:{},inverse:l.noop,fn:l.program(4,h,e),data:e}),(j||0===j)&&(k+=j),k+='">\r\n		',j=c.each.call(b,b&&b.CompetitionList,{hash:{},inverse:l.noop,fn:l.program(6,i,e),data:e}),(j||0===j)&&(k+=j),k+="\r\n	</select>\r\n</section>"}),this.soccerIntegrated.league_competitionStandings=d.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+="\r\n	",d=c.each.call(a,a&&a.Competitions,{hash:{},inverse:s.noop,fn:s.program(2,g,b),data:b}),(d||0===d)&&(e+=d),e+="\r\n"}function g(a,b){var d,e="";return e+="\r\n		",d=c.unless.call(a,a&&a.Subgroups,{hash:{},inverse:s.program(7,k,b),fn:s.program(3,h,b),data:b}),(d||0===d)&&(e+=d),e+="\r\n	"}function h(a,b){var d,e="";return e+='\r\n			<table class="wisfb_standard wisfb_standings">\r\n				<thead>\r\n					<tr>\r\n						<th class="wisfb_text">Club</th>\r\n						<th title="Games Played">GP</th>\r\n						\r\n						<th title="Points">Pts</th>\r\n					</tr>\r\n				</thead>\r\n				<tbody>\r\n					',d=c.each.call(a,a&&a.Teams,{hash:{},inverse:s.noop,fn:s.program(4,i,b),data:b}),(d||0===d)&&(e+=d),e+="\r\n				</tbody>\r\n			</table>\r\n		"}function i(a,b){var d,e,f="";return f+='\r\n						<tr>\r\n							<td class="wisfb_text">\r\n								<a href="',(e=c.Home)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Home,d=typeof e===q?e.call(a,{hash:{},data:b}):e),f+=r(d)+'">',(e=c.Name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Name,d=typeof e===q?e.call(a,{hash:{},data:b}):e),f+=r(d)+"</a>",d=c["if"].call(a,a&&a.Clinch,{hash:{},inverse:s.noop,fn:s.program(5,j,b),data:b}),(d||0===d)&&(f+=d),f+="\r\n								<!--<div>",(e=c.Name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Name,d=typeof e===q?e.call(a,{hash:{},data:b}):e),f+=r(d)+"</div>",d=c["if"].call(a,a&&a.Clinch,{hash:{},inverse:s.noop,fn:s.program(5,j,b),data:b}),(d||0===d)&&(f+=d),f+="-->\r\n							</td>\r\n							<td>",(e=c.GamesPlayed)?d=e.call(a,{hash:{},data:b}):(e=a&&a.GamesPlayed,d=typeof e===q?e.call(a,{hash:{},data:b}):e),f+=r(d)+"</td>\r\n							\r\n							<td>",(e=c.Points)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Points,d=typeof e===q?e.call(a,{hash:{},data:b}):e),f+=r(d)+"</td>\r\n						</tr>\r\n					"}function j(a,b){var d,e,f="";return f+='<div class="wisfb_clinched">',(e=c.Clinch)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Clinch,d=typeof e===q?e.call(a,{hash:{},data:b}):e),f+=r(d)+"</div>"}function k(a,b){var d,e="";return e+="\r\n			",d=c.each.call(a,a&&a.Subgroups,{hash:{},inverse:s.noop,fn:s.program(8,l,b),data:b}),(d||0===d)&&(e+=d),e+="\r\n		"}function l(a,b){var d,e,f="";return f+='\r\n				<table class="wisfb_standard wisfb_standings">\r\n					<thead>\r\n						<tr>\r\n							<th title="Group Name" class="wisfb_text">',(e=c.Name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Name,d=typeof e===q?e.call(a,{hash:{},data:b}):e),f+=r(d)+'</th>\r\n							<th title="Games Played">GP</th>\r\n							\r\n							<th title="Points">Pts</th>\r\n						</tr>\r\n					</thead>\r\n					<tbody>\r\n						',d=c.each.call(a,a&&a.Teams,{hash:{},inverse:s.noop,fn:s.program(9,m,b),data:b}),(d||0===d)&&(f+=d),f+="\r\n					</tbody>\r\n				</table>\r\n			"}function m(a,b){var d,e,f="";return f+='\r\n							<tr>\r\n								<td class="wisfb_text">\r\n									<a href="',(e=c.Home)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Home,d=typeof e===q?e.call(a,{hash:{},data:b}):e),f+=r(d)+'">',(e=c.Name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Name,d=typeof e===q?e.call(a,{hash:{},data:b}):e),f+=r(d)+"</a>",d=c["if"].call(a,a&&a.Clinch,{hash:{},inverse:s.noop,fn:s.program(5,j,b),data:b}),(d||0===d)&&(f+=d),f+="\r\n									<!--<div>",(e=c.Name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Name,d=typeof e===q?e.call(a,{hash:{},data:b}):e),f+=r(d)+"</div>",d=c["if"].call(a,a&&a.Clinch,{hash:{},inverse:s.noop,fn:s.program(5,j,b),data:b}),(d||0===d)&&(f+=d),f+="-->\r\n								</td>\r\n								<td>",(e=c.GamesPlayed)?d=e.call(a,{hash:{},data:b}):(e=a&&a.GamesPlayed,d=typeof e===q?e.call(a,{hash:{},data:b}):e),f+=r(d)+"</td>\r\n								\r\n								<td>",(e=c.Points)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Points,d=typeof e===q?e.call(a,{hash:{},data:b}):e),f+=r(d)+"</td>\r\n							</tr>\r\n						"}function n(a,b){return'\r\n	<p class="wisfb_noItems">No standings available for the selected competition.</p>\r\n'}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var o,p="",q="function",r=this.escapeExpression,s=this;return o=c["with"].call(b,b&&b.Standings,{hash:{},inverse:s.noop,fn:s.program(1,f,e),data:e}),(o||0===o)&&(p+=o),p+="\r\n",o=c.unless.call(b,b&&b.Standings,{hash:{},inverse:s.noop,fn:s.program(11,n,e),data:e}),(o||0===o)&&(p+=o),p}),this.soccerIntegrated.league_league=d.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),d=this.merge(d,a.partials),e=e||{};var f,g="",h=this,i="function",j=this.escapeExpression;return f=h.invokePartial(d.wisfb_headerTemplate,"wisfb_headerTemplate",b,c,d,e),(f||0===f)&&(g+=f),g+='\r\n<div id="wisfb_divScrollWrapper">\r\n	<div class="wisfb_scrollRail"><div></div></div>\r\n	<div id="wisfb_flyout">\r\n		<div class="wisfb_flyoutContent">\r\n			<section id="wisfb_worldCup" class="wisfb_worldCup wisfb_fbContent">\r\n				<section id="wisfb_worldCupScores" class="">\r\n					<div class="wisfb_h3"><span>Scores</span><span id="wisfb_worldCupScoresRound" class="wisfb_h4"></span></div>\r\n					<div class="wisfb_clearer"></div>\r\n					<div id="wisfb_worldCupBracketContainer" style="display: none;">\r\n						<a id="wisfb_worldCupBracket" href="'+j((f=b&&b.LinksData,f=null==f||f===!1?f:f.WorldCupBracket,typeof f===i?f.apply(b):f))+'" class="wisfb_liveButton" target="_blank" title="Expand">View Live Bracket</a>\r\n					</div>\r\n					<section class="wisfb_worldCupScoresContent wisfb_scores">\r\n						<div class="wisfb_liveGames"></div>\r\n						<div class="wisfb_clearer"></div>\r\n						<div class="wisfb_upcomingGames"></div>\r\n						<div class="wisfb_clearer"></div>\r\n						<div class="wisfb_finalGames"></div>\r\n						<div class="wisfb_clearer"></div>\r\n					</section>\r\n				</section>\r\n				<section id="wisfb_worldCupSchedule" class="wisfb_schedule">\r\n					<div class="wisfb_h3"><span>Team Schedule</span></div>\r\n					<div class="wisfb_clearer"></div>\r\n					<nav id="wisfb_teamFilter" class="wisfb_teamFilter"></nav>\r\n					<div class="wisfb_worldCupScheduleContent"></div>\r\n					<a id="wisfb_worldCupCompleteSchedule" class="wisfb_viewMore" data-viewmorename="Schedule">View Complete Schedule</a>\r\n				</section>\r\n				<section id="wisfb_worldCupStandings" class="wisfb_standings">\r\n					<div id="wisfb_groupStandings" class="wisfb_tabularModule"></div>\r\n					<a id="wisfb_worldCupMoreStandings" class="wisfb_viewMore" data-viewmorename="Standings">View Complete Standings</a>\r\n				</section>\r\n			</section>\r\n			<section id="wisfb_scores" class="wisfb_scores wisfb_fbContent">\r\n				<div id="wisfb_scoresFilters"></div>\r\n				<nav id="wisfb_scrollingDays" class="wisfb_scrollingDays"></nav>\r\n				<nav id="wisfb_scrollingWeeks" class="wisfb_scrollingDays wisfb_carousel"></nav>\r\n				<div id="wisfb_scoresContent"></div>\r\n			</section>\r\n			<section id="wisfb_standings" class="wisfb_standings wisfb_fbContent">\r\n				<div id="wisfb_standingsFilters"></div>\r\n				<div id="wisfb_standingsContent" class="wisfb_tabularModule"></div>\r\n			</section>\r\n			<section id="wisfb_stats" class="wisfb_stats wisfb_fbContent">\r\n				<div id="wisfb_statsFilters"></div>\r\n				<div id="wisfb_statsContent"></div>\r\n			</section>\r\n            <section id="wisfb_transfers" class="wisfb_transfers wisfb_fbContent">\r\n                <div id="wisfb_transfersFilters"></div>\r\n                <div id="wisfb_transfersContent" class="wisfb_tabularModule"></div>\r\n            </section>\r\n		</div>\r\n	</div>\r\n</div>'}),this.soccerIntegrated.league_popularStandings=d.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+="\r\n	",d=c.each.call(a,a&&a.Competitions,{hash:{},inverse:u.noop,fn:u.program(2,g,b),data:b}),(d||0===d)&&(e+=d),e+="\r\n"}function g(a,b){var d,e,f="";return f+="\r\n		",d=c.unless.call(a,a&&a.Subgroups,{hash:{},inverse:u.program(7,k,b),fn:u.program(3,h,b),data:b}),(d||0===d)&&(f+=d),f+='\r\n		<a href="',(e=c.ShowMoreUrl)?d=e.call(a,{hash:{},data:b}):(e=a&&a.ShowMoreUrl,d=typeof e===s?e.call(a,{hash:{},data:b}):e),f+=t(d)+'" class="wisfb_viewMore" data-viewmorename="PopularStandings">View Full Standings</a>\r\n	'}function h(a,b){var d,e,f="";return f+='\r\n			<table class="wisfb_standard wisfb_standings">\r\n				<thead>\r\n					<tr>\r\n						<th class="wisfb_tableTitle wisfb_text ">',(e=c.Name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Name,d=typeof e===s?e.call(a,{hash:{},data:b}):e),f+=t(d)+'</th>\r\n						<th title="Games Played">GP</th>\r\n						\r\n						<th title="Points">Pts</th>\r\n					</tr>\r\n				</thead>\r\n				<tbody>\r\n					',d=c.each.call(a,a&&a.Teams,{hash:{},inverse:u.noop,fn:u.program(4,i,b),data:b}),(d||0===d)&&(f+=d),f+="\r\n				</tbody>\r\n			</table>\r\n		"}function i(a,b){var d,e,f="";return f+='\r\n						<tr>\r\n							<td class="wisfb_text">\r\n								<a href="',(e=c.Home)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Home,d=typeof e===s?e.call(a,{hash:{},data:b}):e),f+=t(d)+'">',(e=c.Name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Name,d=typeof e===s?e.call(a,{hash:{},data:b}):e),f+=t(d)+"</a>",d=c["if"].call(a,a&&a.Clinch,{hash:{},inverse:u.noop,fn:u.program(5,j,b),data:b}),(d||0===d)&&(f+=d),f+="\r\n								<!--<div>",(e=c.Name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Name,d=typeof e===s?e.call(a,{hash:{},data:b}):e),f+=t(d)+"</div>",d=c["if"].call(a,a&&a.Clinch,{hash:{},inverse:u.noop,fn:u.program(5,j,b),data:b}),(d||0===d)&&(f+=d),f+="-->\r\n							</td>\r\n							<td>",(e=c.GamesPlayed)?d=e.call(a,{hash:{},data:b}):(e=a&&a.GamesPlayed,d=typeof e===s?e.call(a,{hash:{},data:b}):e),f+=t(d)+"</td>\r\n							\r\n							<td>",(e=c.Points)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Points,d=typeof e===s?e.call(a,{hash:{},data:b}):e),f+=t(d)+"</td>\r\n						</tr>\r\n					"}function j(a,b){var d,e,f="";return f+='<div class="wisfb_clinched">',(e=c.Clinch)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Clinch,d=typeof e===s?e.call(a,{hash:{},data:b}):e),f+=t(d)+"</div>"}function k(a,b){var d,e,f="";return f+='\r\n		<div class="wisfb_popularParent">\r\n			<div class="wisfb_popularGroupNav">\r\n				<div class="wisfb_standingsGroup">',(e=c.Name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Name,d=typeof e===s?e.call(a,{hash:{},data:b}):e),f+=t(d)+'</div>\r\n				<select class="wisfb_ddl wisfb_popularSubgroupNav">\r\n					',d=c.each.call(a,a&&a.Subgroups,{hash:{},inverse:u.noop,fn:u.program(8,l,b),data:b}),(d||0===d)&&(f+=d),f+="\r\n				</select>\r\n			</div>\r\n			",d=c.each.call(a,a&&a.Subgroups,{hash:{},inverse:u.noop,fn:u.program(10,m,b),data:b}),(d||0===d)&&(f+=d),f+="\r\n		</div>\r\n		"}function l(a,b){var d,e,f="";return f+='\r\n						<option value="',(e=c.Id)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Id,d=typeof e===s?e.call(a,{hash:{},data:b}):e),f+=t(d)+'">',(e=c.Name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Name,d=typeof e===s?e.call(a,{hash:{},data:b}):e),f+=t(d)+"</option>\r\n					"}function m(a,b){var d,e,f="";return f+='\r\n				<table id="wisfb_table_',(e=c.Id)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Id,d=typeof e===s?e.call(a,{hash:{},data:b}):e),f+=t(d)+'" class="wisfb_standard wisfb_standings wisfb_stats wisfb_multiConf',d=c.unless.call(a,a&&a.IsSelected,{hash:{},inverse:u.noop,fn:u.program(11,n,b),data:b}),(d||0===d)&&(f+=d),f+='">\r\n					<thead>\r\n						<tr>\r\n							<th class="wisfb_text"></th>\r\n							<th title="Games Played">GP</th>\r\n							\r\n							<th title="Points">Pts</th>\r\n						</tr>\r\n					</thead>\r\n					<tbody>\r\n						',d=c.each.call(a,a&&a.Teams,{hash:{},inverse:u.noop,fn:u.program(13,o,b),data:b}),(d||0===d)&&(f+=d),f+="\r\n					</tbody>\r\n				</table>\r\n			"}function n(a,b){return" wisfb_hidden"}function o(a,b){var d,e,f="";return f+='\r\n							<tr>\r\n								<td class="wisfb_text">\r\n									<a href="',(e=c.Home)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Home,d=typeof e===s?e.call(a,{hash:{},data:b}):e),f+=t(d)+'">',(e=c.Name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Name,d=typeof e===s?e.call(a,{hash:{},data:b}):e),f+=t(d)+"</a>",d=c["if"].call(a,a&&a.Clinch,{hash:{},inverse:u.noop,fn:u.program(5,j,b),data:b}),(d||0===d)&&(f+=d),f+="\r\n									<!--<div>",(e=c.Name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Name,d=typeof e===s?e.call(a,{hash:{},data:b}):e),f+=t(d)+"</div>",d=c["if"].call(a,a&&a.Clinch,{hash:{},inverse:u.noop,fn:u.program(5,j,b),data:b}),(d||0===d)&&(f+=d),f+="-->\r\n								</td>\r\n								<td>",(e=c.GamesPlayed)?d=e.call(a,{hash:{},data:b}):(e=a&&a.GamesPlayed,d=typeof e===s?e.call(a,{hash:{},data:b}):e),f+=t(d)+"</td>\r\n								\r\n								<td>",(e=c.Points)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Points,d=typeof e===s?e.call(a,{hash:{},data:b}):e),f+=t(d)+"</td>\r\n							</tr>\r\n						"}function p(a,b){return'\r\n	<p class="wisfb_noItems">No standings available for the selected competition.</p>\r\n'}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var q,r="",s="function",t=this.escapeExpression,u=this;return q=c["with"].call(b,b&&b.Standings,{hash:{},inverse:u.noop,fn:u.program(1,f,e),data:e}),(q||0===q)&&(r+=q),r+="\r\n",q=c.unless.call(b,b&&b.Standings,{hash:{},inverse:u.noop,fn:u.program(15,p,e),data:e}),(q||0===q)&&(r+=q),r}),this.soccerIntegrated.league_standingsGroup=d.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f="";return f}),this.soccerIntegrated.league_standingsTable=d.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f="";return f}),this.soccerIntegrated.league_transfers=d.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return f+='\r\n        <table class="wisfb_standard">\r\n            <thead>\r\n                <tr>\r\n                    <th class="wisfb_text">Date</th>\r\n                    <th>Player</th>\r\n                    <th class="wisfb_transferIcon"></th>\r\n                    <th>Destination</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                ',d=c.each.call(a,a&&a.Transfers,{hash:{},inverse:q.noop,fn:q.program(2,g,b),data:b}),(d||0===d)&&(f+=d),f+='\r\n            </tbody>\r\n        </table>\r\n    <a id="wisfb_viewMoreLink" href="',(e=c.ViewMoreUrl)?d=e.call(a,{hash:{},data:b}):(e=a&&a.ViewMoreUrl,d=typeof e===o?e.call(a,{hash:{},data:b}):e),f+=p(d)+'" class="wisfb_viewMore">View More</a>\r\n    '}function g(a,b){var d,e,f="";return f+="\r\n                <tr>\r\n                    <td>",(e=c.Date)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Date,d=typeof e===o?e.call(a,{hash:{},data:b}):e),f+=p(d)+'</td>\r\n                    <td class="wisfb_text">\r\n                        <a href="',(e=c.Href)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Href,d=typeof e===o?e.call(a,{hash:{},data:b}):e),f+=p(d)+'" class="wisfb_transferName">',(e=c.Name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Name,d=typeof e===o?e.call(a,{hash:{},data:b}):e),f+=p(d)+"</a>\r\n                        ",d=c["with"].call(a,a&&a.SourceTeam,{hash:{},inverse:q.noop,fn:q.program(3,h,b),data:b}),(d||0===d)&&(f+=d),f+='\r\n                    </td>\r\n                    <td class="wisfb_transferIcon">\r\n                        <span id="wisfb_transferIcon" class="',(e=c.Class)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Class,d=typeof e===o?e.call(a,{hash:{},data:b}):e),f+=p(d)+'"></span>\r\n                    </td>\r\n                    <td class="wisfb_text">\r\n                        ',d=c["with"].call(a,a&&a.TargetTeam,{hash:{},inverse:q.noop,fn:q.program(5,i,b),data:b}),(d||0===d)&&(f+=d),f+="\r\n                    </td>\r\n                </tr>\r\n                "}function h(a,b){var d,e,f="";return f+='\r\n                            <a href="',(e=c.Href)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Href,d=typeof e===o?e.call(a,{hash:{},data:b}):e),f+=p(d)+'" class="wisfb_sourceTeam">',(e=c.Name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Name,d=typeof e===o?e.call(a,{hash:{},data:b}):e),f+=p(d)+"</a>\r\n                        "}function i(a,b){var d,e,f="";return f+='\r\n                            <a href="',(e=c.Href)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Href,d=typeof e===o?e.call(a,{hash:{},data:b}):e),f+=p(d)+'" class="wisfb_targetTeam">',(e=c.Name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Name,d=typeof e===o?e.call(a,{hash:{},data:b}):e),f+=p(d)+"</a>\r\n                        "}function j(a,b){var d,e="";return e+="\r\n        ",d=c["if"].call(a,a&&a.IsFeatured,{hash:{},inverse:q.program(10,l,b),fn:q.program(8,k,b),data:b}),(d||0===d)&&(e+=d),e+="\r\n    "}function k(a,b){return'\r\n            <p class="wisfb_noItems">No transfers available for this competition. Please select a domestic club competition.</p>\r\n        '}function l(a,b){return'\r\n            <p class="wisfb_noItems">No applicable transfers within the last 30 days.</p>\r\n        '}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var m,n="",o="function",p=this.escapeExpression,q=this;return n+='<div id="wisfb_transfers" class="wisfb_module">\r\n    ',m=c["if"].call(b,b&&b.Transfers,{hash:{},inverse:q.program(7,j,e),fn:q.program(1,f,e),data:e}),(m||0===m)&&(n+=m),n+="\r\n</div>"}),this.soccerIntegrated.team_competitionSeasonSelector=d.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return f+='\r\n			<option value="',(e=c.Id)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Id,d=typeof e===j?e.call(a,{hash:{},data:b}):e),f+=k(d)+'" data-args="',(e=c.Args)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Args,d=typeof e===j?e.call(a,{hash:{},data:b}):e),f+=k(d)+'" ',d=c["if"].call(a,a&&a.IsSelected,{hash:{},inverse:l.noop,fn:l.program(2,g,b),data:b}),(d||0===d)&&(f+=d),f+=">",(e=c.Text)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Text,d=typeof e===j?e.call(a,{hash:{},data:b}):e),f+=k(d)+"</option>\r\n		"}function g(a,b){return'selected="selected"'}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var h,i="",j="function",k=this.escapeExpression,l=this;return i+='<div>\r\n	<select id="wisfb_scheduleFilters" class="wisfb_ddl wisfb_large">\r\n		',h=c.each.call(b,b&&b.Competitions,{hash:{},inverse:l.noop,fn:l.program(1,f,e),data:e}),(h||0===h)&&(i+=h),i+="\r\n	</select>\r\n</div>"}),this.soccerIntegrated.team_roster=d.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return f+='\r\n			<tr>\r\n				<td class="wisfb_text">\r\n					<a href="',(e=c.ProfileUrl)?d=e.call(a,{hash:{},data:b}):(e=a&&a.ProfileUrl,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+'" class="wisfb_rosterName">',(e=c.FirstName)?d=e.call(a,{hash:{},data:b}):(e=a&&a.FirstName,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+" ",(e=c.LastName)?d=e.call(a,{hash:{},data:b}):(e=a&&a.LastName,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"</a>\r\n				</td>\r\n				<td>",(e=c.Number)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Number,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"</td>\r\n				<td>",(e=c.Position)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Position,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"</td>\r\n				<td>",d=c["if"].call(a,a&&a.Age,{hash:{},inverse:m.program(4,h,b),fn:m.program(2,g,b),data:b}),(d||0===d)&&(f+=d),f+="</td>\r\n			</tr>\r\n			"}function g(a,b){var d,e;return(e=c.Age)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Age,d=typeof e===k?e.call(a,{hash:{},data:b}):e),l(d)}function h(a,b){return"-"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var i,j="",k="function",l=this.escapeExpression,m=this;return j+='<div id="wisfb_teamRoster" class="wisfb_module">\r\n	<table class="wisfb_standard wisfb_stats">\r\n		<thead>\r\n			<tr>\r\n				<td class="wisfb_text">Name</td>\r\n				<td>No</td>\r\n				<td>Pos</td>\r\n				<td>Age</td>\r\n			</tr>\r\n		</thead>\r\n		<tbody>\r\n			',i=c.each.call(b,b&&b.Roster,{hash:{},inverse:m.noop,fn:m.program(1,f,e),data:e}),(i||0===i)&&(j+=i),j+="\r\n		</tbody>\r\n	</table>\r\n</div>"}),this.soccerIntegrated.team_scheduleTeamGame=d.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return f+='\r\n	<a href="',(e=c.GameTrax)?d=e.call(a,{hash:{},data:b}):(e=a&&a.GameTrax,d=typeof e===y?e.call(a,{hash:{},data:b}):e),f+=z(d)+'" class="wisfb_scheduleChip">\r\n'}function g(a,b){return'\r\n	<span class="wisfb_scheduleChip">\r\n'}function h(a,b){var d,e,f="";return f+='\r\n			<div class="wisfb_teamInfo',d=c["if"].call(a,a&&a.IsLoser,{hash:{},inverse:A.program(8,j,b),fn:A.program(6,i,b),data:b}),(d||0===d)&&(f+=d),f+='">\r\n				<div class="wisfb_team">\r\n					<div class="wisfb_name" title="',(e=c.Name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Name,d=typeof e===y?e.call(a,{hash:{},data:b}):e),f+=z(d)+'">',(e=c.Name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Name,d=typeof e===y?e.call(a,{hash:{},data:b}):e),f+=z(d)+'</div>\r\n					<div class="wisfb_record">',(e=c.Record)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Record,d=typeof e===y?e.call(a,{hash:{},data:b}):e),f+=z(d)+'</div>\r\n				</div>\r\n				<div class="wisfb_points">',(e=c.Score)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Score,d=typeof e===y?e.call(a,{hash:{},data:b}):e),f+=z(d)+"</div>\r\n			",d=c["if"].call(a,a&&a.Logo,{hash:{},inverse:A.program(14,n,b),fn:A.program(11,l,b),data:b}),(d||0===d)&&(f+=d),f+="\r\n			</div>\r\n		"}function i(a,b){return" wisfb_losingTeam"}function j(a,b){var d;return d=c["if"].call(a,a&&a.IsWinner,{hash:{},inverse:A.noop,fn:A.program(9,k,b),data:b}),d||0===d?d:""}function k(a,b){return" wisfb_winningTeam"}function l(a,b){var d,e,f="";return f+='<img class="wisfb_logo wisfb_logoImage',d=c["if"].call(a,a&&a.LogoCSS,{hash:{},inverse:A.noop,fn:A.program(12,m,b),data:b}),(d||0===d)&&(f+=d),f+='" src="',(e=c.Logo)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Logo,d=typeof e===y?e.call(a,{hash:{},data:b}):e),f+=z(d)+'" />'}function m(a,b){var d,e,f="";return f+=" ",(e=c.LogoCSS)?d=e.call(a,{hash:{},data:b}):(e=a&&a.LogoCSS,d=typeof e===y?e.call(a,{hash:{},data:b}):e),f+=z(d)}function n(a,b){var d,e,f="";return f+='<img class="wisfb_logo wisfb_logoImage" src="'+z((d=c.wisfb_Style||a&&a.wisfb_Style,e={hash:{path:"/Soccer/Images/NoTeamLogo.png"},data:b},d?d.call(a,e):B.call(a,"wisfb_Style",e)))+'" />'}function o(a,b){return" wisfb_extended"}function p(a,b){return" wisfb_maxed"}function q(a,b){return" wisfb_specialStatus"}function r(a,b){var d,e,f="";return f+='<div class="wisfb_compName">',(e=c.CompAbbrev)?d=e.call(a,{hash:{},data:b}):(e=a&&a.CompAbbrev,d=typeof e===y?e.call(a,{hash:{},data:b}):e),f+=z(d)+"</div>"}function s(a,b){var d,e,f="";return f+='\r\n			<div class="wisfb_teamInfo',d=c["if"].call(a,a&&a.IsLoser,{hash:{},inverse:A.program(8,j,b),fn:A.program(6,i,b),data:b}),(d||0===d)&&(f+=d),f+='">\r\n				',d=c["if"].call(a,a&&a.Logo,{hash:{},inverse:A.program(14,n,b),fn:A.program(11,l,b),data:b}),(d||0===d)&&(f+=d),f+='\r\n				<div class="wisfb_points">',(e=c.Score)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Score,d=typeof e===y?e.call(a,{hash:{},data:b}):e),f+=z(d)+'</div>\r\n				<div class="wisfb_team">\r\n					<div class="wisfb_name" title="',(e=c.Name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Name,d=typeof e===y?e.call(a,{hash:{},data:b}):e),f+=z(d)+'">',(e=c.Name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Name,d=typeof e===y?e.call(a,{hash:{},data:b}):e),f+=z(d)+'</div>\r\n					<div class="wisfb_record">',(e=c.Record)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Record,d=typeof e===y?e.call(a,{hash:{},data:b}):e),f+=z(d)+"</div>\r\n				</div>\r\n			</div>\r\n		"}function t(a,b){return"\r\n</a>\r\n"}function u(a,b){return"\r\n	</span>\r\n"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var v,w,x="",y="function",z=this.escapeExpression,A=this,B=c.helperMissing;return v=c["if"].call(b,b&&b.GameTrax,{hash:{},inverse:A.program(3,g,e),fn:A.program(1,f,e),data:e}),(v||0===v)&&(x+=v),x+='\r\n	<div class="wisfb_scheduleGame ',(w=c.CssClass)?v=w.call(b,{hash:{},data:e}):(w=b&&b.CssClass,v=typeof w===y?w.call(b,{hash:{},data:e}):w),x+=z(v)+'">\r\n		',v=c["with"].call(b,b&&b.HomeTeam,{hash:{},inverse:A.noop,fn:A.program(5,h,e),data:e}),(v||0===v)&&(x+=v),x+='\r\n\r\n		<div class="wisfb_gameInfo',v=c["if"].call(b,b&&b.ScheduleTextLine2,{hash:{},inverse:A.noop,fn:A.program(16,o,e),data:e}),(v||0===v)&&(x+=v),v=c["if"].call(b,b&&b.ScheduleTextLine3,{hash:{},inverse:A.noop,fn:A.program(18,p,e),data:e}),(v||0===v)&&(x+=v),v=c["if"].call(b,b&&b.IsGameStatusSpecial,{hash:{},inverse:A.noop,fn:A.program(20,q,e),data:e}),(v||0===v)&&(x+=v),x+='">\r\n			',v=c["if"].call(b,b&&b.CompAbbrev,{hash:{},inverse:A.noop,fn:A.program(22,r,e),data:e}),(v||0===v)&&(x+=v),x+='\r\n			<div class="wisfb_primary">',(w=c.ScheduleText)?v=w.call(b,{hash:{},data:e}):(w=b&&b.ScheduleText,v=typeof w===y?w.call(b,{hash:{},data:e}):w),x+=z(v)+'</div>\r\n			<div class="wisfb_secondary">',(w=c.ScheduleTextLine2)?v=w.call(b,{hash:{},data:e}):(w=b&&b.ScheduleTextLine2,v=typeof w===y?w.call(b,{hash:{},data:e}):w),x+=z(v)+'</div>\r\n			<div class="wisfb_ternary">',(w=c.ScheduleTextLine3)?v=w.call(b,{hash:{},data:e}):(w=b&&b.ScheduleTextLine3,v=typeof w===y?w.call(b,{hash:{},data:e}):w),x+=z(v)+"</div>\r\n		</div>\r\n\r\n		",v=c["with"].call(b,b&&b.AwayTeam,{hash:{},inverse:A.noop,fn:A.program(24,s,e),data:e}),(v||0===v)&&(x+=v),x+="\r\n	</div>\r\n",v=c["if"].call(b,b&&b.GameTrax,{hash:{},inverse:A.program(28,u,e),fn:A.program(26,t,e),data:e}),(v||0===v)&&(x+=v),x}),this.soccerIntegrated.team_statsTeamLeadersGraph=d.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+="\r\n		",d=c.each.call(a,a,{hash:{},inverse:n.noop,fn:n.program(2,g,b),data:b}),(d||0===d)&&(e+=d),e+="\r\n	"}function g(a,b){var d,e="";return e+="\r\n			",d=c.unless.call(a,a&&a.IsEmpty,{hash:{},inverse:n.noop,fn:n.program(3,h,b),data:b}),(d||0===d)&&(e+=d),e+="\r\n		"}function h(a,b){var d,e,f="";return f+='\r\n				\r\n				<table class="wisfb_statsTable wisfb_teamGraphTable wisfb_left">\r\n					<thead>\r\n						<tr>\r\n							<td></td>\r\n							<td colspan="1">',(e=c.Name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Name,d=typeof e===l?e.call(a,{hash:{},data:b}):e),f+=m(d)+'</td>\r\n						</tr>\r\n					</thead>\r\n					<tbody>\r\n						<tr>\r\n							<td class="wisfb_teamGraphTeamName">\r\n								<span>',(e=c.Abbreviation)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Abbreviation,d=typeof e===l?e.call(a,{hash:{},data:b}):e),f+=m(d)+'</span>\r\n							</td>\r\n							<td class="wisfb_teamGraphTeamBar">\r\n								<div style="',(e=c.TeamBarStyle)?d=e.call(a,{hash:{},data:b}):(e=a&&a.TeamBarStyle,d=typeof e===l?e.call(a,{hash:{},data:b}):e),f+=m(d)+'">\r\n									',(e=c.StatValue)?d=e.call(a,{hash:{},data:b}):(e=a&&a.StatValue,d=typeof e===l?e.call(a,{hash:{},data:b}):e),f+=m(d)+"<span>",(e=c.TeamRank)?d=e.call(a,{hash:{},data:b}):(e=a&&a.TeamRank,d=typeof e===l?e.call(a,{hash:{},data:b}):e),f+=m(d)+'</span>\r\n								</div>\r\n							</td>\r\n						</tr>\r\n						<tr>\r\n							<td class="wisfb_teamGraphLeagueName">\r\n								<span>League Avg</span>\r\n							</td>\r\n							<td class="wisfb_teamGraphLeagueBar">\r\n								<div style="',(e=c.LeagueBarStyle)?d=e.call(a,{hash:{},data:b}):(e=a&&a.LeagueBarStyle,d=typeof e===l?e.call(a,{hash:{},data:b}):e),f+=m(d)+'">\r\n									<span>',(e=c.LeagueAverage)?d=e.call(a,{hash:{},data:b}):(e=a&&a.LeagueAverage,d=typeof e===l?e.call(a,{hash:{},data:b}):e),f+=m(d)+'</span>\r\n								</div>\r\n							</td>\r\n						</tr>\r\n						<tr>\r\n							<td class="wisfb_teamGraphLeaderName">\r\n								<span>Leader</span>\r\n							</td>\r\n							<td class="wisfb_teamGraphLeaderBar">\r\n								<div style="width: 100%; background-color: #cfcfcf; height: 15px; border: 1px solid black; padding-left: 5px;">\r\n									',(e=c.LeagueLeaderValue)?d=e.call(a,{hash:{},data:b}):(e=a&&a.LeagueLeaderValue,d=typeof e===l?e.call(a,{hash:{},data:b}):e),f+=m(d)+"<span>",(e=c.LeaderAbbreviation)?d=e.call(a,{hash:{},data:b}):(e=a&&a.LeaderAbbreviation,d=typeof e===l?e.call(a,{hash:{},data:b}):e),f+=m(d)+"</span>\r\n								</div>\r\n							</td>\r\n						</tr>\r\n					</tbody>\r\n				</table>\r\n			"}function i(a,b){return'\r\n		<p class="wisfb_noItems">No stats available.</p>\r\n	'}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var j,k="",l="function",m=this.escapeExpression,n=this;return k+='<!--statsTeamLeadersGraphTemplate-->\r\n<div id="wisfb_statsViewContainer">\r\n	',j=c["if"].call(b,b,{hash:{},inverse:n.program(5,i,e),fn:n.program(1,f,e),data:e}),(j||0===j)&&(k+=j),k+="\r\n</div>"}),this.soccerIntegrated.team_team=d.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),d=this.merge(d,a.partials),e=e||{};var f,g="",h=this;return f=h.invokePartial(d.wisfb_headerTemplate,"wisfb_headerTemplate",b,c,d,e),(f||0===f)&&(g+=f),g+='\r\n<div id="wisfb_divScrollWrapper">\r\n	<div class="wisfb_scrollRail"><div></div></div>\r\n	<div id="wisfb_flyout">\r\n		<div class="wisfb_flyoutContent">\r\n			<section id="wisfb_schedule" class="wisfb_schedule wisfb_teamSchedule wisfb_fbContent">\r\n				<div id="wisfb_scheduleFilters"></div>\r\n				<section id="wisfb_scheduleContent"></section>\r\n			</section>\r\n			<section id="wisfb_stats" class="wisfb_stats wisfb_fbContent">\r\n				<div class="wisfb_center wisfb_buttonChain">\r\n					<div id="wisfb_statsFilters"></div>\r\n					<div id="wisfb_statsContent"></div>\r\n				</div>\r\n			</section>\r\n			<section id="wisfb_roster" class="wisfb_roster wisfb_fbContent"></section>\r\n		</div>\r\n	</div>\r\n</div>'}),this.soccerIntegrated.dayNav=d.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return f+='\r\n		<td data-date="',(e=c.Date)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Date,d=typeof e===j?e.call(a,{hash:{},data:b}):e),f+=k(d)+'" ',d=c["if"].call(a,a&&a.IsSelected,{hash:{},inverse:l.noop,fn:l.program(2,g,b),data:b}),(d||0===d)&&(f+=d),f+='>\r\n			<a href="',(e=c.Href)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Href,d=typeof e===j?e.call(a,{hash:{},data:b}):e),f+=k(d)+'" class="wisfb_lnkDayNav" data-day="',(e=c.Date)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Date,d=typeof e===j?e.call(a,{hash:{},data:b}):e),f+=k(d)+'" data-bypass="true">\r\n				<div class="wisfb_scrollingWeek">',(e=c.Name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Name,d=typeof e===j?e.call(a,{hash:{},data:b}):e),f+=k(d)+'</div>\r\n				<div class="wisfb_scrollingWeekNumber">',
(e=c.DateText)?d=e.call(a,{hash:{},data:b}):(e=a&&a.DateText,d=typeof e===j?e.call(a,{hash:{},data:b}):e),f+=k(d)+"</div>\r\n			</a>\r\n		</td>\r\n	"}function g(a,b){return'class="wisfb_selected"'}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var h,i="",j="function",k=this.escapeExpression,l=this;return i+='<table class="wisfb_scrollDays">\r\n	<tr>\r\n	',h=c.each.call(b,b,{hash:{},inverse:l.noop,fn:l.program(1,f,e),data:e}),(h||0===h)&&(i+=h),i+="\r\n	</tr>\r\n</table>"}),this.soccerIntegrated.scheduleChip=d.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return f+='\r\n<a href="',(e=c.Href)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Href,d=typeof e===t?e.call(a,{hash:{},data:b}):e),f+=u(d)+'" class="wisfb_scheduleChip">\r\n'}function g(a,b){return'\r\n	<span class="wisfb_scheduleChip">\r\n'}function h(a,b){return" wisfb_losingTeam"}function i(a,b){var d,e,f,g="";return g+='\r\n				<div class="wisfb_team">\r\n					<div class="wisfb_name" title="',(e=c.Name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Name,d=typeof e===t?e.call(a,{hash:{},data:b}):e),g+=u(d)+'">',(e=c.Name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Name,d=typeof e===t?e.call(a,{hash:{},data:b}):e),g+=u(d)+'</div>\r\n					<div class="wisfb_record">',(e=c.Record)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Record,d=typeof e===t?e.call(a,{hash:{},data:b}):e),g+=u(d)+'</div>\r\n				</div>\r\n				<div class="wisfb_points">',(e=c.Score)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Score,d=typeof e===t?e.call(a,{hash:{},data:b}):e),g+=u(d)+'</div>\r\n				<img class="wisfb_logo wisfb_logoImage',d=c["if"].call(a,a&&a.LogoCSS,{hash:{},inverse:v.noop,fn:v.program(8,j,b),data:b}),(d||0===d)&&(g+=d),g+='" src="',(e=c.Logo)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Logo,d=typeof e===t?e.call(a,{hash:{},data:b}):e),g+=u(d)+'" onerror=\'this.src="'+u((e=c.wisfb_Style||a&&a.wisfb_Style,f={hash:{path:"/Soccer/Images/NoTeamLogo.png"},data:b},e?e.call(a,f):w.call(a,"wisfb_Style",f)))+"\";' />\r\n			"}function j(a,b){var d,e,f="";return f+=" ",(e=c.LogoCSS)?d=e.call(a,{hash:{},data:b}):(e=a&&a.LogoCSS,d=typeof e===t?e.call(a,{hash:{},data:b}):e),f+=u(d)}function k(a,b){return" wisfb_extended"}function l(a,b){return" wisfb_maxed"}function m(a,b){return" wisfb_specialStatus"}function n(a,b){var d,e,f,g="";return g+='\r\n				<img class="wisfb_logo wisfb_logoImage',d=c["if"].call(a,a&&a.LogoCSS,{hash:{},inverse:v.noop,fn:v.program(8,j,b),data:b}),(d||0===d)&&(g+=d),g+='" src="',(e=c.Logo)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Logo,d=typeof e===t?e.call(a,{hash:{},data:b}):e),g+=u(d)+'" onerror=\'this.src="'+u((e=c.wisfb_Style||a&&a.wisfb_Style,f={hash:{path:"/Soccer/Images/NoTeamLogo.png"},data:b},e?e.call(a,f):w.call(a,"wisfb_Style",f)))+'";\' />\r\n				<div class="wisfb_points">',(e=c.Score)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Score,d=typeof e===t?e.call(a,{hash:{},data:b}):e),g+=u(d)+'</div>\r\n				<div class="wisfb_team">\r\n					<div class="wisfb_name" title="',(e=c.Name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Name,d=typeof e===t?e.call(a,{hash:{},data:b}):e),g+=u(d)+'">',(e=c.Name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Name,d=typeof e===t?e.call(a,{hash:{},data:b}):e),g+=u(d)+'</div>\r\n					<div class="wisfb_record">',(e=c.Record)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Record,d=typeof e===t?e.call(a,{hash:{},data:b}):e),g+=u(d)+"</div>\r\n				</div>\r\n			"}function o(a,b){return"\r\n</a>\r\n"}function p(a,b){return"\r\n	</span>\r\n"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var q,r,s="",t="function",u=this.escapeExpression,v=this,w=c.helperMissing;return q=c["if"].call(b,b&&b.Href,{hash:{},inverse:v.program(3,g,e),fn:v.program(1,f,e),data:e}),(q||0===q)&&(s+=q),s+='\r\n	<div class="wisfb_scheduleGame ',(r=c.CssClass)?q=r.call(b,{hash:{},data:e}):(r=b&&b.CssClass,q=typeof r===t?r.call(b,{hash:{},data:e}):r),s+=u(q)+'">\r\n		<div class="wisfb_scheduleGrouping"></div>\r\n\r\n		<div class="wisfb_teamInfo',q=c["if"].call(b,(q=b&&b.HomeTeam,null==q||q===!1?q:q.IsLoser),{hash:{},inverse:v.noop,fn:v.program(5,h,e),data:e}),(q||0===q)&&(s+=q),s+='">\r\n			',q=c["with"].call(b,b&&b.HomeTeam,{hash:{},inverse:v.noop,fn:v.program(7,i,e),data:e}),(q||0===q)&&(s+=q),s+='\r\n		</div>\r\n\r\n		<div class="wisfb_gameInfo',q=c["if"].call(b,b&&b.ScheduleTextLine2,{hash:{},inverse:v.noop,fn:v.program(10,k,e),data:e}),(q||0===q)&&(s+=q),q=c["if"].call(b,b&&b.ScheduleTextLine3,{hash:{},inverse:v.noop,fn:v.program(12,l,e),data:e}),(q||0===q)&&(s+=q),q=c["if"].call(b,b&&b.IsGameStatusSpecial,{hash:{},inverse:v.noop,fn:v.program(14,m,e),data:e}),(q||0===q)&&(s+=q),s+='">\r\n			<div class="wisfb_primary">',(r=c.ScheduleText)?q=r.call(b,{hash:{},data:e}):(r=b&&b.ScheduleText,q=typeof r===t?r.call(b,{hash:{},data:e}):r),s+=u(q)+'</div>\r\n			<div class="wisfb_secondary">',(r=c.ScheduleTextLine2)?q=r.call(b,{hash:{},data:e}):(r=b&&b.ScheduleTextLine2,q=typeof r===t?r.call(b,{hash:{},data:e}):r),s+=u(q)+'</div>\r\n			<div class="wisfb_ternary">',(r=c.ScheduleTextLine3)?q=r.call(b,{hash:{},data:e}):(r=b&&b.ScheduleTextLine3,q=typeof r===t?r.call(b,{hash:{},data:e}):r),s+=u(q)+'</div>\r\n		</div>\r\n\r\n		<div class="wisfb_teamInfo',q=c["if"].call(b,(q=b&&b.AwayTeam,null==q||q===!1?q:q.IsLoser),{hash:{},inverse:v.noop,fn:v.program(5,h,e),data:e}),(q||0===q)&&(s+=q),s+='">\r\n			',q=c["with"].call(b,b&&b.AwayTeam,{hash:{},inverse:v.noop,fn:v.program(16,n,e),data:e}),(q||0===q)&&(s+=q),s+="\r\n		</div>\r\n	</div>\r\n",q=c["if"].call(b,b&&b.Href,{hash:{},inverse:v.program(20,p,e),fn:v.program(18,o,e),data:e}),(q||0===q)&&(s+=q),s}),this.soccerIntegrated.statsFilters=d.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return f+='\r\n            <a href="#" class="wisfb_toggleButton ',d=c["if"].call(a,a&&a.Selected,{hash:{},inverse:s.noop,fn:s.program(2,g,b),data:b}),(d||0===d)&&(f+=d),f+='" data-view="',(e=c.Id)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Id,d=typeof e===t?e.call(a,{hash:{},data:b}):e),f+=u(d)+'">',(e=c.StatTypeText)?d=e.call(a,{hash:{},data:b}):(e=a&&a.StatTypeText,d=typeof e===t?e.call(a,{hash:{},data:b}):e),f+=u(d)+"</a>\r\n        "}function g(a,b){return"wisfb_toggleButtonSelected"}function h(a,b){var d,e,f="";return f+='\r\n			<option value="',(e=c.Id)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Id,d=typeof e===t?e.call(a,{hash:{},data:b}):e),f+=u(d)+'" ',d=c["if"].call(a,a&&a.Args,{hash:{},inverse:s.noop,fn:s.program(5,i,b),data:b}),(d||0===d)&&(f+=d),f+=" ",d=c["if"].call(a,a&&a.Selected,{hash:{},inverse:s.noop,fn:s.program(7,j,b),data:b}),(d||0===d)&&(f+=d),f+=">",(e=c.Text)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Text,d=typeof e===t?e.call(a,{hash:{},data:b}):e),f+=u(d)+"</option>\r\n		"}function i(a,b){var d,e,f="";return f+='data-args="',(e=c.Args)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Args,d=typeof e===t?e.call(a,{hash:{},data:b}):e),f+=u(d)+'"'}function j(a,b){return'selected="selected"'}function k(a,b){var d,e="";return e+="\r\n				",d=c["if"].call(a,a&&a.Name,{hash:{},inverse:s.noop,fn:s.program(10,l,b),data:b}),(d||0===d)&&(e+=d),e+="\r\n                    ",d=c.each.call(a,a&&a.Items,{hash:{},inverse:s.noop,fn:s.program(12,m,b),data:b}),(d||0===d)&&(e+=d),e+="\r\n                ",d=c["if"].call(a,a&&a.Name,{hash:{},inverse:s.noop,fn:s.program(17,p,b),data:b}),(d||0===d)&&(e+=d),e+="\r\n		"}function l(a,b){var d,e,f="";return f+='<optgroup label="',(e=c.Name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Name,d=typeof e===t?e.call(a,{hash:{},data:b}):e),f+=u(d)+'" value="',(e=c.Name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Name,d=typeof e===t?e.call(a,{hash:{},data:b}):e),f+=u(d)+'">'}function m(a,b){var d,e,f="";return f+='\r\n					    <option value="',(e=c.Id)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Id,d=typeof e===t?e.call(a,{hash:{},data:b}):e),f+=u(d)+'" ',d=c["if"].call(a,a&&a.Opp,{hash:{},inverse:s.noop,fn:s.program(13,n,b),data:b}),(d||0===d)&&(f+=d),f+=" ",d=c["if"].call(a,a&&a.Selected,{hash:{},inverse:s.noop,fn:s.program(15,o,b),data:b}),(d||0===d)&&(f+=d),f+=">",(e=c.Name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Name,d=typeof e===t?e.call(a,{hash:{},data:b}):e),f+=u(d)+"</option>\r\n                    "}function n(a,b){return'data-opp="true"'}function o(a,b){return'selected="Selected"'}function p(a,b){return"</optgroup>"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var q,r="",s=this,t="function",u=this.escapeExpression;return r+='<div class="wisfb_toggleButtonContainer">\r\n    <div class="wisfb_buttonChain">\r\n        ',q=c.each.call(b,b&&b.Types,{hash:{},inverse:s.noop,fn:s.program(1,f,e),data:e}),(q||0===q)&&(r+=q),r+='\r\n    </div>\r\n    <hr class="wisfb_horizDivider" />\r\n</div>\r\n\r\n<div class="wisfb_statFilters">\r\n	<select id="wisfb_selectStatTimeframe" class="wisfb_ddl wisfb_medium">\r\n		',q=c.each.call(b,b&&b.Timeframes,{hash:{},inverse:s.noop,fn:s.program(4,h,e),data:e}),(q||0===q)&&(r+=q),r+='\r\n	</select>\r\n	<select id="wisfb_selectStatCategory" class="wisfb_ddl wisfb_medium">\r\n		',q=c.each.call(b,b&&b.Stats,{hash:{},inverse:s.noop,fn:s.program(9,k,e),data:e}),(q||0===q)&&(r+=q),r+="\r\n	</select>\r\n</div>"}),this.soccerIntegrated.statsTable=d.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+="\r\n	",d=c["if"].call(a,a&&a.IsPopular,{hash:{},inverse:s.program(4,h,b),fn:s.program(2,g,b),data:b}),(d||0===d)&&(e+=d),e+="\r\n"}function g(a,b){return'\r\n		<p class="wisfb_noItems">No stats available for featured. Please select a competition.</p>\r\n	'}function h(a,b){return'\r\n		<p class="wisfb_noItems">No stats available.</p>\r\n	'}function i(a,b){var d,e="";return e+="\r\n	",d=c["if"].call(a,a&&a.IsPopular,{hash:{},inverse:s.program(13,n,b),fn:s.program(7,j,b),data:b}),(d||0===d)&&(e+=d),e+="\r\n"}function j(a,b){var d,e="";return e+="\r\n		",d=c.each.call(a,a&&a.Stats,{hash:{},inverse:s.noop,fn:s.program(8,k,b),data:b}),(d||0===d)&&(e+=d),e+="\r\n	"}function k(a,b){var d,e,f="";return f+='\r\n			<table class="wisfb_statsTable">\r\n				',d=c["if"].call(a,a&&a.Name,{hash:{},inverse:s.noop,fn:s.program(9,l,b),data:b}),(d||0===d)&&(f+=d),f+="\r\n				<tbody>\r\n				",d=c.each.call(a,a&&a.Items,{hash:{},inverse:s.noop,fn:s.program(11,m,b),data:b}),(d||0===d)&&(f+=d),f+='\r\n				</tbody>\r\n			</table>\r\n			<a href="',(e=c.ShowMoreUrl)?d=e.call(a,{hash:{},data:b}):(e=a&&a.ShowMoreUrl,d=typeof e===t?e.call(a,{hash:{},data:b}):e),f+=u(d)+'" class="wisfb_viewMore" data-viewmorename="PopularStats">View Full Stats</a>\r\n		'}function l(a,b){var d,e,f="";return f+='\r\n				<thead><tr>\r\n					<td></td>\r\n					<td colspan=2>\r\n						<a class="wisfb_statsCategoryHeader" data-competitionid="',(e=c.StatArgs)?d=e.call(a,{hash:{},data:b}):(e=a&&a.StatArgs,d=typeof e===t?e.call(a,{hash:{},data:b}):e),f+=u(d)+'">',(e=c.Name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Name,d=typeof e===t?e.call(a,{hash:{},data:b}):e),f+=u(d)+"</a>\r\n					</td>\r\n				</tr></thead>"}function m(a,b){var e,f="";return f+="\r\n					",e=s.invokePartial(d.wisfb_soccerStatsRow,"wisfb_soccerStatsRow",a,c,d,b),(e||0===e)&&(f+=e),f+="\r\n				"}function n(a,b){var d,e="";return e+="\r\n		",d=c.each.call(a,a&&a.Stats,{hash:{},inverse:s.noop,fn:s.program(14,o,b),data:b}),(d||0===d)&&(e+=d),e+="\r\n	"}function o(a,b){var d,e="";return e+='\r\n			<table class="wisfb_statsTable">\r\n				',d=c["if"].call(a,a&&a.Name,{hash:{},inverse:s.noop,fn:s.program(15,p,b),data:b}),(d||0===d)&&(e+=d),e+="\r\n				<tbody>\r\n				",d=c.each.call(a,a&&a.Items,{hash:{},inverse:s.noop,fn:s.program(11,m,b),data:b}),(d||0===d)&&(e+=d),e+="\r\n				</tbody>\r\n			</table>\r\n		"}function p(a,b){var d,e,f="";return f+='\r\n				<thead><tr>\r\n					<td></td>\r\n					<td colspan=2>\r\n						<a class="wisfb_statsCategoryHeader" data-statargs="',(e=c.StatArgs)?d=e.call(a,{hash:{},data:b}):(e=a&&a.StatArgs,d=typeof e===t?e.call(a,{hash:{},data:b}):e),f+=u(d)+'">',(e=c.Name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Name,d=typeof e===t?e.call(a,{hash:{},data:b}):e),f+=u(d)+"</a>\r\n					</td>\r\n				</tr></thead>"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),d=this.merge(d,a.partials),e=e||{};var q,r="",s=this,t="function",u=this.escapeExpression;return r+='<div id="wisfb_statsViewContainer">\r\n',q=c["if"].call(b,b&&b.IsEmpty,{hash:{},inverse:s.program(6,i,e),fn:s.program(1,f,e),data:e}),(q||0===q)&&(r+=q),r+="\r\n</div>"}),this.soccerIntegrated.weekCarousel=d.template(function(a,b,c,d,e){function f(a,b){return'<div class="wisfb_navArrowBg wisfb_scrollWeeksLeft"><div></div></div>'}function g(a,b){var d,e,f="";return f+='\r\n	<td data-weekid="',(e=c.Id)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Id,d=typeof e===m?e.call(a,{hash:{},data:b}):e),f+=n(d)+'">\r\n		<a href="',(e=c.Href)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Href,d=typeof e===m?e.call(a,{hash:{},data:b}):e),f+=n(d)+'" class="lnkWeekNav" data-weekid="',(e=c.Id)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Id,d=typeof e===m?e.call(a,{hash:{},data:b}):e),f+=n(d)+'" data-bypass="true">\r\n			',d=c["if"].call(a,a&&a.Type,{hash:{},inverse:o.noop,fn:o.program(4,h,b),data:b}),(d||0===d)&&(f+=d),f+='\r\n			<div class="wisfb_scrollingWeekNumber">',(e=c.Name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Name,d=typeof e===m?e.call(a,{hash:{},data:b}):e),f+=n(d)+"</div>\r\n		</a>\r\n	</td>\r\n"}function h(a,b){var d,e,f="";return f+='<div class="wisfb_scrollingWeek">',(e=c.Type)?d=e.call(a,{hash:{},data:b}):(e=a&&a.Type,d=typeof e===m?e.call(a,{hash:{},data:b}):e),f+=n(d)+"</div>"}function i(a,b){return'<div class="wisfb_navArrowBg wisfb_scrollWeeksRight"><div></div></div>'}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var j,k,l="",m="function",n=this.escapeExpression,o=this;return j=c["if"].call(b,b&&b.Carousel,{hash:{},inverse:o.noop,fn:o.program(1,f,e),data:e}),(j||0===j)&&(l+=j),l+='\r\n<table class="',(k=c.TableStyleClass)?j=k.call(b,{hash:{},data:e}):(k=b&&b.TableStyleClass,j=typeof k===m?k.call(b,{hash:{},data:e}):k),l+=n(j)+'">\r\n<tr>\r\n',j=c.each.call(b,b&&b.Weeks,{hash:{},inverse:o.noop,fn:o.program(3,g,e),data:e}),(j||0===j)&&(l+=j),l+="\r\n</tr>\r\n</table>\r\n",j=c["if"].call(b,b&&b.Carousel,{hash:{},inverse:o.noop,fn:o.program(6,i,e),data:e}),(j||0===j)&&(l+=j),l})}var i=f.Common,j=f.Utils,k=f.UI,l=g.Enums,m=new h,n=m.soccerIntegrated,o=g.templates,p=i.GetCallback,q=(i.GetLeagueDataCallback,i.SimpleBackboneHandlebarsView),r=i.AnalyticsClickMapping,s=function(){var b=c.Model.extend({idAttribute:"Date"}),d="M/D",f="ddd",g=c.Collection.extend({model:g,calculate:function(a,c,e,g,h){if(void 0!=a&&(this.matchDates=a),void 0!=this.matchDates){var i=null,k=null,l=null,m=this.matchDates[1].Date,k=moment(this.matchDates[1].Date),n=moment(),o=k.format(j.MomentConstants.DateString)==n.format(j.MomentConstants.DateString),i=moment(this.matchDates[0].Date),l=moment(this.matchDates[2].Date),p="Today";if(o||(p=k.format(f)),m!=e){var q=i.format(j.MomentConstants.DateString);this.add(new b({Href:h(i),Date:q,DateText:i.format(d),Name:i.format(f),IsSelected:q==c}))}if(this.add(new b({Href:h(k),Date:m,DateText:k.format(d),Name:p,IsSelected:null==c||m==c})),m!=g){var r=l.format(j.MomentConstants.DateString);this.add(new b({Href:h(l),Date:r,DateText:l.format(d),Name:l.format(f),IsSelected:r==c}))}}}}),h=c.View.extend({events:{"click a.wisfb_lnkDayNav":"dateClicked"},initialize:function(){this.isRendered=!1},render:function(a){if(!this.isRendered||void 0!==a&&a.forceRender){var b=n.dayNav(this.model.toJSON());this.$el.html(b),this.$el.show(),this.isRendered=!0}},dateClicked:function(b){b.preventDefault();var c=a(b.currentTarget),d=c.attr("data-day"),f=this.model.get(d);this.selectDay(f.get("Date")),e.triggerEvent("wisfoxbox:analytics",{type:i.analyticsType.filterChange,filterType:"Date"}),this.trigger("click",f)},selectDay:function(a){this.$el.find(".wisfb_selected").removeClass("wisfb_selected"),this.$selectedItem=this.$el.find("td[data-date='"+a+"']"),this.$selectedItem.addClass("wisfb_selected")}});return{DaysViewModel:g,DaysView:h}}(),t=function(){var d=function(a){return a.Id},f=function(a){return a===l.CompetitionType.League?"Week":"Game"},g=function(a){var b=a.Id,c=a.Name.split(" "),e=c[0],b=c[1];return{Href:this.fnGetHref(a),Number:a.Id,RoundId:a.RoundId,Id:d(a),Name:b,Type:e,Season:a.Season,Date:void 0!==a.Date&&""!==a.Date?a.Date:a.FirstGameDate}},h=c.Model.extend({defaults:{title:"SoccerWeeksVM"},calculate:function(a,c,e,h,i){var j=null;a.sort(function(a,b){return a.Id-b.Id});var k=b.find(a,function(a){return a.Id==c.Id});void 0===k&&(k=b.last(a),c=k),null==h?j=c:(j=b.find(a,function(a){return a.Id==h.Id}),void 0===j&&(j=b.last(a),h=j));var l=f(i),m=b.map(a,function(a){var b=a.Id,c=a.Name.split(" ");return l=c[0],b=c[1],{Href:e(a),Number:a.Id,RoundId:a.RoundId,Id:d(a),Name:b,Type:l,Season:a.Season,Date:void 0!==a.Date&&""!==a.Date?a.Date:a.FirstGameDate}}),m=[],n=a.indexOf(j);m=0==n?b.map(a.slice(0,3),g,{fnGetHref:e}):n==a.length-1?b.map(a.slice(a.length-3),g,{fnGetHref:e}):b.map(a.slice(n-1,n+2),g,{fnGetHref:e}),this.set({Weeks:m,CurrentWeek:k,SelectedWeek:j})}}),j=c.View.extend({constructor:function(){c.View.apply(this,arguments)},events:{"click a.lnkWeekNav":"weekClicked"},initialize:function(){this.isRendered=!1},render:function(b){if(!this.isRendered||void 0!==b&&b.forceRender===!0){var c=n.weekCarousel(this.model.toJSON());this.$el.html(c),this.$el.show(),this.$selectedItem=this.$el.find("td[data-weekid='"+d(this.model.get("SelectedWeek"))+"']"),this.$selectedItem.addClass("wisfb_selected");var e=this.$el.find("td[data-weekid='"+d(this.model.get("CurrentWeek"))+"']");e.addClass("wisfb_current"),this.weeksCarousel=new k.carousel({el:this.$el.find("table"),scrollLeftBtn:this.$el.find(".wisfb_scrollWeeksLeft"),scrollRightBtn:this.$el.find(".wisfb_scrollWeeksRight"),analyticsName:"Soccer_Weeks"});var f=this;a(this.weeksCarousel).on("drag:start",function(){f.undelegateEvents()}),a(this.weeksCarousel).on("drag:end",function(){f.delegateEvents()}),this.isRendered=!0}this.weeksCarousel.scrollToElement(this.$selectedItem)},weekClicked:function(c){c.preventDefault();var d=a(c.currentTarget),f=d.attr("data-weekid"),g=this.model.get("Weeks"),h=b.find(g,function(a){return a.Id==f});this.selectWeek(h),e.triggerEvent("wisfoxbox:analytics",{type:i.analyticsType.filterChange,filterType:"Week"}),this.trigger("click",h)},selectWeek:function(a){this.$el.find(".wisfb_selected").removeClass("wisfb_selected"),this.$selectedItem=this.$el.find("td[data-weekid='"+d(a)+"']"),this.$selectedItem.addClass("wisfb_selected"),this.weeksCarousel.scrollToElement(this.$selectedItem)}});return{WeeksViewModel:h,WeeksView:j}}(),u=function(a,b){return a==l.StatViewTypes.League?b==l.StatTypes.Player?l.StatsFilterType.PlayerSeasonStats:l.StatsFilterType.TeamsSeasonStats:b==l.StatTypes.Player?l.StatsFilterType.TeamPlayerSeasonStats:l.StatsFilterType.TeamChartSeasonStats},v=function(){return{StatsModel:c.Model.extend({calculate:function(a,d,e){var f=this,h=d.get("Stats");this.teamsData=a.get("Teams");var i=new c.Collection,k=!0,l=null!=e.teamId,m=h;(h.Players||h.Teams)&&(m=[h]),b.each(m,function(d){if(null!=d.Teams&&d.Teams.length>0&&e.competition!=g.Enums.Competition.Popular){var h=b.clone(e);h.statId=d.StatId;var m=new c.Model({Name:d.Name,StatArgs:JSON.stringify(h),IsSeasonStats:k,Items:new c.Collection}),n=m.get("Items");i.add(m),b.each(d.Teams,function(a){var b=null;k&&(b=m.get("CategoryName")),n.add(new c.Model(f.getTeamResultItem(a,d,b)))})}else if(null!=d.Players&&d.Players.length>0&&e.competition!=g.Enums.Competition.Popular){var h=b.clone(e);h.statId=d.StatId;var m=new c.Model({Name:d.Name,StatArgs:JSON.stringify(h),IsSeasonStats:k,Items:new c.Collection}),n=m.get("Items");i.add(m),b.each(d.Players,function(a){var b=null;k&&(b=m.get("CategoryName")),n.add(new c.Model(f.getPlayerResultItem(a,d,b,l)))})}else if(null!=d.Teams&&d.Teams.length>0&&e.competition==g.Enums.Competition.Popular){var o=new j.Uri(a.statsUrl({competition:d.CompetitionId,season:a.get("Season"),team:1})),m=new c.Model({Name:d.Competition+" - "+d.Name,StatArgs:d.CompetitionId,IsSeasonStats:k,Items:new c.Collection,ShowMoreUrl:o.toString()}),n=m.get("Items");i.add(m),b.each(d.Teams,function(a){var b=null;k&&(b=m.get("CategoryName")),n.add(new c.Model(f.getPopularTeamResultItem(a,d,b)))})}else if(null!=d.Players&&d.Players.length>0&&e.competition==g.Enums.Competition.Popular){var o=new j.Uri(a.statsUrl({competition:d.CompetitionId,season:a.get("Season"),team:0})),m=new c.Model({Name:d.Competition+" - "+d.Name,StatArgs:d.CompetitionId,IsSeasonStats:k,Items:new c.Collection,ShowMoreUrl:o.toString()}),n=m.get("Items");i.add(m),b.each(d.Players,function(a){var b=null;k&&(b=m.get("CategoryName")),n.add(new c.Model(f.getPopularPlayerResultItem(a,d,b)))})}}),this.set({Stats:i,IsEmpty:0==i.length,IsPopular:0==e.competition,LastUpdated:new Date})},getPlayerResultItem:function(a,b,c,d){var e=null,f=void 0===this.teamsData?void 0:this.teamsData[a.TeamId];return e=null!==a.TeamId&&0!==a.TeamId&&void 0!==f?{Rank:a.Rank,FullName:a.FirstName+" "+a.LastName,Value:a.Stat,Profile:a.Profile,TeamAbbreviation:f.Abbr,TeamUrl:f.Links.Home,TeamColor:f.PrimaryColor}:{Rank:a.Rank,FullName:a.FirstName+" "+a.LastName,Value:a.Stat,Profile:a.Profile,TeamAbbreviation:d?null:"FA",TeamColor:d?null:"#ffffff"}},getTeamResultItem:function(a,b,c){var d=void 0===a.TeamId?a.Id:a.TeamId,e=void 0===this.teamsData?a.TeamName:this.teamsData[d].Name;return{Rank:a.Rank,FullName:e,Value:a.Stat,Profile:a.Profile}},getPopularPlayerResultItem:function(a,b,c){var d=null;return d=null!==a.TeamId&&0!==a.TeamId&&null!==a.TeamAbbr?{Rank:a.Rank,FullName:a.FirstName+" "+a.LastName,Value:a.Stat,Profile:a.Profile,TeamAbbreviation:a.TeamAbbr,TeamUrl:a.TeamUrl}:{Rank:a.Rank,FullName:a.FirstName+" "+a.LastName,Value:a.Stat,Profile:a.Profile,TeamAbbreviation:"FA"}},getPopularTeamResultItem:function(a,b,c){return{Rank:a.Rank,FullName:a.TeamName,Value:a.Stat,Profile:a.Profile}}}),StatFiltersViewModel:c.Model.extend({initialize:function(a){void 0!==a&&(this.timeFrames=a.timeFrames,this.filterSettings=a.filtersDataModel)},calculate:function(a){var c=this;null!=a?this.filterSettings=a:a=this.filterSettings;var d=this.get("SelectedArgs"),e=this.get("StatsDate"),f=null;if(void 0===this.timeFrames){var g=e.Season;f=[{Id:g,Text:g+" Regular Season",Season:g}],null==this.defaultTimeFrame&&(this.defaultTimeFrame=f[0],d.timePeriod=this.defaultTimeFrame.Id)}else f=b.map(this.timeFrames,function(a){var e=a.Filter;return null==c.defaultTimeFrame&&a.IsSelected&&(c.defaultTimeFrame=b.extend(b.clone(a),e),d.timePeriod=c.defaultTimeFrame.Id),{Id:a.Id,Text:a.Text,Args:JSON.stringify(e)}});var h=[{StatTypeText:"Player",Selected:!0,Id:l.StatTypes.Player},{StatTypeText:"Team",Selected:!1,Id:l.StatTypes.Team}],i=a.get("Filters")[d.filterType];this.set({Timeframes:f,Stats:i,Types:h})},setTimeFrame:function(a,c){var d=b.clone(this.get("SelectedArgs"));d.timeFrame=a,d.timePeriod=a,d.season=c.Season,d.sequence=c.Sequence,null!=c.Competition&&(d.competition=c.Competition),d.statId=l.StatLeadersFilters.Overall,d.filterType=u(d.viewType,d.statType),this.set("SelectedArgs",d)},setType:function(a){var c=b.clone(this.get("SelectedArgs"));c.statType=a,c.statId=l.StatLeadersFilters.Overall;var d=this.defaultTimeFrame;c.season=d.Season,null!=d.Competition&&(c.competition=d.Competition),c.timePeriod=d.Id,c.filterType=u(c.viewType,c.statType),this.set("SelectedArgs",c)},setStat:function(a){var c=b.clone(this.get("SelectedArgs"));c.statId=a,this.set("SelectedArgs",c)},getStatTypeName:function(){var a=Number(this.get("SelectedArgs").statType);switch(a){case l.StatTypes.Player:return"Player";case l.StatTypes.Team:return"Team"}}})}}(),w=function(){return{StatFiltersView:c.View.extend({el:"#wisfb_statsFilters",events:{"change #wisfb_selectStatCategory":"statChanged","change #wisfb_selectStatTimeframe":"timeChanged","click a.wisfb_toggleButton":"typeChanged"},initialize:function(a){this.statFiltersRequested=!1,this.isRendered=!1,this.dataStore=a.dataStore,this.listenTo(this.model,"change:Stats",this.render)},render:function(){var b=n.statsFilters(JSON.parse(JSON.stringify(this.model)));this.$el.html(b),this.selStatCategory=a("#wisfb_selectStatCategory"),this.selStatTimeFrame=a("#wisfb_selectStatTimeframe"),this.isRendered=!0,this.setSelectedFilters();var c=this.model.get("SelectedArgs");c.competition===g.Enums.Competition.Popular?this.hideNonPopularFilters():this.showNonPopularFilters()},setSelectedFilters:function(){if(this.isRendered){var b=this.model.get("SelectedArgs");this.selStatCategory.val(b.statId),this.selStatTimeFrame.val(b.timePeriod),a("a.wisfb_toggleButton").removeClass().addClass("wisfb_toggleButton"),null!==b.statType&&a("a[data-view='"+b.statType+"']").addClass("wisfb_toggleButtonSelected")}},timeChanged:function(b){this.filterChange("Time");var c=a(b.target)[0],d=a(c).val(),e=JSON.parse(a(c.options[c.selectedIndex]).attr("data-args"));this.model.setTimeFrame(d,e),this.model.calculate(),this.setSelectedFilters()},statChanged:function(b){this.filterChange("Stat");var c=a(b.target)[0],d=a(c).find(":selected"),e=d.val();this.model.setStat(e)},typeChanged:function(b){var c=a(b.target),d=c.attr("data-view");e.triggerEvent("wisfoxbox:analytics",{type:i.analyticsType.toggleChange,toggleName:c.html()}),b.preventDefault(),this.model.setType(d),this.model.calculate(),this.setSelectedFilters()},showNonPopularFilters:function(){this.$("div.wisfb_statFilters").show()},hideNonPopularFilters:function(){this.$("div.wisfb_statFilters").hide()},filterChange:function(a){var b=this.model.getStatTypeName();e.triggerEvent("wisfoxbox:analytics",{type:i.analyticsType.filterChange,filterType:b+a})}})}}(),x={scores:null,standings:null,stats:null,worldcup:null,transfers:null},y={BuildCompetitionHotLinks:function(a){var b={Display:a.Display},c=a.Url.split("=");b.Id=c[1],b.Url="/soccer"+a.Url,b.Selected=Number(b.Id)===this.selectedCompetitionId,this.result.Links.push(b)}},z=c.Model.extend({initialize:function(a){var c=i.IntegratedTopView.ViewLink,d=(i.IntegratedTopView.FullPageLink,i.IntegratedTopView.ExternalLink,a.leagueModel.get("Conferences")),e=null,f=null;if(null!=d){var g=b.toArray(d);e=g[0],f=g[1]}var h=a.leagueModel.get("Links"),j=a.leagueModel.get("Competition"),k=a.leagueModel.get("CompetitionLinks"),l=new Object,m=k.CompetitionList.Options;m.sort(function(a,b){return a.DisplayOrder<b.DisplayOrder?-1:a.DisplayOrder>b.DisplayOrder?1:a.Display<b.Display?-1:a.Display>b.Display?1:0}),l.CompetitionList=m,l.CompetitionList.splice(0,0,{Value:-1,Display:"More..."}),l.Links=[],this.competitionEnum=a.leagueModel.get("CompetitionEnum"),b.each(k.Links,y.BuildCompetitionHotLinks,{result:l,selectedCompetitionId:j});var n=[];(a.sportData.get("ShowWorldCup")||"worldcup"===a.currentViewName)&&n.push(new c("World Cup","worldcup")),n.push(new c("Scores","scores")),n.push(new c("Standings","standings")),n.push(new c("Stats","stats")),n.push(new c("Transfers","transfers")),this.set({Sport:"Soccer",Links:n,ExpandDefault:h.Scores,Conferences:d,Conf1:e,Conf2:f,LinksData:h,CompetitionLinks:l})},getCompetitionAbbr:function(a){if(null!=this.competitionEnum){var c=b.findWhere(this.competitionEnum,{id:a});if(null!=c&&null!=c.abbreviation)return c.abbreviation.replace(" ","")}}}),A=i.IntegratedTopView.extend({el:"#wisfoxbox > .wisfb_contentContainer",template:n.league_league,childViewTypes:x,initialize:function(a){i.IntegratedTopView.prototype.initialize.apply(this,arguments),this.isActive=!1,this.currentView=null,this.parent=a.parent,void 0===a.viewname?this.currentViewName=this.parent.options.View:this.currentViewName=a.viewname,this.dataStore=a.dataStore,this.sportData=this.parent.dataStore.SportData;var c=this.sportData.get("Competition");this.selectedCompetitionId=c;var d=this.sportData.get("CurrentMatchday").Season,e=this.sportData.get("CurrentMatchday").SeasonSequence,f=this.sportData.get("ScoresLastUpdated");this.leagueModel=a.dataStore.getLeague({competition:c,season:d,sequence:e,t:f}),this.worldCupCompetitionId=a.viewargs.worldCupCompetitionId,this.worldCupDefaultTeamId=a.viewargs.worldCupDefaultTeamId,this.model=new z({leagueModel:this.leagueModel,sportData:this.sportData,currentViewName:this.currentViewName}),b.extend(this.events,{"click [data-competitionid]":"competitionLinkClicked","change select#wisfb_soccerCompList":"competitionSelectClicked"})},loadView:function(b,c){void 0===b&&(b=this.currentViewName);var d=this,e=d.leagueModel.get("CompetitionEnum");if(this.currentViewName=b,"worldcup"===this.currentViewName){if(this.selectedCompetitionId!==e.WC.id)return this.selectedCompetitionId=e.WC.id,void this.changedCompetition();a("div#wisfb_headerAdditionalNav").hide()}else this.paintCompetitionNavigator();i.IntegratedTopView.prototype.loadView.apply(this,[b,c])},getLoadViewArgs:function(a){var b=i.IntegratedTopView.prototype.getLoadViewArgs.apply(this,[a]);return"worldcup"===a&&(b.worldCupCompetitionId=this.worldCupCompetitionId,b.worldCupDefaultTeamId=this.worldCupDefaultTeamId),b},render:function(b){var c=this;i.IntegratedTopView.prototype.render.call(c,b);var d=a("div#wisfb_headerAdditionalNav"),e=this.model.get("CompetitionLinks"),f=n.league_competitionSelector(e);d.html(a(f)),this.paintCompetitionNavigator()},paintCompetitionNavigator:function(){var c=this;if(void 0!=this.selectedCompetitionId){a("div#wisfb_headerAdditionalNav").show();var d=a("a.wisfb_soccerCompLink"),e=a("select#wisfb_soccerCompList");d.removeClass("wisfb_selected"),e.removeClass("wisfb_selected");var f=b.filter(d,function(b){var d=a(b).attr("data-competitionid");return Number(d)===c.selectedCompetitionId});void 0!=f[0]?(a(f[0]).addClass("wisfb_selected"),a(e).val(-1)):(e.addClass("wisfb_selected"),e.val(this.selectedCompetitionId))}},competitionLinkClicked:function(b){b.preventDefault();var c=a(b.currentTarget),d=c.attr("data-competitionid");this.currentViewName;this.selectedCompetitionId=parseInt(d),this.changedCompetition(c)},competitionSelectClicked:function(b){b.preventDefault();var c=a(b.currentTarget),d=c.val();this.currentViewName;-1!==Number(d)&&(this.selectedCompetitionId=parseInt(d),this.changedCompetition(c))},changedCompetition:function(a){this.loadingAnimation.loadStart(),this.dataStore.getSportDataAsync({competition:this.selectedCompetitionId,forceUpdate:!0},b.bind(this.competitionSportDataCallback,this,a))},competitionSportDataCallback:function(a,c){this.sportData=c,this.dataStore.resetSportDataListeners(this.sportData),this.dataStore.SportData=this.sportData,this.dataStore.getLeagueAsync({competition:this.selectedCompetitionId,season:this.sportData.get("CurrentMatchday").Season,sequence:this.sportData.get("CurrentMatchday").SeasonSequence},b.bind(this.competitionLeagueCallback,this,a))},competitionLeagueCallback:function(b,c){if(this.leagueModel=c,void 0!=b){a("section.wisfb_soccerCompSelector #wisfb_soccerCompList").val(this.selectedCompetitionId);var d=a("section.wisfb_soccerCompSelector .wisfb_selected");d.removeClass("wisfb_selected"),b.addClass("wisfb_selected")}this.loadView(this.currentViewName,{competition:this.selectedCompetitionId,sportData:this.sportData})},getAnalyticsSubset:function(){return null!=this.model?this.model.getCompetitionAbbr(this.selectedCompetitionId):void 0}});x.scores=function(){var e={filterCalculationIterator:function(a){var c={Id:a.Id,Name:a.Name,ViewClass:"wisfb_soccerScoresFilter",Items:[]};b.each(a.Items,e.filterItemCalculationIterator,{result:c.Items,roundId:this.roundId}),this.result.push(c)},filterItemCalculationIterator:function(a){this.result.push({Value:a.Id,AltValue:a.Sequence,Name:a.Name,Selected:a.Id==this.roundId})}},f=c.Model.extend({calculate:function(a,c){var d=a.get("SeasonData").Rounds,f=c,g=[],h=[],i={Id:"wisfb_soccerRoundFilter",Name:"wisfb_soccerRoundFilter",Items:d};h.push(i),b.each(h,e.filterCalculationIterator,{result:g,roundId:f}),this.set("Filters",g)}}),h=g.FiltersView.extend({events:{"change select.wisfb_soccerScoresFilter":"changedScoresFilter"},changedScoresFilter:function(b){b.preventDefault();var c=a(b.currentTarget)[0];this.trigger("changed",{
roundId:a(c).val(),roundSequence:a(c.selectedOptions[0]).attr("data-altvalue")})},setScoresFilters:function(b){a("#wisfb_soccerRoundFilter").val(b)}});d.registerPartial("wisfb_soccerScheduleChip",n.scheduleChip);var i={scheduleSortKeyFunc:function(a,b,c){return c.GameDateTimeHash.toString()+c.statusSortPriority.toString()+c.gameIdSortKey.toString()}};return c.View.extend({el:"section#wisfb_scores",initialize:function(a){this.parent=a.parent,this.dataStore=a.dataStore,this.sportData=this.dataStore.SportData,this.competition=this.sportData.get("Competition"),this.currentMatchday=this.sportData.get("CurrentMatchday"),this.selectedMatchday=b.clone(this.sportData.get("ScoresDate"));var c=moment(this.currentMatchday.Date),d=moment(this.selectedMatchday.Date);d>c&&(d=c,this.selectedMatchday=this.currentMatchday),this.leagueDataModel=null,this.scoresDataModel=null,this.scoresModel=new g.ScoresViewModel,this.scoresView=new g.GetScoresView({el:"#wisfb_scoresContent",model:this.scoresModel}),this.daysModel=new s.DaysViewModel,this.daysNav=new s.DaysView({model:this.daysModel,el:"section#wisfb_scores nav#wisfb_scrollingDays"}),this.weeksModel=new t.WeeksViewModel,this.weeksNav=new t.WeeksView({model:this.weeksModel,el:"section#wisfb_scores nav#wisfb_scrollingWeeks"}),this.filtersModel=new f,this.filtersView=new h({model:this.filtersModel,el:"#wisfb_scoresFilters",parent:this}),this.listenTo(this.filtersView,"changed",this.onFiltersChanged),this.listenTo(this.weeksNav,"click",this.onWeekChanged),this.listenTo(this.daysNav,"click",this.onDayChanged),this.rendered=!1,this.loaded={scores:!1},this.scrolling=a.scrolling,this.loadingAnimation=a.loadingAnimation,this.requireScheduleUpdate=!0,this.leagueChanged=!1,this.configureView()},render:function(a){if(this.rendered&&void 0!=this.parent.selectedCompetitionId&&this.parent.selectedCompetitionId!==this.competition){this.competition=this.parent.selectedCompetitionId,this.sportData=this.parent.sportData,this.currentMatchday=this.sportData.get("CurrentMatchday"),this.selectedMatchday=b.clone(this.sportData.get("ScoresDate"));var c=moment(this.currentMatchday.Date),d=moment(this.selectedMatchday.Date);d>c&&(d=c,this.selectedMatchday=this.currentMatchday),this.forgetDataModels(),this.rendered=!1,this.loaded={scores:!1},this.leagueChanged=!0,this.configureView()}this.rendered?(this.renderExpandLink(),this.decommenseThrobber()):(this.getLeague(),this.getScores(),this.rendered=!0),this.$el.show(),this.scrolling.setScroll()},decommenseThrobber:function(){this.loaded.scores&&this.loadingAnimation.loadEnd()},renderExpandLink:function(){null!=this.leagueDataModel&&this.parent.SetExpandHref(this.leagueDataModel.scoresUrl({competition:this.competition,season:this.selectedMatchday.Season,round:this.selectedMatchday.RoundSequence,group:this.selectedMatchday.Group,week:this.selectedMatchday.Id,date:this.selectedMatchday.Date}))},renderNavElements:function(){var c=this;if(null!=this.leagueDataModel)if(this.competition!==l.Competition.Popular){var d=this.leagueDataModel.get("SeasonData").Rounds,e=b.filter(d,function(a){return a.Id===Number(c.selectedMatchday.RoundId)}),f=void 0!==e[0].Weeks?e[0].Weeks:this.leagueDataModel.get("Matchdays");this.weeksModel.calculate(f,this.currentMatchday,function(a){return c.leagueDataModel.scheduleUrl(a.SeasonType,a.Number)},this.selectedMatchday,this.leagueDataModel.get("CompetitionType")),this.weeksNav.render({forceRender:!0});var g=this.weeksModel.get("Weeks").length;1>=g&&a(this.weeksNav.el).hide(),this.leagueDataModel.get("SeasonData").Rounds.length>1?(this.filtersModel.calculate(this.leagueDataModel,this.selectedMatchday.RoundId),this.filtersView.render()):a(this.filtersView.el).hide(),a(this.daysNav.el).hide()}else this.daysModel.calculate(this.leagueDataModel.get("Matchdays"),this.selectedMatchday.Date,this.leagueDataModel.get("SeasonStart"),this.leagueDataModel.get("SeasonEnd"),function(a){return c.leagueDataModel.scoresUrl(a.Season,a.SeasonType,a.Date)}),this.daysNav.render({forceRender:!0}),this.daysNav.selectDay(this.selectedMatchday.Date),a(this.weeksNav.el).hide(),a(this.filtersView.el).hide()},configureView:function(){if(this.selectedMatchday.Date==this.currentMatchday.Date)this.scoresView.itemTemplate=null,this.chipType=l.ScoreChipType.Large,this.scoresView.groupingField=null,this.scoresView.groupingTitleField=null;else{this.scoresView.itemTemplate="wisfb_soccerScheduleChip",this.chipType=l.ScoreChipType.Schedule;var a=this.competition===l.Competition.Popular;a?(this.scoresView.groupingField=null,this.scoresView.groupingTitleField=null):(this.scoresView.groupingField="DateText",this.scoresView.groupingTitleField="DateText")}},onScoresModelChanged:function(){if(this===this.options.parent.currentView){if(null!=this.leagueDataModel&&null!=this.scoresDataModel){var a=this.competition===l.Competition.Popular;this.scoresModel.calculate(this.scoresDataModel.get("Schedule").Events,this.leagueDataModel,{cacheKey:this.competition+"-"+this.selectedMatchday.RoundId+"-"+this.selectedMatchday.Date,getLeaders:!0,isFullPage:this.isFullPage,isPopular:a,chipType:this.chipType,currentDate:this.sportData.get("CurrentMatchday").Date,sortKeyFunc:this.chipType==l.ScoreChipType.Large?null:i.scheduleSortKeyFunc});var b=this.selectedMatchday.Season+"-"+this.competition+"-"+this.selectedMatchday.RoundId;this.navRefreshKey!=b&&(this.navRefreshKey=b,this.renderNavElements()),this.requireScheduleUpdate=!1,this.renderExpandLink(),this.loaded.scores=!0,this.decommenseThrobber(),this.scrolling.setScroll(!0)}}else this.requireScheduleUpdate=!0},getLeague:function(){this.dataStore.getLeagueAsync({season:this.currentMatchday.Season,competition:this.competition,sequence:this.currentMatchday.SeasonSequence},b.bind(p,this,"leagueDataModel","change","onScoresModelChanged"))},getScores:function(){var a=this.selectedMatchday.Date;this.selectedMatchday.RoundId===l.RoundType.GroupStage&&(a=null);var c=this.selectedMatchday.RoundId;this.competition===l.Competition.Popular&&(c=l.Competition.Default);var d=this.selectedMatchday.SeasonSequence;this.dataStore.getScheduleAsync({season:this.selectedMatchday.Season,sequence:d,date:a,matchDay:this.selectedMatchday.Id,roundId:this.selectedMatchday.RoundId,competition:this.competition,group:this.selectedMatchday.Group},b.bind(p,this,"scoresDataModel","change","onScoresModelChanged"))},forgetDataModels:function(){null!=this.leagueDataModel&&this.stopListening(this.leagueDataModel),this.leagueDataModel=null,null!=this.scoresDataModel&&this.stopListening(this.scoresDataModel),this.scoresDataModel=null},onFiltersChanged:function(a){this.selectedMatchday.RoundId=a.roundId,this.selectedMatchday.RoundSequence=a.roundSequence,this.loadingAnimation.loadStart(),this.loaded.scores=!1,this.configureView(),this.getScores()},onDayChanged:function(a){b.isFunction(a.toJSON)?this.selectedMatchday=a.toJSON():this.selectedMatchday=a,this.loadingAnimation.loadStart(),this.loaded.scores=!1,this.configureView(),this.getScores()},onWeekChanged:function(a){b.isFunction(a.toJSON)?this.selectedMatchday=a.toJSON():this.selectedMatchday=a,this.loadingAnimation.loadStart(),this.loaded.scores=!1,this.configureView(),this.getScores()}})}(),x.standings=function(){var d=c.View.extend({events:{"change select.wisfb_soccerStandingsFilter":"changedStandingsFilter"},initialize:function(a){this.parent=a.parent,this.listenTo(this.model,"calculated",this.render)},render:function(){this.$el.show();var a=o.filters(JSON.parse(JSON.stringify(this.model)));this.$el.html(a),this.$seasonFilter=this.$el.find(".wisfb_soccerSeasonFilter"),this.$roundFilter=this.$el.find(".wisfb_soccerRoundFilter")},changedStandingsFilter:function(b){b.preventDefault();a(b.currentTarget)[0];this.trigger("changed",{roundId:this.$roundFilter.val(),season:this.$seasonFilter.val()})},setStandingsFilters:function(a,b){this.$seasonFilter.val(a),this.$roundFilter.val(b)}});return c.View.extend({el:"section#wisfb_standings",initialize:function(a){this.parent=a.parent,this.dataStore=a.dataStore,this.sportData=this.dataStore.SportData,this.competition=this.sportData.get("Competition"),this.currentMatchday=this.sportData.get("CurrentMatchday"),this.selectedMatchday=this.sportData.get("ScoresDate");var b=moment(this.currentMatchday.Date),c=moment(this.selectedMatchday.Date);c>b&&(c=b,this.selectedMatchday=this.currentMatchday),this.leagueDataModel=null,this.standingsDataModel=null,this.season=this.sportData.get("StandingsSeason"),this.sequence=this.sportData.get("StandingsSeasonSequence"),this.standingsViewModel=new g.StandingsViewModel,this.standingsView=new g.StandingsView({model:this.standingsViewModel,el:"#wisfb_standingsContent"}),this.setTemplate(),this.standingsFiltersView=new d({model:this.standingsViewModel,el:"#wisfb_standingsFilters",parent:this}),this.listenTo(this.standingsFiltersView,"changed",this.onFiltersChanged),this.scrolling=a.scrolling,this.loadingAnimation=a.loadingAnimation,this.requireUpdate=!0,this.rendered=!1,this.loaded={standings:!1}},render:function(a){if(this.rendered&&void 0!=this.parent.selectedCompetitionId&&this.parent.selectedCompetitionId!==this.competition){this.competition=this.parent.selectedCompetitionId,this.sportData=this.parent.sportData,this.currentMatchday=this.sportData.get("CurrentMatchday"),this.selectedMatchday=b.clone(this.sportData.get("ScoresDate"));var c=moment(this.currentMatchday.Date),d=moment(this.selectedMatchday.Date);d>c&&(d=c,this.selectedMatchday=this.currentMatchday),this.season=this.sportData.get("StandingsSeason"),this.sequence=this.sportData.get("StandingsSeasonSequence"),this.setTemplate(),this.forgetDataModels(),this.rendered=!1,this.loaded={standings:!1}}this.rendered?(this.renderExpandLink(),this.decommenseThrobber()):(this.getLeague(),this.getStandings(),this.rendered=!0),this.$el.show(),this.scrolling.setScroll()},decommenseThrobber:function(){this.loaded.standings&&this.loadingAnimation.loadEnd()},renderExpandLink:function(){null!=this.leagueDataModel&&this.parent.SetExpandHref(this.leagueDataModel.standingsUrl({competition:this.competition,season:this.selectedMatchday.Season,round:this.selectedMatchday.RoundSequence,group:this.selectedMatchday.Group,week:this.selectedMatchday.Id,date:this.selectedMatchday.Date}))},onStandingsModelChanged:function(){this===this.options.parent.currentView?null!=this.leagueDataModel&&null!=this.standingsDataModel&&(this.standingsViewModel.calculate(this.leagueDataModel,this.standingsDataModel,this.competition),this.renderExpandLink(),this.loaded.standings=!0,this.decommenseThrobber(),this.requireScheduleUpdate=!1,this.scrolling.setScroll(!0)):this.requireScheduleUpdate=!0},getLeague:function(){this.dataStore.getLeagueAsync({season:this.season,competition:this.competition,sequence:this.sequence},b.bind(p,this,"leagueDataModel","change","onStandingsModelChanged"))},getStandings:function(){this.dataStore.getStandingsAsync({season:this.selectedMatchday.Season,sequence:this.selectedMatchday.RoundSequence,roundId:this.selectedMatchday.RoundId,competition:this.competition},b.bind(p,this,"standingsDataModel","change","onStandingsModelChanged"))},forgetDataModels:function(){null!=this.leagueDataModel&&this.stopListening(this.leagueDataModel),this.leagueDataModel=null,null!=this.standingsDataModel&&this.stopListening(this.standingsDataModel),this.standingsDataModel=null},onFiltersChanged:function(a){this.selectedMatchday.RoundId=a.roundId,this.selectedMatchday.Season=a.season,this.loadingAnimation.loadStart(),this.loaded.standings=!1,this.getStandings()},setTemplate:function(){var a=0===this.competition?n.league_popularStandings:n.league_competitionStandings;this.standingsView.template=a}})}(),x.stats=function(){return d.registerPartial("wisfb_soccerStatsRow",o.statsRow),c.View.extend({el:"#wisfb_stats",events:{"click [data-teamid]":"onTeamClicked","click [data-statargs]":"statTitleClicked"},analyticsClickMapping:[new r(".wisfb_playerName a","Player")],initialize:function(a){this.parent=a.parent,this.dataStore=a.dataStore,this.sportData=this.dataStore.SportData,this.competition=this.sportData.get("Competition"),this.currentMatchday=this.sportData.get("CurrentMatchday"),this.selectedMatchday=this.sportData.get("StatsDate"),this.listenTo(this.sportData,"change:StatsDate",this.onStatsDateChanged),this.statsDataModel=null,this.filtersModel=new v.StatFiltersViewModel,this.listenTo(this.filtersModel,"change:SelectedArgs",this.getStats),this.statsModel=new v.StatsModel,this.statFiltersView=new w.StatFiltersView({model:this.filtersModel}),this.statsView=new q({el:"#wisfb_statsContent",template:n.statsTable,model:this.statsModel}),this.scrolling=a.scrolling,this.loadingAnimation=a.loadingAnimation,this.requireUpdate=!0,this.rendered=!1,this.loaded={stats:!1}},render:function(a){this.filtersModel.get("SelectedArgs");if(this.rendered&&void 0!=this.parent.selectedCompetitionId&&this.parent.selectedCompetitionId!==this.competition){this.competition=this.parent.selectedCompetitionId,this.sportData=this.parent.sportData,this.currentMatchday=this.sportData.get("CurrentMatchday"),this.selectedMatchday=b.clone(this.sportData.get("ScoresDate"));var c=moment(this.currentMatchday.Date),d=moment(this.selectedMatchday.Date);d>c&&(d=c,this.selectedMatchday=this.currentMatchday),this.forgetDataModels(),this.rendered=!1,this.loaded={stats:!1}}this.rendered?(this.renderExpandLink(),this.decommenseThrobber()):(this.rendered=!0,this.getLeague(),this.getStatsFilters()),this.$el.show(),this.scrolling.setScroll()},decommenseThrobber:function(){this.loaded.stats&&this.loadingAnimation.loadEnd()},renderExpandLink:function(){null!=this.leagueDataModel&&this.parent.SetExpandHref(this.leagueDataModel.statsUrl({season:this.filtersModel.get("SelectedArgs").season,team:this.filtersModel.get("SelectedArgs").statType,statId:this.filtersModel.get("SelectedArgs").statId,competition:this.filtersModel.get("SelectedArgs").competition}))},updateStats:function(){null!=this.leagueDataModel&&null!=this.statsDataModel&&(this.statFiltersView.setSelectedFilters(),this.statsModel.calculate(this.leagueDataModel,this.statsDataModel,this.filtersModel.get("SelectedArgs"),null),this.scrolling.setScroll()||this.scrolling.scrollToTop(),this.loadingAnimation.loadEnd())},initializeStatFilters:function(){if(null!=this.statFiltersDataModel){var a={competition:this.competition,statId:l.StatLeadersFilters.Overall,season:this.currentMatchday.Season,sequence:this.currentMatchday.SeasonSequence,statType:l.StatTypes.Player,viewType:l.StatViewTypes.League,filterType:l.StatsFilterType.PlayerSeasonStats};this.filtersModel.set({SelectedArgs:a,StatsDate:this.currentMatchday}),this.filtersModel.calculate(this.statFiltersDataModel),this.statFiltersView.render(),this.statFiltersView.setSelectedFilters()}},getLeague:function(){this.dataStore.getLeagueAsync({season:this.currentMatchday.Season,sequence:this.currentMatchday.SeasonSequence,competition:this.competition},b.bind(p,this,"leagueDataModel","change","updateStats"))},getStats:function(){b.clone(this.filtersModel.get("SelectedArgs"));this.loadingAnimation.loadStart(),this.loaded.stats=!1,this.dataStore.getStatsAsync(this.filtersModel.get("SelectedArgs"),b.bind(p,this,"statsDataModel","change","updateStats"))},getStatsFilters:function(){this.dataStore.getStatFiltersAsync({competition:this.competition},b.bind(p,this,"statFiltersDataModel","change","initializeStatFilters"))},forgetDataModels:function(){null!=this.leagueDataModel&&this.stopListening(this.leagueDataModel),this.leagueDataModel=null,null!=this.statsDataModel&&this.stopListening(this.statsDataModel),this.statsDataModel=null},statTitleClicked:function(b){event.preventDefault();var c=this.filtersModel.getStatTypeName();this.parent.analyticsClick(c+"StatTitle");var d=a(event.currentTarget),e=JSON.parse(d.attr("data-statargs"));this.filtersModel.set("SelectedArgs",e),this.statFiltersView.setSelectedFilters(),this.getStats()}})}(),x.worldcup=function(){var d={filterById:function(a){return a.Id==this.Id},filterCalculationIterator:function(a){var c=new Object;c.Id=a.Id,c.Name=a.Name,c.ViewClass="wisfb_worldCupTeamFilter",c.SingleFilter=this.isSingle,c.Items=[],b.each(a.Items,d.filterItemCalculationIterator,{result:c.Items,roundId:this.roundId}),this.result.push(c)},filterItemCalculationIterator:function(a){var b=new Object;b.Value=a.Id,b.Name=a.Name,b.Selected=a.Id==this.roundId,this.result.push(b)},matchTeamId:function(a){return a.AwayTeamId==this.teamId||a.HomeTeamId==this.teamId}},f=c.Model.extend({initialize:function(){},calculate:function(a){var c=b.toArray(a.get("Teams")),e=[],f=[];c=c.sort(function(a,b){return a.Name<b.Name?-1:1});var g={Id:"wisfb_worldCupTeamFilter",Name:"wisfb_worldCupTeamFilter",Items:c};f.push(g),b.each(f,d.filterCalculationIterator,{result:e,isSingle:!0}),this.set("Filters",e)}}),h=g.FiltersView.extend({events:{"change select#wisfb_teamFilter":"changedTeamFilter"},changedTeamFilter:function(b){b.preventDefault();var c=a(b.currentTarget)[0];this.parent.selectedMatchday.RoundId=a(c).val(),this.trigger("changed")},setScoresFilters:function(b){a("#wisfb_soccerRoundFilter").val(b)}}),i=c.Model.extend({initialize:function(){},calculate:function(a,c,d){var e=a.get("Teams"),f=new Object;f.Teams=[];var g=c.get("Standings"),h=g.Groups[0].Subgroups,i=b.filter(h,function(a){var c=b.filter(a.Standings,function(a){return a.TeamId===d});return c.length>0});i=i[0],b.each(i.Standings,function(a){var b=e[a.TeamId],c="";b.Id===d&&(c+=" wisfb_highlight");var g={Name:b.Name,Id:a.TeamId,Wins:a.Wins,Draws:a.Draws,Losses:a.Losses,Points:a.Points,TeamRowClass:c};f.Teams.push(g)}),f.Teams=f.Teams.sort(function(a,b){return a.Points<b.Points?1:a.Points>b.Points?-1:0}),f.Name=i.Name+" Standings",f.Link=a.get("Links").Standings;var j=[];j.push(f),this.set({Standings:j}),this.trigger("calculated")}}),k=c.View.extend({initialize:function(a){this.template=a.template,this.listenTo(this.model,"calculated",this.render)},render:function(){this.$el.show();var b=this.template(JSON.parse(JSON.stringify(this.model)));this.$el.html(b),a("#wisfb_worldCupMoreStandings").attr("data-standingsargs",JSON.stringify(this.model.get("StandingsArgs")))}});return c.View.extend({el:"section#wisfb_worldCup",events:{"change select.wisfb_worldCupTeamFilter":"onTeamChanged"},initialize:function(a){this.parent=a.parent,this.dataStore=a.dataStore,this.sportData=this.dataStore.SportData,this.competition=this.sportData.get("Competition"),this.currentMatchday=this.sportData.get("CurrentMatchday"),this.selectedMatchday=b.clone(this.sportData.get("ScoresDate")),this.selectedTeamId=a.worldCupDefaultTeamId,this.standingsSeason=this.sportData.get("StandingsSeason"),this.standingsSeasonSequence=this.sportData.get("StandingsSeasonSequence"),this.leagueDataModel=null,this.scoresDataModel=null,this.scheduleDataModel=null,this.standingsDataModel=null,this.scoresViewModel=new g.ScoresViewModel,this.scoresView=g.GetScoresView({model:this.scoresViewModel,el:".wisfb_worldCupScoresContent"}),this.scheduleViewModel=new g.ScoresViewModel,this.scheduleView=g.GetScoresView({model:this.scoresViewModel,el:".wisfb_worldCupScheduleContent",itemTemplate:"wisfb_soccerScheduleChip"}),this.filtersViewModel=new f,this.filtersView=new h({model:this.filtersViewModel,el:"#wisfb_teamFilter",parent:this}),this.listenTo(this.filtersView,"changed",this.getSchedule),this.standingsViewModel=new i,this.standingsView=new k({model:this.standingsViewModel,el:"#wisfb_groupStandings",template:o.worldCupGroupStandings}),this.rendered=!1,this.loaded={league:!1,scores:!1,schedule:!1,standings:!1},this.scrolling=a.scrolling,this.loadingAnimation=a.loadingAnimation,this.requireUpdate={scores:!1,schedule:!1,standings:!1}},render:function(b){a("div#wisfb_headerAdditionalNav").hide(),this.rendered?(this.renderExpandLink(),this.decommenseThrobber()):(this.rendered=!0,this.getLeague(),this.getSchedule(),this.getScores(),this.getStandings()),this.$el.show(),this.scrolling.setScroll()},decommenseThrobber:function(){this.loaded.scores&&this.loaded.schedule&&this.loaded.standings&&this.loadingAnimation.loadEnd()},renderExpandLink:function(){null!=this.leagueDataModel&&this.parent.SetExpandHref(this.leagueDataModel.worldCupUrl({competition:this.competition,season:this.selectedMatchday.Season}))},onLeagueModelChanged:function(){var c=this;this.filtersViewModel.calculate(this.leagueDataModel),this.filtersView.render(),a(".wisfb_worldCupTeamFilter").val(this.selectedTeamId);var d=this.leagueDataModel.get("Teams"),e=b.filter(d,function(a){return a.Id===c.selectedTeamId});this.selectedGroupId=e[0].GroupID,this.updateScores(),this.updateSchedule(),this.updateStandings(),this.renderExpandLink()},updateScores:function(){if(this===this.options.parent.currentView){if(null!=this.leagueDataModel&&null!=this.scoresDataModel){var c=this.selectedMatchday,e=this.scoresDataModel.get("Schedule").Events;this.scoresViewModel.calculate(e,this.leagueDataModel,{cacheKey:c.RoundId+"-"+c.Id,currentDate:c.Date});var f=this.leagueDataModel.get("SeasonData").Rounds,g=b.find(f,d.filterById,{Id:this.selectedMatchday.RoundId});a("#wisfb_worldCupScoresRound").html(": "+g.Name),g.Id===l.RoundType.GroupStage?a("div#wisfb_worldCupBracketContainer").hide():a("div#wisfb_worldCupBracketContainer").show(),this.requireUpdate.scores=!1,this.loaded.scores=!0,this.decommenseThrobber(),this.scrolling.setScroll(!0)}}else this.requireUpdate.scores=!0},updateSchedule:function(){if(this===this.options.parent.currentView){if(null!=this.leagueDataModel&&null!=this.scheduleDataModel){var c=this.selectedMatchday,e=this.scheduleDataModel.get("Schedule").Events,f=b.filter(e,d.matchTeamId,{teamId:this.selectedTeamId});this.scheduleViewModel.calculate(f,this.leagueDataModel,{cacheKey:this.selectedTeamId+c.RoundId+"-"+c.Id,currentDate:c.Date,chipType:l.ScoreChipType.Schedule}),this.scheduleViewModel.set("IsPopular","true");var g=new j.Uri(this.leagueDataModel.scheduleUrl({competition:this.leagueDataModel.get("Competition"),season:this.leagueDataModel.get("Season")}));a("#wisfb_worldCupCompleteSchedule").attr("href",g.toString()),this.requireUpdate.schedule=!1,this.loaded.schedule=!0,this.decommenseThrobber(),this.scrolling.setScroll(!0)}}else this.requireUpdate.schedule=!0},updateStandings:function(){if(this===this.options.parent.currentView){if(null!=this.leagueDataModel&&null!=this.standingsDataModel){this.standingsViewModel.calculate(this.leagueDataModel,this.standingsDataModel,this.selectedTeamId);var b=new j.Uri(this.leagueDataModel.standingsUrl({competition:this.leagueDataModel.get("Competition"),season:this.leagueDataModel.get("Season")}));a("#wisfb_worldCupMoreStandings").attr("href",b.toString()),this.requireUpdate.standings=!1,this.loaded.standings=!0,this.decommenseThrobber(),this.scrolling.setScroll(!0)}}else this.requireUpdate.standings=!0},getLeague:function(a){this.dataStore.getLeagueAsync({season:this.currentMatchday.Season,sequence:this.currentMatchday.SeasonSequence,competition:this.competition},b.bind(p,this,"leagueDataModel","change","onLeagueModelChanged"))},getScores:function(a){var c=this.selectedMatchday.Id,d=this.selectedMatchday.RoundId,e=this.selectedMatchday.Date;this.dataStore.getScheduleAsync({competition:this.competition,matchDay:c,season:this.selectedMatchday.Season,sequence:this.selectedMatchday.SeasonSequence,date:e,roundId:d,teamId:void 0},b.bind(p,this,"scoresDataModel","change","updateScores"))},getSchedule:function(a){this.dataStore.getScheduleAsync({season:this.selectedMatchday.Season,sequence:this.selectedMatchday.SeasonSequence,teamId:this.selectedTeamId,competition:this.competition},b.bind(p,this,"scheduleDataModel","change","updateSchedule"))},getStandings:function(a){this.dataStore.getStandingsAsync({season:this.standingsSeason,sequence:this.standingsSeasonSequence,roundId:this.selectedMatchday.RoundId,competition:this.competition},b.bind(p,this,"standingsDataModel","change","updateStandings"))},onTeamChanged:function(b){b.preventDefault();var c=a(b.currentTarget),d=c.val();this.selectedTeamId=Number(d),this.getSchedule(),this.getStandings()},standingsClicked:function(b){b.preventDefault();var c=a(b.currentTarget),d="standings",f=JSON.parse(c.attr("data-standingsargs"));e.triggerEvent("wisfoxbox:viewchanged",{view:d,viewParams:f})},scheduleClicked:function(b){b.preventDefault();var c=a(b.currentTarget),d="schedule",f=JSON.parse(c.attr("data-scheduleargs"));e.triggerEvent("wisfoxbox:viewchanged",{view:d,viewParams:f})}})}(),x.transfers=function(){var a=c.Model.extend({constructor:function(){c.Model.apply(this,arguments)},calculate:function(a,c){var d=a.get("Transfers").Competition,e=b.map(a.get("Transfers").Transfers,function(a){var c=b.clone(a);switch(c.Type){case l.TransferType.Loan:c.Description="Loan",c.Class="wisfb_loan";break;case l.TransferType.Transfer:c.Description="Transfer",c.Class="wisfb_transfer";break;default:case l.TransferType.None:c.Description="Signing",c.Class="wisfb_signing"}return c.Date=moment(c.Date).format("M/D"),c});this.set({IsFeatured:0==d,Transfers:e,ViewMoreUrl:c})}});return c.View.extend({el:"section#wisfb_transfers",initialize:function(b){this.parent=b.parent,this.dataStore=b.dataStore,this.sportData=this.dataStore.SportData,this.competition=this.sportData.get("Competition"),this.currentMatchday=this.sportData.get("CurrentMatchday"),this.selectedMatchday=this.sportData.get("ScoresDate");var c=moment(this.currentMatchday.Date),d=moment(this.selectedMatchday.Date);d>c&&(d=c,this.selectedMatchday=this.currentMatchday),this.leagueDataModel=null,this.transfersDataModel=null,this.season=this.selectedMatchday.Year,this.transfersViewModel=new a,this.transfersView=new i.SimpleBackboneHandlebarsView({el:"#wisfb_transfersContent",model:this.transfersViewModel,template:n.league_transfers}),this.scrolling=b.scrolling,this.loadingAnimation=b.loadingAnimation,this.requireUpdate=!0,this.rendered=!1,this.loaded={transfers:!1}},render:function(a){if(this.rendered&&void 0!=this.parent.selectedCompetitionId&&this.parent.selectedCompetitionId!==this.competition){this.competition=this.parent.selectedCompetitionId,this.sportData=this.parent.sportData,this.currentMatchday=this.sportData.get("CurrentMatchday"),this.selectedMatchday=b.clone(this.sportData.get("ScoresDate"));var c=moment(this.currentMatchday.Date),d=moment(this.selectedMatchday.Date);d>c&&(d=c,this.selectedMatchday=this.currentMatchday),this.season=this.currentMatchday.Year,this.forgetDataModels(),this.rendered=!1,this.loaded={transfers:!1}}this.rendered?(this.renderExpandLink(),this.decommenseThrobber()):(this.getLeague(),this.getTransfers(),this.rendered=!0),this.$el.show(),this.scrolling.setScroll()},decommenseThrobber:function(){this.loaded.transfers&&this.loadingAnimation.loadEnd()},renderExpandLink:function(){null!=this.leagueDataModel&&this.parent.SetExpandHref(this.leagueDataModel.transfersUrl({competition:this.competition}))},onTransfersModelChanged:function(){this===this.options.parent.currentView?null!=this.leagueDataModel&&null!=this.transfersDataModel&&(this.transfersViewModel.calculate(this.transfersDataModel,this.leagueDataModel.transfersUrl({competition:this.competition})),this.renderExpandLink(),this.loaded.transfers=!0,this.decommenseThrobber(),this.requireUpdate=!1,this.scrolling.setScroll(!0)):this.requireUpdate=!0},getLeague:function(){this.dataStore.getLeagueAsync({season:this.season,competition:this.competition,sequence:this.sequence},b.bind(p,this,"leagueDataModel","change","onTransfersModelChanged"))},getTransfers:function(){this.dataStore.getTransfersAsync({season:this.season,sequence:this.sequence,competition:this.competition},b.bind(p,this,"transfersDataModel","change","onTransfersModelChanged"))},forgetDataModels:function(){null!=this.leagueDataModel&&this.stopListening(this.leagueDataModel),this.leagueDataModel=null,null!=this.standingsDataModel&&this.stopListening(this.transfersDataModel),this.transfersDataModel=null}})}();var B={schedule:null,stats:null,roster:null},C=i.IntegratedTopView.ViewLink,D=(i.IntegratedTopView.FullPageLink,i.IntegratedTopView.ExternalLink,function(a){var c=b.clone(a);return c.Links=b.clone(a.Links),c.Id==this.Id&&(c.Selected="selected"),c}),E=function(a){var b=a.HideSelection;return null==b&&(b=!1),!b},F=c.Model.extend({initialize:function(a){var c=a.selectedTeamId,d=b.filter(a.teams,E),e=b.sortBy(b.map(d,D,{Id:c}),"Name");this.set({Teams:e,Sport:"Soccer"}),this.setTeam(c,a.selectedTeamData)},setTeam:function(a,c){var d=this.get("Teams"),e=b.extend(b.clone(b.findWhere(d,{Id:a})),{LogoUrl:c.logo,PrimaryColor:c.primaryColor}),f=e.Links;this.vmTeams=d,this.set({SelectedTeam:e,HideCity:!0,Links:[new C("Schedule","schedule"),new C("Stats","stats"),new C("Roster","roster")],ExpandDefault:f.Home,LinksData:f,IsTeam:!0}),b.each(d,function(b){b.Id==a?b.Selected="selected":b.Selected=null})},getTeamAbbr:function(a){if(null!=this.vmTeams){var c=b.findWhere(this.vmTeams,{Id:a});if(null!=c)return c.Abbr}}}),G=i.IntegratedTopTeamView.extend({contructor:function(){c.View.apply(this,arguments)},el:"#wisfoxbox > .wisfb_contentContainer",template:n.team_team,childViewTypes:B,initialize:function(a){i.IntegratedTopTeamView.prototype.initialize.apply(this,arguments),this.competition=a.competition,this.leagueModel=a.dataStore.getLeague({competition:this.competition,season:this.sportData.get("ScheduleDate").Season,sequence:this.sportData.get("ScheduleDate").SeasonSequence});var b=a.teamData;this.model=new F({teams:this.leagueModel.get("Teams"),selectedTeamId:a.teamId,selectedTeamData:a.teamData}),this.teamId=Number(a.teamId),this.competitionData=b.competitionData,this.featureCompetitionSeasons=b.featureCompetitionSeasons},initializeAds:function(){if(null!=this.model&&this.model.has("SelectedTeam")&&null!=this.currentViewName){var a=this.model.get("SelectedTeam");i.AdService.adInitialize({sport:"soccer",view:"team/"+a.City+"-"+a.Name+"/"+this.currentViewName})}},getLoadViewArgs:function(){var a=i.IntegratedTopTeamView.prototype.getLoadViewArgs.apply(this,arguments);return a.competitionData=this.competitionData,a.featureCompetitionSeasons=this.featureCompetitionSeasons,a.competitionId=this.competition,a},setTeam:function(a,b){this.teamId=Number(a),this.model.setTeam(a,b)},remove:function(){null!=this.scrolling&&(this.scrolling.remove(),this.scrolling=null),i.IntegratedTopTeamView.prototype.remove.call(this),this.setElement(),this.undelegateEvents(),this.$el.removeData().unbind(),i.IntegratedTopTeamView.prototype.remove.call(this),this.isActive=!1}});!function(){var f={getGroupingTitle:function(a,b,c){return b?null:a+" "+c.RoundName},getSortKey:function(a,b,c,d){return!a.isAllComp&&a.roundDateIndex?(99999999-a.roundDateIndex[b.GameType]).toString()+c.GameDateHash:Number(c.GameDateHash)},getRoundDateIndex:function(a){var c=[];return b.each(a,f.processGameForRoundDateIndex,c),c},processGameForRoundDateIndex:function(a){var b=a.GameType,c=this[b],d=Number(moment(a.Date).format("YYYYMMDD"));(!c||d>c)&&(this[b]=d)},matchGame:function(a){return a.Id==this.Id},isTeamInGame:function(a){return a.AwayTeamId==this.teamId||a.HomeTeamId==this.teamId},getScheduleItems:function(a,c,d){var e=b.extend(c.get("Schedule").Events);if(null!=d){var g=d.get("Schedule").Events,h=b.find(g,f.isTeamInGame,{teamId:a});null!=h&&(e=b.reject(e,f.matchGame,{Id:h.Id}),e.push(h))}return e}},h=c.Model.extend({defaults:{SelectedArgs:{CompetitionId:0,Season:null,Sequence:null}},calculate:function(a){var c=[];null!=a?this.filterSettings=a:a=this.filterSettings;var d=this.get("SelectedArgs");if(null==d){var e=b.findWhere(this.filterSettings,{IsSelected:!0});null==e&&(e=this.filterSettings[0]),d={CompetitionId:e.Id,Season:e.Filter.Season,Sequence:e.Filter.Sequence}}b.each(this.filterSettings,function(a){var b=a.Filter.Competition,e=a.Filter.Season||"null",f=a.Filter.Sequence||"null",g=b==d.CompetitionId,h=a.Text,i={Id:b,Args:JSON.stringify({Id:b,Season:e,Sequence:f}),IsSelected:g,Text:h};c.push(i)}),this.set({Competitions:c,
SelectedArgs:d})},setCompSeason:function(a){var c=b.clone(this.get("SelectedArgs"));c.CompetitionId=a.Id,c.Season=a.Season,c.Sequence=a.Sequence,this.set("SelectedArgs",c)}}),j=c.View.extend({el:"#wisfb_scheduleFilters",events:{"change #wisfb_scheduleFilters":"competitionSeasonChanged"},initialize:function(a){this.statFiltersRequested=!1,this.isRendered=!1,this.dataStore=a.dataStore,this.template=n.team_competitionSeasonSelector},render:function(){var b=this.template(JSON.parse(JSON.stringify(this.model)));this.$el.html(b),this.selCompetitionSeason=a("#wisfb_scheduleFilters"),this.isRendered=!0,this.setSelectedFilters();this.model.get("SelectedArgs")},setSelectedFilters:function(){if(this.isRendered){var a=this.model.get("SelectedArgs");this.selCompetitionSeason.val(a.Value)}},competitionSeasonChanged:function(b){e.triggerEvent("wisfoxbox:analytics",{type:i.analyticsType.filterChange,filterType:"CompetitionSeason"});var c=a(b.target)[0],d=a(c).val(),f=JSON.parse(a(c.options[c.selectedIndex]).attr("data-args"));f.Value=d,this.model.setCompSeason(f),this.model.calculate(),this.setSelectedFilters()}});d.registerPartial("wisfb_soccerTeamScheduleChip",n.team_scheduleTeamGame),B.schedule=c.View.extend({el:"#wisfb_schedule",initialize:function(a){this.parent=a.parent,this.dataStore=a.dataStore,this.competitionSeasons=a.featureCompetitionSeasons.schedule,this.currentSeason=a.competitionData.ScheduleSeason.Season,this.competitionId=a.competitionData.ScheduleSeason.Competition,this.sequence=a.competitionData.ScheduleSeason.Sequence,this.teamId=a.teamId,this.sportData=this.dataStore.SportData,this.currentWeek=this.sportData.get("ScheduleDate"),this.leagueDataModel=null,this.teamScheduleDataModel=null,this.leagueScheduleDataModel=null,this.filterDataModel=this.competitionSeasons,this.filterModel=new h,14===a.competitionData.RosterSeason.Competition&&(this.competitionId=14,this.currentSeason=2015,this.filterModel.set({SelectedArgs:{CompetitionId:14,Season:2015,Sequence:null}}),this.competitionSeasons=b.map(this.competitionSeasons,function(a){var c=b.clone(a),d=c.Filter;return delete c.IsSelected,2015===d.Season&&14===d.Competition&&(c.IsSelected=!0),c})),this.model=new g.ScoresViewModel,this.view=g.GetScoresView({el:"#wisfb_scheduleContent",model:this.model,itemTemplate:"wisfb_soccerTeamScheduleChip"}),this.filterView=new j({model:this.filterModel}),this.listenTo(this.filterModel,"change:SelectedArgs",this.onFilterChanged),this.filterModel.calculate(this.filterDataModel),this.requireUpdate=!0,this.scrolling=a.scrolling,this.loadingAnimation=a.loadingAnimation,this.loaded={schedule:!1}},render:function(){this.$el.show(),this.rendered?(this.renderExpandLink(),this.decommenseThrobber()):(this.filterView.render(),this.scrolling.setScroll(),this.getLeague(),this.getLeagueSchedule(),this.getTeamSchedule(),this.rendered=!0),this.scrolling.setScroll()},decommenseThrobber:function(){this.loaded.schedule&&this.loadingAnimation.loadEnd()},renderExpandLink:function(){null!=this.dmTeam&&null!=this.dmTeam.links.web&&this.parent.SetExpandHref(this.dmTeam.links.web.schedule)},getLeague:function(a){this.dataStore.getLeagueAsync({season:this.currentSeason,sequence:this.sequence,competition:this.competitionId,teamId:this.teamId},b.bind(p,this,"leagueDataModel","change","onScheduleChanged"))},getLeagueSchedule:function(a){this.dataStore.getScheduleAsync({season:this.currentSeason,competition:this.competitionId,sequence:this.sequence},b.bind(p,this,"leagueScheduleDataModel","change:Schedule","onScheduleChanged"))},getTeamSchedule:function(a){this.loadingAnimation.loadStart(),this.dataStore.getTeamScheduleAsync({season:this.currentSeason,teamId:this.teamId,competition:this.competitionId,sequence:this.sequence},b.bind(p,this,"teamScheduleDataModel","change:Schedule","onScheduleChanged"))},onFilterChanged:function(){this.setSelectionFromFilters(),this.forgetModels(),this.getLeagueSchedule(),this.getLeague(),this.getTeamSchedule()},onScheduleChanged:function(){if(this===this.options.parent.currentView){if(null!=this.leagueDataModel&&null!=this.teamScheduleDataModel){this.dmTeam=b.clone(this.teamScheduleDataModel.get("Schedule").Team),this.renderExpandLink();var a=0==this.competitionId;this.view.groupingField=a?null:"RoundName",this.view.groupingTitleField=a?null:this.view.groupingField;var c=f.getScheduleItems(this.teamId,this.teamScheduleDataModel,this.leagueScheduleDataModel),d={isAllComp:a};a||this.leagueDataModel.get("CompetitionType")!=l.CompetitionType.Tournament||(d.roundDateIndex=f.getRoundDateIndex(c)),this.model.calculate(c,this.leagueDataModel,{currentDate:this.currentWeek.Date,cacheKey:this.competitionId,isAllComp:a,showDate:!0,sortKeyFunc:b.bind(f.getSortKey,f,d),chipType:l.ScoreChipType.Schedule}),this.loaded.schedule=!0,this.decommenseThrobber(),this.requireUpdate=!1,this.scrolling.setScroll()}}else this.requireUpdate=!0},forgetModels:function(){null!=this.teamScheduleDataModel&&(this.stopListening(this.teamScheduleDataModel),this.teamScheduleDataModel=null),null!=this.leagueScheduleDataModel&&(this.stopListening(this.leagueScheduleDataModel),this.leagueScheduleDataModel=null),null!=this.leagueDataModel&&(this.stopListening(this.leagueDataModel),this.leagueDataModel=null)},setSelectionFromFilters:function(){var a=this.filterModel.get("SelectedArgs");null!=a&&(this.currentSeason=a.Season||null,this.competitionId=null!=a.CompetitionId?a.CompetitionId:0,this.sequence=a.Sequence||null)},onWeekChanged:function(a){this.isWeekChanging=!0,this.selectedWeek=a,this.currentWeek={Season:this.currentWeek.Season,SeasonType:a.SeasonType,Number:a.Number},this.getSchedule()}})}(),function(){var d=c.Model.extend({calculate:function(a,c,d){var e=this,f=c.get("Stats"),g=[],h=a.get("Teams");b.each(f,function(a){g.push(b.clone(a))}),b.each(g,function(a){if(null!==a.Id&&0!==a.Id&&void 0!==a.Id){var b=h[a.Id];a.Abbreviation=b.Abbr,a.TeamBarStyle="width: "+a.StatValue/a.LeagueLeaderValue*100+"%; background-color: "+b.PrimaryColor+"; height: 15px; border: 1px solid black;",0!=a.StatValue?a.TeamBarStyle=a.TeamBarStyle+" padding-left: 5px;":a.TeamBarStyle=a.TeamBarStyle+" padding-left: 2px",a.LeagueBarStyle="width: "+a.LeagueAverage/a.LeagueLeaderValue*100+"%; background-color: #858585; height: 15px; border: 1px solid black;",0!=a.LeagueAverage?a.LeagueBarStyle=a.LeagueBarStyle+" padding-left: 5px;":a.LeagueBarStyle=a.LeagueBarStyle+" padding-left: 2px";var c=h[a.LeagueLeaderId];a.LeaderAbbreviation=c.Abbr,a.TeamRank=e.calculateRankSuffix(a.TeamRank)}}),this.set("Stats",g)},calculateRankSuffix:function(a){var b=a%10,c=Math.floor(a/10)%10;if(1==c)return a+"th";switch(b){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd";default:return a+"th"}}}),e=c.Model.extend({calculate:function(a,c,d){var e=c.get("Stats"),f=new Object,g=a.get("Teams");f.IsEmpty=e.IsEmpty,f.DisplayFullName=e.DisplayFullName,f.Abbreviation=e.Abbreviation,f.singleTeams=[],b.each(e.singleTeams,function(a){if(null!==a.Id&&0!==a.Id&&void 0!==a.Id){var c=g[a.Id];f.singleTeams.push(b.extend(a,{Name:c.Name,LogoUrl:c.LogoUrl}))}}),this.set("Stats",f)}}),f=c.View.extend({initialize:function(a){this.template=a.template,this.listenTo(this.model,"change:Stats",this.onChange),this.listenTo(this.model,"change:hasCalculated",this.onCalculate)},onChange:function(){var a=this.model.get("Stats"),b=this.template(JSON.parse(JSON.stringify(a)));this.$el.html(b),this.render()},render:function(){this.$el.show()},onCalculate:function(){var a=this.model.get("hasCalculated");a&&this.onChange()}});B.stats=c.View.extend({el:"#wisfb_stats",events:{"click [data-statargs]":"onStatTitleClicked"},initialize:function(a){this.parent=a.parent,this.dataStore=a.dataStore,this.currentSeason=a.competitionData.StatsSeason,this.competitionSeasons=a.featureCompetitionSeasons.stats,this.competitionId=a.competitionId,this.teamId=a.teamId,this.leagueDataModel=null,this.statsDataModel=null,this.playerModel=new v.StatsModel,this.teamLeadersModel=new d,this.teamStatsModel=new e,this.playerView=new q({el:"#wisfb_statsContent",template:n.statsTable,model:this.playerModel}),this.teamLeadersView=new f({el:"#wisfb_statsContent",model:this.teamLeadersModel,template:n.team_statsTeamLeadersGraph}),this.requireUpdate=!0,this.currentView=null,this.scrolling=a.scrolling,this.loadingAnimation=a.loadingAnimation,this.rendered=!1,this.loaded={stats:!1}},render:function(a){this.$el.show(),this.rendered?(this.renderExpandLink(),this.decommenseThrobber()):(this.getLeague(),this.getStatsFilters(),this.rendered=!0),this.scrolling.setScroll()},decommenseThrobber:function(){this.loaded.stats&&this.loadingAnimation.loadEnd()},renderExpandLink:function(){null!=this.leagueDataModel},getLeague:function(a){this.dataStore.getLeagueAsync({season:this.currentSeason.Season,competition:this.competitionId,sequence:this.currentSeason.Sequence},b.bind(p,this,"leagueDataModel","change","onLeagueChanged")),a&&(this.loaded.league=!0,this.decommenseThrobber())},getStats:function(a){this.loadingAnimation.loadStart();var c=this.filtersModel.get("SelectedArgs");c.statType==l.StatTypes.Player?this.dataStore.getStatsAsync(this.filtersModel.get("SelectedArgs"),b.bind(p,this,"statsDataModel","change","updateStats")):this.dataStore.getTeamStatsGraphAsync(this.filtersModel.get("SelectedArgs"),b.bind(p,this,"statsDataModel","change","updateStats"))},getStatsFilters:function(){this.dataStore.getStatFiltersAsync(null,b.bind(p,this,"statFiltersDataModel","change","initializeStatFilters"))},onLeagueChanged:function(){this.updateStats(),this.initializeStatFilters(),this.renderExpandLink()},initializeStatFilters:function(){if(this===this.options.parent.currentView&&!this.statFiltersRendered&&null!=this.leagueDataModel&&null!=this.statFiltersDataModel){var a={filterType:l.StatsFilterType.TeamPlayerSeasonStats,statId:l.StatLeadersFilters.Overall,season:this.currentSeason.Season,sequence:this.currentSeason.Sequence,competition:this.competitionId,timePeriod:this.currentSeason,statType:l.StatTypes.Player,viewType:l.StatViewTypes.Team,teamId:this.teamId};null==this.filtersModel?(this.filtersModel=new v.StatFiltersViewModel({filtersDataModel:this.statFiltersDataModel,timeFrames:this.competitionSeasons}),this.listenTo(this.filtersModel,"change:SelectedArgs",this.getStats)):this.filtersModel.days=this.getStatFilterDays(),this.filtersModel.set({SelectedArgs:a},{silent:!0}),null==this.statFiltersView&&(this.statFiltersView=new w.StatFiltersView({model:this.filtersModel})),this.filtersModel.calculate(),this.statFiltersView.render(),this.scrolling.setScroll(),this.statFiltersRendered=!0,this.getStats()}},updateStats:function(){if(this===this.options.parent.currentView){if(null!=this.leagueDataModel&&null!=this.statsDataModel){this.statFiltersView.setSelectedFilters(),null!==this.currentView&&this.currentView.$el.hide();var a=this.filtersModel.get("SelectedArgs");a.statType==l.StatTypes.Player?this.currentView=this.playerView:this.currentView=this.teamLeadersView,this.currentView.model.calculate(this.leagueDataModel,this.statsDataModel,this.filtersModel.get("SelectedArgs")),this.currentView.$el.show(),this.loaded.stats=!0,this.decommenseThrobber(),this.scrolling.setScroll()}else this.requireUpdate=!0;this.loadingAnimation.loadEnd()}},onStatTitleClicked:function(b){b.preventDefault();var c=this.filtersModel.getStatTypeName();this.parent.analyticsClick(c+"StatTitle");var d=a(b.currentTarget),e=JSON.parse(d.attr("data-statargs"));this.filtersModel.set("SelectedArgs",e),this.statFiltersView.setSelectedFilters()}})}(),function(){var a=c.Model.extend({constructor:function(){c.Model.apply(this,arguments)},calculate:function(a){var c=b.map(a.get("TeamRoster").Athletes,function(a){return b.clone(a)});this.set({Roster:c})}});B.roster=c.View.extend({el:"#wisfb_roster",analyticsClickMapping:[new r(".wisfb_stats a","Player")],initialize:function(b){this.parent=b.parent,this.dataStore=b.dataStore,this.currentSeason=b.competitionData.RosterSeason.Season,this.currentSequence=b.competitionData.RosterSeason.Sequence,this.competitionSeasons=b.featureCompetitionSeasons.stats,this.competitionId=b.competitionData.RosterSeason.Competition,this.teamId=b.teamId,this.sportData=this.dataStore.SportData,this.viewModel=new a,this.view=new i.SimpleBackboneHandlebarsView({el:"#wisfb_roster",model:this.viewModel,template:n.team_roster}),this.scrolling=b.scrolling,this.loadingAnimation=b.loadingAnimation,this.loaded={roster:!1,league:!1}},render:function(){this.$el.show(),this.rendered?this.decommenseThrobber():(this.getRoster(),this.getLeague(),this.rendered=!0)},decommenseThrobber:function(){this.loaded.roster&&this.loadingAnimation.loadEnd()},renderExpandLink:function(){null!=this.leagueDataModel},getLeague:function(a){this.dataStore.getLeagueAsync({season:this.currentSeason,sequence:this.currentSequence,group:this.competitionId},b.bind(p,this,"leagueDataModel","change","renderExpandLink"))},getRoster:function(a){this.dataStore.getTeamRosterAsync({season:this.currentSeason,sequence:this.currentSequence,teamId:this.teamId,group:this.competitionId},b.bind(p,this,"rosterDataModel","change","updateRoster"))},updateRoster:function(){this===this.options.parent.currentView?null!=this.rosterDataModel&&(this.viewModel.calculate(this.rosterDataModel),this.requireUpdate=!1,this.loaded.roster||(this.loaded.roster=!0,this.decommenseThrobber()),this.scrolling.setScroll()):this.requireUpdate=!0}})}();var H=i.IntegratedAppView.extend({initialize:function(a){this.dataStore=g.GetDataStore(a.RootUrl,a.BuildDate,a.SportData,a.Competition),this.dataStore.StatsFilters=a.StatsFilters,this.teamId=a.Team,this.worldCupCompetitionId=a.WorldCupCompetitionId,this.worldCupDefaultTeamId=a.WorldCupDefaultTeamId,this.competition=a.Competition,i.IntegratedAppView.prototype.initialize.call(this,a),null!=this.teamId?this.dataStore.getTeamIntegratedInfoAsync({teamId:this.teamId,competition:this.competition},b.bind(this.loadTeamIntegratedInfo,this,b.bind(this.load,this)),null):this.load()},loadTeamIntegratedInfo:function(a,c){var d=c.get("Options");this.teamData={logo:d.Logo,primaryColor:d.PrimaryColor,competitionData:d.CompetitionData,featureCompetitionSeasons:d.FeatureCompetitionSeasons},b.isFunction(a)&&a()},loadView:function(a,c,d){void 0===a&&(a=this.teamId),d=d||{},d.worldCupCompetitionId=this.worldCupCompetitionId,d.worldCupDefaultTeamId=this.worldCupDefaultTeamId;var e=null,f=a!==this.teamId;this.teamId=a,null==a||0==a?(null==this.leagueView&&(this.leagueView=new A({parent:this,dataStore:this.dataStore,viewname:c,viewargs:d})),this.teamView=null,e=this.leagueView,this.setView(e,void 0,c,d)):(null==this.teamView&&(this.teamView=new G({teamId:this.teamId,parent:this,dataStore:this.dataStore,viewname:c,viewargs:d,competition:this.competition,teamData:this.teamData})),this.dataStore.getTeamIntegratedInfoAsync({teamId:this.teamId,competition:this.competition},b.bind(this.loadTeamIntegratedInfo,this,b.bind(this.setTeamView,this,a,e,f,c,d))))},setTeamView:function(a,b,c,d,e){this.teamView.setTeam(a,this.teamData),this.leagueView=null,b=this.teamView,this.setView(b,c,d,e)},remove:function(){this.currentView.remove(),this.currentView=null,this.teamView=null,this.leagueView=null,this.options=null,this.loadView=function(){},this.dataStore.remove(),this.dataStore=null,a(window).off("resize",this.resizer),this.undelegateEvents(),this.$el.removeData().unbind(),i.IntegratedAppView.prototype.remove.call(this)}});return{init:function(a){var b=i.getAppOptions(a);return new H(b)}}});