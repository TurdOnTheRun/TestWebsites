/*! ssa_core 2016-01-04 9:36:14 AM */
(function(e){var t=function(e,t,n,i){var a,o,s=t.SSA_CORE,r="44.4.4",l=5,c="1.7.2",d="www.supersonicads.com",u=t.location.protocol,p="https:"!==u?"http://s.ssacdn.com":"https://a248.e.akamai.net/ssastatic.s3.amazonaws.com",f=".min.gz",g=".min",m=[],h="",y="",v={},C={},b=[],F=!1,I={},B={close:"Close",next:"Next",back:"Back",replay:"Replay",notification:"",title:"",callToAction:""},D={width:1,height:1,fitToFrame:1,onCampaignsReady:1,onCampaignsDone:1,onCampaignOpen:1,onCampaignClose:1,onCampaignCompleted:1,domain:1,ads:1,closeButton:1,navigationCss:1,achievements:1},M={},w=565,x='		<div id="{{id}}Overlay" class="ssaInterstitialOverlay ssa{{type}}"></div>		<div id="{{id}}Content" class="ssaInterstitialContent ssa{{type}}" style="direction:{{direction}};">			<div class="ssaInterstitialCloseIcon ssaInterstitialClose" id="ssaInterstitialCloseIcon">&times;</div>			<div class="ssaInterstitialContainer">				<input name="ssaInterstitialFocus" class="ssaInterstitialFocus" id="ssaInterstitialFocus" type="text" value="" />				<div class="ssaInterstitialTopBar" id="ssaInterstitialTopBar">					{{title}}				</div>				<div class="ssaInterstitialMessage {{displayCallToAction}}" id="ssaInterstitialMessage">					<div class="ssaInterstitialCallToAction" id="ssaInterstitialCallToAction"><span>{{callToAction}}</span></div>					<div class="ssaInterstitialNotification" id="ssaInterstitialNotification"><span>{{notification}}</span></div>				</div>				<div id="ssaInterstitialErrorMessage" class="adErrorHidden">Sorry, something went wrong with this video.<br><span>Please try again.</span></div>				<div class="ssaInterstitialFrameWrap" id="ssaInterstitialFrameWrap" style="width:{{widthStr}};height:{{heightStr}};">					{{adContent}}				</div>				<div class="ssaInterstitialBottomBar" id="ssaInterstitialBottomBar">					<div class="ssaInterstitialButton ssaInterstitialClose" id="ssaInterstitialClose">{{close}}</div>					<div class="ssaInterstitialButton ssaInterstitialPagination" id="ssaInterstitialPaginationNext">{{next}}</div>					<div class="ssaInterstitialTooltip" id="ssaInterstitialNextTooltip">{{replay}}</div>					<div class="ssaInterstitialButton ssaInterstitialPagination" id="ssaInterstitialPaginationBack">{{back}}</div>				</div>			</div>		</div>',A='<iframe id="ssaInterstitialFrame" name="ssaInterstitialFrame" class="{{frameClass}}" style="z-index:9997;width:100%;height:100%;" allowtransparency="true" frameborder="0" scrolling="{{scroll}}" src="{{page}}"></iframe>',S=function(){var e=o("#ssaInterstitialFrame");e.load(T)},T=function(){a.PubSub.publish("BrandManager.nextOffer",[])},E=function(){var e=v.getQuerystring("ssa_cb",!1),t=e?"?v="+Math.floor(1001*Math.random()):"";p=v.isDefined(M.cdn)?M.cdn:p,p=decodeURIComponent(v.getQuerystring("ssa_cdn",v.getQuerystring("cdn",p))),("true"==v.getQuerystring("ssa_dontMinGz",!1)||v.isDefined(M.dontMinGz)&&M.dontMinGz)&&(f="",g=""),I={jquery:"//code.jquery.com/jquery-"+c+".min.js",css:p+"/inlineDelivery/modules/"+r+"/css/ultra"+f+".css"+t,load:p+"/inlineDelivery/images/load3.gif",cssMobileBrandConnect:p+"/brandconnect/css/mobileBrandConnect.3"+f+".css"+t,Achievements:p+"/inlineDelivery/modules/achievements"+f+".js"+t,CpmAds:p+"/inlineDelivery/modules/cpmAds"+f+".js"+t,MobileBrandConnect:p+"/inlineDelivery/modules/mobileBrandConnect"+f+".js"+t,BrandManager:p+"/inlineDelivery/modules/"+r+"/brandManager"+f+".js"+t,IframePlayer:p+"/inlineDelivery/modules/iframePlayer"+f+".js"+t,Detecto:p+"/inlineDelivery/modules/detecto"+f+".js"+t,flowplayer_js:p+"/brandconnect/flowplayer/flowplayer-3.2.11"+f+".js"+t,flowplayer_ova_jquery:p+"/brandconnect/flowplayer/ova-jquery"+f+".js"+t,flowplayer_swf:p+"/brandconnect/flowplayer/flowplayer.commercial-3.2.12.swf"+t,flowplayer_ova:p+"/brandconnect/flowplayer/ova.1.0.1.swf"+t,flowplayer_logo:p+"/brandconnect/flowplayer/logov2.png"}},k=function(){var e,t,n,i=["demoCampaigns","applicationUserId","siteUserId"],a=i.length;for(n=a-1;n>=0;n--)e="ssa_"+i[n],t=v.getQuerystring(e,!1),t&&(M[i[n]]=t)},P=function(){var e=new Image;e.src=I.load},j=function(){typeof o!==i?o(function(){a.init()}):a.log("jquery was not loaded")},O=function(){a.jQuery=o=t.jQuery.noConflict(!0),a.log("loaded jQuery "+o.fn.jquery),j()},N=function(){typeof t.jQuery===i||t.jQuery.fn.jquery!==c?v.getScript(I.jquery,O):(a.jQuery=o=t.jQuery,j())},U=function(){var e=o("head");e.prepend('<link rel="stylesheet" class="ssaStylesheetMain ssaDestructable" type="text/css" />'),o(".ssaStylesheetMain").attr("href",I.css),typeof M.navigationCss!==i&&a.appendCss("ssaStylesheetNav",M.navigationCss,e),typeof M.customCss!==i&&(v.validateURL(M.customCss)?a.appendCss("ssaStylesheetCustom",M.customCss,e):a.log("Notice: Use an absolute url for customCss in ssa_json configuration"))},R=function(e){var t,n=[],a=e.split("/"),s=a.length;if(-1===e.indexOf("JSON:")){if(s>=2&&0===s%2)for(t=0;s>t;t+=2)n[a[t]]=a.length>=t+1?unescape(a[t+1]):null}else{var r=e.split("JSON:");typeof r[1]!==i&&(n=o.parseJSON(r[1]))}return n},z=function(){var e;for(e in M)a.ignore(e)||e.toLowerCase().match("custom_")&&(m[e]=M[e],h+="&"+e+"="+m[e])},_=function(e){e&&(e.innerHTML="",e.style.display="none")},$=function(){o.easing.brandConnectEasing=function(e,t,n,i,a,o){return o===undefined&&(o=1.70158),i*((t=t/a-1)*t*((o+1)*t+o)+1)+n},o.fn.exists=function(){return this.length>0},o.fn.textfill=function(e){var t,n,i=e.maxFontPixels,a=o("span:visible:first",this),s=o(this).height(),r=o(this).width();do a.css("font-size",i),t=a.height(),n=a.width(),i-=1;while(t>s||n>r&&i>3);return this},o.single=function(e){return function(t){return e[0]=t,e}}(o([1]))},H=function(e,t){if(!t)return e;for(var n in t){var i=RegExp("{{"+n+"}}","g"),a=t[n];e=e.replace(i,a)}return e};return{debug:!1,direction:"ltr",start:function(t){var o;try{a=this,M="object"==typeof t?t:e,typeof M!==i&&(typeof M.siteId!==i&&typeof M.siteUserId!==i||typeof M.applicationKey!==i&&typeof M.applicationUserId!==i||typeof M.videoCoins!==i||typeof M.iframePlayerReady!==i)&&(typeof M.debug!==i?this.debug=M.debug:(o=n.location.href,this.debug=o.match(/(\?|&)debug\w*?=true/)||o.match(/(\?|&)debug\w*?=1/)),typeof M.domain!==i&&(d=M.domain),typeof M.protocol!==i&&(u=M.protocol),v=this.Utils,k(),E(),this.log("version: "+this.version()),setTimeout(N,10))}catch(s){this.log({type:"in start",data:s})}},init:function(){M=o.extend(!0,{},M),z(),U(),P(),$(),F||(F=!0,this.Msg.init(a,a.msgHandler,u+"//"+d),this.PubSub.init()),this.modulesBootstrap()},startDisplayAds:function(){this.loadModule("DisplayAds")},startBrandConnect:function(){this.loadModule("BrandConnect")},modulesBootstrap:function(){this.loadModule("BrandConnect"),this.loadModule("Ultra"),this.loadModule("DisplayAds"),v.isDefined(M.deviceOs)&&this.loadModule("MobileBrandConnect"),v.isDefined(M.iframePlayerReady)&&this.loadModule("IframePlayer",M.iframePlayerReady),this.PubSub.subscribe("Detecto.init",function(){var e="ui94_cl";v.isDefined(t[e])&&(a.Detecto=t[e],a.Detecto.init({jquery:o,applicationUserId:M.applicationUserId,applicationKey:M.applicationKey}))})},msgHandler:function(e){var t,n,a,o=e.data,s=o.split("$$")[1];if(typeof s!==i)for(t=R(s),typeof t.url!==i||typeof t.dynamicParameter!==i?"inline"===t.target&&this.PubSub.publish("BrandConnect.engageInline",[t]):typeof t.notificationHeight!==i?this.PubSub.publish("resizeNotificationWraper",[t.notificationHeight]):typeof t.close!==i?this.close(t.close):typeof t.hideClose!==i&&this.hideCloseBtn(),n=b.length,a=0;n>a;a++)this.runMsgHandler(b[a],t)},addMsgHandler:function(e){return v.isDefined(e)&&v.isFunction(e.validation)&&v.isFunction(e.callback)&&b.push(e),this},runMsgHandler:function(e,t){e.validation(t)&&e.callback(t)},open:function(e){if(typeof e.id===i)return this.log("no id"),!1;var s,r,l,c,u,p,f,g,m,y,C,b,F,I,D=e.id,x=o("#"+D+"Interstitial"),T=o("#"+D),E="",k="",P="no",j="ssaInterstitialFrame",O=o.extend(!0,B,typeof e.labels!==i?e.labels:{}),N=0,U=0,R="px",z=0,_=0,$=0,Q=0,W=0,L={},K="ssaInterstitialNone";if(s="BC",v.isDefined(e.type)&&(s=e.type),x.exists()||(x=o("<div>"),x.attr({id:D+"Interstitial","class":"ssaDestructable"}),T.exists()?T.append(x):o("body").append(x),x.show().hide()),I=typeof e.forceSize!==i?e.forceSize:!1,"MBC"!=s&&typeof e.width!==i&&typeof e.height!==i)N=parseInt(e.width,10),w>N&&!I&&(N=w),U=parseInt(e.height,10);else{if("MBC"!=s)return this.log("width && height are missing"),!1;N=100,U=100,R="%"}if(F=typeof M.scrollToEngagement!==i?M.scrollToEngagement:!1,b=A,typeof e.url!==i){var q=encodeURIComponent(n.location.href);e.url+=-1!=e.url.indexOf("#")||e.passReferrerAsQueryParam?"&ultraReferrer="+q:"#"+q,k=e.url}else typeof e.html!==i?b=e.html:(typeof e.dynamicParameter!==i?k="/delivery/click.php?dynamicParameter="+e.dynamicParameter+h:(k=typeof M.applicationKey!==i?"/delivery/panel.php?applicationKey="+M.applicationKey+"&applicationUserId="+M.applicationUserId+h:"/delivery/panel.php?siteId="+M.siteId+"&siteUserId="+M.siteUserId+h,P="auto",j="ssaInterstitialFrameOW"),k="//"+d+k);P=typeof e.overflow!==i?e.overflow:P,c=typeof e.title!==i?e.title:typeof O.title!==i?O.title:"",u=typeof O.notification!==i?O.notification:"",p=typeof O.replay!==i?O.replay:"",f="",typeof e.callToAction!==i&&""!==e.callToAction&&(K="ssaInterstitialBlock",f=e.callToAction),typeof e.notification!==i&&""!==e.notification&&(u=e.notification),typeof e.rewards!==i&&(e.rewards>1?(c=c.replace("$2",O.currencyPlural),u=u.replace("$2",O.currencyPlural),p=p.replace("$2",O.currencyPlural)):(c=c.replace("$2",O.currencySingular),u=u.replace("$2",O.currencySingular),p=p.replace("$2",O.currencySingular)),c=c.replace("$1",e.rewards),u=u.replace("$1",e.rewards),p=p.replace("$1",e.rewards)),l=this.direction,typeof e.direction!==i&&""!==e.direction&&(l=e.direction),E=typeof e.template===i?this.getTemplate():e.template,E=H(E,{adContent:b,id:D,type:s,width:N,height:U,widthStr:N+R,heightStr:U+R,title:c,notification:u,replay:p,callToAction:f,displayCallToAction:K,frameClass:j,scroll:P,page:k,direction:l,close:O.close,next:O.next,back:O.back}),x.html(E),r=o("#"+D+"Content"),x.css({visibility:"hidden",display:"block"}),"MBC"!==s&&(_=r.outerHeight(),z=r.outerWidth(),$=_/2,Q=z/2,L={"margin-left":"-"+Q+"px","margin-top":"-"+$+"px"},typeof M.verticalAlign!==i&&"middle"!==M.verticalAlign.toLowerCase()&&("top"===M.verticalAlign.toLowerCase()?W="0px":-1!==M.verticalAlign.toLowerCase().indexOf("px")&&(W=M.verticalAlign),L["margin-top"]=W,L.position="absolute",L.top="0px",F&&o("html,body").animate({scrollTop:W},500,function(){o("#ssaInterstitialFocus").css({display:"block",top:W}).focus().css("display","none")})),r.css(L)),x.css({visibility:"visible",display:"none"}).fadeIn(600),g=o("#ssaInterstitialCallToAction"),m=o("#ssaInterstitialNotification"),y=o("#ssaInterstitialMessage"),C=y.width(),g.css({width:C+"px"}).textfill({maxFontPixels:15}),m.css({width:C+"px"}).textfill({maxFontPixels:15}),o(".ssaInterstitialClose").one("click",function(){a.close(D)}),t.onkeyup=function(e){var n=t.event?t.event.keyCode:e.keyCode;27===n&&a.close(D)},o("#ssaInterstitialPaginationBack").click(function(){a.back()});var G=o("#ssaInterstitialNextTooltip"),V=-1*(.5*o("#ssaInterstitialPaginationNext").outerWidth()+.5*G.outerWidth());G.css("right",V),(!v.isDefined(e.loadNextOnFrameLoad)||e.loadNextOnFrameLoad)&&S()},adError:function(e){e===this.BrandConnect.id&&this.PubSub.publish("BrandConnect.onAdError",[])},displayError:function(){var e=o("#ssaInterstitialErrorMessage");o("#ssaInterstitialFrameWrap").html(""),e.removeClass("adErrorHidden"),e.addClass("adErrorDisplayed")},close:function(e){o("#ssaInterstitialFrameWrap").html(""),o("#"+e+"Interstitial").fadeOut(500,function(){_(this)}),e===this.BrandConnect.id&&this.PubSub.publish("BrandConnect.onClosed",[])},resize:function(e,t,n){var a,s,r,l,c,d;e=Math.max(w,e),o("#ssaInterstitialFrameWrap").css({width:e+"px",height:t+"px"}),(typeof M.verticalAlign===i||"middle"===M.verticalAlign.toLowerCase())&&(a=o(".ssaInterstitialContent"),l=a.outerHeight(),r=a.outerWidth(),d=l/2,c=r/2,s={"margin-left":"-"+c+"px","margin-top":"-"+d+"px"},a.animate(s,800,"brandConnectEasing")),v.isFunction(n)&&n()},back:function(){var e=n.getElementById("ssaInterstitialFrame");v.isDefined(e.contentWindow)&&e.contentWindow.history.back()},hideCloseBtn:function(){o(".ssaInterstitialClose").fadeOut(1e3)},showCloseBtn:function(){o(".ssaInterstitialClose").fadeIn(1e3)},hideNextTooltip:function(){o("#ssaInterstitialNextTooltip").fadeOut(500)},showNextTooltip:function(){o("#ssaInterstitialNextTooltip").fadeIn(500)},appendCss:function(e,t,n){var i=n!==undefined?n:o("head");i.append('<link rel="stylesheet" class="'+e+' ssaDestructable" type="text/css" />'),o("."+e).attr("href",t)},renderTemplate:H,setCustomTempalte:function(e){return o.ajax({url:e,data:{},type:"POST",dataType:"jsonp",success:function(e){typeof e.template!==i&&a.setTemplate(e.template),typeof e.customCss!==i&&a.appendCss("ssaStylesheetCustom",e.customCss),typeof e.mainCss!==i&&(o(".ssaStylesheetMain").remove(),a.appendCss("ssaStylesheetMain",e.mainCss))}})},setTemplate:function(e){typeof e!==i&&(y=e)},getTemplate:function(){return""==y?x:y},getConfiguration:function(e){return typeof e===i?M:M[e]},register:function(e,t){return typeof e!==i&&typeof t!==i&&(M[e]=t,this.log(["configuration register, ",o.extend(!0,{},M)])),this},defer:function(e,t){typeof C[e]!==i?C[e].push(t):C[e]=[t]},execDefered:function(e){typeof C[e]!==i&&o.each(C[e],function(e,t){"function"==typeof t&&t()})},loadModule:function(e,t){var n=this.Utils;this.isModuleDefined(e)?(n.isFunction(this[e].init)&&this[e].init(),n.isFunction(t)&&t()):typeof I[e]!==i&&n.getScript(I[e],function(){n.isDefined(a[e])&&n.isFunction(a[e].init)?a[e].init():a.PubSub.publish(e+".init",[]),a.log(["loaded and intiated:",e]),n.isFunction(t)&&t()})},isModuleDefined:function(e){return typeof this[e]!==i},destruct:function(){var e=this.PubSub.publish;typeof o!==i&&o(".ssaDestructable").remove(),e("BrandConnect.resetOffers",[])},ignore:function(e){return typeof D[e]!==i||"object"==typeof M[e]||"function"==typeof M[e]?!0:!1},api:function(){return u+"//"+d+"/delivery/"},domain:function(){return d},customParameters:function(){return m},src:function(e){return I[e]},json:function(){return o.extend(!0,[],M)},version:function(){return r},apiVersion:function(){return l},noConflict:function(){return typeof s!==i&&t.SSA_CORE===this&&(this.log(["old version: ",s.version()]),t.SSA_CORE=s),this},log:function(e){this.debug&&(typeof t.console!==i?console.log("SupersonicAds: ",e):alert(e))}}}("object"==typeof e.ssa_json?e.ssa_json:{},e,document,"undefined"),n=t.Utils=function(e,t,n,i){return{getScript:function(t,i,a){var o=n.createElement("script");o.src=t;var s=n.getElementsByTagName("head")[0],r=!1;o.onload=o.onreadystatechange=function(){r||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(r=!0,i(),o.onload=o.onreadystatechange=null,s.removeChild(o))},o.onerror=function(t){e.log(["script load error",t]),a&&a()},s.appendChild(o)},getQuerystring:function(e,n,i){i=this.isDefined(i)?i:t.location.href,null==n&&(n=""),e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var a=RegExp("[\\?&]"+e+"=([^&#]*)"),o=a.exec(i);return null==o?n:o[1]},serialize:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")},validateURL:function(e){return/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)},isDefined:function(e){return typeof e!==i},isFunction:function(e){return"function"==typeof e},isString:function(e){return"string"==typeof e},toIpv4:function(e){if(this.isDefined(e)){for(var t=e,n=t%256,i=3;i>0;i--)t=Math.floor(t/256),n=t%256+"."+n;return n}},firePixel:function(e){if(e){var t=new Image;t.src=e}}}}(t||{},e,document,"undefined");t.DisplayAds=function(e,t,n,i){var a,o,s=0,r=[],l={},c=!1,d=e.Utils,u=d.isDefined,p=d.isFunction,f=function(){e.PubSub.subscribe("DisplayAds.reloadAd",function(e){o.reloadAd(e)})},g={cpe:function(t,i,a){var o=n.createDocumentFragment(),s=n.createElement("iframe"),r=n.createElement("div"),c=e.src("load");s.src=m(l.ads[a]),s.frameBorder=0,s.scrolling="no",s.height=t.height,s.width=t.width,s.style.background="url("+c+") no-repeat center center #333333",r.setAttribute("id",t.id+"Interstitial"),r.className="ssaInterstitialWrap",o.appendChild(s),o.appendChild(r),i.appendChild(o)},cpm:function(t,n,i){var a=function(){e.PubSub.publish("CpmAds.getAd",[t,n,i])};e.isModuleDefined("CpmAds")?a():e.defer("CpmAds",a)}},m=function(a){var o,s,r,c=""+t.location,d=(escape(c),"//"+e.domain()+"/delivery/singleBanner.php?supportedTargets=inline_blank&v="+e.version()),p=Math.floor(10001*Math.random()),f="";u(a.width)&&u(a.height)&&(r=a.width+"x"+a.height);for(o in a)e.ignore(o)||(d+="&"+o+"="+a[o]);for(s in l)e.ignore(s)||(d+="&"+s+"="+l[s]);return d+="&size="+r+"&parentElement="+a.id+"&r="+p+"#"+encodeURIComponent(n.location.href),typeof l.protocol!==i&&(f=l.protocol),f+d};return{init:function(){try{var t,n;if(l=e.getConfiguration(),o=this,u(l.ads)){for(n=l.ads,a=e.jQuery,typeof n.length===i&&(n=[n]),s=n.length,t=0;s>t;t++)if(u(n[t].type)&&"cpm"==n[t].type){e.loadModule("CpmAds");break}if(this.injectAds(),c)return;f(),c=!0}}catch(r){e.log({type:"in DisplayAds init",data:r})}},injectAds:function(){for(var t="",a=0;s>a;a++)r[a]=n.getElementById(l.ads[a].id),u(r[a])?(t=typeof l.ads[a].type===i?"cpe":l.ads[a].type,e.log(["ad ",a,t]),p(g[t])&&(g[t](l.ads[a],r[a],a),e.log("Display Ad was added on: "+l.ads[a].id))):e.log(l.ads[a].id+" - is not valid id on your page")},reloadAd:function(e){var t,n,i=a("#"+e+" > iframe"),o="?bust="+Math.floor(1e4*Math.random())+"&";i.exists()&&(t=i.attr("src"),n=t.split("?"),t=n[0]+o+n[1],i.attr("src",t))}}}(t||{},e,document,"undefined"),t.Ultra=function(e,t){var n,i,a,o={},s={},r={},l={},c={},u=e.Utils,p=u.isDefined;u.isFunction;var f=function(){p(o.labels)&&(s=o.labels),p(o.settings)&&(l=o.settings),p(o.settings.direction)&&(e.direction=o.settings.direction),p(o.providers)&&(r=o.providers)},g=function(){n.config.pagination=p(c.pagination)?c.pagination:p(l.pagination)?l.pagination:!0,a=n.config.pagination,n.config.notifications=p(c.notifications)?c.notifications:p(l.notifications)?l.notifications:!0,p(l.navigationCss)&&!p(c.navigationCss)&&e.appendCss("ssaStylesheetNav",l.navigationCss),p(l.customCss)&&!p(c.customCss)&&e.appendCss("ssaStylesheetCustom",l.customCss),p(l.mainCss)&&!p(c.mainCss)&&(i(".ssaStylesheetMain").remove(),e.appendCss("ssaStylesheetMain",l.mainCss)),p(l.customTemplate)&&!p(c.customTemplate)&&e.setCustomTempalte(l.customTemplate),e.PubSub.publish("Ultra.settingsReady",[n.config])};return{id:"ssaUltra",config:{pagination:!0,notifications:!0},init:function(){i=e.jQuery,n=this;var t,a=i.browser;return a.msie&&"7.0"==a.version||p(document.compatMode)&&"BackCompat"==document.compatMode?(e.log(["sorry there is currently no support for this browser",["boxmodel",i.support.boxModel],["browser",a],document.compatMode]),undefined):(c=e.getConfiguration(),p(c.customTemplate)&&e.setCustomTempalte(c.customTemplate),p(c.onCampaignsReady)&&!p(c.deviceOs)&&(t=n.getUltraSettings()),undefined)},getUltraSettings:function(){var a=i.extend(!0,{api:"/api/rest/v2.0/ultra/cpv?",apiData:{},parseCallback:n.parseUltraSettings,callbackContext:n},{}),o="//"+e.domain()+a.api,s=i.extend({v:e.version()},a.apiData);typeof c.applicationKey!==t?(s.applicationUserId=c.applicationUserId,s.applicationKey=c.applicationKey):(s.siteUserId=c.siteUserId,s.siteId=c.siteId);for(var r in c)e.ignore(r)||(s[r]=c[r]);return i.ajax({url:o,data:s,type:"GET",dataType:"jsonp",success:function(e){a.parseCallback.call(a.callbackContext,e)}})},parseUltraSettings:function(t){try{o=d=t,p(d.errorMessage)&&"OK"!=d.errorMessage&&e.log(["Ultra request msg:",d.errorMessage]),f(),g(),e.loadModule("BrandManager",function(){e.PubSub.publish("BrandManager.start",[o])})}catch(n){e.log({type:"in parseUltraSettings",data:n})}},getConfigurations:function(){return o},getVirtualItemCallToAction:function(){return s.callToAction.replace("$1",s.itemAmount).replace("$2",s.itemName)}}}(t||{},"undefined"),t.BrandConnect=function(e,t){var n,i,a,o={},s=!1,r=!1,l=!1,c=null,d={},u={},p={},f="MBC",g="BC",m="DA",h=g,y=e.Utils,v=y.isDefined,C=y.isFunction,b=function(){var t=e.PubSub.subscribe;t("Ultra.settingsReady",function(e){n.config=e}),t("BrandConnect.engageInline",function(e){n.engageInline(e)}),t("BrandConnect.engageByType",function(e){n.engageByType(e)}),t("BrandConnect.close",function(){n.close()}),t("BrandConnect.onOpened",function(e){n.onOpened(e)}),t("BrandConnect.onClosed",function(){n.onClosed()}),t("BrandConnect.onAdError",function(){n.onAdError()}),t("BrandConnect.resetOffers",function(){w()}),t("BrandConnect.getOffersStatus",function(e,t,n){M(e,t,n)}),t("BrandConnect.changeCurrentType",function(e){D(e)}),t("BrandConnect.registerOffer",function(e){n.registerOffer(e)}),t("BrandConnect.resize",function(t,n,i){e.resize(t,n,i)}),t("BrandConnect.3rdPartyComplete",function(e){n.onEnded(e)}),t("BrandConnect.nextReady",function(e){v(e)&&(c=e,n.showNextBtn())}),e.addMsgHandler({name:"BrandConnect.onEnded",validation:function(e){return v(e.ended)},callback:function(e){n.onEnded(e.ended)}}).addMsgHandler({name:"BrandConnect.onCompleted",validation:function(e){return v(e.completed)},callback:function(e){n.onCompleted(e.completed)}}).addMsgHandler({name:"BrandConnect.showNextBtn",validation:function(e){return v(e.showNext)},callback:function(e){n.showNextBtn(e.showNext)}}).addMsgHandler({name:"BrandConnect.ETCompleted",validation:function(e){return v(e.ETCompleted)},callback:function(e){n.onETCompleted(e.ETCompleted)}}).addMsgHandler({name:"BrandConnect.adError",validation:function(e){return v(e.adError)},callback:function(){n.adError()}})},F=function(){o&&(v(o.labels)&&(d=o.labels),v(o.settings)&&(u=o.settings))},I=function(){n.config.brandManager=v(p.brandManager)?p.brandManager:v(u.brandManager)?u.brandManager:!1,n.config.pagination=v(p.pagination)?p.pagination:v(u.pagination)?u.pagination:!0,a=n.config.pagination,n.config.notifications=v(p.notifications)?p.notifications:v(u.notifications)?u.notifications:!0,v(u.navigationCss)&&!v(p.navigationCss)&&e.appendCss("ssaStylesheetNav",u.navigationCss),v(u.customCss)&&!v(p.customCss)&&e.appendCss("ssaStylesheetCustom",u.customCss),v(u.mainCss)&&!v(p.mainCss)&&(i(".ssaStylesheetMain").remove(),e.appendCss("ssaStylesheetMain",u.mainCss)),v(u.customTemplate)&&!v(p.customTemplate)&&e.setCustomTempalte(u.customTemplate)},B=function(e){var t=0,i=n.DB[h].offers;t=i.length;for(var a=t-1;a>=0;a--)if(i[a].offerId==e)return i[a];return-1},D=function(e){h=e},M=function(e,t,i){!v(e)&&(e=h),C(t)&&t.call(i,n.DB[e])},w=function(){n.DB={MBC:{offers:[],current:0,completedCount:0},BC:{offers:[],current:0,completedCount:0},AC:{offers:[],current:0,completedCount:0},DA:{offers:[],current:0,completedCount:0},OW:{offers:[],current:0,completedCount:0}}},x=function(){var e=null;return{init:function(){e=this.BrandManager,e.init()},ready:function(t){e.ready(t)},opened:function(t){e.opened(t),C(t.onOpened)&&t.onOpened()},error:function(e){C(e.onError)&&e.onError(e)},closed:function(t){e.closed(t),C(t.onClosed)&&t.onClosed(t)},tracked:function(t){e.tracked(t),C(t.onTracked)&&t.onTracked()},completed:function(t){e.completed(t),C(t.onCompleted)&&t.onCompleted()},done:function(t){e.done(t)}}}();return x.BrandManager=function(){var t;return{init:function(){t=e.PubSub.publish},ready:function(t){e.BrandManager.SupersonicAds,e.PubSub.publish("BrandManager.providerIsReady",[t])},opened:function(n){var i=v(n.provider)?n.provider:e.BrandManager.SupersonicAds;t("BrandManager.providerAdOpened",[i,n])},closed:function(n){var i=v(n.provider)?n.provider:e.BrandManager.SupersonicAds;t("BrandManager.providerAdClosed",[i,n])},tracked:function(n){var i=v(n.provider)?n.provider:e.BrandManager.SupersonicAds;t("BrandManager.providerAdTracked",[i,n])},completed:function(n){var i=v(n.provider)?n.provider:e.BrandManager.SupersonicAds;t("BrandManager.providerAdCompleted",[i,n])},done:function(n){var i=v(n.provider)?n.provider:e.BrandManager.SupersonicAds;t("BrandManager.providerIsDone",[i,n])}}}(),{id:"ssaBrandConnect",config:{pagination:!0,notifications:!0},DB:{},init:function(){i=e.jQuery,n=this;var t=i.browser;return t.msie&&"7.0"==t.version||v(document.compatMode)&&"BackCompat"==document.compatMode?(e.log(["sorry there is currently no support for this browser",["boxmodel",i.support.boxModel],["browser",t],document.compatMode]),undefined):(w(),p=e.getConfiguration(),x.init(!0),s||(b(),s=!0),v(p.customTemplate)&&e.setCustomTempalte(p.customTemplate),undefined)},getBrandedCampaigns:function(a){var o=i.extend(!0,{api:"brandConnect.php",apiData:{},parseCallback:n.parseBrandedCampaigns,callbackContext:n,type:g},a||{}),s=e.api()+o.api,r=i.extend({v:e.version()},o.apiData);typeof p.applicationKey!==t?(r.applicationUserId=p.applicationUserId,r.applicationKey=p.applicationKey):(r.siteUserId=p.siteUserId,r.siteId=p.siteId),r.popup="string"==typeof p.onCampaignsReady&&"popup"===p.onCampaignsReady?1:0,p.maxWidth=typeof p.maxWidth!==t?p.maxWidth:typeof p.fitToFrame!==t&&p.fitToFrame===!0&&i(document).width()!==t?i(document).width():0,p.maxHeight=typeof p.maxHeight!==t?p.maxHeight:typeof p.fitToFrame!==t&&p.fitToFrame===!0&&i(document).height()!==t?i(document).height():0,typeof p.closeButton===t||p.closeButton||(r.closeButton=0);for(var l in p)e.ignore(l)||(r[l]=p[l]);return i.ajax({url:s,data:r,type:"GET",dataType:"jsonp",success:function(e){o.parseCallback.call(o.callbackContext,e,o.type)}})},parseBrandedCampaigns:function(t,n){try{var a,s,r=[],l=0,c=0;if(e.domain(),o=s=t.response,v(s.errorMessage)&&"OK"!=s.errorMessage&&e.log(["BC request msg:",s.errorMessage]),v(s.offers)){for(l=s.offers.length,c=0;l>c;c++){var d=s.offers[c];d.width>0&&d.height>0&&(d.completed=!1,-1===d.url.indexOf(e.domain())&&(d.url="//"+e.domain()+d.url),e.debug&&(d.url+="&debug=1"),d.url+="#"+encodeURIComponent(document.location.href),d.type=n,r.push(d))}F(),I(n),this.DB[n].offers=r,a=i.extend(!0,[],r),e.log("total offers: "+a.length),e.log(a),x.ready(a),"string"==typeof p.onCampaignsReady&&"popup"===p.onCampaignsReady&&this.engage()}}catch(u){e.log({type:"in parseBrandedCampaigns",data:u})}},open:function(n){var i,a,o;if(i=this.DB[h],a=i.offers,v(n)?i.current=n:n=i.current,v(a[n])){o=a[n];var s={id:this.id,type:o.type,width:o.width,height:o.height,rewards:o.rewards,passReferrerAsQueryParam:v(o.passReferrerAsQueryParam)?o.passReferrerAsQueryParam:!1,url:o.url,callToAction:v(o.callToAction)?o.callToAction:"",notification:v(o.notification)?o.notification:"",labels:v(o.labels)?o.labels:d};v(o.title)&&(s.title=o.title),v(o.html)&&(s.html=o.html),v(o.overflow)&&(s.overflow=o.overflow),v(o.forceSize)&&(s.forceSize=o.forceSize),v(o.loadNextOnFrameLoad)&&(s.loadNextOnFrameLoad=o.loadNextOnFrameLoad),e.open(s),r=!0,e.PubSub.publish("BrandConnect.onOpened",[o.offerId])}if(v(arguments)&&v(arguments.callee)&&v(arguments.callee.caller)&&v(arguments.callee.caller.arguments)){var l=arguments.callee.caller.arguments[0];typeof l!==t&&typeof p.preventDefault!==t&&(C(l.preventDefault)?l.preventDefault():l.returnValue=!1)}},engage:function(){try{e.PubSub.publish("BrandManager.engage",[])}catch(t){e.log({type:"in engage",data:t})}},engageInline:function(e){var t;a=this.config.pagination,y.isDefined(e.pagination)&&(this.config.pagination=e.pagination),h=v(e.type)?e.type:m,t=this.registerOffer(e),db=this.DB[h],db.current=t.length-1,this.open()},engageByType:function(e){h=v(e)?e:h,this.open()},getConfigurations:function(){return o},adError:function(){e.adError(this.id)},close:function(){e.close(this.id)},resize:function(t,n,i){e.resize(t,n,i)},registerOffer:function(e){var t=this.DB[h].offers;return t.push(e),t},registerLabels:function(e){d=e},status:function(){var e=i.extend(!0,{},o);return v(e.offers)&&delete e.offers,e},onOpened:function(t){e.log("opened "+t);var n=B(t);-1!=n&&(r&&x.opened(n),l=!1)},onAdError:function(){db=this.DB[h],current=db.current,offer=db.offers[current],e.log("error in "+offer.offerId),x.error(offer),c&&c.ready?c.replay?e.displayError():this.onClosed():e.displayError()},onClosed:function(){db=this.DB[h],current=db.current,offer=db.offers[current],e.log("closed "+offer.offerId),this.config.pagination=a,r&&(r=!1,x.closed(offer)),h==m&&offer.completed&&v(offer.id)&&e.PubSub.publish("DisplayAds.reloadAd",[offer.id]),h=h==f?f:g},onEnded:function(t){e.log("ended "+t);var n=B(t);v(n)&&!n.tracked?(this.showNotification(),this.showNextBtn(),x.completed(n)):v(n)&&v(n.tracked)&&n.tracked&&(this.showNotification(),this.showNextBtn())},onCompleted:function(t){e.log("tracked "+t);var n=B(t),i=this.DB[h];-1!=n&&(n.completed||(n.completed=!0,i.completedCount++),x.tracked(n))},onETCompleted:function(t){e.log("e tracked "+t);var n=B(t),i=this.DB[h];-1!=n&&(n.completed||(n.completed=!0,i.completedCount++,x.tracked(n)),n.tracked||(n.tracked=!0,x.completed(n)))},onDone:function(){},showNextBtn:function(){var t,a;return this.config.pagination?(t=c,a=i("#ssaInterstitialPaginationNext"),t?t&&!t.ready?!1:(l?(a.click(function(){n.nextOffer()}).addClass("ssaInterstitialPaginationReady").removeClass("ssaInterstitialPaginationNotReady"),t.replay&&a.hover(function(){e.showNextTooltip()},function(){e.hideNextTooltip()})):(a.addClass("ssaInterstitialPaginationNotReady"),l=!0),undefined):(a.css({display:"none"}),!1)):!1},showNotification:function(){var e,t,n="brandConnectEasing";this.config.notifications&&(e=i("#ssaInterstitialNotification"),t=i("#ssaInterstitialMessage"),"none"==t.css("display")&&(t.slideDown(1e3),n="linear"),e.css({display:"block",opacity:0,width:"100%"}).animate({top:"-10",opacity:1},700,n))},nextOffer:function(){e.close(this.id),c=null,setTimeout(function(){n.engage()},1e3)},getVirtualItemCallToAction:function(){return d.callToAction.replace("$1",d.itemAmount).replace("$2",d.itemName)}}}(t||{},"undefined"),t.Msg=function(e){var t=null;return{init:function(n,i,a){return t||(t=this[e.postMessage?"Generic":"Hash"]),this.receiveMessage(function(e){i.call(n,e)},a),this},postMessage:function(e,n,i){t.postMessage(e,n,i)},receiveMessage:function(e,n){t.receiveMessage(e,n)},setEngine:function(e){return this[e]!==undefined&&(t=this[e]),this}}}(e),t.Msg.Generic=function(e){var t,n=function(e){return-1!==e.search(/supersonicads\.com/i)?!0:!1};return{postMessage:function(t,n,i){n&&(i=i||e.parent,i.postMessage(t,n.replace(/([^:]+:\/\/[^\/]+).*/,"$1")))},receiveMessage:function(i,a){i&&(t=function(e){var t=n(e.origin);return"string"==typeof a&&e.origin!==a&&!t||"[object Function]"===Object.prototype.toString.call(a)&&a(e.origin)===!1?!1:(i(e),undefined)}),e.addEventListener?e[i?"addEventListener":"removeEventListener"]("message",t,!1):e[i?"attachEvent":"detachEvent"]("onmessage",t)}}}(e),t.Msg.Hash=function(e){var t,n=1;return{postMessage:function(t,i,a){i&&(a=a||e.parent,a.location=i.replace(/#.*$/,"")+"#"+ +new Date+n++ +"&"+t)
},receiveMessage:function(e){t&&clearInterval(t),t=null,e&&(t=setInterval(function(){var t=document.location.hash;""!==t&&"#"!==t&&(document.location.hash="#",e({data:t}))},500))}}}(e),t.PubSub=function(e){var t,n,i={};return{init:function(){n=e.jQuery,t=this},publish:function(t,a){try{n.each(i[t],function(){this.apply(n,a||[])})}catch(o){e.log({type:"in PubSub "+t,data:o})}},subscribe:function(e,t){return i[e]||(i[e]=[]),i[e].push(t),[e,t]},unsubscribe:function(e){var t=e[0];i[t]&&n.each(i[t],function(n){this==e[1]&&i[t].splice(n,1)})}}}(t||{}),e.SSA_CORE=t,t.start(),n.isFunction(e.ssaAsyncInit)&&!e.ssaAsyncInit.hasRun&&(e.ssaAsyncInit.hasRun=!0,e.ssaAsyncInit())})(window,void 0);